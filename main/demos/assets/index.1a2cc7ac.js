import{et as _,eu as v,ev as d,ew as s,ex as f,ey as k,ez as u,eA as h,eB as l,eC as A,eD as g,eE as B,eF as N,eG as C,eH as E,eI as x,eJ as V,eK as D,eL as m,eM as y,eN as L,eO as $,eP as F,eQ as T,eR as H,eS as O}from"./main.d8c8794a.js";const P=_({name:"DefaultAppbarButtonV",props:{panelId:{type:String,required:!0},minimize:{type:Boolean,default:!1}},computed:{panelButton(){return this.$iApi.panel.get(this.panelId)?.button}},methods:{onClickFunction(){this.minimize?this.$iApi.panel.toggleMinimize(this.panelId):this.$iApi.panel.toggle(this.panelId)}}}),R=["innerHTML"];function q(e,t,r,a,i,n){const o=d("appbar-button");return e.panelButton?(s(),f(o,{key:0,onClickFunction:e.onClickFunction,tooltip:e.$t(e.panelButton.tooltip),id:e.panelId},{default:k(()=>[u("div",{class:"fill-current w-24 h-24 ml-8 sm:ml-20",innerHTML:e.panelButton.icon},null,8,R)]),_:1},8,["onClickFunction","tooltip","id"])):h("v-if",!0)}var G=v(P,[["render",q],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/default-button.vue"]]);const j=_({name:"AppbarDividerV"}),J={class:"border-b p-0 self-center w-2/3"};function K(e,t,r,a,i,n){return s(),l("span",J)}var Q=v(j,[["render",K],["__scopeId","data-v-655a8815"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/divider.vue"]]);const U=_({name:"MoreAppbarButtonV",props:{position:{type:String,default:"bottom-right"},tooltip:{type:[String,Boolean],default:!1},tooltipPlacement:{type:String,default:"bottom"}},data(){return{open:!1}},mounted(){window.addEventListener("click",e=>{e.target instanceof HTMLElement&&!this.$el.contains(e.target)&&(this.open=!1)},{capture:!0})}}),W=e=>(C("data-v-18020f26"),e=e(),E(),e),X={class:"relative inset-x-0 w-full h-48 text-center"},Y=["content"],Z=W(()=>u("svg",{class:"fill-current w-24 h-24 m-auto",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[u("path",{d:"M0 0h24v24H0z",fill:"none"}),u("path",{d:"M6 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm12 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm-6 0c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})],-1)),ee=[Z],te=["position"];function oe(e,t,r,a,i,n){const o=A("focus-item"),p=A("tippy");return s(),l("div",X,[g((s(),l("button",{class:"text-gray-400 w-full h-full focus:outline-none hover:text-white",onClick:t[0]||(t[0]=w=>e.open=!e.open),content:e.$t("appbar.more")},ee,8,Y)),[[o],[p,{placement:"right"}]]),g(u("div",{onBlur:t[1]||(t[1]=w=>e.open=!1),position:e.position,id:"dropdown",class:"dropdown shadow-md border border-gray:200 absolute py-8 w-64 bg-white rounded text-center z-10"},[N(e.$slots,"default",{},void 0,!0)],40,te),[[B,e.open]])])}var ne=v(U,[["render",oe],["__scopeId","data-v-18020f26"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/more-button.vue"]]);const re=_({name:"NotificationsAppbarButtonV",data(){return{number:x("notification/notificationNumber")}},methods:{onClick(){this.$iApi.panel.toggle("notifications")}}}),ae=e=>(C("data-v-2ccdb150"),e=e(),E(),e),ie=ae(()=>u("svg",{class:"fill-current w-24 h-24 mx-8 sm:mx-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[u("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),se={key:0,class:"number absolute top-1 right-2 text-white w-18 rounded-full"};function pe(e,t,r,a,i,n){const o=d("appbar-button",!0);return s(),f(o,{onClickFunction:e.onClick,tooltip:e.$t("notifications.title"),class:"notification-button",id:""},{default:k(()=>[h(" https://fonts.google.com/icons?selected=Material%20Icons%3Anotifications "),ie,e.number&&e.number>0?(s(),l("span",se,V(e.number),1)):h("v-if",!0)]),_:1},8,["onClickFunction","tooltip"])}var le=v(re,[["render",pe],["__scopeId","data-v-2ccdb150"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/appbar-button.vue"]]);const ce=_({name:"AppbarV",components:{"default-button":G,divider:Q,"more-button":ne,"notifications-appbar-button":le,"about-ramp-dropdown":D},data(){return{items:x("appbar/visible"),temporaryItems:x("appbar/temporary"),overflow:!1}},updated(){this.$nextTick(()=>{const e=this.$refs.el;let t=[...e.childNodes],r=t[t.length-2].clientTop,a=document.getElementById("dropdown");for(let o=t.length-3;o>=0;o--){let p=t[o].clientTop+t[o].clientHeight;if(r&&a&&(p>=r||this.overflow&&p+48>=r))console.log(`[${o}]`,t[o].getBoundingClientRect()),t[o].classList.remove("hover:text-white","text-gray-400"),t[o].classList.add("text-black","hover:bg-gray-100"),e.removeChild(t[o]),a.appendChild(t[o]),this.overflow||(this.overflow=!0);else break}let i=document.getElementById("more"),n=e.clientTop+e.clientHeight;if(this.overflow&&r&&i&&a&&n!==0&&(n<=r-48||a.childElementCount==1)){for(;n<=r-48||a.childElementCount==1;){let o=a.firstElementChild;o&&(o.classList.remove("text-black","hover:bg-gray-100"),o.classList.add("text-gray-400","hover:text-white"),a.removeChild(o),e.insertBefore(o,i))}a.childElementCount==0&&(this.overflow=!1)}})},methods:{addComponentIdSuffix(e){return e.includes("-appbar-button")?e:`${e}-appbar-button`}}}),de={class:"absolute top-0 left-0 bottom-28 flex flex-col items-stretch w-40 pointer-events-auto appbar bg-black-75 z-50 sm:w-64 sm:z-0 sm:bottom-38",ref:"el"};function ue(e,t,r,a,i,n){const o=d("default-button"),p=d("divider"),w=d("more-button"),M=d("notifications-appbar-button"),z=d("about-ramp-dropdown"),S=A("focus-list");return g((s(),l("div",de,[(s(!0),l(m,null,y(e.items,(b,_e)=>(s(),l(m,null,[(s(!0),l(m,null,y(b,(c,I)=>(s(),l(m,null,[typeof c=="string"?(s(),f(o,{key:`${c}-${I}`,panelId:c,class:"appbar-item h-48"},null,8,["panelId"])):(s(),f(L(e.addComponentIdSuffix(c.componentId)),{key:`${c}-${I}`,options:c.options,id:c.id,class:"appbar-item h-48"},null,8,["options","id"]))],64))),256)),$(p,{class:"appbar-item"})],64))),256)),(s(!0),l(m,null,y(e.temporaryItems,b=>(s(),f(o,{panelId:b,minimize:!0,key:`${b}-temp`,class:"appbar-item h-48"},null,8,["panelId"]))),128)),g($(w,{id:"more"},null,512),[[B,e.overflow]]),$(M,{class:"appbar-item bottom-48 h-48 sm:display-none"}),h(" TODO: disabled this button for now, revist this when we need it in the future "),h(' <nav-button id="nav"></nav-button> '),$(z,{class:"absolute bottom-0 h-40 sm:display-none w-full text-center",position:"right-start"})])),[[S]])}var me=v(ce,[["render",ue],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/appbar.vue"]]);class fe extends F{get config(){return super.config}_parseConfig(t){if(!t)return;let r;Array.isArray(t.items[0])?r=t.items:r=[t.items];let a=[];r.forEach(i=>{a.push(i.map(n=>typeof n=="string"?n:new T(n)))}),this.$vApp.$store.set("appbar/items",a.flat().reduce((i,n)=>(i[n.id||n]=n,i),{})),this.$vApp.$store.set("appbar/order",a.map(i=>i.map(n=>n.id||n))),this._validateItems()}_validateItems(){this.$vApp.$store.get("appbar/order").flat().forEach(t=>{typeof this.$vApp.$store.get(`appbar/items@${t}`)!="string"&&[t].some(r=>{this.$iApi.fixture.get(r)&&this.$vApp.$store.set(`appbar/items@${t}.componentId`,r)})})}}var he={en:{"appbar.navigation":"Navigation","appbar.more":"More","navigation.export":"Export","navigation.map.export":"Export Map"},fr:{"appbar.navigation":"Navigation","appbar.more":"Plus","navigation.export":"Exporter","navigation.map.export":"Exporter la Carte"}};class be extends fe{initialized(){console.log(`[fixture] ${this.id} initialized`)}async added(){console.log(`[fixture] ${this.id} added`),this.$vApp.$store.registerModule("appbar",H()),Object.entries(he).forEach(p=>this.$vApp.$i18n.mergeLocaleMessage(...p));const{vNode:t,destroy:r,el:a}=this.mount(me,{app:this.$element}),i=this.$vApp.$el.getElementsByClassName("inner-shell")[0];i.insertBefore(a.childNodes[0],i.querySelector(".panel-stack")),this._parseConfig(this.config);let n=this.$vApp.$watch(()=>this.config,p=>this._parseConfig(p)),o=[];o.push(this.$iApi.event.on(O.COMPONENT,this._validateItems.bind(this))),this.removed=()=>{this.$vApp.$store.unregisterModule("appbar"),o.forEach(p=>this.$iApi.event.off(p)),n(),r()}}}export{be as default};
