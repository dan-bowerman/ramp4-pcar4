const Yle=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function r(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerpolicy&&(s.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?s.credentials="include":n.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=r(n);fetch(n.href,s)}};Yle();var Wp=(e=>(e.BLOB="blob",e.DATE="date",e.DOUBLE="double",e.GEOMETRY="geometry",e.GLOBAL_ID="global-id",e.GUID="guid",e.INTEGER="integer",e.LONG="long",e.OID="oid",e.RASTER="raster",e.SINGLE="single",e.SMALL_INTEGER="small-integer",e.STRING="string",e.XML="xml",e))(Wp||{}),hc=(e=>(e.CIRCLE="circle",e.CROSS="cross",e.DIAMOND="diamond",e.ICON="icon",e.PATH="path",e.SQUARE="square",e.TRIANGLE="triangle",e.X="x",e))(hc||{}),Ts=(e=>(e.DASH="dash",e.DASHDOT="dash-dot",e.DASHDOTDOT="short-dash-dot-dot",e.DOT="dot",e.LONGDASH="long-dash",e.LONGDASHDOT="long-dash-dot",e.LONGDASHDOTDOT="long-dash-dot-dot",e.NONE="none",e.NULL="none",e.SHORTDASH="short-dash",e.SHORTDASHDOT="short-dash-dot",e.SHORTDASHDOTDOT="short-dash-dot-dot",e.SHORTDOT="short-dot",e.SOLID="solid",e))(Ts||{}),lH=(e=>(e.BEVEL="bevel",e.MITER="miter",e.ROUND="round",e))(lH||{}),uH=(e=>(e.ROUND="round",e.BUTT="butt",e.SQUARE="square",e))(uH||{}),cH=(e=>(e.BDIAG="backward-diagonal",e.CROSS="cross",e.DIAG_CROSS="diagonal-cross",e.FDIAG="forward-diagonal",e.HORIZONTAL="horizontal",e.NONE="none",e.NULL="none",e.SOLID="solid",e.VERTICAL="vertical",e))(cH||{}),Vt=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e.LINEARRING="LinearRing",e.EXTENT="Extent",e.NONE="None",e.UNKNOWN="Unknown",e))(Vt||{}),PT=(e=>(e.Simple="simple",e.Unique="uniqueValue",e.ClassBreaks="classBreaks",e.Unknown="unknown",e))(PT||{}),yr=(e=>(e.FEATURE="esri-feature",e.MAPIMAGE="esri-map-image",e.TILE="esri-tile",e.IMAGERY="esri-imagery",e.GRAPHIC="esri-graphic",e.WMS="ogc-wms",e.WFS="ogc-wfs",e.GEOJSON="file-geojson",e.CSV="file-csv",e.SHAPEFILE="file-shape",e.OSM="osm-tile",e.UNKNOWN="unknown",e.SUBLAYER="sublayer",e))(yr||{}),Rl=(e=>(e.FEATURE="feature",e.GRAPHIC="graphic",e.IMAGERY="imagery",e.MAPIMAGE="map-image",e.OSM="osm-tile",e.TILE="tile",e.UNKNOWN="unknown",e.WMS="wms",e))(Rl||{}),To=(e=>(e.ESRI_FEATURE="esriFeature",e.ESRI_RASTER="esriRaster",e.ESRI_TILE="esriTile",e.OSM_TILE="osmTile",e.OGC_RASTER="ogcRaster",e.UNKNOWN="unknown",e))(To||{}),us=(e=>(e.POINT="Point",e.MULTIPOINT="MultiPoint",e.LINESTRING="LineString",e.MULTILINESTRING="MultiLineString",e.POLYGON="Polygon",e.MULTIPOLYGON="MultiPolygon",e))(us||{}),Xa=(e=>(e.NEW="new",e.LOADING="loading",e.LOADED="loaded",e.ERROR="error",e))(Xa||{}),Yf=(e=>(e.NOT_LOADED="not-loaded",e.REFRESH="refresh",e.UP_TO_DATE="up-to-date",e))(Yf||{}),mm=(e=>(e.ESRI="esri",e.TEXT="text",e.IMAGE="image",e.HTML="html",e.XML="xml",e.JSON="json",e.UNKNOWN="unknown",e))(mm||{}),fi=(e=>(e.BoundaryZoom="boundaryZoom",e.Boundingbox="boundingBox",e.Datatable="datatable",e.Identify="identify",e.Metadata="metadata",e.Opacity="opacity",e.Refresh="refresh",e.Reload="reload",e.Remove="remove",e.Settings="settings",e.Symbology="symbology",e.Visibility="visibility",e))(fi||{}),P3=(e=>(e.SYMBOL="symbol",e.GRID="grid",e.EXTENT="extent",e.API="api",e))(P3||{});class hh{attributes;geometry;style;id;constructor(t,r,i){this.geometry=t,r?this.id=r:this.id=R0.sharedUtils.generateUUID(),i?this.attributes=i:this.attributes={}}_hover;get hover(){return this._hover}set hover(t){t&&this._hover&&this._hover.id!==t.id&&this.removeHover(),this._hover=t}removeHover(){this._hover&&(this._hover=void 0)}}const Kle="modulepreload",VF={},Xle="./",ae=function(t,r){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=`${Xle}${i}`,i in VF)return;VF[i]=!0;const n=i.endsWith(".css"),s=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${s}`))return;const o=document.createElement("link");if(o.rel=n?"stylesheet":Kle,n||(o.as="script",o.crossOrigin=""),o.href=i,document.head.appendChild(o),n)return new Promise((a,l)=>{o.addEventListener("load",a),o.addEventListener("error",()=>l(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};function c(e,t,r,i){var n,s=arguments.length,o=s<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(e,t,r,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(s<3?n(o):s>3?n(t,r,o):n(t,r))||o);return s>3&&o&&Object.defineProperty(t,r,o),o}function Qle(e){return e&&e.release&&typeof e.release=="function"}function eue(e){return e&&e.acquire&&typeof e.acquire=="function"}class vl{constructor(t,r,i,n=1,s=0){if(this.ctor=t,this.acquireFunction=r,this.releaseFunction=i,this.allocationSize=n,this._pool=new Array(s),this._initialSize=s,this.ctor)for(let o=0;o<s;o++)this._pool[o]=new this.ctor;this.allocationSize=Math.max(n,1)}destroy(){this.prune(0)}acquire(...t){let r;if(vl.test.disabled)r=new this.ctor;else{if(this._pool.length===0){const i=this.allocationSize;for(let n=0;n<i;n++)this._pool[n]=new this.ctor}r=this._pool.pop()}return this.acquireFunction?this.acquireFunction(r,...t):eue(r)&&r.acquire(...t),r}release(t){t&&!vl.test.disabled&&(this.releaseFunction?this.releaseFunction(t):Qle(t)&&t.release(),this._pool.push(t))}prune(t=this._initialSize){if(!(t>=this._pool.length)){for(let r=t;r<this._pool.length;++r){const i=this._pool[r];this._dispose(i)}this._pool.length=t}}_dispose(t){t.dispose&&typeof t.dispose=="function"&&t.dispose()}}vl.test={disabled:!1};function tue(e){e.length=0}class cs{constructor(t=50,r=50){this._pool=new vl(Array,void 0,tue,r,t)}acquire(){return this._pool.acquire()}release(t){this._pool.release(t)}prune(){this._pool.prune(0)}static acquire(){return i4.acquire()}static release(t){return i4.release(t)}static prune(){i4.prune()}}const i4=new cs(100);var UF,zF;let th;var BF,GF;(UF=globalThis.dojoConfig)!=null&&UF.has||(zF=globalThis.esriConfig)!=null&&zF.has?th={...(BF=globalThis.dojoConfig)==null?void 0:BF.has,...(GF=globalThis.esriConfig)==null?void 0:GF.has}:th={};function ge(e){return typeof th[e]=="function"?th[e]=th[e](globalThis):th[e]}ge.add=(e,t,r,i)=>((i||th[e]===void 0)&&(th[e]=t),r&&ge(e)),ge.cache=th,ge.add("esri-deprecation-warnings",!0),(()=>{var e;ge.add("host-webworker",globalThis.WorkerGlobalScope!==void 0&&self instanceof globalThis.WorkerGlobalScope);const t=typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document;if(ge.add("host-browser",t),ge.add("host-node",typeof globalThis.process=="object"&&((e=globalThis.process.versions)==null?void 0:e.node)&&globalThis.process.versions.v8),ge.add("dom",t),ge("host-browser")){const r=navigator,i=r.userAgent,n=r.appVersion,s=parseFloat(n);if(ge.add("wp",parseFloat(i.split("Windows Phone")[1])||void 0),ge.add("msapp",parseFloat(i.split("MSAppHost/")[1])||void 0),ge.add("khtml",n.includes("Konqueror")?s:void 0),ge.add("edge",parseFloat(i.split("Edge/")[1])||void 0),ge.add("opr",parseFloat(i.split("OPR/")[1])||void 0),ge.add("webkit",!ge("wp")&&!ge("edge")&&parseFloat(i.split("WebKit/")[1])||void 0),ge.add("chrome",!ge("edge")&&!ge("opr")&&parseFloat(i.split("Chrome/")[1])||void 0),ge.add("android",!ge("wp")&&parseFloat(i.split("Android ")[1])||void 0),ge.add("safari",!n.includes("Safari")||ge("wp")||ge("chrome")||ge("android")||ge("edge")||ge("opr")?void 0:parseFloat(n.split("Version/")[1])),ge.add("mac",n.includes("Macintosh")),!ge("wp")&&i.match(/(iPhone|iPod|iPad)/)){const o=RegExp.$1.replace(/P/,"p"),a=i.match(/OS ([\d_]+)/)?RegExp.$1:"1",l=parseFloat(a.replace(/_/,".").replace(/_/g,""));ge.add(o,l),ge.add("ios",l)}ge.add("trident",parseFloat(n.split("Trident/")[1])||void 0),ge("webkit")||(!i.includes("Gecko")||ge("wp")||ge("khtml")||ge("trident")||ge("edge")||ge.add("mozilla",s),ge("mozilla")&&ge.add("ff",parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0))}})(),(()=>{if(globalThis.navigator){const e=navigator.userAgent,t=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(e),r=/iPhone/i.test(e);t&&ge.add("esri-mobile",t),r&&ge.add("esri-iPhone",r),ge.add("esri-geolocation",!!navigator.geolocation)}ge.add("esri-canvas-svg-support",!ge("trident")),ge.add("esri-wasm","WebAssembly"in globalThis),ge.add("esri-shared-array-buffer",()=>{const e="SharedArrayBuffer"in globalThis,t=globalThis.crossOriginIsolated===!1;return e&&!t}),ge.add("esri-atomics","Atomics"in globalThis),ge.add("esri-workers","Worker"in globalThis),ge.add("esri-text-decoder","TextDecoder"in globalThis),ge.add("esri-text-encoder","TextEncoder"in globalThis),ge.add("web-feat:cache","caches"in globalThis),ge.add("esri-workers-arraybuffer-transfer",!ge("safari")||Number(ge("safari"))>=12),ge.add("featurelayer-simplify-thresholds",[.5,.5,.5,.5]),ge.add("featurelayer-simplify-payload-size-factors",[1,1,4]),ge.add("featurelayer-snapshot-enabled",!0),ge.add("featurelayer-snapshot-point-min-threshold",8e4),ge.add("featurelayer-snapshot-point-max-threshold",4e5),ge.add("featurelayer-snapshot-point-coverage",.1),ge.add("featurelayer-advanced-symbols",!1),ge.add("featurelayer-pbf",!0),ge.add("featurelayer-pbf-statistics",!1),ge.add("feature-layers-workers",!0),ge.add("mapview-transitions-duration",200),ge.add("mapserver-pbf-enabled",!1),ge.add("vectortilelayer-max-buffers",ge("ff")?160:Number.POSITIVE_INFINITY),ge("host-webworker")||ge("host-browser")&&(ge.add("esri-csp-restrictions",()=>{try{new Function}catch{return!0}return!1}),ge.add("esri-image-decode",()=>{if("decode"in new Image){const e=new Image;return e.src='data:image/svg+xml;charset=UTF-8,<svg version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>',void e.decode().then(()=>{ge.add("esri-image-decode",!0,!0,!0)}).catch(()=>{ge.add("esri-image-decode",!1,!0,!0)})}return!1}),ge.add("esri-url-encodes-apostrophe",()=>{const e=window.document.createElement("a");return e.href="?'",e.href.includes("?%27")}))})();const qF=new Set;function rue(e,t,r=!1){r&&qF.has(t)||(r&&qF.add(t),e.warn(`\u{1F6D1} DEPRECATED - ${t}`))}function tg(e,t,r={}){if(ge("esri-deprecation-warnings")){const{moduleName:i}=r;RT(e,`Function: ${(i?i+"::":"")+t+"()"}`,r)}}function iue(e,t,r={}){if(ge("esri-deprecation-warnings")){const{moduleName:i}=r;RT(e,`Property: ${(i?i+"::":"")+t}`,r)}}function RT(e,t,r={}){if(ge("esri-deprecation-warnings")){const{replacement:i,version:n,see:s,warnOnce:o}=r;let a=t;i&&(a+=`
	\u{1F6E0}\uFE0F Replacement: ${i}`),n&&(a+=`
	\u2699\uFE0F Version: ${n}`),s&&(a+=`
	\u{1F517} See ${s} for more details.`),rue(e,a,o)}}const nue=null;function U(e){return e!=null}function ce(e){return e==null}function Wet(e){return e===void 0}function y1(e,t){return U(e)?t(e):nue}function Jet(e){return e}function Zet(e,t){if(ce(e))throw new Error(t);return e}function IL(e,t){return U(e)?e:typeof t=="function"?t():t}function Tu(e){return U(e)&&e.destroy(),null}function Yet(e){return U(e)&&e.dispose(),null}function LT(e){return U(e)&&e.remove(),null}function AA(e){return U(e)&&e.abort(),null}function Ket(e){return U(e)&&e.release(),null}function sue(e){return null}function Xet(e,t){const r=new Array;for(const i of e)r.push(Wg(i,null,t));return r}function Qet(e,t){for(const r of e)Wg(r,null,t)}function Wg(e,t,r){return U(e)?r(e):t}function HF(e,t){return U(e)?t(e):null}function ett(e){return e.filter(t=>U(t))}function hH(e,...t){let r=e;for(let i=0;i<t.length&&r;++i)r=r[t[i]];return r}function ttt(e){return e}class xo{constructor(t=1){this._seed=t}set seed(t){this._seed=t??Math.random()*xo._m}getInt(){return this._seed=(xo._a*this._seed+xo._c)%xo._m,this._seed}getFloat(){return this.getInt()/(xo._m-1)}getIntRange(t,r){return Math.round(this.getFloatRange(t,r))}getFloatRange(t,r){const i=r-t;return t+this.getInt()/xo._m*i}}xo._m=2147483647,xo._a=48271,xo._c=0;function dH(e,t,r){if(ce(e)&&ce(t))return!0;if(ce(e)||ce(t)||e.length!==t.length)return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function rtt(e){return e&&typeof e.length=="number"}const oue=!!Array.prototype.fill;function aue(e,t){if(oue)return new Array(e).fill(t);const r=new Array(e);for(let i=0;i<e;i++)r[i]=t;return r}function itt(e,t){t===void 0&&(t=e,e=0);const r=new Array(t-e);for(let i=e;i<t;i++)r[i-e]=i;return r}function lue(e){return e.reduce((t,r)=>t.concat(r||[]),[])}class pH{constructor(){this.last=0}}const fH=new pH;function mH(e,t,r,i){i=i||fH;const n=Math.max(0,i.last-10);for(let o=n;o<r;++o)if(e[o]===t)return i.last=o,o;const s=Math.min(n,r);for(let o=0;o<s;++o)if(e[o]===t)return i.last=o,o;return-1}function TL(e,t,r,i){const n=r??e.length,s=mH(e,t,n,i);if(s!==-1)return e[s]=e[n-1],r==null&&e.pop(),t}const Aa=new Set;function uue(e,t,r=e.length,i=t.length,n,s){if(i===0||r===0)return r;Aa.clear();for(let a=0;a<i;++a)Aa.add(t[a]);n=n||fH;const o=Math.max(0,n.last-10);for(let a=o;a<r;++a)if(Aa.has(e[a])&&(s&&s.push(e[a]),Aa.delete(e[a]),e[a]=e[r-1],--r,--a,Aa.size===0||r===0))return Aa.clear(),r;for(let a=0;a<o;++a)if(Aa.has(e[a])&&(s&&s.push(e[a]),Aa.delete(e[a]),e[a]=e[r-1],--r,--a,Aa.size===0||r===0))return Aa.clear(),r;return Aa.clear(),r}new xo;function cue(e,t){const r=e.indexOf(t);return r!==-1?(e.splice(r,1),t):null}function ntt(e,t){if(e.forEach)e.forEach(t);else for(let r=0;r<e.length;r++)t(e[r],r,e)}function hue(e,t,r){if(e.slice)return e.slice(t,r);t===void 0?t=0:(t<0&&(t+=e.length),t=Math.min(e.length,Math.max(0,t))),r===void 0?r=e.length:(r<0&&(r+=e.length),r=Math.min(e.length,Math.max(0,r)));const i=Math.max(0,r-t),n=new e.constructor(i);for(let s=0;s<i;s++)n[s]=e[t+s];return n}function stt(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}function due(e){return e instanceof Int8Array||e&&e.constructor&&e.constructor.name==="Int8Array"}function pue(e){return e instanceof Uint8Array||e&&e.constructor&&e.constructor.name==="Uint8Array"}function fue(e){return e instanceof Uint8ClampedArray||e&&e.constructor&&e.constructor.name==="Uint8ClampedArray"}function mue(e){return e instanceof Int16Array||e&&e.constructor&&e.constructor.name==="Int16Array"}function yue(e){return e instanceof Uint16Array||e&&e.constructor&&e.constructor.name==="Uint16Array"}function gue(e){return e instanceof Int32Array||e&&e.constructor&&e.constructor.name==="Int32Array"}function vue(e){return e instanceof Uint32Array||e&&e.constructor&&e.constructor.name==="Uint32Array"}function bue(e){return e instanceof Float32Array||e&&e.constructor&&e.constructor.name==="Float32Array"}function wue(e){return e instanceof Float64Array||e&&e.constructor&&e.constructor.name==="Float64Array"}function yH(e,t){let r;if(t)for(r in e)e.hasOwnProperty(r)&&(e[r]===void 0?delete e[r]:e[r]instanceof Object&&yH(e[r],!0));else for(r in e)e.hasOwnProperty(r)&&e[r]===void 0&&delete e[r];return e}function ie(e){if(!e||typeof e!="object"||typeof e=="function")return e;if(due(e)||pue(e)||fue(e)||mue(e)||yue(e)||gue(e)||vue(e)||bue(e)||wue(e))return hue(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof ArrayBuffer)return e.slice(0,e.byteLength);if(e instanceof Map){const i=new Map;return e.forEach((n,s)=>{i.set(s,ie(n))}),i}if(e instanceof Set){const i=new Set;return e.forEach(n=>{i.add(ie(n))}),i}let t;const r=e;if(typeof r.clone=="function")t=r.clone();else if(typeof r.map=="function"&&typeof r.forEach=="function")t=r.map(ie);else if(typeof r.notifyChange=="function"&&typeof r.watch=="function")t=r.clone();else{t={};for(const i of Object.getOwnPropertyNames(e))t[i]=ie(e[i])}return t}function NT(e,t){return e===t||typeof e=="number"&&isNaN(e)&&typeof t=="number"&&isNaN(t)||typeof(e||{}).getTime=="function"&&typeof(t||{}).getTime=="function"&&e.getTime()===t.getTime()||!1}function gH(e,t,r=!1){return bH(e,t,r)}function Ev(e,t){if(t!=null)return t[e]||vH(e.split("."),!1,t)}function Ro(e,t,r){const i=e.split("."),n=i.pop(),s=vH(i,!0,r);s&&n&&(s[n]=t)}function vH(e,t,r){let i=r;for(const n of e){if(i==null)return;if(!(n in i)){if(!t)return;i[n]={}}i=i[n]}return i}function bH(e,t,r){return t?Object.keys(t).reduce(function(i,n){let s=i[n],o=t[n];return s===o?i:s===void 0?(i[n]=ie(o),i):(Array.isArray(o)||Array.isArray(i)?(s=s?Array.isArray(s)?i[n]=s.concat():i[n]=[s]:i[n]=[],o&&(Array.isArray(o)||(o=[o]),r?o.forEach(a=>{s.indexOf(a)===-1&&s.push(a)}):i[n]=o.concat())):o&&typeof o=="object"?i[n]=bH(s,o,r):i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=o),i)},e||{}):e}var WF;const Kt={apiKey:void 0,applicationUrl:(WF=globalThis.location)==null?void 0:WF.href,assetsPath:"",fontsUrl:"https://static.arcgis.com/fonts",geometryService:null,geometryServiceUrl:"https://utility.arcgisonline.com/arcgis/rest/services/Geometry/GeometryServer",geoRSSServiceUrl:"https://utility.arcgis.com/sharing/rss",kmlServiceUrl:"https://utility.arcgis.com/sharing/kml",portalUrl:"https://www.arcgis.com",workers:{loaderConfig:{has:{},paths:{},map:{},packages:[]}},request:{httpsDomains:["arcgis.com","arcgisonline.com","esrikr.com","premiumservices.blackbridge.com","esripremium.accuweather.com","gbm.digitalglobe.com","firstlook.digitalglobe.com","msi.digitalglobe.com"],interceptors:[],maxUrlLength:2e3,proxyRules:[],proxyUrl:null,timeout:6e4,trustedServers:[],useIdentity:!0},log:{interceptors:[],level:null}};if(globalThis.esriConfig&&(gH(Kt,globalThis.esriConfig,!0),delete Kt.has),!Kt.assetsPath){const e="4.22.2";Kt.assetsPath=`https://js.arcgis.com/${e.slice(0,-2)}/@arcgis/core/assets`}Kt.baseUrl&&console.warn("[esri.config]","baseUrl has been replaced by assetsPath"),Object.defineProperty(Kt,"baseUrl",{set(){console.warn("[esri.config]","baseUrl has been replaced by assetsPath")}}),Kt.request.corsEnabledServers=[],Kt.request.corsEnabledServers.push=function(){return console.warn("[esri.config]","request.corsEnabledServers is not supported and will be removed in a future release. See http://esriurl.com/cors8664"),0};const _ue=/\{([^\}]+)\}/g;function JF(e){return e??""}function bl(e,t){return e.replace(_ue,typeof t=="object"?(r,i)=>JF(Ev(i,t)):(r,i)=>JF(t(i)))}function wH(e,t){return e.replace(/([\.$?*|{}\(\)\[\]\\\/\+\-^])/g,r=>t&&t.indexOf(r)!==-1?r:`\\${r}`)}function $L(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t|=0;return t}function ott(e){return new DOMParser().parseFromString(e||"","text/html").body.innerText||""}const ZF={info:0,warn:1,error:2,none:3};class Te{constructor(t){this.level=null,this._module="",this._parent=null,this.writer=null,this._loggedMessages={error:new Map,warn:new Map,info:new Map},t.level!=null&&(this.level=t.level),t.writer!=null&&(this.writer=t.writer),this._module=t.module,Te._loggers[this.module]=this;const r=this.module.lastIndexOf(".");r!==-1&&(this._parent=Te.getLogger(this.module.slice(0,r)))}get module(){return this._module}get parent(){return this._parent}error(...t){this._log("error","always",...t)}warn(...t){this._log("warn","always",...t)}info(...t){this._log("info","always",...t)}errorOnce(...t){this._log("error","once",...t)}warnOnce(...t){this._log("warn","once",...t)}infoOnce(...t){this._log("info","once",...t)}errorOncePerTick(...t){this._log("error","oncePerTick",...t)}warnOncePerTick(...t){this._log("warn","oncePerTick",...t)}infoOncePerTick(...t){this._log("info","oncePerTick",...t)}get test(){const t=this;return{loggedMessages:t._loggedMessages,clearLoggedWarnings:()=>t._loggedMessages.warn.clear()}}static get testSingleton(){return{resetLoggers(t={}){const r=Te._loggers;return Te._loggers=t,r},set throttlingDisabled(t){Te._throttlingDisabled=t}}}static getLogger(t){let r=Te._loggers[t];return r||(r=new Te({module:t})),r}_log(t,r,...i){if(!!this._matchLevel(t)){if(r!=="always"&&!Te._throttlingDisabled){const n=this._argsToKey(i),s=this._loggedMessages[t].get(n);if(r==="once"&&s!=null||r==="oncePerTick"&&s&&s>=Te._tickCounter)return;this._loggedMessages[t].set(n,Te._tickCounter),Te._scheduleTickCounterIncrement()}for(const n of Kt.log.interceptors)if(n(t,this.module,...i))return;this._inheritedWriter()(t,this.module,...i)}}_parentWithMember(t,r){let i=this;for(;U(i);){const n=i[t];if(U(n))return n;i=i.parent}return r}_inheritedWriter(){return this._parentWithMember("writer",this._consoleWriter)}_consoleWriter(t,r,...i){console[t](`[${r}]`,...i)}_matchLevel(t){const r=Kt.log.level?Kt.log.level:"warn";return ZF[this._parentWithMember("level",r)]<=ZF[t]}_argsToKey(...t){const r=(i,n)=>typeof n!="object"||Array.isArray(n)?n:"[Object]";return $L(JSON.stringify(t,r))}static _scheduleTickCounterIncrement(){Te._tickCounterScheduled||(Te._tickCounterScheduled=!0,Promise.resolve().then(()=>{Te._tickCounter++,Te._tickCounterScheduled=!1}))}}Te._loggers={},Te._tickCounter=0,Te._tickCounterScheduled=!1,Te._throttlingDisabled=!1;function EL(e){return DT(()=>e.forEach(t=>U(t)&&t.remove()))}function DT(e){return{remove:()=>{e&&(e(),e=void 0)}}}function jn(e){return e?e.__accessor__?e.__accessor__:e.propertyInvalidated?e:null:null}function xue(e,t){return e!=null&&e.metadatas&&e.metadatas[t]!=null}function JS(e,t,r){return r?R3(e,t,{policy:r,path:""}):R3(e,t,null)}function R3(e,t,r){return t?Object.keys(t).reduce(function(i,n){let s=null,o="merge";if(r&&(s=r.path?`${r.path}.${n}`:n,o=r.policy(s)),o==="replace")return i[n]=t[n],i;if(i[n]===void 0)return i[n]=ie(t[n]),i;let a=i[n],l=t[n];if(a===l)return i;if(Array.isArray(l)||Array.isArray(i))a=a?Array.isArray(a)?i[n]=a.concat():i[n]=[a]:i[n]=[],l&&(Array.isArray(l)||(l=[l]),l.forEach(u=>{a.indexOf(u)===-1&&a.push(u)}));else if(l&&typeof l=="object")if(r){const u=r.path;r.path=s,i[n]=R3(a,l,r),r.path=u}else i[n]=R3(a,l,null);else i.hasOwnProperty(n)&&!t.hasOwnProperty(n)||(i[n]=l);return i},e||{}):e}function _H(e){return Array.isArray(e)?e:e.split(".")}function YF(e){return e.indexOf(",")>-1?e.split(",").map(t=>t.trim()):[e.trim()]}function Sue(e){if(Array.isArray(e)){const t=[];for(const r of e)t.push(...YF(r));return t}return YF(e)}function xH(e,t,r,i){const n=Sue(t);if(n.length!==1){const s=n.map(o=>i(e,o,r));return EL(s)}return i(e,n[0],r)}function SH(e){let t=!1;return()=>{t||(t=!0,e())}}function MH(e,t){const r=e[e.length-1]==="?"?e.slice(0,-1):e;if(t.getItemAt!=null||Array.isArray(t)){const n=parseInt(r,10);if(!isNaN(n))return Array.isArray(t)?t[n]:t.getItemAt(n)}const i=jn(t);return xue(i,r)?i.get(r):t[r]}function IH(e,t,r){if(e==null)return e;const i=MH(t[r],e);return!i&&r<t.length-1?void 0:r===t.length-1?i:IH(i,t,r+1)}function Av(e,t,r=0){return typeof t=="string"&&t.indexOf(".")===-1?MH(t,e):IH(e,_H(t),r)}function L3(e,t){return Av(e,t)}function KF(e,t){return Av(t,e)!==void 0}class XF{constructor(t){this.autoDestroy=!1,this.properties=t}}function i2(e){let t=e.constructor.__accessorMetadata__;const r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){const i=Object.create(t.properties),n=t.autoDestroy;for(const s in i)i[s]=ie(i[s]);t=new XF(i),t.autoDestroy=n,Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t=new XF({}),Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Mue(e){return i2(e).properties}function FT(e,t){const r=Mue(e);let i=r[t];return i||(i=r[t]={}),i}function Iue(e,t){return JS(e,t,$ue)}const Tue=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function $ue(e){return Tue.test(e)?"replace":"merge"}let N3,Q1=[];const Eue=Te.getLogger("esri.core.Accessor");function Et(e){N3!==void 0&&N3.onObservableAccessed(e)}let ZS=!1,YS=!1;function dh(e,t,r){if(ZS)return AL(e,t,r);TH(e);const i=t.call(r);return $H(),i}function Aue(e,t){return dh(void 0,e,t)}function AL(e,t,r){const i=ZS;ZS=!0,TH(e);let n=null;try{n=t.call(r)}catch(s){YS&&Eue.error(s)}return $H(),ZS=i,n}function TH(e){N3=e,Q1.push(e)}function $H(){const e=Q1.pop();N3=Q1.length>0?Q1[Q1.length-1]:void 0,e!==void 0&&e.onTrackingEnd()}function EH(e,t){if(32&t.flags)return;const r=YS;YS=!1,64&t.flags?AL(t,t.metadata.get,e):AH(e,t),YS=r}const Cue=[];function AH(e,t){128&t.flags||(t.flags|=128,AL(t,()=>{const r=t.metadata.dependsOn||Cue;for(const i of r)if(typeof i=="string"&&i.indexOf(".")===-1)QF(e,i,!1);else{const n=_H(i);for(let s=0,o=e;s<n.length&&o!=null&&typeof o=="object";++s)o=QF(o,n[s],s!==n.length-1)}}),t.flags&=-129)}function QF(e,t,r){const i=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){const o=parseInt(i,10);if(!isNaN(o))return Array.isArray(e)?e[o]:e.getItemAt(o)}const n=jn(e),s=n?.properties.get(i);return s&&(Et(s),EH(e,s)),r?e[i]:void 0}class CH{constructor(t,r){this._observers=t,this._observer=r}remove(){cue(this._observers,this._observer)}}class e9{constructor(t,r,i){this.properties=t,this.propertyName=r,this.metadata=i,this._observers=null,this._accessed=null,this._handles=null,this.flags=1|(i.nonNullable?8:0)|(i.hasOwnProperty("value")?16:0)|(i.get===void 0?32:0)|(i.dependsOn===void 0?64:0)}destroy(){this._accessed=null,this._observers=null,this._clearObservationHandles()}getComputed(){Et(this);const t=this.properties.store,r=this.propertyName,i=this.flags,n=t.get(r);if(4&i||1&~i&&t.has(r))return n;this.flags|=4;const s=this.properties.host;let o;64&i?o=dh(this,this.metadata.get,s):(AH(s,this),o=this.metadata.get.call(s)),t.set(r,o,1);const a=t.get(r);return a===n?this.flags&=-2:Aue(this.commit,this),this.flags&=-5,a}onObservableAccessed(t){t!==this&&(this._accessed===null&&(this._accessed=[]),this._accessed.includes(t)||this._accessed.push(t))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=32;const t=this._accessed;if(t===null)return;let r=this._handles;r===null&&(r=this._handles=[]);for(let i=0;i<t.length;++i)r.push(t[i].observe(this));t.length=0}observe(t){return this._observers===null&&(this._observers=[]),this._observers.includes(t)||this._observers.push(t),new CH(this._observers,t)}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}onInvalidated(){2&~this.flags&&(this.flags|=1);const t=this._observers;if(t!==null)for(let r=0;r<t.length;++r)t[r].onInvalidated()}commit(){this.flags&=-2,this.onCommitted()}onCommitted(){if(this._observers===null)return;const t=this._observers.slice();for(let r=0;r<t.length;++r)t[r].onCommitted()}_clearObservationHandles(){const t=this._handles;if(t!==null){for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}}const CA=7;function Ds(e){switch(e){case"defaults":return 0;case"service":return 2;case"portal-item":return 3;case"web-scene":return 4;case"web-map":return 5;case"user":return 6}}function Kw(e){switch(e){case 0:return"defaults";case 2:return"service";case 3:return"portal-item";case 4:return"web-scene";case 5:return"web-map";case 6:return"user"}return void 0}function kue(e){return Kw(e)}class CL{constructor(){this._values=new Map}clone(t){const r=new CL;return this._values.forEach((i,n)=>{t&&t.has(n)||r.set(n,ie(i))}),r}get(t){return this._values.get(t)}originOf(){return 6}keys(){return[...this._values.keys()]}set(t,r){this._values.set(t,r)}delete(t){this._values.delete(t)}has(t){return this._values.has(t)}forEach(t){this._values.forEach(t)}}function cx(e,t,r){return e!==void 0}function t9(e,t,r,i){return e!==void 0&&(!(r==null&&8&e.flags)||(i.lifecycle,!1))}function Oue(e){return e&&typeof e.destroy=="function"}Te.getLogger("esri.core.accessorSupport.Properties");class Pue{constructor(t){this.host=t,this.properties=new Map,this.ctorArgs=null,this.destroyed=!1,this.lifecycle=0,this.store=new CL,this._origin=6;const r=this.host.constructor.__accessorMetadata__,i=r.properties;for(const n in i){const s=new e9(this,n,i[n]);this.properties.set(n,s)}this.metadatas=i,this._autoDestroy=r.autoDestroy}initialize(){this.lifecycle=1}constructed(){this.lifecycle=2}destroy(){if(this.destroyed=!0,this._autoDestroy)for(const[t,r]of this.properties){const i=this.internalGet(t);i&&Oue(i)&&(i.destroy(),8&~r.flags&&this._internalSet(r,null)),r.destroy()}else for(const[t,r]of this.properties)r.destroy()}get initialized(){return this.lifecycle!==0}get(t){const r=this.properties.get(t);if(r.metadata.get)return r.getComputed();Et(r);const i=this.store;return i.has(t)?i.get(t):r.metadata.value}originOf(t){const r=this.store.originOf(t);if(r===void 0){const i=this.properties.get(t);if(i!==void 0&&16&i.flags)return"defaults"}return Kw(r)}has(t){return!!this.properties.has(t)&&this.store.has(t)}keys(){return[...this.properties.keys()]}internalGet(t){const r=this.properties.get(t);if(cx(r))return this.store.has(t)?this.store.get(t):r.metadata.value}internalSet(t,r){const i=this.properties.get(t);cx(i)&&this._internalSet(i,r)}getDependsInfo(t,r,i){const n=this.properties.get(r);if(!cx(n))return"";const s=new Set,o=dh({onObservableAccessed:l=>s.add(l),onTrackingEnd:()=>{}},()=>{var l;return(l=n.metadata.get)==null?void 0:l.call(t)});let a=`${i}${t.declaredClass.split(".").pop()}.${r}: ${o}
`;if(s.size===0)return a;i+="  ";for(const l of s){if(!(l instanceof e9))continue;const u=l.properties.host,h=l.propertyName,d=jn(u);a+=d?d.getDependsInfo(u,h,i):`${i}${h}: undefined
`}return a}setAtOrigin(t,r,i){const n=this.properties.get(t);if(cx(n))return this._setAtOrigin(n,r,i)}isOverridden(t){const r=this.properties.get(t);return r!==void 0&&!!(2&r.flags)}clearOverride(t){const r=this.properties.get(t);r!==void 0&&2&r.flags&&(r.flags&=-3,r.notifyChange())}override(t,r){const i=this.properties.get(t);if(!t9(i,t,r,this))return;const n=i.metadata.cast;if(n){const s=this._cast(n,r),{valid:o,value:a}=s;if(n4.release(s),!o)return;r=a}i.flags|=2,this._internalSet(i,r)}set(t,r){const i=this.properties.get(t);if(!t9(i,t,r,this))return;const n=i.metadata.cast;if(n){const o=this._cast(n,r),{valid:a,value:l}=o;if(n4.release(o),!a)return;r=l}const s=i.metadata.set;s?s.call(this.host,r):this._internalSet(i,r)}setDefaultOrigin(t){this._origin=Ds(t)}getDefaultOrigin(){return Kw(this._origin)}notifyChange(t){const r=this.properties.get(t);r!==void 0&&r.notifyChange()}invalidate(t){const r=this.properties.get(t);r!==void 0&&r.invalidate()}commit(t){const r=this.properties.get(t);r!==void 0&&r.commit()}_internalSet(t,r){const i=this.lifecycle!==0?this._origin:0;this._setAtOrigin(t,r,i)}_setAtOrigin(t,r,i){const n=this.store,s=t.propertyName;n.has(s,i)&&NT(r,n.get(s))&&2&~t.flags&&i===n.originOf(s)||(t.invalidate(),n.set(s,r,i),t.commit(),EH(this.host,t))}_cast(t,r){const i=n4.acquire();return i.valid=!0,i.value=r,t&&(i.value=t.call(this.host,r,i)),i}}class Rue{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}}const n4=new vl(Rue);function D3(e,t,r){if(e&&t)if(typeof t=="object")for(const i of Object.getOwnPropertyNames(t))D3(e,i,t[i]);else{if(t.indexOf(".")!==-1){const i=t.split("."),n=i.splice(i.length-1,1)[0];return void D3(L3(e,i),n,r)}e[t]=r}}Te.getLogger("esri.core.accessorSupport.set");class Lue extends vl{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=sue(this._set)}acquire(...t){const r=super.acquire(...t);return this._set.delete(r),r}release(t){t&&!this._set.has(t)&&(super.release(t),this._set.add(t))}_dispose(t){this._set.delete(t),super._dispose(t)}}const hx=[];function F3(e){hx.push(e),hx.length===1&&queueMicrotask(()=>{const t=hx.slice();hx.length=0;for(const r of t)r()})}const Nue=29;class aw{constructor(t,r=Nue){this.name=t,this._counter=0,this._items=new Array(r)}record(t){this._items[++this._counter%this._items.length]=t}get median(){return this._items.slice().sort((t,r)=>t-r)[Math.floor(this._items.length/2)]}get average(){return this._items.reduce((t,r)=>t+r,0)/this._items.length}get last(){return this._items[this._counter%this._items.length]}}var kA;(function(e){const t=(s,o,a,l)=>{let u=o,h=o;const d=a>>>1,f=s[u-1];for(;h<=d;){h=u<<1,h<a&&l(s[h-1],s[h])<0&&++h;const m=s[h-1];if(l(m,f)<=0)break;s[u-1]=m,u=h}s[u-1]=f},r=(s,o)=>s<o?-1:s>o?1:0;function i(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l);const u=o+1;for(let h=a-1;h>o;h--){const d=s[o];s[o]=s[h],s[h]=d,t(s,u,h,l)}}function*n(s,o,a,l){o===void 0&&(o=0),a===void 0&&(a=s.length),l===void 0&&(l=r);for(let h=a>>>1;h>o;h--)t(s,h,a,l),yield;const u=o+1;for(let h=a-1;h>o;h--){const d=s[o];s[o]=s[h],s[h]=d,t(s,u,h,l),yield}}e.sort=i,e.iterableSort=n})(kA||(kA={}));const r9=kA,Due=1.5,Fue=1.1;class Hd{constructor(t){this.data=[],this._length=0,this._allocator=void 0,this._deallocator=()=>null,this._shrink=()=>{},this._hint=new pH,t&&(t.initialSize&&(this.data=new Array(t.initialSize)),t.allocator&&(this._allocator=t.allocator),t.deallocator!==void 0&&(this._deallocator=t.deallocator),t.shrink&&(this._shrink=()=>i9(this)))}toArray(){return this.data.slice(0,this.length)}getItemAt(t){if(!(t<0||t>=this._length))return this.data[t]}get length(){return this._length}set length(t){if(t>this._length){if(this._allocator){for(;this._length<t;)this.data[this._length++]=this._allocator(this.data[this._length]);return}this._length=t}else{if(this._deallocator)for(let r=t;r<this._length;++r)this.data[r]=this._deallocator(this.data[r]);this._length=t,this._shrink()}}clear(){this.length=0}prune(){this.clear(),this.data=[]}push(t){this.data[this._length++]=t}pushArray(t,r=t.length){for(let i=0;i<r;i++)this.data[this._length++]=t[i]}fill(t,r){for(let i=0;i<r;i++)this.data[this._length++]=t}pushNew(){this._allocator&&(this.data[this.length]=this._allocator(this.data[this.length]));const t=this.data[this._length];return++this._length,t}unshift(t){this.data.unshift(t),this._length++,i9(this)}pop(){if(this.length===0)return;const t=this.data[this.length-1];return this.length=this.length-1,this._shrink(),t}remove(t){const r=mH(this.data,t,this.length,this._hint);if(r!==-1)return this.data.splice(r,1),this.length=this.length-1,t}removeUnordered(t){const r=TL(this.data,t,this.length,this._hint);return r!==void 0&&(this.length=this.length-1),this._shrink(),r}removeUnorderedIndex(t){if(!(t>=this.length||t<0))return this.swapElements(t,this.length-1),this.pop()}removeUnorderedMany(t,r=t.length,i){this.length=uue(this.data,t,this.length,r,this._hint,i),this._shrink()}front(){if(this.length!==0)return this.data[0]}back(){if(this.length!==0)return this.data[this.length-1]}swapElements(t,r){t>=this.length||r>=this.length||t===r||([this.data[t],this.data[r]]=[this.data[r],this.data[t]])}sort(t){r9.sort(this.data,0,this.length,t)}iterableSort(t){return r9.iterableSort(this.data,0,this.length,t)}some(t,r){for(let i=0;i<this.length;++i)if(t.call(r,this.data[i],i,this.data))return!0;return!1}filterInPlace(t,r){let i=0;for(let n=0;n<this._length;++n){const s=this.data[n];t.call(r,s,n,this.data)&&(this.data[n]=this.data[i],this.data[i]=s,i++)}if(this._deallocator)for(let n=i;n<this._length;n++)this.data[n]=this._deallocator(this.data[n]);return this._length=i,this._shrink(),this}forAll(t,r){const i=this.length,n=this.data;for(let s=0;s<i;++s)t.call(r,n[s],s,n)}forEach(t,r){for(let i=0;i<this.length;++i)t.call(r,this.data[i],i,this.data)}map(t,r){const i=new Array(this.length);for(let n=0;n<this.length;++n)i[n]=t.call(r,this.data[n],n,this.data);return i}reduce(t,r){let i=r;for(let n=0;n<this.length;++n)i=t(i,this.data[n],n,this.data);return i}has(t){const r=this.length,i=this.data;for(let n=0;n<r;++n)if(i[n]===t)return!0;return!1}}function i9(e){e.data.length>Due*e.length&&(e.data.length=Math.floor(e.length*Fue))}function jue(e){return{setTimeout:(t,r)=>{const i=e.setTimeout(t,r);return{remove:()=>e.clearTimeout(i)}}}}const n2=jue(globalThis);function Vue(e,t){return e.replace(/\$\{([^\s\:\}]*)(?:\:([^\s\:\}]+))?\}/g,function(r,i){if(i==="")return"$";const n=Ev(i,t),s=n??"";if(s===void 0)throw new Error(`could not find key "${i}" in template`);return s.toString()})}class jT{constructor(t,r,i){this.name=t,this.details=i,this.message=void 0,this instanceof jT&&(this.message=r&&Vue(r,i)||"")}toString(){return"["+this.name+"]: "+this.message}}class Z extends jT{constructor(t,r,i){if(super(t,r,i),!(this instanceof Z))return new Z(t,r,i)}toJSON(){if(this.details!=null)try{return{name:this.name,message:this.message,details:JSON.parse(JSON.stringify(this.details,(t,r)=>{if(r&&typeof r=="object"&&typeof r.toJSON=="function")return r;try{return ie(r)}catch{return"[object]"}}))}}catch(t){throw Te.getLogger("esri.core.Error").error(t),t}return{name:this.name,message:this.message,details:this.details}}static fromJSON(t){return new Z(t.name,t.message,t.details)}}Z.prototype.type="error";function kL(e){return e&&(typeof e.on=="function"||typeof e.addEventListener=="function")}function OL(e,t,r){if(!kL(e))throw new TypeError("target is not a Evented or EventTarget object");if("on"in e)return e.on(t,r);if(Array.isArray(t)){const i=t.slice();for(const n of i)e.addEventListener(n,r);return{remove(){for(const n of i)e.removeEventListener(n,r)}}}return e.addEventListener(t,r),{remove(){e.removeEventListener(t,r)}}}function kH(e,t,r){if(!kL(e))throw new TypeError("target is not a Evented or EventTarget object");if("once"in e)return e.once(t,r);const i=OL(e,t,n=>{i.remove(),r.call(e,n)});return{remove(){i.remove()}}}const Uue={Win:"Meta",Scroll:"ScrollLock",Spacebar:" ",Down:"ArrowDown",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Del:"Delete",Apps:"ContextMenu",Esc:"Escape",Multiply:"*",Add:"+",Subtract:"-",Decimal:".",Divide:"/"};function jf({key:e}){return Uue[e]||e}function OH(e){return Promise.all(e)}function PH(e){return new Promise((t,r)=>{try{e(t,r)}catch(i){Promise.resolve().then(()=>r(i))}})}function Zr(e="Aborted"){return new Z("AbortError",e)}function $r(e,t="Aborted"){if(wl(e))throw Zr(t)}function VT(e){return U(e)?"aborted"in e?e:e.signal:e}function wl(e){const t=VT(e);return U(t)&&t.aborted}function wh(e){if(sn(e))throw e}function OA(e){if(!sn(e))throw e}function xa(e,t){const r=VT(e);if(!ce(r)){if(!r.aborted)return kH(r,"abort",()=>t());t()}}function UT(e,t){const r=VT(e);if(!ce(r))return $r(r),kH(r,"abort",()=>t(Zr()))}function PL(e,t){const r=VT(t);return ce(r)?e:new Promise((i,n)=>{let s=xa(t,()=>n(Zr()));const o=()=>s=LT(s);e.then(o,o),e.then(i,n)})}function sn(e){return e&&e.name==="AbortError"}function PA(e){return e.catch(t=>{if(!sn(t))throw t})}function ph(){let e=null;const t=new Promise((r,i)=>{e={promise:void 0,resolve:r,reject:i}});return e.promise=t,e}function Zs(e){if(!e)return;if(typeof e.forEach!="function"){const r=Object.keys(e);return Zs(r.map(i=>e[i])).then(i=>{const n={};return r.forEach((s,o)=>n[s]=i[o]),n})}const t=e;return PH(r=>{const i=[];let n=t.length;n===0&&r(i),t.forEach(s=>{const o={promise:s||Promise.resolve(s)};i.push(o),o.promise.then(a=>{o.value=a}).catch(a=>{o.error=a}).then(()=>{--n,n===0&&r(i)})})})}function zue(e){return Zs(e).then(t=>t.filter(r=>!!r.value).map(r=>r.value))}function att(e){return Promise.reject(e)}function eb(e){return Promise.resolve(e)}function RL(e,t,r){const i=new AbortController;return xa(r,()=>i.abort()),new Promise((n,s)=>{let o=setTimeout(()=>{o=0,n(t)},e);xa(i,()=>{o&&(clearTimeout(o),s(Zr()))})})}function hy(e){return e&&typeof e.then=="function"}function j3(e){return RH(e)?e:Promise.resolve(e)}function RH(e){return e&&typeof e=="object"&&"then"in e&&typeof e.then=="function"}function LH(e,t=-1){let r,i,n,s,o=null;const a=(...l)=>{if(r){i=l,s&&s.reject(Zr()),s=ph();const f=s.promise;if(o){const m=o;o=null,m.abort()}return f}if(n=s||ph(),s=null,t>0){const f=new AbortController;r=j3(e(...l,f.signal));const m=r;RL(t).then(()=>{r===m&&(s?f.abort():o=f)})}else r=1,r=j3(e(...l));const u=()=>{const f=i;i=n=r=o=null,f!=null&&a(...f)},h=r,d=n;return h.then(u,u),h.then(d.resolve,d.reject),d.promise};return a}function NH(){let e,t;const r=new Promise((n,s)=>{e=n,t=s}),i=n=>{e(n)};return i.resolve=n=>e(n),i.reject=n=>t(n),i.timeout=(n,s)=>n2.setTimeout(()=>i.reject(s),n),i.promise=r,i}function DH(e,t){let r,i=new AbortController;const n=e(i.signal);let s={promise:n,finished:!1,abort:()=>{i&&(i.abort(),i=null)}};const o=()=>{s&&(s.finished=!0,s=null),U(r)&&(r.remove(),r=null),i=null};return n.then(o,o),r=xa(t,()=>{U(s)&&s.abort()}),s}function ltt(e){return Promise.resolve().then(()=>{$r(e)})}class Bue{constructor(t){this.phases=t,this.paused=!1,this.ticks=-1,this.removed=!1}}class Gue{constructor(t){this.callback=t,this.isActive=!0}remove(){this.isActive=!1}}let RA=0;const g1={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},LA=["prepare","preRender","render","postRender","update"],NA=[],Pm=new Hd;class que{constructor(t){this._task=t}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}}const V3={frameTasks:Pm,willDispatch:!1,clearFrameTasks:Hue,dispatch:VH,executeFrameTasks:Wue};function s2(e){const t=new Gue(e);return NA.push(t),V3.willDispatch||(V3.willDispatch=!0,F3(VH)),t}function L0(e){const t=new Bue(e);return Pm.push(t),U3==null&&(RA=performance.now(),U3=requestAnimationFrame(FH)),new que(t)}let U3=null;function Hue(e=!1){Pm.forAll(t=>{t.removed=!0}),e&&jH()}function FH(){const e=performance.now();U3=null,U3=Pm.length>0?requestAnimationFrame(FH):null,V3.executeFrameTasks(e)}function Wue(e){const t=e-RA;RA=e;const r=1e3/60,i=Math.max(0,t-r);for(let n=0;n<LA.length;n++){const s=performance.now(),o=LA[n];Pm.forAll(a=>{var l;a.paused||a.removed||(n===0&&a.ticks++,a.phases[o]&&(g1.time=e,g1.deltaTime=a.ticks===0?0:t,g1.elapsedFrameTime=performance.now()-e,g1.frameDuration=r-i,(l=a.phases[o])==null||l.call(a,g1)))}),Zue[n].record(performance.now()-s)}jH(),Yue.record(performance.now()-e)}const dx=new Hd;function jH(){Pm.forAll(e=>{e.removed&&dx.push(e)}),Pm.removeUnorderedMany(dx.data,dx.length),dx.clear()}function VH(){for(;NA.length;){const e=NA.shift();e.isActive&&e.callback()}V3.willDispatch=!1}function Jue(e=1,t){const r=NH(),i=()=>{wl(t)?r.reject(Zr()):e===0?r():(--e,F3(()=>i()))};return i(),r.promise}const Zue=LA.map(e=>new aw(e)),Yue=new aw("total");let Kue=0;function lw(){return++Kue}class zT{constructor(t){this._notify=t,this._accessed=[],this._handles=[],this._invalidCount=0}destroy(){this._accessed.length=0,this.clear()}onInvalidated(){this._invalidCount++}onCommitted(){const t=this._invalidCount;if(t===1)return this._invalidCount=0,void this._notify();this._invalidCount=t>0?t-1:0}onObservableAccessed(t){this._accessed.includes(t)||this._accessed.push(t)}onTrackingEnd(){const t=this._handles,r=this._accessed;for(let i=0;i<r.length;++i)t.push(r[i].observe(this));r.length=0}clear(){const t=this._handles;for(let r=0;r<t.length;++r)t[r].remove();t.length=0}}let p0=!1;const z3=[];function UH(e,t){let r=new zT(s),i=null,n=!1;function s(){if(!r||n)return;if(p0)return void GH(s);const a=i;r.clear(),p0=!0,n=!0,i=dh(r,e),n=!1,p0=!1,t(i,a),qH()}function o(){r&&(r.destroy(),r=null,i=null)}return n=!0,i=dh(r,e),n=!1,{remove:o}}function zH(e,t){let r=new zT(n),i=null;function n(){t(i,o)}function s(){r&&(r.destroy(),r=null),i=null}function o(){return r?(r.clear(),i=dh(r,e),i):null}return o(),{remove:s}}function BH(e){let t=new zT(i),r=!1;function i(){t&&!r&&(p0?GH(i):(t.clear(),p0=!0,r=!0,dh(t,e),r=!1,p0=!1,qH()))}function n(){t&&(t.destroy(),t=null)}return r=!0,dh(t,e),r=!1,{remove:n}}function GH(e){z3.includes(e)||z3.unshift(e)}function qH(){for(;z3.length;)z3.pop()()}class Xw{constructor(){this.uid=lw(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(t,r,i,n,s){return this.pool.acquire(0,t,r,i,n,s,NT)}static acquireTracked(t,r,i,n){return this.pool.acquire(1,t,r,i,null,null,n)}notify(t,r){this.type===0?this.callback.call(this.target,t,r,this.path,this.target):this.callback.call(null,t,r)}acquire(t,r,i,n,s,o,a){this.uid=lw(),this.removed=!1,this.type=t,this.oldValue=r,this.callback=i,this.getValue=n,this.target=s,this.path=o,this.equals=a}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=lw(),this.removed=!0}}Xw.pool=new Lue(Xw);const KS=new cs,Wd=new Set;let B3;function G3(e){Wd.delete(e),Wd.add(e),B3||(B3=s2(ece))}function Xue(e){if(e.removed)return;const t=e.oldValue,r=e.getValue();e.equals(t,r)||(e.oldValue=r,e.notify(r,t))}function Que(e){for(const t of Wd.values())t.target===e&&(t.removed=!0)}function ece(){let e=10;for(;B3&&e--;){B3=null;const t=tce(),r=KS.acquire();for(const i of t){const n=i.uid;Xue(i),n===i.uid&&i.removed&&r.push(i)}for(const i of Wd)i.removed&&(r.push(i),Wd.delete(i));for(const i of r)Xw.pool.release(i);KS.release(r),KS.release(t),rce.forEach(i=>i())}}function tce(){const e=KS.acquire();e.length=Wd.size;let t=0;for(const r of Wd)e[t]=r,++t;return Wd.clear(),e}const rce=new Set;function ice(e,t,r){let i=xH(e,t,r,(n,s,o)=>{let a,l,u=zH(()=>Av(n,s),(h,d)=>{n.__accessor__.destroyed||a&&a.uid!==l?i.remove():(a||(a=Xw.acquireUntracked(h,o,d,n,s),l=a.uid),G3(a))});return{remove:SH(()=>{u.remove(),a&&(a.uid!==l||a.removed||(a.removed=!0,G3(a)),a=null),i=u=null})}});return i}function nce(e,t,r){const i=xH(e,t,r,(n,s,o)=>{let a=!1;return UH(()=>Av(n,s),(l,u)=>{n.__accessor__.destroyed?i.remove():a||(a=!0,NT(u,l)||o.call(n,l,u,s,n),a=!1)})});return i}function sce(e,t,r,i=!1){return!e.__accessor__||e.__accessor__.destroyed?{remove(){}}:i?nce(e,t,r):ice(e,t,r)}function oce(e,t,r){let i,n,s=zH(e,(o,a)=>{i&&i.uid!==n?s.remove():(i||(i=Xw.acquireTracked(o,t,a,r),n=i.uid),G3(i))});return{remove:SH(()=>{s.remove(),i&&(i.uid!==n||i.removed||(i.removed=!0,G3(i)),i=null),s=null})}}function ace(e,t,r){let i=!1;return UH(e,(n,s)=>{i||(i=!0,r(s,n)||t(n,s),i=!1)})}function lce(e,t,r=!1,i=NT){return r?ace(e,t,i):oce(e,t,i)}function BT(e,t){for(const[r,i]of e)if(t(i,r))return!0;return!1}function uce(e,t,r){const i=e.get(t);if(i!==void 0)return i;const n=r();return e.set(t,n),n}const f0=Te.getLogger("esri.core.Accessor");function cce(e){return e==null?e:new Date(e)}function hce(e){return e==null?e:!!e}function o2(e){return e==null?e:e.toString()}function da(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function GT(e){return e==null?e:Math.round(parseFloat(e))}function HH(e){return e&&e.constructor&&e.constructor.__accessorMetadata__!==void 0}function q3(e,t){return t!=null&&e&&!(t instanceof e)}function WH(e){return e&&"isCollection"in e}function n9(e){return e&&e.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function dce(e,t){if(!t||!t.constructor||!WH(t.constructor))return DA(e,t)?t:new e(t);const r=n9(e.prototype.itemType),i=n9(t.constructor.prototype.itemType);return r?i?r===i?t:r.prototype.isPrototypeOf(i.prototype)?new e(t):(DA(e,t),t):new e(t):t}function DA(e,t){return!!HH(t)&&(f0.error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+qT(e)+"'"),!0)}function ua(e,t){return t==null?t:WH(e)?dce(e,t):q3(e,t)?DA(e,t)?t:new e(t):t}function qT(e){return e&&e.prototype&&e.prototype.declaredClass||"unknown"}const pce=new WeakMap;function fce(e){switch(e){case Number:return da;case jt:return GT;case Boolean:return hce;case String:return o2;case Date:return cce;default:return uce(pce,e,()=>ua.bind(null,e))}}function br(e,t){const r=fce(e);return arguments.length===1?r:r(t)}function Qw(e,t,r){return arguments.length===1?Qw.bind(null,e):t&&(Array.isArray(t)?t.map(i=>e(i,r)):[e(t,r)])}function mce(e,t){return arguments.length===1?Qw(br.bind(null,e)):Qw(br.bind(null,e),t)}function JH(e,t,r){return t!==0&&Array.isArray(r)?r.map(i=>JH(e,t-1,i)):e(r)}function H3(e,t,r){if(arguments.length===2)return H3.bind(null,e,t);if(!r)return r;let i=t,n=r=JH(e,t,r);for(;i>0&&Array.isArray(n);)i--,n=n[0];if(n!==void 0)for(let s=0;s<i;s++)r=[r];return r}function yce(e,t,r){return arguments.length===2?H3(br.bind(null,e),t):H3(br.bind(null,e),t,r)}function ZH(e){return!!Array.isArray(e)&&!e.some(t=>{const r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function FA(e,t){if(arguments.length===2)return FA(e).call(null,t);const r=new Set,i=e.filter(a=>typeof a!="function"),n=e.filter(a=>typeof a=="function");for(const a of e)typeof a!="string"&&typeof a!="number"||r.add(a);let s=null,o=null;return(a,l)=>{if(a==null)return a;const u=typeof a,h=u==="string"||u==="number";return h&&(r.has(a)||n.some(d=>u==="string"&&d===String||u==="number"&&d===Number))||u==="object"&&n.some(d=>!q3(a,d))?a:(h&&i.length?(s||(s=i.map(d=>typeof d=="string"?`'${d}'`:`${d}`).join(", ")),f0.error("Accessor#set",`'${a}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof a=="object"&&n.length?(o||(o=n.map(d=>qT(d)).join(", ")),f0.error("Accessor#set",`'${a}' is not a valid value for this property, value must be one of ${o}`)):f0.error("Accessor#set",`'${a}' is not a valid value for this property`),l&&(l.valid=!1),null)}}function ju(e,t){if(arguments.length===2)return ju(e).call(null,t);const r={},i=[],n=[];for(const l in e.typeMap){const u=e.typeMap[l];r[l]=br(u),i.push(qT(u)),n.push(l)}const s=()=>`'${i.join("', '")}'`,o=()=>`'${n.join("', '")}'`,a=typeof e.key=="string"?l=>l[e.key]:e.key;return l=>{if(e.base&&!q3(e.base,l)||l==null)return l;const u=a(l)||e.defaultKeyValue,h=r[u];if(!h)return f0.error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${o()})`),null;if(!q3(e.typeMap[u],l))return l;if(typeof e.key=="string"&&!HH(l)){const d={};for(const f in l)f!==e.key&&(d[f]=l[f]);return h(d)}return h(l)}}class jt{}const v1={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function gce(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function YH(e){switch(e.type){case"native":return br(e.value);case"array":return Qw(YH(e.value));case"one-of":return vce(e);default:return null}}function vce(e){let t=null;return(r,i)=>VA(r,e)?r:(t==null&&(t=jA(e)),f0.error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),i&&(i.valid=!1),null)}function jA(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case jt:return"integer";case Date:return"date";default:return qT(e.value)}case"array":return`array of ${jA(e.value)}`;case"one-of":{const t=e.values.map(r=>jA(r));return`one of ${t.slice(0,t.length-1)} or ${t[t.length-1]}`}}return"unknown"}function VA(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case jt:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string"}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!VA(r,t.value));case"one-of":return t.values.some(r=>VA(e,r))}}function p(e={}){return(t,r)=>{if(t===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${t.name}.${r}. Accessor does not support static properties.`);const i=Object.getOwnPropertyDescriptor(t,r),n=FT(t,r);i&&(i.get||i.set?(n.get=i.get||n.get,n.set=i.set||n.set):"value"in i&&("value"in e&&Te.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${r}" on "${t.constructor.name}" already defined in the metadata`,e),n.value=e.value=i.value)),e.readOnly!=null&&(n.readOnly=e.readOnly);const s=e.aliasOf;if(s){const l=typeof s=="string"?s:s.source,u=typeof s=="string"?null:s.overridable===!0;let h;n.dependsOn=[l],n.get=function(){let d=L3(this,l);if(typeof d=="function"){h||(h=l.split(".").slice(0,-1).join("."));const f=L3(this,h);f&&(d=d.bind(f))}return d},n.readOnly||(n.set=u?function(d){d!==void 0?this._override(r,d):this._clearOverride(r)}:function(d){D3(this,l,d)})}const o=e.type,a=e.types;n.cast||(o?n.cast=bce(o):a&&(Array.isArray(a)?n.cast=Qw(ju(a[0])):n.cast=ju(a))),e.range&&(n.cast=XH(n.cast,e.range)),Iue(n,e)}}function KH(e,t,r){const i=FT(e,r);i.json||(i.json={});let n=i.json;return t!==void 0&&(n.origins||(n.origins={}),n.origins[t]||(n.origins[t]={}),n=n.origins[t]),n}function bce(e){let t=0,r=e;if(gce(e))return YH(e);for(;Array.isArray(r)&&r.length===1&&typeof r[0]!="string"&&typeof r[0]!="number";)r=r[0],t++;const i=r;if(ZH(i))return t===0?FA(i):H3(FA(i),t);if(t===1)return mce(i);if(t>1)return yce(i,t);const n=e;return n.from?n.from:br(n)}function XH(e,t){return r=>{let i=+e(r);return t.step!=null&&(i=Math.round(i/t.step)*t.step),t.min!=null&&(i=Math.max(t.min,i)),t.max!=null&&(i=Math.min(t.max,i)),i}}function wce(e){if(e.json&&e.json.origins){const t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(const i in r)if(t[i]){const n=t[i];r[i].forEach(s=>{t[s]=n}),delete t[i]}}}class Ys extends jT{constructor(t,r,i){if(super(t,r,i),!(this instanceof Ys))return new Ys(t,r,i)}}Ys.prototype.type="warning";function QH(e){return!!e&&e.prototype&&e.prototype.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}const UA=Te.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function s9(e,t,r){var i,n;e&&(!r&&!t.read||(i=t.read)!=null&&i.reader||((n=t.read)==null?void 0:n.enabled)===!1||Sce(e)&&Ro("read.reader",Cv(e),t))}function Cv(e){var t;const r=(t=e.ndimArray)!=null?t:0;if(r>1)return xce(e);if(r===1)return o9(e);if("type"in e&&tW(e.type)){var i,n;const s=(i=e.type.prototype)==null||(n=i.itemType)==null?void 0:n.Type,o=o9(typeof s=="function"?{type:s}:{types:s});return(a,l,u)=>{const h=o(a,l,u);return h&&new e.type(h)}}return LL(e)}function LL(e){return"type"in e?_ce(e.type):Mce(e.types)}function _ce(e){return e.prototype.read?(t,r,i)=>{if(t==null)return t;const n=typeof t;if(n!=="object")return void UA.error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${n}'`);const s=new e;return s.read(t,i),s}:e.fromJSON}function eW(e,t,r,i){return i!==0&&Array.isArray(t)?t.map(n=>eW(e,n,r,i-1)):e(t,void 0,r)}function xce(e){var t;const r=LL(e),i=eW.bind(null,r),n=(t=e.ndimArray)!=null?t:0;return(s,o,a)=>{if(s==null)return s;s=i(s,a,n);let l=n,u=s;for(;l>0&&Array.isArray(u);)l--,u=u[0];if(u!==void 0)for(let h=0;h<l;h++)s=[s];return s}}function o9(e){const t=LL(e);return(r,i,n)=>{if(r==null)return r;if(Array.isArray(r)){const o=[];for(const a of r){const l=t(a,void 0,n);l!==void 0&&o.push(l)}return o}const s=t(r,void 0,n);return s!==void 0?[s]:void 0}}function tW(e){if(!QH(e))return!1;const t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?NL(t.Type):rW(t.Type))}function Sce(e){return"types"in e?rW(e.types):NL(e.type)}function NL(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||tW(e))}function rW(e){for(const t in e.typeMap)if(!NL(e.typeMap[t]))return!1;return!0}function Mce(e){var t;let r=null;const i=(t=e.errorContext)!=null?t:"type";return(n,s,o)=>{if(n==null)return n;const a=typeof n;if(a!=="object")return void UA.error(`Expected JSON value of type 'object' to deserialize, but got '${a}'`);r||(r=Ice(e));const l=e.key;if(typeof l!="string")return;const u=n[l],h=u?r[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!h){const f=`Type '${u||"unknown"}' is not supported`;return o&&o.messages&&n&&o.messages.push(new Ys(`${i}:unsupported`,f,{definition:n,context:o})),void UA.error(f)}const d=new h;return d.read(n,o),d}}function Ice(e){const t={};for(const n in e.typeMap){var r,i;const s=e.typeMap[n],o=i2(s.prototype);if(typeof e.key=="function")continue;const a=o.properties[e.key];if(!a)continue;(r=a.json)!=null&&r.type&&Array.isArray(a.json.type)&&a.json.type.length===1&&typeof a.json.type[0]=="string"&&(t[a.json.type[0]]=s);const l=(i=a.json)==null?void 0:i.write;if(!l||!l.writer){t[n]=s;continue}const u=l.target,h=typeof u=="string"?u:e.key,d={};l.writer(n,d,h),d[h]&&(t[d[h]]=s)}return t}function Tce(e){if(e.json||(e.json={}),l9(e.json),u9(e.json),a9(e.json),e.json.origins)for(const t in e.json.origins)l9(e.json.origins[t]),u9(e.json.origins[t]),a9(e.json.origins[t]);return!0}function a9(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function l9(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function u9(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}const $ce=Te.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer");function c9(e,t){var r;if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;const i=(r=e?.ndimArray)!=null?r:0;e&&(i===1||"type"in e&&QH(e.type))?t.write.writer=Cce:i>1?t.write.writer=kce(i):t.types?Array.isArray(t.types)?t.write.writer=Ace(t.types[0]):t.write.writer=Ece(t.types):t.write.writer=e_}function Ece(e){return(t,r,i,n)=>t?iW(t,e,n)?e_(t,r,i,n):void 0:e_(t,r,i,n)}function iW(e,t,r){for(const s in t.typeMap)if(e instanceof t.typeMap[s])return!0;if(r!=null&&r.messages){var i,n;const s=(i=t.errorContext)!=null?i:"type",o=`Values of type '${(n=typeof t.key!="function"?e[t.key]:e.declaredClass)!=null?n:"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new Z(`${s}:unsupported`,o,{definition:e,context:r})),$ce.error(o)}return!1}function Ace(e){return(t,r,i,n)=>!t||!Array.isArray(t)?e_(t,r,i,n):e_(t.filter(s=>iW(s,e,n)),r,i,n)}function e_(e,t,r,i){Ro(r,W3(e,i),t)}function W3(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?J3(e):e}function J3(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function Cce(e,t,r,i){let n;e===null?n=null:e&&typeof e.map=="function"?(n=e.map(s=>W3(s,i)),typeof n.toArray=="function"&&(n=n.toArray())):n=[W3(e,i)],Ro(r,n,t)}function nW(e,t,r){return r!==0&&Array.isArray(e)?e.map(i=>nW(i,t,r-1)):W3(e,t)}function kce(e){return function(t,r,i,n){let s;if(t===null)s=null;else{s=nW(t,n,e);let o=e,a=s;for(;o>0&&Array.isArray(a);)o--,a=a[0];if(a!==void 0)for(let l=0;l<o;l++)s=[s]}Ro(i,s,r)}}function zA(e,t){return DL(e,"read",t)}function sW(e,t){return DL(e,"write",t)}function DL(e,t,r){let i=e&&e.json;if(e&&e.json&&e.json.origins&&r){const n=e.json.origins[r.origin];n&&(t==="any"||t in n)&&(i=n)}return i}function Oce(e){const t=Pce(e);if(e.json.origins)for(const r in e.json.origins){const i=e.json.origins[r],n=i.types?Rce(i):t;s9(n,i,!1),i.types&&!i.write&&e.json.write&&e.json.write.enabled&&(i.write={...e.json.write}),c9(n,i)}s9(t,e.json,!0),c9(t,e.json)}function Pce(e){return e.json.types?BA(e.json):e.type?oW(e):BA(e)}function Rce(e){return e.type?oW(e):BA(e)}function oW(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!ZH(r);)r=r[0],t++;return{type:r,ndimArray:t}}function BA(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Lce(e){Tce(e)&&(wce(e),Oce(e))}const s4=new Set,o4=new Set;function N(e){return t=>{t.prototype.declaredClass=e,Dce(t);const r=[],i=[];let n=t.prototype;for(;n;)n.hasOwnProperty("initialize")&&!s4.has(n.initialize)&&(s4.add(n.initialize),r.push(n.initialize)),n.hasOwnProperty("destroy")&&!o4.has(n.destroy)&&(o4.add(n.destroy),i.push(n.destroy)),n=Object.getPrototypeOf(n);s4.clear(),o4.clear();class s extends t{constructor(...a){if(super(...a),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let l=r.length-1;l>=0;l--)r[l].call(this)}}),i.length){let l=!1;Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!l){l=!0;for(let u=0;u<i.length;u++)i[u].call(this)}}})}this.postscript(...a)}}}return s.__accessorMetadata__=i2(t.prototype),s.prototype.declaredClass=e,s}}function Nce(e,t){return t.get==null?function(){const r=this.__accessor__.properties.get(e);if(r===void 0)return;Et(r);const i=this.__accessor__.store;return i.has(e)?i.get(e):r.metadata.value}:function(){const r=this.__accessor__.properties.get(e);if(r!==void 0)return r.getComputed()}}function Dce(e){const t=e.prototype,r=i2(t).properties,i={};for(const n of Object.getOwnPropertyNames(r)){const s=r[n];Lce(s),i[n]={enumerable:!0,configurable:!0,get:Nce(n,s),set(o){const a=this.__accessor__;if(a!==void 0){if(!Object.isFrozen(this)){if(a.initialized&&s.readOnly)throw new TypeError(`[accessor] cannot assign to read-only property '${n}' of ${this.declaredClass}`);if(a.lifecycle===2&&s.constructOnly)throw new TypeError(`[accessor] cannot assign to construct-only property '${n}' of ${this.declaredClass}`);a.set(n,o)}}else Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:o})}}}Object.defineProperties(e.prototype,i)}function Fce(e){if(e==null)return{value:e};if(Array.isArray(e))return{type:[e[0]],value:null};switch(typeof e){case"object":return e.constructor&&e.constructor.__accessorMetadata__||e instanceof Date?{type:e.constructor,value:e}:e;case"boolean":return{type:Boolean,value:e};case"string":return{type:String,value:e};case"number":return{type:Number,value:e};case"function":return{type:e,value:null};default:return}}class Ze{constructor(...t){if(this.constructor===Ze)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");Object.defineProperty(this,"__accessor__",{enumerable:!1,value:new Pue(this)}),t.length>0&&this.normalizeCtorArgs&&(this.__accessor__.ctorArgs=this.normalizeCtorArgs.apply(this,t))}static createSubclass(t={}){if(Array.isArray(t))throw new Error("Multi-inheritance unsupported since 4.16");const{properties:r,declaredClass:i,constructor:n}=t;delete t.declaredClass,delete t.properties,delete t.constructor;const s=this;class o extends s{constructor(...l){super(...l),this.inherited=null,n&&n.apply(this,l)}}i2(o.prototype);for(const a in t){const l=t[a];o.prototype[a]=typeof l=="function"?function(...u){const h=this.inherited;let d;this.inherited=function(...f){if(s.prototype[a])return s.prototype[a].apply(this,f)};try{d=l.apply(this,u)}catch(f){throw this.inherited=h,f}return this.inherited=h,d}:t[a]}for(const a in r){const l=Fce(r[a]);p(l)(o.prototype,a)}return N(i)(o)}postscript(t){const r=this.__accessor__,i=r.ctorArgs||t;r.initialize(),i&&(this.set(i),r.ctorArgs=null),r.constructed(),this.initialize()}initialize(){}destroy(){this.destroyed||(Que(this),this.__accessor__.destroy())}get initialized(){return this.__accessor__&&this.__accessor__.initialized||!1}get constructed(){return this.__accessor__&&this.__accessor__.lifecycle===2||!1}get destroyed(){return this.__accessor__&&this.__accessor__.destroyed||!1}commitProperty(t){this.get(t)}get(t){return L3(this,t)}hasOwnProperty(t){return this.__accessor__?this.__accessor__.has(t):Object.prototype.hasOwnProperty.call(this,t)}isInstanceOf(t){return tg(Te.getLogger(this.declaredClass),"isInstanceOf",{replacement:"Use instanceof directly",version:"4.16"}),this instanceof t}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(t,r){return D3(this,t,r),this}watch(t,r,i){return sce(this,t,r,i)}_clearOverride(t){return this.__accessor__.clearOverride(t)}_override(t,r){return this.__accessor__.override(t,r)}_isOverridden(t){return this.__accessor__.isOverridden(t)}notifyChange(t){this.__accessor__.notifyChange(t)}_get(t){return this.__accessor__.internalGet(t)}_set(t,r){return this.__accessor__.internalSet(t,r),this}}class m0{constructor(){this._emitter=new m0.EventEmitter(this)}emit(t,r){return this._emitter.emit(t,r)}on(t,r){return this._emitter.on(t,r)}once(t,r){return this._emitter.once(t,r)}hasEventListener(t){return this._emitter.hasEventListener(t)}}(function(e){class t{constructor(n=null){this.target=n,this._listenersMap=null}clear(){this._listenersMap&&this._listenersMap.clear(),this._listenersMap=null}emit(n,s){const o=this._listenersMap&&this._listenersMap.get(n);if(!o)return!1;const a=this.target||this;return[...o].forEach(l=>{l.call(a,s)}),o.length>0}on(n,s){if(Array.isArray(n)){const a=n.map(l=>this.on(l,s));return EL(a)}if(n.indexOf(",")>-1)throw new TypeError("Evented.on() with a comma delimited string of event types is not supported");this._listenersMap||(this._listenersMap=new Map);const o=this._listenersMap.get(n)||[];return o.push(s),this._listenersMap.set(n,o),{remove:()=>{const a=this._listenersMap&&this._listenersMap.get(n)||[],l=a.indexOf(s);l>=0&&a.splice(l,1)}}}once(n,s){const o=this.on(n,a=>{o.remove(),s.call(null,a)});return o}hasEventListener(n){const s=this._listenersMap&&this._listenersMap.get(n);return s!=null&&s.length>0}}e.EventEmitter=t,e.EventedMixin=i=>{let n=class extends i{constructor(){super(...arguments),this._emitter=new t}destroy(){this._emitter.clear()}emit(s,o){return this._emitter.emit(s,o)}on(s,o){return this._emitter.on(s,o)}once(s,o){return this._emitter.once(s,o)}hasEventListener(s){return this._emitter.hasEventListener(s)}};return n=c([N("esri.core.Evented")],n),n};let r=class extends Ze{constructor(){super(...arguments),this._emitter=new m0.EventEmitter(this)}destroy(){this._emitter.clear()}emit(i,n){return this._emitter.emit(i,n)}on(i,n){return this._emitter.on(i,n)}once(i,n){return this._emitter.once(i,n)}hasEventListener(i){return this._emitter.hasEventListener(i)}};r=c([N("esri.core.Evented")],r),e.EventedAccessor=r})(m0||(m0={}));const _h=m0;function FL(e){return(t,r)=>{t[r]=e}}class jce{constructor(){this._observers=[]}observe(t){return this._observers.includes(t)||this._observers.push(t),new CH(this._observers,t)}notify(){const t=this._observers.slice();for(let r=0;r<t.length;++r){const i=t[r];i.onInvalidated(),i.onCommitted()}}}var Hc;class Vce{constructor(){this.target=null,this.cancellable=!1,this.defaultPrevented=!1,this.item=void 0,this.type=void 0}preventDefault(){this.cancellable&&(this.defaultPrevented=!0)}reset(t){this.defaultPrevented=!1,this.item=t}}const Go=new vl(Vce,void 0,e=>{e.item=null,e.target=null,e.defaultPrevented=!1,e.cancellable=!1}),Uce=()=>{};function a4(e){return e?e instanceof Vf?e.toArray():e.length?Array.prototype.slice.apply(e):[]:[]}function l4(e){if(e&&e.length)return e[0]}function zce(e,t,r,i){const n=Math.min(e.length-r,t.length-i);let s=0;for(;s<n&&e[r+s]===t[i+s];)s++;return s}function aW(e,t,r,i){t&&t.forEach((n,s,o)=>{e.push(n),aW(e,r.call(i,n,s,o),r,i)})}const Oh=new Set,Ph=new Set,Rh=new Set,u4=new Map;let Bce=0,Vf=Hc=class extends _h.EventedAccessor{constructor(e){super(e),this._chgListeners=[],this._notifications=null,this._timer=null,this._observable=new jce,this.length=0,this._items=[],Object.defineProperty(this,"uid",{value:Bce++})}static isCollection(e){return e!=null&&e instanceof Hc}normalizeCtorArgs(e){return e?Array.isArray(e)||e instanceof Hc?{items:e}:e:{}}destroy(){this.removeAll()}*[Symbol.iterator](){yield*this.items}get items(){return Et(this._observable),this._items}set items(e){this._emitBeforeChanges(1)||(this._splice(0,this.length,a4(e)),this._emitAfterChanges(1))}hasEventListener(e){return e==="change"?this._chgListeners.length>0:this._emitter.hasEventListener(e)}on(e,t){if(e==="change"){const r=this._chgListeners,i={removed:!1,callback:t};return r.push(i),this._notifications&&this._notifications.push({listeners:r.slice(),items:this._items.slice(),changes:[]}),{remove(){this.remove=Uce,i.removed=!0,r.splice(r.indexOf(i),1)}}}return this._emitter.on(e,t)}once(e,t){const r=this.on(e,t);return{remove(){r.remove()}}}add(e,t){if(Et(this._observable),this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t??null);return this._splice(r,0,[e]),this._emitAfterChanges(1),this}addMany(e,t=this._items.length){if(Et(this._observable),!e||!e.length)return this;if(this._emitBeforeChanges(1))return this;const r=this.getNextIndex(t);return this._splice(r,0,a4(e)),this._emitAfterChanges(1),this}removeAll(){if(Et(this._observable),!this.length||this._emitBeforeChanges(2))return[];const e=this._splice(0,this.length)||[];return this._emitAfterChanges(2),e}clone(){return Et(this._observable),this._createNewInstance({items:this._items.map(ie)})}concat(...e){Et(this._observable);const t=e.map(a4);return this._createNewInstance({items:this._items.concat(...t)})}drain(e,t){if(Et(this._observable),!this.length||this._emitBeforeChanges(2))return;const r=this._splice(0,this.length),i=r.length;for(let n=0;n<i;n++)e.call(t,r[n],n,r);this._emitAfterChanges(2)}every(e,t){return Et(this._observable),this._items.every(e,t)}filter(e,t){let r;return Et(this._observable),r=arguments.length===2?this._items.filter(e,t):this._items.filter(e),this._createNewInstance({items:r})}find(e,t){return Et(this._observable),this._items.find(e,t)}findIndex(e,t){return Et(this._observable),this._items.findIndex(e,t)}flatten(e,t){Et(this._observable);const r=[];return aW(r,this,e,t),new Hc(r)}forEach(e,t){return Et(this._observable),this._items.forEach(e,t)}getItemAt(e){return Et(this._observable),this._items[e]}getNextIndex(e){Et(this._observable);const t=this.length;return(e=e??t)<0?e=0:e>t&&(e=t),e}includes(e,t=0){return Et(this._observable),this._items.includes(e,t)}indexOf(e,t=0){return Et(this._observable),this._items.indexOf(e,t)}join(e=","){return Et(this._observable),this._items.join(e)}lastIndexOf(e,t=this.length-1){return Et(this._observable),this._items.lastIndexOf(e,t)}map(e,t){Et(this._observable);const r=this._items.map(e,t);return new Hc({items:r})}reorder(e,t=this.length-1){Et(this._observable);const r=this.indexOf(e);if(r!==-1){if(t<0?t=0:t>=this.length&&(t=this.length-1),r!==t){if(this._emitBeforeChanges(4))return e;this._splice(r,1),this._splice(t,0,[e]),this._emitAfterChanges(4)}return e}}pop(){if(Et(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=l4(this._splice(this.length-1,1));return this._emitAfterChanges(2),e}push(...e){return Et(this._observable),this._emitBeforeChanges(1)||(this._splice(this.length,0,e),this._emitAfterChanges(1)),this.length}reduce(e,t){Et(this._observable);const r=this._items;return arguments.length===2?r.reduce(e,t):r.reduce(e)}reduceRight(e,t){Et(this._observable);const r=this._items;return arguments.length===2?r.reduceRight(e,t):r.reduceRight(e)}remove(e){return Et(this._observable),this.removeAt(this.indexOf(e))}removeAt(e){if(Et(this._observable),e<0||e>=this.length||this._emitBeforeChanges(2))return;const t=l4(this._splice(e,1));return this._emitAfterChanges(2),t}removeMany(e){if(Et(this._observable),!e||!e.length||this._emitBeforeChanges(2))return[];const t=e instanceof Hc?e.toArray():e,r=this._items,i=[],n=t.length;for(let s=0;s<n;s++){const o=t[s],a=r.indexOf(o);if(a>-1){const l=1+zce(t,r,s+1,a+1),u=this._splice(a,l);u&&u.length>0&&i.push.apply(i,u),s+=l-1}}return this._emitAfterChanges(2),i}reverse(){if(Et(this._observable),this._emitBeforeChanges(4))return this;const e=this._splice(0,this.length);return e&&(e.reverse(),this._splice(0,0,e)),this._emitAfterChanges(4),this}shift(){if(Et(this._observable),!this.length||this._emitBeforeChanges(2))return;const e=l4(this._splice(0,1));return this._emitAfterChanges(2),e}slice(e=0,t=this.length){return Et(this._observable),this._createNewInstance({items:this._items.slice(e,t)})}some(e,t){return Et(this._observable),this._items.some(e,t)}sort(e){if(Et(this._observable),!this.length||this._emitBeforeChanges(4))return this;const t=this._splice(0,this.length);return arguments.length?t.sort(e):t.sort(),this._splice(0,0,t),this._emitAfterChanges(4),this}splice(e,t,...r){Et(this._observable);const i=(t?2:0)|(r.length?1:0);if(this._emitBeforeChanges(i))return[];const n=this._splice(e,t,r)||[];return this._emitAfterChanges(i),n}toArray(){return Et(this._observable),this._items.slice()}toJSON(){return Et(this._observable),this.toArray()}toLocaleString(){return Et(this._observable),this._items.toLocaleString()}toString(){return Et(this._observable),this._items.toString()}unshift(...e){return Et(this._observable),!e.length||this._emitBeforeChanges(1)||(this._splice(0,0,e),this._emitAfterChanges(1)),this.length}_createNewInstance(e){return new this.constructor(e)}_splice(e,t,r){const i=this._items,n=this.itemType;let s,o;if(!this._notifications&&this.hasEventListener("change")&&(this._notifications=[{listeners:this._chgListeners.slice(),items:this._items.slice(),changes:[]}],this._timer&&this._timer.remove(),this._timer=s2(()=>this._dispatchChange())),t){if(o=i.splice(e,t),this.hasEventListener("before-remove")){const a=Go.acquire();a.target=this,a.cancellable=!0;for(let l=0,u=o.length;l<u;l++)s=o[l],a.reset(s),this.emit("before-remove",a),a.defaultPrevented&&(o.splice(l,1),i.splice(e,0,s),e+=1,l-=1,u-=1);Go.release(a)}if(this.length=this._items.length,this.hasEventListener("after-remove")){const a=Go.acquire();a.target=this,a.cancellable=!1;const l=o.length;for(let u=0;u<l;u++)a.reset(o[u]),this.emit("after-remove",a);Go.release(a)}}if(r&&r.length){if(n){const h=[];for(const d of r){const f=n.ensureType(d);f==null&&d!=null||h.push(f)}r=h}const a=this.hasEventListener("before-add"),l=this.hasEventListener("after-add"),u=e===this.length;if(a||l){const h=Go.acquire();h.target=this,h.cancellable=!0;const d=Go.acquire();d.target=this,d.cancellable=!1;for(const f of r)a?(h.reset(f),this.emit("before-add",h),h.defaultPrevented||(u?i.push(f):i.splice(e++,0,f),this._set("length",i.length),l&&(d.reset(f),this.emit("after-add",d)))):(u?i.push(f):i.splice(e++,0,f),this._set("length",i.length),d.reset(f),this.emit("after-add",d));Go.release(d),Go.release(h)}else{if(u)for(const h of r)i.push(h);else i.splice(e,0,...r);this._set("length",i.length)}}return(r&&r.length||o&&o.length)&&this._notifyChangeEvent(r,o),o}_emitBeforeChanges(e){let t=!1;if(this.hasEventListener("before-changes")){const r=Go.acquire();r.target=this,r.cancellable=!0,r.type=e,this.emit("before-changes",r),t=r.defaultPrevented,Go.release(r)}return t}_emitAfterChanges(e){if(this.hasEventListener("after-changes")){const t=Go.acquire();t.target=this,t.cancellable=!1,t.type=e,this.emit("after-changes",t),Go.release(t)}this._observable.notify()}_notifyChangeEvent(e,t){this.hasEventListener("change")&&this._notifications&&this._notifications[this._notifications.length-1].changes.push({added:e,removed:t})}_dispatchChange(){if(this._timer&&(this._timer.remove(),this._timer=null),!this._notifications)return;const e=this._notifications;this._notifications=null;for(const t of e){const r=t.changes;Oh.clear(),Ph.clear(),Rh.clear();for(const{added:l,removed:u}of r){if(l)if(Rh.size===0&&Ph.size===0)for(const h of l)Oh.add(h);else for(const h of l)Ph.has(h)?(Rh.add(h),Ph.delete(h)):Rh.has(h)||Oh.add(h);if(u)if(Rh.size===0&&Oh.size===0)for(const h of u)Ph.add(h);else for(const h of u)Oh.has(h)?Oh.delete(h):(Rh.delete(h),Ph.add(h))}const i=cs.acquire();Oh.forEach(l=>{i.push(l)});const n=cs.acquire();Ph.forEach(l=>{n.push(l)});const s=this._items,o=t.items,a=cs.acquire();if(Rh.forEach(l=>{o.indexOf(l)!==s.indexOf(l)&&a.push(l)}),t.listeners&&(i.length||n.length||a.length)){const l={target:this,added:i,removed:n,moved:a},u=t.listeners.length;for(let h=0;h<u;h++){const d=t.listeners[h];d.removed||d.callback.call(this,l)}}cs.release(i),cs.release(n),cs.release(a)}Oh.clear(),Ph.clear(),Rh.clear()}};Vf.ofType=e=>{if(!e)return Hc;if(u4.has(e))return u4.get(e);let t=null;if(typeof e=="function")t=e.prototype.declaredClass;else if(e.base)t=e.base.prototype.declaredClass;else for(const i in e.typeMap){const n=e.typeMap[i].prototype.declaredClass;t?t+=` | ${n}`:t=n}let r=class extends Hc{};return c([FL({Type:e,ensureType:typeof e=="function"?br(e):ju(e)})],r.prototype,"itemType",void 0),r=c([N(`esri.core.Collection<${t}>`)],r),u4.set(e,r),r},c([p()],Vf.prototype,"length",void 0),c([p()],Vf.prototype,"items",null),Vf=Hc=c([N("esri.core.Collection")],Vf);const Je=Vf;function Rm(e,t,r=Je){return t||(t=new r),t===e||(t.removeAll(),Gce(e)?t.addMany(e):e&&t.add(e)),t}function lW(e){return e}function Gce(e){return e&&(Array.isArray(e)||"items"in e&&Array.isArray(e.items))}function qce(e,t,r){if(!e||!e.read||e.read.enabled===!1||!e.read.source)return!1;const i=e.read.source;if(typeof i=="string"){if(i===t||i.indexOf(".")>-1&&i.indexOf(t)===0&&KF(i,r))return!0}else for(const n of i)if(n===t||n.indexOf(".")>-1&&n.indexOf(t)===0&&KF(n,r))return!0;return!1}function Hce(e){return e&&(!e.read||e.read.enabled!==!1&&!e.read.source)}function Wce(e,t,r,i,n){let s=zA(t[r],n);Hce(s)&&(e[r]=!0);for(const o of Object.getOwnPropertyNames(t))s=zA(t[o],n),qce(s,r,i)&&(e[o]=!0)}function Jce(e,t,r,i){const n=r.metadatas,s=DL(n[t],"any",i),o=s&&s.default;if(o===void 0)return;const a=typeof o=="function"?o.call(e,t,i):o;a!==void 0&&r.set(t,a)}const uW={origin:"service"};function cW(e,t,r=uW){if(!t||typeof t!="object")return;const i=jn(e),n=i.metadatas,s={};for(const o of Object.getOwnPropertyNames(t))Wce(s,n,o,t,r);i.setDefaultOrigin(r.origin);for(const o of Object.getOwnPropertyNames(s)){const a=zA(n[o],r).read,l=a&&a.source;let u;u=l&&typeof l=="string"?Av(t,l):t[o],a&&a.reader&&(u=a.reader.call(e,u,t,r)),u!==void 0&&i.set(o,u)}if(!r||!r.ignoreDefaults)for(const o of Object.getOwnPropertyNames(n))s[o]||Jce(e,o,i,r);i.setDefaultOrigin("user")}function Zce(e,t,r,i=uW){var n;const s={...i,messages:[]};r(s),(n=s.messages)==null||n.forEach(o=>{o.type!=="warning"||e.loaded?i&&i.messages&&i.messages.push(o):e.loadWarnings.push(o)})}const Yce=Te.getLogger("esri.core.accessorSupport.write");function Kce(e,t,r,i,n){var s,o;const a={};return(s=t.write)==null||(o=s.writer)==null||o.call(e,i,a,r,n),a}function hW(e,t,r,i,n,s){if(!i||!i.write)return!1;const o=e.get(r);if(!n&&i.write.overridePolicy){const a=i.write.overridePolicy.call(e,o,r,s);a!==void 0&&(n=a)}if(n||(n=i.write),!n||n.enabled===!1)return!1;if((o===null&&!n.allowNull&&!n.writerEnsuresNonNull||o===void 0)&&n.isRequired){const a=new Z("web-document-write:property-required",`Missing value for required property '${r}' on '${e.declaredClass}'`,{propertyName:r,target:e});return a&&s&&s.messages?s.messages.push(a):a&&!s&&Yce.error(a.name,a.message),!1}return o===void 0||o===null&&!n.allowNull&&!n.writerEnsuresNonNull||Xce(e,r,s,i,o)?!1:i.default!==void 0?!0:!(!n.ignoreOrigin&&s&&s.origin&&t.store.originOf(r)<Ds(s.origin))}function Xce(e,t,r,i,n){const s=i.default;if(s===void 0)return!1;if(i.defaultEquals!=null)return i.defaultEquals(n);if(typeof s=="function"){if(Array.isArray(n)){const o=s.call(e,t,r);return dH(o,n)}return!1}return s===n}function dW(e,t,r,i){const n=jn(e),s=n.metadatas,o=sW(s[t],i);return!!o&&hW(e,n,t,o,r,i)}function pW(e,t,r){if(e&&typeof e.toJSON=="function"&&(!e.toJSON.isDefaultToJSON||!e.write))return JS(t,e.toJSON());const i=jn(e),n=i.metadatas;for(const a in n){const l=sW(n[a],r);if(!hW(e,i,a,l,void 0,r))continue;const u=e.get(a),h=Kce(e,l,l.write&&typeof l.write.target=="string"?l.write.target:a,u,r);var s,o;Object.keys(h).length>0&&(t=JS(t,h),r!=null&&(s=r.resources)!=null&&(o=s.pendingOperations)!=null&&o.length&&Promise.all(r.resources.pendingOperations).then(()=>JS(t,h)),r&&r.writtenProperties&&r.writtenProperties.push({target:e,propName:a,oldOrigin:kue(i.store.originOf(a)),newOrigin:r.origin}))}return t}const a2=e=>{let t=class extends e{constructor(...r){super(...r)}read(r,i){cW(this,r,i)}write(r={},i){return pW(this,r,i)}toJSON(r){return this.write({},r)}static fromJSON(r,i){return Qce.call(this,r,i)}};return t=c([N("esri.core.JSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function Qce(e,t){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const r=new this;return r.read(e,t),r}let me=class extends a2(Ze){};me=c([N("esri.core.JSONSupport")],me);class ehe{constructor(t){this.instance=t,this._resolver=ph(),this._status=0,this._resolvingPromises=[],this._resolver.promise.then(()=>{this._status=1,this._cleanUp()},()=>{this._status=2,this._cleanUp()})}addResolvingPromise(t){this._resolvingPromises.push(t),this._tryResolve()}isResolved(){return this._status===1}isRejected(){return this._status===2}isFulfilled(){return this._status!==0}abort(){this._resolver.reject(Zr())}when(t,r){return this._resolver.promise.then(t,r)}_cleanUp(){this._allPromise=this._resolvingPromises=this._allPromise=null}_tryResolve(){if(this.isFulfilled())return;const t=ph(),r=[...this._resolvingPromises,t.promise],i=this._allPromise=Promise.all(r);i.then(()=>{this.isFulfilled()||this._allPromise!==i||this._resolver.resolve(this.instance)},n=>{this.isFulfilled()||this._allPromise!==i||sn(n)||this._resolver.reject(n)}),t.resolve()}}const l2=e=>{let t=class extends e{constructor(...r){super(...r),this._promiseProps=new ehe(this),this.addResolvingPromise(Promise.resolve())}isResolved(){return this._promiseProps.isResolved()}isRejected(){return this._promiseProps.isRejected()}isFulfilled(){return this._promiseProps.isFulfilled()}when(r,i){return new Promise((n,s)=>{this._promiseProps.when(n,s)}).then(r,i)}catch(r){return this.when(null,r)}addResolvingPromise(r){r&&!this._promiseProps.isFulfilled()&&this._promiseProps.addResolvingPromise("_promiseProps"in r?r.when():r)}};return t=c([N("esri.core.Promise")],t),t};let Z3=class extends l2(Ze){};Z3=c([N("esri.core.Promise")],Z3);const the="not-loaded",rhe="loading",ihe="failed",h9="loaded",fW=e=>{let t=class extends e{constructor(...r){super(...r),this._loadController=null,this.loadError=null,this.loadStatus="not-loaded",this._set("loadWarnings",[]),this.addResolvingPromise(new Promise(i=>{const n=this.load.bind(this);this.load=s=>{const o=new Promise((a,l)=>{const u=UT(s,l);this.destroyed&&l(new Z("load:instance-destroyed",`Instance of '${this.declaredClass||this.constructor.name}' is already destroyed`,{instance:this})),this._promiseProps.when(a,l).finally(()=>{u&&u.remove()})});if(this.loadStatus===the){this._set("loadStatus",rhe);const a=this._loadController=new AbortController;n({signal:a.signal}),xa(a.signal,()=>{this._promiseProps.abort()})}return i(),o}})),this.when(()=>{this._set("loadStatus",h9),this._loadController=null},i=>{this._set("loadStatus",ihe),this._set("loadError",i),this._loadController=null})}get loaded(){return this.loadStatus===h9}get loadWarnings(){return this._get("loadWarnings")}load(){return null}cancelLoad(){var r;return this.isFulfilled()||(this._set("loadError",new Z("load:cancelled","Cancelled")),(r=this._loadController)==null||r.abort()),this}};return c([p({readOnly:!0})],t.prototype,"loaded",null),c([p({readOnly:!0})],t.prototype,"loadError",void 0),c([p()],t.prototype,"loadStatus",void 0),c([p({type:[Ys],readOnly:!0})],t.prototype,"loadWarnings",null),t=c([N("esri.core.Loadable")],t),t};let tb=class extends fW(Z3){};tb=c([N("esri.core.Loadable")],tb),function(e){function t(r){return!(!r||!r.load)}e.LoadableMixin=fW,e.isLoadable=t}(tb||(tb={}));const Lo=tb;function nhe(e,t,r){return Zs(e.map((i,n)=>t.apply(r,[i,n])))}function she(e,t,r){return Zs(e.map((i,n)=>t.apply(r,[i,n]))).then(i=>i.map(n=>n.value))}function HT(e){return ce(e)?eb():e.then(t=>({ok:!0,value:t})).catch(t=>({ok:!1,error:t}))}function utt(e){return e.then(t=>({ok:!0,value:t})).catch(t=>(wh(t),{ok:!1,error:t}))}async function jL(e,t){return await e.load(),ohe(e,t)}async function ohe(e,t){const r=[],i=(...s)=>{for(const o of s)ce(o)||(Array.isArray(o)?i(...o):Je.isCollection(o)?o.forEach(a=>i(a)):Lo.isLoadable(o)&&r.push(o))};t(i);let n=null;if(await she(r,async s=>{(await HT(ahe(s)?s.loadAll():s.load())).ok!==!1||n||(n=s)}),n)throw n.loadError;return e}function ahe(e){return"loadAll"in e&&typeof e.loadAll=="function"}const lhe=Te.getLogger("esri.core.urlUtils"),kv=Kt.request,d9="esri/config: esriConfig.request.proxyUrl is not set.",mW=/^\s*[a-z][a-z0-9-+.]*:(?![0-9])/i,yW=/^\s*http:/i,uhe=/^\s*https:/i,che=/^\s*file:/i,hhe=/:\d+$/,dhe=/^https?:\/\/[^/]+\.arcgis.com\/sharing(\/|$)/i,phe=new RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?$"),fhe=new RegExp("^((([^\\[:]+):)?([^@]+)@)?(\\[([^\\]]+)\\]|([^\\[:]*))(:([0-9]+))?$");class ku{constructor(t=""){this.uri=t,this.scheme=null,this.authority=null,this.path=null,this.query=null,this.fragment=null,this.user=null,this.password=null,this.host=null,this.port=null;let r=this.uri.match(phe);this.scheme=r[2]||(r[1]?"":null),this.authority=r[4]||(r[3]?"":null),this.path=r[5],this.query=r[7]||(r[6]?"":null),this.fragment=r[9]||(r[8]?"":null),this.authority!=null&&(r=this.authority.match(fhe),this.user=r[3]||null,this.password=r[4]||null,this.host=r[6]||r[7],this.port=r[9]||null)}toString(){return this.uri}}const Ki=new ku(Kt.applicationUrl),px={},gW=(()=>{const e=Ki.path,t=e.substring(0,e.lastIndexOf(e.split("/")[e.split("/").length-1]));return`${`${Ki.scheme}://${Ki.host}${Ki.port!=null?`:${Ki.port}`:""}`}${t}`})();function Kr(e){const t={path:null,query:null},r=new ku(e),i=e.indexOf("?");return r.query===null?t.path=e:(t.path=e.substring(0,i),t.query=vW(r.query)),r.fragment&&(t.hash=r.fragment,r.query===null&&(t.path=t.path.substring(0,t.path.length-(r.fragment.length+1)))),t}function vW(e){const t=e.split("&"),r={};for(const i of t){if(!i)continue;const n=i.indexOf("=");let s,o;n<0?(s=decodeURIComponent(i),o=""):(s=decodeURIComponent(i.slice(0,n)),o=decodeURIComponent(i.slice(n+1)));let a=r[s];typeof a=="string"&&(a=r[s]=[a]),Array.isArray(a)?a.push(o):r[s]=o}return r}function p9(e){return e&&typeof e=="object"&&"toJSON"in e&&typeof e.toJSON=="function"}function lp(e,t){return e?t&&typeof t=="function"?Object.keys(e).map(r=>encodeURIComponent(r)+"="+encodeURIComponent(t(r,e[r]))).join("&"):Object.keys(e).map(r=>{const i=e[r];if(i==null)return"";const n=encodeURIComponent(r)+"=",s=t&&t[r];return s?n+encodeURIComponent(s(i)):Array.isArray(i)?i.map(o=>p9(o)?n+encodeURIComponent(JSON.stringify(o)):n+encodeURIComponent(o)).join("&"):p9(i)?n+encodeURIComponent(JSON.stringify(i)):n+encodeURIComponent(i)}).filter(r=>r).join("&"):""}function mhe(e=!1){let t,r=kv.proxyUrl;if(typeof e=="string"){t=whe(e);const i=WT(e);i&&(r=i.proxyUrl)}else t=!!e;if(!r)throw lhe.warn(d9),new Z("urlutils:proxy-not-set",d9);return t&&GA()&&(r=GL(r)),Kr(r)}function yhe(e){const t=WT(e);let r,i;if(t){const n=VL(t.proxyUrl);r=n.path,i=n.query?vW(n.query):null}if(r){const n=Kr(e);e=r+"?"+n.path;const s=lp({...i,...n.query});s&&(e=`${e}?${s}`)}return e}const b1={path:"",query:""};function VL(e){const t=e.indexOf("?");return t!==-1?(b1.path=e.slice(0,t),b1.query=e.slice(t+1)):(b1.path=e,b1.query=null),b1}function bW(e){return e=(e=K3(e=The(e=VL(e).path),!0)).toLowerCase()}function ghe(e){const t={proxyUrl:e.proxyUrl,urlPrefix:bW(e.urlPrefix)},r=kv.proxyRules,i=t.urlPrefix;let n=r.length;for(let s=0;s<r.length;s++){const o=r[s].urlPrefix;if(i.indexOf(o)===0){if(i.length===o.length)return-1;n=s;break}o.indexOf(i)===0&&(n=s+1)}return r.splice(n,0,t),n}function WT(e){const t=kv.proxyRules,r=bW(e);for(let i=0;i<t.length;i++)if(r.indexOf(t[i].urlPrefix)===0)return t[i]}function wW(e,t){return e=f9(e),t=f9(t),K3(e)===K3(t)}function f9(e){const t=(e=$o(e)).indexOf("/sharing");return t>0?e.substring(0,t):e.replace(/\/+$/,"")}function _W(e){const t=i=>i==null||i instanceof RegExp&&i.test(e)||typeof i=="string"&&e.startsWith(i),r=kv.interceptors;if(r){for(const i of r)if(Array.isArray(i.urls)){if(i.urls.some(t))return i}else if(t(i.urls))return i}return null}function Y3(e,t,r=!1){const i=HA(e),n=HA(t);return!(!r&&i.scheme!==n.scheme)&&i.host!=null&&n.host!=null&&i.host.toLowerCase()===n.host.toLowerCase()&&i.port===n.port}function UL(e){if(typeof e=="string"){if(!Eo(e))return!0;e=HA(e)}if(Y3(e,Ki))return!0;const t=kv.trustedServers||[];for(let r=0;r<t.length;r++){const i=vhe(t[r]);for(let n=0;n<i.length;n++)if(Y3(e,i[n]))return!0}return!1}function vhe(e){return px[e]||(BL(e)||_l(e)?px[e]=[new ku(ma(e))]:px[e]=[new ku(`http://${e}`),new ku(`https://${e}`)]),px[e]}function ma(e,t=gW,r){return _l(e)?r&&r.preserveProtocolRelative?e:Ki.scheme==="http"&&Ki.authority===Ov(e).slice(2)?`http:${e}`:`https:${e}`:BL(e)?e:up(e[0]==="/"?Mhe(t):t,e)}function zL(e,t=gW,r){if(!Eo(e))return e;const i=$o(e),n=i.toLowerCase(),s=$o(t).toLowerCase().replace(/\/+$/,""),o=r?$o(r).toLowerCase().replace(/\/+$/,""):null;if(o&&s.indexOf(o)!==0)return e;const a=(d,f,m)=>(m=d.indexOf(f,m))===-1?d.length:m;let l=a(n,"/",n.indexOf("//")+2),u=-1;for(;n.slice(0,l+1)===s.slice(0,l)+"/"&&(u=l+1,l!==n.length);)l=a(n,"/",l+1);if(u===-1||o&&u<o.length)return e;e=i.slice(u);const h=s.slice(u-1).replace(/[^/]+/g,"").length;if(h>0)for(let d=0;d<h;d++)e=`../${e}`;else e=`./${e}`;return e}function $o(e){return e=Ahe(e=Ehe(e=$he(e=ma(e=e.trim()))))}function up(...e){const t=e.filter(U);if(!t||!t.length)return;const r=[];if(Eo(t[0])){const n=t[0],s=n.indexOf("//");s!==-1&&(r.push(n.slice(0,s+1)),xhe(t[0])&&(r[0]+="/"),t[0]=n.slice(s+2))}else t[0][0]==="/"&&r.push("");const i=t.reduce((n,s)=>s?n.concat(s.split("/")):n,[]);for(let n=0;n<i.length;n++){const s=i[n];s===".."&&r.length>0&&r[r.length-1]!==".."?r.pop():(!s&&n===i.length-1||s&&(s!=="."||r.length===0))&&r.push(s)}return r.join("/")}function Ov(e,t=!1){if(JT(e)||dy(e))return null;let r=e.indexOf("://");if(r===-1&&_l(e))r=2;else{if(r===-1)return null;r+=3}const i=e.indexOf("/",r);return i!==-1&&(e=e.slice(0,i)),t&&(e=K3(e,!0)),e}function Eo(e){return _l(e)||BL(e)}function JT(e){return e!=null&&e.slice(0,5)==="blob:"}function dy(e){return e.slice(0,5)==="data:"}function ctt(e){const t=xW(e);if(!t||!t.isBase64)return null;const r=atob(t.data),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}const bhe=/^data:(.*?)(;base64)?,(.*)$/;function xW(e){const t=e.match(bhe);if(!t)return null;const[,r,i,n]=t;return{mediaType:r,isBase64:!!i,data:n}}function SW(e){return e.isBase64?`data:${e.mediaType};base64,${e.data}`:`data:${e.mediaType},${e.data}`}function _l(e){return e!=null&&e!==void 0&&e[0]==="/"&&e[1]==="/"}function BL(e){return mW.test(e)}function whe(e){return uhe.test(e)||Ki.scheme==="https"&&_l(e)}function _he(e){return yW.test(e)||Ki.scheme==="http"&&_l(e)}function xhe(e){return che.test(e)}function GL(e){return _l(e)?`https:${e}`:e.replace(yW,"https:")}function She(){return Ki.scheme==="http"}function GA(){return Ki.scheme==="https"}function K3(e,t=!1){return _l(e)?e.slice(2):(e=e.replace(mW,""),t&&e.length>1&&e[0]==="/"&&e[1]==="/"&&(e=e.slice(2)),e)}function Mhe(e){const t=e.indexOf("//"),r=e.indexOf("/",t+2);return r===-1?e:e.slice(0,r)}function Ihe(e){let t=0;if(Eo(e)){const i=e.indexOf("//");i!==-1&&(t=i+2)}const r=e.lastIndexOf("/");return r<t?e:e.slice(0,r+1)}function htt(e,t){if(!e)return"";const r=Kr(e).path.replace(/\/+$/,""),i=r.substring(r.lastIndexOf("/")+1);if(t==null||!t.length)return i;const n=new RegExp(`.(${t.join("|")})$`,"ig");return i.replace(n,"")}function The(e){return e&&e[e.length-1]==="/"?e:`${e}/`}function MW(e){return e.replace(/\/+$/,"")}function $he(e){if(/^https?:\/\//i.test(e)){const t=VL(e);e=(e=t.path.replace(/\/{2,}/g,"/")).replace("/","//"),t.query&&(e+=`?${t.query}`)}return e}function Ehe(e){return e.replace(/^(https?:\/\/)(arcgis\.com)/i,"$1www.$2")}function Ahe(e){const t=kv.httpsDomains;if(!_he(e))return e;const r=e.indexOf("/",7);let i;if(i=r===-1?e:e.slice(0,r),i=i.toLowerCase().slice(7),hhe.test(i)){if(!i.endsWith(":80"))return e;i=i.slice(0,-3),e=e.replace(":80","")}return She()&&i===Ki.authority&&!dhe.test(e)||(GA()&&i===Ki.authority||t&&t.some(n=>i===n||i.endsWith(`.${n}`))||GA()&&!WT(e))&&(e=GL(e)),e}function qA(e,t,r){if(!(t&&r&&e&&Eo(e)))return e;const i=e.indexOf("//"),n=e.indexOf("/",i+2),s=e.indexOf(":",i+2),o=Math.min(n<0?e.length:n,s<0?e.length:s);return e.slice(i+2,o).toLowerCase()!==t.toLowerCase()?e:`${e.slice(0,i+2)}${r}${e.slice(o)}`}function HA(e){return typeof e=="string"?new ku(ma(e)):(e.scheme||(e.scheme=Ki.scheme),e)}function dtt(e){return khe.test(e)}function IW(e,t){const r=Kr(e),i=Object.keys(r.query||{});return i.length>0&&t&&t.warn("removeQueryParameters()",`Url query parameters are not supported, the following parameters have been removed: ${i.join(", ")}.`),r.path}function TW(e,t,r){const i=Kr(e),n=i.query||{};return n[t]=String(r),`${i.path}?${lp(n)}`}function WA(e,t){const r=Kr(e),i=r.query||{};for(const s in t)i[s]=t[s];const n=lp(i);return n?`${r.path}?${n}`:r.path}function ptt(e){if(ce(e))return null;const t=e.match(Che);return t?t[1]:null}const Che=/.*?\.([^\/]*)$/,khe=/(^data:image\/svg|\.svg$)/i;function Se(e,t,r){let i,n;return t===void 0?(n=e,i=[void 0]):typeof t!="string"?(n=e,i=[void 0],r=t):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;for(const l of i){const u=KH(s,l,n);u.write&&typeof u.write=="object"||(u.write={}),r&&(u.write.target=r),u.write.writer=a[o]}}}let v;const L={values:[1,.3048,.3048006096012192,.3047972654,.9143917962,.201166195164,.9143984146160287,.3047994715386762,20.11676512155263,20.11678249437587,.9143985307444408,.91439523,.3047997101815088,20.1168,20.116756,5e4,15e4],units:["Meter","Foot","Foot_US","Foot_Clarke","Yard_Clarke","Link_Clarke","Yard_Sears","Foot_Sears","Chain_Sears","Chain_Benoit_1895_B","Yard_Indian","Yard_Indian_1937","Foot_Gold_Coast","Chain","Chain_Sears_1922_Truncated","50_Kilometers","150_Kilometers"],2066:5,2136:12,2155:2,2157:0,2158:0,2159:12,2160:12,2204:2,2219:0,2220:0,2254:2,2255:2,2256:1,2265:1,2266:1,2267:2,2268:2,2269:1,2270:1,2271:2,2272:2,2273:1,2294:0,2295:0,2314:3,2899:2,2900:2,2901:1,2909:1,2910:1,2911:2,2912:2,2913:1,2914:1,2992:1,2993:0,2994:1,3080:1,3089:2,3090:0,3091:2,3102:2,3141:0,3142:0,3167:14,3359:2,3360:0,3361:1,3362:0,3363:2,3364:0,3365:2,3366:3,3404:2,3405:0,3406:0,3407:3,3439:0,3440:0,3479:1,3480:0,3481:1,3482:0,3483:1,3484:0,3485:2,3486:0,3487:2,3488:0,3489:0,3490:2,3491:0,3492:2,3493:0,3494:2,3495:0,3496:2,3497:0,3498:2,3499:0,3500:2,3501:0,3502:2,3503:0,3504:2,3505:0,3506:2,3507:0,3508:2,3509:0,3510:2,3511:0,3512:2,3513:0,3514:0,3515:2,3516:0,3517:2,3518:0,3519:2,3520:0,3521:2,3522:0,3523:2,3524:0,3525:2,3526:0,3527:2,3528:0,3529:2,3530:0,3531:2,3532:0,3533:2,3534:0,3535:2,3536:0,3537:2,3538:0,3539:2,3540:0,3541:2,3542:0,3543:2,3544:0,3545:2,3546:0,3547:2,3548:0,3549:2,3550:0,3551:2,3552:0,3553:2,3582:2,3583:0,3584:2,3585:0,3586:2,3587:0,3588:1,3589:0,3590:1,3591:0,3592:0,3593:1,3598:2,3599:0,3600:2,3605:1,3606:0,3607:0,3608:2,3609:0,3610:2,3611:0,3612:2,3613:0,3614:2,3615:0,3616:2,3617:0,3618:2,3619:0,3620:2,3621:0,3622:2,3623:0,3624:2,3625:0,3626:2,3627:0,3628:2,3629:0,3630:2,3631:0,3632:2,3633:0,3634:1,3635:0,3636:1,3640:2,3641:0,3642:2,3643:0,3644:1,3645:0,3646:1,3647:0,3648:1,3649:0,3650:2,3651:0,3652:2,3653:0,3654:2,3655:0,3656:1,3657:0,3658:2,3659:0,3660:2,3661:0,3662:2,3663:0,3664:2,3668:2,3669:0,3670:2,3671:0,3672:2,3673:0,3674:2,3675:0,3676:1,3677:2,3678:0,3679:1,3680:2,3681:0,3682:1,3683:2,3684:0,3685:0,3686:2,3687:0,3688:2,3689:0,3690:2,3691:0,3692:2,3696:2,3697:0,3698:2,3699:0,3700:2,3793:0,3794:0,3812:0,3854:0,3857:0,3920:0,3978:0,3979:0,3991:2,3992:2,4026:0,4037:0,4038:0,4071:0,4082:0,4083:0,4087:0,4088:0,4217:2,4414:0,4415:0,4417:0,4434:0,4437:0,4438:2,4439:2,4462:0,4467:0,4471:0,4474:0,4559:0,4647:0,4822:0,4826:0,4839:0,5018:0,5048:0,5167:0,5168:0,5221:0,5223:0,5234:0,5235:0,5243:0,5247:0,5266:0,5316:0,5320:0,5321:0,5325:0,5337:0,5361:0,5362:0,5367:0,5382:0,5383:0,5396:0,5456:0,5457:0,5469:0,5472:4,5490:0,5513:0,5514:0,5523:0,5559:0,5588:1,5589:3,5596:0,5627:0,5629:0,5641:0,5643:0,5644:0,5646:2,5654:2,5655:2,5659:0,5700:0,5825:0,5836:0,5837:0,5839:0,5842:0,5844:0,5858:0,5879:0,5880:0,5887:0,5890:0,6128:1,6129:1,6141:1,6204:0,6210:0,6211:0,6307:0,6312:0,6316:0,6362:0,6391:1,6405:1,6406:0,6407:1,6408:0,6409:1,6410:0,6411:2,6412:0,6413:2,6414:0,6415:0,6416:2,6417:0,6418:2,6419:0,6420:2,6421:0,6422:2,6423:0,6424:2,6425:0,6426:2,6427:0,6428:2,6429:0,6430:2,6431:0,6432:2,6433:0,6434:2,6435:0,6436:2,6437:0,6438:2,6439:0,6440:0,6441:2,6442:0,6443:2,6444:0,6445:2,6446:0,6447:2,6448:0,6449:2,6450:0,6451:2,6452:0,6453:2,6454:0,6455:2,6456:0,6457:2,6458:0,6459:2,6460:0,6461:2,6462:0,6463:2,6464:0,6465:2,6466:0,6467:2,6468:0,6469:2,6470:0,6471:2,6472:0,6473:2,6474:0,6475:2,6476:0,6477:2,6478:0,6479:2,6484:2,6485:0,6486:2,6487:0,6488:2,6489:0,6490:2,6491:0,6492:2,6493:0,6494:1,6495:0,6496:1,6497:0,6498:0,6499:1,6500:0,6501:2,6502:0,6503:2,6504:0,6505:2,6506:0,6507:2,6508:0,6509:0,6510:2,6515:1,6516:0,6518:0,6519:2,6520:0,6521:2,6522:0,6523:2,6524:0,6525:2,6526:0,6527:2,6528:0,6529:2,6530:0,6531:2,6532:0,6533:2,6534:0,6535:2,6536:0,6537:2,6538:0,6539:2,6540:0,6541:2,6542:0,6543:2,6544:0,6545:1,6546:0,6547:1,6548:0,6549:2,6550:0,6551:2,6552:0,6553:2,6554:0,6555:2,6556:0,6557:1,6558:0,6559:1,6560:0,6561:1,6562:0,6563:2,6564:0,6565:2,6566:0,6567:0,6568:2,6569:0,6570:1,6571:0,6572:2,6573:0,6574:2,6575:0,6576:2,6577:0,6578:2,6582:2,6583:0,6584:2,6585:0,6586:2,6587:0,6588:2,6589:0,6590:2,6591:0,6592:0,6593:2,6594:0,6595:2,6596:0,6597:2,6598:0,6599:2,6600:0,6601:2,6602:0,6603:2,6605:2,6606:0,6607:2,6608:0,6609:2,6610:0,6611:0,6612:2,6613:0,6614:2,6615:0,6616:2,6617:0,6618:2,6633:2,6646:0,6703:0,6784:0,6785:1,6786:0,6787:1,6788:0,6789:1,6790:0,6791:1,6792:0,6793:1,6794:0,6795:1,6796:0,6797:1,6798:0,6799:1,6800:0,6801:1,6802:0,6803:1,6804:0,6805:1,6806:0,6807:1,6808:0,6809:1,6810:0,6811:1,6812:0,6813:1,6814:0,6815:1,6816:0,6817:1,6818:0,6819:1,6820:0,6821:1,6822:0,6823:1,6824:0,6825:1,6826:0,6827:1,6828:0,6829:1,6830:0,6831:1,6832:0,6833:1,6834:0,6835:1,6836:0,6837:1,6838:0,6839:1,6840:0,6841:1,6842:0,6843:1,6844:0,6845:1,6846:0,6847:1,6848:0,6849:1,6850:0,6851:1,6852:0,6853:1,6854:0,6855:1,6856:0,6857:1,6858:0,6859:1,6860:0,6861:1,6862:0,6863:1,6867:0,6868:1,6870:0,6875:0,6876:0,6879:0,6880:2,6884:0,6885:1,6886:0,6887:1,6915:0,6922:0,6923:2,6924:0,6925:2,6962:0,6984:0,6991:0,7128:2,7131:0,7132:2,7142:0,7257:0,7258:2,7259:0,7260:2,7261:0,7262:2,7263:0,7264:2,7265:0,7266:2,7267:0,7268:2,7269:0,7270:2,7271:0,7272:2,7273:0,7274:2,7275:0,7276:2,7277:0,7278:2,7279:0,7280:2,7281:0,7282:2,7283:0,7284:2,7285:0,7286:2,7287:0,7288:2,7289:0,7290:2,7291:0,7292:2,7293:0,7294:2,7295:0,7296:2,7297:0,7298:2,7299:0,7300:2,7301:0,7302:2,7303:0,7304:2,7305:0,7306:2,7307:0,7308:2,7309:0,7310:2,7311:0,7312:2,7313:0,7314:2,7315:0,7316:2,7317:0,7318:2,7319:0,7320:2,7321:0,7322:2,7323:0,7324:2,7325:0,7326:2,7327:0,7328:2,7329:0,7330:2,7331:0,7332:2,7333:0,7334:2,7335:0,7336:2,7337:0,7338:2,7339:0,7340:2,7341:0,7342:2,7343:0,7344:2,7345:0,7346:2,7347:0,7348:2,7349:0,7350:2,7351:0,7352:2,7353:0,7354:2,7355:0,7356:2,7357:0,7358:2,7359:0,7360:2,7361:0,7362:2,7363:0,7364:2,7365:0,7366:2,7367:0,7368:2,7369:0,7370:2,7877:0,7878:0,7882:0,7883:0,7887:0,7899:0,7991:0,7992:0,8035:2,8036:2,8058:0,8059:0,8082:0,8083:0,8088:0,8090:0,8091:2,8092:0,8093:2,8095:0,8096:2,8097:0,8098:2,8099:0,8100:2,8101:0,8102:2,8103:0,8104:2,8105:0,8106:2,8107:0,8108:2,8109:0,8110:2,8111:0,8112:2,8113:0,8114:2,8115:0,8116:2,8117:0,8118:2,8119:0,8120:2,8121:0,8122:2,8123:0,8124:2,8125:0,8126:2,8127:0,8128:2,8129:0,8130:2,8131:0,8132:2,8133:0,8134:2,8135:0,8136:2,8137:0,8138:2,8139:0,8140:2,8141:0,8142:2,8143:0,8144:2,8145:0,8146:2,8147:0,8148:2,8149:0,8150:2,8151:0,8152:2,8153:0,8154:2,8155:0,8156:2,8157:0,8158:2,8159:0,8160:2,8161:0,8162:2,8163:0,8164:2,8165:0,8166:2,8167:0,8168:2,8169:0,8170:2,8171:0,8172:2,8173:0,8177:2,8179:0,8180:2,8181:0,8182:2,8184:0,8185:2,8187:0,8189:2,8191:0,8193:2,8196:0,8197:2,8198:0,8200:2,8201:0,8202:2,8203:0,8204:2,8205:0,8206:2,8207:0,8208:2,8209:0,8210:2,8212:0,8213:2,8214:0,8216:2,8218:0,8220:2,8222:0,8224:2,8225:0,8226:2,8311:0,8312:1,8313:0,8314:1,8315:0,8316:1,8317:0,8318:1,8319:0,8320:1,8321:0,8322:1,8323:0,8324:1,8325:0,8326:1,8327:0,8328:1,8329:0,8330:1,8331:0,8332:1,8333:0,8334:1,8335:0,8336:1,8337:0,8338:1,8339:0,8340:1,8341:0,8342:1,8343:0,8344:1,8345:0,8346:1,8347:0,8348:1,8352:0,8353:0,8379:0,8380:2,8381:0,8382:2,8383:0,8384:2,8385:0,8387:2,8391:0,8395:0,8433:0,8441:0,8455:0,8456:0,8531:2,8682:0,8686:0,8687:0,8692:0,8693:0,8826:0,8903:0,8950:0,8951:0,9039:0,9040:0,9141:0,9149:0,9150:0,9191:0,9221:0,9222:0,9249:0,9250:0,9252:0,9254:0,9265:0,9284:0,9285:0,9300:0,9354:0,9367:0,9373:0,9377:0,9387:0,9391:0,9456:0,9473:0,9498:0,9674:0,9678:0,9680:0,9709:0,9712:0,9713:0,9716:0,9741:0,9748:2,9749:2,9761:0,9766:0,20499:0,20538:0,20539:0,20790:0,20791:0,21291:0,21292:0,21500:0,21817:0,21818:0,22032:0,22033:0,22091:0,22092:0,22332:0,22391:0,22392:0,22700:0,22770:0,22780:0,22832:0,23090:0,23095:0,23239:0,23240:0,23433:0,23700:0,24047:0,24048:0,24100:3,24200:0,24305:0,24306:0,24382:10,24383:0,24500:0,24547:0,24548:0,24571:9,24600:0,25e3:0,25231:0,25884:0,25932:0,26237:0,26331:0,26332:0,26432:0,26591:0,26592:0,26632:0,26692:0,27120:0,27200:0,27291:6,27292:6,27429:0,27492:0,27493:0,27500:0,27700:0,28232:0,28600:0,28991:0,28992:0,29100:0,29101:0,29220:0,29221:0,29333:0,29635:0,29636:0,29701:0,29738:0,29739:0,29849:0,29850:0,29871:8,29872:7,29873:0,29874:0,30200:5,30339:0,30340:0,30591:0,30592:0,30791:0,30792:0,30800:0,31028:0,31121:0,31154:0,31170:0,31171:0,31370:0,31528:0,31529:0,31600:0,31700:0,31838:0,31839:0,31900:0,31901:0,32061:0,32062:0,32098:0,32099:2,32100:0,32104:0,32161:0,32766:0,53048:0,53049:0,54090:0,54091:0,65061:2,65062:2,65161:0,65163:0,102041:2,102064:11,102068:15,102069:16,102118:2,102119:1,102120:2,102121:2,102217:2,102218:0,102219:2,102220:2,102378:1,102379:1,102380:0,102381:1,102589:2,102599:2,102600:2,102604:2,102647:0,102704:2,102705:2,102706:0,102759:1,102760:1,102761:2,102762:0,102763:2,102764:0,102765:0,102766:2,102962:0,102963:0,102970:1,102974:2,102993:0,102994:0,102995:2,102996:2,103015:0,103016:2,103017:0,103018:2,103025:0,103026:0,103027:2,103028:2,103035:0,103036:0,103037:2,103038:2,103039:0,103040:0,103041:2,103042:2,103043:0,103044:0,103045:2,103046:2,103047:0,103048:0,103049:2,103050:2,103051:0,103052:2,103053:0,103054:2,103055:0,103056:2,103057:0,103058:0,103059:2,103060:2,103061:0,103062:0,103063:2,103064:2,103069:2,103070:0,103071:0,103072:2,103073:2,103086:0,103087:0,103088:2,103089:2,103094:1,103095:0,103096:2,103103:0,103104:2,103105:0,103106:2,103121:0,103122:2,103123:0,103124:0,103125:1,103126:1,103127:0,103128:0,103129:2,103130:2,103131:0,103132:0,103133:2,103134:2,103135:0,103136:0,103137:1,103138:1,103139:0,103140:2,103141:0,103142:2,103143:0,103144:2,103145:0,103146:1,103147:0,103148:0,103149:2,103150:2,103151:0,103152:2,103172:0,103173:2,103174:0,103175:0,103176:2,103177:2,103178:0,103179:0,103180:2,103181:2,103182:0,103183:0,103184:2,103185:2,103228:0,103229:0,103230:2,103231:2,103250:0,103251:2,103252:0,103253:2,103260:0,103261:0,103262:2,103263:2,103270:0,103271:0,103272:2,103273:2,103274:0,103275:0,103276:2,103277:2,103278:0,103279:0,103280:2,103281:2,103282:0,103283:0,103284:2,103285:2,103286:0,103287:2,103288:0,103289:2,103290:0,103291:2,103292:0,103293:0,103294:2,103295:2,103296:0,103297:0,103298:2,103299:2,103376:2,103377:0,103378:0,103379:2,103380:2,103393:0,103394:0,103395:2,103396:2,103472:0,103473:1,103474:0,103475:2,103482:0,103483:2,103484:0,103485:2,103500:0,103501:2,103502:0,103503:0,103504:1,103505:1,103506:0,103507:0,103508:2,103509:2,103510:0,103511:0,103512:2,103513:2,103514:0,103515:2,103516:0,103517:2,103518:0,103519:2,103520:0,103521:1,103522:0,103523:0,103524:2,103525:2,103526:0,103527:2,103561:2,103562:2,103563:0,103564:0,103565:2,103566:2,103567:0,103568:0,103569:2,103570:2,103584:0,103585:2,103586:0,103587:2,103588:1,103589:0,103590:2,103591:1,103592:0,103593:2,103594:1,103695:2};for(v=2e3;v<=2045;v++)L[v]=0;for(v=2056;v<=2065;v++)L[v]=0;for(v=2067;v<=2135;v++)L[v]=0;for(v=2137;v<=2154;v++)L[v]=0;for(v=2161;v<=2170;v++)L[v]=0;for(v=2172;v<=2193;v++)L[v]=0;for(v=2195;v<=2198;v++)L[v]=0;for(v=2200;v<=2203;v++)L[v]=0;for(v=2205;v<=2217;v++)L[v]=0;for(v=2222;v<=2224;v++)L[v]=1;for(v=2225;v<=2250;v++)L[v]=2;for(v=2251;v<=2253;v++)L[v]=1;for(v=2257;v<=2264;v++)L[v]=2;for(v=2274;v<=2279;v++)L[v]=2;for(v=2280;v<=2282;v++)L[v]=1;for(v=2283;v<=2289;v++)L[v]=2;for(v=2290;v<=2292;v++)L[v]=0;for(v=2308;v<=2313;v++)L[v]=0;for(v=2315;v<=2491;v++)L[v]=0;for(v=2494;v<=2866;v++)L[v]=0;for(v=2867;v<=2869;v++)L[v]=1;for(v=2870;v<=2888;v++)L[v]=2;for(v=2891;v<=2895;v++)L[v]=2;for(v=2896;v<=2898;v++)L[v]=1;for(v=2902;v<=2908;v++)L[v]=2;for(v=2915;v<=2920;v++)L[v]=2;for(v=2921;v<=2923;v++)L[v]=1;for(v=2924;v<=2930;v++)L[v]=2;for(v=2931;v<=2962;v++)L[v]=0;for(v=2964;v<=2968;v++)L[v]=2;for(v=2969;v<=2973;v++)L[v]=0;for(v=2975;v<=2991;v++)L[v]=0;for(v=2995;v<=3051;v++)L[v]=0;for(v=3054;v<=3079;v++)L[v]=0;for(v=3081;v<=3088;v++)L[v]=0;for(v=3092;v<=3101;v++)L[v]=0;for(v=3106;v<=3138;v++)L[v]=0;for(v=3146;v<=3151;v++)L[v]=0;for(v=3153;v<=3166;v++)L[v]=0;for(v=3168;v<=3172;v++)L[v]=0;for(v=3174;v<=3203;v++)L[v]=0;for(v=3294;v<=3358;v++)L[v]=0;for(v=3367;v<=3403;v++)L[v]=0;for(v=3408;v<=3416;v++)L[v]=0;for(v=3417;v<=3438;v++)L[v]=2;for(v=3441;v<=3446;v++)L[v]=2;for(v=3447;v<=3450;v++)L[v]=0;for(v=3451;v<=3459;v++)L[v]=2;for(v=3460;v<=3478;v++)L[v]=0;for(v=3554;v<=3559;v++)L[v]=0;for(v=3560;v<=3570;v++)L[v]=2;for(v=3571;v<=3581;v++)L[v]=0;for(v=3594;v<=3597;v++)L[v]=0;for(v=3601;v<=3604;v++)L[v]=0;for(v=3637;v<=3639;v++)L[v]=0;for(v=3665;v<=3667;v++)L[v]=0;for(v=3693;v<=3695;v++)L[v]=0;for(v=3701;v<=3727;v++)L[v]=0;for(v=3728;v<=3739;v++)L[v]=2;for(v=3740;v<=3751;v++)L[v]=0;for(v=3753;v<=3760;v++)L[v]=2;for(v=3761;v<=3773;v++)L[v]=0;for(v=3775;v<=3777;v++)L[v]=0;for(v=3779;v<=3781;v++)L[v]=0;for(v=3783;v<=3785;v++)L[v]=0;for(v=3788;v<=3791;v++)L[v]=0;for(v=3797;v<=3802;v++)L[v]=0;for(v=3814;v<=3816;v++)L[v]=0;for(v=3825;v<=3829;v++)L[v]=0;for(v=3832;v<=3841;v++)L[v]=0;for(v=3844;v<=3852;v++)L[v]=0;for(v=3873;v<=3885;v++)L[v]=0;for(v=3890;v<=3893;v++)L[v]=0;for(v=3907;v<=3912;v++)L[v]=0;for(v=3942;v<=3950;v++)L[v]=0;for(v=3968;v<=3970;v++)L[v]=0;for(v=3973;v<=3976;v++)L[v]=0;for(v=3986;v<=3989;v++)L[v]=0;for(v=3994;v<=3997;v++)L[v]=0;for(v=4048;v<=4051;v++)L[v]=0;for(v=4056;v<=4063;v++)L[v]=0;for(v=4093;v<=4096;v++)L[v]=0;for(v=4390;v<=4398;v++)L[v]=0;for(v=4399;v<=4413;v++)L[v]=2;for(v=4418;v<=4433;v++)L[v]=2;for(v=4455;v<=4457;v++)L[v]=2;for(v=4484;v<=4489;v++)L[v]=0;for(v=4491;v<=4554;v++)L[v]=0;for(v=4568;v<=4589;v++)L[v]=0;for(v=4652;v<=4656;v++)L[v]=0;for(v=4766;v<=4800;v++)L[v]=0;for(v=5014;v<=5016;v++)L[v]=0;for(v=5069;v<=5072;v++)L[v]=0;for(v=5105;v<=5130;v++)L[v]=0;for(v=5173;v<=5188;v++)L[v]=0;for(v=5253;v<=5259;v++)L[v]=0;for(v=5269;v<=5275;v++)L[v]=0;for(v=5292;v<=5311;v++)L[v]=0;for(v=5329;v<=5331;v++)L[v]=0;for(v=5343;v<=5349;v++)L[v]=0;for(v=5355;v<=5357;v++)L[v]=0;for(v=5387;v<=5389;v++)L[v]=0;for(v=5459;v<=5463;v++)L[v]=0;for(v=5479;v<=5482;v++)L[v]=0;for(v=5518;v<=5520;v++)L[v]=0;for(v=5530;v<=5539;v++)L[v]=0;for(v=5550;v<=5552;v++)L[v]=0;for(v=5562;v<=5583;v++)L[v]=0;for(v=5623;v<=5625;v++)L[v]=2;for(v=5631;v<=5639;v++)L[v]=0;for(v=5649;v<=5653;v++)L[v]=0;for(v=5663;v<=5680;v++)L[v]=0;for(v=5682;v<=5685;v++)L[v]=0;for(v=5875;v<=5877;v++)L[v]=0;for(v=5896;v<=5899;v++)L[v]=0;for(v=5921;v<=5940;v++)L[v]=0;for(v=6050;v<=6125;v++)L[v]=0;for(v=6244;v<=6275;v++)L[v]=0;for(v=6328;v<=6348;v++)L[v]=0;for(v=6350;v<=6356;v++)L[v]=0;for(v=6366;v<=6372;v++)L[v]=0;for(v=6381;v<=6387;v++)L[v]=0;for(v=6393;v<=6404;v++)L[v]=0;for(v=6480;v<=6483;v++)L[v]=0;for(v=6511;v<=6514;v++)L[v]=0;for(v=6579;v<=6581;v++)L[v]=0;for(v=6619;v<=6624;v++)L[v]=0;for(v=6625;v<=6627;v++)L[v]=2;for(v=6628;v<=6632;v++)L[v]=0;for(v=6634;v<=6637;v++)L[v]=0;for(v=6669;v<=6692;v++)L[v]=0;for(v=6707;v<=6709;v++)L[v]=0;for(v=6720;v<=6723;v++)L[v]=0;for(v=6732;v<=6738;v++)L[v]=0;for(v=6931;v<=6933;v++)L[v]=0;for(v=6956;v<=6959;v++)L[v]=0;for(v=7005;v<=7007;v++)L[v]=0;for(v=7057;v<=7070;v++)L[v]=2;for(v=7074;v<=7082;v++)L[v]=0;for(v=7109;v<=7118;v++)L[v]=0;for(v=7119;v<=7127;v++)L[v]=1;for(v=7374;v<=7376;v++)L[v]=0;for(v=7528;v<=7586;v++)L[v]=0;for(v=7587;v<=7645;v++)L[v]=2;for(v=7692;v<=7696;v++)L[v]=0;for(v=7755;v<=7787;v++)L[v]=0;for(v=7791;v<=7795;v++)L[v]=0;for(v=7799;v<=7801;v++)L[v]=0;for(v=7803;v<=7805;v++)L[v]=0;for(v=7825;v<=7831;v++)L[v]=0;for(v=7845;v<=7859;v++)L[v]=0;for(v=8013;v<=8032;v++)L[v]=0;for(v=8065;v<=8068;v++)L[v]=1;for(v=8518;v<=8529;v++)L[v]=2;for(v=8533;v<=8536;v++)L[v]=2;for(v=8538;v<=8540;v++)L[v]=2;for(v=8677;v<=8679;v++)L[v]=0;for(v=8836;v<=8840;v++)L[v]=0;for(v=8857;v<=8859;v++)L[v]=0;for(v=8908;v<=8910;v++)L[v]=0;for(v=9154;v<=9159;v++)L[v]=0;for(v=9205;v<=9218;v++)L[v]=0;for(v=9271;v<=9273;v++)L[v]=0;for(v=9295;v<=9297;v++)L[v]=0;for(v=9356;v<=9360;v++)L[v]=0;for(v=9404;v<=9407;v++)L[v]=0;for(v=9476;v<=9482;v++)L[v]=0;for(v=9487;v<=9494;v++)L[v]=0;for(v=9697;v<=9699;v++)L[v]=0;for(v=20002;v<=20032;v++)L[v]=0;for(v=20062;v<=20092;v++)L[v]=0;for(v=20135;v<=20138;v++)L[v]=0;for(v=20248;v<=20258;v++)L[v]=0;for(v=20348;v<=20358;v++)L[v]=0;for(v=20436;v<=20440;v++)L[v]=0;for(v=20822;v<=20824;v++)L[v]=0;for(v=20904;v<=20932;v++)L[v]=0;for(v=20934;v<=20936;v++)L[v]=0;for(v=21004;v<=21032;v++)L[v]=0;for(v=21035;v<=21037;v++)L[v]=0;for(v=21095;v<=21097;v++)L[v]=0;for(v=21148;v<=21150;v++)L[v]=0;for(v=21207;v<=21264;v++)L[v]=0;for(v=21307;v<=21364;v++)L[v]=0;for(v=21413;v<=21423;v++)L[v]=0;for(v=21453;v<=21463;v++)L[v]=0;for(v=21473;v<=21483;v++)L[v]=0;for(v=21780;v<=21782;v++)L[v]=0;for(v=21891;v<=21894;v++)L[v]=0;for(v=21896;v<=21899;v++)L[v]=0;for(v=22171;v<=22177;v++)L[v]=0;for(v=22181;v<=22187;v++)L[v]=0;for(v=22191;v<=22197;v++)L[v]=0;for(v=22234;v<=22236;v++)L[v]=0;for(v=22521;v<=22525;v++)L[v]=0;for(v=22991;v<=22994;v++)L[v]=0;for(v=23028;v<=23038;v++)L[v]=0;for(v=23830;v<=23853;v++)L[v]=0;for(v=23866;v<=23872;v++)L[v]=0;for(v=23877;v<=23884;v++)L[v]=0;for(v=23886;v<=23894;v++)L[v]=0;for(v=23946;v<=23948;v++)L[v]=0;for(v=24311;v<=24313;v++)L[v]=0;for(v=24342;v<=24347;v++)L[v]=0;for(v=24370;v<=24374;v++)L[v]=10;for(v=24375;v<=24381;v++)L[v]=0;for(v=24718;v<=24721;v++)L[v]=0;for(v=24817;v<=24821;v++)L[v]=0;for(v=24877;v<=24882;v++)L[v]=0;for(v=24891;v<=24893;v++)L[v]=0;for(v=25391;v<=25395;v++)L[v]=0;for(v=25828;v<=25838;v++)L[v]=0;for(v=26191;v<=26195;v++)L[v]=0;for(v=26391;v<=26393;v++)L[v]=0;for(v=26701;v<=26722;v++)L[v]=0;for(v=26729;v<=26799;v++)L[v]=2;for(v=26801;v<=26803;v++)L[v]=2;for(v=26811;v<=26813;v++)L[v]=2;for(v=26847;v<=26870;v++)L[v]=2;for(v=26891;v<=26899;v++)L[v]=0;for(v=26901;v<=26923;v++)L[v]=0;for(v=26929;v<=26946;v++)L[v]=0;for(v=26948;v<=26998;v++)L[v]=0;for(v=27037;v<=27040;v++)L[v]=0;for(v=27205;v<=27232;v++)L[v]=0;for(v=27258;v<=27260;v++)L[v]=0;for(v=27391;v<=27398;v++)L[v]=0;for(v=27561;v<=27564;v++)L[v]=0;for(v=27571;v<=27574;v++)L[v]=0;for(v=27581;v<=27584;v++)L[v]=0;for(v=27591;v<=27594;v++)L[v]=0;for(v=28191;v<=28193;v++)L[v]=0;for(v=28348;v<=28358;v++)L[v]=0;for(v=28402;v<=28432;v++)L[v]=0;for(v=28462;v<=28492;v++)L[v]=0;for(v=29118;v<=29122;v++)L[v]=0;for(v=29168;v<=29172;v++)L[v]=0;for(v=29177;v<=29185;v++)L[v]=0;for(v=29187;v<=29195;v++)L[v]=0;for(v=29900;v<=29903;v++)L[v]=0;for(v=30161;v<=30179;v++)L[v]=0;for(v=30491;v<=30494;v++)L[v]=0;for(v=30729;v<=30732;v++)L[v]=0;for(v=31251;v<=31259;v++)L[v]=0;for(v=31265;v<=31268;v++)L[v]=0;for(v=31275;v<=31279;v++)L[v]=0;for(v=31281;v<=31297;v++)L[v]=0;for(v=31461;v<=31469;v++)L[v]=0;for(v=31491;v<=31495;v++)L[v]=0;for(v=31917;v<=31922;v++)L[v]=0;for(v=31965;v<=32e3;v++)L[v]=0;for(v=32001;v<=32003;v++)L[v]=2;for(v=32005;v<=32031;v++)L[v]=2;for(v=32033;v<=32060;v++)L[v]=2;for(v=32064;v<=32067;v++)L[v]=2;for(v=32074;v<=32077;v++)L[v]=2;for(v=32081;v<=32086;v++)L[v]=0;for(v=32107;v<=32130;v++)L[v]=0;for(v=32133;v<=32158;v++)L[v]=0;for(v=32164;v<=32167;v++)L[v]=2;for(v=32180;v<=32199;v++)L[v]=0;for(v=32201;v<=32260;v++)L[v]=0;for(v=32301;v<=32360;v++)L[v]=0;for(v=32601;v<=32662;v++)L[v]=0;for(v=32664;v<=32667;v++)L[v]=2;for(v=32701;v<=32761;v++)L[v]=0;for(v=53001;v<=53004;v++)L[v]=0;for(v=53008;v<=53019;v++)L[v]=0;for(v=53021;v<=53032;v++)L[v]=0;for(v=53034;v<=53037;v++)L[v]=0;for(v=53042;v<=53046;v++)L[v]=0;for(v=53074;v<=53080;v++)L[v]=0;for(v=54001;v<=54004;v++)L[v]=0;for(v=54008;v<=54019;v++)L[v]=0;for(v=54021;v<=54032;v++)L[v]=0;for(v=54034;v<=54037;v++)L[v]=0;for(v=54042;v<=54046;v++)L[v]=0;for(v=54048;v<=54053;v++)L[v]=0;for(v=54074;v<=54080;v++)L[v]=0;for(v=54098;v<=54101;v++)L[v]=0;for(v=102001;v<=102040;v++)L[v]=0;for(v=102042;v<=102063;v++)L[v]=0;for(v=102065;v<=102067;v++)L[v]=0;for(v=102070;v<=102117;v++)L[v]=0;for(v=102122;v<=102216;v++)L[v]=0;for(v=102221;v<=102377;v++)L[v]=0;for(v=102382;v<=102388;v++)L[v]=0;for(v=102389;v<=102398;v++)L[v]=2;for(v=102399;v<=102444;v++)L[v]=0;for(v=102445;v<=102447;v++)L[v]=2;for(v=102448;v<=102458;v++)L[v]=0;for(v=102459;v<=102468;v++)L[v]=2;for(v=102469;v<=102499;v++)L[v]=0;for(v=102500;v<=102519;v++)L[v]=1;for(v=102520;v<=102524;v++)L[v]=0;for(v=102525;v<=102529;v++)L[v]=2;for(v=102530;v<=102588;v++)L[v]=0;for(v=102590;v<=102598;v++)L[v]=0;for(v=102601;v<=102603;v++)L[v]=0;for(v=102605;v<=102628;v++)L[v]=0;for(v=102629;v<=102646;v++)L[v]=2;for(v=102648;v<=102700;v++)L[v]=2;for(v=102701;v<=102703;v++)L[v]=0;for(v=102707;v<=102730;v++)L[v]=2;for(v=102733;v<=102758;v++)L[v]=2;for(v=102767;v<=102900;v++)L[v]=0;for(v=102901;v<=102933;v++)L[v]=2;for(v=102934;v<=102950;v++)L[v]=13;for(v=102951;v<=102960;v++)L[v]=0;for(v=102965;v<=102969;v++)L[v]=0;for(v=102971;v<=102973;v++)L[v]=0;for(v=102975;v<=102989;v++)L[v]=0;for(v=102990;v<=102992;v++)L[v]=1;for(v=102997;v<=103002;v++)L[v]=0;for(v=103003;v<=103008;v++)L[v]=2;for(v=103009;v<=103011;v++)L[v]=0;for(v=103012;v<=103014;v++)L[v]=2;for(v=103019;v<=103021;v++)L[v]=0;for(v=103022;v<=103024;v++)L[v]=2;for(v=103029;v<=103031;v++)L[v]=0;for(v=103032;v<=103034;v++)L[v]=2;for(v=103065;v<=103068;v++)L[v]=0;for(v=103074;v<=103076;v++)L[v]=0;for(v=103077;v<=103079;v++)L[v]=1;for(v=103080;v<=103082;v++)L[v]=0;for(v=103083;v<=103085;v++)L[v]=2;for(v=103090;v<=103093;v++)L[v]=0;for(v=103097;v<=103099;v++)L[v]=0;for(v=103100;v<=103102;v++)L[v]=2;for(v=103107;v<=103109;v++)L[v]=0;for(v=103110;v<=103112;v++)L[v]=2;for(v=103113;v<=103116;v++)L[v]=0;for(v=103117;v<=103120;v++)L[v]=2;for(v=103153;v<=103157;v++)L[v]=0;for(v=103158;v<=103162;v++)L[v]=2;for(v=103163;v<=103165;v++)L[v]=0;for(v=103166;v<=103168;v++)L[v]=1;for(v=103169;v<=103171;v++)L[v]=2;for(v=103186;v<=103188;v++)L[v]=0;for(v=103189;v<=103191;v++)L[v]=2;for(v=103192;v<=103195;v++)L[v]=0;for(v=103196;v<=103199;v++)L[v]=2;for(v=103200;v<=103224;v++)L[v]=0;for(v=103225;v<=103227;v++)L[v]=1;for(v=103232;v<=103237;v++)L[v]=0;for(v=103238;v<=103243;v++)L[v]=2;for(v=103244;v<=103246;v++)L[v]=0;for(v=103247;v<=103249;v++)L[v]=2;for(v=103254;v<=103256;v++)L[v]=0;for(v=103257;v<=103259;v++)L[v]=2;for(v=103264;v<=103266;v++)L[v]=0;for(v=103267;v<=103269;v++)L[v]=2;for(v=103300;v<=103375;v++)L[v]=0;for(v=103381;v<=103383;v++)L[v]=0;for(v=103384;v<=103386;v++)L[v]=1;for(v=103387;v<=103389;v++)L[v]=0;for(v=103390;v<=103392;v++)L[v]=2;for(v=103397;v<=103399;v++)L[v]=0;for(v=103400;v<=103471;v++)L[v]=2;for(v=103476;v<=103478;v++)L[v]=0;for(v=103479;v<=103481;v++)L[v]=2;for(v=103486;v<=103488;v++)L[v]=0;for(v=103489;v<=103491;v++)L[v]=2;for(v=103492;v<=103495;v++)L[v]=0;for(v=103496;v<=103499;v++)L[v]=2;for(v=103528;v<=103543;v++)L[v]=0;for(v=103544;v<=103548;v++)L[v]=2;for(v=103549;v<=103551;v++)L[v]=0;for(v=103552;v<=103554;v++)L[v]=1;for(v=103555;v<=103557;v++)L[v]=2;for(v=103558;v<=103560;v++)L[v]=0;for(v=103571;v<=103573;v++)L[v]=0;for(v=103574;v<=103576;v++)L[v]=2;for(v=103577;v<=103580;v++)L[v]=0;for(v=103581;v<=103583;v++)L[v]=2;for(v=103595;v<=103694;v++)L[v]=0;for(v=103696;v<=103699;v++)L[v]=0;for(v=103700;v<=103793;v++)L[v]=2;for(v=103794;v<=103872;v++)L[v]=0;for(v=103900;v<=103971;v++)L[v]=2;const Ohe={102113:!0,102100:!0,3857:!0,3785:!0},Phe={102113:!0,102100:!0,3857:!0,3785:!0,4326:!0},m9='PROJCS["WGS_1984_Web_Mercator_Auxiliary_Sphere",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator_Auxiliary_Sphere"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],PARAMETER["Auxiliary_Sphere_Type",0.0],UNIT["Meter",1.0]]',fx=[-20037508342788905e-9,20037508342788905e-9],mx=[-20037508342787e-6,20037508342787e-6],$W={102113:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:fx,origin:mx,dx:1e-5},102100:{wkTemplate:m9,valid:fx,origin:mx,dx:1e-5},3785:{wkTemplate:'PROJCS["WGS_1984_Web_Mercator",GEOGCS["GCS_WGS_1984_Major_Auxiliary_Sphere",DATUM["D_WGS_1984_Major_Auxiliary_Sphere",SPHEROID["WGS_1984_Major_Auxiliary_Sphere",6378137.0,0.0]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Mercator"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],PARAMETER["Standard_Parallel_1",0.0],UNIT["Meter",1.0]]',valid:fx,origin:mx,dx:1e-5},3857:{wkTemplate:m9,valid:fx,origin:mx,dx:1e-5},4326:{wkTemplate:'GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",{Central_Meridian}],UNIT["Degree",0.0174532925199433]]',altTemplate:'PROJCS["WGS_1984_Plate_Carree",GEOGCS["GCS_WGS_1984",DATUM["D_WGS_1984",SPHEROID["WGS_1984",6378137.0,298.257223563]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]],PROJECTION["Plate_Carree"],PARAMETER["False_Easting",0.0],PARAMETER["False_Northing",0.0],PARAMETER["Central_Meridian",{Central_Meridian}],UNIT["Degrees",111319.491]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104971:{wkTemplate:'GEOGCS["Mars_2000_(Sphere)",DATUM["Mars_2000_(Sphere)",SPHEROID["Mars_2000_(Sphere)",3396190.0,0.0]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5},104905:{wkTemplate:'GEOGCS["GCS_Mars_2000",DATUM["D_Mars_2000",SPHEROID["Mars_2000_IAU_IAG",3396190.0,169.8944472236118]],PRIMEM["Reference_Meridian",0.0],UNIT["Degree",0.0174532925199433]]',valid:[-180,180],origin:[-180,90],dx:1e-5}};function Ll(e,t){return!ce(e)&&!ce(t)&&(e===t||(e.wkid!=null||t.wkid!=null?e.wkid===t.wkid||Lm(e)&&Lm(t)||t.latestWkid!=null&&e.wkid===t.latestWkid||e.latestWkid!=null&&t.wkid===e.latestWkid:!(!e.wkt||!t.wkt)&&e.wkt.toUpperCase()===t.wkt.toUpperCase()))}function Ao(e){return Ks(e)&&e.wkid?$W[e.wkid]:null}function EW(e){return!!Ks(e)&&(e.wkid?L[e.wkid]==null:!!e.wkt&&!!/^\s*GEOGCS/i.test(e.wkt))}function Rhe(e){return!(Pv(e)||Rv(e))}function t_(e){return Ks(e)&&e.wkid===4326}function ftt(e){return Ks(e)&&e.wkid===4490}function Lm(e){return Ks(e)&&e.wkid!=null&&Ohe[e.wkid]===!0}function Lhe(e){return Ks(e)&&e.wkid===32662}function qL(e){return e===104971||e===104905}function Pv(e){return Ks(e)&&e.wkid!=null&&qL(e.wkid)}function HL(e){return e===104903}function Rv(e){return Ks(e)&&e.wkid!=null&&HL(e.wkid)}function Nhe(e){return Ks(e)&&e.wkid!=null&&Phe[e.wkid]===!0}function Ks(e){return U(e)&&(e.wkid!=null&&e.wkid>=2e3||e.wkt!=null)}const Dhe={wkid:4326,wkt:bl($W[4326].wkTemplate,{Central_Meridian:"0.0"})},Fhe={wkid:102100,latestWkid:3857},jhe={wkid:32662};var Zl;let ur=Zl=class extends me{constructor(e){super(e),this.latestWkid=null,this.wkid=null,this.wkt=null,this.vcsWkid=null,this.latestVcsWkid=null,this.imageCoordinateSystem=null}static fromJSON(e){if(!e)return null;if(e.wkid){if(e.wkid===102100)return Zl.WebMercator;if(e.wkid===4326)return Zl.WGS84}const t=new Zl;return t.read(e),t}normalizeCtorArgs(e){return e&&typeof e=="object"?e:{[typeof e=="string"?"wkt":"wkid"]:e}}get isWGS84(){return t_(this)}get isWebMercator(){return Lm(this)}get isGeographic(){return EW(this)}get isWrappable(){return Nhe(this)}writeWkt(e,t){this.wkid||(t.wkt=e)}clone(){if(this===Zl.WGS84)return Zl.WGS84;if(this===Zl.WebMercator)return Zl.WebMercator;const e=new Zl;return this.wkid!=null?(e.wkid=this.wkid,this.latestWkid!=null&&(e.latestWkid=this.latestWkid),this.vcsWkid!=null&&(e.vcsWkid=this.vcsWkid),this.latestVcsWkid!=null&&(e.latestVcsWkid=this.latestVcsWkid)):this.wkt!=null&&(e.wkt=this.wkt),this.imageCoordinateSystem&&(e.imageCoordinateSystem=ie(this.imageCoordinateSystem)),e}equals(e){if(e==null)return!1;if(this.imageCoordinateSystem||e.imageCoordinateSystem){if(this.imageCoordinateSystem==null||e.imageCoordinateSystem==null)return!1;const{id:t,referenceServiceName:r}=e.imageCoordinateSystem,{geodataXform:i}=e.imageCoordinateSystem,n=this.imageCoordinateSystem;return t==null||i?JSON.stringify(n)===JSON.stringify(e.imageCoordinateSystem):r?n.id===t&&n.referenceServiceName===r:n.id===t}return Ll(this,e)}toJSON(e){return this.write(void 0,e)}};ur.GCS_NAD_1927=null,ur.WGS84=null,ur.WebMercator=null,ur.PlateCarree=null,c([p({readOnly:!0})],ur.prototype,"isWGS84",null),c([p({readOnly:!0})],ur.prototype,"isWebMercator",null),c([p({readOnly:!0})],ur.prototype,"isGeographic",null),c([p({readOnly:!0})],ur.prototype,"isWrappable",null),c([p({type:jt,json:{write:!0}})],ur.prototype,"latestWkid",void 0),c([p({type:jt,json:{write:!0,origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkt===null}}}}}}})],ur.prototype,"wkid",void 0),c([p({type:String,json:{origins:{"web-scene":{write:{overridePolicy(){return{isRequired:this.wkid===null}}}}}}})],ur.prototype,"wkt",void 0),c([Se("wkt"),Se("web-scene","wkt")],ur.prototype,"writeWkt",null),c([p({type:jt,json:{write:!0}})],ur.prototype,"vcsWkid",void 0),c([p({type:jt,json:{write:!0}})],ur.prototype,"latestVcsWkid",void 0),c([p()],ur.prototype,"imageCoordinateSystem",void 0),ur=Zl=c([N("esri.geometry.SpatialReference")],ur),ur.prototype.toJSON.isDefaultToJSON=!0,ur.GCS_NAD_1927=new ur({wkid:4267,wkt:'GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0.0],UNIT["Degree",0.0174532925199433]]'}),ur.WGS84=new ur(Dhe),ur.WebMercator=new ur(Fhe),ur.PlateCarree=new ur(jhe),Object.freeze&&(Object.freeze(ur.GCS_NAD_1927),Object.freeze(ur.WGS84),Object.freeze(ur.WebMercator));const Fe=ur,AW="20211215",CW="ad43611b413b1d0a625293a3ce87543dde5c1fa2",kW="4.22",Vhe={async request(e,t){var r;const{default:i}=await ae(()=>Promise.resolve().then(function(){return tde}),void 0),n=e.options,s=n.responseType;n.signal=t?.signal,n.responseType=s==="native"||s==="native-request-init"?"native-request-init":["blob","json","text"].includes(s)&&(r=_W(e.url))!=null&&r.after?s:"array-buffer";const o=await i(e.url,n),a={data:o.data,ssl:o.ssl};switch(o.requestOptions.responseType){case"native-request-init":return delete a.data.signal,a;case"blob":a.data=await a.data.arrayBuffer();break;case"json":a.data=new TextEncoder().encode(JSON.stringify(a.data)).buffer;break;case"text":a.data=new TextEncoder().encode(a.data).buffer}return{result:a,transferList:[a.data]}}};let si;function mtt(e){si=e}function Uhe(e){const t=si&&si.findCredential(e);return t&&t.token?TW(e,"token",t.token):e}ge("host-webworker")||(ge("edge")||ge("trident"))&&console.warn("Deprecated browser - see http://esriurl.com/oldbrowser");const zhe=["elevation3d.arcgis.com","js.arcgis.com","jsdev.arcgis.com","jsqa.arcgis.com","static.arcgis.com"];function OW(e){const t=Ov(e,!0);return t&&t.endsWith(".arcgis.com")&&!zhe.includes(t)&&!e.endsWith("/sharing/rest/generateToken")}function Bhe(e,t,r=!1,i){return new Promise((n,s)=>{if(wl(i))return void s(y9());let o=()=>{u(),s(new Error(`Unable to load ${t}`))},a=()=>{const h=e;u(),n(h)},l=()=>{if(!e)return;const h=e;u(),h.src="",s(y9())};const u=()=>{ge("esri-image-decode")||(e.removeEventListener("error",o),e.removeEventListener("load",a)),o=null,a=null,e=null,U(i)&&i.removeEventListener("abort",l),l=null,r&&URL.revokeObjectURL(t)};U(i)&&i.addEventListener("abort",l),ge("esri-image-decode")?e.decode().then(a,o):(e.addEventListener("error",o),e.addEventListener("load",a))})}function y9(){try{return new DOMException("Aborted","AbortError")}catch{const e=new Error;return e.name="AbortError",e}}async function Ee(e,t){var r;const i=dy(e),n=JT(e);n||i||(e=$o(e));const s={url:e,requestOptions:{...t}};let o=_W(e);if(o){const h=await Khe(o,s);if(h!=null)return{data:h,getHeader:WL,requestOptions:s.requestOptions,url:s.url};o.after||o.error||(o=null)}if(e=s.url,(t=s.requestOptions).responseType==="image"){if(ge("host-webworker")||ge("host-node"))throw ll("request:invalid-parameters",new Error("responseType 'image' is not supported in Web Workers or Node environment"),s)}else if(i)throw ll("request:invalid-parameters",new Error("Data URLs are not supported for responseType = "+t.responseType),s);if(t.method==="head"){if(t.body)throw ll("request:invalid-parameters",new Error("body parameter cannot be set when method is 'head'"),s);if(i||n)throw ll("request:invalid-parameters",new Error("data and blob URLs are not supported for method 'head'"),s)}if(await Jhe(),X3)return X3.execute(e,t);const a=new AbortController;xa(t,()=>a.abort());const l={controller:a,credential:null,credentialToken:null,fetchOptions:null,hasToken:!1,interceptor:o,params:s,redoRequest:!1,useIdentity:Bc.useIdentity,useProxy:!1,useSSL:!1,withCredentials:!1},u=await Qhe(l);return(r=o)==null||r.after==null||r.after(u),u}let X3;const Bc=Kt.request,PW="FormData"in globalThis,Ghe=[499,498,403,401],qhe=["COM_0056","COM_0057","SB_0008"],Hhe=[/\/arcgis\/tokens/i,/\/sharing(\/rest)?\/generatetoken/i,/\/rest\/info/i],WL=()=>null,JA=Symbol();function Whe(e){const t=Ov(e);t&&!Ee._corsServers.includes(t)&&Ee._corsServers.push(t)}function g9(e){const t=Ov(e);return!t||t.endsWith(".arcgis.com")||Ee._corsServers.includes(t)||UL(t)}function ll(e,t,r,i){let n="Error";const s={url:r.url,requestOptions:r.requestOptions,getHeader:WL,ssl:!1};if(t instanceof Z)return t.details?(t.details=ie(t.details),t.details.url=r.url,t.details.requestOptions=r.requestOptions):t.details=s,t;if(t){const o=i&&(u=>i.headers.get(u)),a=i&&i.status,l=t.message;l&&(n=l),o&&(s.getHeader=o),s.httpStatus=(t.httpCode!=null?t.httpCode:t.code)||a||0,s.subCode=t.subcode,s.messageCode=t.messageCode,typeof t.details=="string"?s.messages=[t.details]:s.messages=t.details,s.raw=JA in t?t[JA]:t}return sn(t)?Zr():new Z(e,n,s)}async function Jhe(){ge("host-webworker")?X3||(X3=await ae(()=>import("./request.fed21a72.js"),[])):Ee._abortableFetch||(Ee._abortableFetch=globalThis.fetch.bind(globalThis))}async function ZA(){si||await ae(()=>import("./IdentityManager.cd0d378c.js"),[])}async function Zhe(e){const t=e.params.url,r=e.params.requestOptions,i=e.controller.signal,n=r.body;let s=null,o=null,a=null;if(PW&&"HTMLFormElement"in globalThis&&(n instanceof FormData?s=n:n instanceof HTMLFormElement&&(o=n,s=new FormData(o))),typeof n=="string"&&(a=n),e.fetchOptions={cache:r.cacheBust&&!Ee._abortableFetch.polyfill?"no-cache":"default",credentials:"same-origin",headers:r.headers||{},method:r.method==="head"?"HEAD":"GET",mode:"cors",redirect:"follow",signal:i},(s||a)&&(e.fetchOptions.body=s||a),r.authMode==="anonymous"&&(e.useIdentity=!1),e.hasToken=!!(/token=/i.test(t)||r.query&&r.query.token||s&&s.get&&s.get("token")||o&&o.elements.token),!e.hasToken&&Kt.apiKey&&OW(t)&&(r.query||(r.query={}),r.query.token=Kt.apiKey,e.hasToken=!0),e.useIdentity&&!e.hasToken&&!e.credentialToken&&!RW(t)&&!wl(i)){let l;r.authMode==="immediate"?(await ZA(),l=await si.getCredential(t,{signal:i}),e.credential=l):r.authMode==="no-prompt"?(await ZA(),l=await si.getCredential(t,{prompt:!1,signal:i}).catch(()=>{}),e.credential=l):si&&(l=si.findCredential(t)),l&&(e.credentialToken=l.token,e.useSSL=!!l.ssl)}}function RW(e){return Hhe.some(t=>t.test(e))}async function Yhe(e){let t=e.params.url;const r=e.params.requestOptions,i=e.fetchOptions,n=JT(t)||dy(t),s=r.responseType||"json",o=n?0:r.timeout!=null?r.timeout:Bc.timeout;let a=!1;if(!n){e.useSSL&&(t=GL(t)),r.cacheBust&&i.cache==="default"&&(t=TW(t,"request.preventCache",Date.now()));let f={...r.query};e.credentialToken&&(f.token=e.credentialToken);let m=lp(f);ge("esri-url-encodes-apostrophe")&&(m=m.replace(/'/g,"%27"));const g=t.length+1+m.length;let b;a=r.method==="delete"||r.method==="post"||r.method==="put"||!!r.body||g>Bc.maxUrlLength;const w=r.useProxy||!!WT(t);if(w){const _=mhe(t);b=_.path,!a&&b.length+1+g>Bc.maxUrlLength&&(a=!0),_.query&&(f={..._.query,...f})}if(i.method==="HEAD"&&(a||w)){if(a)throw g>Bc.maxUrlLength?ll("request:invalid-parameters",new Error("URL exceeds maximum length"),e.params):ll("request:invalid-parameters",new Error("cannot use POST request when method is 'head'"),e.params);if(w)throw ll("request:invalid-parameters",new Error("cannot use proxy when method is 'head'"),e.params)}if(a?(i.method=r.method==="delete"?"DELETE":r.method==="put"?"PUT":"POST",r.body?t=WA(t,f):(i.body=lp(f),i.headers["Content-Type"]="application/x-www-form-urlencoded")):t=WA(t,f),w&&(e.useProxy=!0,t=`${b}?${t}`),f.token&&PW&&i.body instanceof FormData){const _=i.body;_.set?_.set("token",f.token):_.append("token",f.token)}if(r.hasOwnProperty("withCredentials"))e.withCredentials=r.withCredentials;else if(!Y3(t,Ki)){if(UL(t))e.withCredentials=!0;else if(si){const _=si.findServerInfo(t);_&&_.webTierAuth&&(e.withCredentials=!0)}}e.withCredentials&&(i.credentials="include")}let l,u,h=0,d=!1;o>0&&(h=setTimeout(()=>{d=!0,e.controller.abort()},o));try{if(r.responseType==="native-request-init")u=i,u.url=t;else if(r.responseType!=="image"||i.cache!=="default"||i.method!=="GET"||a||Xhe(r.headers)||!n&&!e.useProxy&&Bc.proxyUrl&&!g9(t)){if(l=await Ee._abortableFetch(t,i),e.useProxy||Whe(t),r.responseType==="native")u=l;else if(i.method!=="HEAD")if(l.ok){switch(s){case"array-buffer":u=await l.arrayBuffer();break;case"blob":case"image":u=await l.blob();break;default:u=await l.text()}if(h&&(clearTimeout(h),h=0),s==="json"||s==="xml"||s==="document")if(u)switch(s){case"json":u=JSON.parse(u);break;case"xml":u=v9(u,"application/xml");break;case"document":u=v9(u,"text/html")}else u=null;if(u){if(s==="array-buffer"||s==="blob"){const f=l.headers.get("Content-Type");if(/application\/json|text\/plain/i.test(f)&&u[s==="blob"?"size":"byteLength"]<=750)try{const m=await new Response(u).json();m.error&&(u=m)}catch{}}s==="image"&&u instanceof Blob&&(u=await b9(URL.createObjectURL(u),e,!0))}}else u=await l.text()}else u=await b9(t,e)}catch(f){if(f.name==="AbortError")throw d?new Error("Timeout exceeded"):Zr("Request canceled");if(!(!l&&f instanceof TypeError&&Bc.proxyUrl)||r.body||r.method==="delete"||r.method==="head"||r.method==="post"||r.method==="put"||e.useProxy||g9(t))throw f;e.redoRequest=!0,ghe({proxyUrl:Bc.proxyUrl,urlPrefix:Ov(t)})}finally{h&&clearTimeout(h)}return[l,u]}async function Khe(e,t){if(e.responseData!=null)return e.responseData;if(e.headers&&(t.requestOptions.headers={...t.requestOptions.headers,...e.headers}),e.query&&(t.requestOptions.query={...t.requestOptions.query,...e.query}),e.before){let r,i;try{i=await e.before(t)}catch(n){r=ll("request:interceptor",n,t)}if((i instanceof Error||i instanceof Z)&&(r=ll("request:interceptor",i,t)),r)throw e.error&&e.error(r),r;return i}}function Xhe(e){if(e){for(const t of Object.getOwnPropertyNames(e))if(e[t])return!0}return!1}function v9(e,t){let r;try{r=new DOMParser().parseFromString(e,t)}catch{}if(!r||r.getElementsByTagName("parsererror").length)throw new SyntaxError("XML Parse error");return r}async function Qhe(e){var t,r;let i,n;await Zhe(e);try{do[i,n]=await Yhe(e);while(!await ede(e,i,n))}catch(a){const l=ll("request:server",a,e.params,i);throw l.details.ssl=e.useSSL,e.interceptor&&e.interceptor.error&&e.interceptor.error(l),l}const s=e.params.url;if(/\/sharing\/rest\/(accounts|portals)\/self/i.test(s)&&!e.hasToken&&!e.credentialToken&&(t=n)!=null&&(r=t.user)!=null&&r.username&&!UL(s)){const a=Ov(s,!0);a&&Bc.trustedServers.push(a)}const o=e.credential;if(o&&si){const a=si.findServerInfo(o.server);let l=a&&a.owningSystemUrl;if(l){l=l.replace(/\/?$/,"/sharing");const u=si.findCredential(l,o.userId);u&&si._getIdenticalSvcIdx(l,u)===-1&&u.resources.unshift(l)}}return{data:n,getHeader:i?a=>i.headers.get(a):WL,requestOptions:e.params.requestOptions,ssl:e.useSSL,url:e.params.url}}async function ede(e,t,r){if(e.redoRequest)return e.redoRequest=!1,!1;const i=e.params.requestOptions;if(!t||i.responseType==="native"||i.responseType==="native-request-init")return!0;let n,s,o,a;if(!t.ok)throw n=new Error(`Unable to load ${t.url} status: ${t.status}`),n[JA]=r,n;r!=null&&r.error&&(n=r.error),n&&(s=Number(n.code),o=n.hasOwnProperty("subcode")?Number(n.subcode):null,a=n.messageCode,a=a&&a.toUpperCase());const l=i.authMode;if(s===403&&(o===4||n.message&&n.message.toLowerCase().indexOf("ssl")>-1&&n.message.toLowerCase().indexOf("permission")===-1)){if(!e.useSSL)return e.useSSL=!0,!1}else if(!e.hasToken&&e.useIdentity&&(l!=="no-prompt"||s===498)&&Ghe.indexOf(s)!==-1&&!RW(e.params.url)&&(s!==403||qhe.indexOf(a)===-1&&(o==null||o===2&&e.credentialToken))){await ZA();try{const u=await si.getCredential(e.params.url,{error:ll("request:server",n,e.params),prompt:l!=="no-prompt",signal:e.controller.signal,token:e.credentialToken});return e.credential=u,e.credentialToken=u.token,e.useSSL=e.useSSL||u.ssl,!1}catch(u){if(l==="no-prompt")return e.credential=null,e.credentialToken=null,!1;n=u}}if(n)throw n;return!0}function b9(e,t,r=!1){const i=t.controller.signal,n=new Image;return t.withCredentials?n.crossOrigin="use-credentials":n.crossOrigin="anonymous",n.alt="",n.src=e,Bhe(n,e,r,i)}Ee._abortableFetch=null,Ee._corsServers=["https://server.arcgisonline.com","https://services.arcgisonline.com"];var tde=Object.freeze(Object.defineProperty({__proto__:null,default:Ee},Symbol.toStringTag,{value:"Module"}));function ye(e,t,r){let i,n;return t===void 0||Array.isArray(t)?(n=e,r=t,i=[void 0]):(n=t,i=Array.isArray(e)?e:[e]),(s,o)=>{const a=s.constructor.prototype;i.forEach(l=>{const u=KH(s,l,n);u.read&&typeof u.read=="object"||(u.read={}),u.read.reader=a[o],r&&(u.read.source=(u.read.source||[]).concat(r))})}}let Yl=class extends me{constructor(...e){super(...e),this.type=null,this.hasM=!1,this.hasZ=!1,this.spatialReference=Fe.WGS84}get cache(){return this.commitProperty("spatialReference"),{}}get extent(){return null}readSpatialReference(e,t){if(e instanceof Fe)return e;if(e!=null){const r=new Fe;return r.read(e,t),r}return e}clone(){return console.warn(".clone() is not implemented for "+this.declaredClass),null}clearCache(){this.notifyChange("cache")}getCacheValue(e){return this.cache[e]}setCacheValue(e,t){this.cache[e]=t}};c([p()],Yl.prototype,"type",void 0),c([p({readOnly:!0})],Yl.prototype,"cache",null),c([p({readOnly:!0})],Yl.prototype,"extent",null),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Yl.prototype,"hasM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Yl.prototype,"hasZ",void 0),c([p({type:Fe,json:{write:!0}})],Yl.prototype,"spatialReference",void 0),c([ye("spatialReference")],Yl.prototype,"readSpatialReference",null),Yl=c([N("esri.geometry.Geometry")],Yl);const Xs=Yl,rde=Object.prototype.toString;function ide(e){const t="__accessorMetadata__"in e?br(e):e;return function(...r){if(r.push(t),typeof r[2]=="number")throw new Error("Using @cast has parameter decorator is not supported since 4.16");return nde.apply(this,r)}}function nde(e,t,r,i){FT(e,t).cast=i}function sde(e){return function(t,r){FT(t,e).cast=t[r]}}function Ct(...e){if(e.length!==3||typeof e[1]!="string")return e.length===1&&rde.call(e[0])==="[object Function]"?ide(e[0]):e.length===1&&typeof e[0]=="string"?sde(e[0]):void 0}function ode(e,t,r,i){var n;return e.x=e.x+t,e.y=e.y+r,i!=null&&(e.z=((n=e.z)!=null?n:0)+i),e}function ade(e,t){const r=e.x-t.x,i=e.y-t.y,n=e.hasZ&&t.hasZ?e.z-t.z:0;return Math.sqrt(r*r+i*i+n*n)}class JL{constructor(t,r,i,n){this.semiMajorAxis=t,this.flattening=r,this.outerAtmosphereRimWidth=i;const s=1-this.flattening;this.semiMinorAxis=this.semiMajorAxis*s,this.halfSemiMajorAxis=this.semiMajorAxis/2,this.halfCircumference=Math.PI*this.semiMajorAxis,this.metersPerDegree=this.halfCircumference/180,this.inverseFlattening=1/(1-this.flattening)-1,this.eccentricitySquared=n||2*this.flattening-this.flattening*this.flattening,this.meanRadiusSemiAxes=(2*this.semiMajorAxis+this.semiMinorAxis)/3}get radius(){return this.semiMajorAxis}}const ar=new JL(6378137,1/298.257223563,3e5,.006694379990137799),Ou=new JL(3396190,1/169.8944472236118,23e4),fh=new JL(1737400,0,0),lde=57.29577951308232,ude=.017453292519943;function w9(e){return e*lde}function _9(e){return e*ude}function x9(e){return e/ar.radius}function S9(e){return Math.PI/2-2*Math.atan(Math.exp(-e/ar.radius))}function YA(e){return e.wkid!=null||e.wkt!=null}const c4=[0,0];function Q3(e,t,r,i,n){const s=e,o=n;if(o.spatialReference=r,"x"in s&&"x"in o)[o.x,o.y]=t(s.x,s.y,c4,i);else if("xmin"in s&&"xmin"in o)[o.xmin,o.ymin]=t(s.xmin,s.ymin,c4,i),[o.xmax,o.ymax]=t(s.xmax,s.ymax,c4,i);else if("paths"in s&&"paths"in o||"rings"in s&&"rings"in o){const a="paths"in s?s.paths:s.rings,l=[];let u;for(let h=0;h<a.length;h++){const d=a[h];u=[],l.push(u);for(let f=0;f<d.length;f++)u.push(t(d[f][0],d[f][1],[0,0],i)),d[f].length>2&&u[f].push(d[f][2]),d[f].length>3&&u[f].push(d[f][3])}"paths"in o?o.paths=l:o.rings=l}else if("points"in s&&"points"in o){const a=s.points,l=[];for(let u=0;u<a.length;u++)l[u]=t(a[u][0],a[u][1],[0,0],i),a[u].length>2&&l[u].push(a[u][2]),a[u].length>3&&l[u].push(a[u][3]);o.points=l}return n}function sh(e,t){const r=e&&(YA(e)?e:e.spatialReference),i=t&&(YA(t)?t:t.spatialReference);return!(e&&"type"in e&&e.type==="mesh"||t&&"type"in t&&t.type==="mesh"||!r||!i)&&(!!Ll(i,r)||Lm(i)&&t_(r)||Lm(r)&&t_(i))}function Vu(e,t){if(ce(e))return null;const r=e.spatialReference,i=t&&(YA(t)?t:t.spatialReference);return sh(r,i)?Ll(r,i)?ie(e):Lm(i)?Q3(e,Jg,Fe.WebMercator,!1,ie(e)):t_(i)?Q3(e,uw,Fe.WGS84,!1,ie(e)):null:null}function Jg(e,t,r=[0,0]){t>89.99999?t=89.99999:t<-89.99999&&(t=-89.99999);const i=_9(t);return r[0]=_9(e)*ar.radius,r[1]=ar.halfSemiMajorAxis*Math.log((1+Math.sin(i))/(1-Math.sin(i))),r}function uw(e,t,r=[0,0],i=!1){const n=w9(e/ar.radius);return r[0]=i?n:n-360*Math.floor((n+180)/360),r[1]=w9(Math.PI/2-2*Math.atan(Math.exp(-t/ar.radius))),r}function Jd(e,t=!1,r=ie(e)){return Q3(e,Jg,Fe.WebMercator,t,r)}function Zg(e,t=!1,r=ie(e)){return Q3(e,uw,Fe.WGS84,t,r)}var XS;const w1=[0,0];function M9(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}const yx=Te.getLogger("esri.geometry.Point");let Wn=XS=class extends Xs{constructor(...e){super(...e),this.x=0,this.y=0,this.z=void 0,this.m=void 0,this.type="point"}static copy(e,t){t._set("x",e._get("x")),t._set("y",e._get("y")),t._set("z",e._get("z")),t._set("m",e._get("m"));const r=e._get("spatialReference");t._set("spatialReference",Object.isFrozen(r)?r:r.clone())}normalizeCtorArgs(e,t,r,i,n){let s;if(Array.isArray(e))s=e,n=t,e=s[0],t=s[1],r=s[2],i=s[3];else if(e&&typeof e=="object"){if(s=e,e=s.x!=null?s.x:s.longitude,t=s.y!=null?s.y:s.latitude,r=s.z,i=s.m,(n=s.spatialReference)&&n.declaredClass!=="esri.geometry.SpatialReference"&&(n=new Fe(n)),s.longitude!=null||s.latitude!=null){if(s.longitude==null)yx.warn(".longitude=","Latitude was defined without longitude");else if(s.latitude==null)yx.warn(".latitude=","Longitude was defined without latitude");else if(!s.declaredClass&&n&&n.isWebMercator){const a=Jg(s.longitude,s.latitude,w1);e=a[0],t=a[1]}}}else M9(r)?(n=r,r=null):M9(i)&&(n=i,i=null);const o={x:e,y:t};return o.x==null&&o.y!=null?yx.warn(".y=","Y coordinate was defined without an X coordinate"):o.y==null&&o.x!=null&&yx.warn(".x=","X coordinate was defined without a Y coordinate"),n!=null&&(o.spatialReference=n),r!=null&&(o.z=r),i!=null&&(o.m=i),o}get cache(){return this.commitProperty("x"),this.commitProperty("y"),this.commitProperty("z"),this.commitProperty("m"),this.commitProperty("spatialReference"),{}}get hasM(){return this.m!==void 0}set hasM(e){e!==(this._get("m")!==void 0)&&(this._set("m",e?0:void 0),this._set("hasM",e))}get hasZ(){return this.z!==void 0}set hasZ(e){e!==(this._get("z")!==void 0)&&(this._set("z",e?0:void 0),this._set("hasZ",e))}get latitude(){const{spatialReference:e,x:t,y:r}=this;if(e){if(e.isWebMercator)return uw(t,r,w1)[1];if(e.isGeographic)return r}return null}set latitude(e){const{spatialReference:t,x:r}=this;t&&(t.isWebMercator?this._set("y",Jg(r,e,w1)[1]):t.isGeographic&&this._set("y",e),this._set("latitude",e))}get longitude(){const{x:e,y:t,spatialReference:r}=this;if(r){if(r.isWebMercator)return uw(e,t,w1)[0];if(r.isGeographic)return e}return null}set longitude(e){const{y:t,spatialReference:r}=this;r&&(r.isWebMercator?this._set("x",Jg(e,t,w1)[0]):r.isGeographic&&this._set("x",e),this._set("longitude",e))}writeX(e,t,r){t[r]=isNaN(e)?"NaN":e}readX(e){return typeof e=="string"?NaN:e}clone(){const e=new XS;return e.x=this.x,e.y=this.y,e.z=this.z,e.m=this.m,e.spatialReference=this.spatialReference,e}copy(e){return XS.copy(e,this),this}equals(e){if(ce(e))return!1;const{x:t,y:r,z:i,m:n,spatialReference:s}=this,{z:o,m:a}=e;let{x:l,y:u,spatialReference:h}=e;if(!s.equals(h))if(s.isWebMercator&&h.isWGS84)[l,u]=Jg(l,u),h=s;else{if(!s.isWGS84||!h.isWebMercator)return!1;[l,u]=uw(l,u),h=s}return t===l&&r===u&&i===o&&n===a&&s.wkid===h.wkid}offset(e,t,r){return ode(this,e,t,r)}normalize(){if(!this.spatialReference)return this;const e=Ao(this.spatialReference);if(!e)return this;let t=this.x;const[r,i]=e.valid,n=2*i;let s;return t>i?(s=Math.ceil(Math.abs(t-i)/n),t-=s*n):t<r&&(s=Math.ceil(Math.abs(t-r)/n),t+=s*n),this._set("x",t),this}distance(e){return ade(this,e)}toArray(){const e=this.hasZ,t=this.hasM;return e&&t?[this.x,this.y,this.z,this.m]:e?[this.x,this.y,this.z]:t?[this.x,this.y,this.m]:[this.x,this.y]}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],Wn.prototype,"cache",null),c([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Wn.prototype,"hasM",null),c([p({type:Boolean,json:{read:!1,write:{enabled:!1,overridePolicy:null}}})],Wn.prototype,"hasZ",null),c([p({type:Number})],Wn.prototype,"latitude",null),c([p({type:Number})],Wn.prototype,"longitude",null),c([p({type:Number,json:{type:[Number,String],write:{isRequired:!0,allowNull:!0}}}),Ct(e=>isNaN(e)?e:da(e))],Wn.prototype,"x",void 0),c([Se("x")],Wn.prototype,"writeX",null),c([ye("x")],Wn.prototype,"readX",null),c([p({type:Number,json:{write:!0}})],Wn.prototype,"y",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Wn.prototype,"z",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.hasM}}}}})],Wn.prototype,"m",void 0),Wn=XS=c([N("esri.geometry.Point")],Wn),Wn.prototype.toJSON.isDefaultToJSON=!0;const Ke=Wn,h4=[0,0];function ZT(e,t){return!!U(t)&&es(e,t.x,t.y,t.z)}function ytt(e,t){if(!t.points||t.points.length)return!1;for(const r of t.points)if(!N0(e,r))return!1;return!0}function cde(e,t){const{xmin:r,ymin:i,zmin:n,xmax:s,ymax:o,zmax:a}=t;return e.hasZ&&t.hasZ?es(e,r,i,n)&&es(e,r,o,n)&&es(e,s,o,n)&&es(e,s,i,n)&&es(e,r,i,a)&&es(e,r,o,a)&&es(e,s,o,a)&&es(e,s,i,a):es(e,r,i)&&es(e,r,o)&&es(e,s,o)&&es(e,s,i)}function N0(e,t){return es(e,t[0],t[1])}function hde(e,t){return es(e,t[0],t[1],t[2])}function es(e,t,r,i){return t>=e.xmin&&t<=e.xmax&&r>=e.ymin&&r<=e.ymax&&(i==null||!e.hasZ||i>=e.zmin&&i<=e.zmax)}function LW(e,t){return h4[1]=t.y,h4[0]=t.x,NW(e,h4)}function NW(e,t){return dde(e.rings,t)}function dde(e,t){if(!e)return!1;if(pde(e))return I9(!1,e,t);let r=!1;for(let i=0,n=e.length;i<n;i++)r=I9(r,e[i],t);return r}function pde(e){return!Array.isArray(e[0][0])}function I9(e,t,r){const[i,n]=r;let s=e,o=0;for(let a=0,l=t.length;a<l;a++){o++,o===l&&(o=0);const[u,h]=t[a],[d,f]=t[o];(h<n&&f>=n||f<n&&h>=n)&&u+(n-h)/(f-h)*(d-u)<i&&(s=!s)}return s}function fde(e,t){return ZT(e,t)}function mde(e,t){const r=e.hasZ&&t.hasZ;let i,n,s;if(e.xmin<=t.xmin){if(i=t.xmin,e.xmax<i)return!1}else if(i=e.xmin,t.xmax<i)return!1;if(e.ymin<=t.ymin){if(n=t.ymin,e.ymax<n)return!1}else if(n=e.ymin,t.ymax<n)return!1;if(r&&t.hasZ){if(e.zmin<=t.zmin){if(s=t.zmin,e.zmax<s)return!1}else if(s=e.zmin,t.zmax<s)return!1}return!0}function yde(e,t){const{points:r,hasZ:i}=t,n=i?hde:N0;for(const s of r)if(n(e,s))return!0;return!1}const Nm=[0,0],Dm=[0,0],Fm=[0,0],jm=[0,0],gde=[Nm,Dm,Fm,jm],DW=[[Fm,Nm],[Nm,Dm],[Dm,jm],[jm,Fm]];function vde(e,t){Nm[0]=e.xmin,Nm[1]=e.ymax,Dm[0]=e.xmax,Dm[1]=e.ymax,Fm[0]=e.xmin,Fm[1]=e.ymin,jm[0]=e.xmax,jm[1]=e.ymin;for(const r of gde)if(NW(t,r))return!0;for(const r of t.rings){if(!r.length)continue;let i=r[0];if(N0(e,i))return!0;for(let n=1;n<r.length;n++){const s=r[n];if(N0(e,s)||FW(i,s,DW))return!0;i=s}}return!1}function bde(e,t){Nm[0]=e.xmin,Nm[1]=e.ymax,Dm[0]=e.xmax,Dm[1]=e.ymax,Fm[0]=e.xmin,Fm[1]=e.ymin,jm[0]=e.xmax,jm[1]=e.ymin;const r=t.paths;for(const i of r){if(!r.length)continue;let n=i[0];if(N0(e,n))return!0;for(let s=1;s<i.length;s++){const o=i[s];if(N0(e,o)||FW(n,o,DW))return!0;n=o}}return!1}const Wi=[0,0];function wde(e){for(let t=0;t<e.length;t++){const r=e[t];for(let n=0;n<r.length-1;n++){const s=r[n],o=r[n+1];for(let a=t+1;a<e.length;a++)for(let l=0;l<e[a].length-1;l++){const u=e[a][l],h=e[a][l+1];if(KA(s,o,u,h,Wi)&&!(Wi[0]===s[0]&&Wi[1]===s[1]||Wi[0]===u[0]&&Wi[1]===u[1]||Wi[0]===o[0]&&Wi[1]===o[1]||Wi[0]===h[0]&&Wi[1]===h[1]))return!0}}const i=r.length;if(!(i<=4))for(let n=0;n<i-3;n++){let s=i-1;n===0&&(s=i-2);const o=r[n],a=r[n+1];for(let l=n+2;l<s;l++){const u=r[l],h=r[l+1];if(KA(o,a,u,h,Wi)&&!(Wi[0]===o[0]&&Wi[1]===o[1]||Wi[0]===u[0]&&Wi[1]===u[1]||Wi[0]===a[0]&&Wi[1]===a[1]||Wi[0]===h[0]&&Wi[1]===h[1]))return!0}}}return!1}function FW(e,t,r){for(let i=0;i<r.length;i++)if(KA(e,t,r[i][0],r[i][1]))return!0;return!1}function KA(e,t,r,i,n){const[s,o]=e,[a,l]=t,[u,h]=r,[d,f]=i,m=d-u,g=s-u,b=a-s,w=f-h,_=o-h,x=l-o,I=w*b-m*x;if(I===0)return!1;const S=(m*_-w*g)/I,T=(b*_-x*g)/I;return S>=0&&S<=1&&T>=0&&T<=1&&(n&&(n[0]=s+S*(a-s),n[1]=o+S*(l-o)),!0)}function _de(e){switch(e){case"esriGeometryEnvelope":case"extent":return mde;case"esriGeometryMultipoint":case"multipoint":return yde;case"esriGeometryPoint":case"point":return fde;case"esriGeometryPolygon":case"polygon":return vde;case"esriGeometryPolyline":case"polyline":return bde}}var Ko;function xde(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}function Lh(e,t,r){return t==null?r:r==null?t:e(t,r)}let Li=Ko=class extends Xs{constructor(...e){super(...e),this.type="extent",this.xmin=0,this.ymin=0,this.mmin=void 0,this.zmin=void 0,this.xmax=0,this.ymax=0,this.mmax=void 0,this.zmax=void 0}normalizeCtorArgs(e,t,r,i,n){return xde(e)?{spatialReference:e,xmin:0,ymin:0,xmax:0,ymax:0}:typeof e=="object"?(e.spatialReference=e.spatialReference==null?Fe.WGS84:e.spatialReference,e):{xmin:e,ymin:t,xmax:r,ymax:i,spatialReference:n??Fe.WGS84}}static fromBounds(e,t){return new Ko({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}static fromPoint(e){return new Ko({xmin:e.x,ymin:e.y,zmin:e.z,xmax:e.x,ymax:e.y,zmax:e.z,spatialReference:e.spatialReference})}get cache(){return this.commitProperty("xmin"),this.commitProperty("ymin"),this.commitProperty("zmin"),this.commitProperty("mmin"),this.commitProperty("xmax"),this.commitProperty("ymax"),this.commitProperty("zmax"),this.commitProperty("mmax"),this.commitProperty("spatialReference"),{}}get center(){const e=new Ke({x:.5*(this.xmin+this.xmax),y:.5*(this.ymin+this.ymax),spatialReference:this.spatialReference});return this.hasZ&&(e.z=.5*(this.zmin+this.zmax)),this.hasM&&(e.m=.5*(this.mmin+this.mmax)),e}get extent(){return this.clone()}get hasM(){return this.mmin!=null&&this.mmax!=null}get hasZ(){return this.zmin!=null&&this.zmax!=null}get height(){return Math.abs(this.ymax-this.ymin)}get width(){return Math.abs(this.xmax-this.xmin)}centerAt(e){const t=this.center;return e.z!=null&&this.hasZ?this.offset(e.x-t.x,e.y-t.y,e.z-t.z):this.offset(e.x-t.x,e.y-t.y)}clone(){const e=new Ko;return e.xmin=this.xmin,e.ymin=this.ymin,e.xmax=this.xmax,e.ymax=this.ymax,e.spatialReference=this.spatialReference,this.zmin!=null&&(e.zmin=this.zmin,e.zmax=this.zmax),this.mmin!=null&&(e.mmin=this.mmin,e.mmax=this.mmax),e}contains(e){if(!e)return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&sh(t,r)&&(e=t.isWebMercator?Jd(e):Zg(e,!0)),e.type==="point"?ZT(this,e):e.type==="extent"&&cde(this,e)}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&sh(t,r)&&(e=t.isWebMercator?Jd(e):Zg(e,!0)),this.xmin===e.xmin&&this.ymin===e.ymin&&this.zmin===e.zmin&&this.mmin===e.mmin&&this.xmax===e.xmax&&this.ymax===e.ymax&&this.zmax===e.zmax&&this.mmax===e.mmax}expand(e){const t=.5*(1-e),r=this.width*t,i=this.height*t;if(this.xmin+=r,this.ymin+=i,this.xmax-=r,this.ymax-=i,this.hasZ){const n=(this.zmax-this.zmin)*t;this.zmin+=n,this.zmax-=n}if(this.hasM){const n=(this.mmax-this.mmin)*t;this.mmin+=n,this.mmax-=n}return this}intersects(e){if(ce(e))return!1;e.type==="mesh"&&(e=e.extent);const t=this.spatialReference,r=e.spatialReference;return t&&r&&!t.equals(r)&&sh(t,r)&&(e=t.isWebMercator?Jd(e):Zg(e,!0)),_de(e.type)(this,e)}normalize(){const e=this._normalize(!1,!0);return Array.isArray(e)?e:[e]}offset(e,t,r){return this.xmin+=e,this.ymin+=t,this.xmax+=e,this.ymax+=t,r!=null&&(this.zmin+=r,this.zmax+=r),this}shiftCentralMeridian(){return this._normalize(!0)}union(e){return this===e||(this.xmin=Math.min(this.xmin,e.xmin),this.ymin=Math.min(this.ymin,e.ymin),this.xmax=Math.max(this.xmax,e.xmax),this.ymax=Math.max(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Lh(Math.min,this.zmin,e.zmin),this.zmax=Lh(Math.max,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Lh(Math.min,this.mmin,e.mmin),this.mmax=Lh(Math.max,this.mmax,e.mmax))),this}intersection(e){return this===e?this:ce(e)||!this.intersects(e)?null:(this.xmin=Math.max(this.xmin,e.xmin),this.ymin=Math.max(this.ymin,e.ymin),this.xmax=Math.min(this.xmax,e.xmax),this.ymax=Math.min(this.ymax,e.ymax),(this.hasZ||e.hasZ)&&(this.zmin=Lh(Math.max,this.zmin,e.zmin),this.zmax=Lh(Math.min,this.zmax,e.zmax)),(this.hasM||e.hasM)&&(this.mmin=Lh(Math.max,this.mmin,e.mmin),this.mmax=Lh(Math.min,this.mmax,e.mmax)),this)}toJSON(e){return this.write({},e)}_shiftCM(e=Ao(this.spatialReference)){if(!e||!this.spatialReference)return this;const t=this.spatialReference,r=this._getCM(e);if(r){const i=t.isWebMercator?Zg(r):r;this.xmin-=r.x,this.xmax-=r.x,t.isWebMercator||(i.x=this._normalizeX(i.x,e).x),this.spatialReference=new Fe(bl(t.isWGS84?e.altTemplate:e.wkTemplate,{Central_Meridian:i.x}))}return this}_getCM(e){let t=null;const[r,i]=e.valid,n=this.xmin,s=this.xmax;return n>=r&&n<=i&&s>=r&&s<=i||(t=this.center),t}_normalize(e,t,r){const i=this.spatialReference;if(!i)return this;if(!(r=r||Ao(i)))return this;const n=this._getParts(r).map(a=>a.extent);if(n.length<2)return n[0]||this;if(n.length>2)return e?this._shiftCM(r):this.set({xmin:r.valid[0],xmax:r.valid[1]});if(e)return this._shiftCM(r);if(t)return n;let s=!0,o=!0;return n.forEach(a=>{a.hasZ||(s=!1),a.hasM||(o=!1)}),{rings:n.map(a=>{const l=[[a.xmin,a.ymin],[a.xmin,a.ymax],[a.xmax,a.ymax],[a.xmax,a.ymin],[a.xmin,a.ymin]];if(s){const u=(a.zmax-a.zmin)/2;for(let h=0;h<l.length;h++)l[h].push(u)}if(o){const u=(a.mmax-a.mmin)/2;for(let h=0;h<l.length;h++)l[h].push(u)}return l}),hasZ:s,hasM:o,spatialReference:i}}_getParts(e){let t=this.cache._parts;if(!t){t=[];const{ymin:n,ymax:s,spatialReference:o}=this,a=this.width,l=this.xmin,u=this.xmax;let h;e=e||Ao(o);const[d,f]=e.valid;h=this._normalizeX(this.xmin,e);const m=h.x,g=h.frameId;h=this._normalizeX(this.xmax,e);const b=h.x,w=h.frameId,_=m===b&&a>0;if(a>2*f){const x=new Ko(l<u?m:b,n,f,s,o),I=new Ko(d,n,l<u?b:m,s,o),S=new Ko(0,n,f,s,o),T=new Ko(d,n,0,s,o),$=[],E=[];x.contains(S)&&$.push(g),x.contains(T)&&E.push(g),I.contains(S)&&$.push(w),I.contains(T)&&E.push(w);for(let C=g+1;C<w;C++)$.push(C),E.push(C);t.push({extent:x,frameIds:[g]},{extent:I,frameIds:[w]},{extent:S,frameIds:$},{extent:T,frameIds:E})}else m>b||_?t.push({extent:new Ko(m,n,f,s,o),frameIds:[g]},{extent:new Ko(d,n,b,s,o),frameIds:[w]}):t.push({extent:new Ko(m,n,b,s,o),frameIds:[g]});this.cache._parts=t}const r=this.hasZ,i=this.hasM;if(r||i){const n={};r&&(n.zmin=this.zmin,n.zmax=this.zmax),i&&(n.mmin=this.mmin,n.mmax=this.mmax);for(let s=0;s<t.length;s++)t[s].extent.set(n)}return t}_normalizeX(e,t){const[r,i]=t.valid,n=2*i;let s,o=0;return e>i?(s=Math.ceil(Math.abs(e-i)/n),e-=s*n,o=s):e<r&&(s=Math.ceil(Math.abs(e-r)/n),e+=s*n,o=-s),{x:e,frameId:o}}};c([p({readOnly:!0})],Li.prototype,"cache",null),c([p({readOnly:!0})],Li.prototype,"center",null),c([p({readOnly:!0})],Li.prototype,"extent",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Li.prototype,"hasM",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:null}}})],Li.prototype,"hasZ",null),c([p({readOnly:!0})],Li.prototype,"height",null),c([p({readOnly:!0})],Li.prototype,"width",null),c([p({type:Number,json:{type:[Number,String],write:{enabled:!0,allowNull:!0}}})],Li.prototype,"xmin",void 0),c([p({type:Number,json:{write:!0}})],Li.prototype,"ymin",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Li.prototype,"mmin",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Li.prototype,"zmin",void 0),c([p({type:Number,json:{write:!0}})],Li.prototype,"xmax",void 0),c([p({type:Number,json:{write:!0}})],Li.prototype,"ymax",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasM}}}}})],Li.prototype,"mmax",void 0),c([p({type:Number,json:{origins:{"web-scene":{write:!1}},write:{overridePolicy(){return{enabled:this.hasZ}}}}})],Li.prototype,"zmax",void 0),Li=Ko=c([N("esri.geometry.Extent")],Li),Li.prototype.toJSON.isDefaultToJSON=!0;const nt=Li;var T9,$9,E9;let Sde,cw;const A9=(T9=($9=globalThis.esriConfig)==null?void 0:$9.locale)!=null?T9:(E9=globalThis.dojoConfig)==null?void 0:E9.locale;function jW(){var e,t;return(e=A9??((t=globalThis.navigator)==null?void 0:t.language))!=null?e:"en"}function Sa(){return cw===void 0&&(cw=jW()),cw}const hw=[];function Mde(e){return hw.push(e),{remove(){hw.splice(hw.indexOf(e),1)}}}const XA=[];function ZL(e){return XA.push(e),{remove(){hw.splice(XA.indexOf(e),1)}}}function Ide(){var e;const t=(e=Sde)!=null?e:jW();cw!==t&&(cw=t,[...XA].forEach(r=>{r.call(null,t)}),[...hw].forEach(r=>{r.call(null,t)}))}globalThis.addEventListener==null||globalThis.addEventListener("languagechange",Ide);class lt{constructor(t,r={ignoreUnknown:!1}){this.jsonToAPI=t,this.options=r,this.apiValues=[],this.jsonValues=[],this.apiToJSON=this.invertMap(t),this.apiValues=this.getKeysSorted(this.apiToJSON),this.jsonValues=this.getKeysSorted(this.jsonToAPI),this.read=i=>this.fromJSON(i),this.write=(i,n,s)=>{const o=this.toJSON(i);o!==void 0&&Ro(s,o,n)},this.write.isJSONMapWriter=!0}toJSON(t){return this.apiToJSON.hasOwnProperty(t)?this.apiToJSON[t]:this.options.ignoreUnknown?void 0:t}fromJSON(t){return this.jsonToAPI.hasOwnProperty(t)?this.jsonToAPI[t]:this.options.ignoreUnknown?void 0:t}invertMap(t){const r={};for(const i in t)r[t[i]]=i;return r}getKeysSorted(t){const r=[];for(const i in t)r.push(i);return r.sort(),r}}function li(){return function(e){return new lt(e,{ignoreUnknown:!0})}}var QA;const Tde=new lt({avgRating:"avg-rating",numRatings:"num-ratings",numComments:"num-comments",numViews:"num-views"});let Xo=QA=class extends Ze{constructor(e){super(e),this.categories=null,this.disableExtraQuery=!1,this.extent=null,this.filter=null,this.num=10,this.query=null,this.sortField=null,this.start=1}get sortOrder(){return this._get("sortOrder")||"asc"}set sortOrder(e){e!=="asc"&&e!=="desc"||this._set("sortOrder",e)}clone(){return new QA({categories:this.categories?ie(this.categories):null,disableExtraQuery:this.disableExtraQuery,extent:this.extent?this.extent.clone():null,filter:this.filter,num:this.num,query:this.query,sortField:this.sortField,sortOrder:this.sortOrder,start:this.start})}toRequestOptions(e,t){let r,i;if(this.categories&&(r=this.categories.map(o=>Array.isArray(o)?JSON.stringify(o):o)),this.extent){const o=Vu(this.extent,Fe.WGS84);U(o)&&(i=`${o.xmin},${o.ymin},${o.xmax},${o.ymax}`)}let n=this.query;!this.disableExtraQuery&&e.extraQuery&&(n="("+n+")"+e.extraQuery);const s={categories:r,bbox:i,q:n,filter:this.filter,num:this.num,sortField:null,sortOrder:null,start:this.start};return this.sortField&&(s.sortField=this.sortField.split(",").map(o=>Tde.toJSON(o.trim())).join(","),s.sortOrder=this.sortOrder),{query:{...t,...s}}}};c([p()],Xo.prototype,"categories",void 0),c([p()],Xo.prototype,"disableExtraQuery",void 0),c([p({type:nt})],Xo.prototype,"extent",void 0),c([p()],Xo.prototype,"filter",void 0),c([p()],Xo.prototype,"num",void 0),c([p()],Xo.prototype,"query",void 0),c([p()],Xo.prototype,"sortField",void 0),c([p()],Xo.prototype,"sortOrder",null),c([p()],Xo.prototype,"start",void 0),Xo=QA=c([N("esri.portal.PortalQueryParams")],Xo);const Yc=Xo;let Jp=class extends Ze{constructor(e){super(e),this.nextQueryParams=null,this.queryParams=null,this.results=null,this.total=null}};c([p()],Jp.prototype,"nextQueryParams",void 0),c([p()],Jp.prototype,"queryParams",void 0),c([p()],Jp.prototype,"results",void 0),c([p()],Jp.prototype,"total",void 0),Jp=c([N("esri.portal.PortalQueryResult")],Jp);const $de=Jp;let dc=class extends me{constructor(e){super(e),this.created=null,this.id=null,this.portal=null,this.title=null,this.username=null}get url(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}/${this.id}`:null}toJSON(){throw new Z("internal:not-yet-implemented","PortalFolder.toJSON is not yet implemented")}};c([p({type:Date})],dc.prototype,"created",void 0),c([p()],dc.prototype,"id",void 0),c([p()],dc.prototype,"portal",void 0),c([p()],dc.prototype,"title",void 0),c([p({readOnly:!0})],dc.prototype,"url",null),c([p()],dc.prototype,"username",void 0),dc=c([N("esri.portal.PortalFolder")],dc);const Ede=dc;let Ni=class extends me{constructor(e){super(e),this.access=null,this.created=null,this.description=null,this.id=null,this.isInvitationOnly=!1,this.modified=null,this.owner=null,this.portal=null,this.snippet=null,this.sortField=null,this.sortOrder=null,this.tags=null,this.title=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get url(){const e=this.get("portal.restUrl");return e?e+"/community/groups/"+this.id:null}fetchCategorySchema(e){return this.portal._request(this.url+"/categorySchema",e).then(t=>{const r=t.categorySchema||[];return r.some(i=>i.source==="contentCategorySetsGroupQuery.LivingAtlas")?this._fetchCategorySchemaSet("LivingAtlas",e):r})}fetchMembers(e){return this.portal._request(this.url+"/users",e)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}toJSON(){throw new Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}queryItems(e,t){let r=br(Yc,e);return parseFloat(this.portal.currentVersion)>5?(r=r||new Yc,this.portal._queryPortal(`/content/groups/${this.id}/search`,r,"PortalItem",t)):(r=r?r.clone():new Yc,r.query="group:"+this.id+(r.query?" "+r.query:""),this.portal.queryItems(r,t))}_fetchCategorySchemaSet(e,t){return this.portal._fetchSelf(this.portal.authMode,!0,t).then(r=>{const i=r.contentCategorySetsGroupQuery;if(i){const n=new Yc;return n.disableExtraQuery=!0,n.num=1,n.query=i,this.portal.queryGroups(n,t)}throw new Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery value not found")}).then(r=>{if(r.total){const i=r.results[0],n=new Yc;return n.num=1,n.query=`typekeywords:"${e}"`,i.queryItems(n,t)}throw new Z("portal-group:fetchCategorySchema","contentCategorySetsGroupQuery group not found")}).then(r=>r.total?r.results[0].fetchData("json",t).then(i=>{const n=i&&i.categorySchema;return n&&n.length?n:[]}):[])}};c([p()],Ni.prototype,"access",void 0),c([p({type:Date})],Ni.prototype,"created",void 0),c([p()],Ni.prototype,"description",void 0),c([p()],Ni.prototype,"id",void 0),c([p()],Ni.prototype,"isInvitationOnly",void 0),c([p({type:Date})],Ni.prototype,"modified",void 0),c([p()],Ni.prototype,"owner",void 0),c([p()],Ni.prototype,"portal",void 0),c([p()],Ni.prototype,"snippet",void 0),c([p()],Ni.prototype,"sortField",void 0),c([p()],Ni.prototype,"sortOrder",void 0),c([p()],Ni.prototype,"tags",void 0),c([p()],Ni.prototype,"thumbnail",void 0),c([p({readOnly:!0})],Ni.prototype,"thumbnailUrl",null),c([p()],Ni.prototype,"title",void 0),c([p({readOnly:!0})],Ni.prototype,"url",null),Ni=c([N("esri.portal.PortalGroup")],Ni);const eC=Ni;var Ade=Object.freeze(Object.defineProperty({__proto__:null,default:eC},Symbol.toStringTag,{value:"Module"})),tC;let Mr=tC=class extends me{constructor(...e){super(...e),this.access=null,this.created=null,this.culture=null,this.description=null,this.email=null,this.fullName=null,this.modified=null,this.orgId=null,this.portal=null,this.preferredView=null,this.privileges=null,this.region=null,this.role=null,this.roleId=null,this.sourceJSON=null,this.units=null,this.username=null,this.userType=null}get thumbnailUrl(){const e=this.url,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userContentUrl(){const e=this.get("portal.restUrl");return e?`${e}/content/users/${this.username}`:null}get url(){const e=this.get("portal.restUrl");return e?`${e}/community/users/${this.username}`:null}addItem(e){const t=e&&e.item,r=e&&e.data,i=e&&e.folder,n={method:"post"};t&&(n.query=t.createPostQuery(),r!=null&&(typeof r=="string"?n.query.text=r:typeof r=="object"&&(n.query.text=JSON.stringify(r))));let s=this.userContentUrl;return i&&(s+="/"+(typeof i=="string"?i:i.id)),this.portal._request(s+"/addItem",n).then(o=>(t.id=o.id,t.portal=this.portal,t.loaded?t.reload():t.load()))}deleteItem(e){let t=this.userContentUrl;return e.ownerFolder&&(t+="/"+e.ownerFolder),this.portal._request(t+`/items/${e.id}/delete`,{method:"post"}).then(()=>{e.id=null,e.portal=null})}deleteItems(e){const t=this.userContentUrl+"/deleteItems",r=e.map(i=>i.id);if(r.length){const i={method:"post",query:{items:r.join(",")}};return this.portal._request(t,i).then(()=>{e.forEach(n=>{n.id=null,n.portal=null})})}return Promise.resolve(void 0)}fetchFolders(){const e={query:{num:1}};return this.portal._request(this.userContentUrl,e).then(t=>{let r;return r=t&&t.folders?t.folders.map(i=>{const n=Ede.fromJSON(i);return n.portal=this.portal,n}):[],r})}fetchGroups(){return this.portal._request(this.url).then(e=>{let t;return t=e&&e.groups?e.groups.map(r=>{const i=eC.fromJSON(r);return i.portal=this.portal,i}):[],t})}fetchItems(e){e||(e={});let t,r=this.userContentUrl;return e.folder&&(r+="/"+e.folder.id),ae(()=>Promise.resolve().then(function(){return VW}),void 0).then(({default:i})=>{t=i;const n={folders:!1,num:e.num||10,start:e.start||1,sortField:e.sortField||"created",sortOrder:e.sortOrder||"asc"};return this.portal._request(r,{query:n})}).then(i=>{let n;return i&&i.items?(n=i.items.map(s=>{const o=t.fromJSON(s);return o.portal=this.portal,o}),Promise.all(n.map(s=>s.load())).catch(s=>s).then(()=>({items:n,nextStart:i.nextStart,total:i.total}))):{items:[],nextStart:-1,total:0}})}fetchTags(){return this.portal._request(this.url+"/tags").then(e=>e.tags)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}queryFavorites(e){return this.favGroupId?(this._favGroup||(this._favGroup=new eC({id:this.favGroupId,portal:this.portal})),this._favGroup.queryItems(e)):Promise.reject(new Z("internal:unknown","Unknown internal error",{internalError:"Unknown favGroupId"}))}toJSON(){throw new Z("internal:not-yet-implemented","PortalGroup.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");const t=new tC;return t.sourceJSON=e,t.read(e),t}};c([p()],Mr.prototype,"access",void 0),c([p({type:Date})],Mr.prototype,"created",void 0),c([p()],Mr.prototype,"culture",void 0),c([p()],Mr.prototype,"description",void 0),c([p()],Mr.prototype,"email",void 0),c([p()],Mr.prototype,"favGroupId",void 0),c([p()],Mr.prototype,"fullName",void 0),c([p({type:Date})],Mr.prototype,"modified",void 0),c([p()],Mr.prototype,"orgId",void 0),c([p()],Mr.prototype,"portal",void 0),c([p()],Mr.prototype,"preferredView",void 0),c([p()],Mr.prototype,"privileges",void 0),c([p()],Mr.prototype,"region",void 0),c([p()],Mr.prototype,"role",void 0),c([p()],Mr.prototype,"roleId",void 0),c([p()],Mr.prototype,"sourceJSON",void 0),c([p()],Mr.prototype,"thumbnail",void 0),c([p({readOnly:!0})],Mr.prototype,"thumbnailUrl",null),c([p()],Mr.prototype,"units",void 0),c([p({readOnly:!0})],Mr.prototype,"userContentUrl",null),c([p({readOnly:!0})],Mr.prototype,"url",null),c([p()],Mr.prototype,"username",void 0),c([p()],Mr.prototype,"userType",void 0),Mr=tC=c([N("esri.portal.PortalUser")],Mr);const YL=Mr;var Cde=Object.freeze(Object.defineProperty({__proto__:null,default:YL},Symbol.toStringTag,{value:"Module"})),ao;let d4;const C9={PortalGroup:()=>ae(()=>Promise.resolve().then(function(){return Ade}),void 0),PortalItem:()=>ae(()=>Promise.resolve().then(function(){return VW}),void 0),PortalUser:()=>ae(()=>Promise.resolve().then(function(){return Cde}),void 0)};let Re=ao=class extends a2(Lo){constructor(e){super(e),this.access=null,this.allSSL=!1,this.authMode="auto",this.authorizedCrossOriginDomains=null,this.basemapGalleryGroupQuery=null,this.bingKey=null,this.canListApps=!1,this.canListData=!1,this.canListPreProvisionedItems=!1,this.canProvisionDirectPurchase=!1,this.canSearchPublic=!0,this.canShareBingPublic=!1,this.canSharePublic=!1,this.canSignInArcGIS=!1,this.canSignInIDP=!1,this.colorSetsGroupQuery=null,this.commentsEnabled=!1,this.created=null,this.culture=null,this.customBaseUrl=null,this.defaultBasemap=null,this.defaultDevBasemap=null,this.defaultExtent=null,this.defaultVectorBasemap=null,this.description=null,this.devBasemapGalleryGroupQuery=null,this.eueiEnabled=null,this.featuredGroups=null,this.featuredItemsGroupQuery=null,this.galleryTemplatesGroupQuery=null,this.livingAtlasGroupQuery=null,this.hasCategorySchema=!1,this.helperServices=null,this.homePageFeaturedContent=null,this.homePageFeaturedContentCount=null,this.httpPort=null,this.httpsPort=null,this.id=null,this.ipCntryCode=null,this.isPortal=!1,this.isReadOnly=!1,this.layerTemplatesGroupQuery=null,this.maxTokenExpirationMinutes=null,this.modified=null,this.name=null,this.portalHostname=null,this.portalMode=null,this.portalProperties=null,this.region=null,this.rotatorPanels=null,this.showHomePageDescription=!1,this.sourceJSON=null,this.supportsHostedServices=!1,this.symbolSetsGroupQuery=null,this.templatesGroupQuery=null,this.units=null,this.url=Kt.portalUrl,this.urlKey=null,this.user=null,this.useStandardizedQuery=!1,this.useVectorBasemaps=!1,this.vectorBasemapGalleryGroupQuery=null}normalizeCtorArgs(e){return typeof e=="string"?{url:e}:e}destroy(){this._esriId_credentialCreateHandle&&(this._esriId_credentialCreateHandle.remove(),this._esriId_credentialCreateHandle=null)}readAuthorizedCrossOriginDomains(e){if(e)for(const t of e)Kt.request.trustedServers.indexOf(t)===-1&&Kt.request.trustedServers.push(t);return e}readDefaultBasemap(e){return this._readBasemap(e)}readDefaultDevBasemap(e){return this._readBasemap(e)}readDefaultVectorBasemap(e){return this._readBasemap(e)}get extraQuery(){const e=!(this.user&&this.user.orgId)||this.canSearchPublic;return this.id&&!e?` AND orgid:${this.id}`:null}get isOrganization(){return!!this.access}get restUrl(){let e=this.url;if(e){const t=e.indexOf("/sharing");e=t>0?e.substring(0,t):this.url.replace(/\/+$/,""),e+="/sharing/rest"}return e}get stylesGroupQuery(){return iue(Te.getLogger(this.declaredClass),"stylesGroupQuery",{replacement:"stylesGroupQuery3d",version:"4.21"}),this.stylesGroupQuery3d}get thumbnailUrl(){const e=this.restUrl,t=this.thumbnail;return e&&t?this._normalizeSSL(e+"/portals/self/resources/"+t):null}readUrlKey(e){return e&&e.toLowerCase()}readUser(e){let t=null;return e&&(t=YL.fromJSON(e),t.portal=this),t}load(e){const t=ae(()=>Promise.resolve().then(function(){return Wde}),void 0).then(({default:r})=>{$r(e),d4=r}).then(()=>this.sourceJSON?this.sourceJSON:this._fetchSelf(this.authMode,!1,e)).then(r=>{if(si){const i=si;this.credential=i.findCredential(this.restUrl),this.credential||this.authMode!==ao.AUTH_MODE_AUTO||(this._esriId_credentialCreateHandle=i.on("credential-create",()=>{i.findCredential(this.restUrl)&&this._signIn()}))}this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}async createClosestFacilityTask(){tg(Te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/closestFacility",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("closestFacility");return new(await ae(()=>import("./ClosestFacilityTask.5a173d8b.js"),["assets/ClosestFacilityTask.5a173d8b.js","assets/networkService.79c8bc04.js","assets/GPMessage.f7e05966.js"])).default(e)}async createElevationLayers(){await this.load();const e=this._getHelperService("defaultElevationLayers"),t=(await ae(()=>import("./ElevationLayer.eae1f1e0.js"),[])).default;return e?e.map(r=>new t({id:r.id,url:r.url})):[]}async createGeometryService(){tg(Te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/geometryService",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("geometry");return new(await ae(()=>Promise.resolve().then(function(){return VMe}),void 0)).default({url:e})}async createPrintTask(){tg(Te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/print",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("printTask");return new(await ae(()=>import("./PrintTask.3299d8c2.js"),["assets/PrintTask.3299d8c2.js","assets/GPMessage.f7e05966.js"])).default(e)}async createRouteTask(){tg(Te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/route",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("route");return new(await ae(()=>import("./RouteTask.2b329fcb.js"),["assets/RouteTask.2b329fcb.js","assets/networkService.79c8bc04.js","assets/GPMessage.f7e05966.js"])).default(e)}async createServiceAreaTask(){tg(Te.getLogger(this.declaredClass),null,{replacement:"Use helperServices url with esri/rest/serviceArea",version:"4.21"}),await this.load();const e=this._getHelperServiceUrl("serviceArea");return new(await ae(()=>import("./ServiceAreaTask.a529709d.js"),["assets/ServiceAreaTask.a529709d.js","assets/networkService.79c8bc04.js","assets/GPMessage.f7e05966.js"])).default(e)}fetchBasemaps(e,t){const r=new Yc;return r.query=e||(Kt.apiKey&&OW(this.url)?this.devBasemapGalleryGroupQuery:this.useVectorBasemaps?this.vectorBasemapGalleryGroupQuery:this.basemapGalleryGroupQuery),r.disableExtraQuery=!0,this.queryGroups(r,t).then(i=>{if(r.num=100,r.query='type:"Web Map" -type:"Web Application"',i.total){const n=i.results[0];return r.sortField=n.sortField||"name",r.sortOrder=n.sortOrder||"desc",n.queryItems(r,t)}return null}).then(i=>{let n;return n=i&&i.total?i.results.filter(s=>s.type==="Web Map").map(s=>new d4({portalItem:s})):[],n})}fetchCategorySchema(e){return this.hasCategorySchema?this._request(this.restUrl+"/portals/self/categorySchema",e).then(t=>t.categorySchema):wl(e)?Promise.reject(Zr()):Promise.resolve([])}fetchFeaturedGroups(e){const t=this.featuredGroups,r=new Yc;if(r.num=100,r.sortField="title",t&&t.length){const i=[];for(const n of t)i.push(`(title:"${n.title}" AND owner:${n.owner})`);return r.query=i.join(" OR "),this.queryGroups(r,e).then(n=>n.results)}return wl(e)?Promise.reject(Zr()):Promise.resolve([])}fetchRegions(e){const t=this.user&&this.user.culture||this.culture||Sa();return this._request(this.restUrl+"/portals/regions",{...e,query:{culture:t}})}static getDefault(){return ao._default&&!ao._default.destroyed||(ao._default=new ao),ao._default}queryGroups(e,t){return this._queryPortal("/community/groups",e,"PortalGroup",t)}queryItems(e,t){return this._queryPortal("/search",e,"PortalItem",t)}queryUsers(e,t){return e.sortField||(e.sortField="username"),this._queryPortal("/community/users",e,"PortalUser",t)}toJSON(){throw new Z("internal:not-yet-implemented","Portal.toJSON is not yet implemented")}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new ao({sourceJSON:e})}_getHelperService(e){const t=this.helperServices&&this.helperServices[e];if(!t)throw new Z("portal:service-not-found",`The \`helperServices\` do not include an entry named "${e}"`);return t}_getHelperServiceUrl(e){const t=this._getHelperService(e);if(!t.url)throw new Z("portal:service-url-not-found",`The \`helperServices\` entry "${e}" does not include a \`url\` value`);return t.url}_fetchSelf(e=this.authMode,t=!1,r){const i=this.restUrl+"/portals/self",n={authMode:e,query:{culture:Sa().toLowerCase()},...r};return n.authMode==="auto"&&(n.authMode="no-prompt"),t&&(n.query.default=!0),this._request(i,n)}_queryPortal(e,t,r,i){const n=br(Yc,t),s=o=>this._request(this.restUrl+e,{...n.toRequestOptions(this),...i}).then(a=>{const l=n.clone();return l.start=a.nextStart,new $de({nextQueryParams:l,queryParams:n,total:a.total,results:ao._resultsToTypedArray(o,{portal:this},a,i)})}).then(a=>Promise.all(a.results.map(l=>typeof l.when=="function"?l.when():a)).then(()=>a,l=>(wh(l),a)));return r&&C9[r]?C9[r]().then(({default:o})=>($r(i),s(o))):s()}_signIn(){if(this.authMode===ao.AUTH_MODE_ANONYMOUS)return Promise.reject(new Z("portal:invalid-auth-mode",`Current "authMode"' is "${this.authMode}"`));if(this.loadStatus==="failed")return Promise.reject(this.loadError);const e=t=>Promise.resolve().then(()=>this.loadStatus==="not-loaded"?(t||(this.authMode="immediate"),this.load().then(()=>null)):this.loadStatus==="loading"?this.load().then(()=>this.credential?null:(this.credential=t,this._fetchSelf("immediate"))):this.user&&this.credential===t?null:(this.credential=t,this._fetchSelf("immediate"))).then(r=>{r&&(this.sourceJSON=r,this.read(r))});return si?si.getCredential(this.restUrl).then(t=>e(t)):e(this.credential)}_normalizeSSL(e){return e.replace(/^http:/i,"https:").replace(":7080",":7443")}_normalizeUrl(e){const t=this.credential&&this.credential.token;return this._normalizeSSL(t?e+(e.indexOf("?")>-1?"&":"?")+"token="+t:e)}_requestToTypedArray(e,t,r){return this._request(e,t).then(i=>{const n=ao._resultsToTypedArray(r,{portal:this},i);return Promise.all(n.map(s=>typeof s.when=="function"?s.when():i)).then(()=>n,()=>n)})}_readBasemap(e){if(e){const t=d4.fromJSON(e);return t.portalItem={portal:this},t}return null}_request(e,t={}){const r={f:"json",...t.query},{authMode:i=this.authMode===ao.AUTH_MODE_ANONYMOUS?"anonymous":"auto",body:n=null,cacheBust:s=!1,method:o="auto",responseType:a="json",signal:l}=t,u={authMode:i,body:n,cacheBust:s,method:o,query:r,responseType:a,timeout:0,signal:l};return Ee(this._normalizeSSL(e),u).then(h=>h.data)}static _resultsToTypedArray(e,t,r,i){let n;if(r){const s=U(i)?i.signal:null;n=r.listings||r.notifications||r.userInvitations||r.tags||r.items||r.groups||r.comments||r.provisions||r.results||r.relatedItems||r,(e||t)&&(n=n.map(o=>{const a=Object.assign(e?e.fromJSON(o):o,t);return typeof a.load=="function"&&a.load(s),a}))}else n=[];return n}};Re.AUTH_MODE_ANONYMOUS="anonymous",Re.AUTH_MODE_AUTO="auto",Re.AUTH_MODE_IMMEDIATE="immediate",c([p()],Re.prototype,"access",void 0),c([p()],Re.prototype,"allSSL",void 0),c([p()],Re.prototype,"authMode",void 0),c([p()],Re.prototype,"authorizedCrossOriginDomains",void 0),c([ye("authorizedCrossOriginDomains")],Re.prototype,"readAuthorizedCrossOriginDomains",null),c([p()],Re.prototype,"basemapGalleryGroupQuery",void 0),c([p()],Re.prototype,"bingKey",void 0),c([p()],Re.prototype,"canListApps",void 0),c([p()],Re.prototype,"canListData",void 0),c([p()],Re.prototype,"canListPreProvisionedItems",void 0),c([p()],Re.prototype,"canProvisionDirectPurchase",void 0),c([p()],Re.prototype,"canSearchPublic",void 0),c([p()],Re.prototype,"canShareBingPublic",void 0),c([p()],Re.prototype,"canSharePublic",void 0),c([p()],Re.prototype,"canSignInArcGIS",void 0),c([p()],Re.prototype,"canSignInIDP",void 0),c([p()],Re.prototype,"colorSetsGroupQuery",void 0),c([p()],Re.prototype,"commentsEnabled",void 0),c([p({type:Date})],Re.prototype,"created",void 0),c([p()],Re.prototype,"credential",void 0),c([p()],Re.prototype,"culture",void 0),c([p()],Re.prototype,"currentVersion",void 0),c([p()],Re.prototype,"customBaseUrl",void 0),c([p()],Re.prototype,"defaultBasemap",void 0),c([ye("defaultBasemap")],Re.prototype,"readDefaultBasemap",null),c([p()],Re.prototype,"defaultDevBasemap",void 0),c([ye("defaultDevBasemap")],Re.prototype,"readDefaultDevBasemap",null),c([p({type:nt})],Re.prototype,"defaultExtent",void 0),c([p()],Re.prototype,"defaultVectorBasemap",void 0),c([ye("defaultVectorBasemap")],Re.prototype,"readDefaultVectorBasemap",null),c([p()],Re.prototype,"description",void 0),c([p()],Re.prototype,"devBasemapGalleryGroupQuery",void 0),c([p()],Re.prototype,"eueiEnabled",void 0),c([p({readOnly:!0})],Re.prototype,"extraQuery",null),c([p()],Re.prototype,"featuredGroups",void 0),c([p()],Re.prototype,"featuredItemsGroupQuery",void 0),c([p()],Re.prototype,"galleryTemplatesGroupQuery",void 0),c([p()],Re.prototype,"livingAtlasGroupQuery",void 0),c([p()],Re.prototype,"hasCategorySchema",void 0),c([p()],Re.prototype,"helpBase",void 0),c([p()],Re.prototype,"helperServices",void 0),c([p()],Re.prototype,"helpMap",void 0),c([p()],Re.prototype,"homePageFeaturedContent",void 0),c([p()],Re.prototype,"homePageFeaturedContentCount",void 0),c([p()],Re.prototype,"httpPort",void 0),c([p()],Re.prototype,"httpsPort",void 0),c([p()],Re.prototype,"id",void 0),c([p()],Re.prototype,"ipCntryCode",void 0),c([p({readOnly:!0})],Re.prototype,"isOrganization",null),c([p()],Re.prototype,"isPortal",void 0),c([p()],Re.prototype,"isReadOnly",void 0),c([p()],Re.prototype,"layerTemplatesGroupQuery",void 0),c([p()],Re.prototype,"maxTokenExpirationMinutes",void 0),c([p({type:Date})],Re.prototype,"modified",void 0),c([p()],Re.prototype,"name",void 0),c([p()],Re.prototype,"portalHostname",void 0),c([p()],Re.prototype,"portalMode",void 0),c([p()],Re.prototype,"portalProperties",void 0),c([p()],Re.prototype,"region",void 0),c([p({readOnly:!0})],Re.prototype,"restUrl",null),c([p()],Re.prototype,"rotatorPanels",void 0),c([p()],Re.prototype,"showHomePageDescription",void 0),c([p()],Re.prototype,"sourceJSON",void 0),c([p()],Re.prototype,"staticImagesUrl",void 0),c([p({readOnly:!0,json:{read:!1}})],Re.prototype,"stylesGroupQuery",null),c([p({json:{name:"2DStylesGroupQuery"}})],Re.prototype,"stylesGroupQuery2d",void 0),c([p({json:{name:"stylesGroupQuery"}})],Re.prototype,"stylesGroupQuery3d",void 0),c([p()],Re.prototype,"supportsHostedServices",void 0),c([p()],Re.prototype,"symbolSetsGroupQuery",void 0),c([p()],Re.prototype,"templatesGroupQuery",void 0),c([p()],Re.prototype,"thumbnail",void 0),c([p({readOnly:!0})],Re.prototype,"thumbnailUrl",null),c([p()],Re.prototype,"units",void 0),c([p()],Re.prototype,"url",void 0),c([p()],Re.prototype,"urlKey",void 0),c([ye("urlKey")],Re.prototype,"readUrlKey",null),c([p()],Re.prototype,"user",void 0),c([ye("user")],Re.prototype,"readUser",null),c([p()],Re.prototype,"useStandardizedQuery",void 0),c([p()],Re.prototype,"useVectorBasemaps",void 0),c([p()],Re.prototype,"vectorBasemapGalleryGroupQuery",void 0),Re=ao=c([N("esri.portal.Portal")],Re);const ms=Re,kde=Te.getLogger("esri.assets");function Zt(e){if(!Kt.assetsPath)throw kde.errorOnce("The API assets location needs to be set using config.assetsPath. More information: https://arcg.is/1OzLe50"),new Z("assets:path-not-set","config.assetsPath is not set");return up(Kt.assetsPath,e)}const Ode=Te.getLogger("esri.portal.PortalItemResource");let Qh=class extends Ze{constructor(e){super(e),this.portalItem=null}normalizeCtorArgs(e){return e&&e.portalItem&&e.path?{...e,path:this.normalizePath(e.path,e.portalItem)}:e}set path(e){U(e)&&Eo(e)?Ode.error("portalitemresource:invalid-path","A portal item resource path must be relative"):this._set("path",e)}_castPath(e){return this.normalizePath(e,this.portalItem)}get url(){return this.portalItem&&this.path?`${this.portalItem.itemUrl}/resources/${this.path}`:null}get itemRelativeUrl(){return this.portalItem&&this.path?`./resources/${this.path}`:null}fetch(e="json",t){const r=this.url;if(ce(r))throw new Z("portal-item-resource:fetch","Portal item resource does not refer to a valid item or path");return this.portalItem.portal._request(r,{responseType:e,query:{token:this.portalItem.apiKey},signal:hH(t,"signal")})}async update(e,t){return(await ae(()=>import("./resourceUtils.950101bd.js"),[])).addOrUpdateResource(this,"update",e,t)}hasPath(){return U(this.path)}normalizePath(e,t){return ce(e)?e:(e=e.replace(/^\/+/,""),U(t)&&Eo(e)&&(e=zL(e,t.itemUrl)),e.replace(/^\/+/,"").replace(/^(\.\/)?resources\//,""))}};c([p()],Qh.prototype,"portalItem",void 0),c([p({type:String,value:null})],Qh.prototype,"path",null),c([Ct("path")],Qh.prototype,"_castPath",null),c([p({type:String,readOnly:!0})],Qh.prototype,"url",null),c([p({type:String,readOnly:!0})],Qh.prototype,"itemRelativeUrl",null),Qh=c([N("esri.portal.PortalItemResource")],Qh);const Pde=Qh;let rb=class extends Ze{constructor(e){super(e),this.created=null,this.rating=null}};c([p()],rb.prototype,"created",void 0),c([p()],rb.prototype,"rating",void 0),rb=c([N("esri.portal.PortalRating")],rb);const p4=rb;var rg;let At=rg=class extends a2(Lo){constructor(e){super(e),this.access=null,this.accessInformation=null,this.apiKey=null,this.applicationProxies=null,this.avgRating=null,this.categories=null,this.created=null,this.culture=null,this.description=null,this.extent=null,this.groupCategories=null,this.id=null,this.itemControl=null,this.licenseInfo=null,this.modified=null,this.name=null,this.numComments=null,this.numRatings=null,this.numViews=null,this.owner=null,this.ownerFolder=null,this.portal=null,this.screenshots=null,this.size=null,this.snippet=null,this.sourceJSON=null,this.tags=null,this.title=null,this.type=null,this.typeKeywords=null,this.url=null}static from(e){return ua(rg,e)}destroy(){this.portal=null}get displayName(){const e=this.type,t=this.typeKeywords||[];let r=e;return e==="Feature Service"||e==="Feature Collection"?r=t.indexOf("Table")>-1?"Table":t.indexOf("Route Layer")>-1?"Route Layer":t.indexOf("Markup")>-1?"Markup":"Feature Layer":e==="Image Service"?r=t.indexOf("Elevation 3D Layer")>-1?"Elevation Layer":t.indexOf("Tiled Imagery")>-1?"Tiled Imagery Layer":"Imagery Layer":e==="Scene Service"?r="Scene Layer":e==="Scene Package"?r="Scene Layer Package":e==="Stream Service"?r="Feature Layer":e==="Geoprocessing Service"&&this.portal&&this.portal.isPortal?r=t.indexOf("Web Tool")>-1?"Tool":"Geoprocessing Service":e==="Geocoding Service"?r="Locator":e==="Geoenrichment Service"?r="GeoEnrichment Service":e==="Microsoft Powerpoint"?r="Microsoft PowerPoint":e==="GeoJson"?r="GeoJSON":e==="Globe Service"?r="Globe Layer":e==="Vector Tile Service"?r="Tile Layer":e==="netCDF"?r="NetCDF":e==="Map Service"?r=t.indexOf("Spatiotemporal")===-1&&(t.indexOf("Hosted Service")>-1||t.indexOf("Tiled")>-1)&&t.indexOf("Relational")===-1?"Tile Layer":"Map Image Layer":e&&e.toLowerCase().indexOf("add in")>-1?r=e.replace(/(add in)/gi,"Add-In"):e==="datastore catalog service"?r="Big Data File Share":e==="Compact Tile Package"?r="Tile Package (tpkx)":e==="OGCFeatureServer"?r="OGC Feature Layer":e==="web mapping application"&&t.indexOf("configurableApp")>-1&&(r="Instant App"),r}readExtent(e){return e&&e.length?new nt(e[0][0],e[0][1],e[1][0],e[1][1]):null}get iconUrl(){const e=this.type&&this.type.toLowerCase()||"",t=this.typeKeywords||[],r="esri/images/portal/",i="16";let n,s=!1,o=!1,a=!1,l=!1,u=!1,h=!1;return e.indexOf("service")>0||e==="feature collection"||e==="kml"||e==="wms"||e==="wmts"||e==="wfs"?(s=t.indexOf("Hosted Service")>-1,e==="feature service"||e==="feature collection"||e==="kml"||e==="wfs"?(o=t.indexOf("Table")>-1,a=t.indexOf("Route Layer")>-1,l=t.indexOf("Markup")>-1,u=t.indexOf("Spatiotemporal")!==-1,h=t.indexOf("UtilityNetwork")!==-1,n=u&&o?"spatiotemporaltable":o?"table":a?"routelayer":l?"markup":u?"spatiotemporal":s?"featureshosted":h?"utilitynetwork":"features"):n=e==="map service"||e==="wms"||e==="wmts"?s||t.indexOf("Tiled")>-1||e==="wmts"?"maptiles":"mapimages":e==="scene service"?t.indexOf("Line")>-1?"sceneweblayerline":t.indexOf("3DObject")>-1?"sceneweblayermultipatch":t.indexOf("Point")>-1?"sceneweblayerpoint":t.indexOf("IntegratedMesh")>-1?"sceneweblayermesh":t.indexOf("PointCloud")>-1?"sceneweblayerpointcloud":t.indexOf("Polygon")>-1?"sceneweblayerpolygon":t.indexOf("Building")>-1?"sceneweblayerbuilding":t.indexOf("Voxel")>-1?"sceneweblayervoxel":"sceneweblayer":e==="image service"?t.indexOf("Elevation 3D Layer")>-1?"elevationlayer":t.indexOf("Tiled Imagery")>-1?"tiledimagerylayer":"imagery":e==="stream service"?"streamlayer":e==="vector tile service"?"vectortile":e==="datastore catalog service"?"datastorecollection":e==="geocoding service"?"geocodeservice":e==="geoprocessing service"&&t.indexOf("Web Tool")>-1&&this.portal&&this.portal.isPortal?"tool":"layers"):n=e==="web map"||e==="cityengine web scene"?"maps":e==="web scene"?t.indexOf("ViewingMode-Local")>-1?"webscenelocal":"websceneglobal":e==="web mapping application"&&t.indexOf("configurableApp")>-1?"instantapps":e==="web mapping application"||e==="mobile application"||e==="application"||e==="operation view"||e==="desktop application"?"apps":e==="map document"||e==="map package"||e==="published map"||e==="scene document"||e==="globe document"||e==="basemap package"||e==="mobile basemap package"||e==="mobile map package"||e==="project package"||e==="project template"||e==="pro map"||e==="layout"||e==="layer"&&t.indexOf("ArcGIS Pro")>-1||e==="explorer map"&&t.indexOf("Explorer Document")?"mapsgray":e==="service definition"||e==="csv"||e==="shapefile"||e==="cad drawing"||e==="geojson"||e==="360 vr experience"||e==="netcdf"||e==="administrative report"?"datafiles":e==="explorer add in"||e==="desktop add in"||e==="windows viewer add in"||e==="windows viewer configuration"?"appsgray":e==="arcgis pro add in"||e==="arcgis pro configuration"?"addindesktop":e==="rule package"||e==="file geodatabase"||e==="sqlite geodatabase"||e==="csv collection"||e==="kml collection"||e==="windows mobile package"||e==="map template"||e==="desktop application template"||e==="gml"||e==="arcpad package"||e==="code sample"||e==="form"||e==="document link"||e==="earth configuration"||e==="operations dashboard add in"||e==="rules package"||e==="image"||e==="workflow manager package"||e==="explorer map"&&t.indexOf("Explorer Mapping Application")>-1||t.indexOf("Document")>-1?"datafilesgray":e==="network analysis service"||e==="geoprocessing service"||e==="geodata service"||e==="geometry service"||e==="geoprocessing package"||e==="locator package"||e==="geoprocessing sample"||e==="workflow manager service"?"toolsgray":e==="layer"||e==="layer package"||e==="explorer layer"?"layersgray":e==="scene package"?"scenepackage":e==="mobile scene package"?"mobilescenepackage":e==="tile package"||e==="compact tile package"?"tilepackage":e==="task file"?"taskfile":e==="report template"?"report-template":e==="statistical data collection"?"statisticaldatacollection":e==="insights workbook"?"workbook":e==="insights model"?"insightsmodel":e==="insights page"?"insightspage":e==="insights theme"?"insightstheme":e==="hub initiative"?"hubinitiative":e==="hubpage"?"hubpage":e==="hub event"?"hubevent":e==="hub site application"?"hubsite":e==="relational database connection"?"relationaldatabaseconnection":e==="big data file share"?"datastorecollection":e==="image collection"?"imagecollection":e==="style"?"style":e==="desktop style"?"desktopstyle":e==="dashboard"?"dashboard":e==="raster function template"?"rasterprocessingtemplate":e==="vector tile package"?"vectortilepackage":e==="ortho mapping project"?"orthomappingproject":e==="ortho mapping template"?"orthomappingtemplate":e==="solution"?"solutions":e==="geopackage"?"geopackage":e==="deep learning package"?"deeplearningpackage":e==="real time analytic"?"realtimeanalytics":e==="big data analytic"?"bigdataanalytics":e==="feed"?"feed":e==="excalibur imagery project"?"excaliburimageryproject":e==="notebook"?"notebook":e==="storymap"?"storymap":e==="survey123 add in"?"survey123addin":e==="mission"?"mission":e==="mission report"?"missionreport":e==="quickcapture project"?"quickcaptureproject":e==="pro report"?"proreport":e==="urban model"?"urbanmodel":e==="web experience"?"experiencebuilder":e==="web experience template"?"webexperiencetemplate":e==="workflow"?"workflow":e==="insights script"?"insightsscript":e==="kernel gateway connection"?"kernelgatewayconnection":e==="hub initiative template"?"hubinitiativetemplate":e==="storymap theme"?"storymaptheme":e==="knowledge graph"?"knowledgegraph":e==="native application"?"nativeapp":e==="native application installer"?"nativeappinstaller":e==="link chart"?"linkchart":e==="investigation"?"investigation":e==="ogcfeatureserver"?"features":e==="pro project"?"proproject":e==="insights workbook package"?"insightsworkbookpackage":e==="apache parquet"?"apacheparquet":"maps",n?Zt(r+n+i+".png"):null}get isLayer(){return["Map Service","Feature Service","Feature Collection","Scene Service","Image Service","Stream Service","Vector Tile Service","WMTS","WMS"].indexOf(this.type)>-1}get itemUrl(){const e=this.get("portal.restUrl");return e?e+"/content/items/"+this.id:null}get thumbnailUrl(){const e=this.itemUrl,t=this.thumbnail;return e&&t?this.portal._normalizeUrl(`${e}/info/${t}?f=json`):null}get userItemUrl(){const e=this.get("portal.restUrl");if(!e)return null;const t=this.owner||this.get("portal.user.username");return t?`${e}/content/users/${this.ownerFolder?`${t}/${this.ownerFolder}`:t}/items/${this.id}`:null}load(e){this.portal||(this.portal=ms.getDefault());const t=this.portal.load(e).then(()=>this.sourceJSON?this.sourceJSON:this.id&&this.itemUrl?this.portal._request(this.itemUrl,{signal:U(e)?e.signal:null,query:{token:this.apiKey}}):{}).then(r=>{this.sourceJSON=r,this.read(r)});return this.addResolvingPromise(t),Promise.resolve(this)}addRating(e){const t={method:"post",query:{}};return e instanceof p4&&(e=e.rating),isNaN(e)||typeof e!="number"||(t.query.rating=e),this.portal._request(this.itemUrl+"/addRating",t).then(()=>new p4({rating:e,created:new Date}))}clone(){const e={access:this.access,accessInformation:this.accessInformation,applicationProxies:ie(this.applicationProxies),avgRating:this.avgRating,categories:ie(this.categories),created:ie(this.created),culture:this.culture,description:this.description,extent:ie(this.extent),groupCategories:ie(this.groupCategories),id:this.id,itemControl:this.itemControl,licenseInfo:this.licenseInfo,modified:ie(this.modified),name:this.name,numComments:this.numComments,numRatings:this.numRatings,numViews:this.numViews,owner:this.owner,ownerFolder:this.ownerFolder,portal:this.portal,screenshots:ie(this.screenshots),size:this.size,snippet:this.snippet,tags:ie(this.tags),thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:ie(this.typeKeywords),url:this.url};return this.loaded&&(e.loadStatus="loaded"),new rg({sourceJSON:this.sourceJSON}).set(e)}createPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}deleteRating(){return this.portal._request(this.itemUrl+"/deleteRating",{method:"post"}).then(()=>{})}fetchData(e="json",t){return this.portal._request(this.itemUrl+"/data",{responseType:e,...t,query:{token:this.apiKey}})}fetchRating(e){return this.portal._request(this.itemUrl+"/rating",{query:{token:this.apiKey},...e}).then(t=>t.rating!=null?(t.created=new Date(t.created),new p4(t)):null)}fetchRelatedItems(e,t){return this.portal._requestToTypedArray(this.itemUrl+"/relatedItems",{query:{...e,token:this.apiKey},...t},rg)}getThumbnailUrl(e){let t=this.thumbnailUrl;return t&&e&&(t+=`&w=${e}`),t}reload(){return this.portal._request(this.itemUrl,{cacheBust:!0,query:{token:this.apiKey}}).then(e=>(this.sourceJSON=e,this.read(e),this))}update(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e&&e.data,r={method:"post"};r.query=this.createPostQuery();for(const i in r.query)r.query[i]===null&&(r.query[i]="");return r.query.clearEmptyFields=!0,t!=null&&(typeof t=="string"?r.query.text=t:typeof t=="object"&&(r.query.text=JSON.stringify(t))),this.portal._request(`${this.userItemUrl}/update`,r).then(()=>this.reload())}):Promise.reject(new Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}updateThumbnail(e){return this.id?this.load().then(()=>this.portal._signIn()).then(()=>{const t=e.thumbnail,r=e.filename,i={method:"post"};if(typeof t=="string")dy(t)?i.query={data:t}:i.query={url:ma(t)},U(r)&&(i.query.filename=r);else{const n=new FormData;U(r)?n.append("file",t,r):n.append("file",t),i.body=n}return this.portal._request(`${this.userItemUrl}/updateThumbnail`,i).then(()=>this.reload())}):Promise.reject(new Z("portal:item-does-not-exist","The item does not exist yet and cannot be updated"))}async fetchResources(e={},t){return(await ae(()=>import("./resourceUtils.950101bd.js"),[])).fetchResources(this,e,t)}async addResource(e,t,r){const i=await ae(()=>import("./resourceUtils.950101bd.js"),[]);return e.portalItem=this,i.addOrUpdateResource(e,"add",t,r)}async removeResource(e,t){const r=await ae(()=>import("./resourceUtils.950101bd.js"),[]);if(e.portalItem&&e.portalItem.itemUrl!==this.itemUrl)throw new Z("removeresource:portal-item-mismatch","The portal item associated with the provided resource does not match the item");return r.removeResource(this,e,t)}async removeAllResources(e){return(await ae(()=>import("./resourceUtils.950101bd.js"),[])).removeAllResources(this,e)}resourceFromPath(e){return new Pde({portalItem:this,path:e})}toJSON(){const e=this.extent,t={created:this.created&&this.created.getTime(),description:this.description,extent:e&&[[e.xmin,e.ymin],[e.xmax,e.ymax]],id:this.id,modified:this.modified&&this.modified.getTime(),name:this.name,owner:this.owner,ownerFolder:this.ownerFolder,snippet:this.snippet,tags:this.tags,thumbnail:this.thumbnail,title:this.title,type:this.type,typeKeywords:this.typeKeywords,url:this.url};return yH(t)}static fromJSON(e){if(!e)return null;if(e.declaredClass)throw new Error("JSON object is already hydrated");return new rg({sourceJSON:e})}_getPostQuery(){const e=this.toJSON();for(const t in e)t==="tags"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="typeKeywords"&&e[t]!==null&&(e[t]=e[t].join(", ")),t==="extent"&&e[t]&&(e[t]=JSON.stringify(e[t]));return e}};c([p({type:["private","shared","org","public"]})],At.prototype,"access",void 0),c([p()],At.prototype,"accessInformation",void 0),c([p({type:String})],At.prototype,"apiKey",void 0),c([p({json:{read:{source:"appProxies"}}})],At.prototype,"applicationProxies",void 0),c([p()],At.prototype,"avgRating",void 0),c([p()],At.prototype,"categories",void 0),c([p({type:Date})],At.prototype,"created",void 0),c([p()],At.prototype,"culture",void 0),c([p()],At.prototype,"description",void 0),c([p({readOnly:!0})],At.prototype,"displayName",null),c([p({type:nt})],At.prototype,"extent",void 0),c([ye("extent")],At.prototype,"readExtent",null),c([p()],At.prototype,"groupCategories",void 0),c([p({readOnly:!0})],At.prototype,"iconUrl",null),c([p()],At.prototype,"id",void 0),c([p({readOnly:!0})],At.prototype,"isLayer",null),c([p()],At.prototype,"itemControl",void 0),c([p({readOnly:!0})],At.prototype,"itemUrl",null),c([p()],At.prototype,"licenseInfo",void 0),c([p({type:Date})],At.prototype,"modified",void 0),c([p()],At.prototype,"name",void 0),c([p()],At.prototype,"numComments",void 0),c([p()],At.prototype,"numRatings",void 0),c([p()],At.prototype,"numViews",void 0),c([p()],At.prototype,"owner",void 0),c([p()],At.prototype,"ownerFolder",void 0),c([p({type:ms})],At.prototype,"portal",void 0),c([p()],At.prototype,"screenshots",void 0),c([p()],At.prototype,"size",void 0),c([p()],At.prototype,"snippet",void 0),c([p()],At.prototype,"sourceJSON",void 0),c([p()],At.prototype,"tags",void 0),c([p()],At.prototype,"thumbnail",void 0),c([p({readOnly:!0})],At.prototype,"thumbnailUrl",null),c([p()],At.prototype,"title",void 0),c([p()],At.prototype,"type",void 0),c([p()],At.prototype,"typeKeywords",void 0),c([p()],At.prototype,"url",void 0),c([p({readOnly:!0})],At.prototype,"userItemUrl",null),At=rg=c([N("esri.portal.PortalItem")],At);const r_=At;var VW=Object.freeze(Object.defineProperty({__proto__:null,default:r_},Symbol.toStringTag,{value:"Module"}));const k9=/^([a-z]{2})(?:[-_]([A-Za-z]{2}))?$/,Rde={ar:!0,bg:!0,bs:!0,ca:!0,cs:!0,da:!0,de:!0,el:!0,en:!0,es:!0,et:!0,fi:!0,fr:!0,he:!0,hr:!0,hu:!0,id:!0,it:!0,ja:!0,ko:!0,lt:!0,lv:!0,nb:!0,nl:!0,pl:!0,"pt-BR":!0,"pt-PT":!0,ro:!0,ru:!0,sk:!0,sl:!0,sr:!0,sv:!0,th:!0,tr:!0,uk:!0,vi:!0,"zh-CN":!0,"zh-HK":!0,"zh-TW":!0};function O9(e){var t;return(t=Rde[e])!=null&&t}const ib=[],y0=new Map;function P9(e){for(const t of y0.keys())zW(e.pattern,t)&&y0.delete(t)}function Lde(e){return ib.includes(e)||(P9(e),ib.unshift(e)),{remove(){const t=ib.indexOf(e);t>-1&&(ib.splice(t,1),P9(e))}}}async function UW(e){const t=Sa();y0.has(e)||y0.set(e,Dde(e,t));const r=y0.get(e);return await Fde.add(r),r}function Nde(e){if(!k9.test(e))return null;const[,t,r]=k9.exec(e),i=t+(r?"-"+r.toUpperCase():"");return O9(i)?i:O9(t)?t:null}async function Dde(e,t){const r=[];for(const i of ib)if(zW(i.pattern,e))try{return await i.fetchMessageBundle(e,t)}catch(n){r.push(n)}throw r.length?new Z("intl:message-bundle-error",`Errors occurred while loading "${e}"`,{errors:r}):new Z("intl:no-message-bundle-loader",`No loader found for message bundle "${e}"`)}function zW(e,t){return typeof e=="string"?t.startsWith(e):e.test(t)}ZL(()=>{y0.clear()});const Fde=new class{constructor(){this._numLoading=0}async waitForAll(){this._dfd&&await this._dfd.promise}add(e){return this._increase(),e.then(()=>this._decrease(),()=>this._decrease()),this.waitForAll()}_increase(){this._numLoading++,this._dfd||(this._dfd=ph())}_decrease(){this._numLoading=Math.max(this._numLoading-1,0),this._dfd&&this._numLoading===0&&(this._dfd.resolve(),this._dfd=null)}};async function jde(e){if(!e)return;const t=e.indexOf("-vector")>-1?e.slice(0,e.indexOf("-vector")):e,r=await UW("esri/t9n/basemaps");return r[e]||r[t]}const rC={streets:{id:"streets",classic:!0,deprecated:!0,get thumbnailUrl(){return Zt("esri/images/basemap/streets.jpg")},baseMapLayers:[{id:"streets-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Street Map",showLegend:!1,visibility:!0,opacity:1}]},satellite:{id:"satellite",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/satellite.jpg")},baseMapLayers:[{id:"satellite-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1}]},hybrid:{id:"hybrid",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/hybrid.jpg")},baseMapLayers:[{id:"hybrid-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Imagery",showLegend:!1,visibility:!0,opacity:1},{id:"hybrid-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Boundaries and Places",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},terrain:{id:"terrain",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/terrain.jpg")},baseMapLayers:[{id:"terrain-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Terrain Base",showLegend:!1,visibility:!0,opacity:1},{id:"terrain-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Reference Overlay",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},topo:{id:"topo",classic:!0,deprecated:!0,get thumbnailUrl(){return Zt("esri/images/basemap/topo.jpg")},baseMapLayers:[{id:"topo-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Topo Map",showLegend:!1,visibility:!0,opacity:1}]},gray:{id:"gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Zt("esri/images/basemap/gray.jpg")},baseMapLayers:[{id:"gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Light Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"dark-gray":{id:"dark-gray",classic:!0,deprecated:!0,get thumbnailUrl(){return Zt("esri/images/basemap/dark-gray.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Base",showLegend:!1,visibility:!0,opacity:1},{id:"dark-gray-reference-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Dark Gray Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},oceans:{id:"oceans",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/oceans.jpg")},baseMapLayers:[{id:"oceans-base-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Base",showLegend:!1,visibility:!0,opacity:1},{id:"oceans-reference-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Ocean Reference",isReference:!0,showLegend:!1,visibility:!0,opacity:1}]},"national-geographic":{id:"national-geographic",classic:!0,deprecated:!0,get thumbnailUrl(){return Zt("esri/images/basemap/national-geographic.jpg")},baseMapLayers:[{id:"national-geographic-base-layer",url:"//services.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer",title:"NatGeo World Map",showLegend:!1,layerType:"ArcGISTiledMapServiceLayer",visibility:!0,opacity:1}]},osm:{id:"osm",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/osm.jpg")},baseMapLayers:[{id:"osm-base-layer",layerType:"OpenStreetMap",title:"Open Street Map",showLegend:!1,visibility:!0,opacity:1}]},"dark-gray-vector":{id:"dark-gray-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/dark-gray-vector.jpg")},baseMapLayers:[{id:"dark-gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/5e9b3685f4c24d8781073dd928ebda50/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Base",visibility:!0,opacity:1},{id:"dark-gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/747cb7a5329c478cbe6981076cc879c5/resources/styles/root.json",layerType:"VectorTileLayer",title:"Dark Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"gray-vector":{id:"gray-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/gray-vector.jpg")},baseMapLayers:[{id:"gray-base-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/291da5eab3a0412593b66d384379f89f/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Base",visibility:!0,opacity:1},{id:"gray-reference-layer",styleUrl:"https://cdn.arcgis.com/sharing/rest/content/items/1768e8369a214dfab4e2167d5c5f2454/resources/styles/root.json",layerType:"VectorTileLayer",title:"Light Gray Reference",isReference:!0,visibility:!0,opacity:1}]},"streets-vector":{id:"streets-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/streets-vector.jpg")},baseMapLayers:[{id:"streets-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/de26a3cf4cc9451298ea173c4b324736/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets",visibility:!0,opacity:1}]},"topo-vector":{id:"topo-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/topo-vector.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"topo-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/7dc6cea0b1764a1f9af2e679f642f0f5/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Topo",visibility:!0,opacity:1}]},"streets-night-vector":{id:"streets-night-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/streets-night.jpg")},baseMapLayers:[{id:"streets-night-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/86f556a2d1fd468181855a35e344567f/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Night",visibility:!0,opacity:1}]},"streets-relief-vector":{id:"streets-relief-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/streets-relief.jpg")},baseMapLayers:[{id:"world-hillshade-layer",url:"//services.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer",layerType:"ArcGISTiledMapServiceLayer",title:"World Hillshade",showLegend:!1,visibility:!0,opacity:1},{id:"streets-relief-vector-base-layer",styleUrl:"//www.arcgis.com/sharing/rest/content/items/b266e6d17fc345b498345613930fbd76/resources/styles/root.json",title:"World Streets Relief",layerType:"VectorTileLayer",visibility:!0,opacity:1}]},"streets-navigation-vector":{id:"streets-navigation-vector",classic:!0,get thumbnailUrl(){return Zt("esri/images/basemap/streets-navigation.jpg")},baseMapLayers:[{id:"streets-navigation-vector-base-layer",styleUrl:"//cdn.arcgis.com/sharing/rest/content/items/63c47b7177f946b49902c24129b87252/resources/styles/root.json",layerType:"VectorTileLayer",title:"World Streets Navigation",visibility:!0,opacity:1}]},"arcgis-imagery":{get thumbnailUrl(){return Zt("esri/images/basemap/hybrid.jpg")},title:"Imagery Hybrid",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-imagery-standard":{get thumbnailUrl(){return Zt("esri/images/basemap/satellite.jpg")},title:"Imagery",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Imagery",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/World_Imagery/MapServer"}]},"arcgis-imagery-labels":{title:"Hybrid [Reference]",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Imagery:Labels",title:"Hybrid Reference Layer",isReference:!0}]},"arcgis-light-gray":{get thumbnailUrl(){return Zt("esri/images/basemap/gray-vector.jpg")},title:"Light Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Base",title:"Light Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:LightGray:Labels",title:"Light Gray Canvas Labels",isReference:!0}]},"arcgis-dark-gray":{get thumbnailUrl(){return Zt("esri/images/basemap/dark-gray.jpg")},title:"Dark Gray Canvas",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Base",title:"Dark Gray Canvas Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:DarkGray:Labels",title:"Dark Gray Canvas Labels",isReference:!0}]},"arcgis-navigation":{get thumbnailUrl(){return Zt("esri/images/basemap/streets-navigation.jpg")},title:"Navigation",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Navigation",title:"World Navigation Map"}]},"arcgis-navigation-night":{title:"Navigation (Dark Mode)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:NavigationNight",title:"World Navigation Map (Dark Mode)"}]},"arcgis-streets":{get thumbnailUrl(){return Zt("esri/images/basemap/streets-vector.jpg")},title:"Streets",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Streets",title:"World Street Map"}]},"arcgis-streets-night":{get thumbnailUrl(){return Zt("esri/images/basemap/streets-night.jpg")},title:"Streets (Night)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsNight",title:"World Street Map (Night)"}]},"arcgis-streets-relief":{get thumbnailUrl(){return Zt("esri/images/basemap/streets-relief.jpg")},title:"Streets (with Relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:StreetsRelief:Base",title:"World Street Map (with Relief)"}]},"arcgis-topographic":{get thumbnailUrl(){return Zt("esri/images/basemap/topo.jpg")},title:"Topographic",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Topographic:Base",title:"World Topographic Map"}]},"arcgis-oceans":{get thumbnailUrl(){return Zt("esri/images/basemap/oceans.jpg")},title:"Oceans",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Ocean Base",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Oceans:Labels",title:"World Ocean Reference",isReference:!0}]},"osm-standard":{title:"OpenStreetMap",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Standard",title:"OpenStreetMap"}]},"osm-standard-relief":{title:"OpenStreetMap (with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StandardRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-streets":{title:"OpenStreetMap (Streets)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:Streets",title:"OpenStreetMap (Streets)"}]},"osm-streets-relief":{title:"OpenStreetMap (Streets with relief)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:StreetsRelief:Base",layerType:"VectorTileLayer",title:"OpenStreetMap Relief Base"}]},"osm-light-gray":{title:"OpenStreetMap (Light Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Base",title:"OSM (Light Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:LightGray:Labels",title:"OSM (Light Gray Reference)",isReference:!0}]},"osm-dark-gray":{title:"OpenStreetMap (Dark Gray Canvas)",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Base",title:"OSM (Dark Gray Base)"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/OSM:DarkGray:Labels",title:"OSM (Dark Gray Reference)",isReference:!0}]},"arcgis-terrain":{title:"Terrain with Labels",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Base",title:"World Terrain Base"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Terrain:Detail",title:"World Terrain Reference",isReference:!0}]},"arcgis-community":{title:"Community",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Community",title:"Community"}]},"arcgis-charted-territory":{title:"Charted Territory",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ChartedTerritory:Base",title:"Charted Territory"}]},"arcgis-colored-pencil":{title:"Colored Pencil",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ColoredPencil",title:"Colored Pencil"}]},"arcgis-nova":{title:"Nova",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Nova",title:"Nova"}]},"arcgis-modern-antique":{title:"Modern Antique",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"},{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:ModernAntique:Base",title:"Modern Antique"}]},"arcgis-midcentury":{title:"Mid-Century",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Midcentury",title:"Mid-Century"}]},"arcgis-newspaper":{title:"Newspaper",baseMapLayers:[{layerType:"VectorTileLayer",styleUrl:"https://basemaps-api.arcgis.com/arcgis/rest/services/styles/ArcGIS:Newspaper",title:"Newspaper"}]},"arcgis-hillshade-light":{title:"Hillshade",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer"}]},"arcgis-hillshade-dark":{title:"Hillshade (Dark)",baseMapLayers:[{layerType:"ArcGISTiledMapServiceLayer",showLegend:!1,title:"World Hillshade (Dark)",url:"https://ibasemaps-api.arcgis.com/arcgis/rest/services/Elevation/World_Hillshade_Dark/MapServer"}]}},Vde=new Set(["bing-maps","imagery","imagery-tile","map-image","open-street-map","tile","unknown","unsupported","vector-tile","web-tile","wms","wmts"]),Ude=new Set(["csv","feature","geo-rss","geojson","group","imagery","imagery-tile","kml","map-image","map-notes","ogc-feature","tile","unknown","unsupported","vector-tile","web-tile","wfs","wms","wmts"]);function zde(e){return e.layerContainerType==="basemap"?Vde:e.layerContainerType==="operational-layers"?Ude:null}function KL(e){return!(e.type!=="feature"||e.url||!e.source||e.source.type!=="memory")}function Bde(e,t){if(t.restrictedWebMapWriting){const r=zde(t);return!U(r)||r.has(e.type)&&!KL(e)}return!0}function Gde(e,t){if(KL(e)){const r=Ev("featureCollection.layers",t),i=r&&r[0]&&r[0].layerDefinition;i&&f4(e,i)}else e.type==="stream"?f4(e,t.layerDefinition=t.layerDefinition||{}):e.type!=="group"&&f4(e,t)}function f4(e,t){"maxScale"in e&&(t.maxScale=J3(e.maxScale)),"minScale"in e&&(t.minScale=J3(e.minScale))}function qde(e,t){if(Gde(e,t),"blendMode"in e&&(t.blendMode=e.blendMode,t.blendMode==="normal"&&delete t.blendMode),t.opacity=J3(e.opacity),t.title=e.title||"Layer",t.visibility=e.visible,"legendEnabled"in e&&e.type!=="wmts")if(KL(e)){const r=t.featureCollection;r&&(r.showLegend=e.legendEnabled)}else t.showLegend=e.legendEnabled}function R9(e,t,r){if(!("write"in e)||!e.write)return r&&r.messages&&r.messages.push(new Z("layer:unsupported",`Layers (${e.title}, ${e.id}) of type '${e.declaredClass}' cannot be persisted`,{layer:e})),null;if(Bde(e,r)){const i={};return e.write(i,r)?i:null}return U(t)&&qde(e,t=ie(t)),t}var QS;let Hde=0;const m4=Te.getLogger("esri.Basemap");let Qo=QS=class extends a2(Lo){constructor(e){super(e),this.id=null,this.portalItem=null,this.spatialReference=null,this.thumbnailUrl=null,this.title="Basemap",this.id=Date.now().toString(16)+"-basemap-"+Hde++,this.baseLayers=new Je,this.referenceLayers=new Je;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type==="elevation"&&m4.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a basemap layer and will therefore be ignored.`)},r=i=>{i.parent=null};this.baseLayers.on("after-add",i=>t(i.item)),this.referenceLayers.on("after-add",i=>t(i.item)),this.baseLayers.on("after-remove",i=>r(i.item)),this.referenceLayers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{m4.error("#load()",`Failed to load basemap (title: '${this.title}', id: '${this.id}')`,e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){var e;const t=this.baseLayers.removeAll();for(const i of t)i.destroy();const r=this.referenceLayers.removeAll();for(const i of r)i.destroy();this.baseLayers.destroy(),this.referenceLayers.destroy(),(e=this.portalItem)==null||e.destroy(),this.portalItem=null}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set baseLayers(e){this._set("baseLayers",Rm(e,this._get("baseLayers")))}_writeBaseLayers(e,t,r){const i=[];e&&(r={...r,layerContainerType:"basemap"},this.baseLayers.forEach(n=>{const s=R9(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);U(s)&&i.push(s)}),this.referenceLayers.forEach(n=>{const s=R9(n,r.webmap?r.webmap.getLayerJSONFromResourceInfo(n):null,r);U(s)&&(s.isReference=!0,i.push(s))})),t.baseMapLayers=i}set referenceLayers(e){this._set("referenceLayers",Rm(e,this._get("referenceLayers")))}writeTitle(e,t){t.title=e||"Basemap"}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return jL(this,e=>{e(this.baseLayers,this.referenceLayers)})}clone(){const e={id:this.id,title:this.title,portalItem:this.portalItem,baseLayers:this.baseLayers.slice(),referenceLayers:this.referenceLayers.slice()};return this.loaded&&(e.loadStatus="loaded"),new QS({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}write(e,t){return e=e||{},t&&t.origin||(t={origin:"web-map",...t}),super.write(e,t),!this.loaded&&this.resourceInfo&&this.resourceInfo.data.baseMapLayers&&(e.baseMapLayers=this.resourceInfo.data.baseMapLayers.map(r=>{const i=ie(r);return i.url&&_l(i.url)&&(i.url=`https:${i.url}`),i.templateUrl&&_l(i.templateUrl)&&(i.templateUrl=`https:${i.templateUrl}`),i})),e}async _loadFromSource(e){const{resourceInfo:t,portalItem:r}=this;$r(e);const i=[];if(t){const n=t.context?t.context.url:null;if(i.push(this._loadLayersFromJSON(t.data,n,e)),t.data.id&&!t.data.title){const s=t.data.id;i.push(jde(s).then(o=>{o&&this.read({title:o},t.context)}))}}else r&&i.push(this._loadFromItem(r,e));await Promise.all(i)}async _loadLayersFromJSON(e,t,r){const i=this.resourceInfo&&this.resourceInfo.context,n=this.portalItem&&this.portalItem.portal||i&&i.portal||null,s=i&&i.origin==="web-scene"?"web-scene":"web-map",{populateOperationalLayers:o}=await ae(()=>import("./layersCreator.a7491b53.js"),["assets/layersCreator.a7491b53.js","assets/lazyLayerLoader.b01d3002.js","assets/portalLayers.aa08137a.js","assets/layersLoader.0d4ab3a2.js","assets/jsonContext.c19e06f9.js"]),a=[];if($r(r),e.baseMapLayers&&Array.isArray(e.baseMapLayers)){const l={context:{origin:s,url:t,portal:n,layerContainerType:"basemap"},defaultLayerType:"DefaultTileLayer"},u=o(this.baseLayers,e.baseMapLayers.filter(d=>!d.isReference),l);a.push(u);const h=o(this.referenceLayers,e.baseMapLayers.filter(d=>d.isReference),l);a.push(h)}await Zs(a)}async _loadFromItem(e,t){const r=await e.load(t),i=await r.fetchData("json",t),n=Kr(e.itemUrl);return this._set("resourceInfo",{data:i.baseMap,context:{origin:"web-map",portal:e.portal||ms.getDefault(),url:n}}),this.read(this.resourceInfo.data,this.resourceInfo.context),this.read({spatialReference:i.spatialReference},this.resourceInfo.context),this.read({title:e.title,thumbnailUrl:e.thumbnailUrl},{origin:"portal-item",portal:e.portal||ms.getDefault(),url:n}),this._loadLayersFromJSON(this.resourceInfo.data,n,t)}static fromId(e){const t=rC[e];if(t){if(t.deprecated){let r=null;e==="dark-gray"?r="dark-gray-vector":e==="gray"?r="gray-vector":e==="streets"?r="streets-vector":e==="topo"&&(r="topo-vector"),RT(m4,`The ${e} basemap has entered mature support and is no longer being updated.`,{replacement:r,see:"https://arcg.is/1iq8aD",warnOnce:!0})}return QS.fromJSON(t)}return null}};c([p({json:{write:{ignoreOrigin:!0,target:"baseMapLayers",writer(e,t,r,i){this._writeBaseLayers(e,t,i)}},origins:{"web-scene":{write:{ignoreOrigin:!0,target:{baseMapLayers:{type:Je}},writer(e,t,r,i){this._writeBaseLayers(e,t,i)}}}}}})],Qo.prototype,"baseLayers",null),c([p({type:String,json:{origins:{"web-scene":{write:!0}}}})],Qo.prototype,"id",void 0),c([p({type:r_})],Qo.prototype,"portalItem",void 0),c([p()],Qo.prototype,"referenceLayers",null),c([p({readOnly:!0})],Qo.prototype,"resourceInfo",void 0),c([p({type:Fe})],Qo.prototype,"spatialReference",void 0),c([p()],Qo.prototype,"thumbnailUrl",void 0),c([p({type:String,json:{origins:{"web-scene":{write:{isRequired:!0}}}}})],Qo.prototype,"title",void 0),c([Se("title")],Qo.prototype,"writeTitle",null),Qo=QS=c([N("esri.Basemap")],Qo);const Vm=Qo;var Wde=Object.freeze(Object.defineProperty({__proto__:null,default:Vm},Symbol.toStringTag,{value:"Module"}));const eI={transparent:[0,0,0,0],black:[0,0,0,1],silver:[192,192,192,1],gray:[128,128,128,1],white:[255,255,255,1],maroon:[128,0,0,1],red:[255,0,0,1],purple:[128,0,128,1],fuchsia:[255,0,255,1],green:[0,128,0,1],lime:[0,255,0,1],olive:[128,128,0,1],yellow:[255,255,0,1],navy:[0,0,128,1],blue:[0,0,255,1],teal:[0,128,128,1],aqua:[0,255,255,1],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],blanchedalmond:[255,235,205,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],oldlace:[253,245,230,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],rebeccapurple:[102,51,153,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],whitesmoke:[245,245,245,1],yellowgreen:[154,205,50,1]};function BW(e){return eI[e]||eI[e.toLowerCase()]}function XL(e){var t;return(t=eI[e])!=null?t:eI[e.toLowerCase()]}function Jde(e){return[...XL(e)]}function y4(e,t,r){r<0&&++r,r>1&&--r;const i=6*r;return i<1?e+(t-e)*i:2*r<1?t:3*r<2?e+(t-e)*(2/3-r)*6:e}function GW(e,t,r,i=1){const n=(e%360+360)%360/360,s=r<=.5?r*(t+1):r+t-r*t,o=2*r-s;return[Math.round(255*y4(o,s,n+1/3)),Math.round(255*y4(o,s,n)),Math.round(255*y4(o,s,n-1/3)),i]}function Zde(e){const t=e.length>5,r=t?8:4,i=(1<<r)-1,n=t?1:17,s=t?e.length===9:e.length===5;let o=Number("0x"+e.substr(1));if(isNaN(o))return null;const a=[0,0,0,1];let l;return s&&(l=o&i,o>>=r,a[3]=n*l/255),l=o&i,o>>=r,a[2]=n*l,l=o&i,o>>=r,a[1]=n*l,l=o&i,o>>=r,a[0]=n*l,a}function to(){return[0,0,0]}function Yde(e){return[e[0],e[1],e[2]]}function Lv(e,t,r){return[e,t,r]}function Kde(e){const t=to(),r=Math.min(3,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function Xde(e,t){return new Float64Array(e,t,3)}function qW(){return to()}function HW(){return Lv(1,1,1)}function WW(){return Lv(1,0,0)}function JW(){return Lv(0,1,0)}function ZW(){return Lv(0,0,1)}const Qde=qW(),YW=HW(),epe=WW(),tpe=JW(),rpe=ZW();Object.freeze({__proto__:null,create:to,clone:Yde,fromValues:Lv,fromArray:Kde,createView:Xde,zeros:qW,ones:HW,unitX:WW,unitY:JW,unitZ:ZW,ZEROS:Qde,ONES:YW,UNIT_X:epe,UNIT_Y:tpe,UNIT_Z:rpe});const mt=1e-6,Ld=Math.random,ipe=Math.PI/180,npe=180/Math.PI;function i_(e){return e*ipe}function iC(e){return e*npe}function spe(e,t){return Math.abs(e-t)<=mt*Math.max(1,Math.abs(e),Math.abs(t))}Object.freeze({__proto__:null,EPSILON:mt,RANDOM:Ld,toRadian:i_,toDegree:iC,equals:spe});function QL(e){const t=e[0],r=e[1],i=e[2];return Math.sqrt(t*t+r*r+i*i)}function tI(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function KW(e,t,r,i){return e[0]=t,e[1]=r,e[2]=i,e}function XW(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e}function dw(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function QW(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e}function eJ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e}function ope(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function ape(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function lpe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e}function upe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e}function cpe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function eN(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e}function hpe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e}function tJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return Math.sqrt(r*r+i*i+n*n)}function rJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2];return r*r+i*i+n*n}function iJ(e){const t=e[0],r=e[1],i=e[2];return t*t+r*r+i*i}function dpe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function ppe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function nC(e,t){const r=t[0],i=t[1],n=t[2];let s=r*r+i*i+n*n;return s>0&&(s=1/Math.sqrt(s),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s),e}function rI(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function fpe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2];return e[0]=n*l-s*a,e[1]=s*o-i*l,e[2]=i*a-n*o,e}function mpe(e,t,r,i){const n=t[0],s=t[1],o=t[2];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e}function ype(e,t,r,i,n,s){const o=s*s,a=o*(2*s-3)+1,l=o*(s-2)+s,u=o*(s-1),h=o*(3-2*s);return e[0]=t[0]*a+r[0]*l+i[0]*u+n[0]*h,e[1]=t[1]*a+r[1]*l+i[1]*u+n[1]*h,e[2]=t[2]*a+r[2]*l+i[2]*u+n[2]*h,e}function gpe(e,t,r,i,n,s){const o=1-s,a=o*o,l=s*s,u=a*o,h=3*s*a,d=3*l*o,f=l*s;return e[0]=t[0]*u+r[0]*h+i[0]*d+n[0]*f,e[1]=t[1]*u+r[1]*h+i[1]*d+n[1]*f,e[2]=t[2]*u+r[2]*h+i[2]*d+n[2]*f,e}function vpe(e,t){t=t||1;const r=2*Ld()*Math.PI,i=2*Ld()-1,n=Math.sqrt(1-i*i)*t;return e[0]=Math.cos(r)*n,e[1]=Math.sin(r)*n,e[2]=i*t,e}function bpe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12],e[1]=r[1]*i+r[5]*n+r[9]*s+r[13],e[2]=r[2]*i+r[6]*n+r[10]*s+r[14],e}function wpe(e,t,r){const i=t[0],n=t[1],s=t[2];return e[0]=i*r[0]+n*r[3]+s*r[6],e[1]=i*r[1]+n*r[4]+s*r[7],e[2]=i*r[2]+n*r[5]+s*r[8],e}function _pe(e,t,r){const i=r[0],n=r[1],s=r[2],o=r[3],a=t[0],l=t[1],u=t[2];let h=n*u-s*l,d=s*a-i*u,f=i*l-n*a,m=n*f-s*d,g=s*h-i*f,b=i*d-n*h;const w=2*o;return h*=w,d*=w,f*=w,m*=2,g*=2,b*=2,e[0]=a+h+m,e[1]=l+d+g,e[2]=u+f+b,e}function xpe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0],s[1]=n[1]*Math.cos(i)-n[2]*Math.sin(i),s[2]=n[1]*Math.sin(i)+n[2]*Math.cos(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Spe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[2]*Math.sin(i)+n[0]*Math.cos(i),s[1]=n[1],s[2]=n[2]*Math.cos(i)-n[0]*Math.sin(i),e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Mpe(e,t,r,i){const n=[],s=[];return n[0]=t[0]-r[0],n[1]=t[1]-r[1],n[2]=t[2]-r[2],s[0]=n[0]*Math.cos(i)-n[1]*Math.sin(i),s[1]=n[0]*Math.sin(i)+n[1]*Math.cos(i),s[2]=n[2],e[0]=s[0]+r[0],e[1]=s[1]+r[1],e[2]=s[2]+r[2],e}function Ipe(e,t){tI(gx,e),tI(vx,t),nC(gx,gx),nC(vx,vx);const r=rI(gx,vx);return r>1?0:r<-1?Math.PI:Math.acos(r)}const gx=to(),vx=to();function Tpe(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function $pe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Epe(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=t[0],o=t[1],a=t[2];return Math.abs(r-s)<=mt*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(i-o)<=mt*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(n-a)<=mt*Math.max(1,Math.abs(n),Math.abs(a))}function Ape(e,t,r){const i=r[0]-t[0],n=r[1]-t[1],s=r[2]-t[2];let o=i*i+n*n+s*s;return o>0?(o=1/Math.sqrt(o),e[0]=i*o,e[1]=n*o,e[2]=s*o,e):(e[0]=0,e[1]=0,e[2]=0,e)}const Cpe=dw,kpe=QW,Ope=eJ,Ppe=tJ,Rpe=rJ,Lpe=QL,Npe=iJ;Object.freeze({__proto__:null,length:QL,copy:tI,set:KW,add:XW,subtract:dw,multiply:QW,divide:eJ,ceil:ope,floor:ape,min:lpe,max:upe,round:cpe,scale:eN,scaleAndAdd:hpe,distance:tJ,squaredDistance:rJ,squaredLength:iJ,negate:dpe,inverse:ppe,normalize:nC,dot:rI,cross:fpe,lerp:mpe,hermite:ype,bezier:gpe,random:vpe,transformMat4:bpe,transformMat3:wpe,transformQuat:_pe,rotateX:xpe,rotateY:Spe,rotateZ:Mpe,angle:Ipe,str:Tpe,exactEquals:$pe,equals:Epe,direction:Ape,sub:Cpe,mul:kpe,div:Ope,dist:Ppe,sqrDist:Rpe,len:Lpe,sqrLen:Npe});function Dpe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Fpe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}function jpe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function nJ(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e}function sJ(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e[2]=t[2]*r[2],e[3]=t[3]*r[3],e}function oJ(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e[2]=t[2]/r[2],e[3]=t[3]/r[3],e}function Vpe(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e[3]=Math.ceil(t[3]),e}function Upe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e[3]=Math.floor(t[3]),e}function zpe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e[2]=Math.min(t[2],r[2]),e[3]=Math.min(t[3],r[3]),e}function Bpe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e[2]=Math.max(t[2],r[2]),e[3]=Math.max(t[3],r[3]),e}function Gpe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e[3]=Math.round(t[3]),e}function qpe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function Hpe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e}function aJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return Math.sqrt(r*r+i*i+n*n+s*s)}function lJ(e,t){const r=t[0]-e[0],i=t[1]-e[1],n=t[2]-e[2],s=t[3]-e[3];return r*r+i*i+n*n+s*s}function uJ(e){const t=e[0],r=e[1],i=e[2],n=e[3];return Math.sqrt(t*t+r*r+i*i+n*n)}function cJ(e){const t=e[0],r=e[1],i=e[2],n=e[3];return t*t+r*r+i*i+n*n}function Wpe(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Jpe(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e[3]=1/t[3],e}function Zpe(e,t){const r=t[0],i=t[1],n=t[2],s=t[3];let o=r*r+i*i+n*n+s*s;return o>0&&(o=1/Math.sqrt(o),e[0]=r*o,e[1]=i*o,e[2]=n*o,e[3]=s*o),e}function Ype(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Kpe(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e[2]=o+i*(r[2]-o),e[3]=a+i*(r[3]-a),e}function Xpe(e,t){let r,i,n,s,o,a;t=t||1;do r=2*Ld()-1,i=2*Ld()-1,o=r*r+i*i;while(o>=1);do n=2*Ld()-1,s=2*Ld()-1,a=n*n+s*s;while(a>=1);const l=Math.sqrt((1-o)/a);return e[0]=t*r,e[1]=t*i,e[2]=t*n*l,e[3]=t*s*l,e}function Qpe(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3];return e[0]=r[0]*i+r[4]*n+r[8]*s+r[12]*o,e[1]=r[1]*i+r[5]*n+r[9]*s+r[13]*o,e[2]=r[2]*i+r[6]*n+r[10]*s+r[14]*o,e[3]=r[3]*i+r[7]*n+r[11]*s+r[15]*o,e}function efe(e,t,r){const i=t[0],n=t[1],s=t[2],o=r[0],a=r[1],l=r[2],u=r[3],h=u*i+a*s-l*n,d=u*n+l*i-o*s,f=u*s+o*n-a*i,m=-o*i-a*n-l*s;return e[0]=h*u+m*-o+d*-l-f*-a,e[1]=d*u+m*-a+f*-o-h*-l,e[2]=f*u+m*-l+h*-a-d*-o,e[3]=t[3],e}function tfe(e){return"vec4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+")"}function rfe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]}function ife(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=t[0],a=t[1],l=t[2],u=t[3];return Math.abs(r-o)<=mt*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(i-a)<=mt*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(n-l)<=mt*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(s-u)<=mt*Math.max(1,Math.abs(s),Math.abs(u))}const nfe=nJ,sfe=sJ,ofe=oJ,afe=aJ,lfe=lJ,ufe=uJ,cfe=cJ;Object.freeze({__proto__:null,copy:Dpe,set:Fpe,add:jpe,subtract:nJ,multiply:sJ,divide:oJ,ceil:Vpe,floor:Upe,min:zpe,max:Bpe,round:Gpe,scale:qpe,scaleAndAdd:Hpe,distance:aJ,squaredDistance:lJ,length:uJ,squaredLength:cJ,negate:Wpe,inverse:Jpe,normalize:Zpe,dot:Ype,lerp:Kpe,random:Xpe,transformMat4:Qpe,transformQuat:efe,str:tfe,exactEquals:rfe,equals:ife,sub:nfe,mul:sfe,div:ofe,dist:afe,sqrDist:lfe,len:ufe,sqrLen:cfe});const L9=new Float32Array(1);function gtt(e){--e;for(let t=1;t<32;t<<=1)e|=e>>t;return e+1}function xl(e,t,r){return Math.min(Math.max(e,t),r)}function vtt(e){return(e&e-1)==0}function btt(e){return e--,e|=e>>1,e|=e>>2,e|=e>>4,e|=e>>8,e|=e>>16,++e}function wtt(e,t,r){return e+(t-e)*r}function Yg(e){return e*Math.PI/180}function hJ(e){return 180*e/Math.PI}function _tt(e){return Math.acos(xl(e,-1,1))}function dJ(e){return Math.asin(xl(e,-1,1))}function hfe(e,t,r=1e-6){if(isNaN(e)||isNaN(t))return!1;if(e===t)return!0;const i=Math.abs(e-t),n=Math.abs(e),s=Math.abs(t);if(e===0||t===0||n<1e-12&&s<1e-12){if(i>.01*r)return!1}else if(i/(n+s)>r)return!1;return!0}function g4(e,t,r=1e-6){return isNaN(e)||isNaN(t)?!1:(e>t?e-t:t-e)<=r}function sC(e){return pJ(Math.max(-oC,Math.min(e,oC)))}function pJ(e){return L9[0]=e,L9[0]}function xtt(e,t){const r=QL(e),i=dJ(e[2]/r),n=Math.atan2(e[1]/r,e[0]/r);return KW(t,r,i,n),t}const oC=pJ(34028234663852886e22);function bx(e){return xl(GT(e),0,255)}function wx(e,t,r){return e=Number(e),isNaN(e)?r:e<t?t:e>r?r:e}class Le{constructor(t){this.r=255,this.g=255,this.b=255,this.a=1,t&&this.setColor(t)}static blendColors(t,r,i,n=new Le){return n.r=Math.round(t.r+(r.r-t.r)*i),n.g=Math.round(t.g+(r.g-t.g)*i),n.b=Math.round(t.b+(r.b-t.b)*i),n.a=t.a+(r.a-t.a)*i,n._sanitize()}static fromRgb(t,r){const i=t.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(i){const n=i[2].split(/\s*,\s*/),s=i[1];if(s==="rgb"&&n.length===3||s==="rgba"&&n.length===4){const o=n[0];if(o.charAt(o.length-1)==="%"){const a=n.map(l=>2.56*parseFloat(l));return n.length===4&&(a[3]=parseFloat(n[3])),Le.fromArray(a,r)}return Le.fromArray(n.map(a=>parseFloat(a)),r)}if(s==="hsl"&&n.length===3||s==="hsla"&&n.length===4)return Le.fromArray(GW(parseFloat(n[0]),parseFloat(n[1])/100,parseFloat(n[2])/100,parseFloat(n[3])),r)}return null}static fromHex(t,r=new Le){if(t.length!==4&&t.length!==7||t[0]!=="#")return null;const i=t.length===4?4:8,n=(1<<i)-1;let s=Number("0x"+t.substr(1));return isNaN(s)?null:(["b","g","r"].forEach(o=>{const a=s&n;s>>=i,r[o]=i===4?17*a:a}),r.a=1,r)}static fromArray(t,r=new Le){return r._set(Number(t[0]),Number(t[1]),Number(t[2]),Number(t[3])),isNaN(r.a)&&(r.a=1),r._sanitize()}static fromString(t,r){const i=BW(t)?XL(t):null;return i&&Le.fromArray(i,r)||Le.fromRgb(t,r)||Le.fromHex(t,r)}static fromJSON(t){return t&&new Le([t[0],t[1],t[2],t[3]/255])}static toUnitRGB(t){return U(t)?[t.r/255,t.g/255,t.b/255]:null}static toUnitRGBA(t){return U(t)?[t.r/255,t.g/255,t.b/255,t.a!=null?t.a:1]:null}get isBright(){return .299*this.r+.587*this.g+.114*this.b>=127}setColor(t){if(typeof t=="string")Le.fromString(t,this);else if(Array.isArray(t))Le.fromArray(t,this);else{var r,i,n,s;this._set((r=t.r)!=null?r:0,(i=t.g)!=null?i:0,(n=t.b)!=null?n:0,(s=t.a)!=null?s:1),t instanceof Le||this._sanitize()}return this}toRgb(){return[this.r,this.g,this.b]}toRgba(){return[this.r,this.g,this.b,this.a]}toHex(){const t=this.r.toString(16),r=this.g.toString(16),i=this.b.toString(16);return`#${t.length<2?"0"+t:t}${r.length<2?"0"+r:r}${i.length<2?"0"+i:i}`}toCss(t=!1){const r=this.r+", "+this.g+", "+this.b;return t?`rgba(${r}, ${this.a})`:`rgb(${r})`}toString(){return this.toCss(!0)}toJSON(){return this.toArray()}toArray(t=0){const r=bx(this.r),i=bx(this.g),n=bx(this.b);return t===0||this.a!==1?[r,i,n,bx(255*this.a)]:[r,i,n]}clone(){return new Le(this.toRgba())}hash(){return this.r<<24|this.g<<16|this.b<<8|255*this.a}_sanitize(){return this.r=Math.round(wx(this.r,0,255)),this.g=Math.round(wx(this.g,0,255)),this.b=Math.round(wx(this.b,0,255)),this.a=wx(this.a,0,1),this}_set(t,r,i,n){this.r=t,this.g=r,this.b=i,this.a=n}}Le.prototype.declaredClass="esri.Color";function D0(e,t,r=!1){let{hasM:i,hasZ:n}=e;Array.isArray(t)?t.length!==4||i||n?t.length===3&&r&&!i?(n=!0,i=!1):t.length===3&&i&&n&&(i=!1,n=!1):(i=!0,n=!0):(n=!n&&t.hasZ&&(!i||t.hasM),i=!i&&t.hasM&&(!n||t.hasZ)),e.hasZ=n,e.hasM=i}var aC;function N9(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}function dfe(e){return e&&(e.declaredClass==="esri.geometry.SpatialReference"||e.wkid!=null)}let ed=aC=class extends Xs{constructor(...e){super(...e),this.points=[],this.type="multipoint"}normalizeCtorArgs(e,t){if(!e&&!t)return null;const r={};Array.isArray(e)?(r.points=e,r.spatialReference=t):dfe(e)?r.spatialReference=e:(e.points&&(r.points=e.points),e.spatialReference&&(r.spatialReference=e.spatialReference),e.hasZ&&(r.hasZ=e.hasZ),e.hasM&&(r.hasM=e.hasM));const i=r.points&&r.points[0];return i&&(r.hasZ===void 0&&r.hasM===void 0?(r.hasZ=i.length>2,r.hasM=!1):r.hasZ===void 0?r.hasZ=i.length>3:r.hasM===void 0&&(r.hasM=i.length>3)),r}get cache(){return this.commitProperty("points"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const e=this.points;if(!e.length)return null;const t=new nt,r=this.hasZ,i=this.hasM,n=r?3:2,s=e[0],o=N9(Math.min),a=N9(Math.max);let l,u,h,d,[f,m]=s,[g,b]=s;for(let w=0,_=e.length;w<_;w++){const x=e[w],[I,S]=x;if(f=o(f,I),m=o(m,S),g=a(g,I),b=a(b,S),r&&x.length>2){const T=x[2];l=o(l,T),h=a(h,T)}if(i&&x.length>n){const T=x[n];u=o(u,T),d=a(d,T)}}return t.xmin=f,t.ymin=m,t.xmax=g,t.ymax=b,t.spatialReference=this.spatialReference,r?(t.zmin=l,t.zmax=h):(t.zmin=null,t.zmax=null),i?(t.mmin=u,t.mmax=d):(t.mmin=null,t.mmax=null),t}writePoints(e,t){t.points=ie(this.points)}addPoint(e){return D0(this,e),Array.isArray(e)?this.points.push(e):this.points.push(e.toArray()),this.notifyChange("points"),this}clone(){const e={points:ie(this.points),spatialReference:this.spatialReference};return this.hasZ&&(e.hasZ=!0),this.hasM&&(e.hasM=!0),new aC(e)}getPoint(e){if(!this._validateInputs(e))return null;const t=this.points[e],r={x:t[0],y:t[1],spatialReference:this.spatialReference};let i=2;return this.hasZ&&(r.z=t[2],i=3),this.hasM&&(r.m=t[i]),new Ke(r)}removePoint(e){if(!this._validateInputs(e))return null;const t=new Ke(this.points.splice(e,1)[0],this.spatialReference);return this.notifyChange("points"),t}setPoint(e,t){return this._validateInputs(e)?(D0(this,t),Array.isArray(t)||(t=t.toArray()),this.points[e]=t,this.notifyChange("points"),this):this}toJSON(e){return this.write({},e)}_validateInputs(e){return e!=null&&e>=0&&e<this.points.length}};c([p({readOnly:!0})],ed.prototype,"cache",null),c([p()],ed.prototype,"extent",null),c([p({type:[[Number]],json:{write:{isRequired:!0}}})],ed.prototype,"points",void 0),c([Se("points")],ed.prototype,"writePoints",null),ed=aC=c([N("esri.geometry.Multipoint")],ed),ed.prototype.toJSON.isDefaultToJSON=!0;const xp=ed;function pfe(e,t){const r=t[0]-e[0],i=t[1]-e[1];if(e.length>2&&t.length>2){const n=e[2]-t[2];return Math.sqrt(r*r+i*i+n*n)}return Math.sqrt(r*r+i*i)}function ffe(e,t,r){const i=e[0]+r*(t[0]-e[0]),n=e[1]+r*(t[1]-e[1]);return e.length>2&&t.length>2?[i,n,e[2]+r*(t[2]-e[2])]:[i,n]}function mfe(e,t,r,i){const[n,s]=t,[o,a]=r[i],[l,u]=r[i+1],h=l-o,d=u-a,f=h*h+d*d,m=(n-o)*h+(s-a)*d,g=Math.min(1,Math.max(0,m/f));return e[0]=o+h*g,e[1]=a+d*g,e}function yfe(e,t){return ffe(e,t,.5)}function tN(e,t,r){const i=e.length;let n=0,s=0,o=0;for(let a=0;a<i;a++){const l=e[a],u=e[(a+1)%i];let h=2;n+=l[0]*u[1]-u[0]*l[1],l.length>2&&u.length>2&&r&&(s+=l[0]*u[2]-u[0]*l[2],h=3),l.length>h&&u.length>h&&t&&(o+=l[0]*u[h]-u[0]*l[h])}return n<=0&&s<=0&&o<=0}function Stt(e){if("rings"in e){for(const t of e.rings)t.length<3||t[0][0]===t[t.length-1][0]&&t[0][1]===t[t.length-1][1]||t.push([t[0][0],t[0][1]]);if(e.rings.length>0&&!tN(e.rings[0],e.hasM,e.hasZ))for(let t=0;t<e.rings.length;++t)e.rings[t]=e.rings[t].reverse()}}function gfe(e){return e?vfe(e.rings,e.hasZ):null}function vfe(e,t){if(!e||!e.length)return null;const r=[],i=[],n=t?[1/0,-1/0,1/0,-1/0,1/0,-1/0]:[1/0,-1/0,1/0,-1/0];for(let s=0,o=e.length;s<o;s++){const a=bfe(e[s],t,n);a&&i.push(a)}if(i.sort((s,o)=>{let a=s[2]-o[2];return a===0&&t&&(a=s[4]-o[4]),a}),i.length&&(r[0]=i[0][0],r[1]=i[0][1],t&&(r[2]=i[0][3]),(r[0]<n[0]||r[0]>n[1]||r[1]<n[2]||r[1]>n[3]||t&&(r[2]<n[4]||r[2]>n[5]))&&(r.length=0)),!r.length){const s=e[0]&&e[0].length?wfe(e[0],t):null;if(!s)return null;r[0]=s[0],r[1]=s[1],t&&s.length>2&&(r[2]=s[2])}return r}function bfe(e,t,r){let i=0,n=0,s=0,o=0,a=0;const l=e.length?e[0][0]:0,u=e.length?e[0][1]:0,h=e.length&&t?e[0][2]:0;for(let f=0;f<e.length;f++){const m=e[f],g=e[(f+1)%e.length],[b,w,_]=m,x=b-l,I=w-u,S=t?_-h:void 0,[T,$,E]=g,C=T-l,O=$-u,R=t?E-h:void 0,D=x*O-C*I;if(o+=D,i+=(x+C)*D,n+=(I+O)*D,t&&m.length>2&&g.length>2){const F=x*R-C*S;s+=(S+R)*F,a+=F}b<r[0]&&(r[0]=b),b>r[1]&&(r[1]=b),w<r[2]&&(r[2]=w),w>r[3]&&(r[3]=w),t&&(_<r[4]&&(r[4]=_),_>r[5]&&(r[5]=_))}if(o>0&&(o*=-1),a>0&&(a*=-1),!o)return null;o*=.5,a*=.5;const d=[i/(6*o)+l,n/(6*o)+u,o];return t&&(r[4]===r[5]||a===0?(d[3]=(r[4]+r[5])/2,d[4]=0):(d[3]=s/(6*a)+h,d[4]=a)),d}function wfe(e,t){const r=t?[0,0,0]:[0,0],i=t?[0,0,0]:[0,0];let n=0,s=0,o=0,a=0;for(let l=0,u=e.length;l<u-1;l++){const h=e[l],d=e[l+1];if(h&&d){r[0]=h[0],r[1]=h[1],i[0]=d[0],i[1]=d[1],t&&h.length>2&&d.length>2&&(r[2]=h[2],i[2]=d[2]);const f=pfe(r,i);if(f){n+=f;const m=yfe(h,d);s+=f*m[0],o+=f*m[1],t&&m.length>2&&(a+=f*m[2])}}}return n>0?t?[s/n,o/n,a/n]:[s/n,o/n]:e.length?e[0]:null}function fJ(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function mJ(e){return e.points!==void 0}function yJ(e){return e.x!==void 0&&e.y!==void 0}function gJ(e){return e.paths!==void 0}function vJ(e){return e.rings!==void 0}function bJ(e){return(t,r)=>t==null?r:r==null?t:e(t,r)}const Nd=bJ(Math.min),Dd=bJ(Math.max);function Mtt(e,t){return gJ(t)?F0(e,t.paths,!1,!1):vJ(t)?F0(e,t.rings,!1,!1):mJ(t)?rN(e,t.points,!1,!1,!1,!1):fJ(t)?wJ(e,t):(yJ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.x,e[3]=t.y),e)}function Itt(e,t){return gJ(t)?F0(e,t.paths,!0,!1):vJ(t)?F0(e,t.rings,!0,!1):mJ(t)?rN(e,t.points,!0,!1,!0,!1):fJ(t)?wJ(e,t,!0,!1,!0,!1):(yJ(t)&&(e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.x,e[4]=t.y,e[5]=t.z),e)}function F0(e,t,r,i){const n=r?3:2;if(!t.length||!t[0].length)return null;let s,o,a,l,[u,h]=t[0][0],[d,f]=t[0][0];for(let m=0;m<t.length;m++){const g=t[m];for(let b=0;b<g.length;b++){const w=g[b],[_,x]=w;if(u=Nd(u,_),h=Nd(h,x),d=Dd(d,_),f=Dd(f,x),r&&w.length>2){const I=w[2];s=Nd(s,I),o=Dd(o,I)}if(i&&w.length>n){const I=w[n];a=Nd(s,I),l=Dd(o,I)}}}return r?i?(e[0]=u,e[1]=h,e[2]=s,e[3]=a,e[4]=d,e[5]=f,e[6]=o,e[7]=l,e.length=8,e):(e[0]=u,e[1]=h,e[2]=s,e[3]=d,e[4]=f,e[5]=o,e.length=6,e):i?(e[0]=u,e[1]=h,e[2]=a,e[3]=d,e[4]=f,e[5]=l,e.length=6,e):(e[0]=u,e[1]=h,e[2]=d,e[3]=f,e.length=4,e)}function wJ(e,t,r,i,n,s){const o=t.xmin,a=t.xmax,l=t.ymin,u=t.ymax;let h=t.zmin,d=t.zmax,f=t.mmin,m=t.mmax;return n?(h=h||0,d=d||0,s?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=h,e[3]=f,e[4]=a,e[5]=u,e[6]=d,e[7]=m,e):(e[0]=o,e[1]=l,e[2]=h,e[3]=a,e[4]=u,e[5]=d,e)):s?(f=f||0,m=m||0,e[0]=o,e[1]=l,e[2]=f,e[3]=a,e[4]=u,e[5]=m,e):(e[0]=o,e[1]=l,e[2]=a,e[3]=u,e)}function rN(e,t,r,i,n,s){const o=r?3:2,a=i&&s,l=r&&n;if(!t.length||!t[0].length)return null;let u,h,d,f,[m,g]=t[0],[b,w]=t[0];for(let _=0;_<t.length;_++){const x=t[_],[I,S]=x;if(m=Nd(m,I),g=Nd(g,S),b=Dd(b,I),w=Dd(w,S),l&&x.length>2){const T=x[2];u=Nd(u,T),h=Dd(h,T)}if(a&&x.length>o){const T=x[o];d=Nd(u,T),f=Dd(h,T)}}return n?(u=u||0,h=h||0,s?(d=d||0,f=f||0,e[0]=m,e[1]=g,e[2]=u,e[3]=d,e[4]=b,e[5]=w,e[6]=h,e[7]=f,e):(e[0]=m,e[1]=g,e[2]=u,e[3]=b,e[4]=w,e[5]=h,e)):s?(d=d||0,f=f||0,e[0]=m,e[1]=g,e[2]=d,e[3]=b,e[4]=w,e[5]=f,e):(e[0]=m,e[1]=g,e[2]=b,e[3]=w,e)}function _fe(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function xfe(e){return e.points!==void 0}function Sfe(e){return e.x!==void 0&&e.y!==void 0}function Mfe(e){return e.paths!==void 0}function Ife(e){return e.rings!==void 0}const iN=[];function _J(e,t,r,i){return{xmin:e,ymin:t,xmax:r,ymax:i}}function xJ(e,t,r,i,n,s){return{xmin:e,ymin:t,zmin:r,xmax:i,ymax:n,zmax:s}}function SJ(e,t,r,i,n,s){return{xmin:e,ymin:t,mmin:r,xmax:i,ymax:n,mmax:s}}function MJ(e,t,r,i,n,s,o,a){return{xmin:e,ymin:t,zmin:r,mmin:i,xmax:n,ymax:s,zmax:o,mmax:a}}function nN(e,t=!1,r=!1){return t?r?MJ(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]):xJ(e[0],e[1],e[2],e[3],e[4],e[5]):r?SJ(e[0],e[1],e[2],e[3],e[4],e[5]):_J(e[0],e[1],e[2],e[3])}function Ttt(e){return e?_fe(e)?e:Sfe(e)?$fe(e):Ife(e)?IJ(e):Mfe(e)?TJ(e):xfe(e)?Tfe(e):null:null}function Tfe(e){const{hasZ:t,hasM:r,points:i}=e;return nN(rN(iN,i,t,r),t,r)}function $fe(e){const{x:t,y:r,z:i,m:n}=e,s=n!=null;return i!=null?s?MJ(t,r,i,n,t,r,i,n):xJ(t,r,i,t,r,i):s?SJ(t,r,n,t,r,n):_J(t,r,t,r)}function IJ(e){const{hasZ:t,hasM:r,rings:i}=e,n=F0(iN,i,t,r);return n?nN(n,t,r):null}function TJ(e){const{hasZ:t,hasM:r,paths:i}=e,n=F0(iN,i,t,r);return n?nN(n,t,r):null}var eM;function D9(e){return!Array.isArray(e[0])}let Kl=eM=class extends Xs{constructor(...e){super(...e),this.rings=[],this.type="polygon"}static fromExtent(e){const t=e.clone().normalize(),r=e.spatialReference;let i=!1,n=!1;for(const o of t)o.hasZ&&(i=!0),o.hasM&&(n=!0);const s={rings:t.map(function(o){const a=[[o.xmin,o.ymin],[o.xmin,o.ymax],[o.xmax,o.ymax],[o.xmax,o.ymin],[o.xmin,o.ymin]];if(i&&o.hasZ){const l=o.zmin+.5*(o.zmax-o.zmin);for(let u=0;u<a.length;u++)a[u].push(l)}if(n&&o.hasM){const l=o.mmin+.5*(o.mmax-o.mmin);for(let u=0;u<a.length;u++)a[u].push(l)}return a}),spatialReference:r};return i&&(s.hasZ=!0),n&&(s.hasM=!0),new eM(s)}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.rings?e.rings:null,t||(e.spatialReference?t=e.spatialReference:e.rings||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Fe.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=s.length>3):r===void 0?r=i?s.length>3:s.length>2:i===void 0&&(i=r?s.length>3:s.length>2)),{rings:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("rings"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get centroid(){const e=gfe(this);if(!e||isNaN(e[0])||isNaN(e[1])||this.hasZ&&isNaN(e[2]))return null;const t=new Ke;return t.x=e[0],t.y=e[1],t.spatialReference=this.spatialReference,this.hasZ&&(t.z=e[2]),t}get extent(){const{spatialReference:e}=this,t=IJ(this);if(!t)return null;const r=new nt(t);return r.spatialReference=e,r}get isSelfIntersecting(){return wde(this.rings)}writeRings(e,t){t.rings=ie(this.rings)}addRing(e){if(!e)return;const t=this.rings,r=t.length;if(D9(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("rings"),this}clone(){const e=new eM;return e.spatialReference=this.spatialReference,e.rings=ie(this.rings),e.hasZ=this.hasZ,e.hasM=this.hasM,e}equals(e){if(this===e)return!0;if(ce(e))return!1;const t=this.spatialReference,r=e.spatialReference;if(U(t)!==U(r)||U(t)&&U(r)&&!t.equals(r)||this.rings.length!==e.rings.length)return!1;const i=([n,s,o,a],[l,u,h,d])=>n===l&&s===u&&(o==null&&h==null||o===h)&&(a==null&&d==null||a===d);for(let n=0;n<this.rings.length;n++){const s=this.rings[n],o=e.rings[n];if(!dH(s,o,i))return!1}return!0}contains(e){if(!e)return!1;const t=Vu(e,this.spatialReference);return LW(this,U(t)?t:e)}isClockwise(e){let t;return t=D9(e)?e.map(r=>this.hasZ?this.hasM?[r.x,r.y,r.z,r.m]:[r.x,r.y,r.z]:[r.x,r.y]):e,tN(t,this.hasM,this.hasZ)}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.rings[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Ke(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Ke(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Ke(r[0],r[1],r[2],r[3],this.spatialReference):new Ke(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(D0(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e].splice(t,0,r),this.notifyChange("rings"),this):this}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ke(this.rings[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("rings"),r}removeRing(e){if(!this._validateInputs(e,null))return null;const t=this.rings.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Ke(n,r));return this.notifyChange("rings"),i}setPoint(e,t,r){return this._validateInputs(e,t)?(D0(this,r),Array.isArray(r)||(r=r.toArray()),this.rings[e][t]=r,this.notifyChange("rings"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.rings.length)return!1;if(t!=null){const i=this.rings[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],Kl.prototype,"cache",null),c([p({readOnly:!0})],Kl.prototype,"centroid",null),c([p({readOnly:!0})],Kl.prototype,"extent",null),c([p({readOnly:!0})],Kl.prototype,"isSelfIntersecting",null),c([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],Kl.prototype,"rings",void 0),c([Se("rings")],Kl.prototype,"writeRings",null),Kl=eM=c([N("esri.geometry.Polygon")],Kl),Kl.prototype.toJSON.isDefaultToJSON=!0;const _n=Kl;var lC;function Efe(e){return!Array.isArray(e[0])}let td=lC=class extends Xs{constructor(...e){super(...e),this.paths=[],this.type="polyline"}normalizeCtorArgs(e,t){let r,i,n=null,s=null;return e&&!Array.isArray(e)?(n=e.paths?e.paths:null,t||(e.spatialReference?t=e.spatialReference:e.paths||(t=e)),r=e.hasZ,i=e.hasM):n=e,n=n||[],t=t||Fe.WGS84,n.length&&n[0]&&n[0][0]!=null&&typeof n[0][0]=="number"&&(n=[n]),s=n[0]&&n[0][0],s&&(r===void 0&&i===void 0?(r=s.length>2,i=!1):r===void 0?r=!i&&s.length>3:i===void 0&&(i=!r&&s.length>3)),{paths:n,spatialReference:t,hasZ:r,hasM:i}}get cache(){return this.commitProperty("paths"),this.commitProperty("hasZ"),this.commitProperty("hasM"),this.commitProperty("spatialReference"),{}}get extent(){const{spatialReference:e}=this,t=TJ(this);if(!t)return null;const r=new nt(t);return r.spatialReference=e,r}writePaths(e,t){t.paths=ie(this.paths)}addPath(e){if(!e)return;const t=this.paths,r=t.length;if(Efe(e)){const i=[];for(let n=0,s=e.length;n<s;n++)i[n]=e[n].toArray();t[r]=i}else t[r]=e.concat();return this.notifyChange("paths"),this}clone(){const e=new lC;return e.spatialReference=this.spatialReference,e.paths=ie(this.paths),e.hasZ=this.hasZ,e.hasM=this.hasM,e}getPoint(e,t){if(!this._validateInputs(e,t))return null;const r=this.paths[e][t],i=this.hasZ,n=this.hasM;return i&&!n?new Ke(r[0],r[1],r[2],void 0,this.spatialReference):n&&!i?new Ke(r[0],r[1],void 0,r[2],this.spatialReference):i&&n?new Ke(r[0],r[1],r[2],r[3],this.spatialReference):new Ke(r[0],r[1],this.spatialReference)}insertPoint(e,t,r){return this._validateInputs(e,t,!0)?(D0(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e].splice(t,0,r),this.notifyChange("paths"),this):this}removePath(e){if(!this._validateInputs(e,null))return null;const t=this.paths.splice(e,1)[0],r=this.spatialReference,i=t.map(n=>new Ke(n,r));return this.notifyChange("paths"),i}removePoint(e,t){if(!this._validateInputs(e,t))return null;const r=new Ke(this.paths[e].splice(t,1)[0],this.spatialReference);return this.notifyChange("paths"),r}setPoint(e,t,r){return this._validateInputs(e,t)?(D0(this,r),Array.isArray(r)||(r=r.toArray()),this.paths[e][t]=r,this.notifyChange("paths"),this):this}_validateInputs(e,t,r=!1){if(e==null||e<0||e>=this.paths.length)return!1;if(t!=null){const i=this.paths[e];if(r&&(t<0||t>i.length)||!r&&(t<0||t>=i.length))return!1}return!0}toJSON(e){return this.write({},e)}};c([p({readOnly:!0})],td.prototype,"cache",null),c([p({readOnly:!0})],td.prototype,"extent",null),c([p({type:[[[Number]]],json:{write:{isRequired:!0}}})],td.prototype,"paths",void 0),c([Se("paths")],td.prototype,"writePaths",null),td=lC=c([N("esri.geometry.Polyline")],td),td.prototype.toJSON.isDefaultToJSON=!0;const Vi=td;function $J(e){return e.xmin!==void 0&&e.ymin!==void 0&&e.xmax!==void 0&&e.ymax!==void 0}function sN(e){return e.points!==void 0}function oN(e){return e.x!==void 0&&e.y!==void 0}function aN(e){return e.paths!==void 0}function ym(e){return e.rings!==void 0}function Sr(e){return ce(e)?null:e instanceof Xs?e:oN(e)?Ke.fromJSON(e):aN(e)?Vi.fromJSON(e):ym(e)?_n.fromJSON(e):sN(e)?xp.fromJSON(e):$J(e)?nt.fromJSON(e):null}function Oi(e){return e?oN(e)?"esriGeometryPoint":aN(e)?"esriGeometryPolyline":ym(e)?"esriGeometryPolygon":$J(e)?"esriGeometryEnvelope":sN(e)?"esriGeometryMultipoint":null:null}const Afe={esriGeometryPoint:Ke,esriGeometryPolyline:Vi,esriGeometryPolygon:_n,esriGeometryEnvelope:nt,esriGeometryMultipoint:xp};function EJ(e){return e&&Afe[e]||null}const Cfe=li()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon"}),F9=li()({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh"}),xh={base:Xs,key:"type",typeMap:{extent:nt,multipoint:xp,point:Ke,polyline:Vi,polygon:_n}};ju(xh);var j0;function kfe(e,t){switch(e.type){case"range":{const r="range"in e?e.range[0]:e.minValue,i="range"in e?e.range[1]:e.maxValue;if(+t<r||+t>i)return j0.VALUE_OUT_OF_RANGE;break}case"coded-value":case"codedValue":if(e.codedValues==null||e.codedValues.every(r=>r==null||r.code!==t))return j0.INVALID_CODED_VALUE}return null}(function(e){e.VALUE_OUT_OF_RANGE="domain-validation-error::value-out-of-range",e.INVALID_CODED_VALUE="domain-validation-error::invalid-coded-value"})(j0||(j0={}));let v4;function mh(){return v4||(v4=(async()=>{const e=await ae(()=>import("./arcadeUtils.611ac886.js").then(function(t){return t.Q}),["assets/arcadeUtils.611ac886.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js"]);return{arcade:e.arcade,arcadeUtils:e,Dictionary:e.Dictionary,Feature:e.arcadeFeature}})()),v4}const $tt=(e,t,r)=>u2.create(e,t,r,null,["$feature"]),Ett=(e,t,r)=>u2.create(e,t,r,null,["$feature","$view"]),Ofe=(e,t,r,i)=>u2.create(e,t,r,i,["$feature","$view"]);class u2{constructor(t,r,i,n,s,o,a,l){this.script=t,this.evaluate=s;const u=Array.isArray(a)?a:a.fields;this.fields=u,this._syntaxTree=n,this._arcade=r,this._arcadeDictionary=i,this._arcadeFeature=o,this._spatialReference=l,this._referencesGeometry=r.scriptTouchesGeometry(this._syntaxTree),this._referencesScale=this._arcade.referencesMember(this._syntaxTree,"scale")}static async create(t,r,i,n,s,o){const{arcade:a,Feature:l,Dictionary:u}=await mh(),h=Fe.fromJSON(r),d=a.parseScript(t,o),f=s.reduce((T,$)=>({...T,[$]:null}),{});let m=null;U(n)&&(m=new u(n),m.immutable=!0,f.$config=null);const g=a.scriptUsesGeometryEngine(d)&&a.enableGeometrySupport(),b=a.scriptUsesFeatureSet(d)&&a.enableFeatureSetSupport(),w=a.scriptIsAsync(d)&&a.enableAsyncSupport(),_={vars:f,spatialReference:h,useAsync:!!w},x=new u;x.immutable=!1,x.setField("scale",0);const I=a.compileScript(d,_),S=T=>("$view"in T&&T.$view&&(x.setField("scale",T.$view.scale),T.$view=x),m&&(T.$config=m),I({vars:T,spatialReference:h}));return await Promise.all([g,b,w]),new u2(t,a,u,d,S,new l,i,h)}repurposeFeature(t){return t.geometry&&!t.geometry.spatialReference&&(t.geometry.spatialReference=this._spatialReference),this._arcadeFeature.repurposeFromGraphicLikeObject(t.geometry,t.attributes,{fields:this.fields}),this._arcadeFeature}repurposeAdapter(t){return this._arcadeFeature.repurposeFromAdapter(t,{fields:this.fields}),this._arcadeFeature}createDictionary(){return new this._arcadeDictionary}referencesMember(t){return this._arcade.referencesMember(this._syntaxTree,t)}referencesFunction(t){return this._arcade.referencesFunction(this._syntaxTree,t)}referencesGeometry(){return this._referencesGeometry}referencesScale(){return this._referencesScale}extractFieldLiterals(){return this._arcade.extractExpectedFieldLiterals(this._syntaxTree)}}const Pfe=["field","field2","field3","normalizationField","rotationInfo.field","proportionalSymbolInfo.field","proportionalSymbolInfo.normalizationField","colorInfo.field","colorInfo.normalizationField"],Rfe=["field","normalizationField"];function j9(e,t){if(e!=null&&t!=null){for(const r of Array.isArray(e)?e:[e])if(V9(Pfe,r,t),"visualVariables"in r&&r.visualVariables)for(const i of r.visualVariables)V9(Rfe,i,t)}}function V9(e,t,r){if(e)for(const i of e){const n=Ev(i,t),s=n&&typeof n!="function"&&r.get(n);s&&Ro(i,s.name,t)}}function AJ(e,t){if(e!=null&&t!=null&&t.fields.length)if("startField"in e){const r=t.get(e.startField),i=t.get(e.endField);e.startField=r&&r.name||null,e.endField=i&&i.name||null}else{const r=t.get(e.startTimeField),i=t.get(e.endTimeField);e.startTimeField=r&&r.name||null,e.endTimeField=i&&i.name||null}}const b4=new Set;function CJ(e,t){return e&&t?(b4.clear(),n_(b4,e,t),Array.from(b4).sort()):[]}function n_(e,t,r){var i;if(r)if(t!=null&&(i=t.fields)!=null&&i.length)if(r.includes("*"))for(const{name:n}of t.fields)e.add(n);else for(const n of r)wa(e,t,n);else{if(r.includes("*"))return e.clear(),void e.add("*");for(const n of r)e.add(n)}}function wa(e,t,r){if(typeof r=="string")if(t){const i=t.get(r);i&&e.add(i.name)}else e.add(r)}function Att(e,t){return ce(t)||ce(e)?[]:t.includes("*")?e.fields.map(r=>r.name):t}async function No(e,t,r){var i;if(!r)return;const{arcadeUtils:n}=await mh(),s=n.extractFieldNames(r,t==null||(i=t.fields)==null?void 0:i.map(o=>o.name));for(const o of s)wa(e,t,o)}async function kJ(e,t,r){if(r&&r!=="1=1"){const i=(await ae(()=>import("./WhereClause.d5e58964.js"),[])).WhereClause.create(r,t);if(!i.isStandardized)throw new Z("fieldUtils:collectFilterFields","Where clause is not standardized");n_(e,t,i.fieldNames)}}function Lfe({displayField:e,fields:t}){return e||(t&&t.length?w4(t,"name-or-title")||w4(t,"unique-identifier")||w4(t,"type-or-category")||Nfe(t):null)}function Nfe(e){for(const t of e){if(!t||!t.name)continue;const r=t.name.toLowerCase();if(r.indexOf("name")>-1||r.indexOf("title")>-1)return t.name}return null}function w4(e,t){for(const r of e)if(r&&r.valueType&&r.valueType===t)return r.name;return null}async function Ctt(e,t){if(!t)return;const r=Ev("elevationInfo.featureExpressionInfo",t);return r?r.collectRequiredFields(e,t.fieldsIndex):void 0}async function Dfe(e,t,r){r.outStatistic.onStatisticValueExpression?No(e,t,r.outStatistic.onStatisticValueExpression):e.add(r.outStatistic.onStatisticField)}async function ktt(e,t,r){var i,n;if(!t||!r||r.type!=="cluster")return;const s=[];if((i=r.popupTemplate)!=null&&i.expressionInfos&&s.push(...r.popupTemplate.expressionInfos.map(o=>No(e,t.fieldsIndex,o.expression))),Array.isArray((n=r.popupTemplate)==null?void 0:n.content)){const o=r.popupTemplate.content;for(const a of o)a.type==="expression"&&a.expressionInfo&&s.push(No(e,t.fieldsIndex,a.expressionInfo.expression))}r.fields&&s.push(...r.fields.map(o=>Dfe(e,t.fieldsIndex,o))),await Promise.all(s)}async function Ott(e,t,r){t&&(t.timeInfo&&U(r)&&r.timeExtent&&n_(e,t.fieldsIndex,[t.timeInfo.startField,t.timeInfo.endField]),t.floorInfo&&n_(e,t.fieldsIndex,[t.floorInfo.floorField]),U(r)&&U(r.where)&&await kJ(e,t.fieldsIndex,r.where))}async function Ptt(e,t,r){t&&r&&await Promise.all(r.map(i=>Ffe(e,t,i)))}async function Ffe(e,t,r){t&&r&&(r.valueExpression?await No(e,t.fieldsIndex,r.valueExpression):r.field&&wa(e,t.fieldsIndex,r.field))}function Rtt(e){if(!e)return[];const t="editFieldsInfo"in e&&e.editFieldsInfo;return t?CJ(e.fieldsIndex,[t&&t.creatorField,t&&t.creationDateField,t&&t.editorField,t&&t.editDateField]):[]}async function Ltt(e,t){const{labelingInfo:r,fieldsIndex:i}=t;r&&r.length&&await Promise.all(r.map(n=>jfe(e,i,n)))}async function jfe(e,t,r){if(!r)return;const i=r.getLabelExpression(),n=r.where;if(i.type==="arcade")await No(e,t,i.expression);else{const s=i.expression.match(/{[^}]*}/g);s&&s.forEach(o=>{wa(e,t,o.slice(1,-1))})}await kJ(e,t,n)}function Vfe(e){const t=e.defaultValue;return t!==void 0&&RJ(e,t)?t:e.nullable?null:void 0}function OJ(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Ufe(e){return e===null||OJ(e)}const lN="isInteger"in Number?Number.isInteger:e=>typeof e=="number"&&isFinite(e)&&Math.floor(e)===e;function zfe(e){return e===null||lN(e)}function PJ(e){return e!=null&&typeof e=="string"}function Bfe(e){return e===null||PJ(e)}function Gfe(){return!0}function RJ(e,t){let r;switch(e.type){case"date":case"integer":case"long":case"small-integer":case"esriFieldTypeDate":case"esriFieldTypeInteger":case"esriFieldTypeLong":case"esriFieldTypeSmallInteger":r=e.nullable?zfe:lN;break;case"double":case"single":case"esriFieldTypeSingle":case"esriFieldTypeDouble":r=e.nullable?Ufe:OJ;break;case"string":case"esriFieldTypeString":r=e.nullable?Bfe:PJ;break;default:r=Gfe}return arguments.length===1?r:r(t)}const qfe=["integer","small-integer","single","double"],Hfe=new Set([...qfe,"esriFieldTypeInteger","esriFieldTypeSmallInteger","esriFieldTypeSingle","esriFieldTypeDouble"]);function uN(e){return e!=null&&Hfe.has(e.type)}function Ntt(e){return e!=null&&(e.type==="string"||e.type==="esriFieldTypeString")}var iI,nI;function Dtt(e){return e==null||typeof e=="number"&&isNaN(e)?null:e}function Ftt(e,t){return e.nullable&&t===null?null:uN(e)&&!Wfe(e.type,Number(t))?iI.OUT_OF_RANGE:RJ(e,t)?e.domain?kfe(e.domain,t):null:nI.INVALID_TYPE}function Wfe(e,t){const r=typeof e=="string"?LJ(e):e;return!!r&&(r.isInteger?lN(t)&&t>=r.min&&t<=r.max:t>=r.min&&t<=r.max)}function LJ(e){switch(e){case"esriFieldTypeSmallInteger":case"small-integer":return Jfe;case"esriFieldTypeInteger":case"integer":return Zfe;case"esriFieldTypeSingle":case"single":return Yfe;case"esriFieldTypeDouble":case"double":return Kfe}}(function(e){e.OUT_OF_RANGE="numeric-range-validation-error::out-of-range"})(iI||(iI={})),function(e){e.INVALID_TYPE="type-validation-error::invalid-type"}(nI||(nI={}));const Jfe={min:-32768,max:32767,isInteger:!0},Zfe={min:-2147483648,max:2147483647,isInteger:!0},Yfe={min:-34e37,max:12e37,isInteger:!1},Kfe={min:-Number.MAX_VALUE,max:Number.MAX_VALUE,isInteger:!1};function jtt(e,t,r){switch(e){case j0.INVALID_CODED_VALUE:return`Value ${r} is not in the coded domain - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case j0.VALUE_OUT_OF_RANGE:return`Value ${r} is out of the range of valid values - field: ${t.name}, domain: ${JSON.stringify(t.domain)}`;case nI.INVALID_TYPE:return`Value ${r} is not a valid value for the field type - field: ${t.name}, type: ${t.type}, nullable: ${t.nullable}`;case iI.OUT_OF_RANGE:{const{min:i,max:n}=LJ(t.type);return`Value ${r} is out of range for the number type - field: ${t.name}, type: ${t.type}, value range is ${i} to ${n}`}}}function Xfe(e,t){return!Qfe(e,t,null)}function Qfe(e,t,r){if(!t||!t.attributes||!e){if(U(r))for(const s of e)r.add(s);return!0}const i=t.attributes;let n=!1;for(const s of e)if(!(s in i)){if(n=!0,!U(r))break;r.add(s)}return n}let tM=class extends me{constructor(e){super(e),this.type=null}};c([p({type:["attachments","custom","fields","media","text","expression"],readOnly:!0,json:{read:!1,write:!0}})],tM.prototype,"type",void 0),tM=c([N("esri.popup.content.Content")],tM);const py=tM;var uC;let Zp=uC=class extends py{constructor(e){super(e),this.description=null,this.displayType=null,this.title=null,this.type="attachments"}clone(){return new uC({description:this.description,displayType:this.displayType,title:this.title})}};c([p({type:String,json:{write:!0}})],Zp.prototype,"description",void 0),c([p({type:["auto","preview","list"],json:{write:!0}})],Zp.prototype,"displayType",void 0),c([p({type:String,json:{write:!0}})],Zp.prototype,"title",void 0),c([p({type:["attachments"],readOnly:!0,json:{read:!1,write:!0}})],Zp.prototype,"type",void 0),Zp=uC=c([N("esri.popup.content.AttachmentsContent")],Zp);const s_=Zp;var cC;let Yp=cC=class extends py{constructor(e){super(e),this.creator=null,this.destroyer=null,this.outFields=null,this.type="custom"}clone(){return new cC({creator:this.creator,destroyer:this.destroyer,outFields:Array.isArray(this.outFields)?ie(this.outFields):null})}};c([p()],Yp.prototype,"creator",void 0),c([p()],Yp.prototype,"destroyer",void 0),c([p()],Yp.prototype,"outFields",void 0),c([p({type:["custom"],readOnly:!0})],Yp.prototype,"type",void 0),Yp=cC=c([N("esri.popup.content.CustomContent")],Yp);const eme=Yp;var hC;let ig=hC=class extends me{constructor(e){super(e),this.title=null,this.expression=null,this.returnType="dictionary"}clone(){return new hC({title:this.title,expression:this.expression})}};c([p({type:String,json:{write:!0}})],ig.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],ig.prototype,"expression",void 0),c([p({type:["dictionary"],readOnly:!0,json:{read:!1,write:!0}})],ig.prototype,"returnType",void 0),ig=hC=c([N("esri.popup.ElementExpressionInfo")],ig);const NJ=ig;var dC;let nb=dC=class extends py{constructor(e){super(e),this.expressionInfo=null,this.type="expression"}clone(){var e;return new dC({expressionInfo:(e=this.expressionInfo)==null?void 0:e.clone()})}};c([p({type:NJ,json:{write:!0}})],nb.prototype,"expressionInfo",void 0),c([p({type:["expression"],readOnly:!0,json:{read:!1,write:!0}})],nb.prototype,"type",void 0),nb=dC=c([N("esri.popup.content.ExpressionContent")],nb);const cN=nb;function tt(e,t={}){var r;const i=e instanceof lt?e:new lt(e,t),n={type:(r=t?.ignoreUnknown)==null||r?i.apiValues:String,readOnly:t?.readOnly,json:{type:i.jsonValues,read:(t==null||!t.readOnly)&&{reader:i.read},write:{writer:i.write}}};return t?.default!==void 0&&(n.json.default=t.default),t?.name!==void 0&&(n.json.name=t.name),p(n)}const o_=li()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});o_.toJSON.bind(o_);o_.fromJSON.bind(o_);const zl={year:"numeric",month:"numeric",day:"numeric"},_1={year:"numeric",month:"long",day:"numeric"},x1={year:"numeric",month:"short",day:"numeric"},S1={year:"numeric",month:"long",weekday:"long",day:"numeric"},ea={hour:"numeric",minute:"numeric"},Ca={...ea,second:"numeric"},hN={"short-date":zl,"short-date-short-time":{...zl,...ea},"short-date-short-time-24":{...zl,...ea,hour12:!1},"short-date-long-time":{...zl,...Ca},"short-date-long-time-24":{...zl,...Ca,hour12:!1},"short-date-le":zl,"short-date-le-short-time":{...zl,...ea},"short-date-le-short-time-24":{...zl,...ea,hour12:!1},"short-date-le-long-time":{...zl,...Ca},"short-date-le-long-time-24":{...zl,...Ca,hour12:!1},"long-month-day-year":_1,"long-month-day-year-short-time":{..._1,...ea},"long-month-day-year-short-time-24":{..._1,...ea,hour12:!1},"long-month-day-year-long-time":{..._1,...Ca},"long-month-day-year-long-time-24":{..._1,...Ca,hour12:!1},"day-short-month-year":x1,"day-short-month-year-short-time":{...x1,...ea},"day-short-month-year-short-time-24":{...x1,...ea,hour12:!1},"day-short-month-year-long-time":{...x1,...Ca},"day-short-month-year-long-time-24":{...x1,...Ca,hour12:!1},"long-date":S1,"long-date-short-time":{...S1,...ea},"long-date-short-time-24":{...S1,...ea,hour12:!1},"long-date-long-time":{...S1,...Ca},"long-date-long-time-24":{...S1,...Ca,hour12:!1},"long-month-year":{month:"long",year:"numeric"},"short-month-year":{month:"short",year:"numeric"},year:{year:"numeric"},"short-time":ea,"long-time":Ca},a_=li()({shortDate:"short-date",shortDateShortTime:"short-date-short-time",shortDateShortTime24:"short-date-short-time-24",shortDateLongTime:"short-date-long-time",shortDateLongTime24:"short-date-long-time-24",shortDateLE:"short-date-le",shortDateLEShortTime:"short-date-le-short-time",shortDateLEShortTime24:"short-date-le-short-time-24",shortDateLELongTime:"short-date-le-long-time",shortDateLELongTime24:"short-date-le-long-time-24",longMonthDayYear:"long-month-day-year",longMonthDayYearShortTime:"long-month-day-year-short-time",longMonthDayYearShortTime24:"long-month-day-year-short-time-24",longMonthDayYearLongTime:"long-month-day-year-long-time",longMonthDayYearLongTime24:"long-month-day-year-long-time-24",dayShortMonthYear:"day-short-month-year",dayShortMonthYearShortTime:"day-short-month-year-short-time",dayShortMonthYearShortTime24:"day-short-month-year-short-time-24",dayShortMonthYearLongTime:"day-short-month-year-long-time",dayShortMonthYearLongTime24:"day-short-month-year-long-time-24",longDate:"long-date",longDateShortTime:"long-date-short-time",longDateShortTime24:"long-date-short-time-24",longDateLongTime:"long-date-long-time",longDateLongTime24:"long-date-long-time-24",longMonthYear:"long-month-year",shortMonthYear:"short-month-year",year:"year"});a_.apiValues;a_.toJSON.bind(a_);a_.fromJSON.bind(a_);const tme={ar:"ar-u-nu-latn-ca-gregory"};let rM=new WeakMap,DJ=hN["short-date-short-time"];function rme(e){const t=e||DJ;if(!rM.has(t)){const r=Sa(),i=tme[Sa()]||r;rM.set(t,new Intl.DateTimeFormat(i,t))}return rM.get(t)}function FJ(e){return hN[e]||null}function cp(e,t){return rme(t).format(e)}ZL(()=>{rM=new WeakMap,DJ=hN["short-date-short-time"]});const ime={ar:"ar-u-nu-latn"};let iM=new WeakMap,jJ={};function nme(e){const t=e||jJ;if(!iM.has(t)){const r=Sa(),i=ime[Sa()]||r;iM.set(t,new Intl.NumberFormat(i,e))}return iM.get(t)}function VJ(e={}){const t={};return e.digitSeparator!=null&&(t.useGrouping=e.digitSeparator),e.places!=null&&(t.minimumFractionDigits=t.maximumFractionDigits=e.places),t}function Um(e,t){return nme(t).format(e)}ZL(()=>{iM=new WeakMap,jJ={}});var pC;let Kp=pC=class extends me{constructor(e){super(e),this.dateFormat=null,this.dateTimeFormatOptions=null,this.digitSeparator=!1,this.places=null}clone(){return new pC({dateFormat:this.dateFormat,digitSeparator:this.digitSeparator,places:this.places})}format(e){return this.dateFormat?cp(e,{...FJ(this.dateFormat),...this.dateTimeFormatOptions}):Um(e,VJ(this))}};c([tt(o_)],Kp.prototype,"dateFormat",void 0),c([p({type:Object,json:{read:!1}})],Kp.prototype,"dateTimeFormatOptions",void 0),c([p({type:Boolean,json:{write:!0}})],Kp.prototype,"digitSeparator",void 0),c([p({type:jt,json:{write:!0}})],Kp.prototype,"places",void 0),Kp=pC=c([N("esri.popup.support.FieldInfoFormat")],Kp);const pw=Kp;var fC;let Na=fC=class extends me{constructor(e){super(e),this.fieldName=null,this.format=null,this.isEditable=!1,this.label=null,this.stringFieldOption="text-box",this.statisticType=null,this.tooltip=null,this.visible=!0}clone(){return new fC({fieldName:this.fieldName,format:this.format?ie(this.format):null,isEditable:this.isEditable,label:this.label,stringFieldOption:this.stringFieldOption,statisticType:this.statisticType,tooltip:this.tooltip,visible:this.visible})}};c([p({type:String,json:{write:!0}})],Na.prototype,"fieldName",void 0),c([p({type:pw,json:{write:!0}})],Na.prototype,"format",void 0),c([p({type:Boolean,json:{write:!0,default:!1}})],Na.prototype,"isEditable",void 0),c([p({type:String,json:{write:!0}})],Na.prototype,"label",void 0),c([tt(new lt({richtext:"rich-text",textarea:"text-area",textbox:"text-box"}),{default:"text-box"})],Na.prototype,"stringFieldOption",void 0),c([p({type:["count","sum","min","max","avg","stddev","var"],json:{write:!0}})],Na.prototype,"statisticType",void 0),c([p({type:String,json:{write:!0}})],Na.prototype,"tooltip",void 0),c([p({type:Boolean,json:{write:!0}})],Na.prototype,"visible",void 0),Na=fC=c([N("esri.popup.FieldInfo")],Na);const c2=Na;var mC;let pc=mC=class extends py{constructor(e){super(e),this.attributes=null,this.description=null,this.fieldInfos=null,this.title=null,this.type="fields"}writeFieldInfos(e,t){t.fieldInfos=e&&e.map(r=>r.toJSON())}clone(){return new mC(ie({attributes:this.attributes,description:this.description,fieldInfos:this.fieldInfos,title:this.title}))}};c([p({type:Object,json:{write:!0}})],pc.prototype,"attributes",void 0),c([p({type:String,json:{write:!0}})],pc.prototype,"description",void 0),c([p({type:[c2]})],pc.prototype,"fieldInfos",void 0),c([Se("fieldInfos")],pc.prototype,"writeFieldInfos",null),c([p({type:String,json:{write:!0}})],pc.prototype,"title",void 0),c([p({type:["fields"],readOnly:!0,json:{read:!1,write:!0}})],pc.prototype,"type",void 0),pc=mC=c([N("esri.popup.content.FieldsContent")],pc);const V0=pc;let Xp=class extends me{constructor(e){super(e),this.altText=null,this.caption="",this.title="",this.type=null}};c([p({type:String,json:{write:!0}})],Xp.prototype,"altText",void 0),c([p({type:String,json:{write:!0}})],Xp.prototype,"caption",void 0),c([p({type:String,json:{write:!0}})],Xp.prototype,"title",void 0),c([p({type:["image","bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],Xp.prototype,"type",void 0),Xp=c([N("esri.popup.content.mixins.MediaInfo")],Xp);const dN=Xp;var yC;let sb=yC=class extends Ze{constructor(e){super(e),this.tooltip=null,this.value=null}clone(){return new yC({tooltip:this.tooltip,value:this.value})}};c([p()],sb.prototype,"tooltip",void 0),c([p()],sb.prototype,"value",void 0),sb=yC=c([N("esri.popup.content.support.ChartMediaInfoValueSeries")],sb);const UJ=sb;var gC;let Qp=gC=class extends me{constructor(e){super(e),this.fields=[],this.normalizeField=null,this.series=[],this.tooltipField=null}clone(){return new gC({fields:ie(this.fields),normalizeField:this.normalizeField,tooltipField:this.tooltipField})}};c([p({type:[String],json:{write:!0}})],Qp.prototype,"fields",void 0),c([p({type:String,json:{write:!0}})],Qp.prototype,"normalizeField",void 0),c([p({type:[UJ],json:{read:!1}})],Qp.prototype,"series",void 0),c([p({type:String,json:{write:!0}})],Qp.prototype,"tooltipField",void 0),Qp=gC=c([N("esri.popup.content.support.ChartMediaInfoValue")],Qp);const sme=Qp;let ob=class extends dN{constructor(e){super(e),this.type=null,this.value=null}};c([p({type:["bar-chart","column-chart","line-chart","pie-chart"],readOnly:!0,json:{read:!1,write:!0}})],ob.prototype,"type",void 0),c([p({type:sme,json:{write:!0}})],ob.prototype,"value",void 0),ob=c([N("esri.popup.content.mixins.ChartMediaInfo")],ob);const YT=ob,KT=li()({barchart:"bar-chart",columnchart:"column-chart",linechart:"line-chart",piechart:"pie-chart"});var vC;let nM=vC=class extends YT{constructor(e){super(e),this.type="bar-chart"}clone(){return new vC({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([p({type:["bar-chart"],readOnly:!0,json:{type:["barchart"],read:!1,write:KT.write}})],nM.prototype,"type",void 0),nM=vC=c([N("esri.popup.content.BarChartMediaInfo")],nM);const zJ=nM;var bC;let sM=bC=class extends YT{constructor(e){super(e),this.type="column-chart"}clone(){return new bC({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([p({type:["column-chart"],readOnly:!0,json:{type:["columnchart"],read:!1,write:KT.write}})],sM.prototype,"type",void 0),sM=bC=c([N("esri.popup.content.ColumnChartMediaInfo")],sM);const BJ=sM;var wC;let ab=wC=class extends me{constructor(e){super(e),this.linkURL=null,this.sourceURL=null}clone(){return new wC({linkURL:this.linkURL,sourceURL:this.sourceURL})}};c([p({type:String,json:{write:!0}})],ab.prototype,"linkURL",void 0),c([p({type:String,json:{write:!0}})],ab.prototype,"sourceURL",void 0),ab=wC=c([N("esri.popup.content.support.ImageMediaInfoValue")],ab);const ome=ab;var _C;let ng=_C=class extends dN{constructor(e){super(e),this.refreshInterval=null,this.type="image",this.value=null}clone(){return new _C({altText:this.altText,title:this.title,caption:this.caption,refreshInterval:this.refreshInterval,value:this.value?this.value.clone():null})}};c([p({type:Number,json:{write:!0}})],ng.prototype,"refreshInterval",void 0),c([p({type:["image"],readOnly:!0,json:{read:!1,write:!0}})],ng.prototype,"type",void 0),c([p({type:ome,json:{write:!0}})],ng.prototype,"value",void 0),ng=_C=c([N("esri.popup.content.ImageMediaInfo")],ng);const GJ=ng;var xC;let oM=xC=class extends YT{constructor(e){super(e),this.type="line-chart"}clone(){return new xC({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([p({type:["line-chart"],readOnly:!0,json:{type:["linechart"],read:!1,write:KT.write}})],oM.prototype,"type",void 0),oM=xC=c([N("esri.popup.content.LineChartMediaInfo")],oM);const qJ=oM;var SC;let aM=SC=class extends YT{constructor(e){super(e),this.type="pie-chart"}clone(){return new SC({altText:this.altText,title:this.title,caption:this.caption,value:this.value?this.value.clone():null})}};c([p({type:["pie-chart"],readOnly:!0,json:{type:["piechart"],read:!1,write:KT.write}})],aM.prototype,"type",void 0),aM=SC=c([N("esri.popup.content.PieChartMediaInfo")],aM);const HJ=aM,WJ={base:dN,key:"type",defaultKeyValue:"image",typeMap:{"bar-chart":zJ,"column-chart":BJ,"line-chart":qJ,"pie-chart":HJ,image:GJ}};var MC;let Da=MC=class extends py{constructor(e){super(e),this.activeMediaInfoIndex=null,this.attributes=null,this.description=null,this.mediaInfos=null,this.title=null,this.type="media"}readMediaInfos(e){return e&&e.map(t=>t.type==="image"?GJ.fromJSON(t):t.type==="barchart"?zJ.fromJSON(t):t.type==="columnchart"?BJ.fromJSON(t):t.type==="linechart"?qJ.fromJSON(t):t.type==="piechart"?HJ.fromJSON(t):void 0).filter(Boolean)}writeMediaInfos(e,t){t.mediaInfos=e&&e.map(r=>r.toJSON())}clone(){return new MC(ie({activeMediaInfoIndex:this.activeMediaInfoIndex,attributes:this.attributes,description:this.description,mediaInfos:this.mediaInfos,title:this.title}))}};c([p()],Da.prototype,"activeMediaInfoIndex",void 0),c([p({type:Object,json:{write:!0}})],Da.prototype,"attributes",void 0),c([p({type:String,json:{write:!0}})],Da.prototype,"description",void 0),c([p({types:[WJ]})],Da.prototype,"mediaInfos",void 0),c([ye("mediaInfos")],Da.prototype,"readMediaInfos",null),c([Se("mediaInfos")],Da.prototype,"writeMediaInfos",null),c([p({type:String,json:{write:!0}})],Da.prototype,"title",void 0),c([p({type:["media"],readOnly:!0,json:{read:!1,write:!0}})],Da.prototype,"type",void 0),Da=MC=c([N("esri.popup.content.MediaContent")],Da);const l_=Da;var IC;let lb=IC=class extends py{constructor(e){super(e),this.text=null,this.type="text"}clone(){return new IC({text:this.text})}};c([p({type:String,json:{write:!0}})],lb.prototype,"text",void 0),c([p({type:["text"],readOnly:!0,json:{read:!1,write:!0}})],lb.prototype,"type",void 0),lb=IC=c([N("esri.popup.content.TextContent")],lb);const U0=lb,ame={base:null,key:"type",typeMap:{attachment:s_,media:l_,text:U0,expression:cN,field:V0}};var TC;let ef=TC=class extends me{constructor(e){super(e),this.name=null,this.title=null,this.expression=null,this.returnType=null}clone(){return new TC({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([p({type:String,json:{write:!0}})],ef.prototype,"name",void 0),c([p({type:String,json:{write:!0}})],ef.prototype,"title",void 0),c([p({type:String,json:{write:!0}})],ef.prototype,"expression",void 0),c([p({type:["string","number"],json:{write:!0}})],ef.prototype,"returnType",void 0),ef=TC=c([N("esri.popup.ExpressionInfo")],ef);const JJ=ef;var $C;let ub=$C=class extends me{constructor(e){super(e),this.returnTopmostRaster=null,this.showNoDataRecords=null}clone(){return new $C({showNoDataRecords:this.showNoDataRecords,returnTopmostRaster:this.returnTopmostRaster})}};c([p({type:Boolean,json:{write:!0}})],ub.prototype,"returnTopmostRaster",void 0),c([p({type:Boolean,json:{write:!0}})],ub.prototype,"showNoDataRecords",void 0),ub=$C=c([N("esri.popup.LayerOptions")],ub);const lme=ub;var EC;let cb=EC=class extends me{constructor(e){super(e),this.field=null,this.order=null}clone(){return new EC({field:this.field,order:this.order})}};c([p({type:String,json:{write:!0}})],cb.prototype,"field",void 0),c([p({type:["asc","desc"],json:{write:!0}})],cb.prototype,"order",void 0),cb=EC=c([N("esri.popup.support.RelatedRecordsInfoFieldOrder")],cb);const ZJ=cb;var AC;let hb=AC=class extends me{constructor(e){super(e),this.showRelatedRecords=null,this.orderByFields=null}clone(){return new AC({showRelatedRecords:this.showRelatedRecords,orderByFields:this.orderByFields?ie(this.orderByFields):null})}};c([p({type:Boolean,json:{write:!0}})],hb.prototype,"showRelatedRecords",void 0),c([p({type:[ZJ],json:{write:!0}})],hb.prototype,"orderByFields",void 0),hb=AC=c([N("esri.popup.RelatedRecordsInfo")],hb);const ume=hb;let cme=0;const XT=e=>{let t=class extends e{constructor(...r){super(...r),Object.defineProperty(this,"uid",{writable:!1,configurable:!1,value:Date.now().toString(16)+"-object-"+cme++})}};return t=c([N("esri.core.Identifiable")],t),t};let U9=class extends XT(class{}){};U9=c([N("esri.core.Identifiable")],U9);var CC;let Fa=CC=class extends XT(Ze){constructor(e){super(e),this.active=!1,this.className=null,this.disabled=!1,this.id=null,this.indicator=!1,this.title=null,this.type=null,this.visible=!0}clone(){return new CC({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible})}};c([p()],Fa.prototype,"active",void 0),c([p()],Fa.prototype,"className",void 0),c([p()],Fa.prototype,"disabled",void 0),c([p()],Fa.prototype,"id",void 0),c([p()],Fa.prototype,"indicator",void 0),c([p()],Fa.prototype,"title",void 0),c([p()],Fa.prototype,"type",void 0),c([p()],Fa.prototype,"visible",void 0),Fa=CC=c([N("esri.support.actions.ActionBase")],Fa);const QT=Fa;var kC;let lM=kC=class extends QT{constructor(e){super(e),this.image=null,this.type="button"}clone(){return new kC({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image})}};c([p()],lM.prototype,"image",void 0),lM=kC=c([N("esri.support.Action.ActionButton")],lM);const Nv=lM;var OC;let db=OC=class extends QT{constructor(e){super(e),this.image=null,this.type="toggle",this.value=!1}clone(){return new OC({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,image:this.image,value:this.value})}};c([p()],db.prototype,"image",void 0),c([p()],db.prototype,"value",void 0),db=OC=c([N("esri.support.Action.ActionToggle")],db);const YJ=db;var PC;const hme=Je.ofType({key:"type",defaultKeyValue:"button",base:QT,typeMap:{button:Nv,toggle:YJ}}),dme={base:py,key:"type",typeMap:{media:l_,custom:eme,text:U0,attachments:s_,fields:V0,expression:cN}},KJ="esri.PopupTemplate",pme=Te.getLogger(KJ),fme=["attachments","fields","media","text","expression"];let bi=PC=class extends me{constructor(){super(...arguments),this.actions=null,this.content="",this.expressionInfos=null,this.fieldInfos=null,this.layerOptions=null,this.lastEditInfoEnabled=!0,this.outFields=null,this.overwriteActions=!1,this.returnGeometry=!1,this.title="",this.relatedRecordsInfo=null}castContent(e){return Array.isArray(e)?e.map(t=>ju(dme,t)):typeof e=="string"||typeof e=="function"||e instanceof HTMLElement||hy(e)?e:(pme.error("content error","unsupported content value",{value:e}),null)}readContent(e,t){const{popupElements:r}=t;return Array.isArray(r)&&r.length>0?this._readPopupInfoElements(t):this._readPopupInfo(t)}writeContent(e,t,r,i){typeof e!="string"?Array.isArray(e)&&(t.popupElements=e.filter(n=>fme.indexOf(n.type)!==-1).map(n=>n&&n.toJSON(i)),t.popupElements.forEach(n=>{n.type==="attachments"?this._writeAttachmentContent(t):n.type==="media"?this._writeMediaContent(n,t):n.type==="text"&&this._writeTextContent(n,t)})):t.description=e}writeFieldInfos(e,t,r,i){const{content:n}=this,s=Array.isArray(n)?n:null;if(e){const o=s?s.filter(l=>l.type==="fields"):[],a=o.length&&o.every(l=>{var u;return(u=l.fieldInfos)==null?void 0:u.length});t.fieldInfos=e.filter(Boolean).map(l=>{const u=l.toJSON(i);return a&&(u.visible=!1),u})}if(s)for(const o of s)o.type==="fields"&&this._writeFieldsContent(o,t)}writeLayerOptions(e,t,r,i){t[r]=!e||e.showNoDataRecords===null&&e.returnTopmostRaster===null?null:e.toJSON(i)}writeTitle(e,t){t.title=e||""}clone(){const{actions:e}=this,t=e?ie(e.toArray()):[];return new PC({actions:t,content:Array.isArray(this.content)?ie(this.content):this.content,expressionInfos:Array.isArray(this.expressionInfos)?ie(this.expressionInfos):null,fieldInfos:Array.isArray(this.fieldInfos)?ie(this.fieldInfos):null,layerOptions:this.layerOptions?ie(this.layerOptions):null,lastEditInfoEnabled:this.lastEditInfoEnabled,outFields:Array.isArray(this.outFields)?ie(this.outFields):null,overwriteActions:this.overwriteActions,returnGeometry:this.returnGeometry,title:this.title,relatedRecordsInfo:this.relatedRecordsInfo?ie(this.relatedRecordsInfo):null})}async collectRequiredFields(e,t){await this._collectExpressionInfoFields(e,t,this._getContentExpressionInfos(this.content,this.expressionInfos)),n_(e,t,[...this.outFields||[],...this._getActionsFields(this.actions),...this._getTitleFields(this.title),...this._getContentFields(this.content)])}async getRequiredFields(e){const t=new Set;return await this.collectRequiredFields(t,e),[...t].sort()}_writeFieldsContent(e,t){if(!Array.isArray(e.fieldInfos)||!e.fieldInfos.length)return;const r=ie(e.fieldInfos);Array.isArray(t.fieldInfos)?r.forEach(i=>{const n=t.fieldInfos.find(s=>s.fieldName.toLowerCase()===i.fieldName.toLowerCase());n?n.visible=!0:t.fieldInfos.push(i)}):t.fieldInfos=r}_writeAttachmentContent(e){e.showAttachments||(e.showAttachments=!0)}_writeTextContent(e,t){!t.description&&e.text&&(t.description=e.text)}_writeMediaContent(e,t){if(!Array.isArray(e.mediaInfos)||!e.mediaInfos.length)return;const r=ie(e.mediaInfos);Array.isArray(t.mediaInfos)?t.mediaInfos=[...t.mediaInfos,...r]:t.mediaInfos=r}_readPopupInfoElements({description:e,mediaInfos:t,popupElements:r}){const i={description:!1,mediaInfos:!1};return r.map(n=>n.type==="media"?(n.mediaInfos||!t||i.mediaInfos||(n.mediaInfos=t,i.mediaInfos=!0),l_.fromJSON(n)):n.type==="text"?(n.text||!e||i.description||(n.text=e,i.description=!0),U0.fromJSON(n)):n.type==="attachments"?s_.fromJSON(n):n.type==="fields"?V0.fromJSON(n):n.type==="expression"?cN.fromJSON(n):void 0).filter(Boolean)}_readPopupInfo({description:e,mediaInfos:t,showAttachments:r}){const i=[];return e?i.push(new U0({text:e})):i.push(new V0),Array.isArray(t)&&t.length&&i.push(l_.fromJSON({mediaInfos:t})),r&&i.push(s_.fromJSON({displayType:"auto"})),i.length?i:e}_getContentElementFields(e){const t=e?.type;if(t==="attachments")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description)];if(t==="custom")return e.outFields||[];if(t==="fields")return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...this._getFieldInfoFields(e.fieldInfos||this.fieldInfos)];if(t==="media"){const r=e.mediaInfos||[];return[...this._extractFieldNames(e.title),...this._extractFieldNames(e.description),...r.reduce((i,n)=>[...i,...this._getMediaInfoFields(n)],[])]}return t==="text"?this._extractFieldNames(e.text):[]}_getMediaInfoFields(e){const{caption:t,title:r,value:i}=e,n=i||{},{fields:s=[],normalizeField:o,tooltipField:a,sourceURL:l,linkURL:u}=n,h=[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(l),...this._extractFieldNames(u),...s];return o&&h.push(o),a&&h.push(a),h}_getContentExpressionInfos(e,t){return Array.isArray(e)?e.reduce((r,i)=>[...r,...i.type==="expression"&&i.expressionInfo?[i.expressionInfo]:[]],t||[]):[]}_getContentFields(e){return typeof e=="string"?this._extractFieldNames(e):Array.isArray(e)?e.reduce((t,r)=>[...t,...this._getContentElementFields(r)],[]):[]}async _collectExpressionInfoFields(e,t,r){r&&await Promise.all(r.map(i=>No(e,t,i.expression)))}_getFieldInfoFields(e){return e?e.filter(t=>t.visible===void 0||!!t.visible).map(t=>t.fieldName).filter(t=>t.indexOf("relationships/")===-1&&t.indexOf("expression/")===-1):[]}_getActionsFields(e){return e?e.toArray().reduce((t,r)=>[...t,...this._getActionFields(r)],[]):[]}_getActionFields(e){const{className:t,title:r,type:i}=e,n=i==="button"||i==="toggle"?e.image:"";return[...this._extractFieldNames(r),...this._extractFieldNames(t),...this._extractFieldNames(n)]}_getTitleFields(e){return typeof e=="string"?this._extractFieldNames(e):[]}_extractFieldNames(e){if(!e||typeof e!="string")return[];const t=/{[^}]*}/g,r=e.match(t);if(!r)return[];const i=/\{(\w+):.+\}/,n=r.filter(s=>!(s.indexOf("{relationships/")===0||s.indexOf("{expression/")===0)).map(s=>s.replace(i,"{$1}"));return n?n.map(s=>s.slice(1,-1)):[]}};c([p({type:hme})],bi.prototype,"actions",void 0),c([p()],bi.prototype,"content",void 0),c([Ct("content")],bi.prototype,"castContent",null),c([ye("content",["description","fieldInfos","popupElements","mediaInfos","showAttachments"])],bi.prototype,"readContent",null),c([Se("content",{popupElements:{type:Je.ofType(ame)},showAttachments:{type:Boolean},mediaInfos:{type:Je.ofType(WJ)},description:{type:String}})],bi.prototype,"writeContent",null),c([p({type:[JJ],json:{write:!0}})],bi.prototype,"expressionInfos",void 0),c([p({type:[c2]})],bi.prototype,"fieldInfos",void 0),c([Se("fieldInfos")],bi.prototype,"writeFieldInfos",null),c([p({type:lme})],bi.prototype,"layerOptions",void 0),c([Se("layerOptions")],bi.prototype,"writeLayerOptions",null),c([p({type:Boolean,json:{read:{source:"showLastEditInfo"},write:{target:"showLastEditInfo"},default:!0}})],bi.prototype,"lastEditInfoEnabled",void 0),c([p()],bi.prototype,"outFields",void 0),c([p()],bi.prototype,"overwriteActions",void 0),c([p()],bi.prototype,"returnGeometry",void 0),c([p({json:{type:String}})],bi.prototype,"title",void 0),c([Se("title")],bi.prototype,"writeTitle",null),c([p({type:ume,json:{write:!0}})],bi.prototype,"relatedRecordsInfo",void 0),bi=PC=c([N(KJ)],bi);const fy=bi,z9=new lt({esriSMS:"simple-marker",esriPMS:"picture-marker",esriSLS:"simple-line",esriSFS:"simple-fill",esriPFS:"picture-fill",esriTS:"text",esriSHD:"shield-label-symbol",PointSymbol3D:"point-3d",LineSymbol3D:"line-3d",PolygonSymbol3D:"polygon-3d",WebStyleSymbol:"web-style",MeshSymbol3D:"mesh-3d",LabelSymbol3D:"label-3d",CIMSymbolReference:"cim"});let mme=0,sg=class extends me{constructor(e){super(e),this.id="sym"+mme++,this.type=null}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}async collectRequiredFields(e,t){}hash(){return JSON.stringify(this.toJSON())}clone(){}};c([p({type:z9.apiValues,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0,writer:z9.write}}})],sg.prototype,"type",void 0),c([p({type:Le,value:new Le([0,0,0,1]),json:{write:{allowNull:!0}}})],sg.prototype,"color",null),c([ye("color")],sg.prototype,"readColor",null),sg=c([N("esri.symbols.Symbol")],sg);const vs=sg;var RC;let rd=RC=class extends vs{constructor(e){super(e),this.data=null,this.type="cim"}readData(e,t){return t}writeData(e,t){if(e)for(const r in e)t[r]=e[r]}async collectRequiredFields(e,t){if(this.data.type==="CIMSymbolReference"){const r=this.data.primitiveOverrides;if(r){const i=r.map(n=>{const s=n.valueExpressionInfo;return No(e,t,s.expression)});await Promise.all(i)}}}clone(){return new RC({data:ie(this.data)})}hash(){return $L(JSON.stringify(this.data)).toString()}};c([p({json:{write:!1}})],rd.prototype,"color",void 0),c([p({json:{write:!0}})],rd.prototype,"data",void 0),c([ye("data",["symbol"])],rd.prototype,"readData",null),c([Se("data",{})],rd.prototype,"writeData",null),c([tt({CIMSymbolReference:"cim"},{readOnly:!0})],rd.prototype,"type",void 0),rd=RC=c([N("esri.symbols.CIMSymbol")],rd);const h2=rd;let og=class extends me{constructor(e){super(e),this.enabled=!0,this.type=null}writeEnabled(e,t,r){e||(t[r]=e)}};c([p({type:Boolean,json:{read:{source:"enable"},write:{target:"enable"}}})],og.prototype,"enabled",void 0),c([Se("enabled")],og.prototype,"writeEnabled",null),c([p({type:["icon","object","line","path","fill","water","extrude","text"],readOnly:!0})],og.prototype,"type",void 0),og=c([N("esri.symbols.Symbol3DLayer")],og);const Yu=og,yme=/^-?(\d+(\.\d+)?)\s*((px)|(pt))?$/i,gme="screenUtils.toPt: input not recognized!",XJ=96;function Vtt(e){return e?e/72*XJ:0}function my(e){return e?72*e/XJ:0}function Ht(e){if(typeof e=="string"){const t=e.match(yme);if(t){const r=Number(t[1]),i=t[3]&&t[3].toLowerCase(),n=e.charAt(0)==="-",s=i==="px"?my(r):r;return n?-s:s}return console.warn(gme),null}return e}function tn(e=0,t=0){return{x:e,y:t}}function Utt(e=0,t=0){return[e,t]}function pN(e){const t=GT(100*(1-e));return Math.max(0,Math.min(t,100))}function u_(e){const t=1-e/100;return Math.max(0,Math.min(t,1))}function vme(e,t){const r=t.transparency!=null?u_(t.transparency):1,i=t.color;return i&&Array.isArray(i)?new Le([i[0]||0,i[1]||0,i[2]||0,r]):null}function bme(e,t){t.color=e.toJSON().slice(0,3);const r=pN(e.a);r!==0&&(t.transparency=r)}const yy={type:Le,json:{type:[jt],default:null,read:{source:["color","transparency"],reader:vme},write:{target:{color:{type:[jt]},transparency:{type:jt}},writer:bme}}},Uu={type:Number,cast:Ht,json:{write:!0}};let tf=class extends me{constructor(e){super(e),this.color=new Le([0,0,0,1]),this.extensionLength=0,this.size=my(1)}clone(){}cloneProperties(){return{color:ie(this.color),size:this.size,extensionLength:this.extensionLength}}};c([p({type:["solid","sketch"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],tf.prototype,"type",void 0),c([p(yy)],tf.prototype,"color",void 0),c([p({...Uu,json:{write:{overridePolicy:e=>({enabled:!!e})}}})],tf.prototype,"extensionLength",void 0),c([p(Uu)],tf.prototype,"size",void 0),tf=c([N("esri.symbols.edges.Edges3D")],tf);const fN=tf;var LC;let uM=LC=class extends fN{constructor(e){super(e),this.type="sketch"}clone(){return new LC(this.cloneProperties())}};c([tt({sketch:"sketch"},{readOnly:!0})],uM.prototype,"type",void 0),uM=LC=c([N("esri.symbols.edges.SketchEdges3D")],uM);const wme=uM;var NC;let cM=NC=class extends fN{constructor(e){super(e),this.type="solid"}clone(){return new NC(this.cloneProperties())}};c([tt({solid:"solid"},{readOnly:!0})],cM.prototype,"type",void 0),cM=NC=c([N("esri.symbols.support.SolidEdges3D")],cM);const _me=cM,QJ={types:{key:"type",base:fN,typeMap:{solid:_me,sketch:wme}},json:{write:!0}};var DC;let gm=DC=class extends me{constructor(e){super(e),this.color=null}clone(){const e={color:U(this.color)?this.color.clone():null};return new DC(e)}};c([p(yy)],gm.prototype,"color",void 0),gm=DC=c([N("esri.symbols.support.Symbol3DMaterial")],gm);const Dv=gm;var FC;let id=FC=class extends Yu{constructor(e){super(e),this.type="extrude",this.size=1,this.material=null,this.castShadows=!0,this.edges=null}clone(){return new FC({edges:this.edges&&this.edges.clone(),enabled:this.enabled,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,size:this.size})}};c([tt({Extrude:"extrude"},{readOnly:!0})],id.prototype,"type",void 0),c([p({type:Number,json:{write:{enabled:!0,isRequired:!0}},nonNullable:!0})],id.prototype,"size",void 0),c([p({type:Dv,json:{write:!0}})],id.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],id.prototype,"castShadows",void 0),c([p(QJ)],id.prototype,"edges",void 0),id=FC=c([N("esri.symbols.ExtrudeSymbol3DLayer")],id);const mN=id;let pb=class extends vs{constructor(e){super(e),this.type="simple-line",this.width=.75}hash(){return`${this.type}.${this.width}`}};c([tt({esriSLS:"simple-line"},{readOnly:!0})],pb.prototype,"type",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],pb.prototype,"width",void 0),pb=c([N("esri.symbols.LineSymbol")],pb);const xme=pb;var jC;let Xl=jC=class extends me{constructor(e){super(e),this.placement="begin-end",this.type="line-marker",this.style="arrow"}writeStyle(e,t,r,i){i?.origin==="web-map"?t[r]="arrow":t[r]=e}set color(e){this._set("color",e)}readColor(e){return e&&e[0]!=null?[e[0],e[1],e[2],e[3]/255]:e}writeColor(e,t,r,i){i?.origin==="web-map"||(t[r]=e)}clone(){return new jC({color:ie(this.color),placement:this.placement,style:this.style})}hash(){var e;return`${this.placement}.${(e=this.color)==null?void 0:e.hash()}.${this.style}`}};c([p({type:["begin","end","begin-end"],json:{write:!0}})],Xl.prototype,"placement",void 0),c([tt({"line-marker":"line-marker"},{readOnly:!0}),p({json:{origins:{"web-map":{write:!1}}}})],Xl.prototype,"type",void 0),c([p({type:["arrow","circle","square","diamond","cross","x"]})],Xl.prototype,"style",void 0),c([Se("style")],Xl.prototype,"writeStyle",null),c([p({type:Le,value:null,json:{write:{allowNull:!0}}})],Xl.prototype,"color",null),c([ye("color")],Xl.prototype,"readColor",null),c([Se("color")],Xl.prototype,"writeColor",null),Xl=jC=c([N("esri.symbols.LineSymbolMarker")],Xl);const Sme=Xl;var VC;const _4=new lt({esriSLSSolid:"solid",esriSLSDash:"dash",esriSLSDot:"dot",esriSLSDashDot:"dash-dot",esriSLSDashDotDot:"long-dash-dot-dot",esriSLSNull:"none",esriSLSInsideFrame:"inside-frame",esriSLSShortDash:"short-dash",esriSLSShortDot:"short-dot",esriSLSShortDashDot:"short-dash-dot",esriSLSShortDashDotDot:"short-dash-dot-dot",esriSLSLongDash:"long-dash",esriSLSLongDashDot:"long-dash-dot"});let fc=VC=class extends xme{constructor(...e){super(...e),this.type="simple-line",this.style="solid",this.cap="round",this.join="round",this.marker=null,this.miterLimit=2}normalizeCtorArgs(e,t,r,i,n,s){if(e&&typeof e!="string")return e;const o={};return e!=null&&(o.style=e),t!=null&&(o.color=t),r!=null&&(o.width=Ht(r)),i!=null&&(o.cap=i),n!=null&&(o.join=n),s!=null&&(o.miterLimit=Ht(s)),o}clone(){var e;return new VC({color:ie(this.color),style:this.style,width:this.width,cap:this.cap,join:this.join,miterLimit:this.miterLimit,marker:(e=this.marker)==null?void 0:e.clone()})}hash(){var e,t;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.style}.${this.cap}.${this.join}.${this.miterLimit}.${(t=this.marker)==null?void 0:t.hash()}`}};c([tt({esriSLS:"simple-line"},{readOnly:!0})],fc.prototype,"type",void 0),c([p({type:_4.apiValues,json:{read:_4.read,write:_4.write}})],fc.prototype,"style",void 0),c([p({type:["butt","round","square"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],fc.prototype,"cap",void 0),c([p({type:["miter","round","bevel"],json:{write:{overridePolicy:(e,t,r)=>({enabled:e!=="round"&&(r==null||r.origin==null)})}}})],fc.prototype,"join",void 0),c([p({types:{key:"type",base:null,defaultKeyValue:"line-marker",typeMap:{"line-marker":Sme}},json:{write:!0,origins:{"web-scene":{write:!1}}}})],fc.prototype,"marker",void 0),c([p({type:Number,json:{read:!1,write:!1}})],fc.prototype,"miterLimit",void 0),fc=VC=c([N("esri.symbols.SimpleLineSymbol")],fc);const jo=fc;let fb=class extends vs{constructor(e){super(e),this.outline=null,this.type=null}hash(){return`${this.type}.${this.outline&&this.outline.hash()}`}};c([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":jo}},json:{default:null,write:!0}})],fb.prototype,"outline",void 0),c([p({type:["simple-fill","picture-fill"],readOnly:!0})],fb.prototype,"type",void 0),fb=c([N("esri.symbols.FillSymbol")],fb);const eZ=fb;let hM=class extends me{constructor(e){super(e)}clone(){}};c([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],hM.prototype,"type",void 0),hM=c([N("esri.symbols.patterns.LinePattern3D")],hM);const tZ=hM,Mme=["dash","dash-dot","dot","long-dash","long-dash-dot","long-dash-dot-dot","none","short-dash","short-dash-dot","short-dash-dot-dot","short-dot","solid"];var UC;const Ime=li()({dash:"dash","dash-dot":"dash-dot","dash-dot-dot":"long-dash-dot-dot",dot:"dot","long-dash":"long-dash","long-dash-dot":"long-dash-dot",null:"none","short-dash":"short-dash","short-dash-dot":"short-dash-dot","short-dash-dot-dot":"short-dash-dot-dot","short-dot":"short-dot",solid:"solid"});let mb=UC=class extends tZ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new UC(e)}};c([p({type:["style"]})],mb.prototype,"type",void 0),c([tt(Ime),p({type:Mme})],mb.prototype,"style",void 0),mb=UC=c([N("esri.symbols.patterns.LineStylePattern3D")],mb);const yN=mb;let dM=class extends me{constructor(e){super(e)}clone(){}};c([p({type:["style"],readOnly:!0,json:{read:!0,write:{ignoreOrigin:!0}}})],dM.prototype,"type",void 0),dM=c([N("esri.symbols.patterns.Pattern3D")],dM);const rZ=dM,Tme=["backward-diagonal","cross","diagonal-cross","forward-diagonal","horizontal","none","solid","vertical"];var zC;let yb=zC=class extends rZ{constructor(e){super(e),this.type="style",this.style="solid"}clone(){const e={style:this.style};return new zC(e)}};c([p({type:["style"]})],yb.prototype,"type",void 0),c([p({type:Tme,json:{read:!0,write:!0}})],yb.prototype,"style",void 0),yb=zC=c([N("esri.symbols.patterns.StylePattern3D")],yb);const iZ=yb,$me={types:{key:"type",base:rZ,typeMap:{style:iZ}},json:{write:!0}},nZ={types:{key:"type",base:tZ,typeMap:{style:yN}},json:{write:!0}},fw=new Le("white");new Le("black");const Eme=new Le([255,255,255,0]);function Ame(e){return e.r===0&&e.g===0&&e.b===0}var BC;let mw=BC=class extends gm{constructor(e){super(e),this.colorMixMode=null}clone(){const e={color:U(this.color)?this.color.clone():null,colorMixMode:this.colorMixMode};return new BC(e)}};c([tt({multiply:"multiply",replace:"replace",tint:"tint"})],mw.prototype,"colorMixMode",void 0),mw=BC=c([N("esri.symbols.support.Symbol3DFillMaterial")],mw);function Sl(e=Dme){return[e[0],e[1],e[2],e[3]]}function ztt(e){return[e[0],e[1],e[2],e[3]]}function Btt(e,t,r,i,n=Sl()){return n[0]=e,n[1]=t,n[2]=r,n[3]=i,n}function Cme(e,t=Sl()){return t[0]=e.xmin,t[1]=e.ymin,t[2]=e.xmax,t[3]=e.ymax,t}function Gtt(e,t){return new nt({xmin:e[0],ymin:e[1],xmax:e[2],ymax:e[3],spatialReference:t})}function qtt(e,t){t[0]<e[0]&&(e[0]=t[0]),t[0]>e[2]&&(e[2]=t[0]),t[1]<e[1]&&(e[1]=t[1]),t[1]>e[3]&&(e[3]=t[1])}function kme(e){return ce(e)||e[0]>=e[2]?0:e[2]-e[0]}function Ome(e){return e[1]>=e[3]?0:e[3]-e[1]}function Htt(e){return kme(e)*Ome(e)}function Pme(e,t){return Rme(e,t[0],t[1])}function Rme(e,t,r){return t>=e[0]&&r>=e[1]&&t<=e[2]&&r<=e[3]}function Lme(e,t,r){return t[0]>=e[0]-r&&t[1]>=e[1]-r&&t[0]<=e[2]+r&&t[1]<=e[3]+r}function Wtt(e,t){return Math.max(t[0],e[0])<=Math.min(t[2],e[2])&&Math.max(t[1],e[1])<=Math.min(t[3],e[3])}function Nme(e,t){return t[0]>=e[0]&&t[2]<=e[2]&&t[1]>=e[1]&&t[3]<=e[3]}const Jtt=[1/0,1/0,-1/0,-1/0],Dme=[0,0,0,0];function gN(e=zme){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function vN(e,t,r,i,n,s,o=gN()){return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function Ztt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[3]),e[4]=Math.max(e[4],t[4]),e[5]=Math.max(e[5],t[5])}function Ytt(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.min(e[1],t[1]),e[2]=Math.min(e[2],t[2]),e[3]=Math.max(e[3],t[0]),e[4]=Math.max(e[4],t[1]),e[5]=Math.max(e[5],t[2])}function Fme(e){return e[0]>=e[3]?0:e[3]-e[0]}function jme(e){return e[1]>=e[4]?0:e[4]-e[1]}function Vme(e){return e[2]>=e[5]?0:e[5]-e[2]}function Ktt(e,t=[0,0,0]){return t[0]=Fme(e),t[1]=jme(e),t[2]=Vme(e),t}function Xtt(e,t,r=e){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r!==e&&(r[3]=e[3],r[4]=e[4],r[5]=e[5]),r}function Qtt(e,t,r=e){return r[3]=t[0],r[4]=t[1],r[5]=t[2],r!==e&&(r[0]=e[0],r[1]=e[1],r[2]=e[2]),e}function Ume(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function ert(e){return e?Ume(e,G9):gN(G9)}function trt(e,t){return e[0]=t[0],e[1]=t[1],e[2]=Number.NEGATIVE_INFINITY,e[3]=t[2],e[4]=t[3],e[5]=Number.POSITIVE_INFINITY,e}function B9(e){return e.length===6}function rrt(e,t,r){if(ce(e)||ce(t))return e===t;if(!B9(e)||!B9(t))return!1;if(r){for(let i=0;i<e.length;i++)if(!r(e[i],t[i]))return!1}else for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}const G9=[1/0,1/0,1/0,-1/0,-1/0,-1/0],zme=[0,0,0,0,0,0];gN();function irt(e,{isPrimitive:t,width:r,depth:i,height:n}){const s=t?10:1;if(r==null&&n==null&&i==null)return[s*e[0],s*e[1],s*e[2]];const o=Lv(r,i,n);let a;for(let l=0;l<3;l++){const u=o[l];if(u!=null){a=u/e[l];break}}for(let l=0;l<3;l++)o[l]==null&&(o[l]=e[l]*a);return o}const Bme=vN(-.5,-.5,-.5,.5,.5,.5),Gme=vN(-.5,-.5,0,.5,.5,1),qme=vN(-.5,-.5,0,.5,.5,.5);function nrt(e){switch(e){case"sphere":case"cube":case"diamond":return Bme;case"cylinder":case"cone":case"inverted-cone":return Gme;case"tetrahedron":return qme;default:return}}const bN=["butt","square","round"],Hme=[...bN,"none"],sZ=["miter","bevel","round"];var GC;let rf=GC=class extends me{constructor(e){super(e),this.color=new Le([0,0,0,1]),this.size=my(1),this.pattern=null,this.patternCap="butt"}clone(){const e={color:U(this.color)?this.color.clone():null,size:this.size,pattern:U(this.pattern)?this.pattern.clone():null,patternCap:this.patternCap};return new GC(e)}};c([p(yy)],rf.prototype,"color",void 0),c([p(Uu)],rf.prototype,"size",void 0),c([p(nZ)],rf.prototype,"pattern",void 0),c([p({type:bN,json:{default:"butt",write:{overridePolicy(){return{enabled:U(this.pattern)}}}}})],rf.prototype,"patternCap",void 0),rf=GC=c([N("esri.symbols.support.Symbol3DOutline")],rf);const Wme=rf;var pM;let mc=pM=class extends Yu{constructor(e){super(e),this.type="fill",this.material=null,this.pattern=null,this.castShadows=!0,this.outline=null,this.edges=null}clone(){const e={edges:U(this.edges)?this.edges.clone():null,enabled:this.enabled,material:U(this.material)?this.material.clone():null,pattern:U(this.pattern)?this.pattern.clone():null,castShadows:this.castShadows,outline:U(this.outline)?this.outline.clone():null};return new pM(e)}static fromSimpleFillSymbol(e){var t,r,i,n,s,o;const a=e.outline&&e.outline.style&&e.outline.style!=="inside-frame"&&e.outline.style!=="solid"?new yN({style:e.outline.style}):null,l={size:(t=(r=e.outline)==null?void 0:r.width)!=null?t:0,color:((i=(n=e.outline)==null?void 0:n.color)!=null?i:fw).clone(),pattern:a};return a&&(s=e.outline)!=null&&s.cap&&(l.patternCap=e.outline.cap),new pM({material:new mw({color:((o=e.color)!=null?o:Eme).clone()}),pattern:e.style&&e.style!=="solid"?new iZ({style:e.style}):null,outline:l})}};c([tt({Fill:"fill"},{readOnly:!0})],mc.prototype,"type",void 0),c([p({type:mw,json:{write:!0}})],mc.prototype,"material",void 0),c([p($me)],mc.prototype,"pattern",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],mc.prototype,"castShadows",void 0),c([p({type:Wme,json:{write:!0}})],mc.prototype,"outline",void 0),c([p(QJ)],mc.prototype,"edges",void 0),mc=pM=c([N("esri.symbols.FillSymbol3DLayer")],mc);const d2=mc;var qC;let yc=qC=class extends me{constructor(e){super(e),this.decoration="none",this.family="sans-serif",this.size=9,this.style="normal",this.weight="normal"}castSize(e){return Ht(e)}clone(){return new qC({decoration:this.decoration,family:this.family,size:this.size,style:this.style,weight:this.weight})}hash(){return`${this.decoration}.${this.family}.${this.size}.${this.style}.${this.weight}`}};c([p({type:["underline","line-through","none"],json:{default:"none",write:!0}})],yc.prototype,"decoration",void 0),c([p({type:String,json:{write:!0}})],yc.prototype,"family",void 0),c([p({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:!r||!r.textSymbol3D})}}})],yc.prototype,"size",void 0),c([Ct("size")],yc.prototype,"castSize",null),c([p({type:["normal","italic","oblique"],json:{default:"normal",write:!0}})],yc.prototype,"style",void 0),c([p({type:["normal","bold","bolder","lighter"],json:{default:"normal",write:!0}})],yc.prototype,"weight",void 0),yc=qC=c([N("esri.symbols.Font")],yc);const e$=yc;function Fv(e,t){const r=t&&t.url&&t.url.path;if(e&&r&&(e=ma(e,r,{preserveProtocolRelative:!0}),t.portalItem&&t.readResourcePaths)){const i=zL(e,t.portalItem.itemUrl);Zme.test(i)&&t.readResourcePaths.push(t.portalItem.resourceFromPath(i).path)}return HC(e,t&&t.portal)}function p2(e,t,r=0){if(!e)return e;!Eo(e)&&t&&t.blockedRelativeUrls&&t.blockedRelativeUrls.push(e);let i=ma(e);if(t){const n=t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.rootPath||t.url&&t.url.path;if(n){const s=HC(n,t.portal);i=zL(HC(i,t.portal),s,s),i!==e&&t.verifyItemRelativeUrls&&t.verifyItemRelativeUrls.writtenUrls.push(i)}}return i=Kme(i,t&&t.portal),Eo(i)&&(i=$o(i)),t!=null&&t.resources&&t!=null&&t.portalItem&&!Eo(i)&&!dy(i)&&r===0&&t.resources.toKeep.push({resource:t.portalItem.resourceFromPath(i)}),i}function wN(e,t,r){return Fv(e,r)}function zm(e,t,r,i){const n=p2(e,i);n!==void 0&&(t[r]=n)}const Jme=/\/items\/([^\/]+)\/resources\//,Zme=/^\.\/resources\//;function Yme(e){const t=U(e)?e.match(Jme):null;return U(t)?t[1]:null}function Kme(e,t){return t&&!t.isPortal&&t.urlKey&&t.customBaseUrl?qA(e,`${t.urlKey}.${t.customBaseUrl}`,t.portalHostname):e}function HC(e,t){if(!t||t.isPortal||!t.urlKey||!t.customBaseUrl)return e;const r=`${t.urlKey}.${t.customBaseUrl}`;return Y3(Ki,`${Ki.scheme}://${r}`)?qA(e,t.portalHostname,r):qA(e,r,t.portalHostname)}const srt=Object.freeze({__proto__:null,fromJSON:Fv,toJSON:p2,read:wN,write:zm,itemIdFromResourceUrl:Yme});var WC;const Xme=li()({circle:"circle",square:"square",cross:"cross",x:"x",kite:"kite",triangle:"triangle"});let nf=WC=class extends me{constructor(e){super(e)}readHref(e,t,r){return e?Fv(e,r):t.dataURI}writeHref(e,t,r,i){e&&(dy(e)?t.dataURI=e:(t.href=p2(e,i),Eo(t.href)&&(t.href=$o(t.href))))}clone(){return new WC({href:this.href,primitive:this.primitive})}};c([p({type:String,json:{write:!0,read:{source:["href","dataURI"]}}})],nf.prototype,"href",void 0),c([ye("href")],nf.prototype,"readHref",null),c([Se("href",{href:{type:String},dataURI:{type:String}})],nf.prototype,"writeHref",null),c([tt(Xme)],nf.prototype,"primitive",void 0),nf=WC=c([N("esri.symbols.support.IconSymbol3DLayerResource")],nf);const Qme=nf;var JC;let Kg=JC=class extends Ze{constructor(){super(...arguments),this.x=0,this.y=0}clone(){return new JC({x:this.x,y:this.y})}};c([p({type:Number})],Kg.prototype,"x",void 0),c([p({type:Number})],Kg.prototype,"y",void 0),Kg=JC=c([N("esri.symbols.support.Symbol3DAnchorPosition2D")],Kg);var ZC;let gb=ZC=class extends me{constructor(e){super(e),this.color=new Le([0,0,0,1]),this.size=my(1)}clone(){const e={color:U(this.color)?this.color.clone():null,size:this.size};return new ZC(e)}};c([p(yy)],gb.prototype,"color",void 0),c([p(Uu)],gb.prototype,"size",void 0),gb=ZC=c([N("esri.symbols.support.Symbol3DIconOutline")],gb);const eye=gb;var ag;const tye=Te.getLogger("esri.symbols.IconSymbol3DLayer");let Ql=ag=class extends Yu{constructor(e){super(e),this.material=null,this.resource=null,this.type="icon",this.size=12,this.anchor="center",this.anchorPosition=void 0,this.outline=void 0}clone(){return new ag({anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),enabled:this.enabled,material:U(this.material)?this.material.clone():null,outline:U(this.outline)?this.outline.clone():null,resource:this.resource&&this.resource.clone(),size:this.size})}static fromSimpleMarkerSymbol(e){const t=e.color||fw,r=q9(e),i=e.outline&&e.outline.width>0?{size:e.outline.width,color:(e.outline.color||fw).clone()}:null;return new ag({size:e.size,resource:{primitive:iye(e.style)},material:{color:t},outline:i,anchor:r?"relative":void 0,anchorPosition:r})}static fromPictureMarkerSymbol(e){const t=!e.color||Ame(e.color)?fw:e.color,r=q9(e);return new ag({size:e.width<=e.height?e.height:e.width,resource:{href:e.url},material:{color:t.clone()},anchor:r?"relative":void 0,anchorPosition:r})}static fromCIMSymbol(e){return new ag({resource:{href:SW({mediaType:"application/json",data:JSON.stringify(e.data)})}})}};function q9(e){const t="width"in e?e.width:e.size,r="height"in e?e.height:e.size,i=H9(e.xoffset),n=H9(e.yoffset);return(i||n)&&t&&r?{x:-i/t,y:n/r}:null}function H9(e){return isFinite(e)?e:0}c([p({type:Dv,json:{write:!0}})],Ql.prototype,"material",void 0),c([p({type:Qme,json:{write:!0}})],Ql.prototype,"resource",void 0),c([tt({Icon:"icon"},{readOnly:!0})],Ql.prototype,"type",void 0),c([p(Uu)],Ql.prototype,"size",void 0),c([tt({center:"center",left:"left",right:"right",top:"top",bottom:"bottom",topLeft:"top-left",topRight:"top-right",bottomLeft:"bottom-left",bottomRight:"bottom-right",relative:"relative"}),p({json:{default:"center"}})],Ql.prototype,"anchor",void 0),c([p({type:Kg,json:{type:[Number],read:{reader:e=>new Kg({x:e[0],y:e[1]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],Ql.prototype,"anchorPosition",void 0),c([p({type:eye,json:{write:!0}})],Ql.prototype,"outline",void 0),Ql=ag=c([N("esri.symbols.IconSymbol3DLayer")],Ql);const rye={circle:"circle",cross:"cross",diamond:"kite",square:"square",x:"x",triangle:"triangle",path:null};function iye(e){return rye[e]||(tye.warn(`${e} cannot be mapped to Icon symbol. Fallback to "circle"`),"circle")}const rh=Ql;var fM;let gc=fM=class extends Yu{constructor(e){super(e),this.material=null,this.type="line",this.join="miter",this.cap="butt",this.size=my(1),this.pattern=null}clone(){const e={enabled:this.enabled,material:U(this.material)?this.material.clone():null,size:this.size,join:this.join,cap:this.cap,pattern:U(this.pattern)?this.pattern.clone():null};return new fM(e)}static fromSimpleLineSymbol(e){const t={enabled:!0,size:e.width||1,cap:e.cap||"butt",join:e.join||"miter",pattern:e.style&&e.style!=="inside-frame"?new yN({style:e.style}):null,material:new gm({color:(e.color||fw).clone()})};return new fM(t)}};c([p({type:gm,json:{write:!0}})],gc.prototype,"material",void 0),c([tt({Line:"line"},{readOnly:!0})],gc.prototype,"type",void 0),c([p({type:sZ,json:{write:!0,default:"miter"}})],gc.prototype,"join",void 0),c([p({type:bN,json:{write:!0,default:"butt"}})],gc.prototype,"cap",void 0),c([p(Uu)],gc.prototype,"size",void 0),c([p(nZ)],gc.prototype,"pattern",void 0),gc=fM=c([N("esri.symbols.LineSymbol3DLayer")],gc);const jv=gc;var YC;const nye=li()({sphere:"sphere",cylinder:"cylinder",cube:"cube",cone:"cone",diamond:"diamond",tetrahedron:"tetrahedron",invertedCone:"inverted-cone"});let vb=YC=class extends me{clone(){return new YC({href:this.href,primitive:this.primitive})}};c([p({type:String,json:{read:wN,write:zm}})],vb.prototype,"href",void 0),c([tt(nye)],vb.prototype,"primitive",void 0),vb=YC=c([N("esri.symbols.support.ObjectSymbol3DLayerResource")],vb);const sye=vb;var KC;let Uf=KC=class extends Ze{constructor(){super(...arguments),this.x=0,this.y=0,this.z=0}clone(){return new KC({x:this.x,y:this.y,z:this.z})}};c([p({type:Number})],Uf.prototype,"x",void 0),c([p({type:Number})],Uf.prototype,"y",void 0),c([p({type:Number})],Uf.prototype,"z",void 0),Uf=KC=c([N("esri.symbols.support.Symbol3DAnchorPosition3D")],Uf);var XC;let En=XC=class extends Yu{constructor(e){super(e),this.material=null,this.castShadows=!0,this.resource=null,this.type="object",this.width=void 0,this.height=void 0,this.depth=void 0,this.anchor=void 0,this.anchorPosition=void 0,this.heading=void 0,this.tilt=void 0,this.roll=void 0}clone(){return new XC({heading:this.heading,tilt:this.tilt,roll:this.roll,anchor:this.anchor,anchorPosition:this.anchorPosition&&this.anchorPosition.clone(),depth:this.depth,enabled:this.enabled,height:this.height,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,resource:this.resource&&this.resource.clone(),width:this.width})}get isPrimitive(){return!this.resource||typeof this.resource.href!="string"}};c([p({type:Dv,json:{write:!0}})],En.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],En.prototype,"castShadows",void 0),c([p({type:sye,json:{write:!0}})],En.prototype,"resource",void 0),c([tt({Object:"object"},{readOnly:!0})],En.prototype,"type",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"width",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"height",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"depth",void 0),c([tt({center:"center",top:"top",bottom:"bottom",origin:"origin",relative:"relative"}),p({json:{default:"origin"}})],En.prototype,"anchor",void 0),c([p({type:Uf,json:{type:[Number],read:{reader:e=>new Uf({x:e[0],y:e[1],z:e[2]})},write:{writer:(e,t)=>{t.anchorPosition=[e.x,e.y,e.z]},overridePolicy(){return{enabled:this.anchor==="relative"}}}}})],En.prototype,"anchorPosition",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"heading",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"tilt",void 0),c([p({type:Number,json:{write:!0}})],En.prototype,"roll",void 0),c([p({readOnly:!0})],En.prototype,"isPrimitive",null),En=XC=c([N("esri.symbols.ObjectSymbol3DLayer")],En);const f2=En;var QC;let Jn=QC=class extends Yu{constructor(e){super(e),this.material=null,this.castShadows=!0,this.type="path",this.profile="circle",this.join="miter",this.cap="butt",this.width=void 0,this.height=void 0,this.anchor="center",this.profileRotation="all"}readWidth(e,t){return e??(t.height==null&&t.size!=null?t.size:void 0)}readHeight(e,t){return e??(t.width==null&&t.size!=null?t.size:void 0)}clone(){return new QC({enabled:this.enabled,material:U(this.material)?this.material.clone():null,castShadows:this.castShadows,profile:this.profile,join:this.join,cap:this.cap,width:this.width,height:this.height,profileRotation:this.profileRotation,anchor:this.anchor})}};c([p({type:Dv,json:{write:!0}})],Jn.prototype,"material",void 0),c([p({type:Boolean,nonNullable:!0,json:{write:!0,default:!0}})],Jn.prototype,"castShadows",void 0),c([tt({Path:"path"},{readOnly:!0})],Jn.prototype,"type",void 0),c([p({type:["circle","quad"],json:{write:!0,default:"circle"}})],Jn.prototype,"profile",void 0),c([p({type:sZ,json:{write:!0,default:"miter"}})],Jn.prototype,"join",void 0),c([p({type:Hme,json:{write:!0,default:"butt"}})],Jn.prototype,"cap",void 0),c([p({type:Number,json:{write:{enabled:!0,target:{width:{type:Number},size:{type:Number}}}}})],Jn.prototype,"width",void 0),c([ye("width",["width","size","height"])],Jn.prototype,"readWidth",null),c([p({type:Number,json:{write:!0}})],Jn.prototype,"height",void 0),c([ye("height",["height","size","width"])],Jn.prototype,"readHeight",null),c([p({type:["center","bottom","top"],json:{write:!0,default:"center"}})],Jn.prototype,"anchor",void 0),c([p({type:["heading","all"],json:{write:!0,default:"all"}})],Jn.prototype,"profileRotation",void 0),Jn=QC=c([N("esri.symbols.PathSymbol3DLayer")],Jn);const _N=Jn;var ek;let bb=ek=class extends me{constructor(){super(...arguments),this.color=new Le([0,0,0,1]),this.size=0}clone(){return new ek({color:ie(this.color),size:this.size})}};c([p(yy)],bb.prototype,"color",void 0),c([p(Uu)],bb.prototype,"size",void 0),bb=ek=c([N("esri.symbols.support.Symbol3DHalo")],bb);const oye=bb;var mM;let eu=mM=class extends Yu{constructor(e){super(e),this._userSize=void 0,this.halo=null,this.material=null,this.text=void 0,this.type="text"}get font(){return this._get("font")||null}set font(e){e&&this._userSize&&(e.size=this._userSize),this._set("font",e)}writeFont(e,t,r,i){const n={...i,textSymbol3D:!0};t.font=e.write({},n),delete t.font.size}get size(){return this._userSize!=null?this._userSize:this.font&&this.font.size!=null?this.font.size:9}set size(e){this._userSize=e,this.font&&(this.font.size=this._userSize),this.notifyChange("size")}clone(){return new mM({enabled:this.enabled,font:this.font&&ie(this.font),halo:this.halo&&ie(this.halo),material:U(this.material)?this.material.clone():null,size:this.size,text:this.text})}static fromTextSymbol(e){const t=aye(e.haloColor,e.haloSize),r=e.font?e.font.clone():new e$;return new mM({size:r.size,font:r,halo:t,material:e.color?{color:e.color.clone()}:null,text:e.text})}};function aye(e,t){return e&&t>0?{color:ie(e),size:t}:null}c([p({type:e$,json:{write:!0}})],eu.prototype,"font",null),c([Se("font")],eu.prototype,"writeFont",null),c([p({type:oye,json:{write:!0}})],eu.prototype,"halo",void 0),c([p({type:Dv,json:{write:!0}})],eu.prototype,"material",void 0),c([p(Uu),p()],eu.prototype,"size",null),c([p({type:String,json:{write:!0}})],eu.prototype,"text",void 0),c([tt({Text:"text"},{readOnly:!0})],eu.prototype,"type",void 0),eu=mM=c([N("esri.symbols.TextSymbol3DLayer")],eu);const Vv=eu;var tk;let nd=tk=class extends Yu{constructor(e){super(e),this.color=rk.clone(),this.type="water",this.waterbodySize="medium",this.waveDirection=null,this.waveStrength="moderate"}clone(){return new tk({color:ie(this.color),waterbodySize:this.waterbodySize,waveDirection:this.waveDirection,waveStrength:this.waveStrength})}};c([p({type:Le,nonNullable:!0,json:{type:[jt],write:(e,t,r)=>t[r]=e.toArray(1),default:()=>rk.clone(),defaultEquals:e=>e.toCss(!0)===rk.toCss(!0)}})],nd.prototype,"color",void 0),c([tt({Water:"water"},{readOnly:!0})],nd.prototype,"type",void 0),c([p({type:["small","medium","large"],json:{write:!0,default:"medium"}})],nd.prototype,"waterbodySize",void 0),c([p({type:Number,json:{write:!0,default:null}})],nd.prototype,"waveDirection",void 0),c([p({type:["calm","rippled","slight","moderate"],json:{write:!0,default:"moderate"}})],nd.prototype,"waveStrength",void 0),nd=tk=c([N("esri.symbols.WaterSymbol3DLayer")],nd);const rk=new Le([0,119,190]),xN=nd;var ik;let sf=ik=class extends Ze{constructor(){super(...arguments),this.portal=null}clone(){return new ik({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}};c([p({type:String})],sf.prototype,"name",void 0),c([p({type:String})],sf.prototype,"styleUrl",void 0),c([p({type:String})],sf.prototype,"styleName",void 0),c([p({type:ms})],sf.prototype,"portal",void 0),sf=ik=c([N("esri.symbols.support.StyleOrigin")],sf);const nk=sf;var sk;let yM=sk=class extends Ze{clone(){return new sk({url:this.url})}};c([p({type:String})],yM.prototype,"url",void 0),yM=sk=c([N("esri.symbols.support.Thumbnail")],yM);const oZ=yM,aZ={icon:rh,object:f2,line:jv,path:_N,fill:d2,extrude:mN,text:Vv,water:xN},lye=Je.ofType({base:Yu,key:"type",typeMap:aZ,errorContext:"symbol-layer"}),uye=Te.getLogger("esri.symbols.Symbol3D");let tu=class extends vs{constructor(e){super(e),this.styleOrigin=null,this.thumbnail=null,this.type=null;const t=this.__accessor__&&this.__accessor__.metadatas&&this.__accessor__.metadatas.symbolLayers,r=t&&t.type||Je;this._set("symbolLayers",new r)}get color(){return null}set color(e){uye.error("Symbol3D does not support colors on the symbol level. Colors may be set on individual symbol layer materials instead.")}set symbolLayers(e){Rm(e,this._get("symbolLayers"))}readStyleOrigin(e,t,r){if(e.styleUrl&&e.name){const i=Fv(e.styleUrl,r);return new nk({styleUrl:i,name:e.name})}if(e.styleName&&e.name)return new nk({portal:r&&r.portal||ms.getDefault(),styleName:e.styleName,name:e.name});r&&r.messages&&r.messages.push(new Ys("symbol3d:incomplete-style-origin","Style origin requires either a 'styleUrl' or 'styleName' and a 'name' property",{context:r,definition:e}))}writeStyleOrigin(e,t,r,i){if(e.styleUrl&&e.name){let n=p2(e.styleUrl,i);Eo(n)&&(n=$o(n)),t.styleOrigin={styleUrl:n,name:e.name}}else e.styleName&&e.name&&(e.portal&&i&&i.portal&&!wW(e.portal.restUrl,i.portal.restUrl)?i&&i.messages&&i.messages.push(new Ys("symbol:cross-portal","The symbol style origin cannot be persisted because it refers to an item on a different portal than the one being saved to.",{symbol:this})):t.styleOrigin={styleName:e.styleName,name:e.name})}normalizeCtorArgs(e){return e instanceof Yu||e&&aZ[e.type]?{symbolLayers:[e]}:Array.isArray(e)?{symbolLayers:e}:e}};c([p({json:{read:!1,write:!1}})],tu.prototype,"color",null),c([p({type:lye,nonNullable:!0,json:{write:!0}}),Ct(lW)],tu.prototype,"symbolLayers",null),c([p({type:nk})],tu.prototype,"styleOrigin",void 0),c([ye("styleOrigin")],tu.prototype,"readStyleOrigin",null),c([Se("styleOrigin",{"styleOrigin.styleUrl":{type:String},"styleOrigin.styleName":{type:String},"styleOrigin.name":{type:String}})],tu.prototype,"writeStyleOrigin",null),c([p({type:oZ,json:{read:!1}})],tu.prototype,"thumbnail",void 0),c([p({type:["point-3d","line-3d","polygon-3d","mesh-3d","label-3d"],readOnly:!0})],tu.prototype,"type",void 0),tu=c([N("esri.symbols.Symbol3D")],tu);const Uv=tu;let wb=class extends me{constructor(e){super(e),this.visible=!0}clone(){}};c([p({type:["line"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],wb.prototype,"type",void 0),c([p({readOnly:!0})],wb.prototype,"visible",void 0),wb=c([N("esri.symbols.callouts.Callout3D")],wb);const lZ=wb;var ok;let yw=ok=class extends me{constructor(){super(...arguments),this.color=new Le("white")}clone(){return new ok({color:ie(this.color)})}};c([p(yy)],yw.prototype,"color",void 0),yw=ok=c([N("esri.symbols.callouts.LineCallout3DBorder")],yw);const uZ=yw;Object.freeze({__proto__:null,get LineCallout3DBorder(){return yw},default:uZ});var ak;let sd=ak=class extends lZ{constructor(e){super(e),this.type="line",this.color=new Le([0,0,0,1]),this.size=my(1),this.border=null}get visible(){return this.size>0&&U(this.color)&&this.color.a>0}clone(){return new ak({color:ie(this.color),size:this.size,border:ie(this.border)})}};c([tt({line:"line"},{readOnly:!0})],sd.prototype,"type",void 0),c([p(yy)],sd.prototype,"color",void 0),c([p(Uu)],sd.prototype,"size",void 0),c([p({type:uZ,json:{write:!0}})],sd.prototype,"border",void 0),c([p({readOnly:!0})],sd.prototype,"visible",null),sd=ak=c([N("esri.symbols.callouts.LineCallout3D")],sd);const cye=sd;function SN(e){if(!e)return!1;const t=e.verticalOffset;return!!t&&!(t.screenLength<=0||t.maxWorldLength<=0)}function cZ(e){if(!e||!e.supportsCallout||!e.supportsCallout())return!1;const t=e.callout;return!!t&&!!t.visible&&!!SN(e)}const hZ={types:{key:"type",base:lZ,typeMap:{line:cye}},json:{write:!0}};var lk;let lg=lk=class extends me{constructor(){super(...arguments),this.screenLength=0,this.minWorldLength=0}clone(){return new lk({screenLength:this.screenLength,minWorldLength:this.minWorldLength,maxWorldLength:this.maxWorldLength})}};c([p(Uu)],lg.prototype,"screenLength",void 0),c([p({type:Number,json:{write:!0,default:0}})],lg.prototype,"minWorldLength",void 0),c([p({type:Number,json:{write:!0}})],lg.prototype,"maxWorldLength",void 0),lg=lk=c([N("esri.symbols.support.Symbol3DVerticalOffset")],lg);const dZ=lg;var gM;const pZ=Je.ofType({base:null,key:"type",typeMap:{text:Vv}});let od=gM=class extends Uv{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.styleOrigin=null,this.symbolLayers=new pZ,this.type="label-3d"}supportsCallout(){return!0}hasVisibleCallout(){return cZ(this)}hasVisibleVerticalOffset(){return SN(this)}clone(){return new gM({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail),callout:ie(this.callout),verticalOffset:ie(this.verticalOffset)})}static fromTextSymbol(e){return new gM({symbolLayers:[Vv.fromTextSymbol(e)]})}};c([p({type:dZ,json:{write:!0}})],od.prototype,"verticalOffset",void 0),c([p(hZ)],od.prototype,"callout",void 0),c([p({json:{read:!1,write:!1}})],od.prototype,"styleOrigin",void 0),c([p({type:pZ})],od.prototype,"symbolLayers",void 0),c([tt({LabelSymbol3D:"label-3d"},{readOnly:!0})],od.prototype,"type",void 0),od=gM=c([N("esri.symbols.LabelSymbol3D")],od);const t$=od;var vM;const fZ=Je.ofType({base:null,key:"type",typeMap:{line:jv,path:_N}}),hye=Je.ofType({base:null,key:"type",typeMap:{line:jv,path:_N}});let _b=vM=class extends Uv{constructor(e){super(e),this.symbolLayers=new fZ,this.type="line-3d"}clone(){return new vM({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleLineSymbol(e){return new vM({symbolLayers:[jv.fromSimpleLineSymbol(e)]})}};c([p({type:fZ,json:{type:hye}})],_b.prototype,"symbolLayers",void 0),c([tt({LineSymbol3D:"line-3d"},{readOnly:!0})],_b.prototype,"type",void 0),_b=vM=c([N("esri.symbols.LineSymbol3D")],_b);const r$=_b;let ad=class extends vs{constructor(e){super(e),this.angle=0,this.type=null,this.xoffset=0,this.yoffset=0,this.size=9}hash(){return`${this.type}.${this.angle}.${this.size}.${this.xoffset}.${this.yoffset}`}};c([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],ad.prototype,"angle",void 0),c([p({type:["simple-marker","picture-marker"],readOnly:!0})],ad.prototype,"type",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ad.prototype,"xoffset",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ad.prototype,"yoffset",void 0),c([p({type:Number,cast:e=>e==="auto"?e:Ht(e),json:{write:!0}})],ad.prototype,"size",void 0),ad=c([N("esri.symbols.MarkerSymbol")],ad);const mZ=ad;var uk;const yZ=Je.ofType({base:null,key:"type",typeMap:{fill:d2}});let xb=uk=class extends Uv{constructor(e){super(e),this.symbolLayers=new yZ,this.type="mesh-3d"}clone(){return new uk({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}};c([p({type:yZ})],xb.prototype,"symbolLayers",void 0),c([tt({MeshSymbol3D:"mesh-3d"},{readOnly:!0})],xb.prototype,"type",void 0),xb=uk=c([N("esri.symbols.MeshSymbol3D")],xb);const MN=xb;function dye(e,t,r){return t.imageData?SW({mediaType:t.contentType||"image/png",isBase64:!0,data:t.imageData}):gZ(t.url,r)}function gZ(e,t){return fye(t)&&!Eo(e)&&t.layer.parsedUrl?up(t.layer.parsedUrl.path,"images",e):Fv(e,t)}function pye(e,t,r,i){if(dy(e)){const n=xW(e);t.contentType=n.mediaType,t.imageData=n.data,r&&r.imageData===t.imageData&&r.url&&zm(r.url,t,"url",i)}else zm(e,t,"url",i)}const vZ={json:{read:{source:["imageData","url"],reader:dye},write:{writer(e,t,r,i){pye(e,t,this.source,i)}}}},bZ={readOnly:!0,json:{read:{source:["imageData","url"],reader(e,t,r){const i={};return t.imageData&&(i.imageData=t.imageData),t.contentType&&(i.contentType=t.contentType),t.url&&(i.url=gZ(t.url,r)),i}}}};function fye(e){return e&&(e.origin==="service"||e.origin==="portal-item")&&e.layer&&(e.layer.type==="feature"||e.layer.type==="stream")}var ck;let ta=ck=class extends eZ{constructor(...e){super(...e),this.type="picture-fill",this.url=null,this.xscale=1,this.yscale=1,this.width=12,this.height=12,this.xoffset=0,this.yoffset=0,this.source=null}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string"&&e.imageData==null)return e;const n={};return e&&(n.url=e),t&&(n.outline=t),r!=null&&(n.width=Ht(r)),i!=null&&(n.height=Ht(i)),n}clone(){const e=new ck({color:ie(this.color),height:this.height,outline:this.outline&&this.outline.clone(),url:this.url,width:this.width,xoffset:this.xoffset,xscale:this.xscale,yoffset:this.yoffset,yscale:this.yscale});return e._set("source",ie(this.source)),e}hash(){var e;return`${super.hash()}.${(e=this.color)==null?void 0:e.hash()}.${this.height}.${this.url}.${this.width}.${this.xoffset}.${this.xscale}.${this.yoffset}.${this.yscale}`}};c([tt({esriPFS:"picture-fill"},{readOnly:!0})],ta.prototype,"type",void 0),c([p(vZ)],ta.prototype,"url",void 0),c([p({type:Number,json:{write:!0}})],ta.prototype,"xscale",void 0),c([p({type:Number,json:{write:!0}})],ta.prototype,"yscale",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ta.prototype,"width",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ta.prototype,"height",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ta.prototype,"xoffset",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ta.prototype,"yoffset",void 0),c([p(bZ)],ta.prototype,"source",void 0),ta=ck=c([N("esri.symbols.PictureFillSymbol")],ta);const wZ=ta;var hk;let ja=hk=class extends mZ{constructor(...e){super(...e),this.color=null,this.type="picture-marker",this.url=null,this.source=null,this.height=12,this.width=12,this.size=null}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string"&&e.imageData==null)return e;const i={};return e&&(i.url=e),t!=null&&(i.width=Ht(t)),r!=null&&(i.height=Ht(r)),i}readHeight(e,t){return t.size||e}readWidth(e,t){return t.size||e}clone(){const e=new hk({angle:this.angle,height:this.height,url:this.url,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset});return e._set("source",ie(this.source)),e}hash(){return`${super.hash()}.${this.height}.${this.url}.${this.width}`}};c([p({json:{write:!1}})],ja.prototype,"color",void 0),c([tt({esriPMS:"picture-marker"},{readOnly:!0})],ja.prototype,"type",void 0),c([p(vZ)],ja.prototype,"url",void 0),c([p(bZ)],ja.prototype,"source",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],ja.prototype,"height",void 0),c([ye("height",["height","size"])],ja.prototype,"readHeight",null),c([p({type:Number,cast:Ht,json:{write:!0}})],ja.prototype,"width",void 0),c([p({json:{write:!1}})],ja.prototype,"size",void 0),ja=hk=c([N("esri.symbols.PictureMarkerSymbol")],ja);const Zd=ja;var ld;const _Z=Je.ofType({base:null,key:"type",typeMap:{icon:rh,object:f2,text:Vv}}),W9=Je.ofType({base:null,key:"type",typeMap:{icon:rh,object:f2}});let ud=ld=class extends Uv{constructor(e){super(e),this.verticalOffset=null,this.callout=null,this.symbolLayers=new _Z,this.type="point-3d"}writeSymbolLayers(e,t,r,i){const n=e.filter(s=>s.type!=="text");if(i&&i.messages&&n.length<e.length){const s=e.find(o=>o.type==="text");i.messages.push(new Z("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PointSymbol3D",{symbolLayer:s}))}t[r]=n.map(s=>s.write({},i)).toArray()}supportsCallout(){if((this.symbolLayers?this.symbolLayers.length:0)<1)return!1;for(const e of this.symbolLayers.items)switch(e.type){case"icon":case"text":case"object":continue;default:return!1}return!0}hasVisibleCallout(){return cZ(this)}hasVisibleVerticalOffset(){return SN(this)}clone(){return new ld({verticalOffset:ie(this.verticalOffset),callout:ie(this.callout),styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromSimpleMarkerSymbol(e){return new ld({symbolLayers:[rh.fromSimpleMarkerSymbol(e)]})}static fromPictureMarkerSymbol(e){return new ld({symbolLayers:[rh.fromPictureMarkerSymbol(e)]})}static fromCIMSymbol(e){var t,r;return((t=e.data)==null||(r=t.symbol)==null?void 0:r.type)!=="CIMPointSymbol"?null:e.data.symbol.callout?new ld({symbolLayers:[rh.fromCIMSymbol(e)],callout:{type:"line",size:.5,color:[0,0,0]},verticalOffset:{screenLength:40}}):new ld({symbolLayers:[rh.fromCIMSymbol(e)]})}static fromTextSymbol(e){return new ld({symbolLayers:[Vv.fromTextSymbol(e)]})}};c([p({type:dZ,json:{write:!0}})],ud.prototype,"verticalOffset",void 0),c([p(hZ)],ud.prototype,"callout",void 0),c([p({type:_Z,json:{type:W9,origins:{"web-scene":{type:W9}}}})],ud.prototype,"symbolLayers",void 0),c([Se("web-scene","symbolLayers")],ud.prototype,"writeSymbolLayers",null),c([tt({PointSymbol3D:"point-3d"},{readOnly:!0})],ud.prototype,"type",void 0),ud=ld=c([N("esri.symbols.PointSymbol3D")],ud);const Kf=ud;var Sb;const xZ=Je.ofType({base:null,key:"type",typeMap:{extrude:mN,fill:d2,icon:rh,line:jv,object:f2,text:Vv,water:xN}}),mye=Je.ofType({base:null,key:"type",typeMap:{extrude:mN,fill:d2,icon:rh,line:jv,object:f2,water:xN}});let ug=Sb=class extends Uv{constructor(e){super(e),this.symbolLayers=new xZ,this.type="polygon-3d"}writeSymbolLayers(e,t,r,i){const n=e.filter(s=>s.type!=="text");if(i&&i.messages&&n.length<e.length){const s=e.find(o=>o.type==="text");i.messages.push(new Z("symbol-layer:unsupported","Symbol layers of type 'text' cannot be persisted in PolygonSymbol3D",{symbolLayer:s}))}t[r]=n.map(s=>s.write({},i)).toArray()}clone(){return new Sb({styleOrigin:ie(this.styleOrigin),symbolLayers:ie(this.symbolLayers),thumbnail:ie(this.thumbnail)})}static fromJSON(e){const t=new Sb;if(t.read(e),t.symbolLayers.length===2&&t.symbolLayers.getItemAt(0).type==="fill"&&t.symbolLayers.getItemAt(1).type==="line"){const r=t.symbolLayers.getItemAt(0),i=t.symbolLayers.getItemAt(1);!i.enabled||e.symbolLayers&&e.symbolLayers[1]&&e.symbolLayers[1].enable===!1||(r.outline={size:i.size,color:U(i.material)?i.material.color:null}),t.symbolLayers.removeAt(1)}return t}static fromSimpleFillSymbol(e){return new Sb({symbolLayers:[d2.fromSimpleFillSymbol(e)]})}};c([p({type:xZ,json:{type:mye}})],ug.prototype,"symbolLayers",void 0),c([Se("web-scene","symbolLayers")],ug.prototype,"writeSymbolLayers",null),c([tt({PolygonSymbol3D:"polygon-3d"},{readOnly:!0})],ug.prototype,"type",void 0),ug=Sb=c([N("esri.symbols.PolygonSymbol3D")],ug);const m2=ug;var dk;const x4=new lt({esriSFSSolid:"solid",esriSFSNull:"none",esriSFSHorizontal:"horizontal",esriSFSVertical:"vertical",esriSFSForwardDiagonal:"forward-diagonal",esriSFSBackwardDiagonal:"backward-diagonal",esriSFSCross:"cross",esriSFSDiagonalCross:"diagonal-cross"});let of=dk=class extends eZ{constructor(...e){super(...e),this.color=new Le([0,0,0,.25]),this.outline=new jo,this.type="simple-fill",this.style="solid"}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.style=e),t&&(i.outline=t),r&&(i.color=r),i}clone(){return new dk({color:ie(this.color),outline:this.outline&&this.outline.clone(),style:this.style})}hash(){return`${super.hash()}${this.style}.${this.color&&this.color.hash()}`}};c([p()],of.prototype,"color",void 0),c([p()],of.prototype,"outline",void 0),c([tt({esriSFS:"simple-fill"},{readOnly:!0})],of.prototype,"type",void 0),c([p({type:x4.apiValues,json:{read:x4.read,write:x4.write}})],of.prototype,"style",void 0),of=dk=c([N("esri.symbols.SimpleFillSymbol")],of);const Sp=of;var pk;const S4=new lt({esriSMSCircle:"circle",esriSMSSquare:"square",esriSMSCross:"cross",esriSMSX:"x",esriSMSDiamond:"diamond",esriSMSTriangle:"triangle",esriSMSPath:"path"});let ru=pk=class extends mZ{constructor(...e){super(...e),this.color=new Le([255,255,255,.25]),this.type="simple-marker",this.size=12,this.style="circle",this.outline=new jo}normalizeCtorArgs(e,t,r,i){if(e&&typeof e!="string")return e;const n={};return e&&(n.style=e),t!=null&&(n.size=Ht(t)),r&&(n.outline=r),i&&(n.color=i),n}writeColor(e,t){e&&this.style!=="x"&&this.style!=="cross"&&(t.color=e.toJSON()),e===null&&(t.color=null)}set path(e){this.style="path",this._set("path",e)}clone(){return new pk({angle:this.angle,color:ie(this.color),outline:this.outline&&this.outline.clone(),path:this.path,size:this.size,style:this.style,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){var e;return`${super.hash()}.${this.color&&this.color.hash()}.${this.path}.${this.style}.${(e=this.outline)==null?void 0:e.hash()}`}};c([p()],ru.prototype,"color",void 0),c([Se("color")],ru.prototype,"writeColor",null),c([tt({esriSMS:"simple-marker"},{readOnly:!0})],ru.prototype,"type",void 0),c([p()],ru.prototype,"size",void 0),c([p({type:S4.apiValues,json:{read:S4.read,write:S4.write}})],ru.prototype,"style",void 0),c([p({type:String,json:{write:!0}})],ru.prototype,"path",null),c([p({types:{key:"type",base:null,defaultKeyValue:"simple-line",typeMap:{"simple-line":jo}},json:{default:null,write:!0}})],ru.prototype,"outline",void 0),ru=pk=c([N("esri.symbols.SimpleMarkerSymbol")],ru);const zu=ru;var fk;let Or=fk=class extends vs{constructor(...e){super(...e),this.backgroundColor=null,this.borderLineColor=null,this.borderLineSize=null,this.font=new e$,this.horizontalAlignment="center",this.kerning=!0,this.haloColor=null,this.haloSize=null,this.rightToLeft=null,this.rotated=!1,this.text="",this.type="text",this.verticalAlignment=null,this.xoffset=0,this.yoffset=0,this.angle=0,this.width=null,this.lineWidth=192,this.lineHeight=1}normalizeCtorArgs(e,t,r){if(e&&typeof e!="string")return e;const i={};return e&&(i.text=e),t&&(i.font=t),r&&(i.color=r),i}writeLineWidth(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}castLineWidth(e){return Ht(e)}writeLineHeight(e,t,r,i){i&&typeof i!="string"?i.origin:t[r]=e}clone(){return new fk({angle:this.angle,backgroundColor:ie(this.backgroundColor),borderLineColor:ie(this.borderLineColor),borderLineSize:this.borderLineSize,color:ie(this.color),font:this.font&&this.font.clone(),haloColor:ie(this.haloColor),haloSize:this.haloSize,horizontalAlignment:this.horizontalAlignment,kerning:this.kerning,lineHeight:this.lineHeight,lineWidth:this.lineWidth,rightToLeft:this.rightToLeft,rotated:this.rotated,text:this.text,verticalAlignment:this.verticalAlignment,width:this.width,xoffset:this.xoffset,yoffset:this.yoffset})}hash(){return`${this.backgroundColor&&this.backgroundColor.hash()}.${this.borderLineColor}.${this.borderLineSize}.${this.color.hash()}.${this.font&&this.font.hash()}.${this.haloColor&&this.haloColor.hash()}.${this.haloSize}.${this.horizontalAlignment}.${this.kerning}.${this.rightToLeft}.${this.rotated}.${this.text}.${this.verticalAlignment}.${this.width}.${this.xoffset}.${this.yoffset}.${this.lineHeight}.${this.lineWidth}.${this.angle}`}};c([p({type:Le,json:{write:!0}})],Or.prototype,"backgroundColor",void 0),c([p({type:Le,json:{write:!0}})],Or.prototype,"borderLineColor",void 0),c([p({type:Number,json:{write:!0}})],Or.prototype,"borderLineSize",void 0),c([p({type:e$,json:{write:!0}})],Or.prototype,"font",void 0),c([p({type:["left","right","center","justify"],json:{write:!0}})],Or.prototype,"horizontalAlignment",void 0),c([p({type:Boolean,json:{write:!0}})],Or.prototype,"kerning",void 0),c([p({type:Le,json:{write:!0}})],Or.prototype,"haloColor",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],Or.prototype,"haloSize",void 0),c([p({type:Boolean,json:{write:!0}})],Or.prototype,"rightToLeft",void 0),c([p({type:Boolean,json:{write:!0}})],Or.prototype,"rotated",void 0),c([p({type:String,json:{write:!0}})],Or.prototype,"text",void 0),c([tt({esriTS:"text"},{readOnly:!0})],Or.prototype,"type",void 0),c([p({type:["baseline","top","middle","bottom"],json:{write:!0}})],Or.prototype,"verticalAlignment",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],Or.prototype,"xoffset",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],Or.prototype,"yoffset",void 0),c([p({type:Number,json:{read:e=>e&&-1*e,write:(e,t)=>t.angle=e&&-1*e}})],Or.prototype,"angle",void 0),c([p({type:Number,json:{write:!0}})],Or.prototype,"width",void 0),c([p({type:Number})],Or.prototype,"lineWidth",void 0),c([Se("lineWidth")],Or.prototype,"writeLineWidth",null),c([Ct("lineWidth")],Or.prototype,"castLineWidth",null),c([p({type:Number})],Or.prototype,"lineHeight",void 0),c([Se("lineHeight")],Or.prototype,"writeLineHeight",null),Or=fk=c([N("esri.symbols.TextSymbol")],Or);const zv=Or;var mk;const yye=Te.getLogger("esri.symbols.WebStyleSymbol");let iu=mk=class extends vs{constructor(e){super(e),this.styleName=null,this.portal=null,this.styleUrl=null,this.thumbnail=null,this.name=null,this.type="web-style"}read(e,t){this.portal=t?t.portal:void 0,super.read(e,t)}clone(){return new mk({name:this.name,styleUrl:this.styleUrl,styleName:this.styleName,portal:this.portal})}fetchSymbol(e){return this._fetchSymbol("webRef",e)}fetchCIMSymbol(e){return this._fetchSymbol("cimRef",e)}async _fetchSymbol(e,t){const r=await gye();$r(t);const i=r.resolveWebStyleSymbol(this,{portal:this.portal},e,t);return i.catch(n=>{yye.error("#fetchSymbol()","Failed to create symbol from style",n)}),i}};function gye(){return ae(()=>import("./webStyleSymbolUtils.f6da5811.js"),["assets/webStyleSymbolUtils.f6da5811.js","assets/devEnvironmentUtils.444b8fd1.js"])}c([p({json:{write:!1}})],iu.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],iu.prototype,"styleName",void 0),c([p({type:ms,json:{write:!1}})],iu.prototype,"portal",void 0),c([p({type:String,json:{read:wN,write:zm}})],iu.prototype,"styleUrl",void 0),c([p({type:oZ,json:{read:!1}})],iu.prototype,"thumbnail",void 0),c([p({type:String,json:{write:!0}})],iu.prototype,"name",void 0),c([tt({styleSymbolReference:"web-style"},{readOnly:!0})],iu.prototype,"type",void 0),iu=mk=c([N("esri.symbols.WebStyleSymbol")],iu);const gy=iu;function IN(e){if(!e)return!1;switch(e.type){case"picture-fill":case"picture-marker":case"simple-fill":case"simple-line":case"simple-marker":case"text":case"cim":return!0;default:return!1}}function z0(e){if(!e)return!1;switch(e.type){case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":return!0;default:return!1}}const vm={base:vs,key:"type",typeMap:{"simple-fill":Sp,"picture-fill":wZ,"picture-marker":Zd,"simple-line":jo,"simple-marker":zu,text:zv,"label-3d":t$,"line-3d":r$,"mesh-3d":MN,"point-3d":Kf,"polygon-3d":m2,"web-style":gy,cim:h2},errorContext:"symbol"},vye={base:vs,key:"type",typeMap:{"picture-marker":Zd,"simple-marker":zu,text:zv,"web-style":gy,cim:h2},errorContext:"symbol"},bye=Cv({types:vm}),SZ={base:vs,key:"type",typeMap:{"simple-fill":Sp,"picture-fill":wZ,"picture-marker":Zd,"simple-line":jo,"simple-marker":zu,text:zv,"line-3d":r$,"mesh-3d":MN,"point-3d":Kf,"polygon-3d":m2,"web-style":gy,cim:h2},errorContext:"symbol"},wye={base:vs,key:"type",typeMap:{text:zv,"label-3d":t$},errorContext:"symbol"},J9={base:vs,key:"type",typeMap:{"line-3d":r$,"mesh-3d":MN,"point-3d":Kf,"polygon-3d":m2,"web-style":gy,cim:h2},errorContext:"symbol"},_ye={base:vs,key:"type",typeMap:{"label-3d":t$},errorContext:"symbol"},MZ=ju(vm);var yk;let lo=yk=class extends me{constructor(...e){super(...e),this.isAggregate=!1,this.layer=null,this.popupTemplate=null,this.sourceLayer=null,Object.defineProperty(this,"uid",{value:lw(),configurable:!0})}normalizeCtorArgs(e,t,r,i){return e&&!e.declaredClass?e:{geometry:e,symbol:t,attributes:r,popupTemplate:i}}set attributes(e){const t=this._get("attributes");t!==e&&(this._set("attributes",e),this._notifyLayer("attributes",t,e))}set geometry(e){const t=this._get("geometry");t!==e&&(this._set("geometry",e),this._notifyLayer("geometry",t,e))}set symbol(e){const t=this._get("symbol");t!==e&&(this._set("symbol",e),this._notifyLayer("symbol",t,e))}set visible(e){const t=this._get("visible");t!==e&&(this._set("visible",e),this._notifyLayer("visible",t,e))}getEffectivePopupTemplate(e=!1){if(this.popupTemplate)return this.popupTemplate;for(const t of[this.sourceLayer,this.layer])if(t){if("popupTemplate"in t&&t.popupTemplate)return t.popupTemplate;if(e&&"defaultPopupTemplate"in t&&U(t.defaultPopupTemplate))return t.defaultPopupTemplate}return null}getAttribute(e){return this.attributes&&this.attributes[e]}setAttribute(e,t){if(this.attributes){const r=this.getAttribute(e);this.attributes[e]=t,this._notifyLayer("attributes",r,t,e)}else this.attributes={[e]:t},this._notifyLayer("attributes",void 0,t,e)}getObjectId(){return this.sourceLayer&&"objectIdField"in this.sourceLayer&&this.sourceLayer.objectIdField?this.getAttribute(this.sourceLayer.objectIdField):null}toJSON(){return{geometry:U(this.geometry)?this.geometry.toJSON():null,symbol:U(this.symbol)?this.symbol.toJSON():null,attributes:{...this.attributes},popupTemplate:this.popupTemplate&&this.popupTemplate.toJSON()}}clone(){return new yk(this.cloneProperties())}notifyGeometryChanged(){this._notifyLayer("geometry",this.geometry,this.geometry)}cloneProperties(){return{attributes:ie(this.attributes),geometry:ie(this.geometry),layer:this.layer,popupTemplate:this.popupTemplate&&this.popupTemplate.clone(),sourceLayer:this.sourceLayer,symbol:ie(this.symbol),visible:this.visible}}_notifyLayer(e,t,r,i){if(!this.layer||!("graphicChanged"in this.layer))return;const n={graphic:this,property:e,oldValue:t,newValue:r};e==="attributes"&&(n.attributeName=i),this.layer.graphicChanged(n)}};c([p({value:null})],lo.prototype,"attributes",null),c([p({value:null,types:xh,json:{read:Sr}})],lo.prototype,"geometry",null),c([p({type:Boolean})],lo.prototype,"isAggregate",void 0),c([p()],lo.prototype,"layer",void 0),c([p({type:fy})],lo.prototype,"popupTemplate",void 0),c([p()],lo.prototype,"sourceLayer",void 0),c([p({value:null,types:vm})],lo.prototype,"symbol",null),c([p({type:Boolean,value:!0})],lo.prototype,"visible",null),lo=yk=c([N("esri.Graphic")],lo),function(e){e.generateUID=lw}(lo||(lo={}));const xn=lo;var gk;let Mb=gk=class extends me{constructor(e){super(e),this.minValue=0,this.maxValue=0}clone(){return new gk({minValue:this.minValue,maxValue:this.maxValue})}};c([p({type:Number,json:{write:!0}})],Mb.prototype,"minValue",void 0),c([p({type:Number,json:{write:!0}})],Mb.prototype,"maxValue",void 0),Mb=gk=c([N("esri.renderer.support.AuthoringInfoClassBreakInfo")],Mb);const xye=Mb;var vk;let af=vk=class extends me{constructor(e){super(e),this.field="",this.normalizationField="",this.label="",this.classBreakInfos=[]}clone(){return new vk({field:this.field,normalizationField:this.normalizationField,label:this.label,classBreakInfos:ie(this.classBreakInfos)})}};c([p({type:String,json:{write:!0}})],af.prototype,"field",void 0),c([p({type:String,json:{write:!0}})],af.prototype,"normalizationField",void 0),c([p({type:String,json:{write:!0}})],af.prototype,"label",void 0),c([p({type:[xye],json:{write:!0}})],af.prototype,"classBreakInfos",void 0),af=vk=c([N("esri.renderers.support.AuthoringInfoFieldInfo")],af);const Z9=af;var bk;const _x=new lt({percentTotal:"percent-of-total",ratio:"ratio",percent:"percent"}),xx=new lt({sizeInfo:"size",colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation"}),Y9={key:e=>typeof e=="number"?"number":"string",typeMap:{number:Number,string:String},base:null},K9=["high-to-low","above-and-below","centered-on","extremes"],X9=[...new Set(["high-to-low","above-and-below","centered-on","extremes","90-10","above","below","high-to-low","above-and-below","90-10","above","below"])],Q9=["seconds","minutes","hours","days","months","years"];let xs=bk=class extends me{constructor(e){super(e),this.endTime=null,this.field=null,this.maxSliderValue=null,this.minSliderValue=null,this.startTime=null,this.type=null,this.units=null}castEndTime(e){return typeof e=="string"||typeof e=="number"?e:null}castStartTime(e){return typeof e=="string"||typeof e=="number"?e:null}get style(){return this.type==="color"?this._get("style"):null}set style(e){this._set("style",e)}get theme(){return this.type==="color"||this.type==="size"?this._get("theme")||"high-to-low":null}set theme(e){this._set("theme",e)}clone(){return new bk({endTime:this.endTime,field:this.field,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,startTime:this.startTime,style:this.style,theme:this.theme,type:this.type,units:this.units})}};c([p({types:Y9,json:{write:!0}})],xs.prototype,"endTime",void 0),c([Ct("endTime")],xs.prototype,"castEndTime",null),c([p({type:String,json:{write:!0}})],xs.prototype,"field",void 0),c([p({type:Number,json:{write:!0}})],xs.prototype,"maxSliderValue",void 0),c([p({type:Number,json:{write:!0}})],xs.prototype,"minSliderValue",void 0),c([p({types:Y9,json:{write:!0}})],xs.prototype,"startTime",void 0),c([Ct("startTime")],xs.prototype,"castStartTime",null),c([p({type:_x.apiValues,value:null,json:{type:_x.jsonValues,read:_x.read,write:_x.write}})],xs.prototype,"style",null),c([p({type:X9,value:null,json:{type:X9,origins:{"web-scene":{type:K9,write:{writer:(e,t)=>{K9.indexOf(e)>-1&&(t.theme=e)}}}},write:!0}})],xs.prototype,"theme",null),c([p({type:xx.apiValues,json:{type:xx.jsonValues,read:xx.read,write:xx.write}})],xs.prototype,"type",void 0),c([p({type:Q9,json:{type:Q9,write:!0}})],xs.prototype,"units",void 0),xs=bk=c([N("esri.renderers.support.AuthoringInfoVisualVariable")],xs);const Sye=xs;let bM=class extends me{constructor(e){super(e),this.type=null}};c([p({readOnly:!0,json:{read:!1,write:!0}})],bM.prototype,"type",void 0),bM=c([N("esri.rest.support.ColorRamp")],bM);const TN=bM;var wk;let lf=wk=class extends TN{constructor(e){super(e),this.algorithm=null,this.fromColor=null,this.toColor=null,this.type="algorithmic"}clone(){return new wk({fromColor:ie(this.fromColor),toColor:ie(this.toColor),algorithm:this.algorithm})}};c([tt({esriCIELabAlgorithm:"cie-lab",esriHSVAlgorithm:"hsv",esriLabLChAlgorithm:"lab-lch"})],lf.prototype,"algorithm",void 0),c([p({type:Le,json:{type:[jt],write:!0}})],lf.prototype,"fromColor",void 0),c([p({type:Le,json:{type:[jt],write:!0}})],lf.prototype,"toColor",void 0),c([p({type:["algorithmic"]})],lf.prototype,"type",void 0),lf=wk=c([N("esri.rest.support.AlgorithmicColorRamp")],lf);const $N=lf;var _k;let Ib=_k=class extends TN{constructor(e){super(e),this.colorRamps=null,this.type="multipart"}clone(){return new _k({colorRamps:ie(this.colorRamps)})}};c([p({type:[$N],json:{write:!0}})],Ib.prototype,"colorRamps",void 0),c([p({type:["multipart"]})],Ib.prototype,"type",void 0),Ib=_k=c([N("esri.rest.support.MultipartColorRamp")],Ib);const i$=Ib,n$={key:"type",base:TN,typeMap:{algorithmic:$N,multipart:i$}};function s$(e){return e&&e.type?e.type==="algorithmic"?$N.fromJSON(e):e.type==="multipart"?i$.fromJSON(e):null:null}var xk;const Op=new lt({esriClassifyDefinedInterval:"defined-interval",esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation"}),Sx=new lt({classedSize:"class-breaks-size",classedColor:"class-breaks-color",univariateColorSize:"univariate-color-size",relationship:"relationship",predominance:"predominance",dotDensity:"dot-density"}),e7=["inches","feet","yards","miles","nautical-miles","millimeters","centimeters","decimeters","meters","kilometers","decimal-degrees"],Mye=["high-to-low","above-and-below","above","below","90-10"],Iye=["caret","circle-caret","arrow","circle-arrow","plus-minus","circle-plus-minus","square","circle","triangle","happy-sad","thumb","custom"];let wi=xk=class extends me{constructor(e){super(e),this.colorRamp=null,this.lengthUnit=null,this.maxSliderValue=null,this.minSliderValue=null,this.visualVariables=null}get classificationMethod(){const e=this._get("classificationMethod"),t=this.type;return t&&t!=="relationship"?t==="class-breaks-size"||t==="class-breaks-color"?e||"manual":null:e}set classificationMethod(e){this._set("classificationMethod",e)}readColorRamp(e){if(e)return s$(e)}get fields(){return this.type&&this.type!=="predominance"?null:this._get("fields")}set fields(e){this._set("fields",e)}get field1(){return this.type&&this.type!=="relationship"?null:this._get("field1")}set field1(e){this._set("field1",e)}get field2(){return this.type&&this.type!=="relationship"?null:this._get("field2")}set field2(e){this._set("field2",e)}get focus(){return this.type&&this.type!=="relationship"?null:this._get("focus")}set focus(e){this._set("focus",e)}get numClasses(){return this.type&&this.type!=="relationship"?null:this._get("numClasses")}set numClasses(e){this._set("numClasses",e)}get statistics(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("statistics"):null}set statistics(e){this._set("statistics",e)}get standardDeviationInterval(){const e=this.type;return e&&e!=="relationship"&&e!=="class-breaks-size"&&e!=="class-breaks-color"||this.classificationMethod&&this.classificationMethod!=="standard-deviation"?null:this._get("standardDeviationInterval")}set standardDeviationInterval(e){this._set("standardDeviationInterval",e)}get type(){return this._get("type")}set type(e){let t=e;e==="classed-size"?t="class-breaks-size":e==="classed-color"&&(t="class-breaks-color"),this._set("type",t)}get univariateSymbolStyle(){return this.type==="univariate-color-size"&&this.univariateTheme==="above-and-below"?this._get("univariateSymbolStyle"):null}set univariateSymbolStyle(e){this._set("univariateSymbolStyle",e)}get univariateTheme(){return this.type==="univariate-color-size"?this._get("univariateTheme"):null}set univariateTheme(e){this._set("univariateTheme",e)}clone(){return new xk({classificationMethod:this.classificationMethod,colorRamp:ie(this.colorRamp),fields:this.fields&&this.fields.slice(0),field1:ie(this.field1),field2:ie(this.field2),focus:this.focus,numClasses:this.numClasses,maxSliderValue:this.maxSliderValue,minSliderValue:this.minSliderValue,lengthUnit:this.lengthUnit,statistics:this.statistics,standardDeviationInterval:this.standardDeviationInterval,type:this.type,visualVariables:this.visualVariables&&this.visualVariables.map(e=>e.clone()),univariateSymbolStyle:this.univariateSymbolStyle,univariateTheme:this.univariateTheme})}};c([p({type:Op.apiValues,value:null,json:{type:Op.jsonValues,read:Op.read,write:Op.write,origins:{"web-document":{default:"manual",type:Op.jsonValues,read:Op.read,write:Op.write}}}})],wi.prototype,"classificationMethod",null),c([p({types:n$,json:{write:!0}})],wi.prototype,"colorRamp",void 0),c([ye("colorRamp")],wi.prototype,"readColorRamp",null),c([p({type:[String],value:null,json:{write:!0}})],wi.prototype,"fields",null),c([p({type:Z9,value:null,json:{write:!0}})],wi.prototype,"field1",null),c([p({type:Z9,value:null,json:{write:!0}})],wi.prototype,"field2",null),c([p({type:["HH","HL","LH","LL"],value:null,json:{write:!0}})],wi.prototype,"focus",null),c([p({type:Number,value:null,json:{type:jt,write:!0}})],wi.prototype,"numClasses",null),c([p({type:e7,json:{type:e7,read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],wi.prototype,"lengthUnit",void 0),c([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],wi.prototype,"maxSliderValue",void 0),c([p({type:Number,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],wi.prototype,"minSliderValue",void 0),c([p({type:Object,value:null,json:{write:!0,origins:{"web-scene":{write:!1,read:!1}}}})],wi.prototype,"statistics",null),c([p({type:[.25,.33,.5,1],value:null,json:{type:[.25,.33,.5,1],write:!0}})],wi.prototype,"standardDeviationInterval",null),c([p({type:Sx.apiValues,value:null,json:{type:Sx.jsonValues,read:Sx.read,write:Sx.write}})],wi.prototype,"type",null),c([p({type:[Sye],json:{write:!0}})],wi.prototype,"visualVariables",void 0),c([p({type:Iye,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],wi.prototype,"univariateSymbolStyle",null),c([p({type:Mye,value:null,json:{write:!0,origins:{"web-scene":{write:!1}}}})],wi.prototype,"univariateTheme",null),wi=xk=c([N("esri.renderers.support.AuthoringInfo")],wi);const IZ=wi,M4=new lt({simple:"simple",uniqueValue:"unique-value",classBreaks:"class-breaks",heatmap:"heatmap",dotDensity:"dot-density",dictionary:"dictionary"},{ignoreUnknown:!0});let Tb=class extends me{constructor(e){super(e),this.authoringInfo=null,this.type=null}async getRequiredFields(e){if(!this.collectRequiredFields)return[];const t=new Set;return await this.collectRequiredFields(t,e),Array.from(t).sort()}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getAttributeHash(){return JSON.stringify(this)}getMeshHash(){return JSON.stringify(this)}};c([p({type:IZ,json:{write:!0}})],Tb.prototype,"authoringInfo",void 0),c([p({type:M4.apiValues,readOnly:!0,json:{type:M4.jsonValues,read:!1,write:{writer:M4.write,ignoreOrigin:!0}}})],Tb.prototype,"type",void 0),Tb=c([N("esri.renderers.Renderer")],Tb);const Mp=Tb;var Sk;let wM=Sk=class extends me{constructor(){super(...arguments),this.title=null}clone(){return new Sk({title:this.title})}};c([p({type:String,json:{write:!0}})],wM.prototype,"title",void 0),wM=Sk=c([N("esri.renderers.support.LegendOptions")],wM);const EN=wM;var Mk;let _M=Mk=class extends EN{constructor(){super(...arguments),this.showLegend=null}clone(){return new Mk({title:this.title,showLegend:this.showLegend})}};c([p({type:Boolean,json:{write:!0}})],_M.prototype,"showLegend",void 0),_M=Mk=c([N("esri.renderers.visualVariables.support.VisualVariableLegendOptions")],_M);const TZ=_M,Tye=Te.getLogger("esri.renderers.visualVariables.VisualVariable"),I4=new lt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"});let Va=class extends me{constructor(e){super(e),this.index=null,this.type=null,this.field=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null}castField(e){return e==null?e:typeof e=="function"?(Tye.error(".field: field must be a string value"),null):o2(e)}get arcadeRequired(){return!!this.valueExpression}clone(){}getAttributeHash(){return`${this.type}-${this.field}-${this.valueExpression}`}};c([p()],Va.prototype,"index",void 0),c([p({type:I4.apiValues,readOnly:!0,json:{read:I4.read,write:I4.write}})],Va.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],Va.prototype,"field",void 0),c([Ct("field")],Va.prototype,"castField",null),c([p({type:String,json:{write:!0}})],Va.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],Va.prototype,"valueExpressionTitle",void 0),c([p({readOnly:!0})],Va.prototype,"arcadeRequired",null),c([p({type:TZ,json:{write:!0}})],Va.prototype,"legendOptions",void 0),Va=c([N("esri.renderers.visualVariables.VisualVariable")],Va);const y2=Va;var Ik;let uf=Ik=class extends me{constructor(e){super(e),this.color=null,this.label=null,this.value=null}writeValue(e,t,r){t[r]=e??0}clone(){return new Ik({color:this.color&&this.color.clone(),label:this.label,value:this.value})}};c([p({type:Le,json:{type:[jt],write:!0}})],uf.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],uf.prototype,"label",void 0),c([p({type:Number,json:{write:{writerEnsuresNonNull:!0}}})],uf.prototype,"value",void 0),c([Se("value")],uf.prototype,"writeValue",null),uf=Ik=c([N("esri.renderers.visualVariables.support.ColorStop")],uf);const $ye=uf;var Tk;let cf=Tk=class extends y2{constructor(e){super(e),this.type="color",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new Tk({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([p({readOnly:!0})],cf.prototype,"cache",null),c([p({type:["color"],json:{type:["colorInfo"]}})],cf.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],cf.prototype,"normalizationField",void 0),c([p({type:[$ye],json:{write:!0}})],cf.prototype,"stops",null),cf=Tk=c([N("esri.renderers.visualVariables.ColorVariable")],cf);const $Z=cf;var $k;let cd=$k=class extends me{constructor(e){super(e),this.label=null,this.opacity=null,this.value=null}readOpacity(e,t){return u_(t.transparency)}writeOpacity(e,t,r){t[r]=pN(e)}clone(){return new $k({label:this.label,opacity:this.opacity,value:this.value})}};c([p({type:String,json:{write:!0}})],cd.prototype,"label",void 0),c([p({type:Number,json:{type:jt,write:{target:"transparency"}}})],cd.prototype,"opacity",void 0),c([ye("opacity",["transparency"])],cd.prototype,"readOpacity",null),c([Se("opacity")],cd.prototype,"writeOpacity",null),c([p({type:Number,json:{write:!0}})],cd.prototype,"value",void 0),cd=$k=c([N("esri.renderers.visualVariables.support.OpacityStop")],cd);const Eye=cd;var Ek;let hf=Ek=class extends y2{constructor(e){super(e),this.type="opacity",this.normalizationField=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null}}set stops(e){e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value),this._set("stops",e)}clone(){return new Ek({field:this.field,normalizationField:this.normalizationField,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,stops:this.stops&&this.stops.map(e=>e.clone()),legendOptions:this.legendOptions&&this.legendOptions.clone()})}getAttributeHash(){return`${super.getAttributeHash()}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([p({readOnly:!0})],hf.prototype,"cache",null),c([p({type:["opacity"],json:{type:["transparencyInfo"]}})],hf.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],hf.prototype,"normalizationField",void 0),c([p({type:[Eye],json:{write:!0}})],hf.prototype,"stops",null),hf=Ek=c([N("esri.renderers.visualVariables.OpacityVariable")],hf);const EZ=hf;var Ak;let vc=Ak=class extends y2{constructor(e){super(e),this.axis=null,this.type="rotation",this.rotationType="geographic",this.valueExpressionTitle=null}get cache(){return{hasExpression:!!this.valueExpression,compiledFunc:null}}writeValueExpressionTitleWebScene(e,t,r,i){if(i&&i.messages){const n=`visualVariables[${this.index}]`;i.messages.push(new Z("property:unsupported",this.type+"VisualVariable.valueExpressionTitle is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:n+".valueExpressionTitle",context:i}))}}clone(){return new Ak({axis:this.axis,rotationType:this.rotationType,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,legendOptions:this.legendOptions&&this.legendOptions.clone()})}};c([p({readOnly:!0})],vc.prototype,"cache",null),c([p({type:["heading","tilt","roll"],json:{origins:{"web-scene":{default:"heading",write:!0}}}})],vc.prototype,"axis",void 0),c([p({type:["rotation"],json:{type:["rotationInfo"]}})],vc.prototype,"type",void 0),c([p({type:["geographic","arithmetic"],json:{write:!0,origins:{"web-document":{write:!0,default:"geographic"}}}})],vc.prototype,"rotationType",void 0),c([p({type:String,json:{write:!0}})],vc.prototype,"valueExpressionTitle",void 0),c([Se("web-scene","valueExpressionTitle")],vc.prototype,"writeValueExpressionTitleWebScene",null),vc=Ak=c([N("esri.renderers.visualVariables.RotationVariable")],vc);const o$=vc;var Ck;let cg=Ck=class extends me{constructor(e){super(e),this.label=null,this.size=null,this.value=null}clone(){return new Ck({label:this.label,size:this.size,value:this.value})}};c([p({type:String,json:{write:!0}})],cg.prototype,"label",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],cg.prototype,"size",void 0),c([p({type:Number,json:{write:!0}})],cg.prototype,"value",void 0),cg=Ck=c([N("esri.renderers.visualVariables.support.SizeStop")],cg);const Aye=cg;var kk;let xM=kk=class extends TZ{constructor(){super(...arguments),this.customValues=null}clone(){return new kk({title:this.title,showLegend:this.showLegend,customValues:this.customValues&&this.customValues.slice(0)})}};c([p({type:[Number],json:{write:!0}})],xM.prototype,"customValues",void 0),xM=kk=c([N("esri.renderers.visualVariables.support.SizeVariableLegendOptions")],xM);const Cye=xM;function Xg(e){return e&&e.declaredClass==="esri.renderers.visualVariables.SizeVariable"}function c_(e){return e!=null&&!isNaN(e)&&isFinite(e)}function AZ(e){return e.valueExpression?"expression":e.field&&typeof e.field=="string"?"field":"unknown"}function kye(e,t){const r=t||AZ(e),i=e.valueUnit||"unknown";return r==="unknown"?"constant":e.stops?"stops":e.minSize!=null&&e.maxSize!=null&&e.minDataValue!=null&&e.maxDataValue!=null?"clamped-linear":i==="unknown"?e.minSize!=null&&e.minDataValue!=null?e.minSize&&e.minDataValue?"proportional":"additive":"identity":"real-world-size"}function ort(e){}function Oye(e){return()=>e}function AN(e){return new Fe({wkt:`GEOCCS["Spherical geocentric",
    DATUM["Not specified",
      SPHEROID["Sphere",${e.radius},0]],
    PRIMEM["Greenwich",0.0,
      AUTHORITY["EPSG","8901"]],
    UNIT["m",1.0],
    AXIS["Geocentric X",OTHER],
    AXIS["Geocentric Y",EAST],
    AXIS["Geocentric Z",NORTH]
  ]`})}const CN=AN(ar),h_=AN(Ou),d_=AN(fh),Pye=new Fe({wkt:`GEOCCS["WGS 84",
  DATUM["WGS_1984",
    SPHEROID["WGS 84",${ar.radius},298.257223563,
      AUTHORITY["EPSG","7030"]],
    AUTHORITY["EPSG","6326"]],
  PRIMEM["Greenwich",0,
    AUTHORITY["EPSG","8901"]],
  UNIT["m",1.0,
    AUTHORITY["EPSG","9001"]],
  AXIS["Geocentric X",OTHER],
  AXIS["Geocentric Y",OTHER],
  AXIS["Geocentric Z",NORTH],
  AUTHORITY["EPSG","4978"]
]`});function art(e){return e&&e===Ou?h_:e&&e===fh?d_:CN}function lrt(e){return e&&(Pv(e)||e===h_)?h_:e&&(Rv(e)||e===d_)?d_:CN}function Rye(e){return e&&(Pv(e)||e===h_)?Ou:e&&(Rv(e)||e===d_)?fh:ar}function urt(e){return qL(e)?Ou:HL(e)?fh:ar}const Lye=39.37,Nye=ar.radius*Math.PI/200,CZ=/UNIT\[([^\]]+)\]\]$/i,bm=L,kZ=/UNIT\[([^\]]+)\]/i,Dye=new Set([4261,4305,4807,4810,4811,4812,4816,4819,4821,4901,4902,37225,104139,104140]),Fye=li()({meter:"meters",foot:"feet",foot_us:"us-feet",foot_clarke:"clarke-feet",yard_clarke:"clarke-yards",link_clarke:"clarke-links",yard_sears:"sears-yards",foot_sears:"sears-feet",chain_sears:"sears-chains",chain_benoit_1895_b:"benoit-1895-b-chains",yard_indian:"indian-yards",yard_indian_1937:"indian-1937-yards",foot_gold_coast:"gold-coast-feet",chain_sears_1922_truncated:"sears-1922-truncated-chains","50_kilometers":"50-kilometers","150_kilometers":"150-kilometers"}),Bl=e=>e*e,Nh=e=>e*e*e,p_={length:{baseUnit:"meters",units:{millimeters:{inBaseUnits:.001},centimeters:{inBaseUnits:.01},decimeters:{inBaseUnits:.1},meters:{inBaseUnits:1},kilometers:{inBaseUnits:1e3},inches:{inBaseUnits:.0254},feet:{inBaseUnits:.3048},yards:{inBaseUnits:.9144},miles:{inBaseUnits:1609.344},"nautical-miles":{inBaseUnits:1852},"us-feet":{inBaseUnits:1200/3937}}},area:{baseUnit:"square-meters",units:{"square-millimeters":{inBaseUnits:Bl(.001)},"square-centimeters":{inBaseUnits:Bl(.01)},"square-decimeters":{inBaseUnits:Bl(.1)},"square-meters":{inBaseUnits:1},"square-kilometers":{inBaseUnits:Bl(1e3)},"square-inches":{inBaseUnits:Bl(.0254)},"square-feet":{inBaseUnits:Bl(.3048)},"square-yards":{inBaseUnits:Bl(.9144)},"square-miles":{inBaseUnits:Bl(1609.344)},"square-us-feet":{inBaseUnits:Bl(1200/3937)},acres:{inBaseUnits:.0015625*Bl(1609.344)},ares:{inBaseUnits:100},hectares:{inBaseUnits:1e4}}},volume:{baseUnit:"liters",units:{liters:{inBaseUnits:1},"cubic-millimeters":{inBaseUnits:1e3*Nh(.001)},"cubic-centimeters":{inBaseUnits:1e3*Nh(.01)},"cubic-decimeters":{inBaseUnits:1e3*Nh(.1)},"cubic-meters":{inBaseUnits:1e3},"cubic-kilometers":{inBaseUnits:1e3*Nh(1e3)},"cubic-inches":{inBaseUnits:1e3*Nh(.0254)},"cubic-feet":{inBaseUnits:1e3*Nh(.3048)},"cubic-yards":{inBaseUnits:1e3*Nh(.9144)},"cubic-miles":{inBaseUnits:1e3*Nh(1609.344)}}},angle:{baseUnit:"radians",units:{radians:{inBaseUnits:1},degrees:{inBaseUnits:Math.PI/180}}}},jye=function(){const e={};for(const t in p_)for(const r in p_[t].units)e[r]=t;return e}();function Vye(e,t,r){return e*p_[r].units[t].inBaseUnits}function Uye(e,t,r){return e/p_[r].units[t].inBaseUnits}function Ok(e){const t=jye[e];if(t)return t;throw new Error("unknown measure")}function t7(e,t=null){return t=t||Ok(e),p_[t].baseUnit===e}function yo(e,t,r){if(t===r)return e;const i=Ok(t);if(i!==Ok(r))throw new Error("incompatible units");const n=t7(t,i)?e:Vye(e,t,i);return t7(r,i)?n:Uye(n,r,i)}function zye(e,t,r){return yo(e,t,"meters")/(r*Math.PI/180)}function OZ(e){return Fye.fromJSON(e.toLowerCase())||null}function B0(e){if(e&&typeof e=="object"&&!Rhe(e))return 1;const t=vy(e);return t>1e5?1:t}function Bye(e){return vy(e)>=(e instanceof Fe?Rye(e).metersPerDegree:1e5)?"meters":qye(e)}function vy(e,t=ar.metersPerDegree){return Gye(e,!0)||t}function Gye(e,t=!1){let r,i,n=null;if(e!=null&&(typeof e=="object"?(r=e.wkid,i=e.wkt):typeof e=="number"?r=e:typeof e=="string"&&(i=e)),r){if(qL(r))return Ou.metersPerDegree;if(HL(r))return fh.metersPerDegree;n=bm.values[bm[r]],!n&&t&&Dye.has(r)&&(n=Nye)}else i&&(LZ(i)?n=r7(CZ.exec(i),n):RZ(i)&&(n=r7(kZ.exec(i),n)));return n}function r7(e,t){return e&&e[1]?PZ(e[1]):t}function PZ(e){return parseFloat(e.split(",")[1])}function qye(e){let t,r,i=null;if(e!=null&&(typeof e=="object"?(t=e.wkid,r=e.wkt):typeof e=="number"?t=e:typeof e=="string"&&(r=e)),t)i=bm.units[bm[t]];else if(r){const n=LZ(r)?CZ:RZ(r)?kZ:null;if(n){const s=n.exec(r);s&&s[1]&&(i=Wye(s[1]))}}return U(i)?OZ(i):null}function RZ(e){return/^GEOCCS/i.test(e)}function LZ(e){return/^PROJCS/i.test(e)}const Hye=1e-7;function Wye(e){const t=/[\\"\\']{1}([^\\"\\']+)/.exec(e);let r=t&&t[1];if(!r||bm.units.indexOf(r)===-1){const i=PZ(e);r=null;const n=bm.values;for(let s=0;s<n.length;++s)if(Math.abs(i-n[s])<Hye){r=bm.units[s];break}}return r}const NZ={esriAcres:"acres",esriAres:"ares",esriHectares:"hectares",esriSquareCentimeters:"square-centimeters",esriSquareDecimeters:"square-decimeters",esriSquareFeet:"square-feet",esriSquareInches:"square-inches",esriSquareKilometers:"square-kilometers",esriSquareMeters:"square-meters",esriSquareMiles:"square-miles",esriSquareMillimeters:"square-millimeters",esriSquareUsFeet:"square-us-feet",esriSquareYards:"square-yards"},DZ={esriCentimeters:"centimeters",esriDecimeters:"decimeters",esriFeet:"feet",esriInches:"inches",esriKilometers:"kilometers",esriMeters:"meters",esriMiles:"miles",esriMillimeters:"millimeters",esriNauticalMiles:"nautical-miles",esriYards:"yards"},Jye=li()(NZ),Zye=li()(DZ);li()({...NZ,...DZ});const FZ={inches:yo(1,"meters","inches"),feet:yo(1,"meters","feet"),"us-feet":yo(1,"meters","us-feet"),yards:yo(1,"meters","yards"),miles:yo(1,"meters","miles"),"nautical-miles":yo(1,"meters","nautical-miles"),millimeters:yo(1,"meters","millimeters"),centimeters:yo(1,"meters","centimeters"),decimeters:yo(1,"meters","decimeters"),meters:yo(1,"meters","meters"),kilometers:yo(1,"meters","kilometers"),"decimal-degrees":1/zye(1,"meters",ar.radius)},hp=Te.getLogger("esri.renderers.visualVariables.support.visualVariableUtils"),i7=new xn,SM=Math.PI,jZ=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i;function VZ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(g=>g.type==="color")[0]:e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.ColorVariable")return void hp.warn("The visualVariable should be an instance of esri.renderers.visualVariables.ColorVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:u,hasExpression:h}=i.cache;let d=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].color}if(typeof a!="number")if(h){if(!U(r)||!U(r.arcade))return void hp.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),_=b.createExecContext(s,w);if(!d){const x=b.createSyntaxTree(i.valueExpression);d=b.createFunction(x),i.cache.compiledFunc=d}a=b.executeFunction(d,_)}else o&&(a=o[l]);const f=i.normalizationField,m=o?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=ON(a,u);if(g){const b=g[0],w=g[1],_=b===w?i.stops[b].color:Le.blendColors(i.stops[b].color,i.stops[w].color,g[2],U(r)?r.color:void 0);return new Le(_)}}}function UZ(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(g=>g.type==="opacity")[0]:e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.OpacityVariable")return void hp.warn("The visualVariable should be an instance of esri.renderers.visualVariables.OpacityVariable");const n=typeof t=="number",s=n?null:t,o=s&&s.attributes;let a=n?t:null;const l=i.field,{ipData:u,hasExpression:h}=i.cache;let d=i.cache.compiledFunc;if(!l&&!h){const g=i.stops;return g&&g[0]&&g[0].opacity}if(typeof a!="number")if(h){if(ce(r)||ce(r.arcade))return void hp.error("Use of arcade expressions requires an arcade context");const g={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},b=r.arcade.arcadeUtils,w=b.getViewInfo(g),_=b.createExecContext(s,w);if(!d){const x=b.createSyntaxTree(i.valueExpression);d=b.createFunction(x),i.cache.compiledFunc=d}a=b.executeFunction(d,_)}else o&&(a=o[l]);const f=i.normalizationField,m=o?parseFloat(o[f]):void 0;if(a!=null&&(!f||n||!isNaN(m)&&m!==0)){isNaN(m)||n||(a/=m);const g=ON(a,u);if(g){const b=g[0],w=g[1];if(b===w)return i.stops[b].opacity;{const _=i.stops[b].opacity;return _+(i.stops[w].opacity-_)*g[2]}}}}function kN(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(m=>m.type==="rotation")[0]:e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.RotationVariable")return void hp.warn("The visualVariable should be an instance of esri.renderers.visualVariables.RotationVariable");const n=i.axis||"heading",s=n==="heading"&&i.rotationType==="arithmetic"?90:0,o=n==="heading"&&i.rotationType==="arithmetic"?-1:1,a=typeof t=="number"?null:t,l=a&&a.attributes,u=i.field,{hasExpression:h}=i.cache;let d=i.cache.compiledFunc,f=0;if(!u&&!h)return f;if(h){if(ce(r)||ce(r.arcade))return void hp.error("Use of arcade expressions requires an arcade context");const m={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},g=r.arcade.arcadeUtils,b=g.getViewInfo(m),w=g.createExecContext(a,b);if(!d){const _=g.createSyntaxTree(i.valueExpression);d=g.createFunction(_),i.cache.compiledFunc=d}f=g.executeFunction(d,w)}else l&&(f=l[u]||0);return f=typeof f!="number"||isNaN(f)?null:s+o*f,f}function Yye(e,t,r){const i=typeof t=="number",n=i?null:t,s=n&&n.attributes;let o=i?t:null;const{isScaleDriven:a}=e.cache;let l=e.cache.compiledFunc;if(a){const h=U(r)?r.scale:void 0,d=U(r)?r.view:void 0;o=h==null||d==="3d"?Kye(e):h}else if(!i)switch(e.inputValueType){case"expression":{if(ce(r)||ce(r.arcade))return void hp.error("Use of arcade expressions requires an arcade context");const h={viewingMode:r.viewingMode,scale:r.scale,spatialReference:r.spatialReference},d=r.arcade.arcadeUtils,f=d.getViewInfo(h),m=d.createExecContext(n,f);if(!l){const g=d.createSyntaxTree(e.valueExpression);l=d.createFunction(g),e.cache.compiledFunc=l}o=d.executeFunction(l,m);break}case"field":s&&(o=s[e.field]);break;case"unknown":o=null}if(!c_(o))return null;if(i||!e.normalizationField)return o;const u=s?parseFloat(s[e.normalizationField]):null;return c_(u)&&u!==0?o/u:null}function Kye(e){let t=null,r=null;const i=e.stops;return i?(t=i[0].value,r=i[i.length-1].value):(t=e.minDataValue||0,r=e.maxDataValue||0),(t+r)/2}function a$(e,t,r){const i="visualVariables"in e&&e.visualVariables?e.visualVariables.filter(s=>s.type==="size")[0]:e;if(!i)return;if(i.declaredClass!=="esri.renderers.visualVariables.SizeVariable")return void hp.warn("The visualVariable should be an instance of esri.renderers.visualVariables.SizeVariable");const n=BZ(Yye(i,t,r),i,t,r,i.cache.ipData);return n==null||isNaN(n)?0:n}function zs(e,t,r){return e==null?null:Xg(e)?a$(e,t,r):c_(e)?e:null}function zZ(e,t,r){return c_(r)&&e>r?r:c_(t)&&e<t?t:e}function Xye(e,t,r,i){return e+(zs(t.minSize,r,i)||t.minDataValue)}function Qye(e,t,r){const i=e.stops;let n=i&&i.length&&i[0].size;return n==null&&(n=e.minSize),zs(n,t,r)}function ege(e,t,r,i){const n=(e-t.minDataValue)/(t.maxDataValue-t.minDataValue),s=zs(t.minSize,r,i),o=zs(t.maxSize,r,i),a=U(i)?i.shape:void 0;if(e<=t.minDataValue)return s;if(e>=t.maxDataValue)return o;if(t.scaleBy==="area"&&a){const l=a==="circle",u=l?SM*(s/2)**2:s*s,h=u+n*((l?SM*(o/2)**2:o*o)-u);return l?2*Math.sqrt(h/SM):Math.sqrt(h)}return s+n*(o-s)}function tge(e,t,r,i){const n=U(i)?i.shape:void 0,s=e/t.minDataValue,o=zs(t.minSize,r,i),a=zs(t.maxSize,r,i);let l=null;return l=n==="circle"?2*Math.sqrt(s*(o/2)**2):n==="square"||n==="diamond"||n==="image"?Math.sqrt(s*o**2):s*o,zZ(l,o,a)}function rge(e,t,r,i,n){const[s,o,a]=ON(e,n);if(s===o)return zs(t.stops[s].size,r,i);{const l=zs(t.stops[s].size,r,i);return l+(zs(t.stops[o].size,r,i)-l)*a}}function ige(e,t,r,i){const n=(U(i)&&i.resolution?i.resolution:1)*FZ[t.valueUnit],s=zs(t.minSize,r,i),o=zs(t.maxSize,r,i),{valueRepresentation:a}=t;let l=null;return l=a==="area"?2*Math.sqrt(e/SM)/n:a==="radius"||a==="distance"?2*e/n:e/n,zZ(l,s,o)}function BZ(e,t,r,i,n){switch(t.transformationType){case"additive":return Xye(e,t,r,i);case"constant":return Qye(t,r,i);case"clamped-linear":return ege(e,t,r,i);case"proportional":return tge(e,t,r,i);case"stops":return rge(e,t,r,i,n);case"real-world-size":return ige(e,t,r,i);case"identity":return e;case"unknown":return null}}function nge(e,t,r){const{isScaleDriven:i}=e.cache;if(!(i&&r==="3d"||t))return null;const n={scale:t,view:r};let s=zs(e.minSize,i7,n),o=zs(e.maxSize,i7,n);if(s!=null||o!=null){if(s>o){const a=o;o=s,s=a}return{minSize:s,maxSize:o}}}function sge(e,t,r){if(!e.visualVariables)return;const i=[],n=[],s=[],o=[],a=[];for(const l of e.visualVariables)switch(l.type){case"color":n.push(l);break;case"opacity":s.push(l);break;case"rotation":a.push(l);break;case"size":o.push(l)}return n.forEach(l=>{const u=VZ(l,t,r);i.push({variable:l,value:u})}),s.forEach(l=>{const u=UZ(l,t,r);i.push({variable:l,value:u})}),a.forEach(l=>{const u=kN(l,t,r);i.push({variable:l,value:u})}),o.forEach(l=>{const u=a$(l,t,r);i.push({variable:l,value:u})}),i.filter(l=>l.value!=null)}function ON(e,t){if(!t)return;let r=0,i=t.length-1;return t.some((n,s)=>e<n?(i=s,!0):(r=s,!1)),[r,i,(e-t[r])/(t[i]-t[r])]}function GZ(e,t,r){const i=["proportional","proportional","proportional"];for(const n of e){const s=n.useSymbolValue?"symbol-value":a$(n,t,r);switch(n.axis){case"width":i[0]=s;break;case"depth":i[1]=s;break;case"height":i[2]=s;break;case"width-and-depth":i[0]=s,i[1]=s;break;case"all":case void 0:case null:i[0]=s,i[1]=s,i[2]=s;break;default:n.axis}}return i}var oge=Object.freeze(Object.defineProperty({__proto__:null,getAllSizes:GZ,getColor:VZ,getOpacity:UZ,getRotationAngle:kN,getSize:a$,getSizeForValue:BZ,getSizeFromNumberOrVariable:zs,getSizeRangeAtScale:nge,getVisualVariableValues:sge,viewScaleRE:jZ},Symbol.toStringTag,{value:"Module"})),Pk;const Fy=Te.getLogger("esri.renderers.visualVariables.SizeVariable"),Mx=new lt({width:"width",depth:"depth",height:"height",widthAndDepth:"width-and-depth",all:"all"}),Rk=new lt({unknown:"unknown",inch:"inches",foot:"feet",yard:"yards",mile:"miles","nautical-mile":"nautical-miles",millimeter:"millimeters",centimeter:"centimeters",decimeter:"decimeters",meter:"meters",kilometer:"kilometers","decimal-degree":"decimal-degrees"});function n7(e){if(e!=null)return typeof e=="string"||typeof e=="number"?Ht(e):e.type==="size"?Xg(e)?e:(delete(e={...e}).type,new Qt(e)):void 0}function s7(e,t,r){if(typeof e!="object")return e;const i=new Qt;return i.read(e,r),i}let Qt=Pk=class extends y2{constructor(e){super(e),this.axis=null,this.legendOptions=null,this.normalizationField=null,this.scaleBy=null,this.target=null,this.type="size",this.useSymbolValue=null,this.valueExpression=null,this.valueRepresentation=null,this.valueUnit=null}get cache(){return{ipData:this._interpolateData(),hasExpression:!!this.valueExpression,compiledFunc:null,isScaleDriven:jZ.test(this.valueExpression)}}set expression(e){Fy.warn("'expression' is deprecated since version 4.2. Use 'valueExpression' instead. The only supported expression is 'view.scale'."),e==="view.scale"?(this.valueExpression="$view.scale",this._set("expression",e)):this._set("expression",null)}set index(e){Xg(this.maxSize)&&(this.maxSize.index=`visualVariables[${e}].maxSize`),Xg(this.minSize)&&(this.minSize.index=`visualVariables[${e}].minSize`),this._set("index",e)}get inputValueType(){return AZ(this)}set maxDataValue(e){e&&this.stops&&(Fy.warn("cannot set maxDataValue when stops is not null."),e=null),this._set("maxDataValue",e)}set maxSize(e){e&&this.stops&&(Fy.warn("cannot set maxSize when stops is not null."),e=null),this._set("maxSize",e)}castMaxSize(e){return n7(e)}readMaxSize(e,t,r){return s7(e,t,r)}set minDataValue(e){e&&this.stops&&(Fy.warn("cannot set minDataValue when stops is not null."),e=null),this._set("minDataValue",e)}set minSize(e){e&&this.stops&&(Fy.warn("cannot set minSize when stops is not null."),e=null),this._set("minSize",e)}castMinSize(e){return n7(e)}readMinSize(e,t,r){return s7(e,t,r)}get arcadeRequired(){return!!this.valueExpression||this.minSize&&typeof this.minSize=="object"&&this.minSize.arcadeRequired||this.maxSize&&typeof this.maxSize=="object"&&this.maxSize.arcadeRequired}set stops(e){this.minDataValue==null&&this.maxDataValue==null&&this.minSize==null&&this.maxSize==null?e&&Array.isArray(e)&&(e=e.filter(t=>!!t)).sort((t,r)=>t.value-r.value):e&&(Fy.warn("cannot set stops when one of minDataValue, maxDataValue, minSize or maxSize is not null."),e=null),this._set("stops",e)}get transformationType(){return kye(this,this.inputValueType)}readValueExpression(e,t){return e||t.expression&&"$view.scale"}writeValueExpressionWebScene(e,t,r,i){if(e==="$view.scale"){if(i&&i.messages){const n=this.index,s=typeof n=="string"?n:`visualVariables[${n}]`;i.messages.push(new Z("property:unsupported",this.type+"VisualVariable.valueExpression = '$view.scale' is not supported in Web Scene. Please remove this property to save the Web Scene.",{instance:this,propertyName:s+".valueExpression",context:i}))}}else t[r]=e}readValueUnit(e){return e?Rk.read(e):null}clone(){return new Pk({axis:this.axis,field:this.field,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,maxDataValue:this.maxDataValue,maxSize:Xg(this.maxSize)?this.maxSize.clone():this.maxSize,minDataValue:this.minDataValue,minSize:Xg(this.minSize)?this.minSize.clone():this.minSize,normalizationField:this.normalizationField,stops:this.stops&&this.stops.map(e=>e.clone()),target:this.target,useSymbolValue:this.useSymbolValue,valueRepresentation:this.valueRepresentation,valueUnit:this.valueUnit,legendOptions:this.legendOptions&&this.legendOptions.clone()})}flipSizes(){if(this.transformationType==="clamped-linear"){const{minSize:e,maxSize:t}=this;return this.minSize=t,this.maxSize=e,this}if(this.transformationType==="stops"){const e=this.stops,t=e.map(i=>i.size).reverse(),r=e.length;for(let i=0;i<r;i++)e[i].size=t[i];return this}return this}getAttributeHash(){return`${super.getAttributeHash()}-${this.target}-${this.normalizationField}`}_interpolateData(){return this.stops&&this.stops.map(e=>e.value||0)}};c([p({readOnly:!0})],Qt.prototype,"cache",null),c([p({type:Mx.apiValues,json:{type:Mx.jsonValues,origins:{"web-map":{read:!1}},read:Mx.read,write:Mx.write}})],Qt.prototype,"axis",void 0),c([p({type:String,value:null,json:{read:!1}})],Qt.prototype,"expression",null),c([p()],Qt.prototype,"index",null),c([p({type:String,readOnly:!0})],Qt.prototype,"inputValueType",null),c([p({type:Cye,json:{write:!0}})],Qt.prototype,"legendOptions",void 0),c([p({type:Number,value:null,json:{write:!0}})],Qt.prototype,"maxDataValue",null),c([p({type:Number,value:null,json:{write:!0}})],Qt.prototype,"maxSize",null),c([Ct("maxSize")],Qt.prototype,"castMaxSize",null),c([ye("maxSize")],Qt.prototype,"readMaxSize",null),c([p({type:Number,value:null,json:{write:!0}})],Qt.prototype,"minDataValue",null),c([p({type:Number,value:null,json:{write:!0}})],Qt.prototype,"minSize",null),c([Ct("minSize")],Qt.prototype,"castMinSize",null),c([ye("minSize")],Qt.prototype,"readMinSize",null),c([p({type:String,json:{write:!0}})],Qt.prototype,"normalizationField",void 0),c([p({readOnly:!0})],Qt.prototype,"arcadeRequired",null),c([p({type:String})],Qt.prototype,"scaleBy",void 0),c([p({type:[Aye],value:null,json:{write:!0}})],Qt.prototype,"stops",null),c([p({type:["outline"],json:{write:!0}})],Qt.prototype,"target",void 0),c([p({type:String,readOnly:!0})],Qt.prototype,"transformationType",null),c([p({type:["size"],json:{type:["sizeInfo"]}})],Qt.prototype,"type",void 0),c([p({type:Boolean,json:{write:!0,origins:{"web-map":{read:!1}}}})],Qt.prototype,"useSymbolValue",void 0),c([p({type:String,json:{write:!0}})],Qt.prototype,"valueExpression",void 0),c([ye("valueExpression",["valueExpression","expression"])],Qt.prototype,"readValueExpression",null),c([Se("web-scene","valueExpression")],Qt.prototype,"writeValueExpressionWebScene",null),c([p({type:["radius","diameter","area","width","distance"],json:{write:!0}})],Qt.prototype,"valueRepresentation",void 0),c([p({type:Rk.apiValues,json:{write:Rk.write,origins:{"web-map":{read:!1},"web-scene":{write:!0}}}})],Qt.prototype,"valueUnit",void 0),c([ye("valueUnit")],Qt.prototype,"readValueUnit",null),Qt=Pk=c([N("esri.renderers.visualVariables.SizeVariable")],Qt);const g2=Qt,age=Te.getLogger("esri.renderers.visualVariables.VisualVariableFactory"),lge={color:$Z,size:g2,opacity:EZ,rotation:o$},uge=new lt({colorInfo:"color",transparencyInfo:"opacity",rotationInfo:"rotation",sizeInfo:"size"}),cge=/^\[([^\]]+)\]$/i;let MM=class extends Ze{constructor(){super(...arguments),this.colorVariables=null,this.opacityVariables=null,this.rotationVariables=null,this.sizeVariables=null}set visualVariables(e){if(this._resetVariables(),(e=e&&e.filter(t=>!!t))&&e.length){for(const t of e)switch(t.type){case"color":this.colorVariables.push(t);break;case"opacity":this.opacityVariables.push(t);break;case"rotation":this.rotationVariables.push(t);break;case"size":this.sizeVariables.push(t)}this.sizeVariables.length&&this.sizeVariables.some(t=>!!t.target)&&e.sort((t,r)=>{let i=null;return i=t.target===r.target?0:t.target?1:-1,i});for(let t=0;t<e.length;t++)e[t].index=t;this._set("visualVariables",e)}else this._set("visualVariables",e)}readVariables(e,t,r){const{rotationExpression:i,rotationType:n}=t,s=i&&i.match(cge),o=s&&s[1];if(o&&(e||(e=[]),e.push({type:"rotationInfo",rotationType:n,field:o})),e)return e.map(a=>{const l=uge.read(a.type),u=lge[l];u||(age.warn(`Unknown variable type: ${l}`),r&&r.messages&&r.messages.push(new Ys("visual-variable:unsupported",`visualVariable of type '${l}' is not supported`,{definition:a,context:r})));const h=new u;return h.read(a,r),h})}writeVariables(e,t){const r=[];for(const i of e){const n=i.toJSON(t);n&&r.push(n)}return r}_resetVariables(){this.colorVariables=[],this.opacityVariables=[],this.rotationVariables=[],this.sizeVariables=[]}};c([p()],MM.prototype,"visualVariables",null),MM=c([N("esri.renderers.visualVariables.VisualVariableFactory")],MM);const hge=MM,dge={base:y2,key:"type",typeMap:{opacity:EZ,color:$Z,rotation:o$,size:g2}},Bv=e=>{let t=class extends e{constructor(){super(...arguments),this._vvFactory=new hge}set visualVariables(r){this._vvFactory.visualVariables=r,this._set("visualVariables",this._vvFactory.visualVariables)}readVisualVariables(r,i,n){return this._vvFactory.readVariables(r,i,n)}writeVisualVariables(r,i,n,s){i[n]=this._vvFactory.writeVariables(r,s)}get arcadeRequiredForVisualVariables(){if(!this.visualVariables)return!1;for(const r of this.visualVariables)if(r.arcadeRequired)return!0;return!1}hasVisualVariables(r,i){return r?this.getVisualVariablesForType(r,i).length>0:this.getVisualVariablesForType("size",i).length>0||this.getVisualVariablesForType("color",i).length>0||this.getVisualVariablesForType("opacity",i).length>0||this.getVisualVariablesForType("rotation",i).length>0}getVisualVariablesForType(r,i){const n=this.visualVariables;return n?n.filter(s=>s.type===r&&(typeof i=="string"?s.target===i:i!==!1||!s.target)):[]}async collectVVRequiredFields(r,i){let n=[];this.visualVariables&&(n=n.concat(this.visualVariables));for(const s of n)s&&(s.field&&wa(r,i,s.field),s.normalizationField&&wa(r,i,s.normalizationField),s.valueExpression&&await No(r,i,s.valueExpression))}};return c([p({types:[dge],value:null,json:{write:!0}})],t.prototype,"visualVariables",null),c([ye("visualVariables",["visualVariables","rotationType","rotationExpression"])],t.prototype,"readVisualVariables",null),c([Se("visualVariables")],t.prototype,"writeVisualVariables",null),t=c([N("esri.renderers.mixins.VisualVariablesMixin")],t),t},M1={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function pge(e,t=M1){if(!e)return{symbol:null};const{retainId:r=M1.retainId,ignoreDrivers:i=M1.ignoreDrivers,hasLabelingContext:n=M1.hasLabelingContext,retainCIM:s=M1.retainCIM}=t;let o;if(z0(e)||e instanceof gy)o=e.clone();else if(e.type==="cim"){var a,l;const u=(a=e.data)==null||(l=a.symbol)==null?void 0:l.type;if(u!=="CIMPointSymbol")return{error:new Z("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${u||"unknown"}' is unsupported in 3D`,{symbol:e})};o=s?e.clone():Kf.fromCIMSymbol(e)}else if(e instanceof jo)o=r$.fromSimpleLineSymbol(e);else if(e instanceof zu)o=Kf.fromSimpleMarkerSymbol(e);else if(e instanceof Zd)o=Kf.fromPictureMarkerSymbol(e);else if(e instanceof Sp)o=m2.fromSimpleFillSymbol(e);else{if(!(e instanceof zv))return{error:new Z("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=n?t$.fromTextSymbol(e):Kf.fromTextSymbol(e)}if(r&&o.type!=="cim"&&(o.id=e.id),i&&z0(o))for(let u=0;u<o.symbolLayers.length;++u)o.symbolLayers.getItemAt(u)._ignoreDrivers=!0;return{symbol:o}}function G0(e,t,r,i){const n=fge(e,{},i);n&&(t[r]=n)}function fge(e,t,r){if(!e)return null;if(r&&r.origin==="web-scene"&&!(e instanceof Uv)&&!(e instanceof gy)){const i=pge(e,{retainCIM:!0});return U(i.symbol)?i.symbol.write(t,r):(r.messages&&r.messages.push(new Z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:i.error})),null)}return r&&r.origin==="web-map"&&e.type==="web-style"?(r.messages&&r.messages.push(new Z("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in webmaps. Use CIMSymbol instead when working with WebMap in MapView.`,{symbol:e,context:r})),null):e.write(t,r)}function PN(e,t){return bye(e,null,t)}const v2={types:SZ,json:{write:{writer:G0},origins:{"web-scene":{types:J9,write:{writer:G0},read:{reader:Cv({types:J9})}}}}},qZ={types:{base:vs,key:"type",typeMap:{"simple-fill":vm.typeMap["simple-fill"],"picture-fill":vm.typeMap["picture-fill"],"polygon-3d":vm.typeMap["polygon-3d"]}},json:{write:{writer:G0},origins:{"web-scene":{type:m2,write:{writer:G0}}}}};var Lk;let hd=Lk=class extends me{constructor(e){super(e),this.description=null,this.label=null,this.minValue=null,this.maxValue=0,this.symbol=null}clone(){return new Lk({description:this.description,label:this.label,minValue:this.minValue,maxValue:this.maxValue,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol);return`${this.minValue}.${this.maxValue}.${e}`}};c([p({type:String,json:{write:!0}})],hd.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],hd.prototype,"label",void 0),c([p({type:Number,json:{read:{source:"classMinValue"},write:{target:"classMinValue"}}})],hd.prototype,"minValue",void 0),c([p({type:Number,json:{read:{source:"classMaxValue"},write:{target:"classMaxValue"}}})],hd.prototype,"maxValue",void 0),c([p(v2)],hd.prototype,"symbol",void 0),hd=Lk=c([N("esri.renderers.support.ClassBreakInfo")],hd);const q0=hd;var Nk;const Ix=Te.getLogger("esri.renderers.ClassBreaksRenderer"),HZ="log",IM="percent-of-total",TM="field",Tx=new lt({esriNormalizeByLog:HZ,esriNormalizeByPercentOfTotal:IM,esriNormalizeByField:TM}),mge=br(q0);let _i=Nk=class extends Bv(Mp){constructor(e){super(e),this._compiledValueExpression={valueExpression:null,compiledFunction:null},this.backgroundFillSymbol=null,this.classBreakInfos=null,this.defaultLabel=null,this.defaultSymbol=null,this.field=null,this.isMaxInclusive=!0,this.legendOptions=null,this.normalizationField=null,this.normalizationTotal=null,this.type="class-breaks",this.valueExpression=null,this.valueExpressionTitle=null,this._set("classBreakInfos",[])}readClassBreakInfos(e,t,r){if(!Array.isArray(e))return;let i=t.minValue;return e.map(n=>{const s=new q0;return s.read(n,r),s.minValue==null&&(s.minValue=i),s.maxValue==null&&(s.maxValue=s.minValue),i=s.maxValue,s})}writeClassBreakInfos(e,t,r,i){const n=e.map(s=>s.write({},i));this._areClassBreaksConsecutive()&&n.forEach(s=>delete s.classMinValue),t[r]=n}castField(e){return e==null?e:typeof e=="function"?(Ix.error(".field: field must be a string value"),null):o2(e)}get minValue(){return this.classBreakInfos&&this.classBreakInfos[0]&&this.classBreakInfos[0].minValue||0}get normalizationType(){let e=this._get("normalizationType");const t=!!this.normalizationField,r=this.normalizationTotal!=null;return t||r?(e=t&&TM||r&&IM||null,t&&r&&Ix.warn("warning: both normalizationField and normalizationTotal are set!")):e!==TM&&e!==IM||(e=null),e}set normalizationType(e){this._set("normalizationType",e)}addClassBreakInfo(e,t,r){let i=null;i=typeof e=="number"?new q0({minValue:e,maxValue:t,symbol:MZ(r)}):mge(ie(e)),this.classBreakInfos.push(i),this.classBreakInfos.length===1&&this.notifyChange("minValue")}removeClassBreakInfo(e,t){const r=this.classBreakInfos.length;for(let i=0;i<r;i++){const n=[this.classBreakInfos[i].minValue,this.classBreakInfos[i].maxValue];if(n[0]===e&&n[1]===t){this.classBreakInfos.splice(i,1);break}}}getBreakIndex(e,t){return this.valueExpression&&(ce(t)||ce(t.arcade))&&Ix.warn(""),this.valueExpression?this._getBreakIndexForExpression(e,t):this._getBreakIndexForField(e)}async getClassBreakInfo(e,t){let r=t;this.valueExpression&&(ce(t)||ce(t.arcade))&&(r={...r,arcade:await mh()});const i=this.getBreakIndex(e,r);return i!==-1?this.classBreakInfos[i]:null}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void Ix.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this.getBreakIndex(e,t);return r>-1?this.classBreakInfos[r].symbol:this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(ce(t)||ce(t.arcade))){const n=await mh(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this.getBreakIndex(e,r);return i>-1?this.classBreakInfos[i].symbol:this.defaultSymbol}getSymbols(){const e=[];return this.classBreakInfos.forEach(t=>{t.symbol&&e.push(t.symbol)}),this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){const e=JSON.stringify(this.backgroundFillSymbol),t=JSON.stringify(this.defaultSymbol),r=`${this.normalizationField}.${this.normalizationType}.${this.normalizationTotal}`;return`${e}.${t}.${this.classBreakInfos.reduce((i,n)=>i+n.getMeshHash(),"")}.${r}.${this.field}.${this.valueExpression}`}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}clone(){return new Nk({field:this.field,backgroundFillSymbol:this.backgroundFillSymbol&&this.backgroundFillSymbol.clone(),defaultLabel:this.defaultLabel,defaultSymbol:this.defaultSymbol&&this.defaultSymbol.clone(),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,classBreakInfos:ie(this.classBreakInfos),isMaxInclusive:this.isMaxInclusive,normalizationField:this.normalizationField,normalizationTotal:this.normalizationTotal,normalizationType:this.normalizationType,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),No(e,t,this.valueExpression)];wa(e,t,this.field),wa(e,t,this.normalizationField),await Promise.all(r)}_getBreakIndexForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=IL(t,{});let o=this._compiledValueExpression.valueExpression===this.valueExpression?this._compiledValueExpression.compiledFunction:null;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._compiledValueExpression.compiledFunction=o}this._compiledValueExpression.valueExpression=this.valueExpression;const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._getBreakIndexfromInfos(l)}_getBreakIndexForField(e){const t=this.field,r=e.attributes,i=this.normalizationType;let n=parseFloat(r[t]);if(i){const s=this.normalizationTotal,o=parseFloat(r[this.normalizationField]);if(i===HZ)n=Math.log(n)*Math.LOG10E;else if(i!==IM||isNaN(s)){if(i===TM&&!isNaN(o)){if(isNaN(n)||isNaN(o))return-1;n/=o}}else n=n/s*100}return this._getBreakIndexfromInfos(n)}_getBreakIndexfromInfos(e){const t=this.isMaxInclusive;if(e!=null&&typeof e=="number"&&!isNaN(e))for(let r=0;r<this.classBreakInfos.length;r++){const i=[this.classBreakInfos[r].minValue,this.classBreakInfos[r].maxValue];if(i[0]<=e&&(t?e<=i[1]:e<i[1]))return r}return-1}_areClassBreaksConsecutive(){const e=this.classBreakInfos,t=e.length;for(let r=1;r<t;r++)if(e[r-1].maxValue!==e[r].minValue)return!1;return!0}};c([p(qZ)],_i.prototype,"backgroundFillSymbol",void 0),c([p({type:[q0]})],_i.prototype,"classBreakInfos",void 0),c([ye("classBreakInfos")],_i.prototype,"readClassBreakInfos",null),c([Se("classBreakInfos")],_i.prototype,"writeClassBreakInfos",null),c([p({type:String,json:{write:!0}})],_i.prototype,"defaultLabel",void 0),c([p(v2)],_i.prototype,"defaultSymbol",void 0),c([p({type:String,json:{write:!0}})],_i.prototype,"field",void 0),c([Ct("field")],_i.prototype,"castField",null),c([p({type:Boolean})],_i.prototype,"isMaxInclusive",void 0),c([p({type:EN,json:{write:!0}})],_i.prototype,"legendOptions",void 0),c([p({type:Number,readOnly:!0,value:null,json:{read:!1,write:{overridePolicy(){return this.classBreakInfos.length!==0&&this._areClassBreaksConsecutive()?{enabled:!0}:{enabled:!1}}}}})],_i.prototype,"minValue",null),c([p({type:String,json:{write:!0}})],_i.prototype,"normalizationField",void 0),c([p({type:Number,cast:e=>da(e),json:{write:!0}})],_i.prototype,"normalizationTotal",void 0),c([p({type:Tx.apiValues,value:null,json:{type:Tx.jsonValues,read:Tx.read,write:Tx.write}})],_i.prototype,"normalizationType",null),c([tt({classBreaks:"class-breaks"})],_i.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],_i.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],_i.prototype,"valueExpressionTitle",void 0),_i=Nk=c([N("esri.renderers.ClassBreaksRenderer")],_i);const Gv=_i,T4=-3;class crt{constructor(t,r,i){this._namespace=t,this._storage=r,this._removeFunc=!1,this._hit=0,this._miss=0,this._storage.register(this),this._namespace+=":",i&&(this._storage.registerRemoveFunc(this._namespace,i),this._removeFunc=!0)}destroy(){this._storage.clear(this._namespace),this._removeFunc&&this._storage.deregisterRemoveFunc(this._namespace),this._storage.deregister(this),this._storage=null}get namespace(){return this._namespace.slice(0,-1)}get hitRate(){return this._hit/(this._hit+this._miss)}get size(){return this._storage.size}get maxSize(){return this._storage.maxSize}resetHitRate(){this._hit=this._miss=0}put(t,r,i,n=0){this._storage.put(this._namespace+t,r,i,n)}get(t){const r=this._storage.get(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}pop(t){const r=this._storage.pop(this._namespace+t);return r===void 0?++this._miss:++this._hit,r}updateSize(t,r,i){this._storage.updateSize(this._namespace+t,r,i)}clear(){this._storage.clear(this._namespace)}clearAll(){this._storage.clearAll()}getStats(){return this._storage.getStats()}resetStats(){this._storage.resetStats()}}class WZ{constructor(t=10485760){this._maxSize=t,this._db=new Map,this._size=0,this._hit=0,this._miss=0,this._removeFuncs=new Hd,this._users=new Hd}destroy(){this.clearAll(),this._removeFuncs.clear(),this._users.clear(),this._db=null}register(t){this._users.push(t)}deregister(t){this._users.removeUnordered(t)}registerRemoveFunc(t,r){this._removeFuncs.push([t,r])}deregisterRemoveFunc(t){this._removeFuncs.filterInPlace(r=>r[0]!==t)}get size(){return this._size}get maxSize(){return this._maxSize}set maxSize(t){this._maxSize=Math.max(t,0),this._checkSizeLimit()}put(t,r,i,n){const s=this._db.get(t);if(s&&(this._size-=s.size,this._db.delete(t),s.entry!==r&&this._notifyRemove(t,s.entry,0)),i>this._maxSize)return void this._notifyRemove(t,r,0);if(r===void 0)return void console.warn("Refusing to cache undefined entry ");if(!i||i<0)return void console.warn("Refusing to cache entry with invalid size "+i);const o=1+Math.max(n,T4)-T4;this._db.set(t,{entry:r,size:i,lifetime:o,lives:o}),this._size+=i,this._checkSizeLimit()}updateSize(t,r,i){const n=this._db.get(t);if(n&&n.entry===r){for(this._size-=n.size;i>this._maxSize;){const s=this._notifyRemove(t,r,1);if(!(U(s)&&s>0))return void this._db.delete(t);i=s}n.size=i,this._size+=i,this._checkSizeLimit()}}pop(t){const r=this._db.get(t);if(r)return this._size-=r.size,this._db.delete(t),++this._hit,r.entry;++this._miss}get(t){const r=this._db.get(t);if(r!==void 0)return this._db.delete(t),r.lives=r.lifetime,this._db.set(t,r),++this._hit,r.entry;++this._miss}getStats(){const t={Size:Math.round(this._size/1048576)+"/"+Math.round(this._maxSize/1048576)+"MB","Hit rate":Math.round(100*this._getHitRate())+"%",Entries:this._db.size.toString()},r={},i=new Array;this._db.forEach((o,a)=>{const l=o.lifetime;i[l]=(i[l]||0)+o.size,this._users.forAll(u=>{const h=u.namespace;if(a.startsWith(h)){const d=r[h]||0;r[h]=d+o.size}})});const n={};this._users.forAll(o=>{const a=o.namespace;if(!isNaN(o.hitRate)&&o.hitRate>0){const l=r[a]||0;r[a]=l,n[a]=Math.round(100*o.hitRate)+"%"}else n[a]="0%"});const s=Object.keys(r);s.sort((o,a)=>r[a]-r[o]),s.forEach(o=>t[o]=Math.round(r[o]/2**20)+"MB / "+n[o]);for(let o=i.length-1;o>=0;--o){const a=i[o];a&&(t["Priority "+(o+T4-1)]=Math.round(a/this.size*100)+"%")}return t}resetStats(){this._hit=this._miss=0,this._users.forAll(t=>t.resetHitRate())}clear(t){this._db.forEach((r,i)=>{i.startsWith(t)&&(this._size-=r.size,this._db.delete(i),this._notifyRemove(i,r.entry,0))})}clearAll(){this._db.forEach((t,r)=>this._notifyRemove(r,t.entry,0)),this._size=0,this._db.clear()}_getHitRate(){return this._hit/(this._hit+this._miss)}_notifyRemove(t,r,i){let n;return this._removeFuncs.some(s=>{if(t.startsWith(s[0])){const o=s[1](r,i);return typeof o=="number"&&(n=o),!0}return!1}),n}_checkSizeLimit(){if(!(this._size<=this._maxSize))for(const[t,r]of this._db){if(this._db.delete(t),r.lives<=1){this._size-=r.size;const i=this._notifyRemove(t,r.entry,1);U(i)&&i>0&&(this._size+=i,r.lives=r.lifetime,r.size=i,this._db.set(t,r))}else--r.lives,this._db.set(t,r);if(this._size<=.9*this.maxSize)return}}}class JZ{constructor(t,r){this._storage=new WZ,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r,i){this._storage.put(t,r,i,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}get maxSize(){return this._storage.maxSize}set maxSize(t){this._storage.maxSize=t}}var Dk;const o7=Te.getLogger("esri.renderers.DictionaryRenderer"),yge={type:"CIMSimpleLineCallout",lineSymbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",width:.5,color:[0,0,0,255]}]}};let nu=Dk=class extends Bv(Mp){constructor(e){super(e),this._ongoingRequests=new Map,this._symbolCache=new JZ(100),this.config=null,this.fieldMap=null,this.scaleExpression=null,this.scaleExpressionTitle=null,this.url=null,this.type="dictionary"}writeData(e,t){e&&(t.scalingExpressionInfo={expression:e,returnType:"number"})}writeVisualVariables(e,t,r,i){i!=null&&i.origin||super.writeVisualVariables(e,t,r,i)}clone(){return new Dk({config:ie(this.config),scaleExpression:this.scaleExpression,scaleExpressionTitle:this.scaleExpressionTitle,fieldMap:ie(this.fieldMap),url:ie(this.url),visualVariables:ie(this.visualVariables)})}async getSymbolAsync(e,t){let r;this._dictionaryPromise||(this._dictionaryPromise=this.fetchResources(t));try{r=await this._dictionaryPromise}catch(f){if(sn(f))return this._dictionaryPromise=null,null}const i={};if(this.fieldMap)for(const f of this._symbolFields){const m=this.fieldMap[f];if(m&&e.attributes[m]!==null&&e.attributes[m]!==void 0){const g=""+e.attributes[m];i[f]=g}else i[f]=""}const n=r(i,t);if(!n||typeof n!="string")return null;const s=$L(n).toString(),o=this._symbolCache.get(s);if(o)return o.catch(()=>{this._symbolCache.pop(s)}),o;const a=n.split(";"),l=[],u=[];for(const f of a)if(f&&f.length!==0)if(f.indexOf("po:")===-1)if(f.indexOf("|")!==-1){for(const m of f.split("|"))if(this._itemNames.has(m)){l.push(m);break}}else this._itemNames.has(f)&&l.push(f);else{const m=f.substr(3).split("|");if(m.length===3){const g=m[0],b=m[1];let w=m[2];if(b==="DashTemplate")w=w.split(" ").map(_=>Number(_));else if(b==="Color"){const _=new Le(w).toRgba();w=[_[0],_[1],_[2],255*_[3]]}else w=Number(w);u.push({primitiveName:g,propertyName:b,value:w})}}const h=!U(e.geometry)||!e.geometry.hasZ&&e.geometry.type==="point",d=this._cimPartsToCIMSymbol(l,u,h,t);return this._symbolCache.put(s,d,1),d}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t),this.scaleExpression&&await No(e,t,this.scaleExpression);for(const r in this.fieldMap){const i=this.fieldMap[r];t.has(i)&&e.add(i)}}get arcadeRequired(){return!0}async fetchResources(e){if(this._dictionaryPromise)return this._dictionaryPromise;if(!this.url)return void o7.error("no valid URL!");const t=U(e)?e.abortOptions:null,r=Ee(this.url+"/resources/styles/dictionary-info.json",{responseType:"json",query:{f:"json"},...t}),[{data:i}]=await Promise.all([r,mh()]);if(!i)throw this._dictionaryPromise=null,new Z("esri.renderers.DictionaryRenderer","Bad dictionary data!");const n=i.expression,s=i.authoringInfo;this._refSymbolUrlTemplate=this.url+"/"+i.cimRefTemplateUrl,this._itemNames=new Set(i.itemsNames),this._symbolFields=s.symbol;const o={};if(this.config){const l=this.config;for(const u in l)o[u]=l[u]}if(s.configuration)for(const l of s.configuration)o.hasOwnProperty(l.name)||(o[l.name]=l.value);const a=[];if(U(e)&&e.fields&&this.fieldMap)for(const l of this._symbolFields){const u=this.fieldMap[l],h=e.fields.filter(d=>d.name===u);h.length>0&&a.push({...h[0],name:l})}return this._dictionaryPromise=Ofe(n,U(e)?e.spatialReference:null,a,o).then(l=>{const u={scale:0};return(h,d)=>{const f=l.repurposeFeature({geometry:null,attributes:h});return u.scale=U(d)?d.scale:void 0,l.evaluate({$feature:f,$view:u})}}).catch(l=>(o7.error("Creating dictinoary expression failed:",l),null)),this._dictionaryPromise}getSymbol(){return null}getSymbols(){return[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${this.url}-${JSON.stringify(this.fieldMap)}`}getSymbolFields(){return this._symbolFields}async _getSymbolPart(e,t){if(this._ongoingRequests.has(e))return this._ongoingRequests.get(e).then(n=>n.data);const r=this._refSymbolUrlTemplate.replace(/\{itemName\}/gi,e),i=Ee(r,{responseType:"json",query:{f:"json"},...t});this._ongoingRequests.set(e,i);try{return(await i).data}catch(n){return this._ongoingRequests.delete(e),Promise.reject(n)}}_combineSymbolParts(e,t,r){if(!e||e.length===0)return null;const i={...e[0]};if(e.length>1){i.symbolLayers=[];for(const n of e){const s=n;i.symbolLayers.unshift(...s.symbolLayers)}}return r&&(i.callout=yge),{type:"CIMSymbolReference",symbol:i,primitiveOverrides:t}}async _cimPartsToCIMSymbol(e,t,r,i){const n=new Array(e.length);for(let o=0;o<e.length;o++)n[o]=this._getSymbolPart(e[o],i);const s=await Promise.all(n);return new h2({data:this._combineSymbolParts(s,t,r)})}};c([p({type:Object,json:{read:{source:"configuration"},write:{target:"configuration"}}})],nu.prototype,"config",void 0),c([p({type:Object,json:{write:!0}})],nu.prototype,"fieldMap",void 0),c([p({type:String,json:{read:{source:"scalingExpressionInfo.expression"},write:!0}})],nu.prototype,"scaleExpression",void 0),c([Se("scaleExpression")],nu.prototype,"writeData",null),c([p({type:String,json:{read:{source:"scalingExpressionInfo.title"},write:{target:"scalingExpressionInfo.title",overridePolicy(e){return{enabled:!!e&&!!this.scaleExpression}}}}})],nu.prototype,"scaleExpressionTitle",void 0),c([p({type:String,json:{write:!0}})],nu.prototype,"url",void 0),c([Se("visualVariables")],nu.prototype,"writeVisualVariables",null),nu=Dk=c([N("esri.renderers.DictionaryRenderer")],nu);const ZZ=nu;var hrt=Object.freeze(Object.defineProperty({__proto__:null,default:ZZ},Symbol.toStringTag,{value:"Module"}));function ze(e,t){const r=t?{...t,source:e}:e;return p({aliasOf:r})}var Fk;const gge=Te.getLogger("esri.renderers.support.AttributeColorInfo");let bc=Fk=class extends me{constructor(e){super(e),this.color=null,this.field=null,this.label=null,this.valueExpression=null,this.valueExpressionTitle=null}castField(e){return e==null?e:typeof e=="function"?(gge.error(".field: field must be a string value"),null):o2(e)}getAttributeHash(){return`${this.field}-${this.valueExpression}`}clone(){return new Fk({color:this.color&&this.color.clone(),field:this.field,label:this.label,valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle})}};c([p({type:Le,json:{type:[Number],write:!0}})],bc.prototype,"color",void 0),c([p({type:String,json:{write:!0}})],bc.prototype,"field",void 0),c([Ct("field")],bc.prototype,"castField",null),c([p({type:String,json:{write:!0}})],bc.prototype,"label",void 0),c([p({type:String,json:{write:!0}})],bc.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],bc.prototype,"valueExpressionTitle",void 0),bc=Fk=c([N("esri.renderers.support.AttributeColorInfo")],bc);const vge=bc;var jk;let $M=jk=class extends me{constructor(){super(...arguments),this.unit=null}clone(){return new jk({unit:this.unit})}};c([p({type:String,json:{write:!0}})],$M.prototype,"unit",void 0),$M=jk=c([N("esri.renderers.support.DotDensityLegendOptions")],$M);const bge=$M;var Vk;let An=Vk=class extends Bv(Mp){constructor(e){super(e),this.attributes=null,this.backgroundColor=new Le([0,0,0,0]),this.blendDots=!0,this.dotBlendingEnabled=!0,this.dotShape="square",this.dotSize=1,this.legendOptions=null,this.outline=new jo,this.dotValue=null,this.referenceDotValue=null,this.referenceScale=null,this.seed=1,this.type="dot-density"}calculateDotValue(e){if(this.referenceScale==null)return this.dotValue;const t=e/this.referenceScale*this.dotValue;return t<1?1:t}getSymbol(){return new Sp({outline:this.outline})}async getSymbolAsync(){return this.getSymbol()}getSymbols(){return[this.getSymbol()]}getAttributeHash(){return this.attributes&&this.attributes.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return JSON.stringify(this.outline)}clone(){return new Vk({attributes:ie(this.attributes),backgroundColor:ie(this.backgroundColor),dotBlendingEnabled:ie(this.dotBlendingEnabled),dotShape:ie(this.dotShape),dotSize:ie(this.dotSize),dotValue:ie(this.dotValue),legendOptions:ie(this.legendOptions),outline:ie(this.outline),referenceScale:ie(this.referenceScale),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}getControllerHash(){return`${this.attributes.map(e=>e.field||e.valueExpression||"")}-${this.outline&&JSON.stringify(this.outline.toJSON())||""}`}async collectRequiredFields(e,t){await this.collectVVRequiredFields(e,t);for(const r of this.attributes)r.valueExpression&&await No(e,t,r.valueExpression),r.field&&e.add(r.field)}};c([p({type:[vge],json:{write:!0}})],An.prototype,"attributes",void 0),c([p({type:Le,json:{write:!0}})],An.prototype,"backgroundColor",void 0),c([p({type:Boolean}),ze("dotBlendingEnabled")],An.prototype,"blendDots",void 0),c([p({type:Boolean,json:{write:!0}})],An.prototype,"dotBlendingEnabled",void 0),c([p({type:String,json:{write:!1}})],An.prototype,"dotShape",void 0),c([p({type:Number,json:{write:!1}})],An.prototype,"dotSize",void 0),c([p({type:bge,json:{write:!0}})],An.prototype,"legendOptions",void 0),c([p({type:jo,json:{default:null,write:!0}})],An.prototype,"outline",void 0),c([p({type:Number,json:{write:!0}})],An.prototype,"dotValue",void 0),c([p({type:Number}),ze("dotValue")],An.prototype,"referenceDotValue",void 0),c([p({type:Number,json:{write:!0}})],An.prototype,"referenceScale",void 0),c([p({type:Number,json:{write:!0}})],An.prototype,"seed",void 0),c([tt({dotDensity:"dot-density"})],An.prototype,"type",void 0),An=Vk=c([N("esri.renderers.DotDensityRenderer")],An);const wge=An;var Uk;let $b=Uk=class extends me{constructor(e){super(e),this.color=null,this.ratio=null}clone(){return new Uk({color:this.color,ratio:this.ratio})}};c([p({type:Le,json:{write:!0}})],$b.prototype,"color",void 0),c([p({type:Number,json:{write:!0}})],$b.prototype,"ratio",void 0),$b=Uk=c([N("esri.renderers.support.HeatmapColorStop")],$b);const EM=$b;var zk;let su=zk=class extends Mp{constructor(e){super(e),this.blurRadius=10,this.colorStops=[new EM({ratio:0,color:new Le("rgba(255, 140, 0, 0)")}),new EM({ratio:.75,color:new Le("rgba(255, 140, 0, 1)")}),new EM({ratio:.9,color:new Le("rgba(255, 0,   0, 1)")})],this.field=null,this.fieldOffset=0,this.maxPixelIntensity=100,this.minPixelIntensity=0,this.type="heatmap"}async collectRequiredFields(e,t){const r=this.field;r&&typeof r=="string"&&wa(e,t,r)}getAttributeHash(){return null}getMeshHash(){return`${JSON.stringify(this.colorStops)}.${this.blurRadius}.${this.field}`}clone(){return new zk({blurRadius:this.blurRadius,colorStops:ie(this.colorStops),field:this.field,maxPixelIntensity:this.maxPixelIntensity,minPixelIntensity:this.minPixelIntensity})}};c([p({type:Number,json:{write:!0}})],su.prototype,"blurRadius",void 0),c([p({type:[EM],json:{write:!0}})],su.prototype,"colorStops",void 0),c([p({type:String,json:{write:!0}})],su.prototype,"field",void 0),c([p({type:Number,json:{write:{overridePolicy:(e,t,r)=>({enabled:r==null})}}})],su.prototype,"fieldOffset",void 0),c([p({type:Number,json:{write:!0}})],su.prototype,"maxPixelIntensity",void 0),c([p({type:Number,json:{write:!0}})],su.prototype,"minPixelIntensity",void 0),c([tt({heatmap:"heatmap"})],su.prototype,"type",void 0),su=zk=c([N("esri.renderers.HeatmapRenderer")],su);const _ge=su;var Bk;let df=Bk=class extends Bv(Mp){constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.type="simple"}async collectRequiredFields(e,t){await Promise.all([this.collectSymbolFields(e,t),this.collectVVRequiredFields(e,t)])}async collectSymbolFields(e,t){await Promise.all(this.getSymbols().map(r=>r.collectRequiredFields(e,t)))}getSymbol(e,t){return this.symbol}async getSymbolAsync(e,t){return this.symbol}getSymbols(){return this.symbol?[this.symbol]:[]}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return this.getSymbols().reduce((e,t)=>e+JSON.stringify(t),"")}get arcadeRequired(){return this.arcadeRequiredForVisualVariables}clone(){return new Bk({description:this.description,label:this.label,symbol:this.symbol&&this.symbol.clone(),visualVariables:ie(this.visualVariables),authoringInfo:this.authoringInfo&&this.authoringInfo.clone()})}};c([p({type:String,json:{write:!0}})],df.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],df.prototype,"label",void 0),c([p(v2)],df.prototype,"symbol",void 0),c([tt({simple:"simple"})],df.prototype,"type",void 0),df=Bk=c([N("esri.renderers.SimpleRenderer")],df);const l$=df,xge=["esri.Color","esri.portal.Portal","esri.symbols.support.Symbol3DAnchorPosition2D","esri.symbols.support.Symbol3DAnchorPosition3D"];function Gk(e){return e instanceof Ze}function a7(e){return e instanceof Je?Object.keys(e.items):Gk(e)?jn(e).keys():e?Object.keys(e):[]}function $x(e,t){return e instanceof Je?e.items[t]:e[t]}function Sge(e,t){return!(!Array.isArray(e)||!Array.isArray(t))&&e.length!==t.length}function gw(e){return e?e.declaredClass:null}function YZ(e,t){const r=e.diff;if(r&&typeof r=="function")return r(e,t);const i=a7(e),n=a7(t);if(i.length===0&&n.length===0)return;if(!i.length||!n.length||Sge(e,t))return{type:"complete",oldValue:e,newValue:t};const s=n.filter(d=>i.indexOf(d)===-1),o=i.filter(d=>n.indexOf(d)===-1),a=i.filter(d=>n.indexOf(d)>-1&&$x(e,d)!==$x(t,d)).concat(s,o).sort(),l=gw(e);if(l&&xge.indexOf(l)>-1&&a.length)return{type:"complete",oldValue:e,newValue:t};let u;const h=Gk(e)&&Gk(t);for(const d of a){const f=$x(e,d),m=$x(t,d);let g;(h||typeof f!="function"&&typeof m!="function")&&f!==m&&(f==null&&m==null||(g=r&&r[d]&&typeof r[d]=="function"?r[d](f,m):typeof f=="object"&&typeof m=="object"&&gw(f)===gw(m)?YZ(f,m):{type:"complete",oldValue:f,newValue:m},U(g)&&(U(u)?u.diff[d]=g:u={type:"partial",diff:{[d]:g}})))}return u}function Mge(e,t){if(ce(e))return!1;const r=t.split(".");let i=e;for(const n of r){if(i.type==="complete")return!0;if(i.type!=="partial")return!1;{const s=i.diff[n];if(!s)return!1;i=s}}return!0}function drt(e,t){for(const r of t)if(Mge(e,r))return!0;return!1}function Ige(e,t){if(!(typeof e=="function"||typeof t=="function"||ce(e)&&ce(t)))return ce(e)||ce(t)||typeof e=="object"&&typeof t=="object"&&gw(e)!==gw(t)?{type:"complete",oldValue:e,newValue:t}:YZ(e,t)}var qk;let pf=qk=class extends me{constructor(e){super(e),this.description=null,this.label=null,this.symbol=null,this.value=null}clone(){return new qk({value:this.value,description:this.description,label:this.label,symbol:this.symbol?this.symbol.clone():null})}getMeshHash(){const e=JSON.stringify(this.symbol&&this.symbol.toJSON());return`${this.value}.${e}`}};c([p({type:String,json:{write:!0}})],pf.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],pf.prototype,"label",void 0),c([p(v2)],pf.prototype,"symbol",void 0),c([p({type:[String,Number],json:{type:String,write:{writer:(e,t)=>{t.value=e?.toString()}}}})],pf.prototype,"value",void 0),pf=qk=c([N("esri.renderers.support.UniqueValueInfo")],pf);const H0=pf,Tge=()=>!!ge("enable-feature:force-wosr"),$4={};async function $ge(e,t){try{return{data:(await kge(e,t)).data,baseUrl:Ihe(e),styleUrl:e}}catch(r){return wh(r),null}}function Ege(e,t,r){const i=t&&t.portal||ms.getDefault();let n;const s=`${i.url} - ${i.user&&i.user.username} - ${e}`;return $4[s]||($4[s]=Age(e,i,r).then(o=>(n=o,o.fetchData())).then(o=>({data:o,baseUrl:n.itemUrl,styleName:e}))),$4[s]}function Age(e,t,r){return t.load(r).then(()=>{const i=new Yc({disableExtraQuery:!0,query:`owner:${l7} AND type:${u7} AND typekeywords:"${e}"`});return t.queryItems(i,r)}).then(({results:i})=>{let n=null;const s=e.toLowerCase();if(i&&Array.isArray(i)){for(const o of i)if(o.typeKeywords.some(a=>a.toLowerCase()===s)&&o.type===u7&&o.owner===l7){n=o;break}}if(!n)throw new Z("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return n.load(r)})}function Cge(e,t,r){return e.styleUrl?$ge(e.styleUrl,r):e.styleName?Ege(e.styleName,t,r):Promise.reject(new Z("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function prt(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function frt(e,t){if(t==="cimRef")return e.cimRef;if(e.formatInfos&&!Tge()){for(const r of e.formatInfos)if(r.type==="gltf")return r.href}return e.webRef}function kge(e,t){const r={responseType:"json",query:{f:"json"},...t};return Ee($o(e),r)}const l7="esri_en",u7="Style",mrt="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";var Eb;const Pp=Te.getLogger("esri.renderers.UniqueValueRenderer"),Oge=br(H0);let Gr=Eb=class extends Bv(Mp){constructor(e){super(e),this._valueInfoMap={},this._isDefaultSymbolDerived=!1,this.type="unique-value",this.backgroundFillSymbol=null,this.field=null,this.field2=null,this.field3=null,this.valueExpression=null,this.valueExpressionTitle=null,this.legendOptions=null,this.defaultLabel=null,this.fieldDelimiter=null,this.portal=null,this.styleOrigin=null,this.diff={uniqueValueInfos(t,r){if(!t&&!r)return;if(!t||!r)return{type:"complete",oldValue:t,newValue:r};let i=!1;const n={type:"collection",added:[],removed:[],changed:[],unchanged:[]};for(let s=0;s<r.length;s++){const o=t.find(a=>a.value===r[s].value);o?Ige(o,r[s])?(n.changed.push({type:"complete",oldValue:o,newValue:r[s]}),i=!0):n.unchanged.push({oldValue:o,newValue:r[s]}):(n.added.push(r[s]),i=!0)}for(let s=0;s<t.length;s++)r.find(o=>o.value===t[s].value)||(n.removed.push(t[s]),i=!0);return i?n:void 0}},this._set("uniqueValueInfos",[])}get _cache(){return{compiledFunc:null}}castField(e){return e==null||typeof e=="function"?e:o2(e)}writeField(e,t,r,i){typeof e=="string"?t[r]=e:i&&i.messages?i.messages.push(new Z("property:unsupported","UniqueValueRenderer.field set to a function cannot be written to JSON")):Pp.error(".field: cannot write field to JSON since it's not a string value")}set defaultSymbol(e){this._isDefaultSymbolDerived=!1,this._set("defaultSymbol",e)}readPortal(e,t,r){return r.portal||ms.getDefault()}readStyleOrigin(e,t,r){if(t.styleName)return Object.freeze({styleName:t.styleName});if(t.styleUrl){const i=Fv(t.styleUrl,r);return Object.freeze({styleUrl:i})}}writeStyleOrigin(e,t,r,i){e.styleName?t.styleName=e.styleName:e.styleUrl&&(t.styleUrl=p2(e.styleUrl,i))}set uniqueValueInfos(e){this.styleOrigin?Pp.error("#uniqueValueInfos=","Cannot modify unique value infos of a UniqueValueRenderer created from a web style"):(this._set("uniqueValueInfos",e),this._updateValueInfoMap())}addUniqueValueInfo(e,t){if(this.styleOrigin)return void Pp.error("#addUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");let r;r=typeof e=="object"?Oge(e):new H0({value:e,symbol:MZ(t)}),this.uniqueValueInfos.push(r),this._valueInfoMap[r.value]=r}removeUniqueValueInfo(e){if(this.styleOrigin)Pp.error("#removeUniqueValueInfo()","Cannot modify unique value infos of a UniqueValueRenderer created from a web style");else for(let t=0;t<this.uniqueValueInfos.length;t++)if(this.uniqueValueInfos[t].value===e+""){delete this._valueInfoMap[e],this.uniqueValueInfos.splice(t,1);break}}async getUniqueValueInfo(e,t){let r=t;return this.valueExpression&&(ce(t)||ce(t.arcade))&&(r={...r,arcade:await mh()}),this._getUniqueValueInfo(e,r)}getSymbol(e,t){if(this.valueExpression&&(ce(t)||ce(t.arcade)))return void Pp.error("#getSymbol()","Please use getSymbolAsync if valueExpression is used");const r=this._getUniqueValueInfo(e,t);return r&&r.symbol||this.defaultSymbol}async getSymbolAsync(e,t){let r=t;if(this.valueExpression&&(ce(r)||ce(r.arcade))){const n=await mh(),{arcadeUtils:s}=n;s.hasGeometryOperations(this.valueExpression)&&await s.enableGeometryOperations(),r={...r,arcade:n}}const i=this._getUniqueValueInfo(e,r);return i&&i.symbol||this.defaultSymbol}getSymbols(){const e=[];for(const t of this.uniqueValueInfos)t.symbol&&e.push(t.symbol);return this.defaultSymbol&&e.push(this.defaultSymbol),e}getAttributeHash(){return this.visualVariables&&this.visualVariables.reduce((e,t)=>e+t.getAttributeHash(),"")}getMeshHash(){return`${JSON.stringify(this.backgroundFillSymbol)}.${JSON.stringify(this.defaultSymbol)}.${this.uniqueValueInfos.reduce((e,t)=>e+t.getMeshHash(),"")}.${`${this.field}.${this.field2}.${this.field3}.${this.fieldDelimiter}`}.${this.valueExpression}`}clone(){const e=new Eb({field:this.field,field2:this.field2,field3:this.field3,defaultLabel:this.defaultLabel,defaultSymbol:ie(this.defaultSymbol),valueExpression:this.valueExpression,valueExpressionTitle:this.valueExpressionTitle,fieldDelimiter:this.fieldDelimiter,visualVariables:ie(this.visualVariables),legendOptions:ie(this.legendOptions),authoringInfo:this.authoringInfo&&this.authoringInfo.clone(),backgroundFillSymbol:ie(this.backgroundFillSymbol)});this._isDefaultSymbolDerived&&(e._isDefaultSymbolDerived=!0),e._set("portal",this.portal);const t=ie(this.uniqueValueInfos);return this.styleOrigin&&(e._set("styleOrigin",Object.freeze(ie(this.styleOrigin))),Object.freeze(t)),e._set("uniqueValueInfos",t),e._updateValueInfoMap(),e}get arcadeRequired(){return this.arcadeRequiredForVisualVariables||!!this.valueExpression}async collectRequiredFields(e,t){const r=[this.collectVVRequiredFields(e,t),this.collectSymbolFields(e,t)];await Promise.all(r)}async collectSymbolFields(e,t){const r=[...this.getSymbols().map(i=>i.collectRequiredFields(e,t)),No(e,t,this.valueExpression)];wa(e,t,this.field),wa(e,t,this.field2),wa(e,t,this.field3),await Promise.all(r)}populateFromStyle(){return Cge(this.styleOrigin,{portal:this.portal}).then(e=>{const t=[];return this._valueInfoMap={},e&&e.data&&Array.isArray(e.data.items)&&e.data.items.forEach(r=>{const i=new gy({styleUrl:e.styleUrl,styleName:e.styleName,portal:this.portal,name:r.name});this.defaultSymbol||r.name!==e.data.defaultItem||(this.defaultSymbol=i,this._isDefaultSymbolDerived=!0);const n=new H0({value:r.name,symbol:i});t.push(n),this._valueInfoMap[r.name]=n}),this._set("uniqueValueInfos",Object.freeze(t)),!this.defaultSymbol&&this.uniqueValueInfos.length&&(this.defaultSymbol=this.uniqueValueInfos[0].symbol,this._isDefaultSymbolDerived=!0),this})}_updateValueInfoMap(){this._valueInfoMap={},this.uniqueValueInfos.forEach(e=>this._valueInfoMap[e.value+""]=e)}_getUniqueValueInfo(e,t){return this.valueExpression?this._getUnqiueValueInfoForExpression(e,t):this._getUnqiueValueInfoForFields(e)}_getUnqiueValueInfoForExpression(e,t){const{viewingMode:r,scale:i,spatialReference:n,arcade:s}=IL(t,{});let o=this._cache.compiledFunc;const a=s.arcadeUtils;if(!o){const u=a.createSyntaxTree(this.valueExpression);o=a.createFunction(u),this._cache.compiledFunc=o}const l=a.executeFunction(o,a.createExecContext(e,a.getViewInfo({viewingMode:r,scale:i,spatialReference:n})));return this._valueInfoMap[l+""]}_getUnqiueValueInfoForFields(e){const t=this.field,r=e.attributes;let i;if(typeof t!="function"&&this.field2){const n=this.field2,s=this.field3,o=[];t&&o.push(r[t]),n&&o.push(r[n]),s&&o.push(r[s]),i=o.join(this.fieldDelimiter||"")}else typeof t=="function"?i=t(e):t&&(i=r[t]);return this._valueInfoMap[i+""]}static fromPortalStyle(e,t){const r=new Eb(t&&t.properties);r._set("styleOrigin",Object.freeze({styleName:e})),r._set("portal",t&&t.portal||ms.getDefault());const i=r.populateFromStyle();return i.catch(n=>{Pp.error(`#fromPortalStyle('${e}'[, ...])`,"Failed to create unique value renderer from style name",n)}),i}static fromStyleUrl(e,t){const r=new Eb(t&&t.properties);r._set("styleOrigin",Object.freeze({styleUrl:e}));const i=r.populateFromStyle();return i.catch(n=>{Pp.error(`#fromStyleUrl('${e}'[, ...])`,"Failed to create unique value renderer from style URL",n)}),i}};c([p({readOnly:!0})],Gr.prototype,"_cache",null),c([tt({uniqueValue:"unique-value"})],Gr.prototype,"type",void 0),c([p(qZ)],Gr.prototype,"backgroundFillSymbol",void 0),c([p({json:{type:String,read:{source:"field1"},write:{target:"field1"}}})],Gr.prototype,"field",void 0),c([Ct("field")],Gr.prototype,"castField",null),c([Se("field")],Gr.prototype,"writeField",null),c([p({type:String,json:{write:!0}})],Gr.prototype,"field2",void 0),c([p({type:String,json:{write:!0}})],Gr.prototype,"field3",void 0),c([p({type:String,json:{write:!0}})],Gr.prototype,"valueExpression",void 0),c([p({type:String,json:{write:!0}})],Gr.prototype,"valueExpressionTitle",void 0),c([p({type:EN,json:{write:!0}})],Gr.prototype,"legendOptions",void 0),c([p({type:String,json:{write:!0}})],Gr.prototype,"defaultLabel",void 0),c([p(gH({...v2},{json:{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}},origins:{"web-scene":{write:{overridePolicy(){return{enabled:!this._isDefaultSymbolDerived}}}}}}}))],Gr.prototype,"defaultSymbol",null),c([p({type:String,json:{write:!0}})],Gr.prototype,"fieldDelimiter",void 0),c([p({type:ms,readOnly:!0})],Gr.prototype,"portal",void 0),c([ye("portal",["styleName"])],Gr.prototype,"readPortal",null),c([p({readOnly:!0,json:{write:{enabled:!1,overridePolicy:()=>({enabled:!0})}}})],Gr.prototype,"styleOrigin",void 0),c([ye("styleOrigin",["styleName","styleUrl"])],Gr.prototype,"readStyleOrigin",null),c([Se("styleOrigin",{styleName:{type:String},styleUrl:{type:String}})],Gr.prototype,"writeStyleOrigin",null),c([p({type:[H0],json:{write:{overridePolicy(){return this.styleOrigin?{enabled:!1}:{enabled:!0}}}}})],Gr.prototype,"uniqueValueInfos",null),Gr=Eb=c([N("esri.renderers.UniqueValueRenderer")],Gr);const qv=Gr,RN={key:"type",base:Mp,typeMap:{heatmap:_ge,simple:l$,"unique-value":qv,"class-breaks":Gv,"dot-density":wge,dictionary:ZZ},errorContext:"renderer"},KZ={key:"type",base:Mp,typeMap:{simple:l$,"unique-value":qv,"class-breaks":Gv},errorContext:"renderer"};function W0(e,t){return XZ(e,null,t)}const Pge=Cv({types:RN});function XZ(e,t,r){return e?e&&(e.styleName||e.styleUrl)&&e.type!=="uniqueValue"?(r&&r.messages&&r.messages.push(new Ys("renderer:unsupported","Only UniqueValueRenderer can be referenced from a web style, but found '"+e.type+"'",{definition:e,context:r})),null):Pge(e,t,r):null}let AM=class extends Ze{constructor(e){super(e),this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(!this._isHandle(e)&&!Array.isArray(e)&&!Je.isCollection(e))return this;const r=this._getOrCreateGroup(t);return Array.isArray(e)||Je.isCollection(e)?e.forEach(i=>this._isHandle(i)&&r.push(i)):r.push(e),this.notifyChange("size"),this}forEach(e,t){if(typeof e=="function")this._groups.forEach(r=>r.forEach(e));else{const r=this._getGroup(e);r&&t&&r.forEach(t)}}has(e){return this._groups.has(this._ensureGroupKey(e))}remove(e){if(Array.isArray(e)||Je.isCollection(e))return e.forEach(this.remove,this),this;if(!this.has(e))return this;const t=this._getGroup(e);for(let r=0;r<t.length;r++)t[r].remove();return this._deleteGroup(e),this.notifyChange("size"),this}removeAll(){return this._groups.forEach(e=>{for(let t=0;t<e.length;t++)e[t].remove()}),this._groups.clear(),this.notifyChange("size"),this}_isHandle(e){return e&&!!e.remove}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);const t=[];return this._groups.set(this._ensureGroupKey(e),t),t}_getGroup(e){return this._groups.get(this._ensureGroupKey(e))}_deleteGroup(e){return this._groups.delete(this._ensureGroupKey(e))}_ensureGroupKey(e){return e||"_default_"}};c([p({readOnly:!0})],AM.prototype,"size",null),AM=c([N("esri.core.Handles")],AM);const gi=AM;class LN{constructor(){this._propertyOriginMap=new Map,this._originStores=new Array(CA),this._values=new Map}clone(t){const r=new LN,i=this._originStores[0];i&&i.forEach((n,s)=>{r.set(s,ie(n),0)});for(let n=2;n<CA;n++){const s=this._originStores[n];s&&s.forEach((o,a)=>{t&&t.has(a)||r.set(a,ie(o),n)})}return r}get(t,r){const i=r===void 0?this._values:this._originStores[r];return i?i.get(t):void 0}keys(t){const r=t==null?this._values:this._originStores[t];return r?[...r.keys()]:[]}set(t,r,i=6){let n=this._originStores[i];if(n||(n=new Map,this._originStores[i]=n),n.set(t,r),!this._values.has(t)||this._propertyOriginMap.get(t)<=i){const s=this._values.get(t);return this._values.set(t,r),this._propertyOriginMap.set(t,i),s!==r}return!1}delete(t,r=6){const i=this._originStores[r];if(!i)return;const n=i.get(t);if(i.delete(t),this._values.has(t)&&this._propertyOriginMap.get(t)===r){this._values.delete(t);for(let s=r-1;s>=0;s--){const o=this._originStores[s];if(o&&o.has(t)){this._values.set(t,o.get(t)),this._propertyOriginMap.set(t,s);break}}}return n}has(t,r){const i=r===void 0?this._values:this._originStores[r];return!!i&&i.has(t)}revert(t,r){for(;r>0&&!this.has(t,r);)--r;const i=this._originStores[r],n=i&&i.get(t),s=this._values.get(t);return this._values.set(t,n),this._propertyOriginMap.set(t,r),s!==n}originOf(t){return this._propertyOriginMap.get(t)||0}forEach(t){this._values.forEach(t)}}const QZ=e=>{let t=class extends e{constructor(...r){super(...r);const i=jn(this),n=i.metadatas,s=i.store,o=new LN;i.store=o,s.keys().forEach(a=>{o.set(a,s.get(a),0)}),Object.keys(n).forEach(a=>{i.internalGet(a)&&o.set(a,i.internalGet(a),0)})}read(r,i){cW(this,r,i)}getAtOrigin(r,i){const n=E4(this),s=Ds(i);if(typeof r=="string")return n.get(r,s);const o={};return r.forEach(a=>{o[a]=n.get(a,s)}),o}originOf(r){return Kw(this.originIdOf(r))}originIdOf(r){return E4(this).originOf(r)}revert(r,i){const n=E4(this),s=Ds(i),o=jn(this);let a;a=typeof r=="string"?r==="*"?n.keys(s):[r]:r,a.forEach(l=>{o.invalidate(l),n.revert(l,s),o.commit(l)})}};return t=c([N("esri.core.ReadOnlyMultiOriginJSONSupport")],t),t};function E4(e){return jn(e).store}let c7=class extends QZ(Ze){};c7=c([N("esri.core.ReadOnlyMultiOriginJSONSupport")],c7);const Rge=e=>{let t=class extends e{constructor(...r){super(...r)}clear(r,i="user"){return A4(this).delete(r,Ds(i))}write(r={},i){return pW(this,r=r||{},i),r}setAtOrigin(r,i,n){jn(this).setAtOrigin(r,i,Ds(n))}removeOrigin(r){const i=A4(this),n=Ds(r),s=i.keys(n);for(const o of s)i.originOf(o)===n&&i.set(o,i.get(o,n),6)}updateOrigin(r,i){const n=A4(this),s=Ds(i),o=this.get(r);for(let a=s+1;a<CA;++a)n.delete(r,a);n.set(r,o,s)}toJSON(r){return this.write({},r)}};return t=c([N("esri.core.WriteableMultiOriginJSONSupport")],t),t.prototype.toJSON.isDefaultToJSON=!0,t};function A4(e){return jn(e).store}const Ip=e=>{let t=class extends Rge(QZ(e)){constructor(...r){super(...r)}};return t=c([N("esri.core.MultiOriginJSONSupport")],t),t};let Hk=class extends Ip(Ze){};Hk=c([N("esri.core.MultiOriginJSONSupport")],Hk);async function Lge(e,t){const{WhereClause:r}=await ae(()=>import("./WhereClause.d5e58964.js"),[]);return r.create(e,t)}var Wk;let ff=Wk=class extends me{constructor(e){super(e),this.expression=null,this.name=null,this.returnType="boolean",this.title=null}clone(){return new Wk({name:this.name,title:this.title,expression:this.expression,returnType:this.returnType})}};c([p({type:String,json:{write:!0}})],ff.prototype,"expression",void 0),c([p({type:String,json:{write:!0}})],ff.prototype,"name",void 0),c([p({type:["boolean"],json:{write:!0}})],ff.prototype,"returnType",void 0),c([p({type:String,json:{write:!0}})],ff.prototype,"title",void 0),ff=Wk=c([N("esri.form.ExpressionInfo")],ff);const Nge=ff;let mf=class extends me{constructor(e){super(e),this.description=null,this.label=null,this.type=null,this.visibilityExpression=null}};c([p({type:String,json:{write:!0}})],mf.prototype,"description",void 0),c([p({type:String,json:{write:!0}})],mf.prototype,"label",void 0),c([p()],mf.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],mf.prototype,"visibilityExpression",void 0),mf=c([N("esri.form.elements.Element")],mf);const J0=mf;var Jk;let CM=Jk=class extends me{constructor(e){super(e),this.type=null}clone(){return new Jk({type:this.type})}};c([p({type:["attachment","audio","document","image","signature","video"],json:{write:!0}})],CM.prototype,"type",void 0),CM=Jk=c([N("esri.form.elements.inputs.AttachmentInput")],CM);const Dge=CM;var Zk;let yf=Zk=class extends J0{constructor(e){super(e),this.attachmentKeyword=null,this.editable=!0,this.input=null,this.type="attachment"}clone(){return new Zk({attachmentKeyword:this.attachmentKeyword,description:this.description,editable:this.editable,input:this.input,label:this.label,visibilityExpression:this.visibilityExpression})}};c([p({type:String,json:{write:!0}})],yf.prototype,"attachmentKeyword",void 0),c([p({type:Boolean,json:{write:!0}})],yf.prototype,"editable",void 0),c([p({type:Dge,json:{read:{source:"inputType"},write:{target:"inputType"}}})],yf.prototype,"input",void 0),c([p({type:["attachment"],json:{read:!1,write:!0}})],yf.prototype,"type",void 0),yf=Zk=c([N("esri.form.elements.AttachmentElement")],yf);const h7=yf;let kM=class extends me{constructor(e){super(e),this.type=null}};c([p()],kM.prototype,"type",void 0),kM=c([N("esri.form.elements.inputs.Input")],kM);const Hv=kM;let Ab=class extends Hv{constructor(e){super(e),this.maxLength=null,this.minLength=0}};c([p({type:Number,json:{write:!0}})],Ab.prototype,"maxLength",void 0),c([p({type:Number,json:{write:!0}})],Ab.prototype,"minLength",void 0),Ab=c([N("esri.form.elements.inputs.TextInput")],Ab);const NN=Ab;var Yk;let OM=Yk=class extends NN{constructor(e){super(e),this.type="barcode-scanner"}clone(){return new Yk({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["barcode-scanner"],json:{read:!1,write:!0}})],OM.prototype,"type",void 0),OM=Yk=c([N("esri.form.elements.inputs.BarcodeScannerInput")],OM);const Fge=OM;var Kk;let hg=Kk=class extends Hv{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="combo-box"}clone(){return new Kk({showNoValueOption:this.showNoValueOption,noValueOptionLabel:this.noValueOptionLabel})}};c([p({type:String,json:{write:!0}})],hg.prototype,"noValueOptionLabel",void 0),c([p({type:Boolean,json:{write:!0}})],hg.prototype,"showNoValueOption",void 0),c([p({type:["combo-box"],json:{read:!1,write:!0}})],hg.prototype,"type",void 0),hg=Kk=c([N("esri.form.elements.inputs.ComboBoxInput")],hg);const jge=hg;var Xk;function d7(e){return e!=null?new Date(e):null}function p7(e){return e?e.getTime():null}let Ua=Xk=class extends Hv{constructor(e){super(e),this.includeTime=!1,this.max=null,this.min=null,this.type="datetime-picker"}readMax(e,t){return d7(t.max)}writeMax(e,t){t.max=p7(e)}readMin(e,t){return d7(t.min)}writeMin(e,t){t.min=p7(e)}clone(){return new Xk({includeTime:this.includeTime,max:this.max,min:this.min,type:this.type})}};c([p({type:Boolean,json:{write:!0}})],Ua.prototype,"includeTime",void 0),c([p({type:Date,json:{type:Number,write:!0}})],Ua.prototype,"max",void 0),c([ye("max")],Ua.prototype,"readMax",null),c([Se("max")],Ua.prototype,"writeMax",null),c([p({type:Date,json:{type:Number,write:!0}})],Ua.prototype,"min",void 0),c([ye("min")],Ua.prototype,"readMin",null),c([Se("min")],Ua.prototype,"writeMin",null),c([p({type:["datetime-picker"],json:{read:!1,write:!0}})],Ua.prototype,"type",void 0),Ua=Xk=c([N("esri.form.elements.inputs.DateTimePickerInput")],Ua);const Vge=Ua;var Qk;let dg=Qk=class extends Hv{constructor(e){super(e),this.noValueOptionLabel=null,this.showNoValueOption=!1,this.type="radio-buttons"}clone(){return new Qk({noValueOptionLabel:this.noValueOptionLabel,showNoValueOption:this.showNoValueOption})}};c([p({type:String,json:{write:!0}})],dg.prototype,"noValueOptionLabel",void 0),c([p({type:Boolean,json:{write:!0}})],dg.prototype,"showNoValueOption",void 0),c([p({type:["radio-buttons"],json:{read:!1,write:!0}})],dg.prototype,"type",void 0),dg=Qk=c([N("esri.form.elements.inputs.RadioButtonsInput")],dg);const Uge=dg;var eO;let pg=eO=class extends Hv{constructor(e){super(e),this.offValue=null,this.onValue=null,this.type="switch"}clone(){return new eO({offValue:this.offValue,onValue:this.onValue})}};c([p({type:[String,Number],json:{write:!0}})],pg.prototype,"offValue",void 0),c([p({type:[String,Number],json:{write:!0}})],pg.prototype,"onValue",void 0),c([p({type:["switch"],json:{read:!1,write:!0}})],pg.prototype,"type",void 0),pg=eO=c([N("esri.form.elements.inputs.SwitchInput")],pg);const zge=pg;var tO;let PM=tO=class extends NN{constructor(e){super(e),this.type="text-area"}clone(){return new tO({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["text-area"],json:{read:!1,write:!0}})],PM.prototype,"type",void 0),PM=tO=c([N("esri.form.elements.inputs.TextAreaInput")],PM);const Bge=PM;var rO;let RM=rO=class extends NN{constructor(e){super(e),this.type="text-box"}clone(){return new rO({maxLength:this.maxLength,minLength:this.minLength})}};c([p({type:["text-box"],json:{read:!1,write:!0}})],RM.prototype,"type",void 0),RM=rO=c([N("esri.form.elements.inputs.TextBoxInput")],RM);const Gge=RM,qge={base:Hv,key:"type",typeMap:{"barcode-scanner":Fge,"combo-box":jge,"datetime-picker":Vge,"radio-buttons":Uge,switch:zge,"text-area":Bge,"text-box":Gge}};var iO;let Cb=iO=class extends me{constructor(e){super(e),this.name=null,this.code=null}clone(){return new iO({name:this.name,code:this.code})}};c([p({type:String,json:{write:!0}})],Cb.prototype,"name",void 0),c([p({type:[String,Number],json:{write:!0}})],Cb.prototype,"code",void 0),Cb=iO=c([N("esri.layers.support.CodedValue")],Cb);const Hge=Cb,Wge=new lt({inherited:"inherited",codedValue:"coded-value",range:"range"});let kb=class extends me{constructor(e){super(e),this.name=null,this.type=null}};c([p({type:String,json:{write:!0}})],kb.prototype,"name",void 0),c([tt(Wge)],kb.prototype,"type",void 0),kb=c([N("esri.layers.support.Domain")],kb);const u$=kb;var nO;let Ob=nO=class extends u${constructor(e){super(e),this.codedValues=null,this.type="coded-value"}getName(e){let t=null;if(this.codedValues){const r=String(e);this.codedValues.some(i=>(String(i.code)===r&&(t=i.name),!!t))}return t}clone(){return new nO({codedValues:ie(this.codedValues),name:this.name})}};c([p({type:[Hge],json:{write:!0}})],Ob.prototype,"codedValues",void 0),c([tt({codedValue:"coded-value"})],Ob.prototype,"type",void 0),Ob=nO=c([N("esri.layers.support.CodedValueDomain")],Ob);const eY=Ob;var sO;let LM=sO=class extends u${constructor(e){super(e),this.type="inherited"}clone(){return new sO}};c([tt({inherited:"inherited"})],LM.prototype,"type",void 0),LM=sO=c([N("esri.layers.support.InheritedDomain")],LM);const tY=LM;var oO;let fg=oO=class extends u${constructor(e){super(e),this.maxValue=null,this.minValue=null,this.type="range"}clone(){return new oO({maxValue:this.maxValue,minValue:this.minValue,name:this.name})}};c([p({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[1]},write:{enabled:!1,overridePolicy(){return{enabled:this.maxValue!=null&&this.minValue==null}},target:"range",writer(e,t,r){t[r]=[this.minValue||0,e]}}}})],fg.prototype,"maxValue",void 0),c([p({type:Number,json:{type:[Number],read:{source:"range",reader:(e,t)=>t.range&&t.range[0]},write:{target:"range",writer(e,t,r){t[r]=[e,this.maxValue||0]}}}})],fg.prototype,"minValue",void 0),c([tt({range:"range"})],fg.prototype,"type",void 0),fg=oO=c([N("esri.layers.support.RangeDomain")],fg);const rY=fg,iY={key:"type",base:u$,typeMap:{range:rY,"coded-value":eY,inherited:tY}};function DN(e){if(!e||!e.type)return null;switch(e.type){case"range":return rY.fromJSON(e);case"codedValue":return eY.fromJSON(e);case"inherited":return tY.fromJSON(e)}return null}var aO;let ou=aO=class extends J0{constructor(e){super(e),this.domain=null,this.editable=!0,this.fieldName=null,this.hint=null,this.input=null,this.requiredExpression=null,this.type="field"}clone(){return new aO({description:this.description,domain:this.domain,editable:this.editable,fieldName:this.fieldName,hint:this.hint,input:this.input,label:this.label,requiredExpression:this.requiredExpression,visibilityExpression:this.visibilityExpression})}};c([p({types:iY,json:{read:{reader:DN},write:!0}})],ou.prototype,"domain",void 0),c([p({type:Boolean,json:{write:!0}})],ou.prototype,"editable",void 0),c([p({type:String,json:{write:!0}})],ou.prototype,"fieldName",void 0),c([p({type:String,json:{write:!0}})],ou.prototype,"hint",void 0),c([p({types:qge,json:{read:{source:"inputType"},write:{target:"inputType"}}})],ou.prototype,"input",void 0),c([p({type:String,json:{write:!0}})],ou.prototype,"requiredExpression",void 0),c([p({type:String,json:{read:!1,write:!0}})],ou.prototype,"type",void 0),ou=aO=c([N("esri.form.elements.FieldElement")],ou);const f7=ou;var lO;let wc=lO=class extends J0{constructor(e){super(e),this.displayCount=null,this.displayType="list",this.editable=!0,this.orderByFields=null,this.relationshipId=null,this.type="relationship"}clone(){return new lO({description:this.description,displayCount:this.displayCount,displayType:this.displayType,editable:this.editable,label:this.label,orderByFields:ie(this.orderByFields),relationshipId:this.relationshipId,visibilityExpression:this.visibilityExpression})}};c([p({type:Number,json:{write:!0}})],wc.prototype,"displayCount",void 0),c([p({type:["list"],json:{write:!0}})],wc.prototype,"displayType",void 0),c([p({type:Boolean,json:{write:!0}})],wc.prototype,"editable",void 0),c([p({type:[ZJ],json:{write:!0}})],wc.prototype,"orderByFields",void 0),c([p({type:Number,json:{write:!0}})],wc.prototype,"relationshipId",void 0),c([p({type:["relationship"],json:{read:!1,write:!0}})],wc.prototype,"type",void 0),wc=lO=c([N("esri.form.elements.RelationshipElement")],wc);const m7=wc;function nY(e){return{typesWithGroup:{base:J0,key:"type",typeMap:{attachment:h7,field:f7,group:e,relationship:m7}},typesWithoutGroup:{base:J0,key:"type",typeMap:{attachment:h7,field:f7,relationship:m7}}}}function sY(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>i[n.type].fromJSON(n))}function oY(e,t,r=!0){if(!e)return null;const i=r?t.typesWithGroup.typeMap:t.typesWithoutGroup.typeMap;return e.filter(n=>i[n.type]).map(n=>n.toJSON())}function aY(e,t,r=!0){return e?e.map(i=>ju(r?t.typesWithGroup:t.typesWithoutGroup,i)):null}var uO;let vu=uO=class extends J0{constructor(e){super(e),this.elements=null,this.initialState="expanded",this.type="group"}castElements(e){return aY(e,C4,!1)}readElements(e,t){return sY(t.formElements,C4,!1)}writeElements(e,t){t.formElements=oY(e,C4,!1)}clone(){return new uO({description:this.description,elements:ie(this.elements),initialState:this.initialState,label:this.label,visibilityExpression:this.visibilityExpression})}};c([p({json:{write:!0}})],vu.prototype,"elements",void 0),c([Ct("elements")],vu.prototype,"castElements",null),c([ye("elements",["formElements"])],vu.prototype,"readElements",null),c([Se("elements")],vu.prototype,"writeElements",null),c([p({type:["collapsed","expanded"],json:{write:!0}})],vu.prototype,"initialState",void 0),c([p({type:String,json:{read:!1,write:!0}})],vu.prototype,"type",void 0),vu=uO=c([N("esri.form.elements.GroupElement")],vu);const C4=nY(vu),Jge=vu;var cO;const k4=nY(Jge);let au=cO=class extends me{constructor(e){super(e),this.description=null,this.elements=null,this.expressionInfos=null,this.title=null}castElements(e){return aY(e,k4)}readElements(e,t){return sY(t.formElements,k4)}writeElements(e,t){t.formElements=oY(e,k4)}clone(){return new cO({description:this.description,expressionInfos:ie(this.expressionInfos),elements:ie(this.elements),title:this.title})}};c([p({type:String,json:{write:!0}})],au.prototype,"description",void 0),c([p({json:{write:!0}})],au.prototype,"elements",void 0),c([Ct("elements")],au.prototype,"castElements",null),c([ye("elements",["formElements"])],au.prototype,"readElements",null),c([Se("elements")],au.prototype,"writeElements",null),c([p({type:[Nge],json:{write:!0}})],au.prototype,"expressionInfos",void 0),c([p({type:String,json:{write:!0}})],au.prototype,"title",void 0),au=cO=c([N("esri.form.FormTemplate")],au);const Zge=au;var Pb;const sI=li()({orthometric:"gravity-related-height",gravity_related_height:"gravity-related-height",ellipsoidal:"ellipsoidal"}),lY=sI.jsonValues.slice();TL(lY,"orthometric");const vw=li()({meter:"meters",foot:"feet","us-foot":"us-feet","clarke-foot":"clarke-feet","clarke-yard":"clarke-yards","clarke-link":"clarke-links","sears-yard":"sears-yards","sears-foot":"sears-feet","sears-chain":"sears-chains","benoit-1895-b-chain":"benoit-1895-b-chains","indian-yard":"indian-yards","indian-1937-yard":"indian-1937-yards","gold-coast-foot":"gold-coast-feet","sears-1922-truncated-chain":"sears-1922-truncated-chains","50-kilometers":"50-kilometers","150-kilometers":"150-kilometers"});let za=Pb=class extends me{constructor(e){super(e),this.heightModel="gravity-related-height",this.heightUnit="meters",this.vertCRS=null}writeHeightModel(e,t,r){return sI.write(e,t,r)}readHeightModel(e,t,r){return sI.read(e)||(r&&r.messages&&r.messages.push(Yge(e,{context:r})),null)}readHeightUnit(e,t,r){return vw.read(e)||(r&&r.messages&&r.messages.push(y7(e,{context:r})),null)}readHeightUnitService(e,t,r){return OZ(e)||vw.read(e)||(r&&r.messages&&r.messages.push(y7(e,{context:r})),null)}readVertCRS(e,t){return t.vertCRS||t.ellipsoid||t.geoid}clone(){return new Pb({heightModel:this.heightModel,heightUnit:this.heightUnit,vertCRS:this.vertCRS})}equals(e){return!!e&&(this===e||this.heightModel===e.heightModel&&this.heightUnit===e.heightUnit&&this.vertCRS===e.vertCRS)}static deriveUnitFromSR(e,t){const r=Bye(t);return new Pb({heightModel:e.heightModel,heightUnit:r,vertCRS:e.vertCRS})}write(e,t){return t={origin:"web-scene",...t},super.write(e,t)}static fromJSON(e){if(!e)return null;const t=new Pb;return t.read(e,{origin:"web-scene"}),t}};function y7(e,t){return new Ys("height-unit:unsupported",`Height unit of value '${e}' is not supported`,t)}function Yge(e,t){return new Ys("height-model:unsupported",`Height model of value '${e}' is not supported`,t)}c([p({type:sI.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:lY,default:"ellipsoidal"}}}})],za.prototype,"heightModel",void 0),c([Se("web-scene","heightModel")],za.prototype,"writeHeightModel",null),c([ye(["web-scene","service"],"heightModel")],za.prototype,"readHeightModel",null),c([p({type:vw.apiValues,constructOnly:!0,json:{origins:{"web-scene":{type:vw.jsonValues,write:vw.write}}}})],za.prototype,"heightUnit",void 0),c([ye("web-scene","heightUnit")],za.prototype,"readHeightUnit",null),c([ye("service","heightUnit")],za.prototype,"readHeightUnitService",null),c([p({type:String,constructOnly:!0,json:{origins:{"web-scene":{write:!0}}}})],za.prototype,"vertCRS",void 0),c([ye("service","vertCRS",["vertCRS","ellipsoid","geoid"])],za.prototype,"readVertCRS",null),za=Pb=c([N("esri.geometry.HeightModelInfo")],za);const c$=za;let Kge=0;const g7=Te.getLogger("esri.layers.Layer");let Di=class extends _h.EventedMixin(XT(Lo)){constructor(){super(...arguments),this.attributionDataUrl=null,this.fullExtent=new nt(-180,-90,180,90,Fe.WGS84),this.id=Date.now().toString(16)+"-layer-"+Kge++,this.legendEnabled=!0,this.listMode="show",this.opacity=1,this.parent=null,this.popupEnabled=!0,this.attributionVisible=!0,this.spatialReference=Fe.WGS84,this.title=null,this.type=null,this.url=null,this.visible=!0}static async fromArcGISServerUrl(e){const t=typeof e=="string"?{url:e}:e,r=await ae(()=>import("./arcgisLayers.8deed05d.js"),["assets/arcgisLayers.8deed05d.js","assets/lazyLayerLoader.b01d3002.js"]);try{return await r.fromUrl(t)}catch(i){throw g7.error("#fromArcGISServerUrl({ url: '"+t.url+"'})","Failed to create layer from arcgis server url",i),i}}static async fromPortalItem(e){const t="portalItem"in e?e:{portalItem:e},r=await ae(()=>import("./portalLayers.aa08137a.js").then(function(i){return i.p}),["assets/portalLayers.aa08137a.js","assets/lazyLayerLoader.b01d3002.js","assets/layersLoader.0d4ab3a2.js","assets/jsonContext.c19e06f9.js"]);try{return await r.fromItem(t)}catch(i){const n=t&&t.portalItem,s=n&&n.id||"unset",o=n&&n.portal&&n.portal.url||Kt.portalUrl;throw g7.error("#fromPortalItem()","Failed to create layer from portal item (portal: '"+o+"', id: '"+s+"')",i),i}}initialize(){this.when().catch(e=>{var t,r;sn(e)||Te.getLogger(this.declaredClass).error("#load()",`Failed to load layer (title: '${(t=this.title)!=null?t:"no title"}', id: '${(r=this.id)!=null?r:"no id"}')`,{error:e})})}destroy(){if(this.parent){const e=this,t=this.parent;"layers"in t&&t.layers.includes(e)?t.layers.remove(e):"tables"in t&&t.tables.includes(e)?t.tables.remove(e):"baseLayers"in t&&t.baseLayers.includes(e)?t.baseLayers.remove(e):"baseLayers"in t&&t.referenceLayers.includes(e)&&t.referenceLayers.remove(e)}}get hasAttributionData(){return this.attributionDataUrl!=null}get parsedUrl(){const e=this.url;return e?Kr(e):null}async fetchAttributionData(){const e=this.attributionDataUrl;if(this.hasAttributionData&&e)return(await Ee(e,{query:{f:"json"},responseType:"json"})).data;throw new Z("layer:no-attribution-data","Layer does not have attribution data")}};c([p({type:String})],Di.prototype,"attributionDataUrl",void 0),c([p({type:nt})],Di.prototype,"fullExtent",void 0),c([p({readOnly:!0})],Di.prototype,"hasAttributionData",null),c([p({type:String})],Di.prototype,"id",void 0),c([p({type:Boolean,nonNullable:!0})],Di.prototype,"legendEnabled",void 0),c([p({type:["show","hide","hide-children"]})],Di.prototype,"listMode",void 0),c([p({type:Number,range:{min:0,max:1},nonNullable:!0})],Di.prototype,"opacity",void 0),c([p()],Di.prototype,"parent",void 0),c([p({readOnly:!0})],Di.prototype,"parsedUrl",null),c([p({type:Boolean})],Di.prototype,"popupEnabled",void 0),c([p({type:Boolean})],Di.prototype,"attributionVisible",void 0),c([p({type:Fe})],Di.prototype,"spatialReference",void 0),c([p({type:String})],Di.prototype,"title",void 0),c([p({type:String,readOnly:!0,json:{read:!1}})],Di.prototype,"type",void 0),c([p()],Di.prototype,"url",void 0),c([p({type:Boolean,nonNullable:!0})],Di.prototype,"visible",void 0),Di=c([N("esri.layers.Layer")],Di);const Sh=Di;function Rb(e,t,r={}){return uY(e,t,r,Qge)}function Xge(e,t,r={}){return uY(e,t,r,e0e)}function uY(e,t,r={},i){let n=null;const s=r.once?(o,a)=>{i(o)&&(LT(n),t(o,a))}:(o,a)=>{i(o)&&t(o,a)};if(n=lce(e,s,r.sync,r.equals),r.initial){const o=e();s(o,o)}return n}function Qge(e){return!0}function e0e(e){return!!e}const t0e=/\?(\.|$)/g;function It(e,t,r,i){const n=Array.isArray(t)?t:t.indexOf(",")>-1?t.split(","):[t],s=sr(e,t,r,i);for(const o of n){const a=o.trim().replace(t0e,"$1"),l=e.get(a);r.call(e,l,l,a,e)}return s}function sr(e,t,r,i){return e.watch(t,r,i)}function cY(e,t,r,i){return b2(e,t,dY,r,i)}function FN(e,t,r,i){return h$(e,t,dY,r,i)}function r0e(e,t,r,i){return b2(e,t,pY,r,i)}function yrt(e,t,r,i){return h$(e,t,pY,r,i)}function hY(e,t,r,i){return b2(e,t,fY,r,i)}function i0e(e,t,r,i){return h$(e,t,fY,r,i)}function hO(e,t,r,i){return b2(e,t,mY,r,i)}function n0e(e,t,r,i){return h$(e,t,mY,r,i)}function s0e(e,t,r,i){let n=!1;const s=e.watch(t,(o,a,l,u)=>{n||r.call(e,o,a,l,u)},i);return{remove(){s.remove()},pause(){n=!0},resume(){n=!1}}}function yh(e,t,r,i,n,s,o){const a={};function l(h){const d=a[h];d&&(s&&s(d.target,h,e,r),d.handle.remove(),delete a[h])}const u=It(e,t,(h,d,f)=>{l(f),kL(h)&&(a[f]={handle:OL(h,r,i),target:h},n&&n(h,f,e,r))},o);return{remove(){u.remove();for(const h in a)l(h)}}}function b2(e,t,r,i,n){const s=e.watch(t,(o,a,l,u)=>{r&&!r(o)||i==null||i.call(e,o,a,l,u)},n);if(Array.isArray(t))for(const o of t){const a=e.get(o);r&&r(a)&&i?.call(e,a,a,t,e)}else{const o=e.get(t);r&&r(o)&&i?.call(e,o,o,t,e)}return s}function h$(e,t,r,i,n){const s=typeof i=="function"?i:null,o=typeof i=="object"?i:null;typeof i=="boolean"&&(n=i);let a,l=!1;function u(){a&&(a.remove(),a=null)}const h=ph();xa(o,()=>{u(),h.reject(Zr())});const d={then:h.promise.then.bind(h.promise),catch:h.promise.catch.bind(h.promise),remove:u};return Object.freeze(d),a=b2(e,t,r,(f,m,g,b)=>{l=!0,u(),s&&s.call(e,f,m,g,b),h.resolve({value:f,oldValue:m,propertyName:g,target:b})},n),l&&u(),d}function dY(e){return!!e}function pY(e){return!e}function fY(e){return e===!0}function mY(e){return e===!1}let g0=class extends Ze{constructor(){super(...arguments),this.updating=!1,this.handleId=0,this.handles=new gi,this.scheduleHandleId=0,this.pendingPromises=new Set}destroy(){this.removeAll(),this.handles.destroy()}add(e,t,r,i=0){const n=(1&i)!=0,s=++this.handleId;n||this.installSyncUpdatingWatch(e,t,s);const o=(2&i)!=0?It(e,t,r,n):e.watch(t,r,n);return this.handles.add(o,s),{remove:()=>this.handles.remove(s)}}addOnCollectionPropertyChange(e,t,r,i=0){const n=(2&i)!=0,s=++this.handleId;return this.handles.add([yh(e,t,"after-changes",this.createSyncUpdatingCallback()),yh(e,t,"change",r,n?o=>{r({added:o.items,removed:[],moved:[],target:o})}:void 0)],s),{remove:()=>{this.handles.remove(s)}}}addOnCollectionChange(e,t,r=0){const i=(2&r)!=0,n=++this.handleId;return this.handles.add([e.on("after-changes",this.createSyncUpdatingCallback()),e.on("change",t)],n),i&&t({added:e.items,removed:[],moved:[],target:e}),{remove:()=>{this.handles.remove(n)}}}addPromise(e){if(ce(e))return e;const t=++this.handleId;this.handles.add({remove:()=>{this.pendingPromises.delete(e)&&(this.pendingPromises.size!==0||this.handles.has(Ex)||this._set("updating",!1))}},t),this.pendingPromises.add(e),this._set("updating",!0);const r=()=>this.handles.remove(t);return e.then(r,r),e}removeAll(){this.pendingPromises.clear(),this.handles.removeAll(),this._set("updating",!1)}installSyncUpdatingWatch(e,t,r){const i=this.createSyncUpdatingCallback(),n=Rb(()=>Av(e,t),i,{sync:!0,equals:()=>!1});return this.handles.add(n,r),n}createSyncUpdatingCallback(){return()=>{this.handles.remove(Ex),++this.scheduleHandleId;const e=this.scheduleHandleId;this._get("updating")||this._set("updating",!0),this.handles.add(s2(()=>{e===this.scheduleHandleId&&(this._set("updating",this.pendingPromises.size>0),this.handles.remove(Ex))}),Ex)}}};c([p({readOnly:!0})],g0.prototype,"updating",void 0),g0=c([N("esri.views.support.WatchUpdatingTracking")],g0);const Ex=-42,ro=e=>{let t=class extends e{destroy(){var r,i;this.destroyed||((r=this._get("handles"))==null||r.destroy(),(i=this._get("updatingHandles"))==null||i.destroy())}get handles(){return this._get("handles")||new gi}get updatingHandles(){return this._get("updatingHandles")||new g0}};return c([p({readOnly:!0})],t.prototype,"handles",null),c([p({readOnly:!0})],t.prototype,"updatingHandles",null),t=c([N("esri.core.HandleOwner")],t),t};let Z0=class extends ro(Ze){};Z0=c([N("esri.core.HandleOwner")],Z0);var ps;(function(e){e[e.HANDSHAKE=0]="HANDSHAKE",e[e.OPEN=1]="OPEN",e[e.OPENED=2]="OPENED",e[e.RESPONSE=3]="RESPONSE",e[e.INVOKE=4]="INVOKE",e[e.ABORT=5]="ABORT",e[e.CLOSE=6]="CLOSE",e[e.OPEN_PORT=7]="OPEN_PORT",e[e.ON=8]="ON"})(ps||(ps={}));let o0e=0;function yY(){return o0e++}function a0e(e){return e&&typeof e=="object"&&("result"in e||"transferList"in e)}function oI(e){return e?typeof e=="string"?JSON.stringify({name:"message",message:e}):e.toJSON?JSON.stringify(e):JSON.stringify({name:e.name,message:e.message,details:e.details||{stack:e.stack}}):null}function gY(e,t,r,i){if(t.type===ps.OPEN_PORT)return void e.postMessage(t,[t.port]);if(t.type!==ps.INVOKE&&t.type!==ps.RESPONSE)return void e.postMessage(t);let n;a0e(r)?(n=v7(r.transferList),t.data=r.result):(n=v7(i),t.data=r),n?e.postMessage(t,n):e.postMessage(t)}function f_(e){if(!e)return null;const t=e.data;return t?typeof t=="string"?JSON.parse(t):t:null}function v7(e){if(!e||!e.length)return null;if(ge("esri-workers-arraybuffer-transfer"))return e;const t=e.filter(r=>!l0e(r));return t.length?t:null}function l0e(e){return e instanceof ArrayBuffer||e&&e.constructor&&e.constructor.name==="ArrayBuffer"}const u0e={statsWorker:()=>ae(()=>import("./statsWorker.78b7c60f.js"),["assets/statsWorker.78b7c60f.js","assets/utils.883b728e.js"]),geometryEngineWorker:()=>ae(()=>import("./geometryEngineWorker.b847d5da.js"),["assets/geometryEngineWorker.b847d5da.js","assets/geometryEngineJSON.d8a905b4.js","assets/geometryEngineBase.fd888c07.js","assets/json.2d0d6862.js"]),CSVSourceWorker:()=>ae(()=>import("./CSVSourceWorker.0e531ec7.js"),["assets/CSVSourceWorker.0e531ec7.js","assets/json.2d0d6862.js","assets/FeatureStore.6f918bf2.js","assets/PooledRBush.6fe92c94.js","assets/centroid.b2d3288b.js","assets/projectionSupport.b008473c.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js","assets/clientSideDefaults.a9da464a.js"]),EdgeProcessingWorker:()=>ae(()=>import("./EdgeProcessingWorker.6f5aa8aa.js"),["assets/EdgeProcessingWorker.6f5aa8aa.js","assets/deduplicate.6943d3fc.js","assets/BufferView.3bef53f7.js","assets/InterleavedLayout.a07fe214.js","assets/types.bf251076.js"]),ElevationSamplerWorker:()=>ae(()=>import("./ElevationSamplerWorker.debf8a5a.js"),["assets/ElevationSamplerWorker.debf8a5a.js","assets/PooledRBush.6fe92c94.js","assets/georeference.b867f831.js","assets/quat.a34c75bf.js","assets/vec33.0ef90cb8.js","assets/BufferView.3bef53f7.js"]),FeatureServiceSnappingSourceWorker:()=>ae(()=>import("./FeatureServiceSnappingSourceWorker.13c36a99.js"),["assets/FeatureServiceSnappingSourceWorker.13c36a99.js","assets/FeatureStore.6f918bf2.js","assets/PooledRBush.6fe92c94.js","assets/centroid.b2d3288b.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js"]),GeoJSONSourceWorker:()=>ae(()=>import("./GeoJSONSourceWorker.7b72d367.js"),["assets/GeoJSONSourceWorker.7b72d367.js","assets/FeatureStore.6f918bf2.js","assets/PooledRBush.6fe92c94.js","assets/centroid.b2d3288b.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js","assets/geojson.17187428.js","assets/clientSideDefaults.a9da464a.js","assets/sourceUtils.daf591a5.js"]),LercWorker:()=>ae(()=>import("./LercWorker.3d207fd9.js"),[]),MemorySourceWorker:()=>ae(()=>import("./MemorySourceWorker.20e430c9.js"),["assets/MemorySourceWorker.20e430c9.js","assets/objectIdUtils.8b6ba02d.js","assets/FeatureStore.6f918bf2.js","assets/PooledRBush.6fe92c94.js","assets/centroid.b2d3288b.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js","assets/clientSideDefaults.a9da464a.js","assets/sourceUtils.daf591a5.js"]),PBFDecoderWorker:()=>ae(()=>import("./PBFDecoderWorker.820fbce0.js"),[]),Pipeline:()=>ae(()=>import("./Pipeline.30de667a.js"),["assets/Pipeline.30de667a.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js","assets/visualVariablesUtils.e0f4aeba.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/definitions.21e97413.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/FeatureStore2D.7b8df4e6.js","assets/CircularArray.f8b13748.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/ogcFeatureUtils.f1127610.js","assets/geojson.17187428.js","assets/clientSideDefaults.a9da464a.js","assets/ComputedAttributeStorage.44e7cbda.js"]),PointCloudWorker:()=>ae(()=>import("./PointCloudWorker.67ba46f4.js"),["assets/PointCloudWorker.67ba46f4.js","assets/quat.a34c75bf.js","assets/vec3f32.9cc42d31.js","assets/PointCloudUniqueValueRenderer.ae01956d.js"]),RasterWorker:()=>ae(()=>import("./RasterWorker.6e8eebce.js"),["assets/RasterWorker.6e8eebce.js","assets/rasterProjectionHelper.7d40655e.js","assets/utils.9d23f5f1.js"]),SceneLayerWorker:()=>ae(()=>import("./SceneLayerWorker.3beefaa3.js"),[]),WFSSourceWorker:()=>ae(()=>import("./WFSSourceWorker.71966c00.js"),["assets/WFSSourceWorker.71966c00.js","assets/FeatureStore.6f918bf2.js","assets/PooledRBush.6fe92c94.js","assets/centroid.b2d3288b.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/QueryEngine.d84daef8.js","assets/WhereClause.d5e58964.js","assets/QueryEngineCapabilities.83e56447.js","assets/quantizationUtils.f741a05e.js","assets/utils.883b728e.js","assets/spatialQuerySupport.854cf55d.js","assets/geojson.17187428.js","assets/sourceUtils.daf591a5.js","assets/wfsUtils.239b6c21.js","assets/xmlUtils.9790bce4.js"]),WorkerTileHandler:()=>ae(()=>import("./WorkerTileHandler.238b63b2.js"),["assets/WorkerTileHandler.238b63b2.js","assets/GeometryUtils.d4e26b77.js","assets/BidiEngine.aae60613.js","assets/config.2a39d8a4.js","assets/TileClipper.ca4ac5a2.js","assets/definitions.21e97413.js","assets/GeometryUtils.ea8c8742.js","assets/StyleRepository.b62ca887.js","assets/earcut.f20dd8d8.js"])},{CLOSE:b7,ABORT:w7,INVOKE:_7,RESPONSE:I1,OPEN_PORT:x7,ON:c0e}=ps;class h0e{constructor(t){this._timer=null,this._cancelledJobIds=new Set,this._invokeMessages=[],this._invoke=t,this._timer=null,this._process=this._process.bind(this)}push(t){t.type===ps.ABORT?this._cancelledJobIds.add(t.jobId):(this._invokeMessages.push(t),this._timer===null&&(this._timer=setTimeout(this._process,0)))}clear(){this._invokeMessages.length=0,this._cancelledJobIds.clear(),this._timer=null}_process(){this._timer=null;for(const t of this._invokeMessages)this._cancelledJobIds.has(t.jobId)||this._invoke(t);this._cancelledJobIds.clear(),this._invokeMessages.length=0}}class Ls{constructor(t,r){this._port=t,this._outJobs=new Map,this._inJobs=new Map,this._invokeQueue=new h0e(i=>this._onInvokeMessage(i)),this._client=r.client,this._onMessage=this._onMessage.bind(this),this._channel=r.channel,this._schedule=r.schedule,this._port.addEventListener("message",this._onMessage),this._port.start()}static connect(t){const r=new MessageChannel;let i;i=typeof t=="function"?new t:"default"in t&&typeof t.default=="function"?new t.default:t;const n=new Ls(r.port1,{channel:r,client:i});return typeof i=="object"&&"remoteClient"in i&&(i.remoteClient=n),Ls.clients.set(n,i),r.port2}static loadWorker(t){const r=u0e[t];return r?r():Promise.resolve(null)}close(){this._post({type:b7}),this._close()}isBusy(){return this._outJobs.size>0}invoke(t,r,i){const n=i&&i.signal,s=i&&i.transferList;if(!this._port)return Promise.reject(new Z("worker:port-closed",`Cannot call invoke('${t}'), port is closed`,{methodName:t,data:r}));const o=yY();return new Promise((a,l)=>{const u=UT(n,()=>{var d;const f=this._outJobs.get(o);f&&(this._outJobs.delete(o),(d=f.abortHandle)==null||d.remove(),this._post({type:w7,jobId:o}),l(Zr()))}),h={resolve:a,reject:l,abortHandle:u,debugInfo:t};this._outJobs.set(o,h),this._post({type:_7,jobId:o,methodName:t,abortable:n!=null},r,s)})}on(t,r){const i=new MessageChannel;function n(s){r(s.data)}return this._port.postMessage({type:ps.ON,eventType:t,port:i.port2},[i.port2]),i.port1.addEventListener("message",n),i.port1.start(),{remove(){i.port1.postMessage({type:ps.CLOSE}),i.port1.close(),i.port1.removeEventListener("message",n)}}}openPort(){const t=new MessageChannel;return this._post({type:x7,port:t.port2}),t.port1}_close(){this._channel&&(this._channel=null),this._port.removeEventListener("message",this._onMessage),this._port.close(),this._outJobs.forEach(t=>{var r;(r=t.abortHandle)==null||r.remove(),t.reject(Zr(`Worker closing, aborting job calling '${t.debugInfo}'`))}),this._inJobs.clear(),this._outJobs.clear(),this._invokeQueue.clear(),this._port=this._client=this._schedule=null}_onMessage(t){U(this._schedule)?this._schedule(()=>this._processMessage(t)):this._processMessage(t)}_processMessage(t){const r=f_(t);if(r)switch(r.type){case I1:this._onResponseMessage(r);break;case _7:this._invokeQueue.push(r);break;case w7:this._onAbortMessage(r);break;case b7:this._onCloseMessage();break;case x7:this._onOpenPortMessage(r);break;case c0e:this._onOnMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);this._invokeQueue.push(t),n&&(n.controller&&n.controller.abort(),r.delete(i))}_onCloseMessage(){const t=this._client;this._close(),t&&"destroy"in t&&Ls.clients.get(this)===t&&t.destroy(),Ls.clients.delete(this),t&&t.remoteClient&&(t.remoteClient=null)}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs;let l,u=this._client,h=u[r];try{if(!h&&r&&r.indexOf(".")!==-1){const d=r.split(".");for(let f=0;f<d.length-1;f++)u=u[d[f]],h=u[d[f+1]]}if(typeof h!="function")throw new TypeError(`${r} is not a function`);l=h.call(u,n,{client:this,signal:o?o.signal:null})}catch(d){return void this._post({type:I1,jobId:i,error:oI(d)})}hy(l)?(a.set(i,{controller:o,promise:l}),l.then(d=>{a.has(i)&&(a.delete(i),this._post({type:I1,jobId:i},d))},d=>{a.has(i)&&(a.delete(i),sn(d)||this._post({type:I1,jobId:i,error:oI(d||{message:`Error encountered at method ${r}`})}))})):this._post({type:I1,jobId:i},l)}_onOpenPortMessage(t){new Ls(t.port,{client:this._client})}_onOnMessage(t){const{port:r}=t,i=this._client.on(t.eventType,s=>{r.postMessage(s)}),n=OL(t.port,"message",s=>{f_(s).type===ps.CLOSE&&(n.remove(),i.remove(),r.close())})}_onResponseMessage(t){var r;const{jobId:i,error:n,data:s}=t,o=this._outJobs;if(!o.has(i))return;const a=o.get(i);o.delete(i),(r=a.abortHandle)==null||r.remove(),n?a.reject(Z.fromJSON(JSON.parse(n))):a.resolve(s)}_post(t,r,i){return gY(this._port,t,r,i)}}Ls.kernelInfo={revision:CW,version:kW,buildDate:AW},Ls.clients=new Map;const d0e=Te.getLogger("esri.core.workers.Connection");class p0e{constructor(){this._clients=new Array,this._clientPromises=new Array,this._clientIdx=0}destroy(){this.close()}get closed(){return!this._clients||!this._clients.length}open(t,r){return new Promise((i,n)=>{let s=!0;const o=a=>{$r(r.signal),s&&(s=!1,a())};this._clients.length=t.length,this._clientPromises.length=t.length;for(let a=0;a<t.length;++a){const l=t[a];hy(l)?this._clientPromises[a]=l.then(u=>(this._clients[a]=new Ls(u,r),o(i),this._clients[a]),()=>(o(n),null)):(this._clients[a]=new Ls(l,r),this._clientPromises[a]=Promise.resolve(this._clients[a]),o(i))}})}broadcast(t,r,i){const n=new Array(this._clientPromises.length);for(let s=0;s<this._clientPromises.length;++s){const o=this._clientPromises[s];n[s]=o.then(a=>a.invoke(t,r,i))}return n}close(){for(const t of this._clientPromises)t.then(r=>r.close());this._clients.length=0,this._clientPromises.length=0}getAvailableClient(){let t;for(let r=0;r<this._clients.length;++r){const i=this._clients[r];if(i){if(!i.isBusy())return Promise.resolve(i)}else t=t||[],t.push(this._clientPromises[r])}return t?Promise.race(t):(this._clientIdx=(this._clientIdx+1)%this._clients.length,Promise.resolve(this._clients[this._clientIdx]))}invoke(t,r,i){let n=null;return Array.isArray(i)?(d0e.warn("invoke()","The transferList parameter is deprecated, use the options object instead"),n={transferList:i}):n=i,this.closed?Promise.reject(new Error("Connection closed")):this.getAvailableClient().then(s=>s.invoke(t,r,n))}on(t,r){return Promise.all(this._clientPromises).then(()=>EL(this._clients.map(i=>i.on(t,r))))}openPorts(){return new Promise(t=>{const r=new Array(this._clientPromises.length);let i=r.length;for(let n=0;n<this._clientPromises.length;++n)this._clientPromises[n].then(s=>{r[n]=s.openPort(),--i==0&&t(r)})})}get test(){return{numClients:this._clients.length}}}const vY=Te.getLogger("esri.intl");function _c(e,t,r={}){const{format:i={}}=r;return bl(e,n=>f0e(n,t,i))}function f0e(e,t,r){let i,n;const s=e.indexOf(":");if(s===-1?i=e.trim():(i=e.slice(0,s).trim(),n=e.slice(s+1).trim()),!i)return"";const o=Ev(i,t);if(o==null)return"";const a=r[n]||r[i];return a?m0e(o,a):n?y0e(o,n):jN(o)}function m0e(e,t){switch(t.type){case"date":return cp(e,t.intlOptions);case"number":return Um(e,t.intlOptions);default:return vY.warn("missing format descriptor for key {key}"),jN(e)}}function y0e(e,t){switch(t.toLowerCase()){case"dateformat":return cp(e);case"numberformat":return Um(e);default:return vY.warn(`inline format is unsupported since 4.12: ${t}`),/^(dateformat|datestring)/i.test(t)?cp(e):/^numberformat/i.test(t)?Um(e):jN(e)}}function jN(e){switch(typeof e){case"string":return e;case"number":return Um(e);case"boolean":return""+e;default:return e instanceof Date?cp(e):""}}async function g0e(e,t,r,i){const n=t.exec(r);if(!n)throw new Z("esri-intl:invalid-bundle",`Bundle id "${r}" is not compatible with the pattern "${t}"`);const s=n[1]?`${n[1]}/`:"",o=n[2],a=Nde(i),l=`${s}${o}.json`,u=a?`${s}${o}_${a}.json`:l;let h;try{h=await S7(e(u))}catch(d){if(u===l)throw new Z("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:d});try{h=await S7(e(l))}catch(f){throw new Z("intl:unknown-bundle",`Bundle "${r}" cannot be loaded`,{error:f})}}return h}async function S7(e){if(U(M7.fetchBundleAsset))return M7.fetchBundleAsset(e);const t=await Ee(e,{responseType:"text"});return JSON.parse(t.data)}class v0e{constructor({base:t="",pattern:r,location:i=new URL(window.location.href)}){let n;n=typeof i=="string"?s=>new URL(s,new URL(i,window.location.href)).href:i instanceof URL?s=>new URL(s,i).href:i,this.pattern=typeof r=="string"?new RegExp(`^${r}`):r,this.getAssetUrl=n,t=t?t.endsWith("/")?t:t+"/":"",this.matcher=new RegExp(`^${t}(?:(.*)/)?(.*)$`)}fetchMessageBundle(t,r){return g0e(this.getAssetUrl,this.matcher,t,r)}}function b0e(e){return new v0e(e)}const M7={};Lde(b0e({pattern:"esri/",location:Zt}));const I7={};function w0e(e,t){for(const r of e)if(r.name===t.name)return;e.push(t)}function _0e(e){var t;const r={async:e.async,isDebug:e.isDebug,locale:e.locale,baseUrl:e.baseUrl,has:{...e.has},map:{...e.map},packages:e.packages&&e.packages.concat()||[],paths:{...e.paths}};return e.hasOwnProperty("async")||(r.async=!0),e.hasOwnProperty("isDebug")||(r.isDebug=!1),e.baseUrl||(r.baseUrl=I7.baseUrl),(t=I7.packages)==null||t.forEach(i=>{w0e(r.packages,i)}),r}class x0e{constructor(){const t=document.createDocumentFragment();["addEventListener","dispatchEvent","removeEventListener"].forEach(r=>{this[r]=(...i)=>t[r](...i)})}}class NM{constructor(){this._dispatcher=new x0e,this._workerPostMessage({type:ps.HANDSHAKE})}terminate(){}get onmessage(){return this._onmessageHandler}set onmessage(t){this._onmessageHandler&&this.removeEventListener("message",this._onmessageHandler),this._onmessageHandler=t,t&&this.addEventListener("message",t)}get onmessageerror(){return this._onmessageerrorHandler}set onmessageerror(t){this._onmessageerrorHandler&&this.removeEventListener("messageerror",this._onmessageerrorHandler),this._onmessageerrorHandler=t,t&&this.addEventListener("messageerror",t)}get onerror(){return this._onerrorHandler}set onerror(t){this._onerrorHandler&&this.removeEventListener("error",this._onerrorHandler),this._onerrorHandler=t,t&&this.addEventListener("error",t)}postMessage(t){F3(()=>{this._workerMessageHandler(new MessageEvent("message",{data:t}))})}dispatchEvent(t){return this._dispatcher.dispatchEvent(t)}addEventListener(t,r,i){this._dispatcher.addEventListener(t,r,i)}removeEventListener(t,r,i){this._dispatcher.removeEventListener(t,r,i)}_workerPostMessage(t){F3(()=>{this.dispatchEvent(new MessageEvent("message",{data:t}))})}async _workerMessageHandler(t){const r=f_(t);if(r&&r.type===ps.OPEN){const{modulePath:i,jobId:n}=r;let s=await Ls.loadWorker(i);s||(s=await ae(()=>import(i),[]));const o=Ls.connect(s);this._workerPostMessage({type:ps.OPENED,jobId:n,data:o})}}}const dO=Te.getLogger("esri.core.workers"),{HANDSHAKE:S0e}=ps,M0e='let globalId=0;const outgoing=new Map,configuration=JSON.parse("{CONFIGURATION}");self.esriConfig=configuration.esriConfig;const workerPath=self.esriConfig.workers.workerPath,HANDSHAKE=0,OPEN=1,OPENED=2,RESPONSE=3,INVOKE=4,ABORT=5;function createAbortError(){const e=new Error("Aborted");return e.name="AbortError",e}function receiveMessage(e){return e&&e.data?"string"==typeof e.data?JSON.parse(e.data):e.data:null}function invokeStaticMessage(e,o,r){const t=r&&r.signal,n=globalId++;return new Promise(((r,i)=>{if(t){if(t.aborted)return i(createAbortError());t.addEventListener("abort",(()=>{outgoing.get(n)&&(outgoing.delete(n),self.postMessage({type:5,jobId:n}),i(createAbortError()))}))}outgoing.set(n,{resolve:r,reject:i}),self.postMessage({type:4,jobId:n,methodName:e,abortable:null!=t,data:o})}))}let workerRevisionChecked=!1;function checkWorkerRevision(e){if(!workerRevisionChecked&&e.kernelInfo){workerRevisionChecked=!0;const{revision:o,buildDate:r,version:t}=configuration.kernelInfo,{revision:n,buildDate:i,version:s}=e.kernelInfo;o!==n&&console.warn(`[esri.core.workers] Version mismatch detected between ArcGIS API for JavaScript and assets:\nAPI version: ${t} [Date: ${r}, Revision: ${o.slice(0,8)}]\nAssets version: ${s} [Date: ${i}, Revision: ${n.slice(0,8)}]`)}}function messageHandler(e){const o=receiveMessage(e);if(!o)return;const r=o.jobId;switch(o.type){case 1:let e;function t(o){const t=e.connect(o);self.postMessage({type:2,jobId:r,data:t},[t])}"function"==typeof define&&define.amd?require([workerPath],(r=>{e=r.default||r,checkWorkerRevision(e),e.loadWorker(o.modulePath).then((e=>e||new Promise((e=>{require([o.modulePath],e)})))).then(t)})):"System"in self&&"function"==typeof System.import?System.import(workerPath).then((r=>(e=r.default,checkWorkerRevision(e),e.loadWorker(o.modulePath)))).then((e=>e||System.import(o.modulePath))).then(t):(self.RemoteClient||importScripts(workerPath),e=self.RemoteClient.default||self.RemoteClient,checkWorkerRevision(e),e.loadWorker(o.modulePath).then(t));break;case 3:if(outgoing.has(r)){const e=outgoing.get(r);outgoing.delete(r),o.error?e.reject(JSON.parse(o.error)):e.resolve(o.data)}}}self.dojoConfig=configuration.loaderConfig,esriConfig.workers.loaderUrl&&(self.importScripts(esriConfig.workers.loaderUrl),"function"==typeof require&&"function"==typeof require.config&&require.config(configuration.loaderConfig)),self.addEventListener("message",messageHandler),self.postMessage({type:0});';let Ax,Cx;const T7="Failed to create Worker. Fallback to execute module in main thread";async function I0e(){if(!ge("esri-workers"))return $7(new NM);if(!Ax&&!Cx)try{const t=M0e.replace('"{CONFIGURATION}"',`'${T0e()}'`);Ax=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))}catch(t){Cx=t||{}}let e;if(Ax)try{e=new Worker(Ax,{name:"esri-worker-"+$0e++})}catch{dO.warn(T7,Cx),e=new NM}else dO.warn(T7,Cx),e=new NM;return $7(e)}async function $7(e){return new Promise(t=>{function r(n){const s=f_(n);s&&s.type===S0e&&(e.removeEventListener("message",r),e.removeEventListener("error",i),t(e))}function i(n){n.preventDefault(),e.removeEventListener("message",r),e.removeEventListener("error",i),dO.warn("Failed to create Worker. Fallback to execute module in main thread",n),(e=new NM).addEventListener("message",r),e.addEventListener("error",i)}e.addEventListener("message",r),e.addEventListener("error",i)})}function T0e(){let e;if(Kt.default!=null){const n={...Kt};delete n.default,e=JSON.parse(JSON.stringify(n))}else e=JSON.parse(JSON.stringify(Kt));e.assetsPath=ma(e.assetsPath),e.request.interceptors=[],e.log.interceptors=[],e.locale=Sa(),e.has={"esri-csp-restrictions":ge("esri-csp-restrictions"),"esri-2d-debug":!1,"esri-2d-update-debug":ge("esri-2d-update-debug"),"esri-2d-query-centroid-enabled":ge("esri-2d-query-centroid-enabled"),"featurelayer-pbf":ge("featurelayer-pbf"),"featurelayer-simplify-thresholds":ge("featurelayer-simplify-thresholds"),"featurelayer-simplify-payload-size-factors":ge("featurelayer-simplify-payload-size-factors"),"featurelayer-simplify-mobile-factor":ge("featurelayer-simplify-mobile-factor"),"esri-atomics":ge("esri-atomics"),"esri-shared-array-buffer":ge("esri-shared-array-buffer"),"esri-tiles-debug":ge("esri-tiles-debug"),"esri-workers-arraybuffer-transfer":ge("esri-workers-arraybuffer-transfer"),"host-webworker":1},e.workers.loaderUrl&&(e.workers.loaderUrl=ma(e.workers.loaderUrl)),e.workers.workerPath?e.workers.workerPath=ma(e.workers.workerPath):e.workers.workerPath=ma(Zt("esri/core/workers/RemoteClient.js"));const t=Kt.workers.loaderConfig,r=_0e({baseUrl:t?.baseUrl,locale:Sa(),has:{"csp-restrictions":1,"dojo-test-sniff":0,"host-webworker":1,...t?.has},map:{...t?.map},paths:{...t?.paths},packages:t?.packages||[]}),i={version:kW,buildDate:AW,revision:CW};return JSON.stringify({esriConfig:e,loaderConfig:r,kernelInfo:i})}let $0e=0;const E0e=Te.getLogger("esri.core.workers"),{ABORT:E7,INVOKE:A0e,OPEN:C0e,OPENED:k0e,RESPONSE:T1}=ps;class VN{constructor(t,r){this._outJobs=new Map,this._inJobs=new Map,this.worker=t,this.id=r,t.addEventListener("message",this._onMessage.bind(this)),t.addEventListener("error",i=>{i.preventDefault(),E0e.error(i)})}static async create(t){const r=await I0e();return new VN(r,t)}terminate(){this.worker.terminate()}async open(t,r={}){const{signal:i}=r,n=yY();return new Promise((s,o)=>{const a={resolve:s,reject:o,abortHandle:UT(i,()=>{this._outJobs.delete(n),this._post({type:E7,jobId:n})})};this._outJobs.set(n,a),this._post({type:C0e,jobId:n,modulePath:t})})}_onMessage(t){const r=f_(t);if(r)switch(r.type){case k0e:this._onOpenedMessage(r);break;case T1:this._onResponseMessage(r);break;case E7:this._onAbortMessage(r);break;case A0e:this._onInvokeMessage(r)}}_onAbortMessage(t){const r=this._inJobs,i=t.jobId,n=r.get(i);n&&(n.controller&&n.controller.abort(),r.delete(i))}_onInvokeMessage(t){const{methodName:r,jobId:i,data:n,abortable:s}=t,o=s?new AbortController:null,a=this._inJobs,l=Vhe[r];let u;try{if(typeof l!="function")throw new TypeError(`${r} is not a function`);u=l.call(null,n,{signal:o?o.signal:null})}catch(h){return void this._post({type:T1,jobId:i,error:oI(h)})}hy(u)?(a.set(i,{controller:o,promise:u}),u.then(h=>{a.has(i)&&(a.delete(i),this._post({type:T1,jobId:i},h))},h=>{a.has(i)&&(a.delete(i),h||(h={message:"Error encountered at method"+r}),sn(h)||this._post({type:T1,jobId:i,error:oI(h||{message:`Error encountered at method ${r}`})}))})):this._post({type:T1,jobId:i},u)}_onOpenedMessage(t){var r;const{jobId:i,data:n}=t,s=this._outJobs.get(i);s&&(this._outJobs.delete(i),(r=s.abortHandle)==null||r.remove(),s.resolve(n))}_onResponseMessage(t){var r;const{jobId:i,error:n,data:s}=t,o=this._outJobs.get(i);o&&(this._outJobs.delete(i),(r=o.abortHandle)==null||r.remove(),n?o.reject(Z.fromJSON(JSON.parse(n))):o.resolve(s))}_post(t,r,i){return gY(this.worker,t,r,i)}}let Xf=ge("esri-workers-debug")?1:ge("host-browser")?navigator.hardwareConcurrency-1:0;Xf||(Xf=ge("safari")&&ge("mac")||ge("trident")?7:2);let A7=0;const DM=[];function O0e(){wY()}async function kx(e,t){const r=new p0e;return await r.open(e,t),r}async function bY(e,t={}){if(typeof e!="string")throw new Z("workers:undefined-module","modulePath is missing");let r=t.strategy||"distributed";if(ge("host-webworker")&&!ge("esri-workers")&&(r="local"),r==="local"){let i=await Ls.loadWorker(e);i||(i=await ae(()=>import(e),[])),$r(t.signal);const n=t.client||i;return kx([Ls.connect(i)],{...t,client:n})}if(await wY(),$r(t.signal),r==="dedicated"){const i=A7++%Xf;return kx([await DM[i].open(e,t)],t)}if(t.maxNumWorkers&&t.maxNumWorkers>0){const i=Math.min(t.maxNumWorkers,Xf);if(i<Xf){const n=new Array(i);for(let s=0;s<i;++s){const o=A7++%Xf;n[s]=DM[o].open(e,t)}return kx(n,t)}}return kx(DM.map(i=>i.open(e,t)),t)}let Ox=null;async function wY(){if(Ox)return Ox;new AbortController;const e=[];for(let t=0;t<Xf;t++){const r=VN.create(t).then(i=>(DM[t]=i,i));e.push(r)}return Ox=Promise.all(e),Ox}function C7(e,t,r){if(e.hasM==null||e.hasZ)for(const i of t)for(const n of i)n.length>2&&(n[2]*=r)}function P0e(e,t,r){if(!e&&!t||!r)return;const i=B0(r);k7(e,r,i),k7(t,r,i)}function k7(e,t,r){if(e)for(const i of e)R0e(i.geometry,t,r)}function R0e(e,t,r){if(ce(e)||!e.spatialReference||Ll(e.spatialReference,t))return;const i=B0(e.spatialReference)/r;if(i!==1){if("x"in e)e.z!=null&&(e.z*=i);else if("rings"in e)C7(e,e.rings,i);else if("paths"in e)C7(e,e.paths,i);else if("points"in e&&(e.hasM==null||e.hasZ))for(const n of e.points)n.length>2&&(n[2]*=i)}}function _Y(e,t,r){if(ce(t)||ce(r)||r.vcsWkid||Ll(t,r))return null;const i=B0(t)/B0(r);if(i===1)return null;switch(e){case"point":case"esriGeometryPoint":return n=>L0e(n,i);case"polyline":case"esriGeometryPolyline":return n=>D0e(n,i);case"polygon":case"esriGeometryPolygon":return n=>N0e(n,i);case"multipoint":case"esriGeometryMultipoint":return n=>F0e(n,i);case"extent":case"esriGeometryExtent":return n=>j0e(n,i);default:return null}}function L0e(e,t){e&&e.z!=null&&(e.z*=t)}function N0e(e,t){if(e)for(const r of e.rings)for(const i of r)i.length>2&&(i[2]*=t)}function D0e(e,t){if(e)for(const r of e.paths)for(const i of r)i.length>2&&(i[2]*=t)}function F0e(e,t){if(e)for(const r of e.points)r.length>2&&(r[2]*=t)}function j0e(e,t){e&&e.zmin!=null&&e.zmax!=null&&(e.zmin*=t,e.zmax*=t)}function aI(e,t,r){if(!r||!r.features||!r.hasZ)return;const i=_Y(r.geometryType,t,e.outSpatialReference);if(!ce(i))for(const n of r.features)i(n.geometry)}const V0e=new lt({esriFieldTypeSmallInteger:"small-integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"single",esriFieldTypeDouble:"double",esriFieldTypeLong:"long",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"oid",esriFieldTypeGeometry:"geometry",esriFieldTypeBlob:"blob",esriFieldTypeRaster:"raster",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"global-id",esriFieldTypeXML:"xml"});var pO;const U0e=new lt({binary:"binary",coordinate:"coordinate",countOrAmount:"count-or-amount",dateAndTime:"date-and-time",description:"description",locationOrPlaceName:"location-or-place-name",measurement:"measurement",nameOrTitle:"name-or-title",none:"none",orderedOrRanked:"ordered-or-ranked",percentageOrRatio:"percentage-or-ratio",typeOrCategory:"type-or-category",uniqueIdentifier:"unique-identifier"});let Zn=pO=class extends me{constructor(e){super(e),this.alias=null,this.defaultValue=void 0,this.description=null,this.domain=null,this.editable=!0,this.length=-1,this.name=null,this.nullable=!0,this.type=null,this.valueType=null}readDescription(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?r.value:null}readValueType(e,{description:t}){let r;try{r=JSON.parse(t)}catch{}return r?U0e.fromJSON(r.fieldValueType):null}clone(){return new pO({alias:this.alias,defaultValue:this.defaultValue,description:this.description,domain:this.domain&&this.domain.clone()||null,editable:this.editable,length:this.length,name:this.name,nullable:this.nullable,type:this.type,valueType:this.valueType})}};c([p({type:String,json:{write:!0}})],Zn.prototype,"alias",void 0),c([p({type:[String,Number],json:{write:{allowNull:!0}}})],Zn.prototype,"defaultValue",void 0),c([p()],Zn.prototype,"description",void 0),c([ye("description")],Zn.prototype,"readDescription",null),c([p({types:iY,json:{read:{reader:DN},write:!0}})],Zn.prototype,"domain",void 0),c([p({type:Boolean,json:{write:!0}})],Zn.prototype,"editable",void 0),c([p({type:jt,json:{write:!0}})],Zn.prototype,"length",void 0),c([p({type:String,json:{write:!0}})],Zn.prototype,"name",void 0),c([p({type:Boolean,json:{write:!0}})],Zn.prototype,"nullable",void 0),c([tt(V0e)],Zn.prototype,"type",void 0),c([p()],Zn.prototype,"valueType",void 0),c([ye("valueType",["description"])],Zn.prototype,"readValueType",null),Zn=pO=c([N("esri.layers.support.Field")],Zn);const wo=Zn,fO=new lt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryEnvelope:"extent",mesh:"mesh","":null});let Ji=class extends me{constructor(e){super(e),this.displayFieldName=null,this.exceededTransferLimit=!1,this.features=[],this.fields=null,this.geometryType=null,this.hasM=!1,this.hasZ=!1,this.queryGeometry=null,this.spatialReference=null}readFeatures(e,t){const r=Fe.fromJSON(t.spatialReference),i=[];for(let n=0;n<e.length;n++){const s=e[n],o=xn.fromJSON(s),a=s.geometry&&s.geometry.spatialReference;U(o.geometry)&&!a&&(o.geometry.spatialReference=r),i.push(o)}return i}writeGeometryType(e,t,r,i){if(e)return void fO.write(e,t,r,i);const{features:n}=this;if(n){for(const s of n)if(s&&U(s.geometry))return void fO.write(s.geometry.type,t,r,i)}}readQueryGeometry(e,t){if(!e)return null;const r=!!e.spatialReference,i=Sr(e);return!r&&t.spatialReference&&(i.spatialReference=Fe.fromJSON(t.spatialReference)),i}writeSpatialReference(e,t){if(e)return void(t.spatialReference=e.toJSON());const{features:r}=this;if(r){for(const i of r)if(i&&U(i.geometry)&&i.geometry.spatialReference)return void(t.spatialReference=i.geometry.spatialReference.toJSON())}}toJSON(e){const t=this.write();if(t.features&&Array.isArray(e)&&e.length>0)for(let r=0;r<t.features.length;r++){const i=t.features[r];if(i.geometry){const n=e&&e[r];i.geometry=n&&n.toJSON()||i.geometry}}return t}quantize(e){const{scale:[t,r],translate:[i,n]}=e,s=u=>Math.round((u-i)/t),o=u=>Math.round((n-u)/r),a=this.features,l=this._getQuantizationFunction(this.geometryType,s,o);for(let u=0,h=a.length;u<h;u++)l(a[u].geometry)||(a.splice(u,1),u--,h--);return this.transform=e,this}unquantize(){const{geometryType:e,features:t,transform:r}=this;if(!r)return this;const{translate:[i,n],scale:[s,o]}=r,a=h=>h*s+i,l=h=>n-h*o,u=this._getHydrationFunction(e,a,l);for(const{geometry:h}of t)U(h)&&u(h);return this.transform=null,this}_quantizePoints(e,t,r){let i,n;const s=[];for(let o=0,a=e.length;o<a;o++){const l=e[o];if(o>0){const u=t(l[0]),h=r(l[1]);u===i&&h===n||(s.push([u-i,h-n]),i=u,n=h)}else i=t(l[0]),n=r(l[1]),s.push([i,n])}return s.length>0?s:null}_getQuantizationFunction(e,t,r){return e==="point"?i=>(i.x=t(i.x),i.y=r(i.y),i):e==="polyline"||e==="polygon"?i=>{const n=ym(i)?i.rings:i.paths,s=[];for(let o=0,a=n.length;o<a;o++){const l=n[o],u=this._quantizePoints(l,t,r);u&&s.push(u)}return s.length>0?(ym(i)?i.rings=s:i.paths=s,i):null}:e==="multipoint"?i=>{const n=this._quantizePoints(i.points,t,r);return n.length>0?(i.points=n,i):null}:e==="extent"?i=>i:null}_getHydrationFunction(e,t,r){return e==="point"?i=>{i.x=t(i.x),i.y=r(i.y)}:e==="polyline"||e==="polygon"?i=>{const n=ym(i)?i.rings:i.paths;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];for(let h=0,d=u.length;h<d;h++){const f=u[h];h>0?(s+=f[0],o+=f[1]):(s=f[0],o=f[1]),f[0]=t(s),f[1]=r(o)}}}:e==="extent"?i=>{i.xmin=t(i.xmin),i.ymin=r(i.ymin),i.xmax=t(i.xmax),i.ymax=r(i.ymax)}:e==="multipoint"?i=>{const n=i.points;let s,o;for(let a=0,l=n.length;a<l;a++){const u=n[a];a>0?(s+=u[0],o+=u[1]):(s=u[0],o=u[1]),u[0]=t(s),u[1]=r(o)}}:void 0}};c([p({type:String,json:{write:!0}})],Ji.prototype,"displayFieldName",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ji.prototype,"exceededTransferLimit",void 0),c([p({type:[xn],json:{write:!0}})],Ji.prototype,"features",void 0),c([ye("features")],Ji.prototype,"readFeatures",null),c([p({type:[wo],json:{write:!0}})],Ji.prototype,"fields",void 0),c([p({type:["point","multipoint","polyline","polygon","extent","mesh"],json:{read:{reader:fO.read}}})],Ji.prototype,"geometryType",void 0),c([Se("geometryType")],Ji.prototype,"writeGeometryType",null),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ji.prototype,"hasM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ji.prototype,"hasZ",void 0),c([p({types:xh,json:{write:!0}})],Ji.prototype,"queryGeometry",void 0),c([ye("queryGeometry")],Ji.prototype,"readQueryGeometry",null),c([p({type:Fe,json:{write:!0}})],Ji.prototype,"spatialReference",void 0),c([Se("spatialReference")],Ji.prototype,"writeSpatialReference",null),c([p({json:{write:!0}})],Ji.prototype,"transform",void 0),Ji=c([N("esri.rest.support.FeatureSet")],Ji),Ji.prototype.toJSON.isDefaultToJSON=!0;const Bu=Ji;var z0e=Object.freeze(Object.defineProperty({__proto__:null,default:Bu},Symbol.toStringTag,{value:"Module"}));let B0e=0;const O4=Te.getLogger("esri.layers.graphics.sources.MemorySource");let dd=class extends Lo.LoadableMixin(l2(ro(Je))){constructor(e){super(e),this._idToClientGraphic=null,this.type="memory"}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this._startWorker(t)),Promise.resolve(this)}destroy(){var e;(e=this._connection)==null||e.close(),this._connection=null}get workerGeometryType(){var e;const t=(e=this.layer)==null?void 0:e.geometryType;return t?this._geometryTypeRequiresClientGraphicMapping(t)?"polygon":t:null}applyEdits(e){return this.load().then(()=>this._applyEdits(e))}openPorts(){return this.load().then(()=>this._connection.openPorts())}async queryFeatures(e,t={}){await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);aI(e,this.layer.spatialReference,r);const i=Bu.fromJSON(r);if(!this._requiresClientGraphicMapping())return i;const n=this.layer.objectIdField;for(const s of i.features){const o=s.attributes[n],a=this._idToClientGraphic.get(o);a&&(s.geometry=a.geometry)}return i.geometryType=this.layer.geometryType,i}async queryFeaturesJSON(e,t={}){if(this._requiresClientGraphicMapping())throw new Z("query-features-json:unsupported","Cannot query in JSON format for client only geometry types (mesh and extent)");await this.load(t);const r=await this._connection.invoke("queryFeatures",e?e.toJSON():null,t);return aI(e,this.layer.spatialReference,r),r}queryFeatureCount(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryFeatureCount",e?e.toJSON():null,t))}queryObjectIds(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryObjectIds",e?e.toJSON():null,t))}queryExtent(e,t={}){return this.load(t).then(()=>this._connection.invoke("queryExtent",e?e.toJSON():null,t)).then(r=>({count:r.count,extent:nt.fromJSON(r.extent)}))}querySnapping(e,t={}){return this.load(t).then(()=>this._connection.invoke("querySnapping",e,t))}async _applyEdits(e){if(!this._connection)throw new Z("feature-layer-source:edit-failure","Memory source not loaded");const t=this.layer.objectIdField;let r=null;const i=[],n=[];await Promise.all([this._prepareClientMapping(e.addFeatures,null),this._prepareClientMapping(e.updateFeatures,null)]);const s=u=>"objectId"in u&&u.objectId!=null?u.objectId:"attributes"in u&&u.attributes[t]!=null?u.attributes[t]:null;if(e.addFeatures&&(r=this._prepareAddFeatures(e.addFeatures)),e.deleteFeatures)for(const u of e.deleteFeatures){const h=s(u);h!=null&&i.push(h)}const o=e.updateFeatures&&this._idToClientGraphic?new Map:null;if(e.updateFeatures){for(const u of e.updateFeatures)if(n.push(this._serializeFeature(u)),o){const h=s(u);h!=null&&o.set(h,u)}}P0e(r?r.features:null,n,this.layer.spatialReference);const{fullExtent:a,featureEditResults:l}=await this._connection.invoke("applyEdits",{adds:r?r.features:[],updates:n,deletes:i});return this.fullExtent=a,r&&r.finish(l.uidToObjectId),this._updateClientGraphicIds(o,l),this._createEditsResult(l)}async _prepareClientMapping(e,t){if(this.layerOrSourceGeometryType!=="mesh"||ce(e))return;const r=[];for(const{geometry:i}of e)!U(i)||i.type!=="mesh"||i.hasExtent||i.loaded||r.push(i.load({signal:t}));r.length&&await Promise.all(r)}_updateClientGraphicIds(e,t){if(this._idToClientGraphic){if(e)for(const r of t.updateResults){if(!r.success)continue;const i=e.get(r.objectId);i!=null&&this._addIdToClientGraphic(i)}for(const r of t.deleteResults)r.success&&this._idToClientGraphic.delete(r.objectId)}}_createEditsResult(e){return{addFeatureResults:e.addResults?e.addResults.map(this._createFeatureEditResult,this):[],updateFeatureResults:e.updateResults?e.updateResults.map(this._createFeatureEditResult,this):[],deleteFeatureResults:e.deleteResults?e.deleteResults.map(this._createFeatureEditResult,this):[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}_createFeatureEditResult(e){const t=e.success===!0?null:e.error||{code:void 0,description:void 0};return{objectId:e.objectId,globalId:e.globalId,error:t?new Z("feature-layer-source:edit-failure",t.description,{code:t.code}):null}}_prepareAddFeatures(e){const t=new Map,r=new Array(e.length);let i=null;for(let s=0;s<e.length;s++){const o=e[s],a=this._serializeFeature(o);!i&&U(o.geometry)&&(i=o.geometry.type),r[s]=a,t.set(`${a.uid}`,o)}const n=this;return{features:r,inferredGeometryType:i,finish(s){const o=n.sourceJSON.objectIdField;for(const a in s){const l=s[a],u=t.get(a);u&&(u.attributes||(u.attributes={}),l===-1?delete u.attributes[o]:u.attributes[o]=l,n._addIdToClientGraphic(u))}}}}_addIdToClientGraphic(e){if(!this._idToClientGraphic)return;const t=this.sourceJSON.objectIdField,r=e.attributes&&e.attributes[t];r!=null&&this._idToClientGraphic.set(r,e)}get layerOrSourceGeometryType(){var e,t,r;return(e=(t=this.layer)==null?void 0:t.geometryType)!=null?e:(r=this.sourceJSON)==null?void 0:r.geometryType}_requiresClientGraphicMapping(){return this._geometryTypeRequiresClientGraphicMapping(this.layerOrSourceGeometryType)}_geometryRequiresClientGraphicMapping(e){return this._geometryTypeRequiresClientGraphicMapping(e.type)}_geometryTypeRequiresClientGraphicMapping(e){return e==="mesh"||e==="multipatch"||e==="extent"}_serializeFeature(e){const{attributes:t}=e,r=this._geometryForSerialization(e),i=(B0e++).toString();return r?{uid:i,geometry:r.toJSON(),attributes:t}:{uid:i,attributes:t}}_geometryForSerialization(e){const{geometry:t}=e;return ce(t)?null:this._geometryRequiresClientGraphicMapping(t)?t.extent?_n.fromExtent(t.extent):null:t}async _startWorker(e){this._connection=await bY("MemorySourceWorker",{strategy:ge("feature-layers-workers")?"dedicated":"local",signal:e});const{fields:t,spatialReference:r,objectIdField:i,hasM:n,hasZ:s,timeInfo:o}=this.layer,a=this.layer.originOf("spatialReference")==="defaults";await this._prepareClientMapping(this.items,e);const l=this._prepareAddFeatures(this.items);this.handles.add(this.on("before-changes",f=>{O4.error("Source modifications will not propagate after layer has been loaded. Please use .applyEdits() instead"),f.preventDefault()}));const u={features:l.features,fields:t&&t.map(f=>f.toJSON()),geometryType:F9.toJSON(this.workerGeometryType),hasM:this.layerOrSourceGeometryType!=="mesh"&&n,hasZ:this.layerOrSourceGeometryType==="mesh"||s,objectIdField:i,spatialReference:a?null:r&&r.toJSON(),timeInfo:o?o.toJSON():null},h=await this._connection.invoke("load",u,{signal:e});for(const f of h.warnings)O4.warn(f.message,{layer:this.layer,warning:f});h.featureErrors.length&&O4.warn(`Encountered ${h.featureErrors.length} validation errors while loading features`,h.featureErrors);const d=h.layerDefinition;this._geometryTypeRequiresClientGraphicMapping(l.inferredGeometryType)&&(d.geometryType=F9.toJSON(l.inferredGeometryType)),this.sourceJSON=d,this._requiresClientGraphicMapping()&&(this._idToClientGraphic=new Map),l.finish(h.assignedObjectIds)}};c([FL({Type:xn,ensureType:br(xn)})],dd.prototype,"itemType",void 0),c([p()],dd.prototype,"type",void 0),c([p({constructOnly:!0})],dd.prototype,"layer",void 0),c([p({readOnly:!0})],dd.prototype,"workerGeometryType",null),c([p()],dd.prototype,"sourceJSON",void 0),dd=c([N("esri.layers.graphics.sources.MemorySource")],dd);const O7=dd;function G0e(e){return"portalItem"in e}const UN=e=>{let t=class extends e{get apiKey(){var r;return this._isOverridden("apiKey")?this._get("apiKey"):G0e(this)?(r=this.portalItem)==null?void 0:r.apiKey:null}set apiKey(r){r!=null?this._override("apiKey",r):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return c([p({type:String})],t.prototype,"apiKey",null),t=c([N("esri.layers.mixins.APIKeyMixin")],t),t},xY={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer"},SY=Object.values(xY),MY=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${SY.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),q0e=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${SY.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),H0e=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function W0e(e){return!!MY.test(e)}function Wv(e){const t=Kr(e),r=t.path.match(MY)||t.path.match(q0e);if(!r)return null;const[,i,n,s,o]=r,a=n.indexOf("/");return{title:zN(a!==-1?n.slice(a+1):n),serverType:xY[s.toLowerCase()],sublayer:o!=null&&o!==""?parseInt(o,10):null,url:{path:i}}}function J0e(e){const t=Kr(e).path.match(H0e);return t?{serviceUrl:t[1],sublayerId:Number(t[2])}:null}function zN(e){return(e=e.replace(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function Z0e(e,t){const r=[];if(e){const i=Wv(e);U(i)&&i.title&&r.push(i.title)}if(t){const i=zN(t);r.push(i)}if(r.length===2){if(r[0].toLowerCase().indexOf(r[1].toLowerCase())!==-1)return r[0];if(r[1].toLowerCase().indexOf(r[0].toLowerCase())!==-1)return r[1]}return r.join(" - ")}function IY(e){if(!e)return!1;const t=".arcgis.com/",r="//services",i="//tiles",n="//features",s=(e=e.toLowerCase()).indexOf(t)!==-1,o=e.indexOf(r)!==-1||e.indexOf(i)!==-1||e.indexOf(n)!==-1;return s&&o}function Y0e(e,t){return e&&MW(IW(e,t))}function K0e(e){let{url:t}=e;if(!t)return{url:t};t=IW(t,e.logger);const r=Kr(t),i=Wv(r.path);let n;if(U(i))i.sublayer!=null&&e.layer.layerId==null&&(n=i.sublayer),t=i.url.path;else if(e.nonStandardUrlAllowed){const s=J0e(r.path);U(s)&&(t=s.serviceUrl,n=s.sublayerId)}return{url:MW(t),layerId:n}}function X0e(e,t,r,i,n){zm(t,i,"url",n),i.url&&e.layerId!=null&&(i.url=up(i.url,r,e.layerId.toString()))}function Q0e(e){if(!e)return!1;const t=e.toLowerCase(),r=t.indexOf("/services/")!==-1,i=t.indexOf("/mapserver/wmsserver")!==-1,n=t.indexOf("/imageserver/wmsserver")!==-1,s=t.indexOf("/wmsserver")!==-1;return r&&(i||n||s)}const d$=e=>{let t=class extends e{get title(){if(this._get("title")&&this.originOf("title")!=="defaults")return this._get("title");if(this.url){const r=Wv(this.url);if(U(r)&&r.title)return r.title}return this._get("title")||""}set title(r){this._set("title",r)}set url(r){this._set("url",Y0e(r,Te.getLogger(this.declaredClass)))}};return c([p()],t.prototype,"title",null),c([p({type:String})],t.prototype,"url",null),t=c([N("esri.layers.mixins.ArcGISService")],t),t};function p$(){const e=new Float32Array(16);return e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function eve(e){const t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function tve(e,t,r,i,n,s,o,a,l,u,h,d,f,m,g,b){const w=new Float32Array(16);return w[0]=e,w[1]=t,w[2]=r,w[3]=i,w[4]=n,w[5]=s,w[6]=o,w[7]=a,w[8]=l,w[9]=u,w[10]=h,w[11]=d,w[12]=f,w[13]=m,w[14]=g,w[15]=b,w}function rve(e,t){return new Float32Array(e,t,16)}const ive=p$();Object.freeze({__proto__:null,create:p$,clone:eve,fromValues:tve,createView:rve,IDENTITY:ive});function nve(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Tp(e,t,r,i,n,s,o,a,l,u,h,d,f,m,g,b,w){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e[9]=h,e[10]=d,e[11]=f,e[12]=m,e[13]=g,e[14]=b,e[15]=w,e}function lI(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Mh(e,t){if(e===t){const r=t[1],i=t[2],n=t[3],s=t[6],o=t[7],a=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=i,e[9]=s,e[11]=t[14],e[12]=n,e[13]=o,e[14]=a}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function sve(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],_=t[15],x=r*a-i*o,I=r*l-n*o,S=r*u-s*o,T=i*l-n*a,$=i*u-s*a,E=n*u-s*l,C=h*b-d*g,O=h*w-f*g,R=h*_-m*g,D=d*w-f*b,F=d*_-m*b,z=f*_-m*w;let B=x*z-I*F+S*D+T*R-$*O+E*C;return B?(B=1/B,e[0]=(a*z-l*F+u*D)*B,e[1]=(n*F-i*z-s*D)*B,e[2]=(b*E-w*$+_*T)*B,e[3]=(f*$-d*E-m*T)*B,e[4]=(l*R-o*z-u*O)*B,e[5]=(r*z-n*R+s*O)*B,e[6]=(w*S-g*E-_*I)*B,e[7]=(h*E-f*S+m*I)*B,e[8]=(o*F-a*R+u*C)*B,e[9]=(i*R-r*F-s*C)*B,e[10]=(g*$-b*S+_*x)*B,e[11]=(d*S-h*$-m*x)*B,e[12]=(a*O-o*D-l*C)*B,e[13]=(r*D-i*O+n*C)*B,e[14]=(b*I-g*T-w*x)*B,e[15]=(h*T-d*I+f*x)*B,e):null}function ove(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],_=t[15];return e[0]=a*(f*_-m*w)-d*(l*_-u*w)+b*(l*m-u*f),e[1]=-(i*(f*_-m*w)-d*(n*_-s*w)+b*(n*m-s*f)),e[2]=i*(l*_-u*w)-a*(n*_-s*w)+b*(n*u-s*l),e[3]=-(i*(l*m-u*f)-a*(n*m-s*f)+d*(n*u-s*l)),e[4]=-(o*(f*_-m*w)-h*(l*_-u*w)+g*(l*m-u*f)),e[5]=r*(f*_-m*w)-h*(n*_-s*w)+g*(n*m-s*f),e[6]=-(r*(l*_-u*w)-o*(n*_-s*w)+g*(n*u-s*l)),e[7]=r*(l*m-u*f)-o*(n*m-s*f)+h*(n*u-s*l),e[8]=o*(d*_-m*b)-h*(a*_-u*b)+g*(a*m-u*d),e[9]=-(r*(d*_-m*b)-h*(i*_-s*b)+g*(i*m-s*d)),e[10]=r*(a*_-u*b)-o*(i*_-s*b)+g*(i*u-s*a),e[11]=-(r*(a*m-u*d)-o*(i*m-s*d)+h*(i*u-s*a)),e[12]=-(o*(d*w-f*b)-h*(a*w-l*b)+g*(a*f-l*d)),e[13]=r*(d*w-f*b)-h*(i*w-n*b)+g*(i*f-n*d),e[14]=-(r*(a*w-l*b)-o*(i*w-n*b)+g*(i*l-n*a)),e[15]=r*(a*f-l*d)-o*(i*f-n*d)+h*(i*l-n*a),e}function ave(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8],h=e[9],d=e[10],f=e[11],m=e[12],g=e[13],b=e[14],w=e[15];return(t*o-r*s)*(d*w-f*b)-(t*a-i*s)*(h*w-f*g)+(t*l-n*s)*(h*b-d*g)+(r*a-i*o)*(u*w-f*m)-(r*l-n*o)*(u*b-d*m)+(i*l-n*a)*(u*g-h*m)}function TY(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=t[9],m=t[10],g=t[11],b=t[12],w=t[13],_=t[14],x=t[15];let I=r[0],S=r[1],T=r[2],$=r[3];return e[0]=I*i+S*a+T*d+$*b,e[1]=I*n+S*l+T*f+$*w,e[2]=I*s+S*u+T*m+$*_,e[3]=I*o+S*h+T*g+$*x,I=r[4],S=r[5],T=r[6],$=r[7],e[4]=I*i+S*a+T*d+$*b,e[5]=I*n+S*l+T*f+$*w,e[6]=I*s+S*u+T*m+$*_,e[7]=I*o+S*h+T*g+$*x,I=r[8],S=r[9],T=r[10],$=r[11],e[8]=I*i+S*a+T*d+$*b,e[9]=I*n+S*l+T*f+$*w,e[10]=I*s+S*u+T*m+$*_,e[11]=I*o+S*h+T*g+$*x,I=r[12],S=r[13],T=r[14],$=r[15],e[12]=I*i+S*a+T*d+$*b,e[13]=I*n+S*l+T*f+$*w,e[14]=I*s+S*u+T*m+$*_,e[15]=I*o+S*h+T*g+$*x,e}function $Y(e,t,r){const i=r[0],n=r[1],s=r[2];let o,a,l,u,h,d,f,m,g,b,w,_;return t===e?(e[12]=t[0]*i+t[4]*n+t[8]*s+t[12],e[13]=t[1]*i+t[5]*n+t[9]*s+t[13],e[14]=t[2]*i+t[6]*n+t[10]*s+t[14],e[15]=t[3]*i+t[7]*n+t[11]*s+t[15]):(o=t[0],a=t[1],l=t[2],u=t[3],h=t[4],d=t[5],f=t[6],m=t[7],g=t[8],b=t[9],w=t[10],_=t[11],e[0]=o,e[1]=a,e[2]=l,e[3]=u,e[4]=h,e[5]=d,e[6]=f,e[7]=m,e[8]=g,e[9]=b,e[10]=w,e[11]=_,e[12]=o*i+h*n+g*s+t[12],e[13]=a*i+d*n+b*s+t[13],e[14]=l*i+f*n+w*s+t[14],e[15]=u*i+m*n+_*s+t[15]),e}function lve(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*s,e[9]=t[9]*s,e[10]=t[10]*s,e[11]=t[11]*s,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function uve(e,t,r,i){let n,s,o,a,l,u,h,d,f,m,g,b,w,_,x,I,S,T,$,E,C,O,R,D,F=i[0],z=i[1],B=i[2],y=Math.sqrt(F*F+z*z+B*B);return y<mt?null:(y=1/y,F*=y,z*=y,B*=y,n=Math.sin(r),s=Math.cos(r),o=1-s,a=t[0],l=t[1],u=t[2],h=t[3],d=t[4],f=t[5],m=t[6],g=t[7],b=t[8],w=t[9],_=t[10],x=t[11],I=F*F*o+s,S=z*F*o+B*n,T=B*F*o-z*n,$=F*z*o-B*n,E=z*z*o+s,C=B*z*o+F*n,O=F*B*o+z*n,R=z*B*o-F*n,D=B*B*o+s,e[0]=a*I+d*S+b*T,e[1]=l*I+f*S+w*T,e[2]=u*I+m*S+_*T,e[3]=h*I+g*S+x*T,e[4]=a*$+d*E+b*C,e[5]=l*$+f*E+w*C,e[6]=u*$+m*E+_*C,e[7]=h*$+g*E+x*C,e[8]=a*O+d*R+b*D,e[9]=l*O+f*R+w*D,e[10]=u*O+m*R+_*D,e[11]=h*O+g*R+x*D,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function cve(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[4],o=t[5],a=t[6],l=t[7],u=t[8],h=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=s*n+u*i,e[5]=o*n+h*i,e[6]=a*n+d*i,e[7]=l*n+f*i,e[8]=u*n-s*i,e[9]=h*n-o*i,e[10]=d*n-a*i,e[11]=f*n-l*i,e}function hve(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[8],h=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n-u*i,e[1]=o*n-h*i,e[2]=a*n-d*i,e[3]=l*n-f*i,e[8]=s*i+u*n,e[9]=o*i+h*n,e[10]=a*i+d*n,e[11]=l*i+f*n,e}function dve(e,t,r){const i=Math.sin(r),n=Math.cos(r),s=t[0],o=t[1],a=t[2],l=t[3],u=t[4],h=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=s*n+u*i,e[1]=o*n+h*i,e[2]=a*n+d*i,e[3]=l*n+f*i,e[4]=u*n-s*i,e[5]=h*n-o*i,e[6]=d*n-a*i,e[7]=f*n-l*i,e}function pve(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function fve(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function mve(e,t,r){let i,n,s,o=r[0],a=r[1],l=r[2],u=Math.sqrt(o*o+a*a+l*l);return u<mt?null:(u=1/u,o*=u,a*=u,l*=u,i=Math.sin(t),n=Math.cos(t),s=1-n,e[0]=o*o*s+n,e[1]=a*o*s+l*i,e[2]=l*o*s-a*i,e[3]=0,e[4]=o*a*s-l*i,e[5]=a*a*s+n,e[6]=l*a*s+o*i,e[7]=0,e[8]=o*l*s+a*i,e[9]=a*l*s-o*i,e[10]=l*l*s+n,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function yve(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=r,e[7]=0,e[8]=0,e[9]=-r,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function gve(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=0,e[2]=-r,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=r,e[9]=0,e[10]=i,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function vve(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=0,e[4]=-r,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function EY(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=i+i,l=n+n,u=s+s,h=i*a,d=i*l,f=i*u,m=n*l,g=n*u,b=s*u,w=o*a,_=o*l,x=o*u;return e[0]=1-(m+b),e[1]=d+x,e[2]=f-_,e[3]=0,e[4]=d-x,e[5]=1-(h+b),e[6]=g+w,e[7]=0,e[8]=f+_,e[9]=g-w,e[10]=1-(h+m),e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function bve(e,t){const r=wve,i=-t[0],n=-t[1],s=-t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=i*i+n*n+s*s+o*o;return d>0?(r[0]=2*(a*o+h*i+l*s-u*n)/d,r[1]=2*(l*o+h*n+u*i-a*s)/d,r[2]=2*(u*o+h*s+a*n-l*i)/d):(r[0]=2*(a*o+h*i+l*s-u*n),r[1]=2*(l*o+h*n+u*i-a*s),r[2]=2*(u*o+h*s+a*n-l*i)),EY(e,t,r),e}const wve=to();function _ve(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function xve(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10];return e[0]=Math.sqrt(r*r+i*i+n*n),e[1]=Math.sqrt(s*s+o*o+a*a),e[2]=Math.sqrt(l*l+u*u+h*h),e}function Sve(e,t){const r=t[0]+t[5]+t[10];let i=0;return r>0?(i=2*Math.sqrt(r+1),e[3]=.25*i,e[0]=(t[6]-t[9])/i,e[1]=(t[8]-t[2])/i,e[2]=(t[1]-t[4])/i):t[0]>t[5]&&t[0]>t[10]?(i=2*Math.sqrt(1+t[0]-t[5]-t[10]),e[3]=(t[6]-t[9])/i,e[0]=.25*i,e[1]=(t[1]+t[4])/i,e[2]=(t[8]+t[2])/i):t[5]>t[10]?(i=2*Math.sqrt(1+t[5]-t[0]-t[10]),e[3]=(t[8]-t[2])/i,e[0]=(t[1]+t[4])/i,e[1]=.25*i,e[2]=(t[6]+t[9])/i):(i=2*Math.sqrt(1+t[10]-t[0]-t[5]),e[3]=(t[1]-t[4])/i,e[0]=(t[8]+t[2])/i,e[1]=(t[6]+t[9])/i,e[2]=.25*i),e}function Mve(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=t[3],l=n+n,u=s+s,h=o+o,d=n*l,f=n*u,m=n*h,g=s*u,b=s*h,w=o*h,_=a*l,x=a*u,I=a*h,S=i[0],T=i[1],$=i[2];return e[0]=(1-(g+w))*S,e[1]=(f+I)*S,e[2]=(m-x)*S,e[3]=0,e[4]=(f-I)*T,e[5]=(1-(d+w))*T,e[6]=(b+_)*T,e[7]=0,e[8]=(m+x)*$,e[9]=(b-_)*$,e[10]=(1-(d+g))*$,e[11]=0,e[12]=r[0],e[13]=r[1],e[14]=r[2],e[15]=1,e}function Ive(e,t,r,i,n){const s=t[0],o=t[1],a=t[2],l=t[3],u=s+s,h=o+o,d=a+a,f=s*u,m=s*h,g=s*d,b=o*h,w=o*d,_=a*d,x=l*u,I=l*h,S=l*d,T=i[0],$=i[1],E=i[2],C=n[0],O=n[1],R=n[2],D=(1-(b+_))*T,F=(m+S)*T,z=(g-I)*T,B=(m-S)*$,y=(1-(f+_))*$,M=(w+x)*$,A=(g+I)*E,P=(w-x)*E,Y=(1-(f+b))*E;return e[0]=D,e[1]=F,e[2]=z,e[3]=0,e[4]=B,e[5]=y,e[6]=M,e[7]=0,e[8]=A,e[9]=P,e[10]=Y,e[11]=0,e[12]=r[0]+C-(D*C+B*O+A*R),e[13]=r[1]+O-(F*C+y*O+P*R),e[14]=r[2]+R-(z*C+M*O+Y*R),e[15]=1,e}function Tve(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,u=r*o,h=i*o,d=i*a,f=n*o,m=n*a,g=n*l,b=s*o,w=s*a,_=s*l;return e[0]=1-d-g,e[1]=h+_,e[2]=f-w,e[3]=0,e[4]=h-_,e[5]=1-u-g,e[6]=m+b,e[7]=0,e[8]=f+w,e[9]=m-b,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $ve(e,t,r,i,n,s,o){const a=1/(r-t),l=1/(n-i),u=1/(s-o);return e[0]=2*s*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=2*s*l,e[6]=0,e[7]=0,e[8]=(r+t)*a,e[9]=(n+i)*l,e[10]=(o+s)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*s*2*u,e[15]=0,e}function Eve(e,t,r,i,n){const s=1/Math.tan(t/2);let o;return e[0]=s/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,n!=null&&n!==1/0?(o=1/(i-n),e[10]=(n+i)*o,e[14]=2*n*i*o):(e[10]=-1,e[14]=-2*i),e}function Ave(e,t,r,i){const n=Math.tan(t.upDegrees*Math.PI/180),s=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),a=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+a),u=2/(n+s);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-(o-a)*l*.5,e[9]=(n-s)*u*.5,e[10]=i/(r-i),e[11]=-1,e[12]=0,e[13]=0,e[14]=i*r/(r-i),e[15]=0,e}function Cve(e,t,r,i,n,s,o){const a=1/(t-r),l=1/(i-n),u=1/(s-o);return e[0]=-2*a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*a,e[13]=(n+i)*l,e[14]=(o+s)*u,e[15]=1,e}function kve(e,t,r,i){let n,s,o,a,l,u,h,d,f,m;const g=t[0],b=t[1],w=t[2],_=i[0],x=i[1],I=i[2],S=r[0],T=r[1],$=r[2];return Math.abs(g-S)<mt&&Math.abs(b-T)<mt&&Math.abs(w-$)<mt?lI(e):(h=g-S,d=b-T,f=w-$,m=1/Math.sqrt(h*h+d*d+f*f),h*=m,d*=m,f*=m,n=x*f-I*d,s=I*h-_*f,o=_*d-x*h,m=Math.sqrt(n*n+s*s+o*o),m?(m=1/m,n*=m,s*=m,o*=m):(n=0,s=0,o=0),a=d*o-f*s,l=f*n-h*o,u=h*s-d*n,m=Math.sqrt(a*a+l*l+u*u),m?(m=1/m,a*=m,l*=m,u*=m):(a=0,l=0,u=0),e[0]=n,e[1]=a,e[2]=h,e[3]=0,e[4]=s,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(n*g+s*b+o*w),e[13]=-(a*g+l*b+u*w),e[14]=-(h*g+d*b+f*w),e[15]=1,e)}function Ove(e,t,r,i){const n=t[0],s=t[1],o=t[2],a=i[0],l=i[1],u=i[2];let h=n-r[0],d=s-r[1],f=o-r[2],m=h*h+d*d+f*f;m>0&&(m=1/Math.sqrt(m),h*=m,d*=m,f*=m);let g=l*f-u*d,b=u*h-a*f,w=a*d-l*h;return m=g*g+b*b+w*w,m>0&&(m=1/Math.sqrt(m),g*=m,b*=m,w*=m),e[0]=g,e[1]=b,e[2]=w,e[3]=0,e[4]=d*w-f*b,e[5]=f*g-h*w,e[6]=h*b-d*g,e[7]=0,e[8]=h,e[9]=d,e[10]=f,e[11]=0,e[12]=n,e[13]=s,e[14]=o,e[15]=1,e}function Pve(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Rve(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2+e[9]**2+e[10]**2+e[11]**2+e[12]**2+e[13]**2+e[14]**2+e[15]**2)}function Lve(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e[9]=t[9]+r[9],e[10]=t[10]+r[10],e[11]=t[11]+r[11],e[12]=t[12]+r[12],e[13]=t[13]+r[13],e[14]=t[14]+r[14],e[15]=t[15]+r[15],e}function AY(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e[9]=t[9]-r[9],e[10]=t[10]-r[10],e[11]=t[11]-r[11],e[12]=t[12]-r[12],e[13]=t[13]-r[13],e[14]=t[14]-r[14],e[15]=t[15]-r[15],e}function Nve(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12]*r,e[13]=t[13]*r,e[14]=t[14]*r,e[15]=t[15]*r,e}function Dve(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e[9]=t[9]+r[9]*i,e[10]=t[10]+r[10]*i,e[11]=t[11]+r[11]*i,e[12]=t[12]+r[12]*i,e[13]=t[13]+r[13]*i,e[14]=t[14]+r[14]*i,e[15]=t[15]+r[15]*i,e}function Fve(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function jve(e,t){if(e===t)return!0;const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=e[9],f=e[10],m=e[11],g=e[12],b=e[13],w=e[14],_=e[15],x=t[0],I=t[1],S=t[2],T=t[3],$=t[4],E=t[5],C=t[6],O=t[7],R=t[8],D=t[9],F=t[10],z=t[11],B=t[12],y=t[13],M=t[14],A=t[15];return Math.abs(r-x)<=mt*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(i-I)<=mt*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(n-S)<=mt*Math.max(1,Math.abs(n),Math.abs(S))&&Math.abs(s-T)<=mt*Math.max(1,Math.abs(s),Math.abs(T))&&Math.abs(o-$)<=mt*Math.max(1,Math.abs(o),Math.abs($))&&Math.abs(a-E)<=mt*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(l-C)<=mt*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(u-O)<=mt*Math.max(1,Math.abs(u),Math.abs(O))&&Math.abs(h-R)<=mt*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(d-D)<=mt*Math.max(1,Math.abs(d),Math.abs(D))&&Math.abs(f-F)<=mt*Math.max(1,Math.abs(f),Math.abs(F))&&Math.abs(m-z)<=mt*Math.max(1,Math.abs(m),Math.abs(z))&&Math.abs(g-B)<=mt*Math.max(1,Math.abs(g),Math.abs(B))&&Math.abs(b-y)<=mt*Math.max(1,Math.abs(b),Math.abs(y))&&Math.abs(w-M)<=mt*Math.max(1,Math.abs(w),Math.abs(M))&&Math.abs(_-A)<=mt*Math.max(1,Math.abs(_),Math.abs(A))}function Vve(e){const t=mt,r=e[0],i=e[1],n=e[2],s=e[4],o=e[5],a=e[6],l=e[8],u=e[9],h=e[10];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const Uve=TY,zve=AY;Object.freeze({__proto__:null,copy:nve,set:Tp,identity:lI,transpose:Mh,invert:sve,adjoint:ove,determinant:ave,multiply:TY,translate:$Y,scale:lve,rotate:uve,rotateX:cve,rotateY:hve,rotateZ:dve,fromTranslation:pve,fromScaling:fve,fromRotation:mve,fromXRotation:yve,fromYRotation:gve,fromZRotation:vve,fromRotationTranslation:EY,fromQuat2:bve,getTranslation:_ve,getScaling:xve,getRotation:Sve,fromRotationTranslationScale:Mve,fromRotationTranslationScaleOrigin:Ive,fromQuat:Tve,frustum:$ve,perspective:Eve,perspectiveFromFieldOfView:Ave,ortho:Cve,lookAt:kve,targetTo:Ove,str:Pve,frob:Rve,add:Lve,subtract:AY,multiplyScalar:Nve,multiplyScalarAndAdd:Dve,exactEquals:Fve,equals:jve,isOrthoNormal:Vve,mul:Uve,sub:zve});const Bve=(e,t)=>{const r=Tp(e,t,0,0,0,0,t,0,0,0,0,t,0,0,0,0,1);return Mh(r,r)},Gve=(e,t)=>{const r=Tp(e,t,0,0,.5-.5*t,0,t,0,.5-.5*t,0,0,t,.5-.5*t,0,0,0,1);return Mh(r,r)},qve=(e,t)=>{const r=1-t,i=Tp(e,.2126+.7874*r,.7152-.7152*r,.0722-.0722*r,0,.2126-.2126*r,.7152+.2848*r,.0722-.0722*r,0,.2126-.2126*r,.7152-.7152*r,.0722+.9278*r,0,0,0,0,1);return Mh(i,i)},Hve=(e,t)=>{const r=Math.sin(t*Math.PI/180),i=Math.cos(t*Math.PI/180),n=Tp(e,.213+.787*i-.213*r,.715-.715*i-.715*r,.072-.072*i+.928*r,0,.213-.213*i+.143*r,.715+.285*i+.14*r,.072-.072*i-.283*r,0,.213-.213*i-.787*r,.715-.715*i+.715*r,.072+.928*i+.072*r,0,0,0,0,1);return Mh(n,n)},Wve=(e,t)=>{const r=1-2*t,i=Tp(e,r,0,0,t,0,r,0,t,0,0,r,t,0,0,0,1);return Mh(i,i)},Jve=(e,t)=>{const r=Tp(e,.213+.787*t,.715-.715*t,.072-.072*t,0,.213-.213*t,.715+.285*t,.072-.072*t,0,.213-.213*t,.715-.715*t,.072+.928*t,0,0,0,0,1);return Mh(r,r)},Zve=(e,t)=>{const r=1-t,i=Tp(e,.393+.607*r,.769-.769*r,.189-.189*r,0,.349-.349*r,.686+.314*r,.168-.168*r,0,.272-.272*r,.534-.534*r,.131+.869*r,0,0,0,0,1);return Mh(i,i)};class f${constructor(t,r,i){this.strength=t,this.radius=r,this.threshold=i,this.type="bloom"}interpolate(t,r,i){this.strength=As(t.strength,r.strength,i),this.radius=As(t.radius,r.radius,i),this.threshold=As(t.threshold,r.threshold,i)}clone(){return new f$(this.strength,this.radius,this.threshold)}toJSON(){return{type:"bloom",radius:bw(this.radius),strength:this.strength,threshold:this.threshold}}}class m${constructor(t){this.radius=t,this.type="blur"}interpolate(t,r,i){this.radius=Math.round(As(t.radius,r.radius,i))}clone(){return new m$(this.radius)}toJSON(){return{type:"blur",radius:bw(this.radius)}}}class m_{constructor(t,r){this.type=t,this.amount=r,this.type!=="invert"&&this.type!=="grayscale"&&this.type!=="sepia"||(this.amount=Math.min(this.amount,1))}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.amount=As(t.amount,r.amount,i),this._updateMatrix()}clone(){return new m_(this.type,this.amount)}toJSON(){return{type:this.type,amount:this.amount}}_updateMatrix(){const t=this._colorMatrix||p$();switch(this.type){case"brightness":this._colorMatrix=Bve(t,this.amount);break;case"contrast":this._colorMatrix=Gve(t,this.amount);break;case"grayscale":this._colorMatrix=qve(t,this.amount);break;case"invert":this._colorMatrix=Wve(t,this.amount);break;case"saturate":this._colorMatrix=Jve(t,this.amount);break;case"sepia":this._colorMatrix=Zve(t,this.amount)}}}class y${constructor(t,r,i,n){this.offsetX=t,this.offsetY=r,this.blurRadius=i,this.color=n,this.type="drop-shadow"}interpolate(t,r,i){this.offsetX=As(t.offsetX,r.offsetX,i),this.offsetY=As(t.offsetY,r.offsetY,i),this.blurRadius=As(t.blurRadius,r.blurRadius,i),this.color[0]=Math.round(As(t.color[0],r.color[0],i)),this.color[1]=Math.round(As(t.color[1],r.color[1],i)),this.color[2]=Math.round(As(t.color[2],r.color[2],i)),this.color[3]=As(t.color[3],r.color[3],i)}clone(){return new y$(this.offsetX,this.offsetY,this.blurRadius,[...this.color])}toJSON(){const t=[...this.color];return t[3]*=255,{type:"drop-shadow",xoffset:bw(this.offsetX),yoffset:bw(this.offsetY),blurRadius:bw(this.blurRadius),color:t}}}class g${constructor(t){this.angle=t,this.type="hue-rotate"}get colorMatrix(){return this._colorMatrix||this._updateMatrix(),this._colorMatrix}interpolate(t,r,i){this.angle=As(t.angle,r.angle,i),this._updateMatrix()}clone(){return new g$(this.angle)}toJSON(){return{type:"hue-rotate",angle:this.angle}}_updateMatrix(){const t=this._colorMatrix||p$();this._colorMatrix=Hve(t,this.angle)}}class v${constructor(t){this.amount=t,this.type="opacity",this.amount=Math.min(this.amount,1)}interpolate(t,r,i){this.amount=As(t.amount,r.amount,i)}clone(){return new v$(this.amount)}toJSON(){return{type:"opacity",amount:this.amount}}}function As(e,t,r){return e+(t-e)*r}function bw(e){return Math.round(1e3*my(e))/1e3}function Yve(e){switch(e.type){case"grayscale":case"sepia":case"invert":return new m_(e.type,0);case"saturate":case"brightness":case"contrast":return new m_(e.type,1);case"opacity":return new v$(1);case"hue-rotate":return new g$(0);case"blur":return new m$(0);case"drop-shadow":return new y$(0,0,0,[...XL("transparent")]);case"bloom":return new f$(0,0,1)}}function Kve(e,t){const r=e.length>t.length?e:t;return(e.length>t.length?t:e).every((i,n)=>i.type===r[n].type)}function Xve(e,t){const r=e.length>t.length?e:t,i=e.length>t.length?t:e;for(let n=i.length;n<r.length;n++)i.push(Yve(r[n]))}function Qve(e){const t=e[0];return!!t&&"type"in t}var P7,R7,CY={exports:{}};function kY(e){if(!e||e.length===0)return null;if(typeof e=="string"){const r=L7(e);return r&&r.length!==0?r:null}const t=e.map(r=>{if(!Number.isFinite(r.scale)||r.scale<=0)throw new Z("effect:invalid-scale","scale must be finite and greater than 0",{stop:r});return{scale:r.scale,effects:L7(r.value)}});t.sort((r,i)=>i.effects.length-r.effects.length);for(let r=0;r<t.length-1;r++){if(!Kve(t[r].effects,t[r+1].effects))throw new Z("effect:interpolation-impossible","Cannot interpolate by scale between 2 lists of mixed effects",{a:t[r].effects,b:t[r+1].effects});Xve(t[r].effects,t[r+1].effects)}return t.sort((r,i)=>i.scale-r.scale),t}function L7(e){let t;if(!e)return[];try{t=CY.exports.parse(e)}catch(r){throw new Z("effect:invalid-syntax","Invalid effect syntax",{value:e,error:r})}return t.map(r=>e1e(r))}function e1e(e){try{switch(e.name){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":return t1e(e);case"opacity":return r1e(e);case"hue-rotate":return i1e(e);case"blur":return n1e(e);case"drop-shadow":return s1e(e);case"bloom":return o1e(e)}}catch(t){throw t.details.filter=e,t}throw new Z("effect:unknown-effect",`Effect '${e.name}' is not supported`,{effect:e})}function t1e(e){let t=1;return Jv(e.parameters,1),e.parameters.length===1&&(t=el(e.parameters[0])),new m_(e.name,t)}function r1e(e){let t=1;return Jv(e.parameters,1),e.parameters.length===1&&(t=el(e.parameters[0])),new v$(t)}function i1e(e){let t=0;return Jv(e.parameters,1),e.parameters.length===1&&(t=d1e(e.parameters[0])),new g$(t)}function n1e(e){let t=0;return Jv(e.parameters,1),e.parameters.length===1&&(t=qN(e.parameters[0]),w2(t,e.parameters[0])),new m$(t)}function s1e(e){const t=[];let r=null;for(const i of e.parameters)if(i.type==="color"){if(t.length&&Object.freeze(t),r)throw new Z("effect:type-error","Accepts only one color",{});r=p1e(i)}else{const n=qN(i);if(Object.isFrozen(t))throw new Z("effect:type-error","<length> parameters not consecutive",{lengths:t});t.push(n),t.length===3&&w2(n,i)}if(t.length<2||t.length>3)throw new Z("effect:type-error",`Expected <length>{2,3}, Actual: <length>{${t.length}}`,{lengths:t});return new y$(t[0],t[1],t[2]||0,r||OY("black"))}function o1e(e){let t=1,r=0,i=0;return Jv(e.parameters,3),e.parameters[0]&&(t=el(e.parameters[0])),e.parameters[1]&&(r=qN(e.parameters[1]),w2(r,e.parameters[1])),e.parameters[2]&&(i=el(e.parameters[2])),new f$(t,r,i)}function Jv(e,t){if(e.length>t)throw new Z("effect:type-error",`Function supports up to ${t} parameters, Actual: ${e.length}`,{parameters:e})}function b$(e){if(e.type==="color")return"<color>";if(e.unit){if(GN[e.unit])return"<length>";if(BN[e.unit])return"<angle>";if(e.unit==="%")return"<percentage>"}return"<double>"}function w2(e,t){if(e<0)throw new Z("effect:type-error",`Negative values are not allowed, Actual: ${e}`,{term:t})}function a1e(e){if(e.type!=="quantity"||e.unit!==null)throw new Z("effect:type-error",`Expected <double>, Actual: ${b$(e)}`,{term:e})}function l1e(e){if(e.type!=="quantity"||e.unit!==null&&e.unit!=="%")throw new Z("effect:type-error",`Expected <double> or <percentage>, Actual: ${b$(e)}`,{term:e})}R7=function(){function e(n,s){function o(){this.constructor=n}o.prototype=s.prototype,n.prototype=new o}function t(n,s,o,a){var l=Error.call(this,n);return Object.setPrototypeOf&&Object.setPrototypeOf(l,t.prototype),l.expected=s,l.found=o,l.location=a,l.name="SyntaxError",l}function r(n,s,o){return o=o||" ",n.length>s?n:(s-=n.length,n+(o+=o.repeat(s)).slice(0,s))}function i(n,s){var o,a={},l=(s=s!==void 0?s:{}).grammarSource,u={start:FF},h=FF,d="none",f=")",m=",",g="(",b="%",w="px",_="cm",x="mm",I="in",S="pt",T="pc",$="deg",E="rad",C="grad",O="turn",R="#",D=".",F="e",z=/^[ \t\n\r]/,B=/^[a-z\-]/,y=/^[0-9a-fA-F]/,M=/^[+\-]/,A=/^[0-9]/,P=tc("none"),Y=qi("none",!1),Q=qi(")",!1),le=qi(",",!1),re=tc("whitespace"),we=m1([" ","	",`
`,"\r"],!1,!1),_e=tc("function"),Ce=qi("(",!1),Ne=tc("identifier"),ht=m1([["a","z"],"-"],!1,!1),st=tc("percentage"),pt=qi("%",!1),Pt=tc("length"),X=qi("px",!1),te=qi("cm",!1),he=qi("mm",!1),V=qi("in",!1),J=qi("pt",!1),ne=qi("pc",!1),pe=tc("angle"),k=qi("deg",!1),q=qi("rad",!1),H=qi("grad",!1),ee=qi("turn",!1),W=tc("number"),G=tc("color"),de=qi("#",!1),fe=m1([["0","9"],["a","f"],["A","F"]],!1,!1),Me=m1(["+","-"],!1,!1),Oe=m1([["0","9"]],!1,!1),Ye=qi(".",!1),Xe=qi("e",!1),ot=function(){return[]},Jt=function(K,ve){return{type:"function",name:K,parameters:ve||[]}},qn=function(K,ve){return ve.length>0?Zle(K,ve,3):[K]},Vl=function(K){return{type:"quantity",value:K.value,unit:K.unit}},be=function(K){return{type:"color",colorType:K.type,value:K.value}},He=function(K){return K},dt=function(){return lx()},yt=function(K){return{value:K,unit:"%"}},bt=function(K){return{value:K,unit:"px"}},vi=function(K){return{value:K,unit:"cm"}},ws=function(K){return{value:K,unit:"mm"}},Ch=function(K){return{value:K,unit:"in"}},ox=function(K){return{value:K,unit:"pt"}},ec=function(K){return{value:K,unit:"pc"}},p1=function(K){return{value:K,unit:"deg"}},Ny=function(K){return{value:K,unit:"rad"}},kh=function(K){return{value:K,unit:"grad"}},QE=function(K){return{value:K,unit:"turn"}},f1=function(K){return{value:K,unit:null}},Dy=function(){return{type:"hex",value:lx()}},Rle=function(K){return{type:"function",value:K}},Lle=function(){return{type:"named",value:lx()}},Nle=function(){return parseFloat(lx())},ue=0,Lr=0,ax=[{line:1,column:1}],Ul=0,e4=[],Qe=0;if("startRule"in s){if(!(s.startRule in u))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');h=u[s.startRule]}function lx(){return n.substring(Lr,ue)}function qi(K,ve){return{type:"literal",text:K,ignoreCase:ve}}function m1(K,ve,Ie){return{type:"class",parts:K,inverted:ve,ignoreCase:Ie}}function Dle(){return{type:"end"}}function tc(K){return{type:"other",description:K}}function NF(K){var ve,Ie=ax[K];if(Ie)return Ie;for(ve=K-1;!ax[ve];)ve--;for(Ie={line:(Ie=ax[ve]).line,column:Ie.column};ve<K;)n.charCodeAt(ve)===10?(Ie.line++,Ie.column=1):Ie.column++,ve++;return ax[K]=Ie,Ie}function DF(K,ve){var Ie=NF(K),kt=NF(ve);return{source:l,start:{offset:K,line:Ie.line,column:Ie.column},end:{offset:ve,line:kt.line,column:kt.column}}}function _t(K){ue<Ul||(ue>Ul&&(Ul=ue,e4=[]),e4.push(K))}function Fle(K,ve,Ie){return new t(t.buildMessage(K,ve),K,ve,Ie)}function FF(){var K;return(K=jle())===a&&(K=Vle()),K}function jle(){var K,ve;return Qe++,K=ue,Hi(),n.substr(ue,4)===d?(ve=d,ue+=4):(ve=a,Qe===0&&_t(Y)),ve!==a?(Hi(),Lr=K,K=ot()):(ue=K,K=a),Qe--,K===a&&Qe===0&&_t(P),K}function Vle(){var K,ve;if(K=[],(ve=t4())!==a)for(;ve!==a;)K.push(ve),ve=t4();else K=a;return K}function t4(){var K,ve,Ie,kt;return K=ue,Hi(),(ve=zle())!==a?(Hi(),(Ie=Ule())===a&&(Ie=null),Hi(),n.charCodeAt(ue)===41?(kt=f,ue++):(kt=a,Qe===0&&_t(Q)),kt!==a?(Hi(),Lr=K,K=Jt(ve,Ie)):(ue=K,K=a)):(ue=K,K=a),K}function Ule(){var K,ve,Ie,kt,ln,Ur,Bo,ux;if(K=ue,(ve=r4())!==a){for(Ie=[],kt=ue,ln=Hi(),n.charCodeAt(ue)===44?(Ur=m,ue++):(Ur=a,Qe===0&&_t(le)),Ur===a&&(Ur=null),Bo=Hi(),(ux=r4())!==a?kt=ln=[ln,Ur,Bo,ux]:(ue=kt,kt=a);kt!==a;)Ie.push(kt),kt=ue,ln=Hi(),n.charCodeAt(ue)===44?(Ur=m,ue++):(Ur=a,Qe===0&&_t(le)),Ur===a&&(Ur=null),Bo=Hi(),(ux=r4())!==a?kt=ln=[ln,Ur,Bo,ux]:(ue=kt,kt=a);Lr=K,K=qn(ve,Ie)}else ue=K,K=a;return K}function r4(){var K,ve;return K=ue,(ve=Ble())===a&&(ve=Gle())===a&&(ve=qle())===a&&(ve=Hle()),ve!==a&&(Lr=K,ve=Vl(ve)),(K=ve)===a&&(K=ue,(ve=Wle())!==a&&(Lr=K,ve=be(ve)),K=ve),K}function Hi(){var K,ve;for(Qe++,K=[],z.test(n.charAt(ue))?(ve=n.charAt(ue),ue++):(ve=a,Qe===0&&_t(we));ve!==a;)K.push(ve),z.test(n.charAt(ue))?(ve=n.charAt(ue),ue++):(ve=a,Qe===0&&_t(we));return Qe--,ve=a,Qe===0&&_t(re),K}function zle(){var K,ve,Ie;return Qe++,K=ue,(ve=jF())!==a?(n.charCodeAt(ue)===40?(Ie=g,ue++):(Ie=a,Qe===0&&_t(Ce)),Ie!==a?(Lr=K,K=He(ve)):(ue=K,K=a)):(ue=K,K=a),Qe--,K===a&&(ve=a,Qe===0&&_t(_e)),K}function jF(){var K,ve,Ie;if(Qe++,K=ue,ve=[],B.test(n.charAt(ue))?(Ie=n.charAt(ue),ue++):(Ie=a,Qe===0&&_t(ht)),Ie!==a)for(;Ie!==a;)ve.push(Ie),B.test(n.charAt(ue))?(Ie=n.charAt(ue),ue++):(Ie=a,Qe===0&&_t(ht));else ve=a;return ve!==a&&(Lr=K,ve=dt()),Qe--,(K=ve)===a&&(ve=a,Qe===0&&_t(Ne)),K}function Ble(){var K,ve,Ie;return Qe++,K=ue,Hi(),(ve=zo())!==a?(n.charCodeAt(ue)===37?(Ie=b,ue++):(Ie=a,Qe===0&&_t(pt)),Ie!==a?(Lr=K,K=yt(ve)):(ue=K,K=a)):(ue=K,K=a),Qe--,K===a&&Qe===0&&_t(st),K}function Gle(){var K,ve,Ie;return Qe++,K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===w?(Ie=w,ue+=2):(Ie=a,Qe===0&&_t(X)),Ie!==a?(Lr=K,K=bt(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===_?(Ie=_,ue+=2):(Ie=a,Qe===0&&_t(te)),Ie!==a?(Lr=K,K=vi(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===x?(Ie=x,ue+=2):(Ie=a,Qe===0&&_t(he)),Ie!==a?(Lr=K,K=ws(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===I?(Ie=I,ue+=2):(Ie=a,Qe===0&&_t(V)),Ie!==a?(Lr=K,K=Ch(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===S?(Ie=S,ue+=2):(Ie=a,Qe===0&&_t(J)),Ie!==a?(Lr=K,K=ox(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,Hi(),(ve=zo())!==a?(n.substr(ue,2)===T?(Ie=T,ue+=2):(Ie=a,Qe===0&&_t(ne)),Ie!==a?(Lr=K,K=ec(ve)):(ue=K,K=a)):(ue=K,K=a)))))),Qe--,K===a&&Qe===0&&_t(Pt),K}function qle(){var K,ve,Ie;return Qe++,K=ue,(ve=zo())!==a?(n.substr(ue,3)===$?(Ie=$,ue+=3):(Ie=a,Qe===0&&_t(k)),Ie!==a?(Lr=K,K=p1(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,(ve=zo())!==a?(n.substr(ue,3)===E?(Ie=E,ue+=3):(Ie=a,Qe===0&&_t(q)),Ie!==a?(Lr=K,K=Ny(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,(ve=zo())!==a?(n.substr(ue,4)===C?(Ie=C,ue+=4):(Ie=a,Qe===0&&_t(H)),Ie!==a?(Lr=K,K=kh(ve)):(ue=K,K=a)):(ue=K,K=a),K===a&&(K=ue,(ve=zo())!==a?(n.substr(ue,4)===O?(Ie=O,ue+=4):(Ie=a,Qe===0&&_t(ee)),Ie!==a?(Lr=K,K=QE(ve)):(ue=K,K=a)):(ue=K,K=a)))),Qe--,K===a&&(ve=a,Qe===0&&_t(pe)),K}function Hle(){var K,ve;return Qe++,K=ue,Hi(),(ve=zo())!==a?(Lr=K,K=f1(ve)):(ue=K,K=a),Qe--,K===a&&Qe===0&&_t(W),K}function Wle(){var K,ve,Ie,kt;if(Qe++,K=ue,n.charCodeAt(ue)===35?(ve=R,ue++):(ve=a,Qe===0&&_t(de)),ve!==a){if(Ie=[],y.test(n.charAt(ue))?(kt=n.charAt(ue),ue++):(kt=a,Qe===0&&_t(fe)),kt!==a)for(;kt!==a;)Ie.push(kt),y.test(n.charAt(ue))?(kt=n.charAt(ue),ue++):(kt=a,Qe===0&&_t(fe));else Ie=a;Ie!==a?(Lr=K,K=Dy()):(ue=K,K=a)}else ue=K,K=a;return K===a&&(K=ue,(ve=t4())!==a&&(Lr=K,ve=Rle(ve)),(K=ve)===a&&(K=ue,(ve=jF())!==a&&(Lr=K,ve=Lle()),K=ve)),Qe--,K===a&&(ve=a,Qe===0&&_t(G)),K}function zo(){var K,ve,Ie,kt,ln,Ur,Bo;for(K=ue,M.test(n.charAt(ue))?(n.charAt(ue),ue++):Qe===0&&_t(Me),ve=ue,Ie=[],A.test(n.charAt(ue))?(kt=n.charAt(ue),ue++):(kt=a,Qe===0&&_t(Oe));kt!==a;)Ie.push(kt),A.test(n.charAt(ue))?(kt=n.charAt(ue),ue++):(kt=a,Qe===0&&_t(Oe));if(n.charCodeAt(ue)===46?(kt=D,ue++):(kt=a,Qe===0&&_t(Ye)),kt!==a){if(ln=[],A.test(n.charAt(ue))?(Ur=n.charAt(ue),ue++):(Ur=a,Qe===0&&_t(Oe)),Ur!==a)for(;Ur!==a;)ln.push(Ur),A.test(n.charAt(ue))?(Ur=n.charAt(ue),ue++):(Ur=a,Qe===0&&_t(Oe));else ln=a;ln!==a?ve=Ie=[Ie,kt,ln]:(ue=ve,ve=a)}else ue=ve,ve=a;if(ve===a)if(ve=[],A.test(n.charAt(ue))?(Ie=n.charAt(ue),ue++):(Ie=a,Qe===0&&_t(Oe)),Ie!==a)for(;Ie!==a;)ve.push(Ie),A.test(n.charAt(ue))?(Ie=n.charAt(ue),ue++):(Ie=a,Qe===0&&_t(Oe));else ve=a;if(ve!==a){if(Ie=ue,n.charCodeAt(ue)===101?(kt=F,ue++):(kt=a,Qe===0&&_t(Xe)),kt!==a){if(M.test(n.charAt(ue))?(ln=n.charAt(ue),ue++):(ln=a,Qe===0&&_t(Me)),ln===a&&(ln=null),Ur=[],A.test(n.charAt(ue))?(Bo=n.charAt(ue),ue++):(Bo=a,Qe===0&&_t(Oe)),Bo!==a)for(;Bo!==a;)Ur.push(Bo),A.test(n.charAt(ue))?(Bo=n.charAt(ue),ue++):(Bo=a,Qe===0&&_t(Oe));else Ur=a;Ur!==a?Ie=kt=[kt,ln,Ur]:(ue=Ie,Ie=a)}else ue=Ie,Ie=a;Ie===a&&(Ie=null),Lr=K,K=Nle()}else ue=K,K=a;return K}function Jle(K,ve){return K.map(function(Ie){return Ie[ve]})}function Zle(K,ve,Ie){return[K].concat(Jle(ve,Ie))}if((o=h())!==a&&ue===n.length)return o;throw o!==a&&ue<n.length&&_t(Dle()),Fle(e4,Ul<n.length?n.charAt(Ul):null,Ul<n.length?DF(Ul,Ul+1):DF(Ul,Ul))}return e(t,Error),t.prototype.format=function(n){var s="Error: "+this.message;if(this.location){var o,a=null;for(o=0;o<n.length;o++)if(n[o].source===this.location.source){a=n[o].text.split(/\r\n|\n|\r/g);break}var l=this.location.start,u=this.location.source+":"+l.line+":"+l.column;if(a){var h=this.location.end,d=r("",l.line.toString().length),f=a[l.line-1],m=l.line===h.line?h.column:f.length+1;s+=`
 --> `+u+`
`+d+` |
`+l.line+" | "+f+`
`+d+" | "+r("",l.column-1)+r("",m-l.column,"^")}else s+=`
 at `+u}return s},t.buildMessage=function(n,s){var o={literal:function(m){return'"'+l(m.text)+'"'},class:function(m){var g=m.parts.map(function(b){return Array.isArray(b)?u(b[0])+"-"+u(b[1]):u(b)});return"["+(m.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(m){return m.description}};function a(m){return m.charCodeAt(0).toString(16).toUpperCase()}function l(m){return m.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function u(m){return m.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+a(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+a(g)})}function h(m){return o[m.type](m)}function d(m){var g,b,w=m.map(h);if(w.sort(),w.length>0){for(g=1,b=1;g<w.length;g++)w[g-1]!==w[g]&&(w[b]=w[g],b++);w.length=b}switch(w.length){case 1:return w[0];case 2:return w[0]+" or "+w[1];default:return w.slice(0,-1).join(", ")+", or "+w[w.length-1]}}function f(m){return m?'"'+l(m)+'"':"end of input"}return"Expected "+d(n)+" but "+f(s)+" found."},{SyntaxError:t,parse:i}},(P7=CY).exports&&(P7.exports=R7());const BN={deg:1,grad:.9,rad:180/Math.PI,turn:360};function u1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&BN[e.unit]!=null))throw new Z("effect:type-error",`Expected <angle>, Actual: ${b$(e)}`,{term:e})}const GN={px:1,cm:96/2.54,mm:96/2.54/10,in:96,pc:16,pt:96/72};function c1e(e){if(e.type!=="quantity"||!(e.value===0&&e.unit===null||e.unit&&GN[e.unit]!=null))throw new Z("effect:type-error",`Expected <length>, Actual: ${b$(e)}`,{term:e})}function el(e){l1e(e);const t=e.value;return w2(t,e),e.unit==="%"?.01*t:t}function h1e(e){return a1e(e),w2(e.value,e),e.value}function d1e(e){return u1e(e),e.value*BN[e.unit]||0}function qN(e){return c1e(e),e.value*GN[e.unit]||0}function p1e(e){switch(e.colorType){case"hex":return Zde(e.value);case"named":return OY(e.value);case"function":return y1e(e.value)}}function OY(e){if(!BW(e))throw new Z("effect:unknown-color",`color '${e}' isn't valid`,{namedColor:e});return Jde(e)}const f1e=/^rgba?/i,m1e=/^hsla?/i;function y1e(e){if(Jv(e.parameters,4),f1e.test(e.name))return[el(e.parameters[0]),el(e.parameters[1]),el(e.parameters[2]),e.parameters[3]?el(e.parameters[3]):1];if(m1e.test(e.name))return GW(h1e(e.parameters[0]),el(e.parameters[1]),el(e.parameters[2]),e.parameters[3]?el(e.parameters[3]):1);throw new Z("effect:syntax-error",`Invalid color function '${e.name}'`,{colorFunction:e})}function mO(e,t,r){try{return v1e(e)}catch(n){var i;r==null||(i=r.messages)==null||i.push(n)}return null}function yO(e,t,r,i){try{const n=g1e(e);Ro(r,n,t)}catch(n){i.messages&&i.messages.push(n)}}function g1e(e){const t=kY(e);return t?Qve(t)?t.map(r=>r.toJSON()):t.map(({scale:r,effects:i})=>({scale:r,value:i.map(n=>n.toJSON())})):null}function v1e(e){if(!e||e.length===0)return null;if(b1e(e)){const t=[];for(const r of e)t.push({scale:r.scale,value:N7(r.value)});return t}return N7(e)}function b1e(e){const t=e[0];return!!t&&"scale"in t}function N7(e){if(!e||!e.length)return"";const t=[];for(const r of e){let i=[];switch(r.type){case"grayscale":case"sepia":case"saturate":case"invert":case"brightness":case"contrast":case"opacity":i=[rc(r,"amount")];break;case"blur":i=[rc(r,"radius","pt")];break;case"hue-rotate":i=[rc(r,"angle","deg")];break;case"drop-shadow":i=[rc(r,"xoffset","pt"),rc(r,"yoffset","pt"),rc(r,"blurRadius","pt"),w1e(r,"color")];break;case"bloom":i=[rc(r,"strength"),rc(r,"radius","pt"),rc(r,"threshold")]}const n=`${r.type}(${i.filter(Boolean).join(" ")})`;kY(n),t.push(n)}return t.join(" ")}function rc(e,t,r){if(e[t]==null)throw new Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});return r?e[t]+r:""+e[t]}function w1e(e,t){if(e[t]==null)throw new Z("effect:missing-parameter",`Missing parameter '${t}' in ${e.type} effect`,{effect:e});const r=e[t];return`rgba(${r[0]||0}, ${r[1]||0}, ${r[2]||0}, ${r[3]/255||0})`}const by=e=>{let t=class extends e{constructor(){super(...arguments),this.blendMode="normal",this.effect=null}};return c([p({type:["average","color-burn","color-dodge","color","darken","destination-atop","destination-in","destination-out","destination-over","difference","exclusion","hard-light","hue","invert","lighten","lighter","luminosity","minus","multiply","normal","overlay","plus","reflect","saturation","screen","soft-light","source-atop","source-in","source-out","vivid-light","xor"],nonNullable:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!0}}}})],t.prototype,"blendMode",void 0),c([p({json:{read:!1,write:!1,origins:{"web-map":{read:{reader:mO},write:{allowNull:!0,writer:yO}}}}})],t.prototype,"effect",void 0),t=c([N("esri.layers.mixins.BlendLayer")],t),t},w$=e=>{let t=class extends e{constructor(){super(...arguments),this.customParameters=null}};return c([p({type:Object,json:{write:{overridePolicy:r=>({enabled:!!(r&&Object.keys(r).length>0)})}}})],t.prototype,"customParameters",void 0),t=c([N("esri.layers.mixins.CustomParametersMixin")],t),t},D7={milliseconds:1,seconds:1e3,minutes:6e4,hours:36e5,days:864e5,weeks:6048e5,months:26784e5,years:31536e6,decades:31536e7,centuries:31536e8},_1e={milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",multiplier:1},seconds:{getter:"getSeconds",setter:"setSeconds",multiplier:1},minutes:{getter:"getMinutes",setter:"setMinutes",multiplier:1},hours:{getter:"getHours",setter:"setHours",multiplier:1},days:{getter:"getDate",setter:"setDate",multiplier:1},weeks:{getter:"getDate",setter:"setDate",multiplier:7},months:{getter:"getMonth",setter:"setMonth",multiplier:1},years:{getter:"getFullYear",setter:"setFullYear",multiplier:1},decades:{getter:"getFullYear",setter:"setFullYear",multiplier:10},centuries:{getter:"getFullYear",setter:"setFullYear",multiplier:100}};function wm(e,t,r){const i=new Date(e.getTime());if(t&&r){const n=_1e[r],{getter:s,setter:o,multiplier:a}=n;i[o](i[s]()+t*a)}return i}function F7(e,t){switch(t){case"milliseconds":return new Date(e.getTime());case"seconds":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds());case"minutes":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes());case"hours":return new Date(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours());case"days":return new Date(e.getFullYear(),e.getMonth(),e.getDate());case"weeks":return new Date(e.getFullYear(),e.getMonth(),e.getDate()-e.getDay());case"months":return new Date(e.getFullYear(),e.getMonth(),1);case"years":return new Date(e.getFullYear(),0,1);case"decades":return new Date(e.getFullYear()-e.getFullYear()%10,0,1);case"centuries":return new Date(e.getFullYear()-e.getFullYear()%100,0,1);default:return new Date}}function x1e(e,t,r){return e===0?0:e*D7[t]/D7[r]}var Ba;let go=Ba=class extends me{constructor(e){super(e),this.end=null,this.start=null}static get allTime(){return j7}static get empty(){return S1e}readEnd(e,t){return t.end!=null?new Date(t.end):null}writeEnd(e,t){t.end=e?e.getTime():null}get isAllTime(){return this.equals(Ba.allTime)}get isEmpty(){return this.equals(Ba.empty)}readStart(e,t){return t.start!=null?new Date(t.start):null}writeStart(e,t){t.start=e?e.getTime():null}clone(){return new Ba({end:this.end,start:this.start})}equals(e){if(!e)return!1;const t=U(this.start)?this.start.getTime():this.start,r=U(this.end)?this.end.getTime():this.end,i=U(e.start)?e.start.getTime():e.start,n=U(e.end)?e.end.getTime():e.end;return t===i&&r===n}expandTo(e){if(this.isEmpty||this.isAllTime)return this.clone();const t=HF(this.start,i=>F7(i,e)),r=HF(this.end,i=>wm(F7(i,e),1,e));return new Ba({start:t,end:r})}intersection(e){if(!e)return this.clone();if(this.isEmpty||e.isEmpty)return Ba.empty;if(this.isAllTime)return e.clone();if(e.isAllTime)return this.clone();const t=Wg(this.start,-1/0,a=>a.getTime()),r=Wg(this.end,1/0,a=>a.getTime()),i=Wg(e.start,-1/0,a=>a.getTime()),n=Wg(e.end,1/0,a=>a.getTime());let s,o;if(i>=t&&i<=r?s=i:t>=i&&t<=n&&(s=t),r>=i&&r<=n?o=r:n>=t&&n<=r&&(o=n),!isNaN(s)&&!isNaN(o)){const a=new Ba;return a.start=s===-1/0?null:new Date(s),a.end=o===1/0?null:new Date(o),a}return Ba.empty}offset(e,t){if(this.isEmpty||this.isAllTime)return this.clone();const r=new Ba,{start:i,end:n}=this;return U(i)&&(r.start=wm(i,e,t)),U(n)&&(r.end=wm(n,e,t)),r}union(e){if(!e||e.isEmpty)return this.clone();if(this.isEmpty)return e.clone();if(this.isAllTime||e.isAllTime)return j7.clone();const t=U(this.start)&&U(e.start)?new Date(Math.min(this.start.getTime(),e.start.getTime())):null,r=U(this.end)&&U(e.end)?new Date(Math.max(this.end.getTime(),e.end.getTime())):null;return new Ba({start:t,end:r})}};c([p({type:Date,json:{write:{allowNull:!0}}})],go.prototype,"end",void 0),c([ye("end")],go.prototype,"readEnd",null),c([Se("end")],go.prototype,"writeEnd",null),c([p({readOnly:!0,json:{read:!1}})],go.prototype,"isAllTime",null),c([p({readOnly:!0,json:{read:!1}})],go.prototype,"isEmpty",null),c([p({type:Date,json:{write:{allowNull:!0}}})],go.prototype,"start",void 0),c([ye("start")],go.prototype,"readStart",null),c([Se("start")],go.prototype,"writeStart",null),go=Ba=c([N("esri.TimeExtent")],go);const j7=new go,S1e=new go({start:void 0,end:void 0}),bs=go;var gO;let Kc=gO=class extends me{constructor(e){super(e),this.type="map-layer"}clone(){const{mapLayerId:e,gdbVersion:t}=this;return new gO({mapLayerId:e,gdbVersion:t})}};c([tt({mapLayer:"map-layer"})],Kc.prototype,"type",void 0),c([p({type:jt,json:{write:!0}})],Kc.prototype,"mapLayerId",void 0),c([p({type:String,json:{write:!0}})],Kc.prototype,"gdbVersion",void 0),Kc=gO=c([N("esri.layers.support.source.MapLayerSource")],Kc);var vO;let xc=vO=class extends me{constructor(e){super(e),this.type="query-table"}clone(){var e;const{workspaceId:t,query:r,oidFields:i,spatialReference:n,geometryType:s}=this,o={workspaceId:t,query:r,oidFields:i,spatialReference:(e=n?.clone())!=null?e:void 0,geometryType:s};return new vO(o)}};c([tt({queryTable:"query-table"})],xc.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],xc.prototype,"workspaceId",void 0),c([p({type:String,json:{write:!0}})],xc.prototype,"query",void 0),c([p({type:String,json:{write:!0}})],xc.prototype,"oidFields",void 0),c([p({type:Fe,json:{write:!0}})],xc.prototype,"spatialReference",void 0),c([tt(Cfe)],xc.prototype,"geometryType",void 0),xc=vO=c([N("esri.layers.support.source.QueryTableDataSource")],xc);var bO;let mg=bO=class extends me{constructor(e){super(e),this.type="raster"}clone(){const{workspaceId:e,dataSourceName:t}=this;return new bO({workspaceId:e,dataSourceName:t})}};c([tt({raster:"raster"})],mg.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],mg.prototype,"dataSourceName",void 0),c([p({type:String,json:{write:!0}})],mg.prototype,"workspaceId",void 0),mg=bO=c([N("esri.layers.support.source.RasterDataSource")],mg);var wO;let gf=wO=class extends me{constructor(e){super(e),this.type="table"}clone(){const{workspaceId:e,gdbVersion:t,dataSourceName:r}=this;return new wO({workspaceId:e,gdbVersion:t,dataSourceName:r})}};c([tt({table:"table"})],gf.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],gf.prototype,"workspaceId",void 0),c([p({type:String,json:{write:!0}})],gf.prototype,"gdbVersion",void 0),c([p({type:String,json:{write:!0}})],gf.prototype,"dataSourceName",void 0),gf=wO=c([N("esri.layers.support.source.TableDataSource")],gf);var _O,xO;const M1e=li()({esriLeftInnerJoin:"left-inner-join",esriLeftOuterJoin:"left-outer-join"});let uo=_O=class extends me{constructor(e){super(e),this.type="join-table"}readLeftTableSource(e,t,r){return V7()(e,t,r)}castLeftTableSource(e){return ju(SO(),e)}readRightTableSource(e,t,r){return V7()(e,t,r)}castRightTableSource(e){return ju(SO(),e)}clone(){var e,t;const{leftTableKey:r,rightTableKey:i,leftTableSource:n,rightTableSource:s,joinType:o}=this,a={leftTableKey:r,rightTableKey:i,leftTableSource:(e=n?.clone())!=null?e:void 0,rightTableSource:(t=s?.clone())!=null?t:void 0,joinType:o};return new _O(a)}};c([tt({joinTable:"join-table"})],uo.prototype,"type",void 0),c([p({type:String,json:{write:!0}})],uo.prototype,"leftTableKey",void 0),c([p({type:String,json:{write:!0}})],uo.prototype,"rightTableKey",void 0),c([p({json:{write:!0}})],uo.prototype,"leftTableSource",void 0),c([ye("leftTableSource")],uo.prototype,"readLeftTableSource",null),c([Ct("leftTableSource")],uo.prototype,"castLeftTableSource",null),c([p({json:{write:!0}})],uo.prototype,"rightTableSource",void 0),c([ye("rightTableSource")],uo.prototype,"readRightTableSource",null),c([Ct("rightTableSource")],uo.prototype,"castRightTableSource",null),c([tt(M1e)],uo.prototype,"joinType",void 0),uo=_O=c([N("esri.layers.support.source.JoinTableDataSource")],uo);let P4=null;function V7(){return P4||(P4=Cv({types:SO()})),P4}let R4=null;function SO(){return R4||(R4={key:"type",base:null,typeMap:{"data-layer":ss,"map-layer":Kc}}),R4}const I1e={key:"type",base:null,typeMap:{"join-table":uo,"query-table":xc,raster:mg,table:gf}};let ss=xO=class extends me{constructor(e){super(e),this.type="data-layer"}clone(){const{fields:e,dataSource:t}=this;return new xO({fields:e,dataSource:t})}};c([tt({dataLayer:"data-layer"})],ss.prototype,"type",void 0),c([p({type:[wo],json:{write:!0}})],ss.prototype,"fields",void 0),c([p({types:I1e,json:{write:!0}})],ss.prototype,"dataSource",void 0),ss=xO=c([N("esri.layers.support.source.DataLayerSource")],ss),ss.from=br(ss);var MO;const U7=new lt({upperLeft:"upper-left",lowerLeft:"lower-left"});let vf=MO=class extends me{constructor(e){super(e),this.extent=null,this.mode="view",this.originPosition="upper-left",this.tolerance=1}clone(){return new MO(ie({extent:this.extent,mode:this.mode,originPosition:this.originPosition,tolerance:this.tolerance}))}};c([p({type:nt,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],vf.prototype,"extent",void 0),c([p({type:["view","edit"],json:{write:!0}})],vf.prototype,"mode",void 0),c([p({type:String,json:{read:U7.read,write:U7.write}})],vf.prototype,"originPosition",void 0),c([p({type:Number,json:{write:{overridePolicy(){return{enabled:this.mode==="view"}}}}})],vf.prototype,"tolerance",void 0),vf=MO=c([N("esri.rest.support.QuantizationParameters")],vf);const PY=vf;var IO;const z7=new lt({count:"count",sum:"sum",min:"min",max:"max",avg:"avg",stddev:"stddev",var:"var",exceedslimit:"exceedslimit",percentile_cont:"percentile-continuous",percentile_disc:"percentile-discrete"});let Ga=IO=class extends me{constructor(e){super(e),this.maxPointCount=void 0,this.maxRecordCount=void 0,this.maxVertexCount=void 0,this.onStatisticField=null,this.outStatisticFieldName=null,this.statisticType=null,this.statisticParameters=null}writeStatisticParameters(e,t){this.statisticType!=="percentile-continuous"&&this.statisticType!=="percentile-discrete"||(t.statisticParameters=ie(e))}clone(){return new IO({maxPointCount:this.maxPointCount,maxRecordCount:this.maxRecordCount,maxVertexCount:this.maxVertexCount,onStatisticField:this.onStatisticField,outStatisticFieldName:this.outStatisticFieldName,statisticType:this.statisticType,statisticParameters:ie(this.statisticParameters)})}};c([p({type:Number,json:{write:!0}})],Ga.prototype,"maxPointCount",void 0),c([p({type:Number,json:{write:!0}})],Ga.prototype,"maxRecordCount",void 0),c([p({type:Number,json:{write:!0}})],Ga.prototype,"maxVertexCount",void 0),c([p({type:String,json:{write:!0}})],Ga.prototype,"onStatisticField",void 0),c([p({type:String,json:{write:!0}})],Ga.prototype,"outStatisticFieldName",void 0),c([p({type:String,json:{read:{source:"statisticType",reader:z7.read},write:{target:"statisticType",writer:z7.write}}})],Ga.prototype,"statisticType",void 0),c([p({type:Object})],Ga.prototype,"statisticParameters",void 0),c([Se("statisticParameters")],Ga.prototype,"writeStatisticParameters",null),Ga=IO=c([N("esri.rest.support.StatisticDefinition")],Ga);const RY=Ga;var v0;const T1e=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),$1e=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let ct=v0=class extends me{constructor(e){super(e),this.aggregateIds=null,this.cacheHint=void 0,this.datumTransformation=null,this.distance=void 0,this.dynamicDataSource=void 0,this.formatOf3DObjects=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=void 0,this.groupByFieldsForStatistics=null,this.having=null,this.historicMoment=null,this.maxAllowableOffset=void 0,this.maxRecordCountFactor=1,this.multipatchOption=null,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.outStatistics=null,this.parameterValues=null,this.pixelSize=null,this.quantizationParameters=null,this.rangeValues=null,this.relationParameter=null,this.resultType=null,this.returnCentroid=!1,this.returnDistinctValues=!1,this.returnExceededLimitFeatures=!0,this.returnGeometry=!1,this.returnQueryGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.sourceSpatialReference=null,this.spatialRelationship="intersects",this.start=void 0,this.sqlFormat=null,this.text=null,this.timeExtent=null,this.timeReferenceUnknownClient=!1,this.units=null,this.where=null}static from(e){return ua(v0,e)}castDatumTransformation(e){return typeof e=="number"||typeof e=="object"?e:null}writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeParameterValues(e,t){if(e){const r={};for(const i in e){const n=e[i];Array.isArray(n)?r[i]=n.map(s=>s instanceof Date?s.getTime():s):n instanceof Date?r[i]=n.getTime():r[i]=n}t.parameterValues=r}}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,t.where="1=1"}writeWhere(e,t){t.where=e||"1=1"}clone(){return new v0(ie({aggregateIds:this.aggregateIds,cacheHint:this.cacheHint,datumTransformation:this.datumTransformation,distance:this.distance,gdbVersion:this.gdbVersion,geometry:this.geometry,geometryPrecision:this.geometryPrecision,groupByFieldsForStatistics:this.groupByFieldsForStatistics,having:this.having,historicMoment:U(this.historicMoment)?new Date(this.historicMoment.getTime()):null,maxAllowableOffset:this.maxAllowableOffset,maxRecordCountFactor:this.maxRecordCountFactor,multipatchOption:this.multipatchOption,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,outStatistics:this.outStatistics,parameterValues:this.parameterValues,pixelSize:this.pixelSize,quantizationParameters:this.quantizationParameters,rangeValues:this.rangeValues,relationParameter:this.relationParameter,resultType:this.resultType,returnDistinctValues:this.returnDistinctValues,returnGeometry:this.returnGeometry,returnCentroid:this.returnCentroid,returnExceededLimitFeatures:this.returnExceededLimitFeatures,returnQueryGeometry:this.returnQueryGeometry,returnM:this.returnM,returnZ:this.returnZ,dynamicDataSource:this.dynamicDataSource,sourceSpatialReference:this.sourceSpatialReference,spatialRelationship:this.spatialRelationship,start:this.start,sqlFormat:this.sqlFormat,text:this.text,timeExtent:this.timeExtent,timeReferenceUnknownClient:this.timeReferenceUnknownClient,units:this.units,where:this.where}))}};ct.MAX_MAX_RECORD_COUNT_FACTOR=5,c([p({json:{write:!0}})],ct.prototype,"aggregateIds",void 0),c([p({type:Boolean,json:{write:!0}})],ct.prototype,"cacheHint",void 0),c([p({json:{write:!0}})],ct.prototype,"datumTransformation",void 0),c([Ct("datumTransformation")],ct.prototype,"castDatumTransformation",null),c([p({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],ct.prototype,"distance",void 0),c([p({type:ss,json:{write:!0}})],ct.prototype,"dynamicDataSource",void 0),c([p({type:String,json:{write:!0}})],ct.prototype,"formatOf3DObjects",void 0),c([p({type:String,json:{write:!0}})],ct.prototype,"gdbVersion",void 0),c([p({types:xh,json:{read:Sr,write:!0}})],ct.prototype,"geometry",void 0),c([p({type:Number,json:{write:!0}})],ct.prototype,"geometryPrecision",void 0),c([p({type:[String],json:{write:!0}})],ct.prototype,"groupByFieldsForStatistics",void 0),c([p({type:String,json:{write:!0}})],ct.prototype,"having",void 0),c([p({type:Date})],ct.prototype,"historicMoment",void 0),c([Se("historicMoment")],ct.prototype,"writeHistoricMoment",null),c([p({type:Number,json:{write:!0}})],ct.prototype,"maxAllowableOffset",void 0),c([p({type:Number,cast:e=>e<1?1:e>v0.MAX_MAX_RECORD_COUNT_FACTOR?v0.MAX_MAX_RECORD_COUNT_FACTOR:e,json:{write:{overridePolicy:e=>({enabled:e>1})}}})],ct.prototype,"maxRecordCountFactor",void 0),c([p({type:["xyFootprint"],json:{write:!0}})],ct.prototype,"multipatchOption",void 0),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],ct.prototype,"num",void 0),c([p({json:{write:!0}})],ct.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],ct.prototype,"orderByFields",void 0),c([p({type:[String],json:{write:!0}})],ct.prototype,"outFields",void 0),c([p({type:Fe,json:{name:"outSR",write:!0}})],ct.prototype,"outSpatialReference",void 0),c([p({type:[RY],json:{write:{enabled:!0,overridePolicy(){return{enabled:U(this.outStatistics)&&this.outStatistics.length>0}}}}})],ct.prototype,"outStatistics",void 0),c([p({json:{write:!0}})],ct.prototype,"parameterValues",void 0),c([Se("parameterValues")],ct.prototype,"writeParameterValues",null),c([p({type:Ke,json:{write:!0}})],ct.prototype,"pixelSize",void 0),c([p({type:PY,json:{write:!0}})],ct.prototype,"quantizationParameters",void 0),c([p({type:[Object],json:{write:!0}})],ct.prototype,"rangeValues",void 0),c([p({type:String,json:{read:{source:"relationParam"},write:{target:"relationParam",overridePolicy(){return{enabled:this.spatialRelationship==="relation"}}}}})],ct.prototype,"relationParameter",void 0),c([p({type:String,json:{write:!0}})],ct.prototype,"resultType",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],ct.prototype,"returnCentroid",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],ct.prototype,"returnDistinctValues",void 0),c([p({type:Boolean,json:{default:!0,write:!0}})],ct.prototype,"returnExceededLimitFeatures",void 0),c([p({type:Boolean,json:{write:!0}})],ct.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],ct.prototype,"returnQueryGeometry",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],ct.prototype,"returnM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],ct.prototype,"returnZ",void 0),c([p({type:Fe,json:{write:!0}})],ct.prototype,"sourceSpatialReference",void 0),c([tt(T1e,{ignoreUnknown:!1,name:"spatialRel"})],ct.prototype,"spatialRelationship",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],ct.prototype,"start",void 0),c([Se("start"),Se("num")],ct.prototype,"writeStart",null),c([p({type:String,json:{write:!0}})],ct.prototype,"sqlFormat",void 0),c([p({type:String,json:{write:!0}})],ct.prototype,"text",void 0),c([p({type:bs,json:{write:!0}})],ct.prototype,"timeExtent",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],ct.prototype,"timeReferenceUnknownClient",void 0),c([tt($1e,{ignoreUnknown:!1}),p({json:{write:{overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],ct.prototype,"units",void 0),c([p({type:String,json:{write:{overridePolicy(e){return{enabled:e!=null||this.start>0}}}}})],ct.prototype,"where",void 0),c([Se("where")],ct.prototype,"writeWhere",null),ct=v0=c([N("esri.rest.support.Query")],ct);const ni=ct;var TO;const L4=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),N4=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let lu=TO=class extends me{constructor(e){super(e),this.where=null,this.geometry=null,this.spatialRelationship="intersects",this.distance=void 0,this.objectIds=null,this.units=null,this.timeExtent=null}createQuery(e={}){const{where:t,geometry:r,spatialRelationship:i,timeExtent:n,objectIds:s,units:o,distance:a}=this;return new ni({geometry:ie(r),objectIds:ie(s),spatialRelationship:i,timeExtent:ie(n),where:t,units:o,distance:a,...e})}clone(){const{where:e,geometry:t,spatialRelationship:r,timeExtent:i,objectIds:n,units:s,distance:o}=this;return new TO({geometry:ie(t),objectIds:ie(n),spatialRelationship:r,timeExtent:ie(i),where:e,units:s,distance:o})}};c([p({type:String,json:{write:!0}})],lu.prototype,"where",void 0),c([p({types:xh,json:{write:!0}})],lu.prototype,"geometry",void 0),c([p({type:L4.apiValues,json:{name:"spatialRel",read:{reader:L4.read},write:{allowNull:!1,writer:L4.write,overridePolicy(){return{enabled:U(this.geometry)}}}}})],lu.prototype,"spatialRelationship",void 0),c([p({type:Number,json:{write:{overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],lu.prototype,"distance",void 0),c([p({type:[Number],json:{write:!0}})],lu.prototype,"objectIds",void 0),c([p({type:N4.apiValues,json:{read:N4.read,write:{writer:N4.write,overridePolicy(e){return{enabled:e!=null&&this.geometry!=null}}}}})],lu.prototype,"units",void 0),c([p({type:bs,json:{write:!0}})],lu.prototype,"timeExtent",void 0),lu=TO=c([N("esri.layers.support.FeatureFilter")],lu);const LY=lu;var $O;let bf=$O=class extends me{constructor(e){super(e),this.filter=null,this.includedEffect=null,this.excludedEffect=null,this.excludedLabelsVisible=!1}write(e,t){const r=super.write(e,t);if(t!=null&&t.origin){if(r.filter){const s=Object.keys(r.filter);var i;if(s.length>1||s[0]!=="where")return(i=t.messages)==null||i.push(new Z("web-document-write:unsupported-feature-effect","Invalid feature effect 'filter'. A filter can only contain a 'where' property",{layer:t.layer,effect:this})),null}var n;if("showExcludedLabels"in r)return(n=t.messages)==null||n.push(new Z("web-document-write:unsupported-feature-effect","Invalid value for property 'excludedLabelsVisible' which should always be 'true'",{layer:t.layer,effect:this})),null}return r}clone(){return new $O({filter:U(this.filter)&&this.filter.clone(),includedEffect:this.includedEffect,excludedEffect:this.excludedEffect,excludedLabelsVisible:this.excludedLabelsVisible})}};c([p({type:LY,json:{write:{allowNull:!0,writer(e,t,r,i){const n=e?.write({},i);n&&Object.keys(n).length!==0?Ro(r,n,t):Ro(r,null,t)}}}})],bf.prototype,"filter",void 0),c([p({json:{write:!0,origins:{"web-map":{read:{reader:mO},write:{writer:yO,overridePolicy(){return{allowNull:this.excludedEffect!=null,isRequired:this.excludedEffect==null}}}}}}})],bf.prototype,"includedEffect",void 0),c([p({json:{write:!0,origins:{"web-map":{read:{reader:mO},write:{writer:yO,overridePolicy(){return{allowNull:this.includedEffect!=null,isRequired:this.includedEffect==null}}}}}}})],bf.prototype,"excludedEffect",void 0),c([p({type:Boolean,json:{write:!0,name:"showExcludedLabels",origins:{"web-map":{name:"showExcludedLabels",default:!0}}}})],bf.prototype,"excludedLabelsVisible",void 0),bf=$O=c([N("esri.layers.support.FeatureEffect")],bf);const E1e=bf,A1e=e=>{let t=class extends e{constructor(){super(...arguments),this.featureEffect=null}};return c([p({type:E1e,json:{origins:{"web-map":{write:{allowNull:!0}}}}})],t.prototype,"featureEffect",void 0),t=c([N("esri.layers.mixins.FeatureEffectLayer")],t),t},C1e={"web-scene/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISMapServiceLayer:!0,ArcGISSceneServiceLayer:!0,ArcGISTiledElevationServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BuildingSceneLayer:!0,GroupLayer:!0,IntegratedMeshLayer:!0,OGCFeatureLayer:!0,PointCloudLayer:!0,WebTiledLayer:!0,CSV:!0,GeoJSON:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,KML:!0,RasterDataLayer:!0,Voxel:!1},"web-scene/basemap":{ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,WebTiledLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,ArcGISImageServiceLayer:!0,WMS:!0,ArcGISMapServiceLayer:!0},"web-scene/ground":{ArcGISTiledElevationServiceLayer:!0,RasterDataElevationLayer:!0},"web-map/operational-layers":{ArcGISFeatureLayer:!0,ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISStreamLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,BingMapsAerial:!0,BingMapsHybrid:!0,BingMapsRoad:!0,CSV:!0,GeoRSS:!0,GeoJSON:!0,GroupLayer:!0,KML:!0,OGCFeatureLayer:!0,SubtypeGroupLayer:!0,VectorTileLayer:!0,WFS:!0,WMS:!0,WebTiledLayer:!0},"web-map/basemap":{ArcGISImageServiceLayer:!0,ArcGISImageServiceVectorLayer:!0,ArcGISMapServiceLayer:!0,ArcGISTiledImageServiceLayer:!0,ArcGISTiledMapServiceLayer:!0,OpenStreetMap:!0,VectorTileLayer:!0,WMS:!0,WebTiledLayer:!0,BingMapsAerial:!0,BingMapsRoad:!0,BingMapsHybrid:!0},"web-map/tables":{ArcGISFeatureLayer:!0},"portal-item/operational-layers":{ArcGISSceneServiceLayer:!0,PointCloudLayer:!0,BuildingSceneLayer:!0,IntegratedMeshLayer:!0}};function k1e(e){if(!e)return e;const{start:t,end:r}=e;return new bs({start:U(t)?wm(t,-t.getTimezoneOffset(),"minutes"):t,end:U(r)?wm(r,-r.getTimezoneOffset(),"minutes"):r})}function O1e(e){if(!e)return e;const{start:t,end:r}=e;return new bs({start:U(t)?wm(t,t.getTimezoneOffset(),"minutes"):t,end:U(r)?wm(r,r.getTimezoneOffset(),"minutes"):r})}var EO;let Lb=EO=class extends me{async collectRequiredFields(e,t){return No(e,t,this.expression)}clone(){return new EO({expression:this.expression,title:this.title})}};c([p({type:String,json:{write:!0}})],Lb.prototype,"expression",void 0),c([p({type:String,json:{write:!0}})],Lb.prototype,"title",void 0),Lb=EO=c([N("esri.layers.support.FeatureExpressionInfo")],Lb);const B7=Lb;function P1e(){const e=Object.keys(FZ);return e.sort(),e}const R1e=P1e();var AO;const Px=li()({onTheGround:"on-the-ground",relativeToGround:"relative-to-ground",relativeToScene:"relative-to-scene",absoluteHeight:"absolute-height"}),G7=new lt({foot:"feet",kilometer:"kilometers",meter:"meters",mile:"miles","us-foot":"us-feet",yard:"yards"});let Sc=AO=class extends me{constructor(){super(...arguments),this.offset=null}readFeatureExpressionInfo(e,t){return e??(t.featureExpression&&t.featureExpression.value===0?{expression:"0"}:void 0)}writeFeatureExpressionInfo(e,t,r,i){t[r]=e.write({},i),e.expression==="0"&&(t.featureExpression={value:0})}get mode(){const{offset:e,featureExpressionInfo:t}=this;return this._isOverridden("mode")?this._get("mode"):U(e)||t?"relative-to-ground":"on-the-ground"}set mode(e){this._override("mode",e)}set unit(e){this._set("unit",e)}write(e,t){return this.offset||this.mode||this.featureExpressionInfo||this.unit?super.write(e,t):null}clone(){return new AO({mode:this.mode,offset:this.offset,featureExpressionInfo:this.featureExpressionInfo?this.featureExpressionInfo.clone():void 0,unit:this.unit})}};c([p({type:B7,json:{write:!0}})],Sc.prototype,"featureExpressionInfo",void 0),c([ye("featureExpressionInfo",["featureExpressionInfo","featureExpression"])],Sc.prototype,"readFeatureExpressionInfo",null),c([Se("featureExpressionInfo",{featureExpressionInfo:{type:B7},"featureExpression.value":{type:[0]}})],Sc.prototype,"writeFeatureExpressionInfo",null),c([p({type:Px.apiValues,nonNullable:!0,json:{type:Px.jsonValues,read:Px.read,write:{writer:Px.write,isRequired:!0}}})],Sc.prototype,"mode",null),c([p({type:Number,json:{write:!0}})],Sc.prototype,"offset",void 0),c([p({type:R1e,json:{type:String,read:G7.read,write:G7.write}})],Sc.prototype,"unit",null),Sc=AO=c([N("esri.layers.support.ElevationInfo")],Sc);const NY=Sc,L1e={type:Boolean,value:!0,json:{origins:{service:{read:!1,write:!1},"web-map":{read:!1,write:!1}},name:"screenSizePerspective",write:!0}},_$={type:Boolean,value:!0,json:{name:"disablePopup",read:{reader:(e,t)=>!t.disablePopup},write:{enabled:!0,writer(e,t,r){t[r]=!e}}}},DY={type:Boolean,value:!0,json:{name:"showLabels",write:!0}},_2={type:String,json:{origins:{"portal-item":{write:!1}},write:{isRequired:!0,ignoreOrigin:!0,writer:zm}}},HN={type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},name:"showLegend",write:!0}},N1e={value:null,type:NY,json:{origins:{service:{name:"elevationInfo",write:!0}},name:"layerDefinition.elevationInfo",write:!0}};function grt(e){return{type:e,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}}const ww={type:Number,json:{origins:{"web-document":{write:!0,read:!0},"portal-item":{write:!0}}}},D1e={...ww,json:{...ww.json,origins:{"web-document":{...ww.json.origins["web-document"],write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}}}},read:{source:["layerDefinition.drawingInfo.transparency","drawingInfo.transparency"],reader:(e,t,r)=>r&&r.origin!=="service"||!t.drawingInfo||t.drawingInfo.transparency===void 0?t.layerDefinition&&t.layerDefinition.drawingInfo&&t.layerDefinition.drawingInfo.transparency!==void 0?u_(t.layerDefinition.drawingInfo.transparency):void 0:u_(t.drawingInfo.transparency)}}},F1e={type:bs,readOnly:!0,get(){var e,t;if((e=this.layer)==null||!e.timeInfo)return null;const{datesInUnknownTimezone:r,timeOffset:i,useViewTime:n}=this.layer,s=(t=this.view)==null?void 0:t.timeExtent;let o=this.layer.timeExtent;r&&(o=O1e(o));let a=n?s&&o?s.intersection(o):s||o:o;if(!a||a.isEmpty||a.isAllTime)return a;i&&(a=a.offset(-i.value,i.unit)),r&&(a=k1e(a));const l=this._get("timeExtent");return a.equals(l)?l:a}},vrt={type:nt,readOnly:!0,json:{origins:{service:{read:{source:["fullExtent","spatialReference"],reader:(e,t)=>{const r=nt.fromJSON(e);return t.spatialReference!=null&&typeof t.spatialReference=="object"&&(r.spatialReference=Fe.fromJSON(t.spatialReference)),r}}}},read:!1}},FY={type:String,json:{origins:{service:{read:!1},"portal-item":{read:!1}}}},j1e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.minScale"},write:{target:"layerDefinition.minScale"}}},V1e={type:Number,json:{origins:{service:{write:{enabled:!1}}},read:{source:"layerDefinition.maxScale"},write:{target:"layerDefinition.maxScale"}}},Zv=e=>{let t=class extends e{constructor(){super(...arguments),this.title=null}writeListMode(r,i,n,s){(s&&s.layerContainerType==="ground"||r&&dW(this,n,{},s))&&(i[n]=r)}writeOperationalLayerType(r,i,n,s){!r||s&&s.layerContainerType==="tables"||(i.layerType=r)}writeTitle(r,i){i.title=r||"Layer"}read(r,i){i&&(i.layer=this),Zce(this,r,n=>super.read(r,n),i)}write(r,i){if(i!=null&&i.origin){const l=`${i.origin}/${i.layerContainerType||"operational-layers"}`,u=C1e[l];let h=u&&u[this.operationalLayerType];var n;if(this.operationalLayerType==="ArcGISTiledElevationServiceLayer"&&l==="web-scene/operational-layers"&&(h=!1),!h)return(n=i.messages)==null||n.push(new Z("layer:unsupported",`Layers (${this.title}, ${this.id}) of type '${this.declaredClass}' are not supported in the context of '${l}'`,{layer:this})),null}const s=super.write(r,{...i,layer:this}),o=!!i&&!!i.messages&&!!i.messages.filter(l=>l instanceof Z&&l.name==="web-document-write:property-required").length;var a;return JT(s?.url)?(i==null||(a=i.messages)==null||a.push(new Z("layer:invalid-url",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Blob URL cannot be written to web scenes and web maps`,{layer:this})),null):!this.url&&o?null:s}beforeSave(){}};return c([p({type:String,json:{write:{ignoreOrigin:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0}},"portal-item":{write:!1}}}})],t.prototype,"id",void 0),c([p({json:{write:{ignoreOrigin:!0},origins:{"web-map":{read:!1,write:!1}}}})],t.prototype,"listMode",void 0),c([Se("listMode")],t.prototype,"writeListMode",null),c([p({type:String,readOnly:!0,json:{read:!1,write:{target:"layerType",ignoreOrigin:!0},origins:{"portal-item":{write:!1}}}})],t.prototype,"operationalLayerType",void 0),c([Se("operationalLayerType")],t.prototype,"writeOperationalLayerType",null),c([p(ww)],t.prototype,"opacity",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0},origins:{"web-scene":{write:{isRequired:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}},"portal-item":{write:!1}}},value:"Layer"})],t.prototype,"title",void 0),c([Se("title")],t.prototype,"writeTitle",null),c([p({type:Boolean,json:{name:"visibility",origins:{"web-document":{name:"visibility",default:!0},"portal-item":{name:"visibility",read:{source:["visible","visibility"]}}}}})],t.prototype,"visible",void 0),t=c([N("esri.layers.mixins.OperationalLayer")],t),t};var CO;const D4=new lt({asc:"ascending",desc:"descending"});let yg=CO=class extends me{constructor(e){super(e),this.field=null,this.valueExpression=null,this.order="ascending"}clone(){return new CO({field:this.field,valueExpression:this.valueExpression,order:this.order})}};c([p({type:String,json:{write:!0}})],yg.prototype,"field",void 0),c([p({type:String,json:{write:!0}})],yg.prototype,"valueExpression",void 0),c([p({type:D4.apiValues,json:{read:D4.read,write:D4.write}})],yg.prototype,"order",void 0),yg=CO=c([N("esri.layers.support.OrderByInfo")],yg);const jY=yg;function U1e(e,t,r){if(!e)return null;const i=e.find(s=>!!s.field);if(!i)return null;const n=new jY;return n.read(i,r),[n]}function z1e(e,t,r,i){const n=e.find(s=>!!s.field);n&&Ro(r,[n.toJSON()],t)}const B1e=e=>{let t=class extends e{constructor(){super(...arguments),this.orderBy=null}};return c([p({type:[jY],json:{origins:{"web-scene":{write:!1,read:!1}},read:{source:"layerDefinition.orderBy",reader:U1e},write:{target:"layerDefinition.orderBy",writer:z1e}}})],t.prototype,"orderBy",void 0),t=c([N("esri.layers.mixins.OrderedLayer")],t),t},G1e=Te.getLogger("esri.layers.mixins.PortalLayer"),Yv=e=>{let t=class extends e{constructor(){super(...arguments),this.resourceReferences={portalItem:null,paths:[]},this.userHasEditingPrivileges=!0}destroy(){var r;(r=this.portalItem)==null||r.destroy(),this.portalItem=null}set portalItem(r){r!==this._get("portalItem")&&(this.removeOrigin("portal-item"),this._set("portalItem",r))}readPortalItem(r,i,n){if(i.itemId)return new r_({id:i.itemId,portal:n&&n.portal})}writePortalItem(r,i){r&&r.id&&(i.itemId=r.id)}async loadFromPortal(r,i){if(this.portalItem&&this.portalItem.id)try{const n=await ae(()=>import("./layersLoader.0d4ab3a2.js").then(function(s){return s.l}),["assets/layersLoader.0d4ab3a2.js","assets/lazyLayerLoader.b01d3002.js","assets/jsonContext.c19e06f9.js"]);return $r(i),await n.load({instance:this,supportedTypes:r.supportedTypes,validateItem:r.validateItem,supportsData:r.supportsData},i)}catch(n){throw sn(n)||G1e.warn(`Failed to load layer (${this.title}, ${this.id}) portal item (${this.portalItem.id})
  ${n}`),n}}async finishLoadEditablePortalLayer(r){this._set("userHasEditingPrivileges",await this.fetchUserHasEditingPrivileges(r).catch(i=>(wh(i),!0)))}async fetchUserHasEditingPrivileges(r){const i=this.url?si?.findCredential(this.url):null;if(!i)return!0;const n=Rx.credential===i?Rx.user:await this.fetchEditingUser(r);return Rx.credential=i,Rx.user=n,ce(n)||n.privileges==null||n.privileges.includes("features:user:edit")}async fetchEditingUser(r){var i,n;const s=(i=this.portalItem)==null||(n=i.portal)==null?void 0:n.user;if(s)return s;const o=si.findServerInfo(this.url);if(o==null||!o.owningSystemUrl)return null;const a=`${o.owningSystemUrl}/sharing/rest`,l=ms.getDefault();if(l&&l.loaded&&$o(l.restUrl)===$o(a))return l.user;const u=`${a}/community/self`,h=U(r)?r.signal:null,d=await HT(Ee(u,{authMode:"no-prompt",query:{f:"json"},signal:h}));return d.ok?YL.fromJSON(d.value.data):null}read(r,i){i&&(i.layer=this),super.read(r,i)}write(r,i){const n=i&&i.portal,s=this.portalItem&&this.portalItem.id&&(this.portalItem.portal||ms.getDefault());return n&&s&&!wW(s.restUrl,n.restUrl)?(i.messages&&i.messages.push(new Z("layer:cross-portal",`The layer '${this.title} (${this.id})' cannot be persisted because it refers to an item on a different portal than the one being saved to. To save the scene, set the layer.portalItem to null or save the scene to the same portal as the item associated with the layer`,{layer:this})),null):super.write(r,{...i,layer:this})}};return c([p({type:r_})],t.prototype,"portalItem",null),c([ye("web-document","portalItem",["itemId"])],t.prototype,"readPortalItem",null),c([Se("web-document","portalItem",{itemId:{type:String}})],t.prototype,"writePortalItem",null),c([p()],t.prototype,"resourceReferences",void 0),c([p({readOnly:!0})],t.prototype,"userHasEditingPrivileges",void 0),t=c([N("esri.layers.mixins.PortalLayer")],t),t},Rx={credential:null,user:null},y_=new Je,_w=new WeakMap;function q1e(e){VY(e)&&y_.push(e)}function H1e(e){VY(e)&&y_.includes(e)&&y_.remove(e)}function VY(e){return e&&typeof e=="object"&&"refreshInterval"in e&&"refresh"in e}function UY(e,t){return Number.isFinite(e)&&Number.isFinite(t)?t<=0?e:UY(t,e%t):0}let F4=0,Lx=0;function W1e(){const e=Date.now();for(const r of y_)if(r.refreshInterval){var t;e-((t=_w.get(r))!=null?t:0)+5>=6e4*r.refreshInterval&&(_w.set(r,e),r.refresh(e))}}BH(()=>{const e=Date.now();let t=0;for(const r of y_)t=UY(Math.round(6e4*r.refreshInterval),t),r.refreshInterval?_w.get(r)||_w.set(r,e):_w.delete(r);if(t!==Lx){if(Lx=t,clearInterval(F4),Lx===0)return void(F4=0);F4=setInterval(W1e,Lx)}});const Kv=e=>{let t=class extends e{constructor(...r){super(...r),this.refreshInterval=0,this.refreshTimestamp=0,this._debounceHasDataChanged=LH(()=>this.hasDataChanged()),this.when().then(()=>{q1e(this)},()=>{})}destroy(){H1e(this)}get refreshParameters(){return{_ts:this.refreshTimestamp||null}}refresh(r=Date.now()){PA(this._debounceHasDataChanged()).then(i=>{i&&this._set("refreshTimestamp",r),this.emit("refresh",{dataChanged:i})},i=>{Te.getLogger(this.declaredClass).error(i),this.emit("refresh",{dataChanged:!1,error:i})})}async hasDataChanged(){return!0}};return c([p({type:Number,cast:r=>r>=.1?r:r<=0?0:.1,json:{write:!0}})],t.prototype,"refreshInterval",void 0),c([p({readOnly:!0})],t.prototype,"refreshTimestamp",void 0),c([p()],t.prototype,"refreshParameters",null),t=c([N("esri.layers.mixins.RefreshableLayer")],t),t},wy=e=>{let t=class extends e{constructor(){super(...arguments),this.minScale=0,this.maxScale=0}get scaleRangeId(){return`${this.minScale},${this.maxScale}`}};return c([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"minScale",void 0),c([p({type:Number,nonNullable:!0,json:{write:!0}})],t.prototype,"maxScale",void 0),c([p({readOnly:!0})],t.prototype,"scaleRangeId",null),t=c([N("esri.layers.mixins.ScaleRangeLayer")],t),t},Qf=li()({esriTimeUnitsMilliseconds:"milliseconds",esriTimeUnitsSeconds:"seconds",esriTimeUnitsMinutes:"minutes",esriTimeUnitsHours:"hours",esriTimeUnitsDays:"days",esriTimeUnitsWeeks:"weeks",esriTimeUnitsMonths:"months",esriTimeUnitsYears:"years",esriTimeUnitsDecades:"decades",esriTimeUnitsCenturies:"centuries",esriTimeUnitsUnknown:void 0});var kO;let Nb=kO=class extends me{constructor(e){super(e),this.value=0,this.unit="milliseconds"}toMilliseconds(){return x1e(this.value,this.unit,"milliseconds")}clone(){return new kO({value:this.value,unit:this.unit})}};c([p({type:Number,json:{write:!0},nonNullable:!0})],Nb.prototype,"value",void 0),c([p({type:Qf.apiValues,json:{type:Qf.jsonValues,read:Qf.read,write:Qf.write},nonNullable:!0})],Nb.prototype,"unit",void 0),Nb=kO=c([N("esri.TimeInterval")],Nb);const g_=Nb;var OO;let gg=OO=class extends me{constructor(e){super(e),this.respectsDaylightSaving=!1,this.timezone=null}readRespectsDaylightSaving(e,t){return t.respectsDaylightSaving!==void 0?t.respectsDaylightSaving:t.respectDaylightSaving!==void 0&&t.respectDaylightSaving}clone(){const{respectsDaylightSaving:e,timezone:t}=this;return new OO({respectsDaylightSaving:e,timezone:t})}};c([p({type:Boolean,json:{write:!0}})],gg.prototype,"respectsDaylightSaving",void 0),c([ye("respectsDaylightSaving",["respectsDaylightSaving","respectDaylightSaving"])],gg.prototype,"readRespectsDaylightSaving",null),c([p({type:String,json:{read:{source:"timeZone"},write:{target:"timeZone"}}})],gg.prototype,"timezone",void 0),gg=OO=c([N("esri.layers.support.TimeReference")],gg);const J1e=gg;var PO;let Cn=PO=class extends me{constructor(e){super(e),this.cumulative=!1,this.endField=null,this.fullTimeExtent=null,this.hasLiveData=!1,this.interval=null,this.startField=null,this.timeReference=null,this.trackIdField=null,this.useTime=!0}readFullTimeExtent(e,t){if(!t.timeExtent||!Array.isArray(t.timeExtent)||t.timeExtent.length!==2)return null;const r=new Date(t.timeExtent[0]),i=new Date(t.timeExtent[1]);return new bs({start:r,end:i})}writeFullTimeExtent(e,t){e&&U(e.start)&&U(e.end)?t.timeExtent=[e.start.getTime(),e.end.getTime()]:t.timeExtent=null}readInterval(e,t){return t.timeInterval&&t.timeIntervalUnits?new g_({value:t.timeInterval,unit:Qf.fromJSON(t.timeIntervalUnits)}):t.defaultTimeInterval&&t.defaultTimeIntervalUnits?new g_({value:t.defaultTimeInterval,unit:Qf.fromJSON(t.defaultTimeIntervalUnits)}):null}writeInterval(e,t){if(e){const r=e.toJSON();t.timeInterval=r.value,t.timeIntervalUnits=r.unit}else t.timeInterval=null,t.timeIntervalUnits=null}clone(){const{cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:s,fullTimeExtent:o,trackIdField:a,useTime:l}=this;return new PO({cumulative:e,endField:t,hasLiveData:r,interval:i,startField:n,timeReference:ie(s),fullTimeExtent:ie(o),trackIdField:a,useTime:l})}};c([p({type:Boolean,json:{read:{source:"exportOptions.timeDataCumulative"},write:{target:"exportOptions.timeDataCumulative"}}})],Cn.prototype,"cumulative",void 0),c([p({type:String,json:{read:{source:"endTimeField"},write:{target:"endTimeField",allowNull:!0}}})],Cn.prototype,"endField",void 0),c([p({type:bs,json:{write:{enabled:!0,allowNull:!0}}})],Cn.prototype,"fullTimeExtent",void 0),c([ye("fullTimeExtent",["timeExtent"])],Cn.prototype,"readFullTimeExtent",null),c([Se("fullTimeExtent")],Cn.prototype,"writeFullTimeExtent",null),c([p({type:Boolean,json:{write:!0}})],Cn.prototype,"hasLiveData",void 0),c([p({type:g_,json:{write:{enabled:!0,allowNull:!0}}})],Cn.prototype,"interval",void 0),c([ye("interval",["timeInterval","timeIntervalUnits","defaultTimeInterval","defaultTimeIntervalUnits"])],Cn.prototype,"readInterval",null),c([Se("interval")],Cn.prototype,"writeInterval",null),c([p({type:String,json:{read:{source:"startTimeField"},write:{target:"startTimeField",allowNull:!0}}})],Cn.prototype,"startField",void 0),c([p({type:J1e,json:{write:{enabled:!0,allowNull:!0}}})],Cn.prototype,"timeReference",void 0),c([p({type:String,json:{write:{enabled:!0,allowNull:!0}}})],Cn.prototype,"trackIdField",void 0),c([p({type:Boolean,json:{read:{source:"exportOptions.useTime"},write:{target:"exportOptions.useTime"}}})],Cn.prototype,"useTime",void 0),Cn=PO=c([N("esri.layers.support.TimeInfo")],Cn);const zY=Cn,x$=e=>{let t=class extends e{constructor(){super(...arguments),this.timeExtent=null,this.timeOffset=null,this.useViewTime=!0}readOffset(r,i){const n=i.timeInfo.exportOptions;if(!n)return null;const s=n.timeOffset,o=Qf.fromJSON(n.timeOffsetUnits);return s&&o?new g_({value:s,unit:o}):null}set timeInfo(r){AJ(r,this.fieldsIndex),this._set("timeInfo",r)}};return c([p({type:bs,json:{write:!1}})],t.prototype,"timeExtent",void 0),c([p({type:g_})],t.prototype,"timeOffset",void 0),c([ye("service","timeOffset",["timeInfo.exportOptions"])],t.prototype,"readOffset",null),c([p({value:null,type:zY,json:{write:!0,origins:{"web-document":{read:!1,write:!1}}}})],t.prototype,"timeInfo",null),c([p({type:Boolean,json:{read:{source:"timeAnimation"},write:{target:"timeAnimation"},origins:{"web-scene":{read:!1,write:!1}}}})],t.prototype,"useViewTime",void 0),t=c([N("esri.layers.mixins.TemporalLayer")],t),t};var RO;let Gc=RO=class extends me{constructor(e){super(e)}clone(){const{name:e,fields:t,isAscending:r,isUnique:i,description:n}=this;return new RO({name:e,fields:t,isAscending:r,isUnique:i,description:n})}};c([p({constructOnly:!0})],Gc.prototype,"name",void 0),c([p({constructOnly:!0})],Gc.prototype,"fields",void 0),c([p({constructOnly:!0})],Gc.prototype,"isAscending",void 0),c([p({constructOnly:!0})],Gc.prototype,"isUnique",void 0),c([p({constructOnly:!0})],Gc.prototype,"description",void 0),Gc=RO=c([N("esri.layers.support.FeatureIndex")],Gc);let FM=class extends me{constructor(){super(...arguments),this.type=null}};c([p({type:["selection","cluster"],readOnly:!0,json:{read:!1,write:!0}})],FM.prototype,"type",void 0),FM=c([N("esri.layers.support.FeatureReduction")],FM);const jM=FM;var LO;let vg=LO=class extends me{constructor(){super(...arguments),this.statisticType=null,this.onStatisticField=null,this.onStatisticValueExpression=null}clone(){return new LO({statisticType:this.statisticType,onStatisticField:this.onStatisticField,onStatisticValueExpression:this.onStatisticValueExpression})}};c([p({type:String,json:{write:!0}})],vg.prototype,"statisticType",void 0),c([p({type:String,json:{write:!0}})],vg.prototype,"onStatisticField",void 0),c([p({type:String,json:{write:!0}})],vg.prototype,"onStatisticValueExpression",void 0),vg=LO=c([N("esri.layers.support.OutStatistic")],vg);const Z1e=vg;var NO;let Db=NO=class extends me{constructor(){super(...arguments),this.name=null}clone(){return new NO({name:this.name,outStatistic:this.outStatistic.clone()})}};c([p({type:String,json:{write:!0}})],Db.prototype,"name",void 0),c([p({type:Z1e,json:{write:!0}})],Db.prototype,"outStatistic",void 0),Db=NO=c([N("esri.layers.support.AggregateField")],Db);const Y1e=Db,WN="__begin__",JN="__end__",K1e=new RegExp(WN,"ig"),X1e=new RegExp(JN,"ig"),q7=new RegExp("^"+WN,"i"),H7=new RegExp(JN+"$","i"),uI='"',Q1e=uI+" + ",ebe=" + "+uI;function tbe(e){return e.replace(new RegExp("\\[","g"),"{").replace(new RegExp("\\]","g"),"}")}function rbe(e){return e.replace(new RegExp("\\{","g"),"[").replace(new RegExp("\\}","g"),"]")}function ZN(e){const t={expression:"",type:"none"};return e.labelExpressionInfo?e.labelExpressionInfo.value?(t.expression=e.labelExpressionInfo.value,t.type="conventional"):e.labelExpressionInfo.expression&&(t.expression=e.labelExpressionInfo.expression,t.type="arcade"):e.labelExpression!=null&&(t.expression=tbe(e.labelExpression),t.type="conventional"),t}function ibe(e){const t=ZN(e);if(!t)return null;switch(t.type){case"conventional":return DO(t.expression);case"arcade":return t.expression}return null}function nbe(e){const t=ZN(e);if(!t)return null;switch(t.type){case"conventional":return obe(t.expression);case"arcade":return BY(t.expression)}return null}function DO(e){let t;return e?(t=bl(e,r=>WN+'$feature["'+r+'"]'+JN),t=q7.test(t)?t.replace(q7,""):uI+t,t=H7.test(t)?t.replace(H7,""):t+uI,t=t.replace(K1e,Q1e).replace(X1e,ebe)):t='""',t}const sbe=/^\s*\{([^}]+)\}\s*$/i;function obe(e){const t=e.match(sbe);return t&&t[1].trim()||null}const abe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*$/i,lbe=/^\s*(?:(?:\$feature\.(\w+))|(?:\$feature\[(["'])([\w\s]+)(\2)\]));?\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])(\1|\3)(\5)\s*\));?\s*$/i,ube=/^\s*(?:DomainName\(\s*\$feature\s*,\s*(["'])([\w\s]+)(\1)\s*\));?\s*$/i;function BY(e){if(!e)return null;let t=abe.exec(e)||lbe.exec(e);return t?t[1]||t[3]:(t=ube.exec(e),t?t[2]:null)}var FO;let pd=FO=class extends me{constructor(){super(...arguments),this.expression=null,this.title=null,this.value=null}readExpression(e,t){return t.value?DO(t.value):e}writeExpression(e,t,r){this.value!=null&&(e=DO(this.value)),e!=null&&(t[r]=e)}clone(){return new FO({expression:this.expression,title:this.title,value:this.value})}};c([p({type:String,json:{write:{writerEnsuresNonNull:!0}}})],pd.prototype,"expression",void 0),c([ye("expression",["expression","value"])],pd.prototype,"readExpression",null),c([Se("expression")],pd.prototype,"writeExpression",null),c([p({type:String,json:{write:!0,origins:{"web-scene":{write:!1}}}})],pd.prototype,"title",void 0),c([p({json:{read:!1,write:!1}})],pd.prototype,"value",void 0),pd=FO=c([N("esri.layers.support.LabelExpressionInfo")],pd);const GY=pd,qY=[252,146,31,255],cbe={type:"esriSMS",style:"esriSMSCircle",size:6,color:qY,outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[153,153,153,255]}},hbe={type:"esriSLS",style:"esriSLSSolid",width:.75,color:qY},dbe={type:"esriSFS",style:"esriSFSSolid",color:[252,146,31,196],outline:{type:"esriSLS",style:"esriSLSSolid",width:.75,color:[255,255,255,191]}},pbe={type:"esriTS",color:[255,255,255,255],font:{family:"arial-unicode-ms",size:10,weight:"bold"},horizontalAlignment:"center",kerning:!0,haloColor:[0,0,0,255],haloSize:1,rotated:!1,text:"",xoffset:0,yoffset:0,angle:0},fbe={type:"esriSMS",style:"esriSMSCircle",color:[0,0,0,255],outline:null,size:10.5},mbe={type:"esriSLS",style:"esriSLSSolid",color:[0,0,0,255],width:1.5},ybe={type:"esriSFS",style:"esriSFSSolid",color:[0,0,0,255],outline:null};zu.fromJSON(cbe);jo.fromJSON(hbe);Sp.fromJSON(dbe);const gbe=zv.fromJSON(pbe),brt=zu.fromJSON(fbe),wrt=jo.fromJSON(mbe),_rt=Sp.fromJSON(ybe);var jO;const Nx=new lt({esriServerPointLabelPlacementAboveCenter:"above-center",esriServerPointLabelPlacementAboveLeft:"above-left",esriServerPointLabelPlacementAboveRight:"above-right",esriServerPointLabelPlacementBelowCenter:"below-center",esriServerPointLabelPlacementBelowLeft:"below-left",esriServerPointLabelPlacementBelowRight:"below-right",esriServerPointLabelPlacementCenterCenter:"center-center",esriServerPointLabelPlacementCenterLeft:"center-left",esriServerPointLabelPlacementCenterRight:"center-right",esriServerLinePlacementAboveAfter:"above-after",esriServerLinePlacementAboveAlong:"above-along",esriServerLinePlacementAboveBefore:"above-before",esriServerLinePlacementAboveStart:"above-start",esriServerLinePlacementAboveEnd:"above-end",esriServerLinePlacementBelowAfter:"below-after",esriServerLinePlacementBelowAlong:"below-along",esriServerLinePlacementBelowBefore:"below-before",esriServerLinePlacementBelowStart:"below-start",esriServerLinePlacementBelowEnd:"below-end",esriServerLinePlacementCenterAfter:"center-after",esriServerLinePlacementCenterAlong:"center-along",esriServerLinePlacementCenterBefore:"center-before",esriServerLinePlacementCenterStart:"center-start",esriServerLinePlacementCenterEnd:"center-end",esriServerPolygonPlacementAlwaysHorizontal:"always-horizontal"},{ignoreUnknown:!0});function HY(e){return!e||e.origin!=="service"&&!WY(e.layer)}function WY(e){return e?.type==="map-image"}function JY(e){var t,r;return!!WY(e)&&!((t=e.capabilities)==null||(r=t.exportMap)==null||!r.supportsArcadeExpressionForLabeling)}function vbe(e){return HY(e)||JY(e.layer)}let ei=jO=class extends me{constructor(e){super(e),this.type="label",this.name=null,this.allowOverrun=!1,this.deconflictionStrategy="static",this.labelExpression=null,this.labelExpressionInfo=null,this.labelPlacement=null,this.labelPosition="curved",this.maxScale=0,this.minScale=0,this.repeatLabel=!0,this.repeatLabelDistance=null,this.symbol=gbe,this.useCodedValues=void 0,this.where=null}static evaluateWhere(e,t){const r=function(i,n,s){switch(n){case"=":return i==s;case"<>":return i!=s;case">":return i>s;case">=":return i>=s;case"<":return i<s;case"<=":return i<=s}return!1};try{if(e==null)return!0;const i=e.split(" ");if(i.length===3)return r(t[i[0]],i[1],i[2]);if(i.length===7){const n=r(t[i[0]],i[1],i[2]),s=i[3],o=r(t[i[4]],i[5],i[6]);switch(s){case"AND":return n&&o;case"OR":return n||o}}return!1}catch{console.log("Error.: can't parse = "+e)}}readLabelExpression(e,t){const r=t.labelExpressionInfo;if(!r||!r.value&&!r.expression)return e}writeLabelExpression(e,t,r){if(this.labelExpressionInfo){if(this.labelExpressionInfo.value!=null)e=rbe(this.labelExpressionInfo.value);else if(this.labelExpressionInfo.expression!=null){const i=BY(this.labelExpressionInfo.expression);i&&(e="["+i+"]")}}e!=null&&(t[r]=e)}writeLabelExpressionInfo(e,t,r,i){if(e==null&&this.labelExpression!=null&&HY(i))e=new GY({expression:this.getLabelExpressionArcade()});else if(!e)return;const n=e.toJSON(i);n.expression&&(t[r]=n)}writeMaxScale(e,t){(e||this.minScale)&&(t.maxScale=e)}writeMinScale(e,t){(e||this.maxScale)&&(t.minScale=e)}getLabelExpression(){return ZN(this)}getLabelExpressionArcade(){return ibe(this)}getLabelExpressionSingleField(){return nbe(this)}hash(){return JSON.stringify(this)}clone(){return new jO({allowOverrun:this.allowOverrun,deconflictionStrategy:this.deconflictionStrategy,labelExpression:this.labelExpression,labelExpressionInfo:ie(this.labelExpressionInfo),labelPosition:this.labelPosition,labelPlacement:this.labelPlacement,maxScale:this.maxScale,minScale:this.minScale,name:this.name,repeatLabel:this.repeatLabel,repeatLabelDistance:this.repeatLabelDistance,symbol:ie(this.symbol),where:this.where,useCodedValues:this.useCodedValues})}};c([p({type:String,json:{write:!0}})],ei.prototype,"name",void 0),c([p({type:Boolean,json:{write:!0,default:!1,origins:{"web-scene":{write:!1}}}})],ei.prototype,"allowOverrun",void 0),c([p({type:String,json:{write:!0,default:"static",origins:{"web-scene":{write:!1}}}})],ei.prototype,"deconflictionStrategy",void 0),c([p({type:String,json:{write:{overridePolicy(e,t,r){return this.labelExpressionInfo&&r?.origin==="service"&&JY(r.layer)?{enabled:!1}:{allowNull:!0}}}}})],ei.prototype,"labelExpression",void 0),c([ye("labelExpression")],ei.prototype,"readLabelExpression",null),c([Se("labelExpression")],ei.prototype,"writeLabelExpression",null),c([p({type:GY,json:{write:{overridePolicy:(e,t,r)=>vbe(r)?{allowNull:!0}:{enabled:!1}}}})],ei.prototype,"labelExpressionInfo",void 0),c([Se("labelExpressionInfo")],ei.prototype,"writeLabelExpressionInfo",null),c([p({type:Nx.apiValues,json:{type:Nx.jsonValues,read:Nx.read,write:Nx.write}})],ei.prototype,"labelPlacement",void 0),c([p({type:["curved","parallel"],json:{write:!0,origins:{"web-map":{write:!1},"web-scene":{write:!1},"portal-item":{write:!1}}}})],ei.prototype,"labelPosition",void 0),c([p({type:Number})],ei.prototype,"maxScale",void 0),c([Se("maxScale")],ei.prototype,"writeMaxScale",null),c([p({type:Number})],ei.prototype,"minScale",void 0),c([Se("minScale")],ei.prototype,"writeMinScale",null),c([p({type:Boolean,json:{write:!0,origins:{"web-scene":{write:!1},"portal-item":{write:!1}}}})],ei.prototype,"repeatLabel",void 0),c([p({type:Number,cast:Ht,json:{write:!0,origins:{"web-scene":{write:!1}}}})],ei.prototype,"repeatLabelDistance",void 0),c([p({types:wye,json:{origins:{"web-scene":{types:_ye,write:G0,default:null}},write:G0,default:null}})],ei.prototype,"symbol",void 0),c([p({type:Boolean,json:{write:!0}})],ei.prototype,"useCodedValues",void 0),c([p({type:String,json:{write:!0}})],ei.prototype,"where",void 0),ei=jO=c([N("esri.layers.support.LabelClass")],ei);const S$=ei;var VO;let co=VO=class extends me{constructor(e){super(e),this.type="cluster",this.clusterRadius=Ht("80px"),this.clusterMinSize=Ht("12px"),this.clusterMaxSize=Ht("50px"),this.popupEnabled=!0,this.popupTemplate=null,this.symbol=null,this.labelingInfo=null,this.labelsVisible=!0,this.fields=null}clone(){return new VO({clusterRadius:this.clusterRadius,clusterMinSize:this.clusterMinSize,clusterMaxSize:this.clusterMaxSize,labelingInfo:ie(this.labelingInfo),labelsVisible:this.labelsVisible,fields:ie(this.fields),popupEnabled:this.popupEnabled,popupTemplate:ie(this.popupTemplate)})}};c([p({type:["cluster"],readOnly:!0,json:{write:!0}})],co.prototype,"type",void 0),c([p({type:Number,cast:e=>e==="auto"?e:Ht(e),json:{write:!0}})],co.prototype,"clusterRadius",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],co.prototype,"clusterMinSize",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],co.prototype,"clusterMaxSize",void 0),c([p(_$)],co.prototype,"popupEnabled",void 0),c([p({type:fy,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],co.prototype,"popupTemplate",void 0),c([p({types:vye})],co.prototype,"symbol",void 0),c([p({type:[S$],json:{read:{source:"drawingInfo.labelingInfo"},write:{target:"drawingInfo.labelingInfo"}}})],co.prototype,"labelingInfo",void 0),c([p(DY)],co.prototype,"labelsVisible",void 0),c([p({type:[Y1e],json:{write:!0}})],co.prototype,"fields",void 0),co=VO=c([N("esri.layers.support.FeatureReductionCluster")],co);const W7=co;var UO;let VM=UO=class extends jM{constructor(e){super(e),this.type="selection"}clone(){return new UO}};c([p({type:["selection"]})],VM.prototype,"type",void 0),VM=UO=c([N("esri.layers.support.FeatureReductionSelection")],VM);const J7=VM,bbe={types:{key:"type",base:jM,typeMap:{selection:J7,cluster:W7}},json:{name:"layerDefinition.featureReduction",write:{allowNull:!0},origins:{"web-map":{types:{key:"type",base:jM,typeMap:{selection:W7}}},"web-scene":{types:{key:"type",base:jM,typeMap:{selection:J7}}}}}},Z7=new lt({esriFeatureEditToolAutoCompletePolygon:"auto-complete-polygon",esriFeatureEditToolCircle:"circle",esriFeatureEditToolEllipse:"ellipse",esriFeatureEditToolFreehand:"freehand",esriFeatureEditToolLine:"line",esriFeatureEditToolNone:"none",esriFeatureEditToolPoint:"point",esriFeatureEditToolPolygon:"polygon",esriFeatureEditToolRectangle:"rectangle",esriFeatureEditToolArrow:"arrow",esriFeatureEditToolTriangle:"triangle",esriFeatureEditToolLeftArrow:"left-arrow",esriFeatureEditToolRightArrow:"right-arrow",esriFeatureEditToolUpArrow:"up-arrow",esriFeatureEditToolDownArrow:"down-arrow"});let fd=class extends me{constructor(e){super(e),this.name=null,this.description=null,this.drawingTool=null,this.prototype=null,this.thumbnail=null}};c([p({json:{write:!0}})],fd.prototype,"name",void 0),c([p({json:{write:!0}})],fd.prototype,"description",void 0),c([p({json:{read:Z7.read,write:Z7.write}})],fd.prototype,"drawingTool",void 0),c([p({json:{write:!0}})],fd.prototype,"prototype",void 0),c([p({json:{write:!0}})],fd.prototype,"thumbnail",void 0),fd=c([N("esri.layers.support.FeatureTemplate")],fd);const YN=fd;let Mc=class extends me{constructor(e){super(e),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(e){const t={};for(const r of Object.keys(e))t[r]=DN(e[r]);return t}writeDomains(e,t){const r={};for(const n of Object.keys(e)){var i;e[n]&&(r[n]=(i=e[n])==null?void 0:i.toJSON())}t.domains=r}};c([p({json:{write:!0}})],Mc.prototype,"id",void 0),c([p({json:{write:!0}})],Mc.prototype,"name",void 0),c([p({json:{write:!0}})],Mc.prototype,"domains",void 0),c([ye("domains")],Mc.prototype,"readDomains",null),c([Se("domains")],Mc.prototype,"writeDomains",null),c([p({type:[YN],json:{write:!0}})],Mc.prototype,"templates",void 0),Mc=c([N("esri.layers.support.FeatureType")],Mc);const KN=Mc;function wbe(e){return e.type==="date"||e.type==="esriFieldTypeDate"}function Y7(e){return e.type==="oid"||e.type==="esriFieldTypeOID"}function K7(e){return e.type==="global-id"||e.type==="esriFieldTypeGlobalID"}class XN{constructor(t){if(this.fields=t,this._fieldsMap=new Map,this._dateFieldsSet=new Set,this._numericFieldsSet=new Set,this.dateFields=[],this.numericFields=[],this._requiredFields=null,!t)return;const r=[];for(const i of t){const n=i&&i.name;if(n){const s=X7(n);this._fieldsMap.set(n,i),this._fieldsMap.set(s,i),r.push(s),wbe(i)?(this.dateFields.push(i),this._dateFieldsSet.add(i)):uN(i)&&(this._numericFieldsSet.add(i),this.numericFields.push(i)),Y7(i)||K7(i)||(i.editable=i.editable==null||!!i.editable,i.nullable=i.nullable==null||!!i.nullable)}}r.sort(),this.uid=r.join(",")}destroy(){this._fieldsMap.clear()}get requiredFields(){if(!this._requiredFields){this._requiredFields=[];for(const t of this.fields)Y7(t)||K7(t)||t.nullable||Vfe(t)!==void 0||this._requiredFields.push(t)}return this._requiredFields}has(t){return this.get(t)!=null}get(t){return t!=null?this._fieldsMap.get(t)||this._fieldsMap.get(X7(t)):void 0}isDateField(t){return this._dateFieldsSet.has(this.get(t))}isNumericField(t){return this._numericFieldsSet.has(this.get(t))}normalizeFieldName(t){const r=this.get(t);if(r)return r.name}}function X7(e){return e.toLowerCase().trim()}const _be=Te.getLogger("esri.layers.support.fieldProperties");function xbe(){return{fields:{type:[wo],value:null},fieldsIndex:{readOnly:!0,get(){return new XN(this.fields||[])}},outFields:{type:[String],json:{read:!1},set:function(e){this._userOutFields=e,this.notifyChange("outFields")},get:function(){const e=this._userOutFields;if(!e||!e.length)return null;if(e.includes("*"))return["*"];if(!this.fields)return e;for(const t of e)this.fieldsIndex.has(t)||_be.error("field-attributes-layer:invalid-field",`Invalid field ${t} found in outFields`,{layer:this,outFields:e});return CJ(this.fieldsIndex,e)}}}}let bg=class extends me{constructor(e){super(e),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};c([p({type:String,json:{read:{source:"shapeAreaFieldName"}}})],bg.prototype,"shapeAreaField",void 0),c([p({type:String,json:{read:{source:"shapeLengthFieldName"}}})],bg.prototype,"shapeLengthField",void 0),c([p({type:String,json:{read:e=>Jye.read(e)||Zye.read(e)}})],bg.prototype,"units",void 0),bg=c([N("esri.layers.support.GeometryFieldsInfo")],bg);const Sbe=bg,Mbe=/\[([^\[\]]+)\]/gi;function Q7(e,t,r){return e?e.map(i=>{const n=new S$;if(n.read(i,r),n.labelExpression){const s=t.fields||t.layerDefinition&&t.layerDefinition.fields||this.fields;n.labelExpression=n.labelExpression.replace(Mbe,(o,a)=>`[${Ibe(a,s)}]`)}return n}):null}function Ibe(e,t){if(!t)return e;const r=e.toLowerCase();for(let i=0;i<t.length;i++){const n=t[i].name;if(n.toLowerCase()===r)return n}return e}var zO;let wg=zO=class extends me{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new Je}clone(){return new zO({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};c([p({type:String,json:{write:!0}})],wg.prototype,"floorField",void 0),c([p({json:{read:!1,write:!1}})],wg.prototype,"viewAllMode",void 0),c([p({json:{read:!1,write:!1}})],wg.prototype,"viewAllLevelIds",void 0),wg=zO=c([N("esri.layers.support.LayerFloorInfo")],wg);const ZY=wg,ej=new lt({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),tj=new lt({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"});let ra=class extends me{constructor(e){super(e),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};c([p({json:{read:ej.read,write:ej.write}})],ra.prototype,"cardinality",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"composite",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"id",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"keyField",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"keyFieldInRelationshipTable",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"name",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"relatedTableId",void 0),c([p({json:{read:!0,write:!0}})],ra.prototype,"relationshipTableId",void 0),c([p({json:{read:tj.read,write:tj.write}})],ra.prototype,"role",void 0),ra=c([N("esri.layers.support.Relationship")],ra);const Tbe=ra;async function $be(e,t,r){const i=e&&e.getAtOrigin&&e.getAtOrigin("renderer",t.origin);if(i&&i.type==="unique-value"&&i.styleOrigin){const n=await HT(i.populateFromStyle());if($r(r),n.ok===!1){const s=n.error;t&&t.messages&&t.messages.push(new Ys("renderer:style-reference",`Failed to create unique value renderer from style reference: ${s.message}`,{error:s,context:t})),e.clear("renderer",t.origin)}}}var BO;let cn=BO=class extends me{constructor(e){super(e),this.attachmentTypes=null,this.attachmentsWhere=null,this.keywords=null,this.globalIds=null,this.name=null,this.num=null,this.objectIds=null,this.returnMetadata=!1,this.size=null,this.start=null,this.where=null}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new BO(ie({attachmentTypes:this.attachmentTypes,attachmentsWhere:this.attachmentsWhere,keywords:this.keywords,where:this.where,globalIds:this.globalIds,name:this.name,num:this.num,objectIds:this.objectIds,returnMetadata:this.returnMetadata,size:this.size,start:this.start}))}};c([p({type:[String],json:{write:!0}})],cn.prototype,"attachmentTypes",void 0),c([p({type:String,json:{read:{source:"attachmentsDefinitionExpression"},write:{target:"attachmentsDefinitionExpression"}}})],cn.prototype,"attachmentsWhere",void 0),c([p({type:[String],json:{write:!0}})],cn.prototype,"keywords",void 0),c([p({type:[Number],json:{write:!0}})],cn.prototype,"globalIds",void 0),c([p({json:{write:!0}})],cn.prototype,"name",void 0),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],cn.prototype,"num",void 0),c([p({type:[Number],json:{write:!0}})],cn.prototype,"objectIds",void 0),c([p({type:Boolean,json:{default:!1,write:!0}})],cn.prototype,"returnMetadata",void 0),c([p({type:[Number],json:{write:!0}})],cn.prototype,"size",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],cn.prototype,"start",void 0),c([Se("start"),Se("num")],cn.prototype,"writeStart",null),c([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],cn.prototype,"where",void 0),cn=BO=c([N("esri.rest.support.AttachmentQuery")],cn),cn.from=br(cn);const cI=cn;var GO;let qr=GO=class extends me{constructor(e){super(e),this.dynamicDataSource=void 0,this.gdbVersion=null,this.geometryPrecision=void 0,this.historicMoment=null,this.maxAllowableOffset=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.relationshipId=void 0,this.start=void 0,this.num=void 0,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.where=null}_writeHistoricMoment(e,t){t.historicMoment=e&&e.getTime()}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10,this.start>0&&this.where==null&&(t.definitionExpression="1=1")}clone(){return new GO(ie({dynamicDataSource:this.dynamicDataSource,gdbVersion:this.gdbVersion,geometryPrecision:this.geometryPrecision,historicMoment:this.historicMoment&&new Date(this.historicMoment.getTime()),maxAllowableOffset:this.maxAllowableOffset,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,relationshipId:this.relationshipId,start:this.start,num:this.num,returnGeometry:this.returnGeometry,where:this.where,returnZ:this.returnZ,returnM:this.returnM}))}};c([p({type:ss,json:{write:!0}})],qr.prototype,"dynamicDataSource",void 0),c([p({type:String,json:{write:!0}})],qr.prototype,"gdbVersion",void 0),c([p({type:Number,json:{write:!0}})],qr.prototype,"geometryPrecision",void 0),c([p({type:Date})],qr.prototype,"historicMoment",void 0),c([Se("historicMoment")],qr.prototype,"_writeHistoricMoment",null),c([p({type:Number,json:{write:!0}})],qr.prototype,"maxAllowableOffset",void 0),c([p({type:[Number],json:{write:!0}})],qr.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],qr.prototype,"orderByFields",void 0),c([p({type:[String],json:{write:!0}})],qr.prototype,"outFields",void 0),c([p({type:Fe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],qr.prototype,"outSpatialReference",void 0),c([p({json:{write:!0}})],qr.prototype,"relationshipId",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],qr.prototype,"start",void 0),c([Se("start"),Se("num")],qr.prototype,"writeStart",null),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],qr.prototype,"num",void 0),c([p({json:{write:!0}})],qr.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qr.prototype,"returnM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],qr.prototype,"returnZ",void 0),c([p({type:String,json:{read:{source:"definitionExpression"},write:{target:"definitionExpression"}}})],qr.prototype,"where",void 0),qr=GO=c([N("esri.rest.support.RelationshipQuery")],qr),qr.from=br(qr);const Bm=qr;var qO;let _g=qO=class extends me{constructor(e){super(e),this.groupByFields=void 0,this.topCount=void 0,this.orderByFields=void 0}clone(){return new qO({groupByFields:this.groupByFields,topCount:this.topCount,orderByFields:this.orderByFields})}};c([p({type:[String],json:{write:!0}})],_g.prototype,"groupByFields",void 0),c([p({type:Number,json:{write:!0}})],_g.prototype,"topCount",void 0),c([p({type:[String],json:{write:!0}})],_g.prototype,"orderByFields",void 0),_g=qO=c([N("esri.rest.support.TopFilter")],_g);const Ebe=_g;var HO;const rj=new lt({esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"envelope-intersects",esriSpatialRelIndexIntersects:"index-intersects",esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:"relation"}),ij=new lt({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"});let Ir=HO=class extends me{constructor(e){super(e),this.cacheHint=void 0,this.distance=void 0,this.geometry=null,this.geometryPrecision=void 0,this.maxAllowableOffset=void 0,this.num=void 0,this.objectIds=null,this.orderByFields=null,this.outFields=null,this.outSpatialReference=null,this.resultType=null,this.returnGeometry=!1,this.returnM=void 0,this.returnZ=void 0,this.start=void 0,this.spatialRelationship="intersects",this.timeExtent=null,this.topFilter=void 0,this.units=null,this.where="1=1"}writeStart(e,t){t.resultOffset=this.start,t.resultRecordCount=this.num||10}clone(){return new HO(ie({cacheHint:this.cacheHint,distance:this.distance,geometry:this.geometry,geometryPrecision:this.geometryPrecision,maxAllowableOffset:this.maxAllowableOffset,num:this.num,objectIds:this.objectIds,orderByFields:this.orderByFields,outFields:this.outFields,outSpatialReference:this.outSpatialReference,resultType:this.resultType,returnGeometry:this.returnGeometry,returnZ:this.returnZ,returnM:this.returnM,start:this.start,spatialRelationship:this.spatialRelationship,timeExtent:this.timeExtent,topFilter:this.topFilter,units:this.units,where:this.where}))}};c([p({type:Boolean,json:{write:!0}})],Ir.prototype,"cacheHint",void 0),c([p({type:Number,json:{write:{overridePolicy:e=>({enabled:e>0})}}})],Ir.prototype,"distance",void 0),c([p({types:xh,json:{read:Sr,write:!0}})],Ir.prototype,"geometry",void 0),c([p({type:Number,json:{write:!0}})],Ir.prototype,"geometryPrecision",void 0),c([p({type:Number,json:{write:!0}})],Ir.prototype,"maxAllowableOffset",void 0),c([p({type:Number,json:{read:{source:"resultRecordCount"}}})],Ir.prototype,"num",void 0),c([p({json:{write:!0}})],Ir.prototype,"objectIds",void 0),c([p({type:[String],json:{write:!0}})],Ir.prototype,"orderByFields",void 0),c([p({type:[String],json:{write:!0}})],Ir.prototype,"outFields",void 0),c([p({type:Fe,json:{read:{source:"outSR"},write:{target:"outSR"}}})],Ir.prototype,"outSpatialReference",void 0),c([p({type:String,json:{write:!0}})],Ir.prototype,"resultType",void 0),c([p({json:{write:!0}})],Ir.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ir.prototype,"returnM",void 0),c([p({type:Boolean,json:{write:{overridePolicy:e=>({enabled:e})}}})],Ir.prototype,"returnZ",void 0),c([p({type:Number,json:{read:{source:"resultOffset"}}})],Ir.prototype,"start",void 0),c([Se("start"),Se("num")],Ir.prototype,"writeStart",null),c([p({type:String,json:{read:{source:"spatialRel",reader:rj.read},write:{target:"spatialRel",writer:rj.write}}})],Ir.prototype,"spatialRelationship",void 0),c([p({type:bs,json:{write:!0}})],Ir.prototype,"timeExtent",void 0),c([p({type:Ebe,json:{write:!0}})],Ir.prototype,"topFilter",void 0),c([p({type:String,json:{read:ij.read,write:{writer:ij.write,overridePolicy(e){return{enabled:e&&this.distance>0}}}}})],Ir.prototype,"units",void 0),c([p({type:String,json:{write:!0}})],Ir.prototype,"where",void 0),Ir=HO=c([N("esri.rest.support.TopFeaturesQuery")],Ir),Ir.from=br(Ir);const Fd=Ir,Abe=["oid","global-id"],Cbe=["oid","global-id","guid"];function QN({displayField:e,editFieldsInfo:t,fields:r,objectIdField:i,title:n},s){if(!r)return null;const o=Nbe({editFieldsInfo:t,fields:r,objectIdField:i},s);if(!o.length)return null;const a=jbe({titleBase:n,fields:r,displayField:e}),l=Fbe();return new fy({title:a,content:l,fieldInfos:o})}const kbe=[/^fnode_$/i,/^tnode_$/i,/^lpoly_$/i,/^rpoly_$/i,/^poly_$/i,/^subclass$/i,/^subclass_$/i,/^rings_ok$/i,/^rings_nok$/i,/shape/i,/perimeter/i,/objectid/i,/_i$/i],Obe=(e,{editFieldsInfo:t,objectIdField:r,visibleFieldNames:i})=>i?i.has(e.name):!YY(e.name,t)&&(!r||e.name!==r)&&!(Abe.indexOf(e.type)>-1)&&!kbe.some(n=>n.test(e.name));function Pbe(e,t){const r=e;return t&&(e=e.filter(i=>t.indexOf(i.type)===-1)),e===r&&(e=e.slice()),e.sort(Rbe),e}function Rbe(e,t){return e.type==="oid"?-1:t.type==="oid"?1:nj(e)?-1:nj(t)?1:(e.alias||e.name).toLocaleLowerCase().localeCompare((t.alias||t.name).toLocaleLowerCase())}function YY(e,t){if(!e||!t)return!1;const{creationDateField:r,creatorField:i,editDateField:n,editorField:s}=t;return[r&&r.toLowerCase(),i&&i.toLowerCase(),n&&n.toLowerCase(),s&&s.toLowerCase()].indexOf(e.toLowerCase())!==-1}function Lbe(e,t){return e.editable&&Cbe.indexOf(e.type)===-1&&!YY(e.name,t)}function Nbe({editFieldsInfo:e,fields:t,objectIdField:r},i){return Pbe(t,i?.ignoreFieldTypes||Vbe).map(n=>new c2({fieldName:n.name,isEditable:Lbe(n,e),label:n.alias,format:Dbe(n),visible:Obe(n,{editFieldsInfo:e,objectIdField:r,visibleFieldNames:i?.visibleFieldNames})}))}function Dbe(e){switch(e.type){case"small-integer":case"integer":case"single":return new pw({digitSeparator:!0,places:0});case"double":return new pw({digitSeparator:!0,places:2});case"date":return new pw({dateFormat:"long-month-day-year"});default:return null}}function Fbe(){return[new V0,new s_]}function jbe(e){const t=Lfe(e),{titleBase:r}=e;return t?`${r}: {${t.trim()}}`:r}function nj(e){return(e.name&&e.name.toLowerCase())==="name"?!0:(e.alias&&e.alias.toLowerCase())==="name"||void 0}const Vbe=["geometry","blob","raster","guid","xml"],j4=new lt({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Ube={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"},ui="FeatureLayer",sj=Te.getLogger("esri.layers.FeatureLayer");function oj(e){return e&&e instanceof Je}function xt(e,t,r){return!!(e&&e.hasOwnProperty(t)?e[t]:r)}function Dx(e,t,r){return e&&e.hasOwnProperty(t)?e[t]:r}const V4=xbe();function U4(e,t,r){const i=!(r==null||!r.writeLayerSchema);return{enabled:i,ignoreOrigin:i}}let Ae=class extends A1e(by(B1e(x$(wy(Kv(d$(Zv(Yv(Ip(w$(UN(Sh)))))))))))){constructor(...e){super(...e),this._handles=new gi,this.capabilities=null,this.charts=null,this.copyright=null,this.datesInUnknownTimezone=!1,this.displayField=null,this.definitionExpression=null,this.dynamicDataSource=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.floorInfo=null,this.formTemplate=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.infoFor3D=null,this.isTable=!1,this.labelsVisible=!0,this.labelingInfo=null,this.layerId=void 0,this.legendEnabled=!0,this.minScale=0,this.maxScale=0,this.globalIdField=null,this.objectIdField=null,this.outFields=null,this.path=null,this.popupEnabled=!0,this.popupTemplate=null,this.relationships=null,this.sourceJSON=null,this.returnM=void 0,this.returnZ=void 0,this.screenSizePerspectiveEnabled=!0,this.serviceDefinitionExpression=null,this.spatialReference=Fe.WGS84,this.subtypeCode=null,this.templates=null,this.timeInfo=null,this.title=null,this.sublayerTitleMode="item-title",this.trackIdField=null,this.type="feature",this.typeIdField=null,this.types=null,this.indexes=new(Je.ofType(Gc)),this.userIsAdmin=!1,this.version=void 0,this.visible=!0}destroy(){var e;(e=this.source)==null||e.destroy(),this._handles=Tu(this._handles)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=U(e)?e.signal:null;if(this.portalItem&&this.portalItem.loaded&&this.source)return void this.addResolvingPromise(this.createGraphicsSource(t).then(i=>this._initLayerProperties(i)));const r=this.loadFromPortal({supportedTypes:["Feature Service","Feature Collection"]},e).catch(wh).then(async()=>{if(this.url&&this.layerId==null&&/FeatureServer|MapServer\/*$/i.test(this.url)){const i=await this._fetchFirstLayerId(t);i!=null&&(this.layerId=i)}if(!this.url&&!this._hasMemorySource())throw new Z("feature-layer:missing-url-or-source","Feature layer must be created with either a url or a source");return this._initLayerProperties(await this.createGraphicsSource(t))}).then(()=>this.finishLoadEditablePortalLayer(e));return this.addResolvingPromise(r),Promise.resolve(this)}readCapabilities(e,t){return t=t.layerDefinition||t,{attachment:this._readAttachmentCapabilities(t.attachmentProperties),data:this._readDataCapabilities(t),metadata:this._readMetadataCapabilities(t),operations:this._readOperationsCapabilities(t.capabilities||e,t),query:this._readQueryCapabilities(t),queryRelated:this._readQueryRelatedCapabilities(t),editing:this._readEditingCapabilities(t)}}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("dynamicDataSource"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(this._get("createQueryVersion")||0)+1}get editingEnabled(){return!(this.loaded&&!this.capabilities.operations.supportsEditing)&&(this._isOverridden("editingEnabled")?this._get("editingEnabled"):this._hasMemorySource()||this.userHasEditingPrivileges)}set editingEnabled(e){e!=null?this._override("editingEnabled",e):this._clearOverride("editingEnabled")}readEditingEnabled(e,t){return this._readEditingEnabled(t,!1)}readEditingEnabledFromWebMap(e,t,r){return this._readEditingEnabled(t,!0,r)}writeEditingEnabled(e,t){this._writeEditingEnabled(e,t,!1)}writeEditingEnabledToWebMap(e,t,r,i){this._writeEditingEnabled(e,t,!0,i)}readEditingInfo(e,t){const{editingInfo:r}=t;return r?{lastEditDate:r.lastEditDate!=null?new Date(r.lastEditDate):null}:null}readIsTable(e,t){return(t=t&&t.layerDefinition||t).type==="Table"||!t.geometryType}writeIsTable(e,t,r,i){i!=null&&i.writeLayerSchema&&Ro(r,e?"Table":"Feature Layer",t)}readMinScale(e,t){return t.effectiveMinScale||e||0}readMaxScale(e,t){return t.effectiveMaxScale||e||0}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}get parsedUrl(){const e=this.url?Kr(this.url):null;return e!=null&&(this.dynamicDataSource!=null?e.path=up(e.path,"dynamicLayer"):this.layerId!=null&&(e.path=up(e.path,this.layerId.toString()))),e}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){j9(e,this.fieldsIndex),this._set("renderer",e)}readRenderer(e,t,r){const i=(t=t.layerDefinition||t).drawingInfo&&t.drawingInfo.renderer||void 0;if(i){const n=XZ(i,t,r)||void 0;return n||sj.error("Failed to create renderer",{rendererDefinition:t.drawingInfo.renderer,layer:this,context:r}),n}if(t.defaultSymbol)return t.types&&t.types.length?new qv({defaultSymbol:z4(t.defaultSymbol,t,r),field:t.typeIdField,uniqueValueInfos:t.types.map(n=>({id:n.id,symbol:z4(n.symbol,n,r)}))}):new l$({symbol:z4(t.defaultSymbol,t,r)})}set source(e){const t=this._get("source");t!==e&&(oj(t)&&this._resetMemorySource(t),oj(e)&&this._initMemorySource(e),this._set("source",e))}castSource(e){return e?Array.isArray(e)||e instanceof Je?new O7({layer:this,items:e}):e:null}readSource(e,t){const r=Bu.fromJSON(t.featureSet);return new O7({layer:this,items:r&&r.features||[]})}readServiceDefinitionExpression(e,t){return t.definitionQuery||t.definitionExpression}readTemplates(e,t){const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e=e&&e.map(s=>YN.fromJSON(s)),this._fixTemplates(e,i),this._fixTemplates(e,n),e}readTitle(e,t){const r=t.layerDefinition&&t.layerDefinition.name||t.name,i=t.title||t.layerDefinition&&t.layerDefinition.title;if(r){const n=this.portalItem&&this.portalItem.title;if(this.sublayerTitleMode==="item-title")return this.url?Z0e(this.url,r):r;let s=r;if(!s&&this.url){const o=Wv(this.url);U(o)&&(s=o.title)}return s?(this.sublayerTitleMode==="item-title-and-service-name"&&n&&n!==s&&(s=n+" - "+s),zN(s)):void 0}if(this.sublayerTitleMode==="item-title"&&i)return i}readTitleFromWebMap(e,t){return t.title||t.layerDefinition&&t.layerDefinition.name}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return r}readTypes(e,t){e=(t=t.layerDefinition||t).types;const r=t.editFieldsInfo,i=r&&r.creatorField,n=r&&r.editorField;return e&&e.map(s=>(s=KN.fromJSON(s),this._fixTemplates(s.templates,i),this._fixTemplates(s.templates,n),s))}set url(e){const t=K0e({layer:this,url:e,nonStandardUrlAllowed:!0,logger:sj});this._set("url",t.url),t.layerId!=null&&this._set("layerId",t.layerId)}writeUrl(e,t,r,i){X0e(this,e,null,t,i)}readVersion(e,t){return t.currentVersion?t.currentVersion:t.hasOwnProperty("capabilities")||t.hasOwnProperty("drawingInfo")||t.hasOwnProperty("hasAttachments")||t.hasOwnProperty("htmlPopupType")||t.hasOwnProperty("relationships")||t.hasOwnProperty("timeInfo")||t.hasOwnProperty("typeIdField")||t.hasOwnProperty("types")?10:9.3}readVisible(e,t){return t.layerDefinition&&t.layerDefinition.defaultVisibility!=null?!!t.layerDefinition.defaultVisibility:t.visibility!=null?!!t.visibility:void 0}addAttachment(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("addAttachment"in this.source))throw new Z(ui,"Layer source does not support addAttachment capability");return this.source.addAttachment(e,t)})}updateAttachment(e,t,r){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("updateAttachment"in this.source))throw new Z(ui,"Layer source does not support updateAttachment capability");return this.source.updateAttachment(e,t,r)})}async applyEdits(e,t){const r=await ae(()=>import("./editingSupport.53ed4246.js"),[]);return await this.load(),r.applyEdits(this,this.source,e,t)}on(e,t){return super.on(e,t)}createPopupTemplate(e){return QN(this,e)}async createGraphicsSource(e){if(this._hasMemorySource())return this.source.load({signal:e});const{default:t}=await PL(ae(()=>import("./FeatureLayerSource.f5153b6b.js"),["assets/FeatureLayerSource.f5153b6b.js","assets/clientSideDefaults.a9da464a.js","assets/QueryEngineCapabilities.83e56447.js"]),e);return new t({layer:this}).load({signal:e})}createQuery(){const e=new ni,t=this.get("capabilities.data");e.dynamicDataSource=this.dynamicDataSource,e.gdbVersion=this.gdbVersion,e.historicMoment=this.historicMoment,e.returnGeometry=!0,t&&(t.supportsZ&&this.returnZ!=null&&(e.returnZ=this.returnZ),t.supportsM&&this.returnM!=null&&(e.returnM=this.returnM)),e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:i}=this;return e.timeExtent=r!=null&&i!=null?i.offset(-r.value,r.unit):i||null,e.multipatchOption=this.geometryType==="multipatch"?"xyFootprint":null,e}deleteAttachments(e,t){return this.load().then(()=>this._checkAttachmentSupport(e)).then(()=>{if(!("deleteAttachments"in this.source))throw new Z(ui,"Layer source does not support deleteAttachments capability");return this.source.deleteAttachments(e,t)})}fetchRecomputedExtents(e){return this.load({signal:e?.signal}).then(()=>{if(this.source.fetchRecomputedExtents)return this.source.fetchRecomputedExtents(e);throw new Z(ui,"Layer source does not support fetchUpdates capability")})}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(i==null)return null;let n=null;return r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===i.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const n=i.domains&&i.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}queryAttachments(e,t){return e=cI.from(e),this.load().then(()=>{if(!this.get("capabilities.data.supportsAttachment"))throw new Z(ui,"this layer doesn't support attachments");const{attachmentTypes:r,objectIds:i,globalIds:n,num:s,size:o,start:a,where:l}=e;if(!this.get("capabilities.operations.supportsQueryAttachments")){const u=i&&i.length>1,h=r&&r.length,d=n&&n.length,f=o&&o.length;if(u||h||d||f||s||a||l)throw new Z(ui,"when 'supportsQueryAttachments' is false, only objectIds of length 1 are supported",e)}if(!(i&&i.length||l))throw new Z(ui,"'objectIds' or 'where' are required to perform attachment query",e);if(!("queryAttachments"in this.source))throw new Z(ui,"Layer source does not support queryAttachments capability",e);return this.source.queryAttachments(e)})}queryFeatures(e,t){return this.load().then(()=>this.source.queryFeatures(ni.from(e)||this.createQuery(),t)).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryObjectIds(e,t){return this.load().then(()=>{if(this.source.queryObjectIds)return this.source.queryObjectIds(ni.from(e)||this.createQuery(),t);throw new Z(ui,"Layer source does not support queryObjectIds capability")})}queryFeatureCount(e,t){return this.load().then(()=>{if(this.source.queryFeatureCount)return this.source.queryFeatureCount(ni.from(e)||this.createQuery(),t);throw new Z(ui,"Layer source does not support queryFeatureCount capability")})}queryExtent(e,t){return this.load().then(()=>{if(this.source.queryExtent)return this.source.queryExtent(ni.from(e)||this.createQuery(),t);throw new Z(ui,"Layer source does not support queryExtent capability")})}queryRelatedFeatures(e,t){return this.load().then(()=>{if("queryRelatedFeatures"in this.source)return this.source.queryRelatedFeatures(Bm.from(e),t);throw new Z(ui,"Layer source does not support queryRelatedFeatures capability")})}queryRelatedFeaturesCount(e,t){return this.load().then(()=>{if("queryRelatedFeaturesCount"in this.source)return this.source.queryRelatedFeaturesCount(Bm.from(e),t);throw new Z(ui,"Layer source does not support queryRelatedFeaturesCount capability")})}queryTopFeatures(e,t){return this.load().then(()=>{if("queryTopFeatures"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopFeatures(Fd.from(e),t).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r});throw new Z(ui,"Layer source does not support queryTopFeatures capability")})}queryTopObjectIds(e,t){return this.load().then(()=>{if("queryTopObjectIds"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopObjectIds(Fd.from(e),t);throw new Z(ui,"Layer source does not support queryTopObjectIds capability")})}queryTopFeaturesExtent(e,t){return this.load().then(()=>{if("queryTopExtents"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopExtents(Fd.from(e),t);throw new Z(ui,"Layer source does not support queryTopExtents capability")})}queryTopFeatureCount(e,t){return this.load().then(()=>{if("queryTopCount"in this.source&&this.get("capabilities.query.supportsTopFeaturesQuery"))return this.source.queryTopCount(Fd.from(e),t);throw new Z(ui,"Layer source does not support queryFeatureCount capability")})}read(e,t){const r=e.featureCollection;if(r){const i=r.layers;i&&i.length===1&&(super.read(i[0],t),r.showLegend!=null&&super.read({showLegend:r.showLegend},t))}super.read(e,t),t&&t.origin==="service"&&this.revert(["objectIdField","fields","timeInfo","spatialReference"],"service")}write(e,t){var r,i;const n=(t={...t,writeLayerSchema:(r=(i=t)==null?void 0:i.writeLayerSchema)!=null?r:this._hasMemorySource()}).origin,s=t.layerContainerType,o=t.messages;if(this.isTable){if(n==="web-scene"||n==="web-map"&&s!=="tables")return o&&o.push(new Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a Table source cannot be written to web scenes and web maps`,{layer:this})),null;if(this._hasMemorySource())return o&&o.push(new Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using an in-memory Table source cannot be written to web scenes and web maps`,{layer:this})),null}else if(this.loaded&&n==="web-map"&&s==="tables")return o&&o.push(new Z("layer:unsupported",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' using a non-table source cannot be written to tables in web maps`,{layer:this})),null;return super.write(e,t)}_readEditingEnabled(e,t,r){var i;let n=(i=e.layerDefinition)==null?void 0:i.capabilities;return n?this._hasEditingCapability(n):(n=e.capabilities,t&&r?.origin==="web-map"&&!this._hasMemorySource()&&n?this._hasEditingCapability(n):void 0)}_hasEditingCapability(e){return e.toLowerCase().split(",").map(t=>t.trim()).includes("editing")}_writeEditingEnabled(e,t,r,i){if(!e){var n,s;const o=(n=this.capabilities)!=null&&(s=n.operations)!=null&&s.supportsSync?"Query,Sync":"Query";Ro("layerDefinition.capabilities",o,t),!r||i!=null&&i.writeLayerSchema||(t.capabilities=o)}}_checkAttachmentSupport(e){const{attributes:t}=e,{objectIdField:r}=this;return this.get("capabilities.data.supportsAttachment")?e?t?t[r]?void 0:Promise.reject(new Z(ui,`feature is missing the identifying attribute ${r}`)):Promise.reject(new Z(ui,"'attributes' are required on a feature to query attachments")):Promise.reject(new Z(ui,"A feature is required to add/delete/update attachments")):Promise.reject(new Z(ui,"this layer doesn't support attachments"))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_fetchFirstLayerId(e){return Ee(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t=>{const r=t.data;if(r)return Array.isArray(r.layers)&&r.layers.length>0?r.layers[0].id:Array.isArray(r.tables)&&r.tables.length>0?r.tables[0].id:void 0})}async _initLayerProperties(e){return this._set("source",e),e.sourceJSON&&(this.sourceJSON=e.sourceJSON,this.read(e.sourceJSON,{origin:"service",url:this.parsedUrl})),this._verifySource(),this._verifyFields(),j9(this.renderer,this.fieldsIndex),AJ(this.timeInfo,this.fieldsIndex),$be(this,{origin:"service"})}async hasDataChanged(){var e;if((e=this.source)!=null&&e.refresh)try{var t;const{dataChanged:r,updates:i}=await((t=this.source)==null?void 0:t.refresh());if(U(i)&&(this.sourceJSON={...this.sourceJSON,...i},this.read(i,{origin:"service",url:this.parsedUrl})),r)return!0}catch{}if(this.definitionExpression)try{return(await Lge(this.definitionExpression,this.fieldsIndex)).hasDateFunctions}catch{}return!1}_verifyFields(){const e=this.parsedUrl&&this.parsedUrl.path||"undefined";this.objectIdField||console.log("FeatureLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||this._hasMemorySource()||e.search(/\/FeatureServer\//i)!==-1||this.fields&&this.fields.some(function(t){return t.type==="geometry"})||console.log("FeatureLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_fixTemplates(e,t){e&&e.forEach(r=>{const i=r.prototype&&r.prototype.attributes;i&&t&&delete i[t]})}_verifySource(){if(this._hasMemorySource()){if(this.url)throw new Z("feature-layer:mixed-source-and-url","FeatureLayer cannot be created with both an in-memory source and a url")}else if(!this.url)throw new Z("feature-layer:source-or-url-required","FeatureLayer requires either a url, a valid portal item or a source")}_initMemorySource(e){e.forEach(t=>{t.layer=this,t.sourceLayer=this}),this._handles.add([e.on("after-add",t=>{t.item.layer=this,t.item.sourceLayer=this}),e.on("after-remove",t=>{t.item.layer=null,t.item.sourceLayer=null})],"fl-source")}_resetMemorySource(e){e.forEach(t=>{t.layer=null,t.sourceLayer=null}),this._handles.remove("fl-source")}_hasMemorySource(){return!(this.url||!this.source)}_readAttachmentCapabilities(e){const t={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1};return e&&Array.isArray(e)&&e.forEach(r=>{const i=Ube[r.name];i&&(t[i]=!!r.isEnabled)}),t}_readDataCapabilities(e){return{isVersioned:xt(e,"isDataVersioned",!1),supportsAttachment:xt(e,"hasAttachments",!1),supportsM:xt(e,"hasM",!1),supportsZ:xt(e,"hasZ",!1)}}_readMetadataCapabilities(e){return{supportsAdvancedFieldProperties:xt(e,"supportsFieldDescriptionProperty",!1)}}_readOperationsCapabilities(e,t){const r=e?e.toLowerCase().split(",").map(l=>l.trim()):[],i=r.includes("editing")&&!t.datesInUnknownTimezone;let n=i&&r.includes("create"),s=i&&r.includes("delete"),o=i&&r.includes("update");const a=r.includes("changetracking");return i&&!(n||s||o)&&(n=s=o=!0),{supportsCalculate:xt(t,"supportsCalculate",!1),supportsTruncate:xt(t,"supportsTruncate",!1),supportsValidateSql:xt(t,"supportsValidateSql",!1),supportsAdd:n,supportsDelete:s,supportsEditing:i,supportsChangeTracking:a,supportsQuery:r.includes("query"),supportsQueryAttachments:xt(t.advancedQueryCapabilities,"supportsQueryAttachments",!1),supportsResizeAttachments:xt(t,"supportsAttachmentsResizing",!1),supportsSync:r.includes("sync"),supportsUpdate:o,supportsExceedsLimitStatistics:xt(t,"supportsExceedsLimitStatistics",!1)}}_readQueryCapabilities(e){var t;const r=e.advancedQueryCapabilities,i=e.ownershipBasedAccessControlForFeatures,n=e.archivingInfo,s=(t=this.url)==null?void 0:t.includes("MapServer"),o=!ge("mapserver-pbf-enabled")&&s&&this.version<10.81,a=(e.supportedQueryFormats||"").split(",").reduce((l,u)=>{const h=u.toLowerCase().trim();return h&&l.add(h),l},new Set);return{supportsStatistics:xt(r,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:xt(r,"supportsPercentileStatistics",!1),supportsCentroid:xt(r,"supportsReturningGeometryCentroid",!1),supportsDistance:xt(r,"supportsQueryWithDistance",!1),supportsDistinct:xt(r,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:xt(r,"supportsReturningQueryExtent",!1),supportsGeometryProperties:xt(r,"supportsReturningGeometryProperties",!1),supportsHavingClause:xt(r,"supportsHavingClause",!1),supportsOrderBy:xt(r,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:xt(r,"supportsPagination",!1),supportsQuantization:xt(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:xt(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:xt(e,"supportsReturningQueryGeometry",!1),supportsResultType:xt(r,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:xt(r,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:xt(r,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:xt(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:xt(r,"supportsTopFeaturesQuery",!1),supportsQueryByOthers:xt(i,"allowOthersToQuery",!0),supportsHistoricMoment:xt(n,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:!o&&a.has("pbf"),supportsDisjointSpatialRelationship:xt(r,"supportsDisjointSpatialRel",!1),supportsCacheHint:xt(r,"supportsQueryWithCacheHint",!1),maxRecordCountFactor:Dx(e,"maxRecordCountFactor",void 0),maxRecordCount:Dx(e,"maxRecordCount",void 0),standardMaxRecordCount:Dx(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:Dx(e,"tileMaxRecordCount",void 0)}}_readQueryRelatedCapabilities(e){const t=e.advancedQueryCapabilities,r=xt(t,"supportsAdvancedQueryRelated",!1);return{supportsPagination:xt(t,"supportsQueryRelatedPagination",!1),supportsCount:r,supportsOrderBy:r}}_readEditingCapabilities(e){const t=e.ownershipBasedAccessControlForFeatures;return{supportsGeometryUpdate:xt(e,"allowGeometryUpdates",!0),supportsGlobalId:xt(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:xt(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:xt(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:xt(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:xt(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:xt(t,"allowAnonymousToDelete",!0),supportsDeleteByOthers:xt(t,"allowOthersToDelete",!0),supportsUpdateByAnonymous:xt(t,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:xt(t,"allowOthersToUpdate",!0)}}};c([p({readOnly:!0,json:{read:!1}})],Ae.prototype,"capabilities",void 0),c([ye("service","capabilities",["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"])],Ae.prototype,"readCapabilities",null),c([p({json:{origins:{"portal-item":{write:!0},"web-map":{write:!0}}}})],Ae.prototype,"charts",void 0),c([p({readOnly:!0})],Ae.prototype,"createQueryVersion",null),c([p({type:String,json:{read:{source:"layerDefinition.copyrightText"},origins:{service:{read:{source:"copyrightText"}}}}})],Ae.prototype,"copyright",void 0),c([p({type:Boolean})],Ae.prototype,"datesInUnknownTimezone",void 0),c([p({type:String,json:{read:{source:"layerDefinition.displayField"},origins:{service:{read:{source:"displayField"}}}}})],Ae.prototype,"displayField",void 0),c([p({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],Ae.prototype,"definitionExpression",void 0),c([p({types:vm,readOnly:!0})],Ae.prototype,"defaultSymbol",void 0),c([p({type:ss})],Ae.prototype,"dynamicDataSource",void 0),c([p({readOnly:!0})],Ae.prototype,"editFieldsInfo",void 0),c([p({type:Boolean})],Ae.prototype,"editingEnabled",null),c([ye(["portal-item","web-scene"],"editingEnabled",["layerDefinition.capabilities"])],Ae.prototype,"readEditingEnabled",null),c([ye("web-map","editingEnabled",["capabilities","layerDefinition.capabilities"])],Ae.prototype,"readEditingEnabledFromWebMap",null),c([Se(["portal-item","web-scene"],"editingEnabled",{"layerDefinition.capabilities":{type:String}})],Ae.prototype,"writeEditingEnabled",null),c([Se("web-map","editingEnabled",{capabilities:{type:String},"layerDefinition.capabilities":{type:String}})],Ae.prototype,"writeEditingEnabledToWebMap",null),c([p({readOnly:!0})],Ae.prototype,"editingInfo",void 0),c([ye("editingInfo")],Ae.prototype,"readEditingInfo",null),c([p(N1e)],Ae.prototype,"elevationInfo",void 0),c([p(bbe)],Ae.prototype,"featureReduction",void 0),c([p({...V4.fields,json:{read:{source:"layerDefinition.fields"},origins:{service:{name:"fields"},"web-map":{write:{target:"layerDefinition.fields",overridePolicy:U4}}}}})],Ae.prototype,"fields",void 0),c([p(V4.fieldsIndex)],Ae.prototype,"fieldsIndex",void 0),c([p({type:ZY,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],Ae.prototype,"floorInfo",void 0),c([p({type:Zge,json:{name:"formInfo",write:!0,origins:{"web-scene":{read:!1,write:!1}}}})],Ae.prototype,"formTemplate",void 0),c([p({type:nt,json:{origins:{service:{read:{source:"extent"}}},read:{source:"layerDefinition.extent"}}})],Ae.prototype,"fullExtent",void 0),c([p()],Ae.prototype,"gdbVersion",void 0),c([p({readOnly:!0,type:Sbe,json:{read:{source:"geometryProperties"}}})],Ae.prototype,"geometryFieldsInfo",void 0),c([p({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:j4.read},"web-map":{write:{target:"layerDefinition.geometryType",overridePolicy:U4,writer(e,t,r){const i=e?j4.toJSON(e):null;i&&Ro(r,i,t)}}}},read:{source:"layerDefinition.geometryType",reader:j4.read}}})],Ae.prototype,"geometryType",void 0),c([p({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasM"}}})],Ae.prototype,"hasM",void 0),c([p({type:Boolean,json:{origins:{service:{read:!0}},read:{source:"layerDefinition.hasZ"}}})],Ae.prototype,"hasZ",void 0),c([p({readOnly:!0,type:c$})],Ae.prototype,"heightModelInfo",void 0),c([p({type:Date})],Ae.prototype,"historicMoment",void 0),c([p(FY)],Ae.prototype,"id",void 0),c([p({readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],Ae.prototype,"infoFor3D",void 0),c([p({readOnly:!0,json:{origins:{"web-map":{write:{target:"layerDefinition.type"}}}}})],Ae.prototype,"isTable",void 0),c([ye("service","isTable",["type","geometryType"]),ye("isTable",["layerDefinition.type","layerDefinition.geometryType"])],Ae.prototype,"readIsTable",null),c([Se("web-map","isTable")],Ae.prototype,"writeIsTable",null),c([p(DY)],Ae.prototype,"labelsVisible",void 0),c([p({type:[S$],json:{origins:{service:{read:{source:"drawingInfo.labelingInfo",reader:Q7},write:{target:"drawingInfo.labelingInfo",enabled:!1}}},read:{source:"layerDefinition.drawingInfo.labelingInfo",reader:Q7},write:{target:"layerDefinition.drawingInfo.labelingInfo"}}})],Ae.prototype,"labelingInfo",void 0),c([p(D1e)],Ae.prototype,"opacity",void 0),c([p({type:Number,json:{origins:{service:{read:{source:"id"}}},read:!1}})],Ae.prototype,"layerId",void 0),c([p(HN)],Ae.prototype,"legendEnabled",void 0),c([p({type:["show","hide"]})],Ae.prototype,"listMode",void 0),c([p(j1e)],Ae.prototype,"minScale",void 0),c([ye("service","minScale",["minScale","effectiveMinScale"])],Ae.prototype,"readMinScale",null),c([p(V1e)],Ae.prototype,"maxScale",void 0),c([ye("service","maxScale",["maxScale","effectiveMaxScale"])],Ae.prototype,"readMaxScale",null),c([p({type:String})],Ae.prototype,"globalIdField",void 0),c([ye("globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"]),ye("service","globalIdField",["globalIdField","fields"])],Ae.prototype,"readGlobalIdFieldFromService",null),c([p({type:String,json:{origins:{"web-map":{write:{target:"layerDefinition.objectIdField",overridePolicy:U4}}}}})],Ae.prototype,"objectIdField",void 0),c([ye("objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"]),ye("service","objectIdField",["objectIdField","fields"])],Ae.prototype,"readObjectIdFieldFromService",null),c([p({value:"ArcGISFeatureLayer",type:["ArcGISFeatureLayer"]})],Ae.prototype,"operationalLayerType",void 0),c([p(V4.outFields)],Ae.prototype,"outFields",void 0),c([p({readOnly:!0})],Ae.prototype,"parsedUrl",null),c([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],Ae.prototype,"path",void 0),c([p(_$)],Ae.prototype,"popupEnabled",void 0),c([p({type:fy,json:{name:"popupInfo",write:!0}})],Ae.prototype,"popupTemplate",void 0),c([p({readOnly:!0})],Ae.prototype,"defaultPopupTemplate",null),c([p({type:[Tbe],readOnly:!0})],Ae.prototype,"relationships",void 0),c([p({types:RN,json:{origins:{service:{write:{target:"drawingInfo.renderer",enabled:!1}},"web-scene":{types:KZ,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}},write:{target:"layerDefinition.drawingInfo.renderer",overridePolicy:(e,t,r)=>({ignoreOrigin:r?.writeLayerSchema})}}})],Ae.prototype,"renderer",null),c([ye("service","renderer",["drawingInfo.renderer","defaultSymbol"]),ye("renderer",["layerDefinition.drawingInfo.renderer","layerDefinition.defaultSymbol"])],Ae.prototype,"readRenderer",null),c([p()],Ae.prototype,"sourceJSON",void 0),c([p({type:Boolean})],Ae.prototype,"returnM",void 0),c([p({type:Boolean})],Ae.prototype,"returnZ",void 0),c([p(L1e)],Ae.prototype,"screenSizePerspectiveEnabled",void 0),c([p()],Ae.prototype,"source",null),c([Ct("source")],Ae.prototype,"castSource",null),c([ye("portal-item","source",["featureSet"]),ye("web-map","source",["featureSet"])],Ae.prototype,"readSource",null),c([p({readOnly:!0})],Ae.prototype,"serviceDefinitionExpression",void 0),c([ye("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],Ae.prototype,"readServiceDefinitionExpression",null),c([p({type:Fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:{source:"layerDefinition.extent.spatialReference"}}})],Ae.prototype,"spatialReference",void 0),c([p({type:Number})],Ae.prototype,"subtypeCode",void 0),c([p({type:[YN]})],Ae.prototype,"templates",void 0),c([ye("templates",["editFieldsInfo","creatorField","editorField","templates"])],Ae.prototype,"readTemplates",null),c([p({type:zY})],Ae.prototype,"timeInfo",void 0),c([p()],Ae.prototype,"title",void 0),c([ye("service","title",["name"]),ye("portal-item","title",["layerDefinition.title","layerDefinition.name","title"])],Ae.prototype,"readTitle",null),c([ye("web-map","title",["layerDefinition.name","title"])],Ae.prototype,"readTitleFromWebMap",null),c([p({type:String})],Ae.prototype,"sublayerTitleMode",void 0),c([p({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],Ae.prototype,"trackIdField",void 0),c([p({json:{read:!1}})],Ae.prototype,"type",void 0),c([p({type:String})],Ae.prototype,"typeIdField",void 0),c([ye("service","typeIdField"),ye("typeIdField",["layerDefinition.typeIdField"])],Ae.prototype,"readTypeIdField",null),c([p({type:[KN]})],Ae.prototype,"types",void 0),c([ye("service","types",["types"]),ye("types",["layerDefinition.types"])],Ae.prototype,"readTypes",null),c([p({readOnly:!0,json:{write:!1}})],Ae.prototype,"serverGens",void 0),c([p({type:Je.ofType(Gc),readOnly:!0})],Ae.prototype,"indexes",void 0),c([p(_2)],Ae.prototype,"url",null),c([Se("url")],Ae.prototype,"writeUrl",null),c([p({readOnly:!0})],Ae.prototype,"userIsAdmin",void 0),c([p({json:{origins:{service:{read:!0}},read:!1}})],Ae.prototype,"version",void 0),c([ye("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],Ae.prototype,"readVersion",null),c([p({type:Boolean,json:{origins:{"portal-item":{write:{target:"layerDefinition.defaultVisibility"}}}}})],Ae.prototype,"visible",void 0),c([ye("portal-item","visible",["visibility","layerDefinition.defaultVisibility"])],Ae.prototype,"readVisible",null),Ae=c([N("esri.layers.FeatureLayer")],Ae);const z4=Cv({types:SZ}),M$=Ae;var zbe=Object.freeze(Object.defineProperty({__proto__:null,default:M$},Symbol.toStringTag,{value:"Module"}));Te.getLogger("esri.core.support.OwningCollection");let xw=class extends ro(Je){constructor(e){super(e),this.handles.add([this.on("before-add",t=>{ce(t.item)&&t.preventDefault()}),this.on("after-add",t=>this._own(t.item)),this.on("after-remove",t=>this._release(t.item))])}get owner(){return this._get("owner")}set owner(e){e!==this._get("owner")&&(this._releaseAll(),this._set("owner",e),this._ownAll())}_ownAll(){for(const e of this.items)this._own(e)}_releaseAll(){for(const e of this.items)this._release(e)}_createNewInstance(e){return this.itemType?new(Je.ofType(this.itemType.Type))(e):new Je(e)}};function WO(e,t){return{type:e,cast:lW,set(r){const i=Rm(r,this._get(t),e);i.owner=this,this._set(t,i)}}}c([p()],xw.prototype,"owner",null),xw=c([N("esri.core.support.OwningCollection")],xw);let _m=class extends xw{_own(e){e.layer&&"remove"in e.layer&&e.layer!==this.owner&&e.layer.remove(e),e.layer=this.owner}_release(e){e.layer===this.owner&&(e.layer=null)}};c([FL({Type:xn,ensureType:br(xn)})],_m.prototype,"itemType",void 0),_m=c([N("esri.support.GraphicsCollection")],_m);let Ic=class extends by(wy(Sh)){constructor(e){super(e),this.elevationInfo=null,this.graphics=new _m,this.screenSizePerspectiveEnabled=!0,this.type="graphics",this.internal=!1}destroy(){this.removeAll(),this.graphics.destroy()}add(e){return this.graphics.add(e),this}addMany(e){return this.graphics.addMany(e),this}removeAll(){return this.graphics.removeAll(),this}remove(e){this.graphics.remove(e)}removeMany(e){this.graphics.removeMany(e)}on(e,t){return super.on(e,t)}graphicChanged(e){this.emit("graphic-update",e)}};c([p({type:NY})],Ic.prototype,"elevationInfo",void 0),c([p(WO(_m,"graphics"))],Ic.prototype,"graphics",void 0),c([p({type:["show","hide"]})],Ic.prototype,"listMode",void 0),c([p()],Ic.prototype,"screenSizePerspectiveEnabled",void 0),c([p({readOnly:!0})],Ic.prototype,"type",void 0),c([p({constructOnly:!0})],Ic.prototype,"internal",void 0),Ic=c([N("esri.layers.GraphicsLayer")],Ic);const Bbe=Ic;var JO;let qa=JO=class extends me{constructor(e){super(e),this.density=.8,this.lineColor=new Le([255,255,255,1]),this.lineLength=200,this.lineWidth=1.5,this.lineSpeed=10,this.fadeDuration=100,this.smoothing=0,this.type="animated-flow"}clone(){const{density:e,lineLength:t,lineWidth:r,lineSpeed:i,fadeDuration:n,smoothing:s}=this,o=this.lineColor.clone();return new JO({density:e,lineColor:o,lineLength:t,lineWidth:r,lineSpeed:i,fadeDuration:n,smoothing:s})}};c([p({type:Number,json:{write:!0}})],qa.prototype,"density",void 0),c([p({type:Le,json:{write:{allowNull:!0}}})],qa.prototype,"lineColor",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],qa.prototype,"lineLength",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],qa.prototype,"lineWidth",void 0),c([p({type:Number,json:{write:!0}})],qa.prototype,"lineSpeed",void 0),c([p({type:Number,json:{write:!0}})],qa.prototype,"fadeDuration",void 0),c([p({type:Number,cast:Ht,json:{write:!0}})],qa.prototype,"smoothing",void 0),c([tt({animatedFlow:"animated-flow"})],qa.prototype,"type",void 0),qa=JO=c([N("esri.renderers.AnimatedFlowRenderer")],qa);const KY=qa;let xg=class extends me{constructor(){super(...arguments),this.value=null,this.label=null,this.color=null}};c([p({type:Number,json:{write:!0}})],xg.prototype,"value",void 0),c([p({type:String,json:{write:!0}})],xg.prototype,"label",void 0),c([p({type:Le,json:{type:[jt],write:!0}})],xg.prototype,"color",void 0),xg=c([N("esri.renderers.support.ColormapInfo")],xg);const XY=xg;function Gbe(e){return"r"in e&&"g"in e&&"b"in e}function QY(e){return"h"in e&&"s"in e&&"v"in e}function eK(e){return"l"in e&&"a"in e&&"b"in e}function tK(e){return"l"in e&&"c"in e&&"h"in e}function qbe(e){return"x"in e&&"y"in e&&"z"in e}const Hbe=[[.4124,.3576,.1805],[.2126,.7152,.0722],[.0193,.1192,.9505]],Wbe=[[3.2406,-1.5372,-.4986],[-.9689,1.8758,.0415],[.0557,-.204,1.057]];function rK(e,t){const r=[];let i,n;if(e[0].length!==t.length)throw"dimensions do not match";const s=e.length,o=e[0].length;let a=0;for(i=0;i<s;i++){for(a=0,n=0;n<o;n++)a+=e[i][n]*t[n];r.push(a)}return r}function iK(e){const t=[e.r/255,e.g/255,e.b/255].map(i=>i<=.04045?i/12.92:((i+.055)/1.055)**2.4),r=rK(Hbe,t);return{x:100*r[0],y:100*r[1],z:100*r[2]}}function e6(e){const t=rK(Wbe,[e.x/100,e.y/100,e.z/100]).map(r=>{const i=r<=.0031308?12.92*r:1.055*r**.4166666666666667-.055;return Math.min(1,Math.max(i,0))});return{r:Math.round(255*t[0]),g:Math.round(255*t[1]),b:Math.round(255*t[2])}}function nK(e){const t=[e.x/95.047,e.y/100,e.z/108.883].map(r=>r>.008856451679035631?r**.3333333333333333:7.787037037037035*r+.13793103448275862);return{l:116*t[1]-16,a:500*(t[0]-t[1]),b:200*(t[1]-t[2])}}function sK(e){const t=e.l,r=[(t+16)/116+e.a/500,(t+16)/116,(t+16)/116-e.b/200].map(i=>i>6/29?i**3:3*(6/29)**2*(i-4/29));return{x:95.047*r[0],y:100*r[1],z:108.883*r[2]}}function Jbe(e){const t=e.l,r=e.a,i=e.b,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r);return s=s>0?s:s+2*Math.PI,{l:t,c:n,h:s}}function Zbe(e){const t=e.l,r=e.c,i=e.h;return{l:t,a:r*Math.cos(i),b:r*Math.sin(i)}}function Ybe(e){return nK(iK(e))}function Kbe(e){return e6(sK(e))}function Xbe(e){return Jbe(nK(iK(e)))}function Qbe(e){return e6(sK(Zbe(e)))}function ewe(e){const t=e.r,r=e.g,i=e.b,n=Math.max(t,r,i),s=n-Math.min(t,r,i);let o=n,a=s===0?0:n===t?(r-i)/s%6:n===r?(i-t)/s+2:(t-r)/s+4,l=s===0?0:s/o;return a<0&&(a+=6),a*=60,l*=100,o*=100/255,{h:a,s:l,v:o}}function twe(e){const t=(e.h+360)%360/60,r=e.s/100,i=e.v/100*255,n=i*r,s=n*(1-Math.abs(t%2-1));let o;switch(Math.floor(t)){case 0:o={r:n,g:s,b:0};break;case 1:o={r:s,g:n,b:0};break;case 2:o={r:0,g:n,b:s};break;case 3:o={r:0,g:s,b:n};break;case 4:o={r:s,g:0,b:n};break;case 5:case 6:o={r:n,g:0,b:s};break;default:o={r:0,g:0,b:0}}return o.r=Math.round(o.r+i-n),o.g=Math.round(o.g+i-n),o.b=Math.round(o.b+i-n),o}function I$(e){return Gbe(e)?e:tK(e)?Qbe(e):eK(e)?Kbe(e):qbe(e)?e6(e):QY(e)?twe(e):e}function rwe(e){return QY(e)?e:ewe(I$(e))}function aj(e){return eK(e)?e:Ybe(I$(e))}function xrt(e){return tK(e)?e:Xbe(I$(e))}const oK=[{id:"aspect_predefined",type:"multipart",colorRamps:[{fromColor:[190,190,190],toColor:[255,45,8]},{fromColor:[255,45,8],toColor:[255,181,61]},{fromColor:[255,181,61],toColor:[255,254,52]},{fromColor:[255,254,52],toColor:[0,251,50]},{fromColor:[0,251,50],toColor:[255,254,52]},{fromColor:[0,253,255],toColor:[0,181,255]},{fromColor:[0,181,255],toColor:[26,35,253]},{fromColor:[26,35,253],toColor:[255,57,251]},{fromColor:[255,57,251],toColor:[255,45,8]}]},{id:"blackToWhite_predefined",fromColor:[0,0,0],toColor:[255,255,255]},{id:"blueBright_predefined",fromColor:[204,204,255],toColor:[0,0,224]},{id:"blueLightToDark_predefined",fromColor:[211,229,232],toColor:[46,100,140]},{id:"blueGreenBright_predefined",fromColor:[203,245,234],toColor:[48,207,146]},{id:"blueGreenLightToDark_predefined",fromColor:[216,242,237],toColor:[21,79,74]},{id:"brownLightToDark_predefined",fromColor:[240,236,170],toColor:[102,72,48]},{id:"brownToBlueGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[156,85,31],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[33,130,145]}]},{id:"brownToBlueGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[110,70,45],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[48,100,102]}]},{id:"coefficientBias_predefined",fromColor:[214,214,255],toColor:[0,57,148]},{id:"coldToHotDiverging_predefined",type:"multipart",colorRamps:[{fromColor:[69,117,181],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[214,47,39]}]},{id:"conditionNumber_predefined",type:"multipart",colorRamps:[{fromColor:[0,97,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,34,0]}]},{id:"cyanToPurple_predefined",type:"multipart",colorRamps:[{fromColor:[0,245,245],toColor:[0,0,245]},{fromColor:[0,0,245],toColor:[245,0,245]}]},{id:"cyanLightToBlueDark_predefined",type:"multipart",colorRamps:[{fromColor:[182,237,240],toColor:[31,131,224]},{fromColor:[31,131,224],toColor:[9,9,145]}]},{id:"distance_predefined",fromColor:[255,200,0],toColor:[0,0,255]},{id:"elevation1_predefined",type:"multipart",colorRamps:[{fromColor:[175,240,233],toColor:[255,255,179]},{fromColor:[255,255,179],toColor:[0,128,64]},{fromColor:[0,128,64],toColor:[252,186,3]},{fromColor:[252,186,3],toColor:[128,0,0]},{fromColor:[120,0,0],toColor:[105,48,13]},{fromColor:[105,48,13],toColor:[171,171,171]},{fromColor:[171,171,171],toColor:[255,252,255]}]},{id:"elevation2_predefined",type:"multipart",colorRamps:[{fromColor:[118,219,211],toColor:[255,255,199]},{fromColor:[255,255,199],toColor:[255,255,128]},{fromColor:[255,255,128],toColor:[217,194,121]},{fromColor:[217,194,121],toColor:[135,96,38]},{fromColor:[135,96,38],toColor:[150,150,181]},{fromColor:[150,150,181],toColor:[181,150,181]},{fromColor:[181,150,181],toColor:[255,252,255]}]},{id:"errors_predefined",fromColor:[255,235,214],toColor:[196,10,10]},{id:"grayLightToDark_predefined",fromColor:[219,219,219],toColor:[69,69,69]},{id:"greenBright_predefined",fromColor:[204,255,204],toColor:[14,204,14]},{id:"greenLightToDark_predefined",fromColor:[220,245,233],toColor:[34,102,51]},{id:"greenToBlue_predefined",type:"multipart",colorRamps:[{fromColor:[32,204,16],toColor:[0,242,242]},{fromColor:[0,242,242],toColor:[2,33,227]}]},{id:"orangeBright_predefined",fromColor:[255,235,204],toColor:[240,118,5]},{id:"orangeLightToDark_predefined",fromColor:[250,233,212],toColor:[171,65,36]},{id:"partialSpectrum_predefined",type:"multipart",colorRamps:[{fromColor:[242,241,162],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]},{fromColor:[252,3,69],toColor:[176,7,237]},{fromColor:[176,7,237],toColor:[2,29,173]}]},{id:"partialSpectrum1Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[135,38,38],toColor:[240,149,12]},{fromColor:[240,149,12],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[74,80,181]},{fromColor:[74,80,181],toColor:[39,32,122]}]},{id:"partialSpectrum2Diverging_predefined",type:"multipart",colorRamps:[{fromColor:[115,77,42],toColor:[201,137,52]},{fromColor:[201,137,52],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[91,63,176]},{fromColor:[91,63,176],toColor:[81,13,97]}]},{id:"pinkToYellowGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[158,30,113],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[99,110,45]}]},{id:"pinkToYellowGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,47,73],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[22,59,15]}]},{id:"precipitation_predefined",type:"multipart",colorRamps:[{fromColor:[194,82,60],toColor:[237,161,19]},{fromColor:[237,161,19],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,219,0]},{fromColor:[0,219,0],toColor:[32,153,143]},{fromColor:[32,153,143],toColor:[11,44,122]}]},{id:"prediction_predefined",type:"multipart",colorRamps:[{fromColor:[40,146,199],toColor:[250,250,100]},{fromColor:[250,250,100],toColor:[232,16,20]}]},{id:"purpleBright_predefined",fromColor:[255,204,255],toColor:[199,0,199]},{id:"purpleToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[77,32,150],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[20,122,11]}]},{id:"purpleToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[67,14,89],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[24,79,15]}]},{id:"purpleBlueBright_predefined",fromColor:[223,184,230],toColor:[112,12,242]},{id:"purpleBlueLightToDark_predefined",fromColor:[229,213,242],toColor:[93,44,112]},{id:"purpleRedBright_predefined",fromColor:[255,204,225],toColor:[199,0,99]},{id:"purpleRedLightToDark_predefined",fromColor:[250,215,246],toColor:[143,17,57]},{id:"redBright_predefined",fromColor:[255,204,204],toColor:[219,0,0]},{id:"redLightToDark_predefined",fromColor:[255,224,224],toColor:[143,10,10]},{id:"redToBlueDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[196,69,57],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[48,95,207]}]},{id:"redToBlueDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[107,13,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[13,53,97]}]},{id:"redToGreen_predefined",type:"multipart",colorRamps:[{fromColor:[245,0,0],toColor:[245,245,0]},{fromColor:[245,245,0],toColor:[0,245,0]}]},{id:"redToGreenDivergingBright_predefined",type:"multipart",colorRamps:[{fromColor:[186,20,20],toColor:[255,255,191]},{fromColor:[255,255,191],toColor:[54,145,33]}]},{id:"redToGreenDivergingDark_predefined",type:"multipart",colorRamps:[{fromColor:[97,21,13],toColor:[204,204,102]},{fromColor:[204,204,102],toColor:[16,69,16]}]},{id:"slope_predefined",type:"multipart",colorRamps:[{fromColor:[56,168,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]},{id:"spectrumFullBright_predefined",type:"multipart",colorRamps:[{fromColor:[255,0,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,0,255]}]},{id:"spectrumFullDark_predefined",type:"multipart",colorRamps:[{fromColor:[153,0,0],toColor:[153,153,0]},{fromColor:[153,153,0],toColor:[0,153,153]},{fromColor:[0,153,153],toColor:[0,0,153]}]},{id:"spectrumFullLight_predefined",type:"multipart",colorRamps:[{fromColor:[255,153,153],toColor:[255,255,153]},{fromColor:[255,255,153],toColor:[153,255,255]},{fromColor:[153,255,255],toColor:[153,153,255]}]},{id:"surface_predefined",type:"multipart",colorRamps:[{fromColor:[112,153,89],toColor:[242,238,162]},{fromColor:[242,238,162],toColor:[242,206,133]},{fromColor:[242,206,133],toColor:[194,140,124]},{fromColor:[194,140,124],toColor:[255,242,255]}]},{id:"temperature_predefined",type:"multipart",colorRamps:[{fromColor:[255,252,255],toColor:[255,0,255]},{fromColor:[255,0,255],toColor:[0,0,255]},{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[0,255,0]},{fromColor:[0,255,0],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,128,0]},{fromColor:[255,128,0],toColor:[128,0,0]}]},{id:"whiteToBlack_predefined",fromColor:[255,255,255],toColor:[0,0,0]},{id:"yellowToDarkRed_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[242,167,46]},{fromColor:[242,167,46],toColor:[107,0,0]}]},{id:"yellowToGreenToDarkBlue_predefined",type:"multipart",colorRamps:[{fromColor:[255,255,128],toColor:[56,224,9]},{fromColor:[56,224,9],toColor:[26,147,171]},{fromColor:[26,147,171],toColor:[12,16,120]}]},{id:"yellowToRed_predefined",fromColor:[245,245,0],toColor:[255,0,0]},{id:"yellowGreenBright_predefined",fromColor:[236,252,204],toColor:[157,204,16]},{id:"yellowGreenLightToDark_predefined",fromColor:[215,240,175],toColor:[96,107,45]}],iwe={aspect_predefined:"Aspect",blackToWhite_predefined:"Black to White",blueBright_predefined:"Blue Bright",blueLightToDark_predefined:"Blue Light to Dark",blueGreenBright_predefined:"Blue-Green Bright",blueGreenLightToDark_predefined:"Blue-Green Light to Dark",brownLightToDark_predefined:"Brown Light to Dark",brownToBlueGreenDivergingBright_predefined:"Brown to Blue Green Diverging, Bright",brownToBlueGreenDivergingDark_predefined:"Brown to Blue Green Diverging, Dark",coefficientBias_predefined:"Coefficient Bias",coldToHotDiverging_predefined:"Cold to Hot Diverging",conditionNumber_predefined:"Condition Number",cyanToPurple_predefined:"Cyan to Purple",cyanLightToBlueDark_predefined:"Cyan-Light to Blue-Dark",distance_predefined:"Distance",elevation1_predefined:"Elevation #1",elevation2_predefined:"Elevation #2",errors_predefined:"Errors",grayLightToDark_predefined:"Gray Light to Dark",greenBright_predefined:"Green Bright",greenLightToDark_predefined:"Green Light to Dark",greenToBlue_predefined:"Green to Blue",orangeBright_predefined:"Orange Bright",orangeLightToDark_predefined:"Orange Light to Dark",partialSpectrum_predefined:"Partial Spectrum",partialSpectrum1Diverging_predefined:"Partial Spectrum 1 Diverging",partialSpectrum2Diverging_predefined:"Partial Spectrum 2 Diverging",pinkToYellowGreenDivergingBright_predefined:"Pink to YellowGreen Diverging, Bright",pinkToYellowGreenDivergingDark_predefined:"Pink to YellowGreen Diverging, Dark",precipitation_predefined:"Precipitation",prediction_predefined:"Prediction",purpleBright_predefined:"Purple Bright",purpleToGreenDivergingBright_predefined:"Purple to Green Diverging, Bright",purpleToGreenDivergingDark_predefined:"Purple to Green Diverging, Dark",purpleBlueBright_predefined:"Purple-Blue Bright",purpleBlueLightToDark_predefined:"Purple-Blue Light to Dark",purpleRedBright_predefined:"Purple-Red Bright",purpleRedLightToDark_predefined:"Purple-Red Light to Dark",redBright_predefined:"Red Bright",redLightToDark_predefined:"Red Light to Dark",redToBlueDivergingBright_predefined:"Red to Blue Diverging, Bright",redToBlueDivergingDark_predefined:"Red to Blue Diverging, Dark",redToGreen_predefined:"Red to Green",redToGreenDivergingBright_predefined:"Red to Green Diverging, Bright",redToGreenDivergingDark_predefined:"Red to Green Diverging, Dark",slope_predefined:"Slope",spectrumFullBright_predefined:"Spectrum-Full Bright",spectrumFullDark_predefined:"Spectrum-Full Dark",spectrumFullLight_predefined:"Spectrum-Full Light",surface_predefined:"Surface",temperature_predefined:"Temperature",whiteToBlack_predefined:"White to Black",yellowToDarkRed_predefined:"Yellow to Dark Red",yellowToGreenToDarkBlue_predefined:"Yellow to Green to Dark Blue",yellowToRed_predefined:"Yellow to Red",yellowGreenBright_predefined:"Yellow-Green Bright",yellowGreenLightToDark_predefined:"Yellow-Green Light to Dark"};function Fx(e,t){if(!e||!t||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]>t[r]+2||e[r]<t[r]-2)return!1;return!0}function nwe(e,t,r){const i=aj(e),n=aj(t),s={l:i.l*(1-r)+r*n.l,a:i.a*(1-r)+r*n.a,b:i.b*(1-r)+r*n.b};return I$(s)}function swe(e,t){if(!e)return;const r=t||oK;let i,n=null;return e.type==="algorithmic"?r.some(s=>{if(Fx(e.fromColor.toRgb(),s.fromColor)&&Fx(e.toColor.toRgb(),s.toColor))return n=s.id,!0}):e.type==="multipart"&&r.some(s=>{if(e.colorRamps&&s.colorRamps&&e.colorRamps.length===s.colorRamps.length&&(i=e.colorRamps,!s.colorRamps.some((o,a)=>{if(!Fx(i[a].fromColor.toRgb(),new Le(o.fromColor).toRgb())||!Fx(i[a].toColor.toRgb(),new Le(o.toColor).toRgb()))return!0}))){if(n)return!0;n=s.id}}),n}function owe(e){const t=swe(e);return t?iwe[t]:null}function Gm(e,t,r=!1){if(!e||!t||t<1)return;const i="toJSON"in e?e.toJSON():e,n=i.type==="multipart"?i.colorRamps.length:1,s=[],o=[];let a,l,u,h,d,f=0;if(t===1)return a=i.type==="multipart"?i.colorRamps[0].fromColor:i.fromColor,o.push([0].concat(a)),o;for(let m=0;m<n;m++)s[m]={start:null,end:null},s[m].start=f,s[m].end=f+1/n,f=s[m].end;for(let m=0;m<t;m++)h=m/(t-1),s.forEach((g,b)=>{if(h>=g.start&&(h<g.end||m===t-1&&b===n-1)){d=(h-g.start)/(g.end-g.start),i.type==="multipart"?(a=i.colorRamps[b].fromColor,l=i.colorRamps[b].toColor):(a=i.fromColor,l=i.toColor),m===0?o.push([m].concat(a.slice(0,3))):m===t-1?o.push([m].concat(l.slice(0,3))):(u=nwe({r:a[0],g:a[1],b:a[2]},{r:l[0],g:l[1],b:l[2]},d),o.push([m,u.r,u.g,u.b]));const w=a[3]!=null?a[3]>1?a[3]/255:a[3]:1,_=l[3]!=null?l[3]>1?l[3]/255:l[3]:1;r&&o[m].push(Math.min(255,Math.round(255*(w*(1-d)+_*d))))}});return o}var Fb;let jb=Fb=class extends me{constructor(e){super(e),this.colormapInfos=null,this.type="raster-colormap"}static createFromColormap(e,t){if(!e)return null;const r=e[0].length===5,i=[...e].sort(n=>n[0][0]-n[1][0]).map(n=>{var s;return XY.fromJSON({value:n[0],color:r?n.slice(1,5):n.slice(1,4).concat([255]),label:t?(s=t[n[0]])!=null?s:"":n[0]})});return new Fb({colormapInfos:i})}static createFromColorramp(e){const t=Gm(e,256);return Fb.createFromColormap(t)}clone(){return new Fb({colormapInfos:this.colormapInfos.map(e=>e.toJSON())})}extractColormap(){return this.colormapInfos.map(e=>[e.value,e.color.r,e.color.g,e.color.b,e.color.a>1?e.color.a:255*e.color.a&255]).sort((e,t)=>e[0]-t[0])}};c([p({type:[XY],json:{write:!0}})],jb.prototype,"colormapInfos",void 0),c([tt({rasterColormap:"raster-colormap"})],jb.prototype,"type",void 0),jb=Fb=c([N("esri.renderers.RasterColormapRenderer")],jb);const t6=jb;var ZO;let ho=ZO=class extends me{constructor(e){super(e),this.altitude=45,this.azimuth=315,this.colorRamp=null,this.hillshadeType="multi-directional",this.pixelSizePower=.664,this.pixelSizeFactor=.024,this.scalingType="none",this.type="raster-shaded-relief",this.zFactor=1}readColorRamp(e){return s$(e)}clone(){return new ZO({hillshadeType:this.hillshadeType,altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,scalingType:this.scalingType,pixelSizeFactor:this.pixelSizeFactor,pixelSizePower:this.pixelSizePower,colorRamp:ie(this.colorRamp)})}};c([p({type:Number,json:{write:!0}})],ho.prototype,"altitude",void 0),c([p({type:Number,json:{write:!0}})],ho.prototype,"azimuth",void 0),c([p({types:n$,json:{write:!0}})],ho.prototype,"colorRamp",void 0),c([ye("colorRamp")],ho.prototype,"readColorRamp",null),c([p({type:["traditional","multi-directional"],json:{write:!0}})],ho.prototype,"hillshadeType",void 0),c([p({type:Number,json:{write:!0}})],ho.prototype,"pixelSizePower",void 0),c([p({type:Number,json:{write:!0}})],ho.prototype,"pixelSizeFactor",void 0),c([p({type:["none","adjusted"],json:{write:!0}})],ho.prototype,"scalingType",void 0),c([tt({rasterShadedRelief:"raster-shaded-relief"})],ho.prototype,"type",void 0),c([p({type:Number,json:{write:!0}})],ho.prototype,"zFactor",void 0),ho=ZO=c([N("esri.renderers.RasterShadedReliefRenderer")],ho);const aK=ho,Sw=new lt({none:"none",standardDeviation:"standard-deviation",histogramEqualization:"histogram-equalization",minMax:"min-max",percentClip:"percent-clip",sigmoid:"sigmoid"}),awe={0:"none",3:"standardDeviation",4:"histogramEqualization",5:"minMax",6:"percentClip",9:"sigmoid"};var YO;let ci=YO=class extends me{constructor(e){super(e),this.colorRamp=null,this.computeGamma=!1,this.dynamicRangeAdjustment=!1,this.gamma=[],this.maxPercent=null,this.minPercent=null,this.numberOfStandardDeviations=null,this.outputMax=null,this.outputMin=null,this.sigmoidStrengthLevel=null,this.statistics=[],this.histograms=null,this.useGamma=!1,this.stretchType="none",this.type="raster-stretch"}readColorRamp(e){if(e)return s$(e)}writeStatistics(e,t,r){var i;(i=e)!=null&&i.length&&(Array.isArray(e[0])||(e=e.map(n=>[n.min,n.max,n.avg,n.stddev])),t[r]=e)}readStretchType(e,t){let r=t.stretchType;return typeof r=="number"&&(r=awe[r]),Sw.read(r)}clone(){return new YO({stretchType:this.stretchType,outputMin:this.outputMin,outputMax:this.outputMax,useGamma:this.useGamma,computeGamma:this.computeGamma,statistics:ie(this.statistics),gamma:ie(this.gamma),sigmoidStrengthLevel:this.sigmoidStrengthLevel,numberOfStandardDeviations:this.numberOfStandardDeviations,minPercent:this.minPercent,maxPercent:this.maxPercent,colorRamp:ie(this.colorRamp),histograms:ie(this.histograms),dynamicRangeAdjustment:this.dynamicRangeAdjustment})}};c([p({types:n$,json:{write:!0}})],ci.prototype,"colorRamp",void 0),c([ye("colorRamp")],ci.prototype,"readColorRamp",null),c([p({type:Boolean,json:{write:!0}})],ci.prototype,"computeGamma",void 0),c([p({type:Boolean,json:{write:{target:"dra"},read:{source:"dra"}}})],ci.prototype,"dynamicRangeAdjustment",void 0),c([p({type:[Number],json:{write:!0}})],ci.prototype,"gamma",void 0),c([p({type:Number,json:{write:!0}})],ci.prototype,"maxPercent",void 0),c([p({type:Number,json:{write:!0}})],ci.prototype,"minPercent",void 0),c([p({type:Number,json:{write:!0}})],ci.prototype,"numberOfStandardDeviations",void 0),c([p({type:Number,json:{read:{source:"max"},write:{target:"max"}}})],ci.prototype,"outputMax",void 0),c([p({type:Number,json:{read:{source:"min"},write:{target:"min"}}})],ci.prototype,"outputMin",void 0),c([p({type:Number,json:{write:!0}})],ci.prototype,"sigmoidStrengthLevel",void 0),c([p({json:{type:[[Number]],write:!0}})],ci.prototype,"statistics",void 0),c([p()],ci.prototype,"histograms",void 0),c([Se("statistics")],ci.prototype,"writeStatistics",null),c([p({type:Boolean,json:{write:!0}})],ci.prototype,"useGamma",void 0),c([p({type:Sw.apiValues,json:{type:Sw.jsonValues,write:Sw.write}})],ci.prototype,"stretchType",void 0),c([ye("stretchType",["stretchType"])],ci.prototype,"readStretchType",null),c([tt({rasterStretch:"raster-stretch"})],ci.prototype,"type",void 0),ci=YO=c([N("esri.renderers.RasterStretchRenderer")],ci);const r6=ci,Qg={102100:{maxX:20037508342788905e-9,minX:-20037508342788905e-9,plus180Line:new Vi({paths:[[[20037508342788905e-9,-20037508342788905e-9],[20037508342788905e-9,20037508342788905e-9]]],spatialReference:Fe.WebMercator}),minus180Line:new Vi({paths:[[[-20037508342788905e-9,-20037508342788905e-9],[-20037508342788905e-9,20037508342788905e-9]]],spatialReference:Fe.WebMercator})},4326:{maxX:180,minX:-180,plus180Line:new Vi({paths:[[[180,-180],[180,180]]],spatialReference:Fe.WGS84}),minus180Line:new Vi({paths:[[[-180,-180],[-180,180]]],spatialReference:Fe.WGS84})}};function em(e,t){return Math.ceil((e-t)/(2*t))}function lK(e,t){const r=Mw(e);for(const i of r)for(const n of i)n[0]+=t;return e}function Mw(e){return ym(e)?e.rings:e.paths}function Srt(e){const t=e?.isWebMercator?102100:4326;return[Qg[t].minX,Qg[t].maxX]}async function lwe(e,t,r,i){const n=typeof e=="string"?Kr(e):e,s=t[0].spatialReference,o={...i,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Oi(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Ee(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const d=Sr(h);return d.spatialReference=s,d})}}async function uwe(e,t,r){const i=typeof e=="string"?Kr(e):e,n=t[0].spatialReference,s=Oi(t[0]),o={...r,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(cwe(t))}};return hwe((await Ee(i.path+"/simplify",o)).data,s,n)}function cwe(e){return{geometryType:Oi(e[0]),geometries:e.map(t=>t.toJSON())}}function hwe(e,t,r){const i=EJ(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}const dwe=Te.getLogger("esri.geometry.support.normalizeUtils");function pwe(e){return e.type==="polygon"}function fwe(e){return e[0].type==="polygon"}function mwe(e){return e[0].type==="polyline"}function uK(e,t){if(!(e instanceof Vi||e instanceof _n)){const n="straightLineDensify: the input geometry is neither polyline nor polygon";throw dwe.error(n),new Z(n)}const r=Mw(e),i=[];for(const n of r){const s=[];i.push(s),s.push([n[0][0],n[0][1]]);for(let o=0;o<n.length-1;o++){const a=n[o][0],l=n[o][1],u=n[o+1][0],h=n[o+1][1],d=Math.sqrt((u-a)*(u-a)+(h-l)*(h-l)),f=(h-l)/d,m=(u-a)/d,g=d/t;if(g>1){for(let x=1;x<=g-1;x++){const I=x*t,S=m*I+a,T=f*I+l;s.push([S,T])}const b=(d+Math.floor(g-1)*t)/2,w=m*b+a,_=f*b+l;s.push([w,_])}s.push([u,h])}}return pwe(e)?new _n({rings:i,spatialReference:e.spatialReference}):new Vi({paths:i,spatialReference:e.spatialReference})}function lj(e,t,r){if(t){const i=uK(e,1e6);e=Zg(i,!0)}return r&&(e=lK(e,r)),e}function uj(e,t,r){if(Array.isArray(e)){const i=e[0];if(i>t){const n=em(i,t);e[0]=i+n*(-2*t)}else if(i<r){const n=em(i,r);e[0]=i+n*(-2*r)}}else{const i=e.x;if(i>t){const n=em(i,t);e=e.clone().offset(n*(-2*t),0)}else if(i<r){const n=em(i,r);e=e.clone().offset(n*(-2*r),0)}}return e}function ywe(e,t){let r=-1;for(let i=0;i<t.cutIndexes.length;i++){const n=t.cutIndexes[i],s=t.geometries[i],o=Mw(s);for(let a=0;a<o.length;a++){const l=o[a];l.some(u=>{if(u[0]<180)return!0;{let h=0;for(let f=0;f<l.length;f++){const m=l[f][0];h=m>h?m:h}h=Number(h.toFixed(9));const d=-360*em(h,180);for(let f=0;f<l.length;f++){const m=s.getPoint(a,f);s.setPoint(a,f,m.clone().offset(d,0))}return!0}})}if(n===r){if(fwe(e))for(const a of Mw(s))e[n]=e[n].addRing(a);else if(mwe(e))for(const a of Mw(s))e[n]=e[n].addPath(a)}else r=n,e[n]=s}return e}async function _y(e,t,r){var i;if(!Array.isArray(e))return _y([e],t);const n=(i=t?.url)!=null?i:Kt.geometryServiceUrl;let s,o,a,l,u,h,d,f,m=0;const g=[],b=[];for(const T of e)if(ce(T))b.push(T);else if(s||(s=T.spatialReference,o=Ao(s),a=s.isWebMercator,h=a?102100:4326,l=Qg[h].maxX,u=Qg[h].minX,d=Qg[h].plus180Line,f=Qg[h].minus180Line),o)if(T.type==="mesh")b.push(T);else if(T.type==="point")b.push(uj(T.clone(),l,u));else if(T.type==="multipoint"){const $=T.clone();$.points=$.points.map(E=>uj(E,l,u)),b.push($)}else if(T.type==="extent"){const $=T.clone()._normalize(!1,!1,o);b.push($.rings?new _n($):$)}else if(T.extent){const $=T.extent,E=em($.xmin,u)*(2*l);let C=E===0?T.clone():lK(T.clone(),E);$.offset(E,0),$.intersects(d)&&$.xmax!==l?(m=$.xmax>m?$.xmax:m,C=lj(C,a),g.push(C),b.push("cut")):$.intersects(f)&&$.xmin!==u?(m=$.xmax*(2*l)>m?$.xmax*(2*l):m,C=lj(C,a,360),g.push(C),b.push("cut")):b.push(C)}else b.push(T.clone());else b.push(T);let w=em(m,l),_=-90;const x=w,I=new Vi;for(;w>0;){const T=360*w-180;I.addPath([[T,_],[T,-1*_]]),_*=-1,w--}if(g.length>0&&x>0){const T=ywe(g,await lwe(n,g,I,r)),$=[],E=[];for(let R=0;R<b.length;R++){const D=b[R];if(D!=="cut")E.push(D);else{const F=T.shift(),z=e[R];U(z)&&z.type==="polygon"&&z.rings&&z.rings.length>1&&F.rings.length>=z.rings.length?($.push(F),E.push("simplify")):E.push(a?Jd(F):F)}}if(!$.length)return E;const C=await uwe(n,$,r),O=[];for(let R=0;R<E.length;R++){const D=E[R];D!=="simplify"?O.push(D):O.push(a?Jd(C.shift()):C.shift())}return O}const S=[];for(let T=0;T<b.length;T++){const $=b[T];if($!=="cut")S.push($);else{const E=g.shift();S.push(a===!0?Jd(E):E)}}return Promise.resolve(S)}function Mrt(e,t){const r=Ao(t);if(r){const[i,n]=r.valid,s=n-i;if(e<i)for(;e<i;)e+=s;if(e>n)for(;e>n;)e-=s}return e}var wf;const jy=Te.getLogger("esri.layers.support.PixelBlock");let ia=wf=class extends me{constructor(e){super(e),this.width=null,this.height=null,this.pixelType="f32",this.validPixelCount=null,this.mask=null,this.maskIsAlpha=!1,this.pixels=null,this.statistics=null}static createEmptyBand(e,t){return new(wf.getPixelArrayConstructor(e))(t)}static getPixelArrayConstructor(e){let t;switch(e){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;case"f32":case"c64":case"c128":case"unknown":t=Float32Array;break;case"f64":t=Float64Array}return t}castPixelType(e){if(!e)return"f32";let t=e.toLowerCase();return["u1","u2","u4"].indexOf(t)>-1?t="u8":["unknown","u8","s8","u16","s16","u32","s32","f32","f64"].indexOf(t)===-1&&(t="f32"),t}getPlaneCount(){return this.pixels&&this.pixels.length}addData(e){if(!e.pixels||e.pixels.length!==this.width*this.height)throw new Z("pixelblock:invalid-or-missing-pixels","add data requires valid pixels array that has same length defined by pixel block width * height");this.pixels||(this.pixels=[]),this.statistics||(this.statistics=[]),this.pixels.push(e.pixels),this.statistics.push(e.statistics||{minValue:null,maxValue:null})}getAsRGBA(){const e=new ArrayBuffer(this.width*this.height*4);switch(this.pixelType){case"s8":case"s16":case"u16":case"s32":case"u32":case"f32":case"f64":this._fillFromNon8Bit(e);break;default:this._fillFrom8Bit(e)}return new Uint8ClampedArray(e)}getAsRGBAFloat(){const e=new Float32Array(this.width*this.height*4);return this._fillFrom32Bit(e),e}updateStatistics(){this.statistics=this.pixels.map(r=>this._calculateBandStatistics(r,this.mask));const e=this.mask;let t=0;if(e)for(let r=0;r<e.length;r++)e[r]&&t++;else t=this.width*this.height;this.validPixelCount=t}clamp(e){if(!e||e==="f64"||e==="f32")return;let t;switch(e){case"u8":t=[0,255];break;case"u16":t=[0,65535];break;case"u32":t=[0,4294967295];break;case"s8":t=[-128,127];break;case"s16":t=[-32768,32767];break;case"s32":t=[-2147483648,2147483647];break;default:t=[-34e38,34e38]}const[r,i]=t,n=this.pixels,s=this.width*this.height,o=n.length;let a,l,u;const h=[];for(let d=0;d<o;d++){u=wf.createEmptyBand(e,s),a=n[d];for(let f=0;f<s;f++)l=a[f],u[f]=l>i?i:l<r?r:l;h.push(u)}this.pixels=h,this.pixelType=e}extractBands(e){if(ce(e)||e.length===0||this.pixels==null||this.pixels.length===0)return this;const t=this.pixels.length,r=e.some(n=>n>=this.pixels.length),i=t===e.length&&!e.some((n,s)=>n!==s);return r||i?this:new wf({pixelType:this.pixelType,width:this.width,height:this.height,mask:this.mask,validPixelCount:this.validPixelCount,maskIsAlpha:this.maskIsAlpha,pixels:e.map(n=>this.pixels[n]),statistics:this.statistics&&e.map(n=>this.statistics[n])})}clone(){const e=new wf({width:this.width,height:this.height,pixelType:this.pixelType,maskIsAlpha:this.maskIsAlpha,validPixelCount:this.validPixelCount});let t;this.mask&&(this.mask instanceof Uint8Array?e.mask=new Uint8Array(this.mask):e.mask=this.mask.slice(0));const r=wf.getPixelArrayConstructor(this.pixelType);if(this.pixels&&this.pixels.length>0){e.pixels=[];const i=this.pixels[0].slice;for(t=0;t<this.pixels.length;t++)e.pixels[t]=i?this.pixels[t].slice(0,this.pixels[t].length):new r(this.pixels[t])}if(this.statistics)for(e.statistics=[],t=0;t<this.statistics.length;t++)e.statistics[t]=ie(this.statistics[t]);return e}_fillFrom8Bit(e){const{mask:t,maskIsAlpha:r,pixels:i}=this;if(!e||!i||!i.length)return void jy.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");let n,s,o,a;n=s=o=i[0],i.length>=3?(s=i[1],o=i[2]):i.length===2&&(s=i[1]);const l=new Uint32Array(e),u=this.width*this.height;if(n.length===u)if(t&&t.length===u)if(r)for(a=0;a<u;a++)t[a]&&(l[a]=t[a]<<24|o[a]<<16|s[a]<<8|n[a]);else for(a=0;a<u;a++)t[a]&&(l[a]=255<<24|o[a]<<16|s[a]<<8|n[a]);else for(a=0;a<u;a++)l[a]=255<<24|o[a]<<16|s[a]<<8|n[a];else jy.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.")}_fillFromNon8Bit(e){const{pixels:t,mask:r,statistics:i}=this;if(!e||!t||!t.length)return void jy.error("getAsRGBA()","Unable to convert to RGBA. The input pixel block is empty.");const n=this.pixelType;let s=1,o=0,a=1;if(i&&i.length>0)o=i.map(b=>b.minValue).reduce((b,w)=>Math.min(b,w)),a=i.map(b=>b.maxValue-b.minValue).reduce((b,w)=>Math.max(b,w)),s=255/a;else{let b=255;n==="s8"?(o=-128,b=127):n==="u16"?b=65535:n==="s16"?(o=-32768,b=32767):n==="u32"?b=4294967295:n==="s32"?(o=-2147483648,b=2147483647):n==="f32"?(o=-34e38,b=34e38):n==="f64"&&(o=-Number.MAX_VALUE,b=Number.MAX_VALUE),s=255/(b-o)}const l=new Uint32Array(e),u=this.width*this.height;let h,d,f,m,g;if(h=d=f=t[0],h.length!==u)return jy.error("getAsRGBA()","Unable to convert to RGBA. The pixelblock is invalid.");if(t.length>=2)if(d=t[1],t.length>=3&&(f=t[2]),r&&r.length===u)for(m=0;m<u;m++)r[m]&&(l[m]=255<<24|(f[m]-o)*s<<16|(d[m]-o)*s<<8|(h[m]-o)*s);else for(m=0;m<u;m++)l[m]=255<<24|(f[m]-o)*s<<16|(d[m]-o)*s<<8|(h[m]-o)*s;else if(r&&r.length===u)for(m=0;m<u;m++)g=(h[m]-o)*s,r[m]&&(l[m]=255<<24|g<<16|g<<8|g);else for(m=0;m<u;m++)g=(h[m]-o)*s,l[m]=255<<24|g<<16|g<<8|g}_fillFrom32Bit(e){const{pixels:t,mask:r}=this;if(!e||!t||!t.length)return jy.error("getAsRGBAFloat()","Unable to convert to RGBA. The input pixel block is empty.");let i,n,s,o;i=n=s=t[0],t.length>=3?(n=t[1],s=t[2]):t.length===2&&(n=t[1]);const a=this.width*this.height;if(i.length!==a)return jy.error("getAsRGBAFloat()","Unable to convert to RGBA. The pixelblock is invalid.");let l=0;if(r&&r.length===a)for(o=0;o<a;o++)e[l++]=i[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1&r[o];else for(o=0;o<a;o++)e[l++]=i[o],e[l++]=n[o],e[l++]=s[o],e[l++]=1}_calculateBandStatistics(e,t){let r=1/0,i=-1/0;const n=e.length;let s,o=0;if(t)for(s=0;s<n;s++)t[s]&&(o=e[s],r=o<r?o:r,i=o>i?o:i);else for(s=0;s<n;s++)o=e[s],r=o<r?o:r,i=o>i?o:i;return{minValue:r,maxValue:i}}};c([p({json:{write:!0}})],ia.prototype,"width",void 0),c([p({json:{write:!0}})],ia.prototype,"height",void 0),c([p({json:{write:!0}})],ia.prototype,"pixelType",void 0),c([Ct("pixelType")],ia.prototype,"castPixelType",null),c([p({json:{write:!0}})],ia.prototype,"validPixelCount",void 0),c([p({json:{write:!0}})],ia.prototype,"mask",void 0),c([p({json:{write:!0}})],ia.prototype,"maskIsAlpha",void 0),c([p({json:{write:!0}})],ia.prototype,"pixels",void 0),c([p({json:{write:!0}})],ia.prototype,"statistics",void 0),ia=wf=c([N("esri.layers.support.PixelBlock")],ia);const qt=ia;function ai(e){return U(e)&&e.declaredClass==="esri.layers.support.PixelBlock"&&e.pixels&&e.pixels.length>0}function cj(e,t){if(t==null||!t.length||!ai(e))return e;const r=e.pixels.length;return t&&t.some(i=>i>=r)||r===1&&t.length===1&&t[0]===0?e:r!==t.length||t.some((i,n)=>i!==n)?new qt({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:t.map(i=>e.pixels[i]),statistics:e.statistics&&t.map(i=>e.statistics[i])}):e}function $1(e){if(!e)return;const t=e.colormap;if(!t||t.length===0)return;const r=t.sort((d,f)=>d[0]-f[0]);let i=0;r[0][0]<0&&(i=r[0][0]);const n=Math.max(256,r[r.length-1][0]-i+1),s=new Uint8Array(4*n),o=[];let a,l=0,u=0;const h=r[0].length===5;if(n>65536)return r.forEach(d=>{o[d[0]-i]=h?d.slice(1):d.slice(1).concat([255])}),{indexed2DColormap:o,offset:i,alphaSpecified:h};if(e.fillUnspecified)for(a=r[u],l=a[0]-i;l<n;l++)s[4*l]=a[1],s[4*l+1]=a[2],s[4*l+2]=a[3],s[4*l+3]=h?a[4]:255,l===a[0]-i&&(a=u===r.length-1?a:r[++u]);else for(l=0;l<r.length;l++)a=r[l],u=4*(a[0]-i),s[u]=a[1],s[u+1]=a[2],s[u+2]=a[3],s[u+3]=h?a[4]:255;return{indexedColormap:s,offset:i,alphaSpecified:h}}function B4(e,t){if(!ai(e)||!t&&(t.indexedColormap||t.indexed2DColormap))return e;const r=e.clone(),i=r.pixels;let n=r.mask;const s=r.width*r.height;if(i.length!==1)return e;const{indexedColormap:o,indexed2DColormap:a,offset:l,alphaSpecified:u}=t,h=o.length-1;let d=0;const f=i[0],m=new Uint8Array(f.length),g=new Uint8Array(f.length),b=new Uint8Array(f.length);let w,_=0;if(o)if(n)for(d=0;d<s;d++)n[d]&&(_=4*(f[d]-l),_<l||_>h?n[d]=0:(m[d]=o[_],g[d]=o[_+1],b[d]=o[_+2],n[d]=o[_+3]));else{for(n=new Uint8Array(s),d=0;d<s;d++)_=4*(f[d]-l),_<l||_>h?n[d]=0:(m[d]=o[_],g[d]=o[_+1],b[d]=o[_+2],n[d]=o[_+3]);r.mask=n}else if(n)for(d=0;d<s;d++)n[d]&&(w=a[f[d]],m[d]=w[0],g[d]=w[1],b[d]=w[2],n[d]=w[3]);else{for(n=new Uint8Array(s),d=0;d<s;d++)w=a[f[d]],m[d]=w[0],g[d]=w[1],b[d]=w[2],n[d]=w[3];r.mask=n}return r.pixels=[m,g,b],r.statistics=null,r.pixelType="u8",r.maskIsAlpha=u,r}function gwe(e){if(!ai(e))return null;e.statistics||e.updateStatistics();const{pixels:t,mask:r,pixelType:i,statistics:n}=e,s=e.width*e.height,o=t.length;let a,l,u,h,d;const f=[],m=[];let g,b,w,_,x,I,S,T,$,E;const C=256;for(h=0;h<o;h++){if(g=new Uint32Array(C),w=t[h],i==="u8")if(a=-.5,l=255.5,r)for(d=0;d<s;d++)r[d]&&g[w[d]]++;else for(d=0;d<s;d++)g[w[d]]++;else{if(a=n[h].minValue,l=n[h].maxValue,u=(l-a)/C,b=new Uint32Array(C+1),r)for(d=0;d<s;d++)r[d]&&b[Math.floor((w[d]-a)/u)]++;else for(d=0;d<s;d++)b[Math.floor((w[d]-a)/u)]++;for(d=0;d<255;d++)g[d]=b[d];g[255]=b[255]+b[256]}for(f.push({min:a,max:l,size:C,counts:g}),_=0,x=0,T=0,d=0;d<C;d++)_+=g[d],x+=d*g[d];for($=x/_,d=0;d<C;d++)T+=g[d]*(d-$)**2;E=Math.sqrt(T/(_-1)),u=(l-a)/C,I=($+.5)*u+a,S=E*u,m.push({min:a,max:l,avg:I,stddev:S})}return{statistics:m,histograms:f}}function Irt(e){const t=[];for(let r=0;r<e.length;r++){const{min:i,max:n,size:s,counts:o}=e[r];let a=0,l=0;for(let g=0;g<s;g++)a+=o[g],l+=g*o[g];const u=l/a;let h=0;for(let g=0;g<s;g++)h+=o[g]*(g-u)**2;const d=(n-i)/s,f=(u+.5)*d+i,m=Math.sqrt(h/(a-1))*d;t.push({min:i,max:n,avg:f,stddev:m})}return t}function hj(e){const{minCutOff:t,maxCutOff:r,gamma:i,pixelType:n}=e,s=e.outMin||0,o=e.outMax||255;if(["u8","u16","s8","s16"].indexOf(n)===-1)return null;const a=t.length;let l,u,h=0;n==="s8"?h=-127:n==="s16"&&(h=-32767);let d=256;["u16","s16"].indexOf(n)>-1&&(d=65536);const f=[],m=[],g=o-s;for(l=0;l<a;l++)m[l]=r[l]-t[l],f[l]=g/(r[l]-t[l]);const b=i&&i.length>=a,w=[];if(b)for(l=0;l<a;l++)i[l]>1?i[l]>2?w[l]=6.5+(i[l]-2)**2.5:w[l]=6.5+100*(2-i[l])**4:w[l]=1;let _;const x=[];let I,S,T;if(b)for(l=0;l<a;l++){for(T=[],u=0;u<d;u++)I=u+h,_=(I-t[l])/m[l],S=1,i[l]>1&&(S-=(1/g)**(_*w[l])),I<r[l]&&I>t[l]?T[u]=Math.floor(S*g*_**(1/i[l]))+s:I>=r[l]?T[u]=o:T[u]=s;x[l]=T}else for(l=0;l<a;l++){for(T=[],u=0;u<d;u++)I=u+h,I<=t[l]?T[u]=s:I>=r[l]?T[u]=o:T[u]=Math.floor((I-t[l])/m[l]*g)+s;x[l]=T}if(e.contrastOffset!=null){const $=vwe(e.contrastOffset,e.brightnessOffset);for(l=0;l<a;l++)for(T=x[l],u=0;u<d;u++)T[u]=$[T[u]]}return{lut:x,offset:h}}function vwe(e,t){const r=Math.min(Math.max(e,-100),100),i=Math.min(Math.max(t,-100),100),n=255,s=128;let o,a;const l=new Uint8Array(256);for(o=0;o<256;o++)r>0&&r<100?a=(200*o-100*n+2*n*i)/(2*(100-r))+s:r<=0&&r>-100?a=(200*o-100*n+2*n*i)*(100+r)/2e4+s:r===100?(a=200*o-100*n+(n+1)*(100-r)+2*n*i,a=a>0?n:0):r===-100&&(a=s),l[o]=a>n?n:a<0?0:a;return l}function dj(e,t=256){t=Math.min(t,256);const{size:r,counts:i}=e,n=new Uint8Array(r),s=i.reduce((h,d)=>h+d/t,0);let o=0,a=0,l=0,u=s;for(let h=0;h<r;h++)if(l+=i[h],!(h<r-1&&l+i[h+1]<u)){for(;o<t-1&&u<l;)o++,u+=s;for(let d=a;d<=h;d++)n[d]=o;a=h+1}for(let h=a;h<r;h++)n[h]=t-1;return n}function G4(e,t){if(!ai(e))return null;const r=e.clone(),{pixels:i,mask:n}=r,{minCutOff:s,maxCutOff:o,gamma:a}=t,l=t.outMin||0,u=t.outMax||255,h=r.width*r.height,d=i.length;let f,m,g,b,w;const _=u-l,x=[],I=[];for(f=0;f<d;f++)I[f]=o[f]-s[f],x[f]=_/(o[f]-s[f]);const S=a&&a.length>=d,T=[];if(S)for(f=0;f<d;f++)a[f]>1?a[f]>2?T[f]=6.5+(a[f]-2)**2.5:T[f]=6.5+100*(2-a[f])**4:T[f]=1;if(S)if(n!=null){for(m=0;m<h;m++)if(n[m])for(f=0;f<d;f++)g=i[f][m],w=(g-s[f])/I[f],b=1,a[f]>1&&(b-=(1/_)**(w*T[f])),g<o[f]&&g>s[f]?i[f][m]=Math.floor(b*_*w**(1/a[f]))+l:g>=o[f]?i[f][m]=u:i[f][m]=l}else for(m=0;m<h;m++)for(f=0;f<d;f++)g=i[f][m],w=(g-s[f])/I[f],b=1,a[f]>1&&(b-=(1/_)**(w*T[f])),g<o[f]&&g>s[f]?i[f][m]=Math.floor(b*_*w**(1/a[f]))+l:g>=o[f]?i[f][m]=u:i[f][m]=l;else if(n!=null){for(m=0;m<h;m++)if(n[m])for(f=0;f<d;f++)g=i[f][m],g<o[f]&&g>s[f]?i[f][m]=Math.floor((g-s[f])/I[f]*_)+l:g>=o[f]?i[f][m]=u:i[f][m]=l}else for(m=0;m<h;m++)for(f=0;f<d;f++)g=i[f][m],g<o[f]&&g>s[f]?i[f][m]=Math.floor((g-s[f])/I[f]*_)+l:g>=o[f]?i[f][m]=u:i[f][m]=l;return r.pixelType="u8",r.updateStatistics(),r}function pj(e,t){if(!ai(e))return null;const{pixels:r,mask:i}=e,n=e.width*e.height,s=r.length;let o=t.lut;const{offset:a}=t;let l,u;o&&o[0].length===1&&(o=r.map(()=>o));const h=[];let d,f,m;if(a)if(i==null)for(l=0;l<s;l++){for(d=r[l],f=o[l],m=new Uint8Array(n),u=0;u<n;u++)m[u]=f[d[u]-a];h.push(m)}else for(l=0;l<s;l++){for(d=r[l],f=o[l],m=new Uint8Array(n),u=0;u<n;u++)i[u]&&(m[u]=f[d[u]-a]);h.push(m)}else if(i==null)for(l=0;l<s;l++){for(d=r[l],f=o[l],m=new Uint8Array(n),u=0;u<n;u++)m[u]=f[d[u]];h.push(m)}else for(l=0;l<s;l++){for(d=r[l],f=o[l],m=new Uint8Array(n),u=0;u<n;u++)i[u]&&(m[u]=f[d[u]]);h.push(m)}const g=new qt({width:e.width,height:e.height,pixels:h,mask:i,pixelType:"u8"});return g.updateStatistics(),g}function bwe(e,t){if(!ai(e))return null;const r=e.clone(),{pixels:i}=r,n=r.width*r.height,s=t.length,o=Math.floor(s/2),a=t[Math.floor(o)],l=i[0];let u,h,d,f,m,g,b=!1;const w=new Uint8Array(n),_=new Uint8Array(n),x=new Uint8Array(n);let I=r.mask;const S=t[0].mappedColor.length===4;for(I||(I=new Uint8Array(n),I.fill(S?255:1),r.mask=I),m=0;m<n;m++)if(I[m]){for(u=l[m],b=!1,g=o,h=a,d=0,f=s-1;f-d>1;){if(u===h.value){b=!0;break}u>h.value?d=g:f=g,g=Math.floor((d+f)/2),h=t[Math.floor(g)]}b||(u===t[d].value?(h=t[d],b=!0):u===t[f].value?(h=t[f],b=!0):u<t[d].value?(b=!1,h=null):u>t[d].value&&(u<t[f].value?(h=t[d],b=!0):f===s-1?(b=!1,h=null):(h=t[f],b=!0))),b?(w[m]=h.mappedColor[0],_[m]=h.mappedColor[1],x[m]=h.mappedColor[2],I[m]=h.mappedColor[3]):w[m]=_[m]=x[m]=I[m]=0}return r.pixels=[w,_,x],r.mask=I,r.pixelType="u8",r.maskIsAlpha=S,r}function wwe(e,t,r,i,n,s,o,a){return{xmin:n<=r*e?0:n<r*e+e?n-r*e:e,ymin:s<=i*t?0:s<i*t+t?s-i*t:t,xmax:n+o<=r*e?0:n+o<r*e+e?n+o-r*e:e,ymax:s+a<=i*t?0:s+a<i*t+t?s+a-i*t:t}}function Trt(e,t){if(!e||e.length===0)return null;const r=e.filter(g=>g.pixelBlock)[0];if(!r||ce(r.pixelBlock))return null;const i=(r.extent.xmax-r.extent.xmin)/r.pixelBlock.width,n=(r.extent.ymax-r.extent.ymin)/r.pixelBlock.height,s=.01*Math.min(i,n),o=e.sort((g,b)=>Math.abs(g.extent.ymax-b.extent.ymax)>s?b.extent.ymax-g.extent.ymax:Math.abs(g.extent.xmin-b.extent.xmin)>s?g.extent.xmin-b.extent.xmin:0),a=Math.min.apply(null,o.map(g=>g.extent.xmin)),l=Math.min.apply(null,o.map(g=>g.extent.ymin)),u=Math.max.apply(null,o.map(g=>g.extent.xmax)),h=Math.max.apply(null,o.map(g=>g.extent.ymax)),d={x:Math.round((t.xmin-a)/i),y:Math.round((h-t.ymax)/n)},f={width:Math.round((u-a)/i),height:Math.round((h-l)/n)},m={width:Math.round((t.xmax-t.xmin)/i),height:Math.round((t.ymax-t.ymin)/n)};return Math.round(f.width/r.pixelBlock.width)*Math.round(f.height/r.pixelBlock.height)!==o.length||d.x<0||d.y<0||f.width<m.width||f.height<m.height?null:{extent:t,pixelBlock:_we(o.map(g=>g.pixelBlock),f,{clipOffset:d,clipSize:m})}}function fj(e,t,r,i,n,s){const{width:o,height:a}=r.block,{x:l,y:u}=r.offset,{width:h,height:d}=r.mosaic,f=wwe(o,a,i,n,l,u,h,d);let m=0,g=0;if(s){const b=s.hasGCSSShiftTransform?360:s.halfWorldWidth,w=o*s.resolutionX,_=s.startX+i*w,x=_+w;_<b&&x>b?g=s.rightPadding:_>=b&&(m=s.leftMargin-s.rightPadding,g=0)}if(f.xmax-=g,typeof t!="number")for(let b=f.ymin;b<f.ymax;b++){const w=(n*a+b-u)*h+(i*o-l)+m,_=b*o;for(let x=f.xmin;x<f.xmax;x++)e[w+x]=t[_+x]}else for(let b=f.ymin;b<f.ymax;b++){const w=(n*a+b-u)*h+(i*o-l)+m;for(let _=f.xmin;_<f.xmax;_++)e[w+_]=t}}function _we(e,t,r={}){const{clipOffset:i,clipSize:n,alignmentInfo:s,blockWidths:o}=r;if(o)return xwe(e,t,{blockWidths:o});const a=e.filter(E=>ai(E))[0];if(ce(a))return null;const l=n?n.width:t.width,u=n?n.height:t.height,h=a.width,d=a.height,f=t.width/h,m=t.height/d,g={offset:i||{x:0,y:0},mosaic:n||t,block:{width:h,height:d}},b=a.pixelType,w=qt.getPixelArrayConstructor(b),_=a.pixels.length,x=[];let I,S;for(let E=0;E<_;E++){S=new w(l*u);for(let C=0;C<m;C++)for(let O=0;O<f;O++){const R=e[C*f+O];ai(R)&&(I=R.pixels[E],fj(S,I,g,O,C,s))}x.push(S)}let T;if(e.some(E=>ce(E)||E.mask&&E.mask.length>0)){T=new Uint8Array(l*u);for(let E=0;E<m;E++)for(let C=0;C<f;C++){const O=e[E*f+C],R=U(O)?O.mask:null;fj(T,R||(O?1:0),g,C,E,s)}}const $=new qt({width:l,height:u,pixels:x,pixelType:b,mask:T});return $.updateStatistics(),$}function xwe(e,t,r){const i=e.find(m=>U(m));if(!U(i))return null;const n=e.some(m=>!U(m)||!!m.mask),{width:s,height:o}=t,a=n?new Uint8Array(s*o):null,{blockWidths:l}=r,u=[],h=i.getPlaneCount(),d=qt.getPixelArrayConstructor(i.pixelType);if(n)for(let m=0,g=0;m<e.length;g+=l[m],m++){const b=e[m];if(!ai(b))continue;const w=b.mask;for(let _=0;_<o;_++)for(let x=0;x<l[m];x++)a[_*s+x+g]=w==null?255:w[_*b.width+x]}for(let m=0;m<h;m++){const g=new d(s*o);for(let b=0,w=0;b<e.length;w+=l[b],b++){const _=e[b];if(!ai(_))continue;const x=_.pixels[m];if(x!=null)for(let I=0;I<o;I++)for(let S=0;S<l[b];S++)g[I*s+S+w]=x[I*_.width+S]}u.push(g)}const f=new qt({width:s,height:o,mask:a,pixels:u,pixelType:i.pixelType});return f.updateStatistics(),f}function $rt(e,t,r){if(!ai(e))return null;const{width:i,height:n}=e,s=t.x,o=t.y,a=r.width+s,l=r.height+o;if(s<0||o<0||a>i||l>n||s===0&&o===0&&a===i&&l===n)return e;e.mask||(e.mask=new Uint8Array(i*n));const u=e.mask;for(let h=0;h<n;h++){const d=h*i;for(let f=0;f<i;f++)u[d+f]=h<o||h>=l||f<s||f>=a?0:1}return e.updateStatistics(),e}function Swe(e){if(!ai(e))return null;const t=e.clone(),{width:r,height:i,pixels:n,mask:s}=e,o=n[0],a=t.pixels[0];for(let l=2;l<i-1;l++){const u=new Map;for(let d=l-2;d<l+2;d++)for(let f=0;f<4;f++){const m=d*r+f;E1(u,o[m],s?s[m]:1)}a[l*r]=mj(u),a[l*r+1]=a[l*r+2]=a[l*r];let h=3;for(;h<r-1;h++){let d=(l-2)*r+h+1;E1(u,o[d],s?s[d]:1),d=(l-1)*r+h+1,E1(u,o[d],s?s[d]:1),d=l*r+h+1,E1(u,o[d],s?s[d]:1),d=(l+1)*r+h+1,E1(u,o[d],s?s[d]:1),d=(l-2)*r+h-3,jx(u,o[d],s?s[d]:1),d=(l-1)*r+h-3,jx(u,o[d],s?s[d]:1),d=l*r+h-3,jx(u,o[d],s?s[d]:1),d=(l+1)*r+h-3,jx(u,o[d],s?s[d]:1),a[l*r+h]=mj(u)}a[l*r+h+1]=a[l*r+h]}for(let l=0;l<r;l++)a[l]=a[r+l]=a[2*r+l],a[(i-1)*r+l]=a[(i-2)*r+l];return t.updateStatistics(),t}function mj(e){if(e.size===0)return 0;let t=0,r=-1,i=0;const n=e.keys();let s=n.next();for(;!s.done;)i=e.get(s.value),i>t&&(r=s.value,t=i),s=n.next();return r}function jx(e,t,r){if(r===0)return;const i=e.get(t);i===1?e.delete(t):e.set(t,i-1)}function E1(e,t,r){r!==0&&e.set(t,e.has(t)?e.get(t)+1:1)}function Mwe(e,t,r){let{x:i,y:n}=t;const{width:s,height:o}=r;if(i===0&&n===0&&o===e.height&&s===e.width)return e;const{width:a,height:l}=e,u=Math.max(0,n),h=Math.max(0,i),d=Math.min(i+s,a),f=Math.min(n+o,l);if(d<0||f<0||!ai(e))return null;i=Math.max(0,-i),n=Math.max(0,-n);const{pixels:m,mask:g}=e,b=s*o,w=m.length,_=[];for(let S=0;S<w;S++){const T=m[S],$=qt.createEmptyBand(e.pixelType,b);for(let E=u;E<f;E++){const C=E*a;let O=(E+n-u)*s+i;for(let R=h;R<d;R++)$[O++]=T[C+R]}_.push($)}const x=new Uint8Array(b);for(let S=u;S<f;S++){const T=S*a;let $=(S+n-u)*s+i;for(let E=h;E<d;E++)x[$++]=g?g[T+E]:1}const I=new qt({width:r.width,height:r.height,pixelType:e.pixelType,pixels:_,mask:x});return I.updateStatistics(),I}function Iwe(e,t=!0){if(!ai(e))return null;const{pixels:r,width:i,height:n,mask:s,pixelType:o}=e,a=[],l=Math.round(i/2),u=Math.round(n/2),h=n-1,d=i-1;for(let m=0;m<r.length;m++){const g=r[m],b=qt.createEmptyBand(o,l*u);let w=0;for(let _=0;_<n;_+=2)for(let x=0;x<i;x+=2){const I=g[_*i+x];if(t){const S=x===d?I:g[_*i+x+1],T=_===h?I:g[_*i+x+i],$=x===d?T:_===h?S:g[_*i+x+i+1];b[w++]=(I+S+T+$)/4}else b[w++]=I}a.push(b)}let f=null;if(s){f=new Uint8Array(l*u);let m=0;for(let g=0;g<n;g+=2)for(let b=0;b<i;b+=2){const w=s[g*i+b];if(t){const _=b===d?w:s[g*i+b+1],x=g===h?w:s[g*i+b+i],I=b===d?x:g===h?_:s[g*i+b+i+1];f[m++]=w*_*x*I?1:0}else f[m++]=w}}return new qt({width:l,height:u,pixelType:o,pixels:a,mask:f})}function Ert(e,t,r){if(!ai(e))return null;const{width:i,height:n}=t;let{width:s,height:o}=e;const a=new Map,l={x:0,y:0},u=r==null?1:1+r;let h=e;for(let d=0;d<u;d++){const f=Math.ceil(s/i),m=Math.ceil(o/n);for(let g=0;g<m;g++){l.y=g*n;for(let b=0;b<f;b++){l.x=b*i;const w=Mwe(h,l,t);a.set(`${d}/${g}/${b}`,w)}}d<u-1&&(h=Iwe(h)),s=Math.round(s/2),o=Math.round(o/2)}return a}function Art(e,t,r,i,n="nearest"){if(!ai(e))return null;n==="majority"&&(e=Swe(e));const{pixels:s,mask:o,pixelType:a}=e,l=e.width,u=e.height,h=qt.getPixelArrayConstructor(a),d=s.length,{width:f,height:m}=t,g=i.cols,b=i.rows,w=Math.ceil(f/g-.1/g),_=Math.ceil(m/b-.1/b);let x,I,S,T,$,E,C,O=!1;for(let re=0;re<r.length;re+=3)r[re]===-1&&r[re+1]===-1&&r[re+2]===-1&&(O=!0);const R=w*g,D=R*_*b,F=new Float32Array(D),z=new Float32Array(D);let B,y,M=0;const A=n==="majority"?0:.5;for(let re=0;re<_;re++)for(let we=0;we<w;we++){x=12*(re*w+we),I=r[x],S=r[x+1],T=r[x+2],$=r[x+3],E=r[x+4],C=r[x+5];for(let _e=0;_e<b;_e++){M=(re*b+_e)*R+we*g,y=(_e+.5)/b;for(let Ce=0;Ce<_e;Ce++)B=(Ce+.5)/g,F[M+Ce]=Math.round((I*B+S*y+T)*l-A),z[M+Ce]=Math.round(($*B+E*y+C)*u-A)}x+=6,I=r[x],S=r[x+1],T=r[x+2],$=r[x+3],E=r[x+4],C=r[x+5];for(let _e=0;_e<b;_e++){M=(re*b+_e)*R+we*g,y=(_e+.5)/b;for(let Ce=_e;Ce<g;Ce++)B=(Ce+.5)/g,F[M+Ce]=Math.round((I*B+S*y+T)*l-A),z[M+Ce]=Math.round(($*B+E*y+C)*u-A)}}const P=(re,we)=>{for(let _e=0;_e<m;_e++){x=_e*R;for(let Ce=0;Ce<f;Ce++)F[x]<0||z[x]<0?re[_e*f+Ce]=0:re[_e*f+Ce]=we[F[x]+z[x]*l],x++}},Y=[];let Q;for(let re=0;re<d;re++)Q=new h(f*m),P(Q,s[re]),Y.push(Q);const le=new qt({width:f,height:m,pixelType:a,pixels:Y});if(o)le.mask=new Uint8Array(f*m),P(le.mask,o);else if(O){le.mask=new Uint8Array(f*m);for(let re=0;re<f*m;re++)le.mask[re]=F[re]<0||z[re]<0?0:1}return le.updateStatistics(),le}const zf=new Map;zf.set("meter-per-second",1),zf.set("kilometer-per-hour",.277778),zf.set("knots",.514444),zf.set("feet-per-second",.3048),zf.set("mile-per-hour",.44704);const KO=180/Math.PI,i6=5,ca=new lt({esriMetersPerSecond:"meter-per-second",esriKilometersPerHour:"kilometer-per-hour",esriKnots:"knots",esriFeetPerSecond:"feet-per-second",esriMilesPerHour:"mile-per-hour"});function n6(e,t){return zf.get(e)/zf.get(t)||1}function cK(e){return(450-e)%360}function s6(e,t="geographic"){const[r,i]=e,n=Math.sqrt(r*r+i*i);let s=Math.atan2(i,r)*KO;return s=(360+s)%360,t==="geographic"&&(s=cK(s)),[n,s]}function hK(e,t="geographic"){let r=e[1];t==="geographic"&&(r=cK(r)),r%=360;const i=e[0];return[i*Math.cos(r/KO),i*Math.sin(r/KO)]}function Twe(e,t,r="geographic",i=1){if(!ai(e))return e;const{pixels:n,width:s,height:o}=e,a=s*o,l=n[0],u=n[1],h=qt.createEmptyBand(e.pixelType,a),d=qt.createEmptyBand(e.pixelType,a);let f=0;for(let g=0;g<o;g++)for(let b=0;b<s;b++)t==="vector-uv"?([h[f],d[f]]=s6([l[f],u[f]],r),h[f]*=i):([h[f],d[f]]=hK([l[f],u[f]],r),h[f]*=i,d[f]*=i),f++;const m=new qt({pixelType:e.pixelType,width:e.width,height:e.height,mask:e.mask,validPixelCount:e.validPixelCount,maskIsAlpha:e.maskIsAlpha,pixels:[h,d]});return m.updateStatistics(),m}function $we(e,t,r=1){if(r===1||!ai(e))return e;const i=e.clone(),{pixels:n,width:s,height:o}=i,a=n[0],l=n[1];let u=0;for(let h=0;h<o;h++)for(let d=0;d<s;d++)t==="vector-uv"?(a[u]*=r,l[u]*=r):a[u]*=r,u++;return i.updateStatistics(),i}function Crt(e,t,r,i,n){if(!U(n)||!n.spatialReference.equals(e.spatialReference))return{extent:e,width:t,height:r,resolution:e.width/t};const s=n.xmin,o=n.ymax;i=Math.max(i||0,30);const a=Math.ceil(t*(1/i)),l=Math.ceil(r*(1/i)),u=((e.xmax-e.xmin)/a+(e.ymax-e.ymin)/l)/2;return e.xmin=s+Math.floor((e.xmin-s)/u)*u,e.xmax=s+Math.ceil((e.xmax-s)/u)*u,e.ymin=o+Math.floor((e.ymin-o)/u)*u,e.ymax=o+Math.ceil((e.ymax-o)/u)*u,{extent:e,width:Math.round(e.width/u),height:Math.round(e.height/u),resolution:u}}const q4=Ewe(0,0,0);function Ewe(e=0,t=0,r=Math.PI,i=!0){i&&(r=(2*Math.PI-r)%(2*Math.PI));const n=i?-1:1,s=13*n,o=-7*n,a=-2*n,l=-16*n,u=29,[h,d]=yn(0,t+s,r,u),[f,m]=yn(e-5.5,t+o,r,u),[g,b]=yn(e+5.5,t+o,r,u),[w,_]=yn(e-1.5,t+a,r,u),[x,I]=yn(e+1.5,t+a,r,u),[S,T]=yn(e-1.5,t+l,r,u),[$,E]=yn(e+1.5,t+l,r,u);return[h,d,f,m,w,_,x,I,g,b,S,T,$,E]}function Awe(e=0,t=Math.PI,r=!0){r&&(t=(2*Math.PI-t)%(2*Math.PI));const i=10,n=r?-1:1,s=5*n,o=20*n,a=25*n,l=45,u=0,h=0,d=2,f=0,m=d*n;let[g,b]=[u+i/2,h-o],[w,_]=[g+d,b],[x,I]=[w-f,_+m],[S,T]=[u-i/2,h-a],[$,E]=[S+f,T-m],C=Math.ceil(e/i6),O=Math.floor(C/10);C-=8*O;const R=[],D=[];for(let le=0;le<C/2;le++,O--){O<=0&&C%2==1&&le===(C-1)/2&&(S=u,$=S+f,T=(T+b)/2,E=T-m);const[re,we]=yn(S,T,t,l);if(O>0){const[_e,Ce]=yn(w,T,t,l),[Ne,ht]=yn(g,b,t,l);R.push(_e),R.push(Ce),R.push(re),R.push(we),R.push(Ne),R.push(ht)}else{const[_e,Ce]=yn(w,_,t,l),[Ne,ht]=yn(x,I,t,l),[st,pt]=yn($,E,t,l);D.push(re),D.push(we),D.push(st),D.push(pt),D.push(Ne),D.push(ht),D.push(_e),D.push(Ce)}T+=s,b+=s,_+=s,I+=s,E+=s}const[F,z]=yn(u+i/2,h+o,t,l),B=i/2+d,[y,M]=yn(u+B,h+o,t,l),[A,P]=yn(u+i/2,h-a,t,l),[Y,Q]=yn(u+B,h-a,t,l);return{pennants:R,barbs:D,shaft:[F,z,y,M,A,P,Y,Q]}}function yn(e,t,r,i=1){const n=Math.sqrt(e*e+t*t)/i,s=(2*Math.PI+Math.atan2(t,e))%(2*Math.PI);return[n,(2*Math.PI+s-r)%(2*Math.PI)]}const Vx=[0,1,3,6,10,16,21,27,33,40,47,55,63],Cwe=[0,.5,1,1.5,2],kwe=[0,.25,.5,1,1.5,2,2.5,3,3.5,4];function Rp(e,t,r,i){const n=n6(i||"knots",r);let s;for(s=1;s<t.length;s++)if(s===t.length-1){if(e<t[s]*n)break}else if(e<=t[s]*n)break;return Math.min(s-1,t.length-2)}function Owe(e,t,r,i,n){let s=0;switch(t){case"beaufort_kn":s=Rp(e,Vx,"knots",r);break;case"beaufort_km":s=Rp(e,Vx,"kilometer-per-hour",r);break;case"beaufort_ft":s=Rp(e,Vx,"feet-per-second",r);break;case"beaufort_m":s=Rp(e,Vx,"meter-per-second",r);break;case"classified_arrow":s=Rp(e,n,i,r);break;case"ocean_current_m":s=Rp(e,Cwe,"meter-per-second",r);break;case"ocean_current_kn":s=Rp(e,kwe,"knots",r)}return s}function Pwe(e,t){const{style:r,inputUnit:i,outputUnit:n,breakValues:s}=t,o=ca.fromJSON(i),a=ca.fromJSON(n),l=7*6,u=15;let h=0,d=0;const{width:f,height:m,mask:g}=e,b=e.pixels[0],w=e.pixels[1],_=g?g.filter(T=>T>0).length:f*m,x=new Float32Array(_*l),I=new Uint32Array(u*_);for(let T=0;T<m;T++)for(let $=0;$<f;$++){const E=T*f+$;if(!g||g[T*f+$]){var S;const C=(S=(w[E]+360)%360/180*Math.PI)!=null?S:2*Math.PI*Math.random(),O=Owe(b[E],r,o,a,s);for(let D=0;D<q4.length;D+=2)x[h++]=($+.5)/f,x[h++]=(T+.5)/m,x[h++]=q4[D],x[h++]=q4[D+1]+C,x[h++]=O,x[h++]=b[E];const R=7*(h/l-1);I[d++]=R,I[d++]=R+1,I[d++]=R+2,I[d++]=R+0,I[d++]=R+4,I[d++]=R+3,I[d++]=R+0,I[d++]=R+2,I[d++]=R+3,I[d++]=R+2,I[d++]=R+5,I[d++]=R+3,I[d++]=R+5,I[d++]=R+6,I[d++]=R+3}}return{vertexData:x,indexData:I}}const H4=[];function Rwe(e,t){if(H4.length===0)for(let g=0;g<30;g++)H4.push(Awe(5*g,0));const r=n6(ca.fromJSON(t.inputUnit),"knots"),{width:i,height:n,mask:s}=e,o=e.pixels[0],a=e.pixels[1],l=6,u=[],h=[];let d=0,f=0;for(let g=0;g<n;g++)for(let b=0;b<i;b++){const w=g*i+b,_=o[w]*r;if((!s||s[g*i+b])&&_>=i6){var m;const x=(m=(a[w]+360)%360/180*Math.PI)!=null?m:2*Math.PI*Math.random(),{pennants:I,barbs:S,shaft:T}=H4[Math.min(Math.floor(_/5),29)];if(I.length+S.length===0)continue;let $=u.length/l;const E=(b+.5)/i,C=(g+.5)/n;for(let O=0;O<I.length;O+=2)u[d++]=E,u[d++]=C,u[d++]=I[O],u[d++]=I[O+1]+x,u[d++]=0,u[d++]=_;for(let O=0;O<S.length;O+=2)u[d++]=E,u[d++]=C,u[d++]=S[O],u[d++]=S[O+1]+x,u[d++]=0,u[d++]=_;for(let O=0;O<T.length;O+=2)u[d++]=E,u[d++]=C,u[d++]=T[O],u[d++]=T[O+1]+x,u[d++]=0,u[d++]=_;for(let O=0;O<I.length/6;O++)h[f++]=$,h[f++]=$+1,h[f++]=$+2,$+=3;for(let O=0;O<S.length/8;O++)h[f++]=$,h[f++]=$+1,h[f++]=$+2,h[f++]=$+1,h[f++]=$+2,h[f++]=$+3,$+=4;h[f++]=$+0,h[f++]=$+1,h[f++]=$+2,h[f++]=$+1,h[f++]=$+3,h[f++]=$+2,$+=4}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(h)}}function Lwe(e,t){let i=0,n=0;const{width:s,height:o,mask:a}=e,l=e.pixels[0],u=[],h=[],d=t.style==="wind_speed"?i6:Number.MAX_VALUE;for(let f=0;f<o;f++)for(let m=0;m<s;m++){const g=f*s+m;if((!a||a[f*s+m])&&l[g]<d){for(let w=0;w<4;w++)u[i++]=(m+.5)/s,u[i++]=(f+.5)/o,u[i++]=w<2?-.5:.5,u[i++]=w%2==0?-.5:.5,u[i++]=0,u[i++]=l[g];const b=4*(i/24-1);h[n++]=b,h[n++]=b+1,h[n++]=b+2,h[n++]=b+1,h[n++]=b+2,h[n++]=b+3}}return{vertexData:new Float32Array(u),indexData:new Uint32Array(h)}}function krt(e,t){return t.style==="simple_scalar"?Lwe(e,t):t.style==="wind_speed"?Rwe(e,t):Pwe(e,t)}function Ort(e,t,r,i=[0,0],n=.5){const{width:s,height:o,mask:a}=e,[l,u]=e.pixels,[h,d]=i,f=Math.round((s-h)/r),m=Math.round((o-d)/r),g=f*m,b=new Float32Array(g),w=new Float32Array(g),_=new Uint8Array(g),x=t==="vector-uv";for(let S=0;S<m;S++)for(let T=0;T<f;T++){let $=0;const E=S*f+T,C=Math.max(0,S*r+d),O=Math.max(0,T*r+h),R=Math.min(o,C+r),D=Math.min(s,O+r);for(let F=C;F<R;F++)for(let z=O;z<D;z++){const B=F*s+z;if(!a||a[B]){$++;const y=x?[l[B],u[B]]:[l[B],(360+u[B])%360],[M,A]=x?y:hK(y);b[E]+=M,w[E]+=A}}if($>=(R-C)*(D-O)*(1-n)){_[E]=1;const[F,z]=s6([b[E]/$,w[E]/$]);b[E]=F,w[E]=z}else _[E]=0,b[E]=0,w[E]=0}const I=new qt({width:f,height:m,pixels:[b,w],mask:_});return I.updateStatistics(),I}class Nwe{constructor(t,r){this._storage=new WZ,this._storage.maxSize=t,r&&this._storage.registerRemoveFunc("",r)}put(t,r){this._storage.put(t,r,1,1)}pop(t){return this._storage.pop(t)}get(t){return this._storage.get(t)}clear(){this._storage.clearAll()}destroy(){this._storage.destroy()}}new Nwe(1e3);new Le([128,128,128]);const Dwe=new Le("white");function hI(e,t){if(t==null)return e;const r=e.toRgba();return r[3]=r[3]*t,new Le(r)}function Fwe(e,t,r){const i=e.symbolLayers;if(!i)return;const n=s=>{const o=U(s)?s:null;return hI(t=t||o||r!=null&&Dwe,r)};i.forEach(s=>{if(s.type!=="object"||s.resource.href==null||t)if(s.type==="water")s.color=n(s.color);else{const o=U(s.material)?s.material.color:null,a=n(o);ce(s.material)?s.material=new Dv({color:a}):s.material.color=a,r!=null&&"outline"in s&&U(s.outline)&&U(s.outline.color)&&(s.outline.color=hI(s.outline.color,r))}})}function jwe(e,t,r){(t=t||e.color)&&(e.color=hI(t,r)),r!=null&&"outline"in e&&e.outline&&e.outline.color&&(e.outline.color=hI(e.outline.color,r))}function W4(e,t,r){e&&(t||r!=null)&&(t&&(t=new Le(t)),z0(e)?Fwe(e,t,r):IN(e)&&jwe(e,t,r))}async function Vwe(e,t){const r=e.symbolLayers;r&&await nhe(r,async i=>Uwe(i,t))}async function Uwe(e,t){switch(e.type){case"extrude":Bwe(e,t);break;case"icon":case"line":case"text":zwe(e,t);break;case"path":qwe(e,t);break;case"object":await Gwe(e,t)}}function zwe(e,t){const r=dK(t);U(r)&&(e.size=r)}function dK(e){for(const t of e)if(typeof t=="number")return t;return null}function Bwe(e,t){e.size=typeof t[2]=="number"?t[2]:0}async function Gwe(e,t){const{resourceSize:r,symbolSize:i}=await Hwe(e),n=pK(t,r,i);e.width=Iw(t[0],i[0],r[0],n),e.depth=Iw(t[1],i[1],r[1],n),e.height=Iw(t[2],i[2],r[2],n)}function qwe(e,t){const r=pK(t,YW,[e.width,void 0,e.height]);e.width=Iw(t[0],e.width,1,r),e.height=Iw(t[2],e.height,1,r)}function pK(e,t,r){for(let i=0;i<3;i++){const n=e[i];switch(n){case"symbol-value":return r[i]!=null?r[i]/t[i]:1;case"proportional":break;default:if(n&&t[i])return n/t[i]}}return 1}async function Hwe(e){const t=await ae(()=>import("./symbolLayerUtils.417eac15.js"),[]),r=await t.computeObjectLayerResourceSize(e,10),{width:i,height:n,depth:s}=e,o=[i,s,n];let a=1;for(let l=0;l<3;l++)if(o[l]!=null){a=o[l]/r[l];break}for(let l=0;l<3;l++)o[l]==null&&(o[l]=r[l]*a);return{resourceSize:r,symbolSize:o}}function Iw(e,t,r,i){switch(e){case"proportional":return r*i;case"symbol-value":return t??r;default:return e}}function Wwe(e,t){const r=dK(t);if(!ce(r))switch(e.type){case"simple-marker":e.size=r;break;case"picture-marker":{const i=e.width/e.height;i>1?(e.width=r,e.height=r*i):(e.width=r*i,e.height=r);break}case"simple-line":e.width=r;break;case"text":e.font.size=r}}async function fK(e,t){if(e&&t)return z0(e)?Vwe(e,t):void(IN(e)&&Wwe(e,t))}function mK(e,t,r){if(e&&t!=null)if(z0(e)){const i=e.symbolLayers;i&&i.forEach(n=>{if(n&&n.type==="object")switch(r){case"tilt":n.tilt=t;break;case"roll":n.roll=t;break;default:n.heading=t}})}else IN(e)&&(e.type!=="simple-marker"&&e.type!=="picture-marker"&&e.type!=="text"||(e.angle=t))}var XO;const yj=new Set(["esriMetersPerSecond","esriKilometersPerHour","esriKnots","esriFeetPerSecond","esriMilesPerHour"]),Ux=new lt({beaufort_ft:"beaufort-ft",beaufort_km:"beaufort-km",beaufort_kn:"beaufort-kn",beaufort_m:"beaufort-m",beaufort_mi:"beaufort-mi",classified_arrow:"classified-arrow",ocean_current_kn:"ocean-current-kn",ocean_current_m:"ocean-current-m",simple_scalar:"simple-scalar",single_arrow:"single-arrow",wind_speed:"wind-barb"}),zx=new lt({flow_from:"flow-from",flow_to:"flow-to"});let kn=XO=class extends Bv(me){constructor(e){super(e),this.attributeField="Magnitude",this.flowRepresentation="flow-from",this.rotationType="arithmetic",this.style="single-arrow",this.symbolTileSize=50,this.type="vector-field"}readInputUnit(e,t){return yj.has(e)?ca.fromJSON(e):null}readOutputUnit(e,t){return yj.has(e)?ca.fromJSON(e):null}get styleRenderer(){const e=this.style,t=this.attributeField,r=this._createStyleRenderer(e);return r.field=t,r}get sizeVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="size"&&e.push(t);if(e.length===0){const t=new g2({field:"Magnitude",minSize:.2*this.symbolTileSize,maxSize:.8*this.symbolTileSize});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}get rotationVariables(){const e=[];if(this.visualVariables)for(const t of this.visualVariables)t.type==="rotation"&&e.push(t);if(e.length===0){const t=new o$({field:"Direction",rotationType:this.rotationType});this.visualVariables?this.visualVariables.push(t):this._set("visualVariables",[t]),e.push(t)}return e}clone(){return new XO({attributeField:this.attributeField,flowRepresentation:this.flowRepresentation,rotationType:this.rotationType,symbolTileSize:this.symbolTileSize,style:this.style,visualVariables:ie(this.visualVariables),inputUnit:this.inputUnit,outputUnit:this.outputUnit})}async getGraphicsFromPixelData(e,t=!1,r=[]){var i;const n=new Array,s=n6(this.inputUnit,this.outputUnit),o=((i=this.rotationVariables[0])==null?void 0:i.rotationType)||this.rotationType,a=t?Twe(e.pixelBlock,"vector-uv",o,s):$we(e.pixelBlock,"vector-magdir",s);if(ce(a))return n;const l=e.extent,u=a.mask&&a.mask.length>0;let h=0;const d=(l.xmax-l.xmin)/a.width,f=(l.ymax-l.ymin)/a.height;for(let m=0;m<a.height;m++)for(let g=0;g<a.width;g++,h++){let b=new Ke({x:l.xmin+g*d+d/2,y:l.ymax-m*f-f/2,spatialReference:l.spatialReference});b=(await _y(b))[0];const w=r.some(_=>_.intersects(b));if((!u||a.mask[h])&&!w){const _={Magnitude:a.pixels[0][h],Direction:a.pixels[1][h]},x=new xn({geometry:{type:"point",x:b.x,y:b.y,spatialReference:l.spatialReference},attributes:_});x.symbol=this._getVisualVariablesAppliedSymbol(x),n.push(x)}}return n}getSymbol(e,t){}async getSymbolAsync(e,t){}getSymbols(){return[]}getClassBreakInfos(){var e;return(e=this.styleRenderer)==null?void 0:e.classBreakInfos}getDefaultSymbol(){var e;return(e=this.styleRenderer)==null?void 0:e.defaultSymbol}_getDefaultSymbol(e){return new zu({path:"M14,32 14,18 9,23 16,3 22,23 17,18 17,32 z",outline:new jo({width:0}),size:20,color:e||new Le([0,92,230])})}_getVisualVariablesAppliedSymbol(e){if(!e)return;let t=this.styleRenderer&&this.styleRenderer.getSymbol(e);t=t.clone();const r=this.sizeVariables,i=this.rotationVariables;if(r&&r.length&&this.sizeVariables.forEach(n=>fK(t,GZ([n],e))),i&&i.length){const n=this.flowRepresentation==="flow-to"==(this.style==="ocean-current-kn"||this.style==="ocean-current-m")?0:180;e.attributes.Direction=e.attributes.Direction+n,this.rotationVariables.forEach(s=>mK(t,kN(s,e),s.axis))}return t}_createStyleRenderer(e){let t={defaultSymbol:this._getDefaultSymbol(),classBreakInfos:[]};switch(e){case"single-arrow":t=this._createSingleArrowRenderer();break;case"beaufort-kn":t=this._createBeaufortKnotsRenderer();break;case"beaufort-m":t=this._createBeaufortMeterRenderer();break;case"beaufort-ft":t=this._createBeaufortFeetRenderer();break;case"beaufort-mi":t=this._createBeaufortMilesRenderer();break;case"beaufort-km":t=this._createBeaufortKilometersRenderer();break;case"ocean-current-m":t=this._createCurrentMeterRenderer();break;case"ocean-current-kn":t=this._createCurrentKnotsRenderer();break;case"simple-scalar":t=this._createSimpleScalarRenderer();break;case"wind-barb":t=this._createWindBarbsRenderer();break;case"classified-arrow":t=this._createClassifiedArrowRenderer()}return new Gv(t)}_createSingleArrowRenderer(){return{defaultSymbol:this._getDefaultSymbol()}}_createBeaufortKnotsRenderer(){const e=[0,1,3,6,10,16,21,27,33,40,47,55,63],t=[[40,146,199],[89,162,186],[129,179,171],[160,194,155],[191,212,138],[218,230,119],[250,250,100],[252,213,83],[252,179,102],[250,141,52],[247,110,42],[240,71,29]];return{defaultSymbol:this._getDefaultSymbol(new Le([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortMeterRenderer(){const e=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7],t=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]];return{defaultSymbol:this._getDefaultSymbol(new Le([214,47,39])),classBreakInfos:this._getClassBreaks(e,t)}}_createBeaufortFeetRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.28084;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortMilesRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=2.23694;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createBeaufortKilometersRenderer(){const e=this._getDefaultSymbol(new Le([214,47,39]));let t=[0,.2,1.8,3.3,5.4,8.5,11,14.1,17.2,20.8,24.4,28.6,32.7];const r=[[69,117,181],[101,137,184],[132,158,186],[162,180,189],[192,204,190],[222,227,191],[255,255,191],[255,220,161],[250,185,132],[245,152,105],[237,117,81],[232,21,21]],i=3.6;return t=t.map(n=>n*i),{defaultSymbol:e,classBreakInfos:this._getClassBreaks(t,r)}}_createCurrentMeterRenderer(){const e=[0,.5,1,1.5,2],t=[[78,26,153],[179,27,26],[202,128,26],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Le([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createCurrentKnotsRenderer(){const e=[0,.25,.5,1,1.5,2,2.5,3,3.5,4],t=[[0,0,0],[0,37,100],[78,26,153],[151,0,100],[179,27,26],[177,78,26],[202,128,26],[177,179,52],[177,177,177]];return{defaultSymbol:this._getDefaultSymbol(new Le([177,177,177])),classBreakInfos:this._getClassBreaks(e,t)}}_createClassifiedArrowRenderer(){var e;const t=this._getDefaultSymbol(new Le([56,168,0]));let r=[0,1e-6,3.5,7,10.5,14];if((e=this.sizeVariables)!=null&&e.length){const n=this.sizeVariables[0].minDataValue,s=this.sizeVariables[0].maxDataValue;if(n&&s){const o=(s-n)/5;r=Array.from(Array(6).keys()).map(a=>n+o*a)}}const i=[[56,168,0],[139,309,0],[255,255,0],[255,128,0],[255,0,0]];return{defaultSymbol:t,classBreakInfos:this._getClassBreaks(r,i)}}_createSimpleScalarRenderer(){return{defaultSymbol:Zd.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACsAAAArCAQAAABLVLlLAAAABGdBTUEAAYagMeiWXwAAAAJiS0dEAACqjSMyAAAACXBIWXMAAABIAAAASABGyWs+AAAC3ElEQVRIx9XXvW4cVRQH8N982btpsIREJECyiCXsxX4DKh6AliqGKCBBE2SlwlHgAbBD/AKmyEYUeQ1KahPZSZQvBCkQLTHZ7KGY8Xodz4w3a1NwbzVzz/znfJ//zbStVC5q3icKak9GAs2QIdDx3PtW/S011NW3p+M5Eomh11ipTIKe6+4LQzHaQ+G+63pIZNJJQXMpljwTwj1brpgx5w1zZlyx5Z4QnllEIm2xeeSUHBf0hV0bejo1Uh09G3aFvgXk7cCJFBc9EdaRVuHJJaOdKyTV2TVhYLMduNR0Q9gxL5GaaTDw8GzejrDRBpxWoGsySRW0dttKuattwNkIlFw2YXgzOdYq4Ox49PlM+JrKd5OusjTWhBuVxUfMX/KXXZ3WEmkuqa67wspR4BTbwtKr/5u4fFgStse/T7EifFPnnYl9zPq4vmUOPrRndgoHjDti1gOPqlyXoifcRNGQzUd31lDyfHmob1Gp35vSr+P6vilcQ5Egtyd8YF/ySg9NhPM+9M/IOaHwp5+PSZayXTvCogEUwlatC3J8LLwYtcWB8EuDXQVuCkV5/B4eNHb7wGBs87LBDS+xjdVSn09wq1G8dFM+9tSUhIGneLvUdniKxKpTYljCpu3j7rVWlHj/P23v4NPGUEyeCQnexe9lJjzEQqMjJs+EzNAX6B98dBZVRmroJx95x/A/6gln18EyfCUsl+qdXb/tjvfbw+mwforpUOBz4XLVoBwAn3aWnfeH246NyBXhrq7TTN5lNSP9RkU+puUJm3W2Tsdq0nZWM07srk7MwQrZSRysjjGWBLRJNsNbfj2JMR4AbxpU1XLAb9Mxfpsq5EjMuuiR8L0JiHOOBX3hiUvOmavN0nMueSzcceFk0BK4pMqLo7vDD1Z0qrtDx7Itt4Xwm9UqbMmk8S0Dtuzb2pvOU99Z1nLTOfleNmvfZfP2pYZmPfajwosKdDBNpacNpVGGsWX9CyDI8Xq/Sj6QAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE0LTExLTEwVDAzOjE3OjU4LTA1OjAwF+tHyQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNC0xMS0xMFQwMzoxNzo1OC0wNTowMGa2/3UAAAAASUVORK5CYII=",height:20,width:20,type:"esriPMS",angle:0})}}_createWindBarbsRenderer(){const e=Array.from(Array(31).keys()).map(n=>5*n),t=[{range:"0-5",path:"M20 20 M5 20 A15 15 0 1 0 35 20 A15 15 0 1 0 5 20 M20 20 M10 20 A10 10 0 1 0 30 20 A10 10 0 1 0 10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTIwIDIwIE01IDIwIEExNSAxNSAwIDEgMCAzNSAyMCBBMTUgMTUgMCAxIDAgNSAyMCBNMjAgMjAgTTEwIDIwIEExMCAxMCAwIDEgMCAzMCAyMCBBMTAgMTAgMCAxIDAgMTAgMjAiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"5-10",path:"M25 0 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"10-15",path:"M25 0 L25 40 L10 45 L25 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNyA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"15-20",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L17.5 37.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjEyIDAgMTUgNDUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxNy41IDM3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"20-25",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"25-30",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjkgMCAyNiA0NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aCBkPSJNMjUgMCBMMjUgNDAgTDEwIDQ1IEwyNSA0MCBNMjUgMzUgTDEwIDQwIEwyNSAzNSBNMjUgMzAgTDE3LjUgMzIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"30-35",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"35-40",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"40-45",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"45-50",path:"M25 0 L25 40 L10 45 L25 40 M25 35 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0NiI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0NSBMMjUgNDAgTTI1IDM1IEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"50-55",path:"M25 0 L25 40 L10 40 L25 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"55-60",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L17.5 32.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMHB4IiBoZWlnaHQ9IjIwcHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxNy41IDMyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"60-65",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"65-70",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxNy41IDI3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"70-75",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"75-80",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxNy41IDIyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"80-85",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"85-90",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxNy41IDE3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"90-95",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"95-100",path:"M25 0 L25 40 L10 40 L25 35 M25 30 L10 35 L25 30 M25 25 L10 30 L25 25 M25 20 L10 25 L25 20 M25 15 L10 20 L25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTTI1IDMwIEwxMCAzNSBMMjUgMzAgTTI1IDI1IEwxMCAzMCBMMjUgMjUgTTI1IDIwIEwxMCAyNSBMMjUgMjAgTTI1IDE1IEwxMCAyMCBMMjUgMTUgTTI1IDEwIEwxNy41IDEyLjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="},{range:"100-105",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMnB4IiBoZWlnaHQ9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"105-110",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L17.5 27.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDE3LjUgMjcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"110-115",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"115-120",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L17.5 22.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDE3LjUgMjIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"120-125",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"125-130",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L17.5 17.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDE3LjUgMTcuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"130-135",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"135-140",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDE3LjUgMTIuNSIgc3R5bGU9InN0cm9rZTpyZ2IoMCwwLDApO3N0cm9rZS13aWR0aDoxLjUiLz4KIDwvc3ZnPg=="},{range:"140-145",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IiBzdHlsZT0ic3Ryb2tlOnJnYigwLDAsMCk7c3Ryb2tlLXdpZHRoOjEuNSIvPgogPC9zdmc+"},{range:"145-150",path:"M25 0 L25 40 L10 40 L25 35 L10 35 L25 30 M25 25 L10 30 M25 25 M25 20 L10 25 M25 20 M25 15 L10 20 M25 15 M25 10 L17.5 12.5",imageData:"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMzJweCIgd2lkdGg9IjMycHgiIHZpZXdCb3g9IjkgMCAyNiA0MSI+CiAgPHBhdGggZD0iTTI1IDAgTDI1IDQwIEwxMCA0MCBMMjUgMzUgTDEwIDM1IEwyNSAzMCBNMjUgMjUgTDEwIDMwIE0yNSAyNSBNMjUgMjAgTDEwIDI1IE0yNSAyMCBNMjUgMTUgTDEwIDIwIE0yNSAxNSBNMjUgMTAgTDEwIDE1IE0yNSAxMCBNMjUgNSBMMTcuNSA3LjUiIHN0eWxlPSJzdHJva2U6cmdiKDAsMCwwKTtzdHJva2Utd2lkdGg6MS41Ii8+CiA8L3N2Zz4="}],r=Zd.fromJSON({imageData:"iVBORw0KGgoAAAANSUhEUgAAACgAAAApCAQAAADtq6NDAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAJiS0dEAP+Hj8y/AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEY0lEQVRIx5XXWWxWRRQH8N+d+31tUdGAVjGglYJABFEBY91jfDAg7piYaFTccA++uMQEFRcSXlATtxiXqMQt4G4iisYl0ai4sIQYtVFZ1KIFKdTS0l4f7vRCS5fPebozc+bM/2z/Mzcx0AgSiUxXnKfIdMn875FIhX53U2n/B/s+kKM4UINTjTBZImixxnrv+9a2iL6zEoUBXcoudrWj/OtHm3wt02lfU9Qao9OnHvIhgmww84MEl1qnxfNmGrqHxAizLdPpC6chGcAxKGGcL+30gOERf1BSpUqVslQSV8d5ReZFe8VQ9avufJn31cWwlJV7iafKStGOE/1qvfH9qUxxu8ydUdmuSKbGO8YUdT2inKLG69pM70tliktl5qIkCAJGmusDG7Vqsc0WjZa4UBlBiA5YZIcjYzB7qDtH5kaUJFLs7RGZTZ42W4PRRmtwvbdt1+wGiaS4drEtDttdZYIDNVuAclR3vA3+dI3qHqmVSy7U6Tv1MScCPvPR7nIpFlsdCy3FdTLPGhK92e2CUITjMJ9ocwKxnsZqc3O3JwMma3d6UVLnyVxB4aXemZqvPqLdpJhW3KVVbY4yYImPo6M5Urv50fj+0z/FG9YaEiENs8UtMfXUaTeTePNHlhXfA1UU+2lyD1Il3Gtt9+adfpNG7dNlpg2U/T3KYLZ2dUWFdTgp3/rQ4sK973qnInV5TIf40x3dhvrJPBiqyWUo4wAtLqhQYS71qK+QKOFRywmGK/kpikzV6WMKhh58vGWs4TIJNjiEYLIuP8Tt4/zmLyqk+AyrJSbF+Qq1DgqRUPMxyl+9q3IQhX/rMCJ6tEunriDs1oSyQZKlr9AkhT2ZIARbJfaJS1vtVbHB+Rgi0RK/y1q1BWsEEyLoz40xtGKcARPVWB1BTPO7f4LNtpkUl1aoMbViLyZo0GRjPD3BxnxjqXeLYlvhqYrzMMG3HoyJXa3JjfnGlbYYFlP7Jh3qKsKY4hQ7TY0nG+xwRL61n63mxHtqNHosigyMLmClNwvuecFnOZB88nNBDzNkzhxEZaKMBVoKapggMzvHHXBEpNSSFAvtcFRsVn0bW8LlMmcXs+c0Kne3gRR32+zg4uXwjC6zit6Wt4a8LXVfcp/MtQXHn2ynGbuCmb8GvvFeJLEE82ReU9/n6+dkq2x3buG9Wn94smcgAw631RPR7BTH+kbmHReZoEpOdEe7zWqZl40s0JWs9Hmv7hjBHqPDwsjGKVJnWWqjbdZp1KhJi0aPmxYZsIRhlttgeF+Jlke41QcOQKoqilSb6HJzSvNG3G/UoWnxwsmt+sVaYwd63dRbqdnMyCPVeyRPvpYgdavM22oGKoMUVRbJfOWMwidJ8Zzb1UvmWK/VVUXzHaTjjrVYh1897HT7xxYEVUaa5SWb/WO+YUWa9SrwvigzM8YlzlYv2GSdVCYxxlBtVnnFq5olwp5/BEk/OLsf5LUmG2+inRJdVvjZ97ZH9/zP34ug1O91pf4p+D+JYBpvrKxfbwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNC0xMS0xMFQwMzoxMjowOS0wNTowMB9ViV0AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTQtMTEtMTBUMDM6MTI6MDktMDU6MDBuCDHhAAAAAElFTkSuQmCC",height:20,width:20,type:"esriPMS",angle:0}),i=e.map((n,s)=>{let o;if(s!==e.length-1)if(s===0)o={minValue:n,maxValue:e[s+1],symbol:r};else{const a=Zd.fromJSON({type:"esriPMS",imageData:t[s].imageData,contentType:"image/svg+xml",height:32,width:32,angle:0});o={minValue:n,maxValue:e[s+1],symbol:a}}return new q0(o)});return{defaultSymbol:r,classBreakInfos:i}}_getClassBreaks(e,t){return t.map((r,i)=>new q0({minValue:e[i],maxValue:e[i+1],symbol:this._getDefaultSymbol(new Le(r))}))}};c([p({type:String,json:{write:!0}})],kn.prototype,"attributeField",void 0),c([p({type:zx.apiValues,json:{type:zx.jsonValues,read:{reader:zx.read},write:{writer:zx.write}}})],kn.prototype,"flowRepresentation",void 0),c([p({type:["geographic","arithmetic"],json:{write:!0}})],kn.prototype,"rotationType",void 0),c([p({type:Ux.apiValues,json:{type:Ux.jsonValues,read:{reader:Ux.read},write:{writer:Ux.write}}})],kn.prototype,"style",void 0),c([p({json:{write:!0}})],kn.prototype,"symbolTileSize",void 0),c([p({type:ca.apiValues,json:{type:ca.jsonValues,write:{writer:ca.write}}})],kn.prototype,"inputUnit",void 0),c([ye("inputUnit")],kn.prototype,"readInputUnit",null),c([p({type:ca.apiValues,json:{type:ca.jsonValues,read:{reader:ca.read},write:{writer:ca.write}}})],kn.prototype,"outputUnit",void 0),c([ye("outputUnit")],kn.prototype,"readOutputUnit",null),c([tt({vectorField:"vector-field"})],kn.prototype,"type",void 0),c([p({type:Gv})],kn.prototype,"styleRenderer",null),c([p({type:g2})],kn.prototype,"sizeVariables",null),c([p({type:o$})],kn.prototype,"rotationVariables",null),kn=XO=c([N("esri.renderers.VectorFieldRenderer")],kn);const o6=kn,QO={key:"type",base:null,typeMap:{"unique-value":qv,"class-breaks":Gv,"raster-colormap":t6,"raster-stretch":r6,"vector-field":o6,"raster-shaded-relief":aK,"animated-flow":KY}},eP={...QO,typeMap:{...QO.typeMap}};delete eP.typeMap["vector-field"],delete eP.typeMap["animated-flow"];const Jwe={uniqueValue:qv,classBreaks:Gv,rasterStretch:r6,rasterColormap:t6,vectorField:o6,rasterShadedRelief:aK,animatedFlow:KY};function Zwe(e){return e&&Jwe[e.type]||null}function Ywe(e,t){if(!e)return null;if(e.type==="classBreaks"&&e.classificationMethod){const i=e.authoringInfo||{classificationMethod:""};i.classificationMethod=e.classificationMethod,e.authoringInfo=i}const r=Zwe(e);if(r){const i=new r;return i.read(e,t),i}return t&&t.messages&&e&&t.messages.push(new Ys("renderer:unsupported","Renderers of type '"+(e.type||"unknown")+"' are not supported",{definition:e,context:t})),null}var tP;let _f=tP=class extends me{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new tP({variableName:this.variableName,dimensionName:this.dimensionName,values:ie(this.values),isSlice:this.isSlice})}};c([p({type:String,json:{write:!0}})],_f.prototype,"variableName",void 0),c([p({type:String,json:{write:!0}})],_f.prototype,"dimensionName",void 0),c([p({type:v1.array(v1.oneOf([v1.native(Number),v1.array(v1.native(Number))])),json:{write:!0}})],_f.prototype,"values",void 0),c([p({type:Boolean,json:{write:!0}})],_f.prototype,"isSlice",void 0),_f=tP=c([N("esri.layers.support.DimensionalDefinition")],_f);const rP=_f;var iP;const UM=new Set(["raster","raster2","dem","fillraster"]),zM=new Set(["rasters"]),gj=e=>e&&e.rasterFunction?Mi.fromJSON(e):e,J4=e=>e&&e instanceof Mi?e.toJSON():e,nP=e=>e?.functionName&&!e.declaredClass,vj=e=>nP(e)?new Mi(e):e;var dI;(function(e){e[e.MOSAIC=0]="MOSAIC",e[e.GROUP=1]="GROUP",e[e.ITEM=2]="ITEM"})(dI||(dI={}));const Kwe=e=>{if(e==null)return null;e=ie(e);const t={};for(const r of Object.keys(e))UM.has(r.toLowerCase())?t[r]=gj(e[r]):zM.has(r.toLowerCase())&&Array.isArray(e[r])?t[r]=e[r].map(gj):t[r]=e[r];return t};let Mi=iP=class extends me{constructor(e){super(e),this.functionName=null,this.outputPixelType="unknown",this.variableName=null,this.description=null,this.functionDefinition=null,this.thumbnail=null}set functionArguments(e){if(e){const t=Object.keys(e);if(t.some(r=>UM.has(r.toLowerCase())&&nP(e[r]))||t.some(r=>zM.has(r.toLowerCase())&&Array.isArray(e[r])&&e[r].some(i=>nP(i)))){e=ie(e);for(const r of t)UM.has(r.toLowerCase())?e[r]=vj(e[r]):zM.has(r.toLowerCase())&&Array.isArray(e[r])&&(e[r]=e[r].map(i=>vj(i)))}}this._set("functionArguments",e)}readFunctionArguments(e,t){return e=t.arguments||t.rasterFunctionArguments,Kwe(e)}writeFunctionArguments(e,t,r){const i={};for(const n of Object.keys(e))UM.has(n.toLowerCase())?i[n]=J4(e[n]):zM.has(n.toLowerCase())&&Array.isArray(e[n])?i[n]=e[n].map(J4):i[n]=J4(e[n]);this.functionDefinition?t.arguments=i:t[r]=i}readFunctionName(e,t){const r=t.rasterFunctionInfos;return t.name||(r&&r.length&&r[0].name!=="None"?r[0].name:t.rasterFunction)}writeFunctionName(e,t,r){this.functionDefinition?t.name=e:t[r]=e}readFunctionType(e){return dI[e]}writeFunctionType(e,t,r){t[r]=dI[e]}clone(){return new iP({functionName:this.functionName,functionArguments:ie(this.functionArguments),outputPixelType:this.outputPixelType,variableName:this.variableName,description:this.description,functionType:this.functionType,functionDefinition:this.functionDefinition,thumbnail:this.thumbnail})}};c([p({json:{type:Object,write:{target:"rasterFunctionArguments"}}})],Mi.prototype,"functionArguments",null),c([ye("functionArguments",["rasterFunctionArguments","arguments"])],Mi.prototype,"readFunctionArguments",null),c([Se("functionArguments")],Mi.prototype,"writeFunctionArguments",null),c([p({json:{type:String,write:{target:"rasterFunction"}}})],Mi.prototype,"functionName",void 0),c([ye("functionName",["rasterFunction","rasterFunctionInfos","name"])],Mi.prototype,"readFunctionName",null),c([Se("functionName")],Mi.prototype,"writeFunctionName",null),c([tt({C128:"c128",C64:"c64",F32:"f32",F64:"f64",S16:"s16",S32:"s32",S8:"s8",U1:"u1",U16:"u16",U2:"u2",U32:"u32",U4:"u4",U8:"u8",UNKNOWN:"unknown"},{ignoreUnknown:!1}),p({json:{default:"unknown"}})],Mi.prototype,"outputPixelType",void 0),c([p({type:String,json:{read:!0,write:!0}})],Mi.prototype,"variableName",void 0),c([p({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],Mi.prototype,"description",void 0),c([p({json:{origins:{"web-document":{read:!1,write:!1}}}})],Mi.prototype,"functionType",void 0),c([ye("functionType")],Mi.prototype,"readFunctionType",null),c([Se("functionType")],Mi.prototype,"writeFunctionType",null),c([p({type:Object,json:{read:{source:"function"},write:{target:"function"},origins:{"web-document":{read:!1,write:!1}}}})],Mi.prototype,"functionDefinition",void 0),c([p({type:String,json:{read:!0,write:!0,origins:{"web-document":{read:!1,write:!1}}}})],Mi.prototype,"thumbnail",void 0),Mi=iP=c([N("esri.layers.support.RasterFunction")],Mi);const ki=Mi,Xwe={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767]},Qwe={simple_scalar:"Simple Scalar",wind_barb:"Wind Barb",single_arrow:"Single Arrow",beaufort_kn:"Beaufort Wind (Knots)",beaufort_m:"Beaufort Wind (MetersPerSecond)",ocean_current_m:"Ocean Current (MetersPerSecond)",ocean_current_kn:"Ocean Current (Knots)"},e_e=new Set(["raster-stretch","unique-value","class-breaks","raster-shaded-relief","vector-field","raster-colormap"]);function yK(e){return e_e.has(e.type)}function bj(e,t){if(!e||!t)return ie(e||t);const r=ie(e);return t.functionName.toLowerCase()!=="none"&&(gK(r.functionArguments).Raster=t),r}function t_e(e,t){switch(t=t||{},e.type){case"raster-stretch":return n_e(e,t);case"class-breaks":return s_e(e,t);case"unique-value":return o_e(e,t);case"raster-colormap":return a_e(e,t);case"vector-field":return r_e(e,t);case"raster-shaded-relief":return i_e(e,t);case"animated-flow":throw new Error("Unsupported rendering rule.")}}function gK(e){const t=e.Raster;return t&&t.declaredClass==="esri.layers.support.RasterFunction"?gK(t.functionArguments):e}const A1={none:0,standardDeviation:3,histogramEqualization:4,minMax:5,percentClip:6,sigmoid:9};function r_e(e,t){const r=new ki;r.functionName="VectorFieldRenderer";const{dataType:i,bandProperties:n}=t,s=i==="vector-uv";let o,a;n&&n.length===2&&(o=n.map(f=>f.BandName.toLowerCase()).indexOf("magnitude"),a=n.map(f=>f.BandName.toLowerCase()).indexOf("direction")),o!==-1&&o!==null||(o=0,a=1);const l=e.rotationType==="arithmetic"?1:2,u=e.flowRepresentation==="flow-from"?0:1,h=e.visualVariables?e.visualVariables.filter(f=>f.field==="Magnitude")[0]:new g2,d={magnitudeBandID:o,directionBandID:a,isUVComponents:s,referenceSystem:l,massFlowAngleRepresentation:u,symbolTileSize:50,symbolTileSizeUnits:100,calculationMethod:"Vector Average",symbologyName:Qwe[e.style.toLowerCase().replace("-","_")],minimumMagnitude:h.minDataValue,maximumMagnitude:h.maxDataValue,minimumSymbolSize:h.minSize,maximumSymbolSize:h.maxSize};return r.functionArguments=d,r}function i_e(e,t){if(t.dataType!=="elevation")return new ki;const r=new ki;r.functionName="Hillshade";const i=e.hillshadeType==="traditional"?0:1,n=e.scalingType==="none"?1:3,s={HillshadeType:i,SlopeType:n,ZFactor:e.zFactor};return i===0&&(s.Azimuth=e.azimuth,s.Altitude=e.altitude),n===3&&(s.PSPower=e.pixelSizePower,s.PSZFactor=e.pixelSizeFactor),r.functionArguments=s,r.variableName="Raster",e.colorRamp&&(r.functionName="ShadedRelief",s.Colormap=Gm(e.colorRamp,256)),r}function n_e(e,t){const r=new ki;r.functionName="Stretch";const i=A1[Sw.toJSON(e.stretchType)],n="u8",s={StretchType:i,Statistics:l_e(e.statistics),DRA:e.dynamicRangeAdjustment,UseGamma:e.useGamma,Gamma:e.gamma,ComputeGamma:e.computeGamma};if(e.outputMin!=null&&(s.Min=e.outputMin),e.outputMax!=null&&(s.Max=e.outputMax),i===A1.standardDeviation?(s.NumberOfStandardDeviations=e.numberOfStandardDeviations,r.outputPixelType=n):i===A1.percentClip?(s.MinPercent=e.minPercent,s.MaxPercent=e.maxPercent,r.outputPixelType=n):i===A1.minMax?r.outputPixelType=n:i===A1.sigmoid&&(s.SigmoidStrengthLevel=e.sigmoidStrengthLevel),r.functionArguments=s,r.variableName="Raster",e.colorRamp){const o=e.colorRamp,a=new ki,l=owe(o);return l?a.functionArguments={colorRamp:l}:!t.convertColorRampToColormap||o.type!=="algorithmic"&&o.type!=="multipart"?a.functionArguments={colorRamp:e.colorRamp.toJSON()}:a.functionArguments={Colormap:Gm(o,256)},a.variableName="Raster",a.functionName="Colormap",a.functionArguments.Raster=r,a}return r}function s_e(e,t){const r=[],i=[],n=[],s=[],{pixelType:a,rasterAttributeTable:l}=t,u=l&&l.features,h=vK(l);if(u&&Array.isArray(u)&&e.classBreakInfos){e.classBreakInfos.forEach((w,_)=>{const x=w.symbol.color;let I;x.a&&u.forEach(S=>{I=S.attributes[e.field],(I>=w.minValue&&I<w.maxValue||_===e.classBreakInfos.length-1&&I>=w.minValue)&&s.push([S.attributes[h],x.r,x.g,x.b])})});const g=a?pI(s,a):s,b=new ki;return b.functionName="Colormap",b.functionArguments={},b.functionArguments.Colormap=g,b.variableName="Raster",b}e.classBreakInfos.forEach((g,b)=>{const w=g.symbol&&g.symbol.color;w.a?(b===0?r.push(g.minValue,g.maxValue+1e-6):r.push(g.minValue+1e-6,g.maxValue+1e-6),i.push(b),s.push([b,w.r,w.g,w.b])):n.push(g.minValue,g.maxValue)});const d=a?pI(s,a):s,f=new ki;f.functionName="Remap",f.functionArguments={InputRanges:r,OutputValues:i,NoDataRanges:n},f.variableName="Raster";const m=new ki;return m.functionName="Colormap",m.functionArguments={Colormap:d,Raster:f},m}function pI(e,t){const r=Xwe[String(t).toLowerCase()];return r&&e.push([Math.floor(r[0]-1),0,0,0],[Math.ceil(r[1]+1),0,0,0]),e}function vK(e){if(!e)return;const{fields:t}=e,r=t&&t.find(i=>i&&i.name&&i.name.toLowerCase()==="value");return r&&r.name}function o_e(e,t){var r;const i=[],{pixelType:n,rasterAttributeTable:s}=t,o=s&&s.features,a=vK(s),l=(r=e.defaultSymbol)==null?void 0:r.color;let u=!1;if(e.uniqueValueInfos&&(o?o.forEach(f=>{var m;const g=(m=e.uniqueValueInfos.find(b=>String(f.attributes[e.field])===String(b.value)))==null?void 0:m.symbol.color;g?i.push([f.attributes[a],g.r,g.g,g.b]):l&&i.push([f.attributes[a],l.r,l.g,l.b])}):e.uniqueValueInfos.forEach(f=>{var m;if((m=f.symbol.color)==null||!m.a)return;const g=f.symbol.color;isNaN(+f.value)?u=!0:i.push([+f.value,g.r,g.g,g.b])})),u)return null;const h=n&&i.length>0?pI(i,n):i,d=new ki;return d.functionName="Colormap",d.functionArguments={},d.functionArguments.Colormap=h,d.variableName="Raster",d}function a_e(e,t){const r=e.extractColormap();if(!r||r.length===0)return;const{pixelType:i}=t,n=i?pI(r,i):r,s=new ki;return s.functionName="Colormap",s.functionArguments={},s.functionArguments.Colormap=n,s}function l_e(e){const t=[];return e.forEach(r=>{const i=r;if(Array.isArray(i))t.push(i);else{if(i.min==null||i.max==null)return;const n=[i.min,i.max,i.avg||0,i.stddev||0];t.push(n)}}),t}var sP;const Tw=li()({MT_FIRST:"first",MT_LAST:"last",MT_MIN:"min",MT_MAX:"max",MT_MEAN:"mean",MT_BLEND:"blend",MT_SUM:"sum"}),oP=li()({esriMosaicNone:"none",esriMosaicCenter:"center",esriMosaicNadir:"nadir",esriMosaicViewpoint:"viewpoint",esriMosaicAttribute:"attribute",esriMosaicLockRaster:"lock-raster",esriMosaicNorthwest:"northwest",esriMosaicSeamline:"seamline"});function u_e(e){let t;switch(e?e.toLowerCase().replace("esrimosaic",""):""){case"byattribute":case"attribute":t="esriMosaicAttribute";break;case"lockraster":t="esriMosaicLockRaster";break;case"center":t="esriMosaicCenter";break;case"northwest":t="esriMosaicNorthwest";break;case"nadir":t="esriMosaicNadir";break;case"viewpoint":t="esriMosaicViewpoint";break;case"seamline":t="esriMosaicSeamline";break;default:t="esriMosaicNone"}return oP.fromJSON(t)}let Zi=sP=class extends me{constructor(e){super(e),this.ascending=!0,this.itemRenderingRule=null,this.lockRasterIds=null,this.method=null,this.multidimensionalDefinition=null,this.objectIds=null,this.operation=null,this.sortField=null,this.sortValue=null,this.viewpoint=null,this.where=null}readAscending(e,t){return t.ascending!=null?t.ascending:t.sortAscending==null||t.sortAscending}readMethod(e,t){return u_e(t.mosaicMethod||t.defaultMosaicMethod)}readOperation(e,t){const r=t.mosaicOperation,i=t.mosaicOperator&&t.mosaicOperator.toLowerCase(),n=r||(i?Tw.toJSON(i):null);return Tw.fromJSON(n)||"first"}castSortValue(e){return e==null||typeof e=="string"||typeof e=="number"?e:`${e}`}clone(){return new sP({ascending:this.ascending,itemRenderingRule:ie(this.itemRenderingRule),lockRasterIds:ie(this.lockRasterIds),method:this.method,multidimensionalDefinition:ie(this.multidimensionalDefinition),objectIds:ie(this.objectIds),operation:this.operation,sortField:this.sortField,sortValue:this.sortValue,viewpoint:ie(this.viewpoint),where:this.where})}};c([p({type:Boolean,json:{write:!0}})],Zi.prototype,"ascending",void 0),c([ye("ascending",["ascending","sortAscending"])],Zi.prototype,"readAscending",null),c([p({type:ki,json:{write:!0}})],Zi.prototype,"itemRenderingRule",void 0),c([p({type:[jt],json:{write:{overridePolicy(){return{enabled:this.method==="lock-raster"}}}}})],Zi.prototype,"lockRasterIds",void 0),c([p({type:String,json:{type:oP.jsonValues,write:{target:"mosaicMethod",writer:oP.write}}})],Zi.prototype,"method",void 0),c([ye("method",["mosaicMethod","defaultMosaicMethod"])],Zi.prototype,"readMethod",null),c([p({type:[rP],json:{write:!0}})],Zi.prototype,"multidimensionalDefinition",void 0),c([p({type:[jt],json:{name:"fids",write:!0}})],Zi.prototype,"objectIds",void 0),c([p({json:{type:Tw.jsonValues,read:{reader:Tw.read},write:{target:"mosaicOperation",writer:Tw.write}}})],Zi.prototype,"operation",void 0),c([ye("operation",["mosaicOperation","mosaicOperator"])],Zi.prototype,"readOperation",null),c([p({type:String,json:{write:{overridePolicy(){return{enabled:this.method==="attribute"}}}}})],Zi.prototype,"sortField",void 0),c([p({type:[String,Number],json:{write:{allowNull:!0,overridePolicy(){return{enabled:this.method==="attribute",allowNull:!0}}}}})],Zi.prototype,"sortValue",void 0),c([Ct("sortValue")],Zi.prototype,"castSortValue",null),c([p({type:Ke,json:{write:!0}})],Zi.prototype,"viewpoint",void 0),c([p({type:String,json:{write:!0}})],Zi.prototype,"where",void 0),Zi=sP=c([N("esri.layers.support.MosaicRule")],Zi);const ha=Zi,Yd=li()({RSP_NearestNeighbor:"nearest",RSP_BilinearInterpolation:"bilinear",RSP_CubicConvolution:"cubic",RSP_Majority:"majority"}),$w=li()({esriNoDataMatchAny:"any",esriNoDataMatchAll:"all"});let ti=class extends me{constructor(){super(...arguments),this.layer=null,this.adjustAspectRatio=void 0,this.bandIds=void 0,this.compression=void 0,this.compressionQuality=void 0,this.compressionTolerance=.01,this.format=null,this.interpolation=null,this.noData=null,this.noDataInterpretation=void 0,this.pixelType=void 0,this.lercVersion=2}writeAdjustAspectRatio(e,t,r){this.layer.version<10.3||(t[r]=e)}writeCompressionQuality(e,t,r){this.format&&this.format.toLowerCase().indexOf("jpg")>-1&&e!=null&&(t[r]=e)}writeCompressionTolerance(e,t,r){this.format==="lerc"&&e!=null&&(t[r]=e)}writeLercVersion(e,t,r){this.format==="lerc"&&this.layer.version>=10.5&&(t[r]=e)}get version(){const e=this.layer;return e.commitProperty("bandIds"),e.commitProperty("format"),e.commitProperty("compressionQuality"),e.commitProperty("compressionTolerance"),e.commitProperty("interpolation"),e.commitProperty("noData"),e.commitProperty("noDataInterpretation"),e.commitProperty("mosaicRule"),e.commitProperty("renderingRule"),e.commitProperty("adjustAspectRatio"),e.commitProperty("pixelFilter"),e.commitProperty("renderer"),e.commitProperty("definitionExpression"),(this._get("version")||0)+1}set version(e){this._set("version",e)}get mosaicRule(){const e=this.layer;let t=e.mosaicRule;const r=e.definitionExpression;return t?r&&r!==t.where&&(t=t.clone(),t.where=r):r&&(t=new ha({where:r})),t}get renderingRule(){const e=this.layer;let t=e.renderingRule;const r=e.pixelFilter,i=!e.format||e.format.indexOf("jpg")>-1||e.format.indexOf("png")>-1;return t=this._addResampleRasterFunction(t),i&&!r&&(t=this.combineRendererWithRenderingRule()),t}combineRendererWithRenderingRule(){var e;const t=this.layer,{rasterInfo:r,renderingRule:i,renderer:n}=t;return!n||!yK(n)?i:bj(t_e(n,{rasterAttributeTable:r.attributeTable,pixelType:r.pixelType,dataType:r.dataType,bandProperties:(e=r.keyProperties)==null?void 0:e.BandProperties,convertColorRampToColormap:t.version<10.6}),i)}_addResampleRasterFunction(e){var t;if(((t=this.layer.renderer)==null?void 0:t.type)!=="vector-field"||e?.functionName==="Resample")return e;const r=this.layer.serviceDataType==="esriImageServiceDataTypeVector-UV"?7:10,i=new ki({functionName:"Resample",functionArguments:{ResamplingType:r,InputCellSize:{x:this.layer.pixelSizeX,y:this.layer.pixelSizeY}}});return bj(i,e)}};c([p()],ti.prototype,"layer",void 0),c([p({json:{write:!0}})],ti.prototype,"adjustAspectRatio",void 0),c([Se("adjustAspectRatio")],ti.prototype,"writeAdjustAspectRatio",null),c([p({json:{write:!0}}),ze("layer.bandIds")],ti.prototype,"bandIds",void 0),c([p({json:{write:!0}})],ti.prototype,"compression",void 0),c([p({json:{write:!0}}),ze("layer.compressionQuality")],ti.prototype,"compressionQuality",void 0),c([Se("compressionQuality")],ti.prototype,"writeCompressionQuality",null),c([p({json:{write:!0}}),ze("layer.compressionTolerance")],ti.prototype,"compressionTolerance",void 0),c([Se("compressionTolerance")],ti.prototype,"writeCompressionTolerance",null),c([p({json:{write:!0}}),ze("layer.format")],ti.prototype,"format",void 0),c([p({type:String,json:{read:{reader:Yd.read},write:{writer:Yd.write}}}),ze("layer.interpolation")],ti.prototype,"interpolation",void 0),c([p({json:{write:!0}}),ze("layer.noData")],ti.prototype,"noData",void 0),c([p({type:String,json:{read:{reader:$w.read},write:{writer:$w.write}}}),ze("layer.noDataInterpretation")],ti.prototype,"noDataInterpretation",void 0),c([p({json:{write:!0}})],ti.prototype,"pixelType",void 0),c([p({json:{write:!0}})],ti.prototype,"lercVersion",void 0),c([Se("lercVersion")],ti.prototype,"writeLercVersion",null),c([p({type:Number})],ti.prototype,"version",null),c([p({json:{write:!0}})],ti.prototype,"mosaicRule",null),c([p({json:{write:!0}})],ti.prototype,"renderingRule",null),ti=c([N("esri.layers.mixins.ExportImageServiceParameters")],ti);let On=class extends me{constructor(){super(...arguments),this.blockWidth=void 0,this.blockHeight=void 0,this.compression=null,this.origin=null,this.firstPyramidLevel=null,this.maximumPyramidLevel=null,this.pyramidScalingFactor=2,this.pyramidBlockWidth=null,this.pyramidBlockHeight=null,this.isVirtualTileInfo=!1,this.tileInfo=null,this.blockBoundary=null}};c([p({type:Number,json:{write:!0}})],On.prototype,"blockWidth",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"blockHeight",void 0),c([p({type:String,json:{write:!0}})],On.prototype,"compression",void 0),c([p({type:Ke,json:{write:!0}})],On.prototype,"origin",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"firstPyramidLevel",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"maximumPyramidLevel",void 0),c([p({json:{write:!0}})],On.prototype,"pyramidResolutions",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"pyramidScalingFactor",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"pyramidBlockWidth",void 0),c([p({type:Number,json:{write:!0}})],On.prototype,"pyramidBlockHeight",void 0),c([p({type:Boolean,json:{write:!0}})],On.prototype,"isVirtualTileInfo",void 0),c([p({json:{write:!0}})],On.prototype,"tileInfo",void 0),c([p()],On.prototype,"blockBoundary",void 0),On=c([N("esri.layers.support.RasterStorageInfo")],On);const c_e=On;let Nr=class extends me{constructor(e){super(e),this.attributeTable=null,this.bandCount=null,this.colormap=null,this.extent=null,this.format=void 0,this.height=null,this.width=null,this.histograms=null,this.keyProperties={},this.multidimensionalInfo=null,this.noDataValue=null,this.pixelSize=null,this.pixelType=null,this.isPseudoSpatialReference=!1,this.spatialReference=null,this.statistics=null,this.storageInfo=null,this.transform=null}get dataType(){var e,t,r;const i=(e=(t=this.keyProperties)==null||(r=t.DataType)==null?void 0:r.toLowerCase())!=null?e:"generic";return i==="stdtime"?"standard-time":i}get nativeExtent(){return this._get("nativeExtent")||this.extent}set nativeExtent(e){e&&this._set("nativeExtent",e)}get nativePixelSize(){if(!U(this.transform)||!this.transform.affectsPixelSize)return this.pixelSize;const e=this.nativeExtent;return{x:e.width/this.width,y:e.height/this.height}}};c([p({json:{write:!0}})],Nr.prototype,"attributeTable",void 0),c([p({json:{write:!0}})],Nr.prototype,"bandCount",void 0),c([p({json:{write:!0}})],Nr.prototype,"colormap",void 0),c([p({type:String,readOnly:!0})],Nr.prototype,"dataType",null),c([p({type:nt,json:{write:!0}})],Nr.prototype,"extent",void 0),c([p({type:nt,json:{write:!0}})],Nr.prototype,"nativeExtent",null),c([p({json:{write:!0}})],Nr.prototype,"nativePixelSize",null),c([p({json:{write:!0}})],Nr.prototype,"format",void 0),c([p({json:{write:!0}})],Nr.prototype,"height",void 0),c([p({json:{write:!0}})],Nr.prototype,"width",void 0),c([p({json:{write:!0}})],Nr.prototype,"histograms",void 0),c([p({json:{write:!0}})],Nr.prototype,"keyProperties",void 0),c([p({json:{write:!0}})],Nr.prototype,"multidimensionalInfo",void 0),c([p()],Nr.prototype,"noDataValue",void 0),c([p({json:{write:!0}})],Nr.prototype,"pixelSize",void 0),c([p({json:{write:!0}})],Nr.prototype,"pixelType",void 0),c([p()],Nr.prototype,"isPseudoSpatialReference",void 0),c([p({type:Fe,json:{write:!0}})],Nr.prototype,"spatialReference",void 0),c([p({json:{write:!0}})],Nr.prototype,"statistics",void 0),c([p({type:c_e,json:{write:!0}})],Nr.prototype,"storageInfo",void 0),c([p({json:{write:!0}})],Nr.prototype,"transform",void 0),Nr=c([N("esri.layers.support.RasterInfo")],Nr);const Ew=Nr;class h_e{constructor(){this._workerThread=null,this._destroyed=!1}async initialize(){const t=await bY("RasterWorker");this._destroyed?t.close():this._workerThread=t}destroy(){this._destroyed=!0,this._workerThread&&(this._workerThread.close(),this._workerThread=null)}async convertVectorFieldData(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("convertVectorFieldData",{pixelBlock:t.pixelBlock.toJSON(),type:t.dataType},r);return i?new qt(i):null}async decode(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const i=await this._workerThread.invoke("decode",t,r);return i?new qt(i):null}async symbolize(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const i={extent:t.extent&&t.extent.toJSON(),pixelBlock:U(t.pixelBlock)&&t.pixelBlock.toJSON(),simpleStretchParams:t.simpleStretchParams,bandIds:t.bandIds},n=await this._workerThread.invoke("symbolize",i,r);return n?new qt(n):null}async updateSymbolizer(t,r){var i;if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const n=t==null||(i=t.rendererJSON)==null?void 0:i.histograms;await Promise.all(this._workerThread.broadcast("updateSymbolizer",{symbolizerJSON:t.toJSON(),histograms:n},r))}async stretch(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");if(t==null||!t.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),stretchParams:t.stretchParams},n=await this._workerThread.invoke("stretch",i,r);return n?new qt(n):null}async split(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");if(t==null||!t.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON(),tileSize:t.tileSize,maximumPyramidLevel:t.maximumPyramidLevel},n=await this._workerThread.invoke("split",i,r);return n&&n.forEach((s,o)=>{n.set(o,s?qt.fromJSON(s):null)}),Promise.resolve(n)}async estimateStatisticsHistograms(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");if(t==null||!t.pixelBlock)return null;const i={srcPixelBlock:t.pixelBlock.toJSON()},n=await this._workerThread.invoke("estimateStatisticsHistograms",i,r);return Promise.resolve(n)}async mosaicAndTransform(t,r){var i;if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");if(t==null||(i=t.srcPixelBlocks)==null||!i.length)return null;const n={...t,srcPixelBlocks:t.srcPixelBlocks.map(o=>U(o)?o.toJSON():null)},s=await this._workerThread.invoke("mosaicAndTransform",n,r);return s?new qt(s):null}async createStreamlinesMesh(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const i={buffer:t.flowData.data.buffer,width:t.flowData.width,height:t.flowData.height},n=t.rendererSettings,s=await this._workerThread.invoke("createStreamlinesMesh",{flowData:i,rendererSettings:n},{...r,transferList:[i.buffer]});return{vertexData:new Float32Array(s.vertexBuffer),indexData:new Uint32Array(s.indexBuffer)}}getProjectionOffsetGrid(t,r){if(!this._workerThread)throw new Z("raster-jobhandler:no-connection","no available worker connection");const i=U(t.datumTransformation)?t.datumTransformation.steps.map(o=>({wkid:o.wkid,wkt:o.wkt,isInverse:o.isInverse})):null,n=U(t.rasterTransform)?t.rasterTransform.toJSON():null,s={projectedExtent:t.projectedExtent.toJSON(),srcBufferExtent:t.srcBufferExtent.toJSON(),pixelSize:t.pixelSize,hasWrapAround:t.hasWrapAround,spacing:t.spacing,datumTransformationSteps:i,rasterTransform:n,isAdaptive:t.isAdaptive};return this._workerThread.invoke("getProjectionOffsetGrid",s,r)}}var Z4,wj,_j,bK={exports:{}};wj=bK,Z4=function(){function e(){this.pos=0,this.bufferLength=0,this.eof=!1,this.buffer=null}return e.prototype={ensureBuffer:function(t){var r=this.buffer,i=r?r.byteLength:0;if(t<i)return r;for(var n=512;n<t;)n<<=1;for(var s=new Uint8Array(n),o=0;o<i;++o)s[o]=r[o];return this.buffer=s},getByte:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return this.buffer[this.pos++]},getBytes:function(t){var r=this.pos;if(t){this.ensureBuffer(r+t);for(var i=r+t;!this.eof&&this.bufferLength<i;)this.readBlock();var n=this.bufferLength;i>n&&(i=n)}else{for(;!this.eof;)this.readBlock();i=this.bufferLength}return this.pos=i,this.buffer.subarray(r,i)},lookChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos])},getChar:function(){for(var t=this.pos;this.bufferLength<=t;){if(this.eof)return null;this.readBlock()}return String.fromCharCode(this.buffer[this.pos++])},makeSubStream:function(t,r,i){for(var n=t+r;this.bufferLength<=n&&!this.eof;)this.readBlock();return new Stream(this.buffer,t,r,i)},skip:function(t){t||(t=1),this.pos+=t},reset:function(){this.pos=0}},e}(),(_j=function(){if(!self||!self.Uint32Array)return null;var e=new Uint32Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t=new Uint32Array([3,4,5,6,7,8,9,10,65547,65549,65551,65553,131091,131095,131099,131103,196643,196651,196659,196667,262211,262227,262243,262259,327811,327843,327875,327907,258,258,258]),r=new Uint32Array([1,2,3,4,65541,65543,131081,131085,196625,196633,262177,262193,327745,327777,393345,393409,459009,459137,524801,525057,590849,591361,657409,658433,724993,727041,794625,798721,868353,876545]),i=[new Uint32Array([459008,524368,524304,524568,459024,524400,524336,590016,459016,524384,524320,589984,524288,524416,524352,590048,459012,524376,524312,589968,459028,524408,524344,590032,459020,524392,524328,59e4,524296,524424,524360,590064,459010,524372,524308,524572,459026,524404,524340,590024,459018,524388,524324,589992,524292,524420,524356,590056,459014,524380,524316,589976,459030,524412,524348,590040,459022,524396,524332,590008,524300,524428,524364,590072,459009,524370,524306,524570,459025,524402,524338,590020,459017,524386,524322,589988,524290,524418,524354,590052,459013,524378,524314,589972,459029,524410,524346,590036,459021,524394,524330,590004,524298,524426,524362,590068,459011,524374,524310,524574,459027,524406,524342,590028,459019,524390,524326,589996,524294,524422,524358,590060,459015,524382,524318,589980,459031,524414,524350,590044,459023,524398,524334,590012,524302,524430,524366,590076,459008,524369,524305,524569,459024,524401,524337,590018,459016,524385,524321,589986,524289,524417,524353,590050,459012,524377,524313,589970,459028,524409,524345,590034,459020,524393,524329,590002,524297,524425,524361,590066,459010,524373,524309,524573,459026,524405,524341,590026,459018,524389,524325,589994,524293,524421,524357,590058,459014,524381,524317,589978,459030,524413,524349,590042,459022,524397,524333,590010,524301,524429,524365,590074,459009,524371,524307,524571,459025,524403,524339,590022,459017,524387,524323,589990,524291,524419,524355,590054,459013,524379,524315,589974,459029,524411,524347,590038,459021,524395,524331,590006,524299,524427,524363,590070,459011,524375,524311,524575,459027,524407,524343,590030,459019,524391,524327,589998,524295,524423,524359,590062,459015,524383,524319,589982,459031,524415,524351,590046,459023,524399,524335,590014,524303,524431,524367,590078,459008,524368,524304,524568,459024,524400,524336,590017,459016,524384,524320,589985,524288,524416,524352,590049,459012,524376,524312,589969,459028,524408,524344,590033,459020,524392,524328,590001,524296,524424,524360,590065,459010,524372,524308,524572,459026,524404,524340,590025,459018,524388,524324,589993,524292,524420,524356,590057,459014,524380,524316,589977,459030,524412,524348,590041,459022,524396,524332,590009,524300,524428,524364,590073,459009,524370,524306,524570,459025,524402,524338,590021,459017,524386,524322,589989,524290,524418,524354,590053,459013,524378,524314,589973,459029,524410,524346,590037,459021,524394,524330,590005,524298,524426,524362,590069,459011,524374,524310,524574,459027,524406,524342,590029,459019,524390,524326,589997,524294,524422,524358,590061,459015,524382,524318,589981,459031,524414,524350,590045,459023,524398,524334,590013,524302,524430,524366,590077,459008,524369,524305,524569,459024,524401,524337,590019,459016,524385,524321,589987,524289,524417,524353,590051,459012,524377,524313,589971,459028,524409,524345,590035,459020,524393,524329,590003,524297,524425,524361,590067,459010,524373,524309,524573,459026,524405,524341,590027,459018,524389,524325,589995,524293,524421,524357,590059,459014,524381,524317,589979,459030,524413,524349,590043,459022,524397,524333,590011,524301,524429,524365,590075,459009,524371,524307,524571,459025,524403,524339,590023,459017,524387,524323,589991,524291,524419,524355,590055,459013,524379,524315,589975,459029,524411,524347,590039,459021,524395,524331,590007,524299,524427,524363,590071,459011,524375,524311,524575,459027,524407,524343,590031,459019,524391,524327,589999,524295,524423,524359,590063,459015,524383,524319,589983,459031,524415,524351,590047,459023,524399,524335,590015,524303,524431,524367,590079]),9],n=[new Uint32Array([327680,327696,327688,327704,327684,327700,327692,327708,327682,327698,327690,327706,327686,327702,327694,0,327681,327697,327689,327705,327685,327701,327693,327709,327683,327699,327691,327707,327687,327703,327695,0]),5];function s(a){throw new Error(a)}function o(a){var l=0,u=a[l++],h=a[l++];u!=-1&&h!=-1||s("Invalid header in flate stream"),(15&u)!=8&&s("Unknown compression method in flate stream"),((u<<8)+h)%31!=0&&s("Bad FCHECK in flate stream"),32&h&&s("FDICT bit set in flate stream"),this.bytes=a,this.bytesPos=l,this.codeSize=0,this.codeBuf=0,Z4.call(this)}return o.prototype=Object.create(Z4.prototype),o.prototype.getBits=function(a){for(var l,u=this.codeSize,h=this.codeBuf,d=this.bytes,f=this.bytesPos;u<a;)(l=d[f++])===void 0&&s("Bad encoding in flate stream"),h|=l<<u,u+=8;return l=h&(1<<a)-1,this.codeBuf=h>>a,this.codeSize=u-=a,this.bytesPos=f,l},o.prototype.getCode=function(a){for(var l=a[0],u=a[1],h=this.codeSize,d=this.codeBuf,f=this.bytes,m=this.bytesPos;h<u;){var g;(g=f[m++])===void 0&&s("Bad encoding in flate stream"),d|=g<<h,h+=8}var b=l[d&(1<<u)-1],w=b>>16,_=65535&b;return(h==0||h<w||w==0)&&s("Bad encoding in flate stream"),this.codeBuf=d>>w,this.codeSize=h-w,this.bytesPos=m,_},o.prototype.generateHuffmanTable=function(a){for(var l=a.length,u=0,h=0;h<l;++h)a[h]>u&&(u=a[h]);for(var d=1<<u,f=new Uint32Array(d),m=1,g=0,b=2;m<=u;++m,g<<=1,b<<=1)for(var w=0;w<l;++w)if(a[w]==m){var _=0,x=g;for(h=0;h<m;++h)_=_<<1|1&x,x>>=1;for(h=_;h<d;h+=b)f[h]=m<<16|w;++g}return[f,u]},o.prototype.readBlock=function(){function a(Q,le,re,we,_e){for(var Ce=Q.getBits(re)+we;Ce-- >0;)le[b++]=_e}var l=this.getBits(3);if(1&l&&(this.eof=!0),(l>>=1)!=0){var u,h;if(l==1)u=i,h=n;else if(l==2){for(var d=this.getBits(5)+257,f=this.getBits(5)+1,m=this.getBits(4)+4,g=Array(e.length),b=0;b<m;)g[e[b++]]=this.getBits(3);for(var w=this.generateHuffmanTable(g),_=0,x=(b=0,d+f),I=new Array(x);b<x;){var S=this.getCode(w);S==16?a(this,I,2,3,_):S==17?a(this,I,3,3,_=0):S==18?a(this,I,7,11,_=0):I[b++]=_=S}u=this.generateHuffmanTable(I.slice(0,d)),h=this.generateHuffmanTable(I.slice(d,x))}else s("Unknown block type in flate stream");for(var T=(A=this.buffer)?A.length:0,$=this.bufferLength;;){var E=this.getCode(u);if(E<256)$+1>=T&&(T=(A=this.ensureBuffer($+1)).length),A[$++]=E;else{if(E==256)return void(this.bufferLength=$);var C=(E=t[E-=257])>>16;C>0&&(C=this.getBits(C)),_=(65535&E)+C,E=this.getCode(h),(C=(E=r[E])>>16)>0&&(C=this.getBits(C));var O=(65535&E)+C;$+_>=T&&(T=(A=this.ensureBuffer($+_)).length);for(var R=0;R<_;++R,++$)A[$]=A[$-O]}}}else{var D,F=this.bytes,z=this.bytesPos;(D=F[z++])===void 0&&s("Bad block header in flate stream");var B=D;(D=F[z++])===void 0&&s("Bad block header in flate stream"),B|=D<<8,(D=F[z++])===void 0&&s("Bad block header in flate stream");var y=D;(D=F[z++])===void 0&&s("Bad block header in flate stream"),(y|=D<<8)!=(65535&~B)&&s("Bad uncompressed block length in flate stream"),this.codeBuf=0,this.codeSize=0;var M=this.bufferLength,A=this.ensureBuffer(M+B),P=M+B;this.bufferLength=P;for(var Y=M;Y<P;++Y){if((D=F[z++])===void 0){this.eof=!0;break}A[Y]=D}this.bytesPos=z}},o}())!==void 0&&(wj.exports=_j);const qm=bK.exports;class a6{constructor(t){t&&(this.canvas=t.canvas,this.ctx=t.ctx||t.canvas&&t.canvas.getContext("2d"))}decode(t,r,i){if(!t||t.byteLength<10)throw new Z("imagecanvasdecoder: decode","required a valid encoded data as input.");let{width:n,height:s,format:o}=r;const{applyJpegMask:a}=r;if(a&&(!n||!s))throw new Z("imagecanvasdecoder: decode","image width and height are needed to apply jpeg mask directly to canvas");return new Promise((l,u)=>{let h=null;o==="jpg"&&a&&(h=a6.getMask(t,{width:n,height:s}));const d=new Blob([new Uint8Array(t)],{type:"image/"+o=="jpg"?"jpeg":o}),f=URL.createObjectURL(d),m=new Image;let g;m.src=f,m.onload=()=>{if(URL.revokeObjectURL(f),wl(i))return void u(Zr());n=m.width,s=m.height,this.canvas?(this.canvas.width===n&&this.canvas.height===s||(this.canvas.width=n,this.canvas.height=s),this.ctx.clearRect(0,0,n,s)):(this.canvas=document.createElement("canvas"),this.canvas.width=n,this.canvas.height=s,this.ctx=this.canvas.getContext("2d")),this.ctx.drawImage(m,0,0);const b=this.ctx.getImageData(0,0,n,s);let w;if(g=b.data,r.renderOnCanvas){if(h)for(w=0;w<h.length;w++)h[w]?g[4*w+3]=255:g[4*w+3]=0;return this.ctx.putImageData(b,0,0),void l(null)}const _=n*s,x=new Uint8Array(_),I=new Uint8Array(_),S=new Uint8Array(_);if(h)for(w=0;w<_;w++)x[w]=g[4*w],I[w]=g[4*w+1],S[w]=g[4*w+2];else for(h=new Uint8Array(_),w=0;w<_;w++)x[w]=g[4*w],I[w]=g[4*w+1],S[w]=g[4*w+2],h[w]=g[4*w+3];l({width:n,height:s,pixels:[x,I,S],mask:h,pixelType:"u8"})},m.onerror=()=>{URL.revokeObjectURL(f),u("cannot load image")}})}static getMask(t,r){let i=null;try{const n=new Uint8Array(t),s=Math.ceil(n.length/2);let o=0;const a=n.length-2;for(o=s;o<a&&(n[o]!==255||n[o+1]!==217);o++);if(o+=2,o<n.length-1){const l=new qm(n.subarray(o)).getBytes();i=new Uint8Array(r.width*r.height);let u=0;for(let h=0;h<l.length;h++)for(let d=7;d>=0;d--)i[u++]=l[h]>>d&1}}catch{}return i}}var xj,Sj,Mj,wK={exports:{}};xj=wK,Sj=function(){var e=function(){function t(r){this.message="JPEG error: "+r}return t.prototype=new Error,t.prototype.name="JpegError",t.constructor=t,t}();return function(){if(!self||!self.Uint8ClampedArray)return null;var t=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),r=4017,i=799,n=3406,s=2276,o=1567,a=3784,l=5793,u=2896;function h(){this.decodeTransform=null,this.colorTransform=-1}function d(_,x){for(var I,S,T=0,$=[],E=16;E>0&&!_[E-1];)E--;$.push({children:[],index:0});var C,O=$[0];for(I=0;I<E;I++){for(S=0;S<_[I];S++){for((O=$.pop()).children[O.index]=x[T];O.index>0;)O=$.pop();for(O.index++,$.push(O);$.length<=I;)$.push(C={children:[],index:0}),O.children[O.index]=C.children,O=C;T++}I+1<E&&($.push(C={children:[],index:0}),O.children[O.index]=C.children,O=C)}return $[0].children}function f(_,x,I){return 64*((_.blocksPerLine+1)*x+I)}function m(_,x,I,S,T,$,E,C,O){var R=I.mcusPerLine,D=I.progressive,F=x,z=0,B=0;function y(){if(B>0)return B--,z>>B&1;if((z=_[x++])===255){var G=_[x++];if(G)throw new e("unexpected marker "+(z<<8|G).toString(16))}return B=7,z>>>7}function M(G){for(var de=G;;){if(typeof(de=de[y()])=="number")return de;if(typeof de!="object")throw new e("invalid huffman sequence")}}function A(G){for(var de=0;G>0;)de=de<<1|y(),G--;return de}function P(G){if(G===1)return y()===1?1:-1;var de=A(G);return de>=1<<G-1?de:de+(-1<<G)+1}function Y(G,de){var fe=M(G.huffmanTableDC),Me=fe===0?0:P(fe);G.blockData[de]=G.pred+=Me;for(var Oe=1;Oe<64;){var Ye=M(G.huffmanTableAC),Xe=15&Ye,ot=Ye>>4;if(Xe!==0){var Jt=t[Oe+=ot];G.blockData[de+Jt]=P(Xe),Oe++}else{if(ot<15)break;Oe+=16}}}function Q(G,de){var fe=M(G.huffmanTableDC),Me=fe===0?0:P(fe)<<O;G.blockData[de]=G.pred+=Me}function le(G,de){G.blockData[de]|=y()<<O}var re=0;function we(G,de){if(re>0)re--;else for(var fe=$,Me=E;fe<=Me;){var Oe=M(G.huffmanTableAC),Ye=15&Oe,Xe=Oe>>4;if(Ye!==0){var ot=t[fe+=Xe];G.blockData[de+ot]=P(Ye)*(1<<O),fe++}else{if(Xe<15){re=A(Xe)+(1<<Xe)-1;break}fe+=16}}}var _e,Ce=0;function Ne(G,de){for(var fe,Me,Oe=$,Ye=E,Xe=0;Oe<=Ye;){var ot=t[Oe];switch(Ce){case 0:if(Xe=(Me=M(G.huffmanTableAC))>>4,(fe=15&Me)==0)Xe<15?(re=A(Xe)+(1<<Xe),Ce=4):(Xe=16,Ce=1);else{if(fe!==1)throw new e("invalid ACn encoding");_e=P(fe),Ce=Xe?2:3}continue;case 1:case 2:G.blockData[de+ot]?G.blockData[de+ot]+=y()<<O:--Xe==0&&(Ce=Ce===2?3:0);break;case 3:G.blockData[de+ot]?G.blockData[de+ot]+=y()<<O:(G.blockData[de+ot]=_e<<O,Ce=0);break;case 4:G.blockData[de+ot]&&(G.blockData[de+ot]+=y()<<O)}Oe++}Ce===4&&--re==0&&(Ce=0)}function ht(G,de,fe,Me,Oe){var Ye=fe%R;de(G,f(G,(fe/R|0)*G.v+Me,Ye*G.h+Oe))}function st(G,de,fe){de(G,f(G,fe/G.blocksPerLine|0,fe%G.blocksPerLine))}var pt,Pt,X,te,he,V,J=S.length;V=D?$===0?C===0?Q:le:C===0?we:Ne:Y;var ne,pe,k,q,H=0;for(pe=J===1?S[0].blocksPerLine*S[0].blocksPerColumn:R*I.mcusPerColumn;H<pe;){var ee=T?Math.min(pe-H,T):pe;for(Pt=0;Pt<J;Pt++)S[Pt].pred=0;if(re=0,J===1)for(pt=S[0],he=0;he<ee;he++)st(pt,V,H),H++;else for(he=0;he<ee;he++){for(Pt=0;Pt<J;Pt++)for(k=(pt=S[Pt]).h,q=pt.v,X=0;X<q;X++)for(te=0;te<k;te++)ht(pt,V,H,X,te);H++}B=0,(ne=w(_,x))&&ne.invalid&&(console.log("decodeScan - unexpected MCU data, next marker is: "+ne.invalid),x=ne.offset);var W=ne&&ne.marker;if(!W||W<=65280)throw new e("marker was not found");if(!(W>=65488&&W<=65495))break;x+=2}return(ne=w(_,x))&&ne.invalid&&(console.log("decodeScan - unexpected Scan data, next marker is: "+ne.invalid),x=ne.offset),x-F}function g(_,x,I){var S,T,$,E,C,O,R,D,F,z,B,y,M,A,P,Y,Q,le=_.quantizationTable,re=_.blockData;if(!le)throw new e("missing required Quantization Table.");for(var we=0;we<64;we+=8)F=re[x+we],z=re[x+we+1],B=re[x+we+2],y=re[x+we+3],M=re[x+we+4],A=re[x+we+5],P=re[x+we+6],Y=re[x+we+7],F*=le[we],(z|B|y|M|A|P|Y)!=0?(z*=le[we+1],B*=le[we+2],y*=le[we+3],M*=le[we+4],A*=le[we+5],P*=le[we+6],Y*=le[we+7],T=(S=(S=l*F+128>>8)+(T=l*M+128>>8)+1>>1)-T,Q=($=B)*a+(E=P)*o+128>>8,$=$*o-E*a+128>>8,R=(C=(C=u*(z-Y)+128>>8)+(R=A<<4)+1>>1)-R,O=(D=(D=u*(z+Y)+128>>8)+(O=y<<4)+1>>1)-O,E=(S=S+(E=Q)+1>>1)-E,$=(T=T+$+1>>1)-$,Q=C*s+D*n+2048>>12,C=C*n-D*s+2048>>12,D=Q,Q=O*i+R*r+2048>>12,O=O*r-R*i+2048>>12,R=Q,I[we]=S+D,I[we+7]=S-D,I[we+1]=T+R,I[we+6]=T-R,I[we+2]=$+O,I[we+5]=$-O,I[we+3]=E+C,I[we+4]=E-C):(Q=l*F+512>>10,I[we]=Q,I[we+1]=Q,I[we+2]=Q,I[we+3]=Q,I[we+4]=Q,I[we+5]=Q,I[we+6]=Q,I[we+7]=Q);for(var _e=0;_e<8;++_e)F=I[_e],((z=I[_e+8])|(B=I[_e+16])|(y=I[_e+24])|(M=I[_e+32])|(A=I[_e+40])|(P=I[_e+48])|(Y=I[_e+56]))!=0?(T=(S=4112+((S=l*F+2048>>12)+(T=l*M+2048>>12)+1>>1))-T,Q=($=B)*a+(E=P)*o+2048>>12,$=$*o-E*a+2048>>12,E=Q,R=(C=(C=u*(z-Y)+2048>>12)+(R=A)+1>>1)-R,O=(D=(D=u*(z+Y)+2048>>12)+(O=y)+1>>1)-O,Q=C*s+D*n+2048>>12,C=C*n-D*s+2048>>12,D=Q,Q=O*i+R*r+2048>>12,O=O*r-R*i+2048>>12,F=(F=(S=S+E+1>>1)+D)<16?0:F>=4080?255:F>>4,z=(z=(T=T+$+1>>1)+(R=Q))<16?0:z>=4080?255:z>>4,B=(B=($=T-$)+O)<16?0:B>=4080?255:B>>4,y=(y=(E=S-E)+C)<16?0:y>=4080?255:y>>4,M=(M=E-C)<16?0:M>=4080?255:M>>4,A=(A=$-O)<16?0:A>=4080?255:A>>4,P=(P=T-R)<16?0:P>=4080?255:P>>4,Y=(Y=S-D)<16?0:Y>=4080?255:Y>>4,re[x+_e]=F,re[x+_e+8]=z,re[x+_e+16]=B,re[x+_e+24]=y,re[x+_e+32]=M,re[x+_e+40]=A,re[x+_e+48]=P,re[x+_e+56]=Y):(Q=(Q=l*F+8192>>14)<-2040?0:Q>=2024?255:Q+2056>>4,re[x+_e]=Q,re[x+_e+8]=Q,re[x+_e+16]=Q,re[x+_e+24]=Q,re[x+_e+32]=Q,re[x+_e+40]=Q,re[x+_e+48]=Q,re[x+_e+56]=Q)}function b(_,x){for(var I=x.blocksPerLine,S=x.blocksPerColumn,T=new Int16Array(64),$=0;$<S;$++)for(var E=0;E<I;E++)g(x,f(x,$,E),T);return x.blockData}function w(_,x,I){function S(O){return _[O]<<8|_[O+1]}var T=_.length-1,$=I<x?I:x;if(x>=T)return null;var E=S(x);if(E>=65472&&E<=65534)return{invalid:null,marker:E,offset:x};for(var C=S($);!(C>=65472&&C<=65534);){if(++$>=T)return null;C=S($)}return{invalid:E.toString(16),marker:C,offset:$}}return h.prototype={parse:function(_){function x(){var G=_[E]<<8|_[E+1];return E+=2,G}function I(){var G=x(),de=E+G-2,fe=w(_,de,E);fe&&fe.invalid&&(console.log("readDataBlock - incorrect length, next marker is: "+fe.invalid),de=fe.offset);var Me=_.subarray(E,de);return E+=Me.length,Me}function S(G){for(var de=Math.ceil(G.samplesPerLine/8/G.maxH),fe=Math.ceil(G.scanLines/8/G.maxV),Me=0;Me<G.components.length;Me++){he=G.components[Me];var Oe=Math.ceil(Math.ceil(G.samplesPerLine/8)*he.h/G.maxH),Ye=Math.ceil(Math.ceil(G.scanLines/8)*he.v/G.maxV),Xe=de*he.h,ot=fe*he.v*64*(Xe+1);he.blockData=new Int16Array(ot),he.blocksPerLine=Oe,he.blocksPerColumn=Ye}G.mcusPerLine=de,G.mcusPerColumn=fe}var T,$,E=0,C=null,O=null,R=[],D=[],F=[],z=x();if(z!==65496)throw new e("SOI not found");for(z=x();z!==65497;){var B,y,M;switch(z){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var A=I();z===65504&&A[0]===74&&A[1]===70&&A[2]===73&&A[3]===70&&A[4]===0&&(C={version:{major:A[5],minor:A[6]},densityUnits:A[7],xDensity:A[8]<<8|A[9],yDensity:A[10]<<8|A[11],thumbWidth:A[12],thumbHeight:A[13],thumbData:A.subarray(14,14+3*A[12]*A[13])}),z===65518&&A[0]===65&&A[1]===100&&A[2]===111&&A[3]===98&&A[4]===101&&(O={version:A[5]<<8|A[6],flags0:A[7]<<8|A[8],flags1:A[9]<<8|A[10],transformCode:A[11]});break;case 65499:for(var P=x()+E-2;E<P;){var Y=_[E++],Q=new Uint16Array(64);if(Y>>4==0)for(y=0;y<64;y++)Q[t[y]]=_[E++];else{if(Y>>4!=1)throw new e("DQT - invalid table spec");for(y=0;y<64;y++)Q[t[y]]=x()}R[15&Y]=Q}break;case 65472:case 65473:case 65474:if(T)throw new e("Only single frame JPEGs supported");x(),(T={}).extended=z===65473,T.progressive=z===65474,T.precision=_[E++],T.scanLines=x(),T.samplesPerLine=x(),T.components=[],T.componentIds={};var le,re=_[E++],we=0,_e=0;for(B=0;B<re;B++){le=_[E];var Ce=_[E+1]>>4,Ne=15&_[E+1];we<Ce&&(we=Ce),_e<Ne&&(_e=Ne);var ht=_[E+2];M=T.components.push({h:Ce,v:Ne,quantizationId:ht,quantizationTable:null}),T.componentIds[le]=M-1,E+=3}T.maxH=we,T.maxV=_e,S(T);break;case 65476:var st=x();for(B=2;B<st;){var pt=_[E++],Pt=new Uint8Array(16),X=0;for(y=0;y<16;y++,E++)X+=Pt[y]=_[E];var te=new Uint8Array(X);for(y=0;y<X;y++,E++)te[y]=_[E];B+=17+X,(pt>>4==0?F:D)[15&pt]=d(Pt,te)}break;case 65501:x(),$=x();break;case 65498:x();var he,V=_[E++],J=[];for(B=0;B<V;B++){var ne=T.componentIds[_[E++]];he=T.components[ne];var pe=_[E++];he.huffmanTableDC=F[pe>>4],he.huffmanTableAC=D[15&pe],J.push(he)}var k=_[E++],q=_[E++],H=_[E++],ee=m(_,E,T,J,$,k,q,H>>4,15&H);E+=ee;break;case 65535:_[E]!==255&&E--;break;default:if(_[E-3]===255&&_[E-2]>=192&&_[E-2]<=254){E-=3;break}throw new e("unknown marker "+z.toString(16))}z=x()}for(this.width=T.samplesPerLine,this.height=T.scanLines,this.jfif=C,this.eof=E,this.adobe=O,this.components=[],B=0;B<T.components.length;B++){var W=R[(he=T.components[B]).quantizationId];W&&(he.quantizationTable=W),this.components.push({output:b(T,he),scaleX:he.h/T.maxH,scaleY:he.v/T.maxV,blocksPerLine:he.blocksPerLine,blocksPerColumn:he.blocksPerColumn})}this.numComponents=this.components.length},_getLinearizedBlockData:function(_,x){var I,S,T,$,E,C,O,R,D,F,z,B=this.width/_,y=this.height/x,M=0,A=this.components.length,P=_*x*A,Y=new Uint8ClampedArray(P),Q=new Uint32Array(_),le=4294967288;for(O=0;O<A;O++){for(S=(I=this.components[O]).scaleX*B,T=I.scaleY*y,M=O,z=I.output,$=I.blocksPerLine+1<<3,E=0;E<_;E++)R=0|E*S,Q[E]=(R&le)<<3|7&R;for(C=0;C<x;C++)for(F=$*((R=0|C*T)&le)|(7&R)<<3,E=0;E<_;E++)Y[M]=z[F+Q[E]],M+=A}var re=this.decodeTransform;if(re)for(O=0;O<P;)for(R=0,D=0;R<A;R++,O++,D+=2)Y[O]=(Y[O]*re[D]>>8)+re[D+1];return Y},_isColorConversionNeeded:function(){return this.adobe?!!this.adobe.transformCode:this.numComponents===3?this.colorTransform!==0:this.colorTransform===1},_convertYccToRgb:function(_){for(var x,I,S,T=0,$=_.length;T<$;T+=3)x=_[T],I=_[T+1],S=_[T+2],_[T]=x-179.456+1.402*S,_[T+1]=x+135.459-.344*I-.714*S,_[T+2]=x-226.816+1.772*I;return _},_convertYcckToRgb:function(_){for(var x,I,S,T,$=0,E=0,C=_.length;E<C;E+=4)x=_[E],I=_[E+1],S=_[E+2],T=_[E+3],_[$++]=I*(-660635669420364e-19*I+.000437130475926232*S-54080610064599e-18*x+.00048449797120281*T-.154362151871126)-122.67195406894+S*(-.000957964378445773*S+.000817076911346625*x-.00477271405408747*T+1.53380253221734)+x*(.000961250184130688*x-.00266257332283933*T+.48357088451265)+T*(-.000336197177618394*T+.484791561490776),_[$++]=107.268039397724+I*(219927104525741e-19*I-.000640992018297945*S+.000659397001245577*x+.000426105652938837*T-.176491792462875)+S*(-.000778269941513683*S+.00130872261408275*x+.000770482631801132*T-.151051492775562)+x*(.00126935368114843*x-.00265090189010898*T+.25802910206845)+T*(-.000318913117588328*T-.213742400323665),_[$++]=I*(-.000570115196973677*I-263409051004589e-19*S+.0020741088115012*x-.00288260236853442*T+.814272968359295)-20.810012546947+S*(-153496057440975e-19*S-.000132689043961446*x+.000560833691242812*T-.195152027534049)+x*(.00174418132927582*x-.00255243321439347*T+.116935020465145)+T*(-.000343531996510555*T+.24165260232407);return _},_convertYcckToCmyk:function(_){for(var x,I,S,T=0,$=_.length;T<$;T+=4)x=_[T],I=_[T+1],S=_[T+2],_[T]=434.456-x-1.402*S,_[T+1]=119.541-x+.344*I+.714*S,_[T+2]=481.816-x-1.772*I;return _},_convertCmykToRgb:function(_){for(var x,I,S,T,$=0,E=1/255,C=0,O=_.length;C<O;C+=4)x=_[C]*E,I=_[C+1]*E,S=_[C+2]*E,T=_[C+3]*E,_[$++]=255+x*(-4.387332384609988*x+54.48615194189176*I+18.82290502165302*S+212.25662451639585*T-285.2331026137004)+I*(1.7149763477362134*I-5.6096736904047315*S-17.873870861415444*T-5.497006427196366)+S*(-2.5217340131683033*S-21.248923337353073*T+17.5119270841813)-T*(21.86122147463605*T+189.48180835922747),_[$++]=255+x*(8.841041422036149*x+60.118027045597366*I+6.871425592049007*S+31.159100130055922*T-79.2970844816548)+I*(-15.310361306967817*I+17.575251261109482*S+131.35250912493976*T-190.9453302588951)+S*(4.444339102852739*S+9.8632861493405*T-24.86741582555878)-T*(20.737325471181034*T+187.80453709719578),_[$++]=255+x*(.8842522430003296*x+8.078677503112928*I+30.89978309703729*S-.23883238689178934*T-14.183576799673286)+I*(10.49593273432072*I+63.02378494754052*S+50.606957656360734*T-112.23884253719248)+S*(.03296041114873217*S+115.60384449646641*T-193.58209356861505)-T*(22.33816807309886*T+180.12613974708367);return _},getData:function(_,x,I){if(this.numComponents>4)throw new e("Unsupported color mode");var S=this._getLinearizedBlockData(_,x);if(this.numComponents===1&&I){for(var T=S.length,$=new Uint8ClampedArray(3*T),E=0,C=0;C<T;C++){var O=S[C];$[E++]=O,$[E++]=O,$[E++]=O}return $}if(this.numComponents===3&&this._isColorConversionNeeded())return this._convertYccToRgb(S);if(this.numComponents===4){if(this._isColorConversionNeeded())return I?this._convertYcckToRgb(S):this._convertYcckToCmyk(S);if(I)return this._convertCmykToRgb(S)}return S}},h}()},(Mj=Sj())!==void 0&&(xj.exports=Mj);const fI=wK.exports;class d_e{static decode(t){const r=new Uint8Array(t),i=new fI;i.parse(r);const{width:n,height:s,numComponents:o,eof:a}=i,l=i.getData(n,s,!0);let u;const h=n*s;let d=0,f=0,m=0;if(a<r.length-1){const w=new qm(r.subarray(a)).getBytes();u=new Uint8Array(h);let _=0;for(d=0;d<w.length;d++)for(m=7;m>=0;m--)u[_++]=w[d]>>m&1}let g,b=null;if(o===1)b=[l,l,l];else{for(b=[],d=0;d<3;d++)g=new Uint8Array(h),b.push(g);for(m=0,f=0;f<h;f++)for(d=0;d<3;d++)b[d][f]=l[m++]}return{width:n,height:s,pixels:b,mask:u}}}function p_e(e,t){let r=0,i="",n=0,s=0;const o=e.length;for(;r<o;)s=e[r++],n=s>>4,n<8?n=1:n===15?(n=4,s=(7&s)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++]):n===14?(n=3,s=(15&s)<<12|(63&e[r++])<<6|63&e[r++]):(n=2,s=(31&s)<<6|63&e[r++]),(s!==0||t)&&(i+=String.fromCharCode(s));return i}function f_e(e,t,r,i=!0){if(t%4!=0||r%4!=0){const n=new ArrayBuffer(4*Math.ceil(r/4)),s=new Uint8Array(n),o=new Uint8Array(e,t,r);if(i)for(let a=0;a<s.length;a+=4)s[a]=o[a+3],s[a+1]=o[a+2],s[a+2]=o[a+1],s[a+3]=o[a];else s.set(o);return new Uint32Array(s.buffer)}if(i){const n=new Uint8Array(e,t,r),s=new Uint8Array(n.length);for(let o=0;o<s.length;o+=4)s[o]=n[o+3],s[o+1]=n[o+2],s[o+2]=n[o+1],s[o+3]=n[o];return new Uint32Array(s.buffer)}return new Uint32Array(e,t,r/4)}function Ij(){const e=[];for(let t=0;t<=257;t++)e[t]=[t];return e}function Tj(e,t){for(let r=0;r<t.length;r++)e.push(t[r])}const Sg=new Set;function l6(e,t,r,i=!0){const n=f_e(e,t,r,i);let s=9,o=Ij(),a=32,l=o.length,u=[],h=1,d=n[0],f=0;const m=n.length,g=8*(4*m-r),b=[];for(;d!=null;){if(a>=s)a-=s,f=d>>>32-s,d<<=s;else{f=d>>>32-a,d=n[h++];const _=s-a;a=32-_,f=(f<<_)+(d>>>a),d<<=_}if(f===257)break;if(f===256){s=9,o=Ij(),l=o.length,u=[];continue}const w=o[f];if(w==null){if(f>o.length)throw"data integrity issue: code does not exist on code page";u.push(u[0]),o[l++]=u.slice(),Tj(b,u)}else Tj(b,w),u.push(w[0]),u.length>1&&(o[l++]=u.slice()),u=w.slice();if(Sg.has(l)&&s++,a===0&&(d=n[h++],a=32),h>m||h===m&&a<=g)break}return new Uint8Array(b)}Sg.add(511),Sg.add(1023),Sg.add(2047),Sg.add(4095),Sg.add(8191);const u6=(()=>{const e=[];return e[254]="NEWSUBFILETYPE",e[255]="SUBFILETYPE",e[256]="IMAGEWIDTH",e[257]="IMAGELENGTH",e[258]="BITSPERSAMPLE",e[259]="COMPRESSION",e[262]="PHOTOMETRICINTERPRETATION",e[263]="THRESHHOLDING",e[264]="CELLWIDTH",e[265]="CELLLENGTH",e[266]="FILLORDER",e[269]="DOCUMENTNAME",e[270]="IMAGEDESCRIPTION",e[271]="MAKE",e[272]="MODEL",e[273]="STRIPOFFSETS",e[274]="ORIENTATION",e[277]="SAMPLESPERPIXEL",e[278]="ROWSPERSTRIP",e[279]="STRIPBYTECOUNTS",e[280]="MINSAMPLEVALUE",e[281]="MAXSAMPLEVALUE",e[282]="XRESOLUTION",e[283]="YRESOLUTION",e[284]="PLANARCONFIGURATION",e[285]="PAGENAME",e[286]="XPOSITION",e[287]="YPOSITION",e[288]="FREEOFFSETS",e[289]="FREEBYTECOUNTS",e[290]="GRAYRESPONSEUNIT",e[291]="GRAYRESPONSECURVE",e[292]="T4OPTIONS",e[293]="T6OPTIONS",e[296]="RESOLUTIONUNIT",e[297]="PAGENUMBER",e[300]="COLORRESPONSEUNIT",e[301]="TRANSFERFUNCTION",e[305]="SOFTWARE",e[306]="DATETIME",e[315]="ARTIST",e[316]="HOSTCOMPUTER",e[317]="PREDICTOR",e[318]="WHITEPOINT",e[319]="PRIMARYCHROMATICITIES",e[320]="COLORMAP",e[321]="HALFTONEHINTS",e[322]="TILEWIDTH",e[323]="TILELENGTH",e[324]="TILEOFFSETS",e[325]="TILEBYTECOUNTS",e[326]="BADFAXLINES",e[327]="CLEANFAXDATA",e[328]="CONSECUTIVEBADFAXLINES",e[330]="SUBIFD",e[332]="INKSET",e[333]="INKNAMES",e[334]="NUMBEROFINKS",e[336]="DOTRANGE",e[337]="TARGETPRINTER",e[338]="EXTRASAMPLES",e[339]="SAMPLEFORMAT",e[340]="SMINSAMPLEVALUE",e[341]="SMAXSAMPLEVALUE",e[342]="TRANSFERRANGE",e[347]="JPEGTABLES",e[512]="JPEGPROC",e[513]="JPEGIFOFFSET",e[514]="JPEGIFBYTECOUNT",e[515]="JPEGRESTARTINTERVAL",e[517]="JPEGLOSSLESSPREDICTORS",e[518]="JPEGPOINTTRANSFORM",e[519]="JPEGQTABLES",e[520]="JPEGDCTABLES",e[521]="JPEGACTABLES",e[529]="YCBCRCOEFFICIENTS",e[530]="YCBCRSUBSAMPLING",e[531]="YCBCRPOSITIONING",e[532]="REFERENCEBLACKWHITE",e[700]="XMP",e[33550]="GEOPIXELSCALE",e[33922]="GEOTIEPOINTS",e[33432]="COPYRIGHT",e[42112]="GDAL_METADATA",e[42113]="GDAL_NODATA",e[50844]="RPCCOEFFICIENT",e[34264]="GEOTRANSMATRIX",e[34735]="GEOKEYDIRECTORY",e[34736]="GEODOUBLEPARAMS",e[34737]="GEOASCIIPARAMS",e[34665]="EXIFIFD",e[34853]="GPSIFD",e[40965]="INTEROPERABILITYIFD",e})(),m_e=(()=>{const e=[].concat(u6);return e[36864]="ExifVersion",e[40960]="FlashpixVersion",e[40961]="ColorSpace",e[42240]="Gamma",e[37121]="ComponentsConfiguration",e[37122]="CompressedBitsPerPixel",e[40962]="PixelXDimension",e[40963]="PixelYDimension",e[37500]="MakerNote",e[37510]="UserComment",e[40964]="RelatedSoundFile",e[36867]="DateTimeOriginal",e[36868]="DateTimeDigitized",e[36880]="OffsetTime",e[36881]="OffsetTimeOriginal",e[36882]="OffsetTimeDigitized",e[37520]="SubSecTime",e[37521]="SubSecTimeOriginal",e[37522]="SubSecTimeDigitized",e[37888]="Temperature",e[37889]="Humidity",e[37890]="Pressure",e[37891]="WaterDepth",e[37892]="Acceleration",e[37893]="CameraElevationAngle",e[42016]="ImageUniqueID",e[42032]="CameraOwnerName",e[42033]="BodySerialNumber",e[42034]="LensSpecification",e[42035]="LensMake",e[42036]="LensModel",e[42037]="LensSerialNumber",e[33434]="ExposureTime",e[33437]="FNumber",e[34850]="ExposureProgram",e[34852]="SpectralSensitivity",e[34855]="PhotographicSensitivity",e[34856]="OECF",e[34864]="SensitivityType",e[34865]="StandardOutputSensitivity",e[34866]="RecommendedExposureIndex",e[34867]="ISOSpeed",e[34868]="ISOSpeedLatitudeyyy",e[34869]="ISOSpeedLatitudezzz",e[37377]="ShutterSpeedValue",e[37378]="ApertureValue",e[37379]="BrightnessValue",e[37380]="ExposureBiasValue",e[37381]="MaxApertureValue",e[37382]="SubjectDistance",e[37383]="MeteringMode",e[37384]="LightSource",e[37385]="Flash",e[37386]="FocalLength",e[37396]="SubjectArea",e[41483]="FlashEnergy",e[41484]="SpatialFrequencyResponse",e[41486]="FocalPlaneXResolution",e[41487]="FocalPlaneYResolution",e[41488]="FocalPlaneResolutionUnit",e[41492]="SubjectLocation",e[41493]="ExposureIndex",e[41495]="SensingMethod",e[41728]="FileSource",e[41729]="SceneType",e[41730]="CFAPattern",e[41985]="CustomRendered",e[41986]="ExposureMode",e[41987]="WhiteBalance",e[41988]="DigitalZoomRatio",e[41989]="FocalLengthIn35mmFilm",e[41990]="SceneCaptureType",e[41991]="GainControl",e[41992]="Contrast",e[41993]="Saturation",e[41994]="Sharpness",e[41995]="DeviceSettingDescription",e[41996]="SubjectDistanceRange",e})(),y_e=["GPSVersionID","GPSLatitudeRef","GPSLatitude","GPSLongitudeRef","GPSLongitude","GPSAltitudeRef","GPSAltitude","GPSTimeStamp","GPSSatellites","GPSStatus","GPSMeasureMode","GPSDOP","GPSSpeedRef","GPSSpeed","GPSTrackRef","GPSTrack","GPSImgDirectionRef","GPSImgDirection","GPSMapDatum","GPSDestLatitudeRef","GPSDestLatitude","GPSDestLongitudeRef","GPSDestLongitude","GPSDestBearingRef","GPSDestBearing","GPSDestDistanceRef","GPSDestDistance","GPSProcessingMethod","GPSAreaInformation","GPSDateStamp","GPSDifferential","GPSHPositioningError"],g_e=(()=>{const e=[];return e[1024]="GTModelTypeGeoKey",e[1025]="GTRasterTypeGeoKey",e[1026]="GTCitationGeoKey",e[2048]="GeographicTypeGeoKey",e[2049]="GeogCitationGeoKey",e[2050]="GeogGeodeticDatumGeoKey",e[2051]="GeogPrimeMeridianGeoKey",e[2052]="GeogLinearUnitsGeoKey",e[2053]="GeogLinearUnitSizeGeoKey",e[2054]="GeogAngularUnitsGeoKey",e[2055]="GeogAngularUnitSizeGeoKey",e[2056]="GeogEllipsoidGeoKey",e[2057]="GeogSemiMajorAxisGeoKey",e[2058]="GeogSemiMinorAxisGeoKey",e[2059]="GeogInvFlatteningGeoKey",e[2061]="GeogPrimeMeridianLongGeoKey",e[2060]="GeogAzimuthUnitsGeoKey",e[3072]="ProjectedCSTypeGeoKey",e[3073]="PCSCitationGeoKey",e[3074]="ProjectionGeoKey",e[3075]="ProjCoordTransGeoKey",e[3076]="ProjLinearUnitsGeoKey",e[3077]="ProjLinearUnitSizeGeoKey",e[3078]="ProjStdParallel1GeoKey",e[3079]="ProjStdParallel2GeoKey",e[3080]="ProjNatOriginLongGeoKey",e[3081]="ProjNatOriginLatGeoKey",e[3082]="ProjFalseEastingGeoKey",e[3083]="ProjFalseNorthingGeoKey",e[3084]="ProjFalseOriginLongGeoKey",e[3085]="ProjFalseOriginLatGeoKey",e[3086]="ProjFalseOriginEastingGeoKey",e[3087]="ProjFalseOriginNorthingGeoKey",e[3088]="ProjCenterLongGeoKey",e[3090]="ProjCenterEastingGeoKey",e[3091]="ProjCenterNorthingGeoKey",e[3092]="ProjScaleAtNatOriginGeoKey",e[3093]="ProjScaleAtCenterGeoKey",e[3094]="ProjAzimuthAngleGeoKey",e[3095]="ProjStraightVertPoleLongGeoKey",e[4096]="VerticalCSTypeGeoKey",e[4097]="VerticalCitationGeoKey",e[4098]="VerticalDatumGeoKey",e[4099]="VerticalUnitsGeoKey",e})(),v_e=function(e,t){let r=(t||u6)[e];return r===void 0&&(r="unknown"+String(e)),r},aP=new Map;aP.set("EXIFIFD",m_e),aP.set("GPSIFD",y_e);const b0={TIFF_TAGS:u6,ifdTags:aP,GEO_KEYS:g_e,getTagName:v_e},T$=(()=>{const e=new ArrayBuffer(4),t=new Uint8Array(e);return new Uint32Array(e)[0]=1,t[0]===1})();var ic,Cr,Bx,$j,Ej,_K={exports:{}};$j=_K,ic={unstuff:function(e,t,r,i,n,s,o,a){var l,u,h,d,f,m=(1<<r)-1,g=0,b=0,w=4*e.length-Math.ceil(r*i/8);if(e[e.length-1]<<=8*w,n)for(l=0;l<i;l++)b===0&&(h=e[g++],b=32),b>=r?(u=h>>>b-r&m,b-=r):(u=(h&m)<<(d=r-b)&m,u+=(h=e[g++])>>>(b=32-d)),t[l]=n[u];else for(f=Math.ceil((a-s)/o),l=0;l<i;l++)b===0&&(h=e[g++],b=32),b>=r?(u=h>>>b-r&m,b-=r):(u=(h&m)<<(d=r-b)&m,u+=(h=e[g++])>>>(b=32-d)),t[l]=u<f?s+u*o:a},unstuffLUT:function(e,t,r,i,n,s){var o,a=(1<<t)-1,l=0,u=0,h=0,d=0,f=0,m=[],g=4*e.length-Math.ceil(t*r/8);e[e.length-1]<<=8*g;var b=Math.ceil((s-i)/n);for(u=0;u<r;u++)d===0&&(o=e[l++],d=32),d>=t?(f=o>>>d-t&a,d-=t):(f=(o&a)<<(h=t-d)&a,f+=(o=e[l++])>>>(d=32-h)),m[u]=f<b?i+f*n:s;return m.unshift(i),m},unstuff2:function(e,t,r,i,n,s,o,a){var l,u,h,d,f=(1<<r)-1,m=0,g=0,b=0;if(n)for(l=0;l<i;l++)g===0&&(h=e[m++],g=32,b=0),g>=r?(u=h>>>b&f,g-=r,b+=r):(u=h>>>b&f,g=32-(d=r-g),u|=((h=e[m++])&(1<<d)-1)<<r-d,b=d),t[l]=n[u];else{var w=Math.ceil((a-s)/o);for(l=0;l<i;l++)g===0&&(h=e[m++],g=32,b=0),g>=r?(u=h>>>b&f,g-=r,b+=r):(u=h>>>b&f,g=32-(d=r-g),u|=((h=e[m++])&(1<<d)-1)<<r-d,b=d),t[l]=u<w?s+u*o:a}return t},unstuffLUT2:function(e,t,r,i,n,s){var o,a=(1<<t)-1,l=0,u=0,h=0,d=0,f=0,m=0,g=[],b=Math.ceil((s-i)/n);for(u=0;u<r;u++)d===0&&(o=e[l++],d=32,m=0),d>=t?(f=o>>>m&a,d-=t,m+=t):(f=o>>>m&a,d=32-(h=t-d),f|=((o=e[l++])&(1<<h)-1)<<t-h,m=h),g[u]=f<b?i+f*n:s;return g.unshift(i),g},originalUnstuff:function(e,t,r,i){var n,s,o,a,l=(1<<r)-1,u=0,h=0,d=4*e.length-Math.ceil(r*i/8);for(e[e.length-1]<<=8*d,n=0;n<i;n++)h===0&&(o=e[u++],h=32),h>=r?(s=o>>>h-r&l,h-=r):(s=(o&l)<<(a=r-h)&l,s+=(o=e[u++])>>>(h=32-a)),t[n]=s;return t},originalUnstuff2:function(e,t,r,i){var n,s,o,a,l=(1<<r)-1,u=0,h=0,d=0;for(n=0;n<i;n++)h===0&&(o=e[u++],h=32,d=0),h>=r?(s=o>>>d&l,h-=r,d+=r):(s=o>>>d&l,h=32-(a=r-h),s|=((o=e[u++])&(1<<a)-1)<<r-a,d=a),t[n]=s;return t}},Cr={HUFFMAN_LUT_BITS_MAX:12,computeChecksumFletcher32:function(e){for(var t=65535,r=65535,i=e.length,n=Math.floor(i/2),s=0;n;){var o=n>=359?359:n;n-=o;do t+=e[s++]<<8,r+=t+=e[s++];while(--o);t=(65535&t)+(t>>>16),r=(65535&r)+(r>>>16)}return 1&i&&(r+=t+=e[s]<<8),((r=(65535&r)+(r>>>16))<<16|(t=(65535&t)+(t>>>16)))>>>0},readHeaderInfo:function(e,t){var r=t.ptr,i=new Uint8Array(e,r,6),n={};if(n.fileIdentifierString=String.fromCharCode.apply(null,i),n.fileIdentifierString.lastIndexOf("Lerc2",0)!==0)throw"Unexpected file identifier string (expect Lerc2 ): "+n.fileIdentifierString;r+=6;var s,o=new DataView(e,r,8),a=o.getInt32(0,!0);if(n.fileVersion=a,r+=4,a>=3&&(n.checksum=o.getUint32(4,!0),r+=4),o=new DataView(e,r,12),n.height=o.getUint32(0,!0),n.width=o.getUint32(4,!0),r+=8,a>=4?(n.numDims=o.getUint32(8,!0),r+=4):n.numDims=1,o=new DataView(e,r,40),n.numValidPixel=o.getUint32(0,!0),n.microBlockSize=o.getInt32(4,!0),n.blobSize=o.getInt32(8,!0),n.imageType=o.getInt32(12,!0),n.maxZError=o.getFloat64(16,!0),n.zMin=o.getFloat64(24,!0),n.zMax=o.getFloat64(32,!0),r+=40,t.headerInfo=n,t.ptr=r,a>=3&&(s=a>=4?52:48,this.computeChecksumFletcher32(new Uint8Array(e,r-s,n.blobSize-14))!==n.checksum))throw"Checksum failed.";return!0},checkMinMaxRanges:function(e,t){var r=t.headerInfo,i=this.getDataTypeArray(r.imageType),n=r.numDims*this.getDataTypeSize(r.imageType),s=this.readSubArray(e,t.ptr,i,n),o=this.readSubArray(e,t.ptr+n,i,n);t.ptr+=2*n;var a,l=!0;for(a=0;a<r.numDims;a++)if(s[a]!==o[a]){l=!1;break}return r.minValues=s,r.maxValues=o,l},readSubArray:function(e,t,r,i){var n;if(r===Uint8Array)n=new Uint8Array(e,t,i);else{var s=new ArrayBuffer(i);new Uint8Array(s).set(new Uint8Array(e,t,i)),n=new r(s)}return n},readMask:function(e,t){var r,i,n=t.ptr,s=t.headerInfo,o=s.width*s.height,a=s.numValidPixel,l=new DataView(e,n,4),u={};if(u.numBytes=l.getUint32(0,!0),n+=4,(a===0||o===a)&&u.numBytes!==0)throw"invalid mask";if(a===0)r=new Uint8Array(Math.ceil(o/8)),u.bitset=r,i=new Uint8Array(o),t.pixels.resultMask=i,n+=u.numBytes;else if(u.numBytes>0){r=new Uint8Array(Math.ceil(o/8));var h=(l=new DataView(e,n,u.numBytes)).getInt16(0,!0),d=2,f=0,m=0;do{if(h>0)for(;h--;)r[f++]=l.getUint8(d++);else for(m=l.getUint8(d++),h=-h;h--;)r[f++]=m;h=l.getInt16(d,!0),d+=2}while(d<u.numBytes);if(h!==-32768||f<r.length)throw"Unexpected end of mask RLE encoding";i=new Uint8Array(o);var g=0,b=0;for(b=0;b<o;b++)7&b?(g=r[b>>3],g<<=7&b):g=r[b>>3],128&g&&(i[b]=1);t.pixels.resultMask=i,u.bitset=r,n+=u.numBytes}return t.ptr=n,t.mask=u,!0},readDataOneSweep:function(e,t,r,i){var n,s=t.ptr,o=t.headerInfo,a=o.numDims,l=o.width*o.height,u=o.imageType,h=o.numValidPixel*Cr.getDataTypeSize(u)*a,d=t.pixels.resultMask;if(r===Uint8Array)n=new Uint8Array(e,s,h);else{var f=new ArrayBuffer(h);new Uint8Array(f).set(new Uint8Array(e,s,h)),n=new r(f)}if(n.length===l*a)t.pixels.resultPixels=i?Cr.swapDimensionOrder(n,l,a,r,!0):n;else{t.pixels.resultPixels=new r(l*a);var m=0,g=0,b=0,w=0;if(a>1){if(i){for(g=0;g<l;g++)if(d[g])for(w=g,b=0;b<a;b++,w+=l)t.pixels.resultPixels[w]=n[m++]}else for(g=0;g<l;g++)if(d[g])for(w=g*a,b=0;b<a;b++)t.pixels.resultPixels[w+b]=n[m++]}else for(g=0;g<l;g++)d[g]&&(t.pixels.resultPixels[g]=n[m++])}return s+=h,t.ptr=s,!0},readHuffmanTree:function(e,t){var r=this.HUFFMAN_LUT_BITS_MAX,i=new DataView(e,t.ptr,16);if(t.ptr+=16,i.getInt32(0,!0)<2)throw"unsupported Huffman version";var n=i.getInt32(4,!0),s=i.getInt32(8,!0),o=i.getInt32(12,!0);if(s>=o)return!1;var a=new Uint32Array(o-s);Cr.decodeBits(e,t,a);var l,u,h,d,f=[];for(l=s;l<o;l++)f[u=l-(l<n?0:n)]={first:a[l-s],second:null};var m=e.byteLength-t.ptr,g=Math.ceil(m/4),b=new ArrayBuffer(4*g);new Uint8Array(b).set(new Uint8Array(e,t.ptr,m));var w,_=new Uint32Array(b),x=0,I=0;for(w=_[0],l=s;l<o;l++)(d=f[u=l-(l<n?0:n)].first)>0&&(f[u].second=w<<x>>>32-d,32-x>=d?(x+=d)===32&&(x=0,w=_[++I]):(x+=d-32,w=_[++I],f[u].second|=w>>>32-x));var S=0,T=0,$=new Bx;for(l=0;l<f.length;l++)f[l]!==void 0&&(S=Math.max(S,f[l].first));T=S>=r?r:S;var E,C,O,R,D,F=[];for(l=s;l<o;l++)if((d=f[u=l-(l<n?0:n)].first)>0)if(E=[d,u],d<=T)for(C=f[u].second<<T-d,O=1<<T-d,h=0;h<O;h++)F[C|h]=E;else for(C=f[u].second,D=$,R=d-1;R>=0;R--)C>>>R&1?(D.right||(D.right=new Bx),D=D.right):(D.left||(D.left=new Bx),D=D.left),R!==0||D.val||(D.val=E[1]);return{decodeLut:F,numBitsLUTQick:T,numBitsLUT:S,tree:$,stuffedData:_,srcPtr:I,bitPos:x}},readHuffman:function(e,t,r,i){var n,s,o,a,l,u,h,d,f,m=t.headerInfo.numDims,g=t.headerInfo.height,b=t.headerInfo.width,w=b*g,_=this.readHuffmanTree(e,t),x=_.decodeLut,I=_.tree,S=_.stuffedData,T=_.srcPtr,$=_.bitPos,E=_.numBitsLUTQick,C=_.numBitsLUT,O=t.headerInfo.imageType===0?128:0,R=t.pixels.resultMask,D=0;$>0&&(T++,$=0);var F,z=S[T],B=t.encodeMode===1,y=new r(w*m),M=y;if(m<2||B){for(F=0;F<m;F++)if(m>1&&(M=new r(y.buffer,w*F,w),D=0),t.headerInfo.numValidPixel===b*g)for(d=0,u=0;u<g;u++)for(h=0;h<b;h++,d++){if(s=0,l=a=z<<$>>>32-E,32-$<E&&(l=a|=S[T+1]>>>64-$-E),x[l])s=x[l][1],$+=x[l][0];else for(l=a=z<<$>>>32-C,32-$<C&&(l=a|=S[T+1]>>>64-$-C),n=I,f=0;f<C;f++)if(!(n=a>>>C-f-1&1?n.right:n.left).left&&!n.right){s=n.val,$=$+f+1;break}$>=32&&($-=32,z=S[++T]),o=s-O,B?(o+=h>0?D:u>0?M[d-b]:D,o&=255,M[d]=o,D=o):M[d]=o}else for(d=0,u=0;u<g;u++)for(h=0;h<b;h++,d++)if(R[d]){if(s=0,l=a=z<<$>>>32-E,32-$<E&&(l=a|=S[T+1]>>>64-$-E),x[l])s=x[l][1],$+=x[l][0];else for(l=a=z<<$>>>32-C,32-$<C&&(l=a|=S[T+1]>>>64-$-C),n=I,f=0;f<C;f++)if(!(n=a>>>C-f-1&1?n.right:n.left).left&&!n.right){s=n.val,$=$+f+1;break}$>=32&&($-=32,z=S[++T]),o=s-O,B?(h>0&&R[d-1]?o+=D:u>0&&R[d-b]?o+=M[d-b]:o+=D,o&=255,M[d]=o,D=o):M[d]=o}}else for(d=0,u=0;u<g;u++)for(h=0;h<b;h++)if(d=u*b+h,!R||R[d])for(F=0;F<m;F++,d+=w){if(s=0,l=a=z<<$>>>32-E,32-$<E&&(l=a|=S[T+1]>>>64-$-E),x[l])s=x[l][1],$+=x[l][0];else for(l=a=z<<$>>>32-C,32-$<C&&(l=a|=S[T+1]>>>64-$-C),n=I,f=0;f<C;f++)if(!(n=a>>>C-f-1&1?n.right:n.left).left&&!n.right){s=n.val,$=$+f+1;break}$>=32&&($-=32,z=S[++T]),o=s-O,M[d]=o}t.ptr=t.ptr+4*(T+1)+($>0?4:0),t.pixels.resultPixels=y,m>1&&!i&&(t.pixels.resultPixels=Cr.swapDimensionOrder(y,w,m,r))},decodeBits:function(e,t,r,i,n){var s=t.headerInfo,o=s.fileVersion,a=0,l=e.byteLength-t.ptr>=5?5:e.byteLength-t.ptr,u=new DataView(e,t.ptr,l),h=u.getUint8(0);a++;var d=h>>6,f=d===0?4:3-d,m=(32&h)>0,g=31&h,b=0;if(f===1)b=u.getUint8(a),a++;else if(f===2)b=u.getUint16(a,!0),a+=2;else{if(f!==4)throw"Invalid valid pixel count type";b=u.getUint32(a,!0),a+=4}var w,_,x,I,S,T,$,E,C,O=2*s.maxZError,R=s.numDims>1?s.maxValues[n]:s.zMax;if(m){for(t.counter.lut++,E=u.getUint8(a),a++,I=Math.ceil((E-1)*g/8),S=Math.ceil(I/4),_=new ArrayBuffer(4*S),x=new Uint8Array(_),t.ptr+=a,x.set(new Uint8Array(e,t.ptr,I)),$=new Uint32Array(_),t.ptr+=I,C=0;E-1>>>C;)C++;I=Math.ceil(b*C/8),S=Math.ceil(I/4),_=new ArrayBuffer(4*S),(x=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,I)),w=new Uint32Array(_),t.ptr+=I,T=o>=3?ic.unstuffLUT2($,g,E-1,i,O,R):ic.unstuffLUT($,g,E-1,i,O,R),o>=3?ic.unstuff2(w,r,C,b,T):ic.unstuff(w,r,C,b,T)}else t.counter.bitstuffer++,C=g,t.ptr+=a,C>0&&(I=Math.ceil(b*C/8),S=Math.ceil(I/4),_=new ArrayBuffer(4*S),(x=new Uint8Array(_)).set(new Uint8Array(e,t.ptr,I)),w=new Uint32Array(_),t.ptr+=I,o>=3?i==null?ic.originalUnstuff2(w,r,C,b):ic.unstuff2(w,r,C,b,!1,i,O,R):i==null?ic.originalUnstuff(w,r,C,b):ic.unstuff(w,r,C,b,!1,i,O,R))},readTiles:function(e,t,r,i){var n=t.headerInfo,s=n.width,o=n.height,a=s*o,l=n.microBlockSize,u=n.imageType,h=Cr.getDataTypeSize(u),d=Math.ceil(s/l),f=Math.ceil(o/l);t.pixels.numBlocksY=f,t.pixels.numBlocksX=d,t.pixels.ptr=0;var m,g,b,w,_,x,I,S,T,$,E=0,C=0,O=0,R=0,D=0,F=0,z=0,B=0,y=0,M=0,A=0,P=0,Y=0,Q=0,le=0,re=new r(l*l),we=o%l||l,_e=s%l||l,Ce=n.numDims,Ne=t.pixels.resultMask,ht=t.pixels.resultPixels,st=n.fileVersion>=5?14:15,pt=n.zMax;for(O=0;O<f;O++)for(D=O!==f-1?l:we,R=0;R<d;R++)for(M=O*s*l+R*l,A=s-(F=R!==d-1?l:_e),S=0;S<Ce;S++){if(Ce>1?($=ht,M=O*s*l+R*l,ht=new r(t.pixels.resultPixels.buffer,a*S*h,a),pt=n.maxValues[S]):$=null,z=e.byteLength-t.ptr,g={},le=0,B=(m=new DataView(e,t.ptr,Math.min(10,z))).getUint8(0),le++,T=n.fileVersion>=5?4&B:0,y=B>>6&255,(B>>2&st)!=(R*l>>3&st)||T&&S===0)throw"integrity issue";if((_=3&B)>3)throw t.ptr+=le,"Invalid block encoding ("+_+")";if(_!==2)if(_===0){if(T)throw"integrity issue";if(t.counter.uncompressed++,t.ptr+=le,P=(P=D*F*h)<(Y=e.byteLength-t.ptr)?P:Y,b=new ArrayBuffer(P%h==0?P:P+h-P%h),new Uint8Array(b).set(new Uint8Array(e,t.ptr,P)),w=new r(b),Q=0,Ne)for(E=0;E<D;E++){for(C=0;C<F;C++)Ne[M]&&(ht[M]=w[Q++]),M++;M+=A}else for(E=0;E<D;E++){for(C=0;C<F;C++)ht[M++]=w[Q++];M+=A}t.ptr+=Q*h}else if(x=Cr.getDataTypeUsed(T&&u<6?4:u,y),I=Cr.getOnePixel(g,le,x,m),le+=Cr.getDataTypeSize(x),_===3)if(t.ptr+=le,t.counter.constantoffset++,Ne)for(E=0;E<D;E++){for(C=0;C<F;C++)Ne[M]&&(ht[M]=T?Math.min(pt,$[M]+I):I),M++;M+=A}else for(E=0;E<D;E++){for(C=0;C<F;C++)ht[M]=T?Math.min(pt,$[M]+I):I,M++;M+=A}else if(t.ptr+=le,Cr.decodeBits(e,t,re,I,S),le=0,T)if(Ne)for(E=0;E<D;E++){for(C=0;C<F;C++)Ne[M]&&(ht[M]=re[le++]+$[M]),M++;M+=A}else for(E=0;E<D;E++){for(C=0;C<F;C++)ht[M]=re[le++]+$[M],M++;M+=A}else if(Ne)for(E=0;E<D;E++){for(C=0;C<F;C++)Ne[M]&&(ht[M]=re[le++]),M++;M+=A}else for(E=0;E<D;E++){for(C=0;C<F;C++)ht[M++]=re[le++];M+=A}else{if(T)if(Ne)for(E=0;E<D;E++)for(C=0;C<F;C++)Ne[M]&&(ht[M]=$[M]),M++;else for(E=0;E<D;E++)for(C=0;C<F;C++)ht[M]=$[M],M++;t.counter.constant++,t.ptr+=le}}Ce>1&&!i&&(t.pixels.resultPixels=Cr.swapDimensionOrder(t.pixels.resultPixels,a,Ce,r))},formatFileInfo:function(e){return{fileIdentifierString:e.headerInfo.fileIdentifierString,fileVersion:e.headerInfo.fileVersion,imageType:e.headerInfo.imageType,height:e.headerInfo.height,width:e.headerInfo.width,numValidPixel:e.headerInfo.numValidPixel,microBlockSize:e.headerInfo.microBlockSize,blobSize:e.headerInfo.blobSize,maxZError:e.headerInfo.maxZError,pixelType:Cr.getPixelType(e.headerInfo.imageType),eofOffset:e.eofOffset,mask:e.mask?{numBytes:e.mask.numBytes}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,maxValue:e.headerInfo.zMax,minValue:e.headerInfo.zMin,noDataValue:e.noDataValue}}},constructConstantSurface:function(e,t){var r=e.headerInfo.zMax,i=e.headerInfo.zMin,n=e.headerInfo.maxValues,s=e.headerInfo.numDims,o=e.headerInfo.height*e.headerInfo.width,a=0,l=0,u=0,h=e.pixels.resultMask,d=e.pixels.resultPixels;if(h)if(s>1){if(t)for(a=0;a<s;a++)for(u=a*o,r=n[a],l=0;l<o;l++)h[l]&&(d[u+l]=r);else for(l=0;l<o;l++)if(h[l])for(u=l*s,a=0;a<s;a++)d[u+s]=n[a]}else for(l=0;l<o;l++)h[l]&&(d[l]=r);else if(s>1&&i!==r)if(t)for(a=0;a<s;a++)for(u=a*o,r=n[a],l=0;l<o;l++)d[u+l]=r;else for(l=0;l<o;l++)for(u=l*s,a=0;a<s;a++)d[u+a]=n[a];else for(l=0;l<o*s;l++)d[l]=r},getDataTypeArray:function(e){var t;switch(e){case 0:t=Int8Array;break;case 1:t=Uint8Array;break;case 2:t=Int16Array;break;case 3:t=Uint16Array;break;case 4:t=Int32Array;break;case 5:t=Uint32Array;break;case 6:default:t=Float32Array;break;case 7:t=Float64Array}return t},getPixelType:function(e){var t;switch(e){case 0:t="S8";break;case 1:t="U8";break;case 2:t="S16";break;case 3:t="U16";break;case 4:t="S32";break;case 5:t="U32";break;case 6:default:t="F32";break;case 7:t="F64"}return t},isValidPixelValue:function(e,t){if(t==null)return!1;var r;switch(e){case 0:r=t>=-128&&t<=127;break;case 1:r=t>=0&&t<=255;break;case 2:r=t>=-32768&&t<=32767;break;case 3:r=t>=0&&t<=65536;break;case 4:r=t>=-2147483648&&t<=2147483647;break;case 5:r=t>=0&&t<=4294967296;break;case 6:r=t>=-34027999387901484e22&&t<=34027999387901484e22;break;case 7:r=t>=5e-324&&t<=17976931348623157e292;break;default:r=!1}return r},getDataTypeSize:function(e){var t=0;switch(e){case 0:case 1:t=1;break;case 2:case 3:t=2;break;case 4:case 5:case 6:t=4;break;case 7:t=8;break;default:t=e}return t},getDataTypeUsed:function(e,t){var r=e;switch(e){case 2:case 4:r=e-t;break;case 3:case 5:r=e-2*t;break;case 6:r=t===0?e:t===1?2:1;break;case 7:r=t===0?e:e-2*t+1;break;default:r=e}return r},getOnePixel:function(e,t,r,i){var n=0;switch(r){case 0:n=i.getInt8(t);break;case 1:n=i.getUint8(t);break;case 2:n=i.getInt16(t,!0);break;case 3:n=i.getUint16(t,!0);break;case 4:n=i.getInt32(t,!0);break;case 5:n=i.getUInt32(t,!0);break;case 6:n=i.getFloat32(t,!0);break;case 7:n=i.getFloat64(t,!0);break;default:throw"the decoder does not understand this pixel type"}return n},swapDimensionOrder:function(e,t,r,i,n){var s=0,o=0,a=0,l=0,u=e;if(r>1)if(u=new i(t*r),n)for(s=0;s<t;s++)for(l=s,a=0;a<r;a++,l+=t)u[l]=e[o++];else for(s=0;s<t;s++)for(l=s,a=0;a<r;a++,l+=t)u[o++]=e[l];return u}},Bx=function(e,t,r){this.val=e,this.left=t,this.right=r},(Ej={decode:function(e,t){var r=(t=t||{}).noDataValue,i=0,n={};n.ptr=t.inputOffset||0,n.pixels={},Cr.readHeaderInfo(e,n);var s=n.headerInfo,o=s.fileVersion,a=Cr.getDataTypeArray(s.imageType);if(o>5)throw"unsupported lerc version 2."+o;Cr.readMask(e,n),s.numValidPixel===s.width*s.height||n.pixels.resultMask||(n.pixels.resultMask=t.maskData);var l=s.width*s.height;n.pixels.resultPixels=new a(l*s.numDims),n.counter={onesweep:0,uncompressed:0,lut:0,bitstuffer:0,constant:0,constantoffset:0};var u,h=!t.returnPixelInterleavedDims;if(s.numValidPixel!==0)if(s.zMax===s.zMin)Cr.constructConstantSurface(n,h);else if(o>=4&&Cr.checkMinMaxRanges(e,n))Cr.constructConstantSurface(n,h);else{var d=new DataView(e,n.ptr,2),f=d.getUint8(0);if(n.ptr++,f)Cr.readDataOneSweep(e,n,a,h);else if(o>1&&s.imageType<=1&&Math.abs(s.maxZError-.5)<1e-5){var m=d.getUint8(1);if(n.ptr++,n.encodeMode=m,m>2||o<4&&m>1)throw"Invalid Huffman flag "+m;m?Cr.readHuffman(e,n,a,h):Cr.readTiles(e,n,a,h)}else Cr.readTiles(e,n,a,h)}n.eofOffset=n.ptr,t.inputOffset?(u=n.headerInfo.blobSize+t.inputOffset-n.ptr,Math.abs(u)>=1&&(n.eofOffset=t.inputOffset+n.headerInfo.blobSize)):(u=n.headerInfo.blobSize-n.ptr,Math.abs(u)>=1&&(n.eofOffset=n.headerInfo.blobSize));var g={width:s.width,height:s.height,pixelData:n.pixels.resultPixels,minValue:s.zMin,maxValue:s.zMax,validPixelCount:s.numValidPixel,dimCount:s.numDims,dimStats:{minValues:s.minValues,maxValues:s.maxValues},maskData:n.pixels.resultMask};if(n.pixels.resultMask&&Cr.isValidPixelValue(s.imageType,r)){var b=n.pixels.resultMask;for(i=0;i<l;i++)b[i]||(g.pixelData[i]=r);g.noDataValue=r}return n.noDataValue=r,t.returnFileInfo&&(g.fileInfo=Cr.formatFileInfo(n)),g},getBandCount:function(e){for(var t=0,r=0,i={ptr:0,pixels:{}};r<e.byteLength-58;)Cr.readHeaderInfo(e,i),r+=i.headerInfo.blobSize,t++,i.ptr=r;return t}})!==void 0&&($j.exports=Ej);const xK=_K.exports,Aj=[0,1,1,2,4,8,1,1,2,4,8,4,8,-1,-1,-1,8,8,8],Y0=4294967296,b_e=new Set([1,5,6,7,8,34712,34887]);function SK(e,t){let r="unknown";return e===3?r="f32":e===1?t===1?r="u1":t===2?r="u2":t===4?r="u4":t<=8?r="u8":t<=16?r="u16":t<=32&&(r="u32"):e===2&&(t<=8?r="s8":t<=16?r="s16":t<=32&&(r="s32")),r}function $$(e){let t=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":t=Uint8Array;break;case"u16":t=Uint16Array;break;case"u32":t=Uint32Array;break;case"s8":t=Int8Array;break;case"s16":t=Int16Array;break;case"s32":t=Int32Array;break;default:t=Float32Array}return t}function w_e(e,t){return{x:t[0]*e.x+t[1]*e.y+t[2],y:t[3]*e.x+t[4]*e.y+t[5]}}function MK(e,t){var r;return(r=e.get(t))==null?void 0:r.values}function xm(e,t){var r;return(r=e.get(t))==null?void 0:r.values}function Y4(e,t){var r;return(r=e.get(t))==null?void 0:r.values[0]}function rr(e,t){var r;return(r=e.get(t))==null?void 0:r.values[0]}function K4(e,t,r,i=0,n=b0.TIFF_TAGS,s=4){const o=s===8,a=o?d6(new DataView(e,r,8),0,t):new DataView(e,r,2).getUint16(0,t),l=4+2*s,u=o?8:2,h=u+a*l;if(r+h>e.byteLength)return{success:!1,ifd:null,nextIFD:null,requiredBufferSize:h};const d=r+h+4<=e.byteLength?BM(new DataView(e,r+h,s===8?8:4),0,t,s===8):null,f=r+u,m=new Map;let g,b,w,_,x,I,S;for(let T=0;T<a;T++){b=new DataView(e,f+l*T,l),w=b.getUint16(0,t),x=b.getUint16(2,t),_=b0.getTagName(w,n);const $=[];s===2?(I=b.getUint16(4,t),S=b.getUint16(6,t)):s===4?(I=b.getUint32(4,t),S=b.getUint32(8,t)):s===8&&(I=BM(b,4,t,!0),S=BM(b,12,t,!0),$.push(b.getUint32(12,t)),$.push(b.getUint32(16,t))),g={id:w,type:x,valueCount:I,valueOffset:S,valueOffsets:$,values:null},T_e(e,t,g,i,!1,s),m.set(_,g)}return{success:!0,ifd:m,nextIFD:d,requiredBufferSize:h}}const __e=function(e,t){return xK.decode(e,{inputOffset:t,returnFileInfo:!0}).pixelData},lP=function(e,t,r,i,n){var s,o;const a=T$===t,l=rr(r,"BITSPERSAMPLE"),u=SK((s=rr(r,"SAMPLEFORMAT"))!=null?s:1,l),h=(o=rr(r,"COMPRESSION"))!=null?o:1,d=$$(u);let f,m,g,b,w,_,x;if(h===34887)return __e(e,i);if(h===1)g=e.slice(i,i+n),b=new Uint8Array(g);else if(h===8||h===32946)b=new Uint8Array(e,i,n),_=new qm(b),x=_.getBytes(),g=new ArrayBuffer(x.length),b=new Uint8Array(g),b.set(x);else if(h===6){b=new Uint8Array(e,i,n);const I=new fI;I.parse(b);const S=I.getData(I.width,I.height,!0);g=new ArrayBuffer(S.length),b=new Uint8Array(g),b.set(S)}else if(h===7){const I=r.get("JPEGTABLES").values,S=I.length-2;b=new Uint8Array(S+n-2);for(let C=0;C<S;C++)b[C]=I[C];const T=new Uint8Array(e,i+2,n-2);for(let C=0;C<T.length;C++)b[S+C]=T[C];const $=new fI;$.parse(b);const E=$.getData($.width,$.height,!0);g=new ArrayBuffer(E.length),b=new Uint8Array(g),b.set(E)}else h===5&&(b=l6(e,i,n,t),g=b.buffer);if(u==="u8"||u==="s8"||a)m=new d(g);else{switch(g=new ArrayBuffer(b.length),w=new Uint8Array(g),u){case"u16":case"s16":for(f=0;f<b.length;f+=2)w[f]=b[f+1],w[f+1]=b[f];break;case"u32":case"s32":case"f32":for(f=0;f<b.length;f+=4)w[f]=b[f+3],w[f+1]=b[f+2],w[f+2]=b[f+1],w[f+3]=b[f]}m=new d(g)}return m},x_e=function(e,t,r){var i;const n=xm(r,"TILEOFFSETS");if(n===void 0)return null;const s=xm(r,"TILEBYTECOUNTS"),{width:o,height:a,pixelType:l,tileWidth:u,tileHeight:h}=c6([r]),d=h6(r,t),f=t.planes,m=o*a,g=rr(r,"BITSPERSAMPLE"),b=((i=rr(r,"COMPRESSION"))!=null?i:1)===34887,w=$$(l),_=[];for(let M=0;M<f;M++)_.push(new w(m));let x,I,S,T,$,E,C,O,R,D,F,z,B;const y=Math.ceil(o/u);if(g%8==0)if(b&&d&&f>1){const M=Math.round(n.length/f);for(x=0;x<M;x++){E=Math.floor(x/y)*h,C=x%y*u,O=E*o+C;for(let A=0;A<f;A++){const P=x*f+A;for(S=lP(e,t.littleEndian,r,n[P],s[P]),D=0,R=O,z=Math.min(u,o-C),F=Math.min(h,a-E),B=_[A],T=0;T<F;T++)for(R=O+T*o,D=T*u,$=0;$<z;$++,R++,D++)B[R]=S[D]}}}else for(x=0;x<n.length;x++)for(E=Math.floor(x/y)*h,C=x%y*u,O=E*o+C,S=lP(e,t.littleEndian,r,n[x],s[x]),D=0,R=O,z=Math.min(u,o-C),F=Math.min(h,a-E),I=0;I<f;I++)if(B=_[I],d||b)for(T=0;T<F;T++)for(R=O+T*o,D=u*h*I+T*u,$=0;$<z;$++,R++,D++)B[R]=S[D];else for(T=0;T<F;T++)for(R=O+T*o,D=T*u*f+I,$=0;$<z;$++,R++,D+=f)B[R]=S[D];return{width:o,height:a,pixelType:l,pixels:_}},S_e=function(e,t,r){var i;const n=T$===t.littleEndian,s=xm(r,"STRIPOFFSETS");if(s===void 0)return null;const{width:o,height:a,pixelType:l}=c6([r]),u=t.planes,h=o*a,d=rr(r,"BITSPERSAMPLE"),f=$$(l),m=new f(h*u),g=xm(r,"STRIPBYTECOUNTS"),b=rr(r,"ROWSPERSTRIP"),w=(i=rr(r,"COMPRESSION"))!=null?i:1;let _,x,I,S,T,$,E,C,O,R,D,F=b;if(d%8==0)for(_=0;_<s.length;_++){if(T=_*(b*o)*u,F=(_+1)*b>a?a-_*b:b,l==="u8"||l==="s8"||n){if(w===8||w===32946)E=new Uint8Array(e,s[_],g[_]),R=new qm(E),D=R.getBytes(),$=new ArrayBuffer(D.length),E=new Uint8Array($),E.set(D),E.length!==F*o*u*d/8&&console.log("strip byte counts is different than expected");else if(w===6){E=new Uint8Array(e,s[_],g[_]);const B=new fI;B.parse(E);const y=B.getData(B.width,B.height,!0);$=new ArrayBuffer(y.length),E=new Uint8Array($),E.set(y)}else w===5?(E=l6(e,s[_],g[_],t.littleEndian),$=E.buffer):w===1&&(g[_]!==F*o*u*d/8&&console.log("strip byte counts is different than expected"),$=e.slice(s[_],s[_]+g[_]));S=new f($)}else{switch(w===6||w===8||w===32946?(E=new Uint8Array(e,s[_],g[_]),R=new qm(E),E=R.getBytes(),$=new ArrayBuffer(E.length),C=new Uint8Array($),E.length!==F*o*u*d/8&&console.log("strip byte counts is different than expected")):w===1&&(g[_]!==F*o*u*d/8&&console.log("strip byte counts is different than expected"),$=new ArrayBuffer(g[_]),E=new Uint8Array(e,s[_],g[_]),C=new Uint8Array($)),l){case"u16":case"s16":for(I=0;I<E.length;I+=2)C[I]=E[I+1],C[I+1]=E[I];break;case"u32":case"s32":case"f32":for(I=0;I<E.length;I+=4)C[I]=E[I+3],C[I+1]=E[I+2],C[I+2]=E[I+1],C[I+3]=E[I]}S=new f($)}m.set(S,T)}const z=[];if(u===1)z.push(m);else for(_=0;_<u;_++){for(O=new f(h),x=0;x<h;x++)O[x]=m[x*u+_];z.push(O)}return{width:o,height:a,pixelType:l,pixels:z}},M_e=function(e,t,r){if(!(e&&e.length>0&&t&&r))return null;let i,n,s;const o=e[0].length,a=e.length,l=new Uint8Array(o);for(let u=0;u<a;u++)if(i=e[u],n=t[u],s=r[u],u===0)for(let h=0;h<o;h++)l[h]=i[h]<n||i[h]>s?0:1;else for(let h=0;h<o;h++)l[h]&&(l[h]=i[h]<n||i[h]>s?0:1);return l},I_e=function(e){if(!e)return null;const t=e.match(/<Item(.*?)Item>/gi);if(!t||t.length===0)return null;const r=new Map;let i,n,s,o,a;for(let _=0;_<t.length;_++)i=t[_],n=i.slice(6,i.indexOf(">")),o=i.indexOf("sample="),o>-1&&(a=i.slice(o+8,i.indexOf('"',o+8))),o=i.indexOf("name="),o>-1&&(n=i.slice(o+6,i.indexOf('"',o+6))),n&&(s=i.slice(i.indexOf(">")+1,i.indexOf("</Item>")).trim(),a!=null?r.has(n)?r.get(n)[a]=s:r.set(n,[s]):r.set(n,s)),a=null;const l=r.get("STATISTICS_MINIMUM"),u=r.get("STATISTICS_MAXIMUM"),h=r.get("STATISTICS_MEAN"),d=r.get("STATISTICS_STDDEV");let f=null;if(l&&u){f=[];for(let _=0;_<l.length;_++)f.push({min:parseFloat(l[_]),max:parseFloat(u[_]),avg:h&&parseFloat(h[_]),stddev:d&&parseFloat(d[_])})}const m=r.get("BandName"),g=r.get("WavelengthMin"),b=r.get("WavelengthMax");let w=null;if(m){w=[];for(let _=0;_<m.length;_++)w.push({BandName:m[_],WavelengthMin:g&&parseFloat(g[_]),WavelengthMax:b&&parseFloat(b[_])})}return{statistics:f,bandProperties:w,dataType:r.get("DataType"),rawMetadata:r}};function T_e(e,t,r,i=0,n=!1,s=4){if(r.values)return!0;const o=r.type,a=r.valueCount;let l=r.valueOffset,u=[];const h=Aj[o],d=8*h,f=a*h,m=a*Aj[o]*8;let g,b;const w=s===8?64:32,_=r.valueOffsets;if(m>w&&f>(n?e.byteLength:e?e.byteLength-l+i:0))return r.offlineOffsetSize=[l,f],r.values=null,!1;if(m<=w){if(!t)if(w<=32)l>>>=32-m;else{const x=_!=null&&_.length?_[0]:l>>>0,I=_!=null&&_.length?_[1]:Math.round((l-x)/Y0);m<=32?(l=x>>>32-m,_[0]=l):(l=x*2**(32-m)+(I>>>32-m),_[0]=x,_[1]=I>>>32-m)}if(a===1&&d===w)u=[l];else if(w===64){const x=_!=null&&_.length?_[0]:l>>>0,I=_!=null&&_.length?_[1]:Math.round((l-x)/Y0);let S=x,T=32;for(b=1;b<=a;b++){const $=32-d*b%32;if(T<d){const E=S<<$>>>32-T,C=I<<32-T>>>32-T;S=I,u.push(E+C*2**(d-T)),T-=32-(d-T)}else u.push(S<<$>>>32-d),T-=d;T===0&&(T=32,S=I)}}else for(b=1;b<=a;b++){const x=32-d*b;u.push(l<<x>>>32-d)}}else{l-=i,n&&(l=0);for(let x=l;x<l+f;x+=h){switch(o){case 1:case 2:case 7:g=new DataView(e,x,1).getUint8(0);break;case 3:g=new DataView(e,x,2).getUint16(0,t);break;case 4:case 13:g=new DataView(e,x,4).getUint32(0,t);break;case 5:g=new DataView(e,x,4).getUint32(0,t)/new DataView(e,x+4,4).getUint32(0,t);break;case 6:g=new DataView(e,x,1).getInt8(0);break;case 8:g=new DataView(e,x,2).getInt16(0,t);break;case 9:g=new DataView(e,x,4).getInt32(0,t);break;case 10:g=new DataView(e,x,4).getInt32(0,t)/new DataView(e,x+4,4).getInt32(0,t);break;case 11:g=new DataView(e,x,4).getFloat32(0,t);break;case 12:g=new DataView(e,x,8).getFloat64(0,t);break;case 16:case 18:g=d6(new DataView(e,x,8),0,t);break;case 17:g=E_e(new DataView(e,x,8),0,t);break;default:g=null}u.push(g)}}if(o===2){let x="";const I=u;for(u=[],b=0;b<I.length;b++)I[b]===0&&x!==""?(u.push(x),x=""):x+=String.fromCharCode(I[b]);x===""&&u.length!==0||u.push(x)}return r.values=u,!0}function c6(e){var t,r;const i=e[0],n=rr(i,"TILEWIDTH"),s=rr(i,"TILELENGTH"),o=rr(i,"IMAGEWIDTH"),a=rr(i,"IMAGELENGTH"),l=rr(i,"BITSPERSAMPLE"),u=rr(i,"SAMPLESPERPIXEL"),h=(t=rr(i,"SAMPLEFORMAT"))!=null?t:1,d=SK(h,l),f=h6(i),m=MK(i,"GDAL_NODATA");let g;m!=null&&m.length&&(g=m.map(Q=>parseFloat(Q)),g.some(Q=>isNaN(Q))&&(g=null));const b=(r=rr(i,"COMPRESSION"))!=null?r:1;let w;switch(b){case 1:w="NONE";break;case 2:case 3:case 4:case 32771:w="CCITT";break;case 5:w="LZW";break;case 6:case 7:w="JPEG";break;case 32773:w="PACKBITS";break;case 8:case 32946:w="DEFLATE";break;case 34712:w="JPEG2000";break;case 34887:w="LERC";break;default:w=String(b)}let _=!0,x="";b_e.has(b)||(_=!1,x+="unsupported tag compression "+b),h>3&&(_=!1,x+="unsupported tag sampleFormat "+h),l%8!=0&&(_=!1,x+="unsupported tag bitsPerSample "+l);const I=Y4(i,"GEOASCIIPARAMS");let S;if(I){const Q=I.split("|").filter(re=>re.indexOf("ESRI PE String = ")>-1)[0],le=Q?Q.replace("ESRI PE String = ",""):"";S=le.startsWith("COMPD_CS")||le.startsWith("PROJCS")||le.startsWith("GEOGCS")?{wkid:null,wkt:le}:null}const T=xm(i,"GEOTIEPOINTS"),$=xm(i,"GEOPIXELSCALE"),E=xm(i,"GEOTRANSMATRIX"),C=i.has("GEOKEYDIRECTORY")?i.get("GEOKEYDIRECTORY").data:null;let O,R,D=!1;if(C){D=rr(C,"GTRasterTypeGeoKey")===2;const Q=rr(C,"GTModelTypeGeoKey");if(Q===2){const le=rr(C,"GeographicTypeGeoKey");le>=1024&&le<=32766&&(S={wkid:le})}else if(Q===1){const le=rr(C,"ProjectedCSTypeGeoKey");le>=1024&&le<=32766&&(S={wkid:le})}}if($&&T&&T.length>=6?(O=[$[0],0,T[3]-T[0]*$[0],0,-Math.abs($[1]),T[4]-T[1]*$[1]],D&&(O[2]-=.5*O[0]+.5*O[1],O[5]-=.5*O[3]+.5*O[4])):E&&E.length===16&&(O=D?[E[0],E[1],E[3]-.5*E[0],E[4],E[5],E[7]-.5*E[5]]:[E[0],E[1],E[3],E[4],E[5],E[7]]),O){const Q=[{x:0,y:a},{x:0,y:0},{x:o,y:a},{x:o,y:0}];let le,re=Number.POSITIVE_INFINITY,we=Number.POSITIVE_INFINITY,_e=Number.NEGATIVE_INFINITY,Ce=Number.NEGATIVE_INFINITY;for(let Ne=0;Ne<Q.length;Ne++)le=w_e(Q[Ne],O),re=le.x>re?re:le.x,_e=le.x<_e?_e:le.x,we=le.y>we?we:le.y,Ce=le.y<Ce?Ce:le.y;R={xmin:re,xmax:_e,ymin:we,ymax:Ce,spatialReference:S}}else R={xmin:-.5,ymin:.5-a,xmax:o-.5,ymax:.5,spatialReference:S};const F=e.filter(Q=>Y4(Q,"NEWSUBFILETYPE")===1);let z,B,y,M,A;if(F.length>0){z=Math.round(Math.log(o/rr(F[0],"IMAGEWIDTH"))/Math.LN2);const Q=F[F.length-1];B=Math.round(Math.log(o/rr(Q,"IMAGEWIDTH"))/Math.LN2),y=rr(Q,"TILEWIDTH"),M=rr(Q,"TILELENGTH")}y=B>0?y||n:null,M=B>0?M||s:null,n&&(A=[{maxCol:Math.ceil(o/n)-1,maxRow:Math.ceil(a/s)-1,minRow:0,minCol:0}],F.forEach(Q=>{A.push({maxCol:Math.ceil(rr(Q,"IMAGEWIDTH")/rr(Q,"TILEWIDTH"))-1,maxRow:Math.ceil(rr(Q,"IMAGELENGTH")/rr(Q,"TILELENGTH"))-1,minRow:0,minCol:0})}));const P=Y4(e[0],"GDAL_METADATA"),Y=I_e(P);return x+=" "+IK({width:o,height:a,tileWidth:n,tileHeight:s,planes:u,ifds:e}),{width:o,height:a,tileWidth:n,tileHeight:s,planes:u,isBSQ:f,pixelType:d,compression:w,noData:g,isSupported:_,message:x,extent:R,affine:$?null:O,firstPyramidLevel:z,maximumPyramidLevel:B,pyramidBlockWidth:y,pyramidBlockHeight:M,tileBoundary:A,metadata:Y}}function h6(e,t){const r=MK(e,"PLANARCONFIGURATION");return r?r[0]===2:!!t&&t.isBSQ}function $_e(e){const{littleEndian:t,isBigTiff:r,firstIFD:i}=A_e(e);let n=i;const s=[];do{const o=C_e(e,t,n,0,b0.TIFF_TAGS,r?8:4);if(!o.success)break;s.push(o.ifd),n=o.nextIFD}while(n>0);return{...c6(s),littleEndian:t,isBigTiff:r,ifds:s}}function d6(e,t,r){const i=e.getUint32(t,r),n=e.getUint32(t+4,r);return r?n*Y0+i:i*Y0+n}function E_e(e,t,r){let i=r?e.getInt32(t,r):e.getUint32(t,r),n=r?e.getUint32(t+4,r):e.getInt32(t+4,r);const s=(r?i:n)>=0?1:-1;return r?i*=s:n*=s,s*(r?n*Y0+i:i*Y0+n)}function BM(e,t,r,i){return i?d6(e,t,r):e.getUint32(t,r)}function A_e(e){const t=new DataView(e,0,16),r=t.getUint16(0,!1);let i=null;if(r===18761)i=!0;else{if(r!==19789)throw"unexpected endianess byte";i=!1}const n=t.getUint16(2,i);if(n!==42&&n!==43)throw"unexpected tiff identifier";let s=4;const o=n===43;if(o){const a=t.getUint16(s,i);if(s+=2,a!==8||t.getUint16(s,i)!==0)throw"unsupported bigtiff version";s+=2}return{littleEndian:i,isBigTiff:o,firstIFD:BM(t,s,i,o)}}function C_e(e,t,r,i=0,n=b0.TIFF_TAGS,s=4){const o=K4(e,t,r,i,n,s);let a;const l=o.ifd;if(l){if(b0.ifdTags.forEach((u,h)=>{l.has(h)&&(a=l.get(h),a.data=K4(e,t,a.valueOffset-i,i,u).ifd)}),l.has("GEOKEYDIRECTORY")){a=l.get("GEOKEYDIRECTORY");const u=a.values;if(u&&u.length>4){const h=u[0]+"."+u[1]+"."+u[2];a.data=K4(e,t,a.valueOffset+6-i,i,b0.GEO_KEYS,2).ifd,a.data&&a.data.set("GEOTIFFVersion",{id:0,type:2,valueCount:1,valueOffset:null,values:[h]})}}if(l.has("XMP")){a=l.get("XMP");const u=a.values;typeof u[0]=="number"&&a.type===7&&(a.values=[p_e(new Uint8Array(u))])}}return o}function IK(e){const{width:t,height:r,tileHeight:i,tileWidth:n}=e,s=e.planes,o=n?n*i:t*r,a=rr(e.ifds[0],"BITSPERSAMPLE");let l="";return o*s>2**30/(a>8?a/8:1)&&(l=n?"tiled tiff exceeding 1 gigabits per tile is not supported":"scanline tiff exceeding 1 gigabits is not supported"),l}function k_e(e,t){var r;const{headerInfo:i,ifd:n,offsets:s,sizes:o}=t,a=s.map((R,D)=>lP(e,i.littleEndian,n,R,o[D]||e.byteLength)),l=h6(n,i),{pixelType:u,planes:h}=i,d=$$(u),f=rr(n,"TILEWIDTH"),m=rr(n,"TILELENGTH"),g=(r=rr(n,"COMPRESSION"))!=null?r:1,b=f*m;let w;const _=[];let x=a[0];const I=g===34887;for(let R=0;R<h;R++){if(w=new d(b),l&&I){x=a[R];for(let D=0;D<b;D++)w[D]=x[R][D+R]}else if(l||I&&!l)w=x.slice(b*R,b*(R+1));else for(let D=0;D<b;D++)w[D]=x[D*h+R];_.push(w)}const S=i.noData?i.noData[0]:null,T=i.metadata?i.metadata.statistics:null,$=T?T.map(R=>R.min):null,E=T?T.map(R=>R.max):null;let C,O;if(S!=null)if(C=new Uint8Array(b),Math.abs(S)>1e24)for(O=0;O<b;O++)Math.abs((_[0][O]-S)/S)<1e-6?C[O]=0:C[O]=1;else for(O=0;O<b;O++)_[0][O]===S?C[O]=0:C[O]=1;else $&&E&&t.applyMinMaxConstraint&&(C=M_e(_,$,E));return{pixelType:u,width:f,height:m,pixels:_,mask:C,noDataValue:S}}function O_e(e,t=0,r){r=r||$_e(e);const{ifds:i,noData:n}=r;if(i.length===0)throw"no valid image file directory";const s=IK(r);if(s)throw s;let o,a;const l=t===-1?i[i.length-1]:i[t],u=n?n[0]:null;if(a=r.tileWidth?x_e(e,r,l):S_e(e,r,l),u!==null){if(a.mask=new Uint8Array(a.width*a.height),Math.abs(u)>1e24)for(o=0;o<a.width*a.height;o++)Math.abs((a.pixels[0][o]-u)/u)<1e-6?a.mask[o]=0:a.mask[o]=1;else for(o=0;o<a.width*a.height;o++)a.pixels[0][o]===u?a.mask[o]=0:a.mask[o]=1;a.noDataValue=u}return a}var GM={};GM.defaultNoDataValue=sC(-1/0),GM.decode=function(e,t){var r=(t=t||{}).encodedMaskData||t.encodedMaskData===null,i=N_e(e,t.inputOffset||0,r),n=t.noDataValue!=null?sC(t.noDataValue):GM.defaultNoDataValue,s=P_e(i,t.pixelType||Float32Array,t.encodedMaskData,n,t.returnMask),o={width:i.width,height:i.height,pixelData:s.resultPixels,minValue:i.pixels.minValue,maxValue:i.pixels.maxValue,noDataValue:n};return s.resultMask&&(o.maskData=s.resultMask),t.returnEncodedMask&&i.mask&&(o.encodedMaskData=i.mask.bitset?i.mask.bitset:null),t.returnFileInfo&&(o.fileInfo=R_e(i,n),t.computeUsedBitDepths&&(o.fileInfo.bitDepths=L_e(i))),o};var P_e=function(e,t,r,i,n){var s,o,a=0,l=e.pixels.numBlocksX,u=e.pixels.numBlocksY,h=Math.floor(e.width/l),d=Math.floor(e.height/u),f=2*e.maxZError;r=r||(e.mask?e.mask.bitset:null),s=new t(e.width*e.height),n&&r&&(o=new Uint8Array(e.width*e.height));for(var m,g,b=new Float32Array(h*d),w=0;w<=u;w++){var _=w!==u?d:e.height%u;if(_!==0)for(var x=0;x<=l;x++){var I=x!==l?h:e.width%l;if(I!==0){var S,T,$,E,C=w*e.width*d+x*h,O=e.width-I,R=e.pixels.blocks[a];if(R.encoding<2?(R.encoding===0?S=R.rawData:(D_e(R.stuffedData,R.bitsPerPixel,R.numValidPixels,R.offset,f,b,e.pixels.maxValue),S=b),T=0):$=R.encoding===2?0:R.offset,r)for(g=0;g<_;g++){for(7&C&&(E=r[C>>3],E<<=7&C),m=0;m<I;m++)7&C||(E=r[C>>3]),128&E?(o&&(o[C]=1),s[C++]=R.encoding<2?S[T++]:$):(o&&(o[C]=0),s[C++]=i),E<<=1;C+=O}else if(R.encoding<2)for(g=0;g<_;g++){for(m=0;m<I;m++)s[C++]=S[T++];C+=O}else for(g=0;g<_;g++)if(s.fill)s.fill($,C,C+I),C+=I+O;else{for(m=0;m<I;m++)s[C++]=$;C+=O}if(R.encoding===1&&T!==R.numValidPixels)throw"Block and Mask do not match";a++}}}return{resultPixels:s,resultMask:o}},R_e=function(e,t){return{fileIdentifierString:e.fileIdentifierString,fileVersion:e.fileVersion,imageType:e.imageType,height:e.height,width:e.width,maxZError:e.maxZError,eofOffset:e.eofOffset,mask:e.mask?{numBlocksX:e.mask.numBlocksX,numBlocksY:e.mask.numBlocksY,numBytes:e.mask.numBytes,maxValue:e.mask.maxValue}:null,pixels:{numBlocksX:e.pixels.numBlocksX,numBlocksY:e.pixels.numBlocksY,numBytes:e.pixels.numBytes,maxValue:e.pixels.maxValue,minValue:e.pixels.minValue,noDataValue:t}}},L_e=function(e){for(var t=e.pixels.numBlocksX*e.pixels.numBlocksY,r={},i=0;i<t;i++){var n=e.pixels.blocks[i];n.encoding===0?r.float32=!0:n.encoding===1?r[n.bitsPerPixel]=!0:r[0]=!0}return Object.keys(r)},N_e=function(e,t,r){var i={},n=new Uint8Array(e,t,10);if(i.fileIdentifierString=String.fromCharCode.apply(null,n),i.fileIdentifierString.trim()!="CntZImage")throw"Unexpected file identifier string: "+i.fileIdentifierString;t+=10;var s=new DataView(e,t,24);if(i.fileVersion=s.getInt32(0,!0),i.imageType=s.getInt32(4,!0),i.height=s.getUint32(8,!0),i.width=s.getUint32(12,!0),i.maxZError=s.getFloat64(16,!0),t+=24,!r)if(s=new DataView(e,t,16),i.mask={},i.mask.numBlocksY=s.getUint32(0,!0),i.mask.numBlocksX=s.getUint32(4,!0),i.mask.numBytes=s.getUint32(8,!0),i.mask.maxValue=s.getFloat32(12,!0),t+=16,i.mask.numBytes>0){var o=new Uint8Array(Math.ceil(i.width*i.height/8)),a=(s=new DataView(e,t,i.mask.numBytes)).getInt16(0,!0),l=2,u=0;do{if(a>0)for(;a--;)o[u++]=s.getUint8(l++);else{var h=s.getUint8(l++);for(a=-a;a--;)o[u++]=h}a=s.getInt16(l,!0),l+=2}while(l<i.mask.numBytes);if(a!==-32768||u<o.length)throw"Unexpected end of mask RLE encoding";i.mask.bitset=o,t+=i.mask.numBytes}else(i.mask.numBytes|i.mask.numBlocksY|i.mask.maxValue)==0&&(o=new Uint8Array(Math.ceil(i.width*i.height/8)),i.mask.bitset=o);s=new DataView(e,t,16),i.pixels={},i.pixels.numBlocksY=s.getUint32(0,!0),i.pixels.numBlocksX=s.getUint32(4,!0),i.pixels.numBytes=s.getUint32(8,!0),i.pixels.maxValue=s.getFloat32(12,!0),t+=16;var d=i.pixels.numBlocksX,f=i.pixels.numBlocksY,m=d+(i.width%d>0?1:0),g=f+(i.height%f>0?1:0);i.pixels.blocks=new Array(m*g);for(var b=1e9,w=0,_=0;_<g;_++)for(var x=0;x<m;x++){var I=0,S=e.byteLength-t;s=new DataView(e,t,Math.min(10,S));var T={};i.pixels.blocks[w++]=T;var $=s.getUint8(0);if(I++,T.encoding=63&$,T.encoding>3)throw"Invalid block encoding ("+T.encoding+")";if(T.encoding!==2){if($!==0&&$!==2){if($>>=6,T.offsetType=$,$===2)T.offset=s.getInt8(1),I++;else if($===1)T.offset=s.getInt16(1,!0),I+=2;else{if($!==0)throw"Invalid block offset type";T.offset=s.getFloat32(1,!0),I+=4}if(b=Math.min(T.offset,b),T.encoding===1)if($=s.getUint8(I),I++,T.bitsPerPixel=63&$,$>>=6,T.numValidPixelsType=$,$===2)T.numValidPixels=s.getUint8(I),I++;else if($===1)T.numValidPixels=s.getUint16(I,!0),I+=2;else{if($!==0)throw"Invalid valid pixel count type";T.numValidPixels=s.getUint32(I,!0),I+=4}}var E;if(t+=I,T.encoding!=3){if(T.encoding===0){var C=(i.pixels.numBytes-1)/4;if(C!==Math.floor(C))throw"uncompressed block has invalid length";E=new ArrayBuffer(4*C),new Uint8Array(E).set(new Uint8Array(e,t,4*C));for(var O=new Float32Array(E),R=0;R<O.length;R++)b=Math.min(b,O[R]);T.rawData=O,t+=4*C}else if(T.encoding===1){var D=Math.ceil(T.numValidPixels*T.bitsPerPixel/8),F=Math.ceil(D/4);E=new ArrayBuffer(4*F),new Uint8Array(E).set(new Uint8Array(e,t,D)),T.stuffedData=new Uint32Array(E),t+=D}}}else t++,b=Math.min(b,0)}return i.pixels.minValue=b,i.eofOffset=t,i},D_e=function(e,t,r,i,n,s,o){var a,l,u,h=(1<<t)-1,d=0,f=0,m=Math.ceil((o-i)/n),g=4*e.length-Math.ceil(t*r/8);for(e[e.length-1]<<=8*g,a=0;a<r;a++){if(f===0&&(u=e[d++],f=32),f>=t)l=u>>>f-t&h,f-=t;else{var b=t-f;l=(u&h)<<b&h,l+=(u=e[d++])>>>(f=32-b)}s[a]=l<m?i+l*n:o}return s};const F_e=GM.decode,Cj=function(e,t){const r=t.width*t.height,i=t.pixelType;return Math.floor(e.byteLength/(r*TK(i)))},TK=function(e){let t=1;switch(e){case Uint8Array:case Int8Array:t=1;break;case Uint16Array:case Int16Array:t=2;break;case Uint32Array:case Int32Array:case Float32Array:t=4;break;case Float64Array:t=8}return t},j_e=function(e,t){if(8*e.byteLength<t)return null;const r=new Uint8Array(e,0,Math.ceil(t/8)),i=new Uint8Array(t);let n=0,s=0,o=0,a=0;for(o=0;o<r.length-1;o++)for(s=r[o],a=7;a>=0;a--)i[n++]=s>>a&1;for(a=7;n<t-1;)s=r[r.length-1],i[n++]=s>>a&1,a--;return i};class V_e{static decode(t,r){const i=r.pixelType,n=[],s=r.width*r.height,o=Cj(t,r),{bandIds:a,format:l}=r,u=a&&a.length||Cj(t,r),h=t.byteLength-t.byteLength%(s*TK(i)),d=new i(t,0,s*o);let f,m,g,b,w;if(l==="bip")for(f=0;f<u;f++){for(b=new i(s),w=a?a[f]:f,m=0;m<s;m++)b[m]=d[m*o+w];n.push(b)}else if(l==="bsq")for(f=0;f<u;f++)w=a?a[f]:f,n.push(d.subarray(w*s,(w+1)*s));return h<t.byteLength-1&&(g=j_e(t.slice(h),s)),{pixels:n,mask:g}}}var U_e=function(e){var t,r,i,n,s,o;function a(l){var u,h,d,f,m,g,b,w,_,x,I,S,T;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},m=null;;){switch(u=this.readUInt32(),w=function(){var $,E;for(E=[],$=0;$<4;++$)E.push(String.fromCharCode(this.data[this.pos++]));return E}.call(this).join(""),w){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(u);break;case"fcTL":m&&this.animation.frames.push(m),this.pos+=4,m={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,m.delay=1e3*f/d,m.disposeOp=this.data[this.pos++],m.blendOp=this.data[this.pos++],m.data=[];break;case"IDAT":case"fdAT":for(w==="fdAT"&&(this.pos+=4,u-=4),l=m?.data||this.imgData,I=0;0<=u?I<u:I>u;0<=u?++I:--I)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(this.transparency.indexed=this.read(u),(_=255-this.transparency.indexed.length)>0)for(S=0;0<=_?S<_:S>_;0<=_?++S:--S)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(u)[0];break;case 2:this.transparency.rgb=this.read(u)}break;case"tEXt":g=(x=this.read(u)).indexOf(0),b=String.fromCharCode.apply(String,x.slice(0,g)),this.text[b]=String.fromCharCode.apply(String,x.slice(g+1));break;case"IEND":return m&&this.animation.frames.push(m),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(T=this.colorType)===4||T===6,h=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*h,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=u}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}return a.load=function(l,u,h){var d;return typeof u=="function"&&(h=u),(d=new XMLHttpRequest).open("GET",l,!0),d.responseType="arraybuffer",d.onload=function(){var f;return f=new a(new Uint8Array(d.response||d.mozResponseArrayBuffer)),typeof u?.getContext=="function"&&f.render(u),typeof h=="function"?h(f):void 0},d.send(null)},r=1,i=2,t=0,a.prototype.read=function(l){var u,h;for(h=[],u=0;0<=l?u<l:u>l;0<=l?++u:--u)h.push(this.data[this.pos++]);return h},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(l){var u,h,d,f,m,g,b,w,_,x,I,S,T,$,E,C,O,R,D,F,z,B,y;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);for(l=(l=new qm(l)).getBytes(),C=(S=this.pixelBitlength/8)*this.width,T=new Uint8Array(C*this.height),g=l.length,E=0,$=0,h=0;$<g;){switch(l[$++]){case 0:for(f=D=0;D<C;f=D+=1)T[h++]=l[$++];break;case 1:for(f=F=0;F<C;f=F+=1)u=l[$++],m=f<S?0:T[h-S],T[h++]=(u+m)%256;break;case 2:for(f=z=0;z<C;f=z+=1)u=l[$++],d=(f-f%S)/S,O=E&&T[(E-1)*C+d*S+f%S],T[h++]=(O+u)%256;break;case 3:for(f=B=0;B<C;f=B+=1)u=l[$++],d=(f-f%S)/S,m=f<S?0:T[h-S],O=E&&T[(E-1)*C+d*S+f%S],T[h++]=(u+Math.floor((m+O)/2))%256;break;case 4:for(f=y=0;y<C;f=y+=1)u=l[$++],d=(f-f%S)/S,m=f<S?0:T[h-S],E===0?O=R=0:(O=T[(E-1)*C+d*S+f%S],R=d&&T[(E-1)*C+(d-1)*S+f%S]),b=m+O-R,w=Math.abs(b-m),x=Math.abs(b-O),I=Math.abs(b-R),_=w<=x&&w<=I?m:x<=I?O:R,T[h++]=(u+_)%256;break;default:throw new Error("Invalid filter algorithm: "+l[$-1])}E++}return T},a.prototype.decodePalette=function(){var l,u,h,d,f,m,g,b,w;for(h=this.palette,m=this.transparency.indexed||[],f=new Uint8Array((m.length||0)+h.length),d=0,l=0,u=g=0,b=h.length;g<b;u=g+=3)f[d++]=h[u],f[d++]=h[u+1],f[d++]=h[u+2],f[d++]=(w=m[l++])!=null?w:255;return f},a.prototype.copyToImageData=function(l,u){var h,d,f,m,g,b,w,_,x,I,S;if(d=this.colors,x=null,h=this.hasAlphaChannel,this.palette.length&&(x=(S=this._decodedPalette)!=null?S:this._decodedPalette=this.decodePalette(),d=4,h=!0),_=(f=l.data||l).length,g=x||u,m=b=0,d===1)for(;m<_;)w=x?4*u[m/4]:b,I=g[w++],f[m++]=I,f[m++]=I,f[m++]=I,f[m++]=h?g[w++]:this.transparency.grayscale&&this.transparency.grayscale===I?0:255,b=w;else for(;m<_;)w=x?4*u[m/4]:b,f[m++]=g[w++],f[m++]=g[w++],f[m++]=g[w++],f[m++]=h?g[w++]:this.transparency.rgb&&this.transparency.rgb[1]===g[w-3]&&this.transparency.rgb[3]===g[w-2]&&this.transparency.rgb[5]===g[w-1]?0:255,b=w},a.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l},s=e.document&&e.document.createElement("canvas"),o=s&&s.getContext("2d"),n=function(l){var u;return o.width=l.width,o.height=l.height,o.clearRect(0,0,l.width,l.height),o.putImageData(l,0,0),(u=new Image).src=s.toDataURL(),u},a.prototype.decodeFrames=function(l){var u,h,d,f,m,g,b,w;if(this.animation){for(w=[],h=m=0,g=(b=this.animation.frames).length;m<g;h=++m)u=b[h],d=l.createImageData(u.width,u.height),f=this.decodePixels(new Uint8Array(u.data)),this.copyToImageData(d,f),u.imageData=d,w.push(u.image=n(d));return w}},a.prototype.renderFrame=function(l,u){var h,d,f;return h=(d=this.animation.frames)[u],f=d[u-1],u===0&&l.clearRect(0,0,this.width,this.height),f?.disposeOp===r?l.clearRect(f.xOffset,f.yOffset,f.width,f.height):f?.disposeOp===i&&l.putImageData(f.imageData,f.xOffset,f.yOffset),h.blendOp===t&&l.clearRect(h.xOffset,h.yOffset,h.width,h.height),l.drawImage(h.image,h.xOffset,h.yOffset)},a.prototype.animate=function(l){var u,h,d,f,m,g,b=this;return h=0,g=this.animation,f=g.numFrames,d=g.frames,m=g.numPlays,(u=function(){var w,_;if(w=h++%f,_=d[w],b.renderFrame(l,w),f>1&&h/f<m)return b.animation._timeout=setTimeout(u,_.delay)})()},a.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},a.prototype.render=function(l){var u,h;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,u=l.getContext("2d"),this.animation?(this.decodeFrames(u),this.animate(u)):(h=u.createImageData(this.width,this.height),this.copyToImageData(h,this.decodePixels()),u.putImageData(h,0,0))},a}(self);const z_e=new Set(["jpg","png","bmp","gif"]);function B_e(e,t){if(!T$)throw new Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");const{width:r,height:i,pixelType:n}=t,s=AK(n),o=s.pixelTypeCtor,a=t.noDataValue==null?s.noDataValue:t.noDataValue;let l,u,h=0,d=0;const f=e.byteLength-10;for(;d<f;){const m=F_e(e,{inputOffset:d,encodedMaskData:l,returnMask:h===0,returnEncodedMask:h===0,returnFileInfo:!0,pixelType:o,noDataValue:a});if(r&&i&&(m.width!==r||m.height!==i))throw new Z("rasterCoded:decode","lerc decoded result has width or height different from specified in options");if(d=m.fileInfo.eofOffset,h===0&&(l=m.encodedMaskData,u=new qt({width:m.width,height:m.height,pixels:[],pixelType:n,mask:m.maskData,statistics:[]})),h++,u.addData({pixels:m.pixelData,statistics:{minValue:m.minValue,maxValue:m.maxValue,noDataValue:m.noDataValue}}),f-d>10){const g=String.fromCharCode.apply(null,new Uint8Array(e,d,10));d+=g.indexOf("CntZ")>-1?g.indexOf("CntZ"):0}}return u}function G_e(e,t){if(!T$)throw new Z("rasterCoded:decode","lerc decoder is not supported on big endian platform");let r,i,n,s=0,o=t.offset||0,a=0;const l=t.eof||e.byteLength-10,u=[],{width:h,height:d}=t;let f=0;for(;o<l;){var m;if(i=xK.decode(e,{inputOffset:o,maskData:r,returnFileInfo:!0}),h&&d&&(i.width!==h||i.height!==d))throw new Z("rasterCoded:decode","lerc2 decoded result has width or height different from what's specified in options");if(o=i.fileInfo.eofOffset,r=i.maskData,s===0&&(a=i.fileInfo.numValidPixel,n=new qt({width:i.width,height:i.height,pixels:[],pixelType:i.fileInfo.pixelType,mask:r,statistics:[]})),i.fileInfo.mask&&i.fileInfo.mask.numBytes>0&&f++,r&&u.push(r),i.dimCount>1&&((m=i.pixelData)==null?void 0:m.length)===i.width*i.height*i.dimCount){var g,b,w,_;i.pixelData=i.pixelData.slice(-i.width*i.height);const T=(g=i.dimStats)==null||(b=g.minValues)==null?void 0:b[i.dimCount-1],$=(w=i.dimStats)==null||(_=w.maxValues)==null?void 0:_[i.dimCount-1];T!=null&&$!=null&&(i.minValue=T,i.maxValue=$)}if(s++,n.addData({pixels:i.pixelData,statistics:{minValue:i.minValue,maxValue:i.maxValue}}),l-o>10){const T=String.fromCharCode.apply(null,new Uint8Array(e,o,10));o+=T.indexOf("Lerc")>-1?T.indexOf("Lerc"):0}}let x=0,I=0,S=0;if(f>1){for(S=n.width*n.height,r=new Uint8Array(S),r.set(u[0]),x=1;x<u.length;x++){const T=u[x];for(I=0;I<S;I++)r[I]=r[I]&T[I]}for(a=0,I=0;I<S;I++)a+=r[I];n.mask=r}return n.validPixelCount=a,n}function q_e(e,t){const r=O_e(e,t.pyramidLevel||0),i=new qt({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return i.updateStatistics(),i}function H_e(e,t){const r=k_e(e,t.customOptions),i=new qt({width:r.width,height:r.height,pixels:r.pixels,pixelType:r.pixelType.toLowerCase(),mask:r.mask,statistics:null});return i.updateStatistics(),i}function $K(e,t){const r=t.pixelType||"u8",i=qt.getPixelArrayConstructor(r),n=r==="u8"?e:new i(e.buffer),s=[],o=t.planes||1;if(o===1)s.push(n);else for(let l=0;l<o;l++){const u=(t.width||1)*(t.height||e.length),h=new i(u);for(let d=0;d<u;d++)h[d]=n[d*o+l];s.push(h)}const a=new qt({width:t.width||1,height:t.height||e.length,pixels:s,pixelType:r,statistics:null});return a.updateStatistics(),a}function W_e(e,t){return $K(new qm(new Uint8Array(e)).getBytes(),t)}function J_e(e,t){return $K(l6(e,t.offset,t.eof,!t.isInputBigEndian),t)}function Z_e(e,t,r){const{pixelTypeCtor:i}=AK(t.pixelType),n=(0,V_e.decode)(e,{width:t.width,height:t.height,pixelType:i,format:r}),s=new qt({width:t.width,height:t.height,pixels:n.pixels,pixelType:t.pixelType,mask:n.mask,statistics:null});return s.updateStatistics(),s}function Y_e(e){const t=d_e.decode(e),r=new qt({width:t.width,height:t.height,pixels:t.pixels,pixelType:"U8",mask:t.mask,statistics:null});return r.updateStatistics(),r}function K_e(e,t){const r=new Uint8Array(e),i=new U_e(r),{width:n,height:s}=t,o=n*s,a=i.decode();let l,u=0,h=0;const d=new Uint8Array(o);for(u=0;u<o;u++)d[u]=a[4*u+3];const f=new qt({width:n,height:s,pixels:[],pixelType:"U8",mask:d,statistics:[]});for(u=0;u<3;u++){for(l=new Uint8Array(o),h=0;h<o;h++)l[h]=a[4*h+u];f.addData({pixels:l})}return f.updateStatistics(),f}async function X_e(e,t,r,i){const n=new a6,s={applyJpegMask:!1,format:t,...r},o=await n.decode(e,s,i),a=new qt(o);return a.updateStatistics(),a}function EK(e){if(e==null)throw new Z("rasterCodec:decode","parameter encodeddata is required.");const t=new Uint8Array(e,0,10);let r="";return t[0]===255&&t[1]===216?r="jpg":t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71?r="png":t[0]===67&&t[1]===110&&t[2]===116&&t[3]===90&&t[4]===73&&t[5]===109&&t[6]===97&&t[7]===103&&t[8]===101&&t[9]===32?r="lerc":t[0]===76&&t[1]===101&&t[2]===114&&t[3]===99&&t[4]===50&&t[5]===32?r="lerc2":t[0]===73&&t[1]===73&&t[2]===42&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===42||t[0]===73&&t[1]===73&&t[2]===43&&t[3]===0||t[0]===77&&t[1]===77&&t[2]===0&&t[3]===43?r="tiff":t[0]===71&&t[1]===73&&t[2]===70?r="gif":t[0]===66&&t[1]===77?r="bmp":String.fromCharCode.apply(null,t).toLowerCase().indexOf("error")>-1&&(r="error"),r}function Q_e(e){let t=null;switch(e){case"lerc":t=B_e;break;case"lerc2":t=G_e;break;case"jpg":t=Y_e;break;case"png":t=K_e;break;case"bsq":case"bip":t=(r,i)=>Z_e(r,i,e);break;case"tiff":t=q_e;break;case"deflate":t=W_e;break;case"lzw":t=J_e;break;case"error":t=()=>{throw new Z("rasterCodec:decode","input data contains error")};break;default:t=()=>{throw new Z("rasterCodec:decode","unsupported raster format")}}return t}function AK(e){let t=null,r=null;switch(e?e.toLowerCase():"f32"){case"u1":case"u2":case"u4":case"u8":r=255,t=Uint8Array;break;case"u16":r=r||65535,t=Uint16Array;break;case"u32":r=r||2**32-1,t=Uint32Array;break;case"s8":r=r||-128,t=Int8Array;break;case"s16":r=r||-32768,t=Int16Array;break;case"s32":r=r||0-2**31,t=Int32Array;break;default:t=Float32Array}return{pixelTypeCtor:t,noDataValue:r}}function e2e(e,t=1){if(!e)return;const{pixels:r,width:i,height:n,mask:s}=e;if(!r||r.length===0)return;const o=r.length,a=i-1,l=n-1,u=[];let h,d,f,m,g,b,w;const _=qt.getPixelArrayConstructor(e.pixelType);if(t===0){for(h=0;h<o;h++){for(g=r[h],b=new _(a*l),d=0;d<l;d++)for(m=d*i,f=0;f<a;f++)b[d*a+f]=g[m+f];u.push(b)}if(s)for(w=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*i,f=0;f<a;f++)w[d*a+f]=s[m+f]}else{for(h=0;h<o;h++){for(g=r[h],b=new _(a*l),d=0;d<l;d++)for(m=d*i,f=0;f<a;f++)b[d*a+f]=(g[m+f]+g[m+f+1]+g[m+i+f]+g[m+i+f+1])/4;u.push(b)}if(s)for(w=new Uint8Array(a*l),d=0;d<l;d++)for(m=d*i,f=0;f<a;f++)w[d*a+f]=Math.min.apply(null,[s[m+f],s[m+f+1],s[m+i+f],s[m+i+f+1]])}e.width=a,e.height=l,e.mask=w,e.pixels=u}function t2e(e){let t=EK(e);return t==="lerc2"?t="lerc":t==="error"&&(t=""),t}async function kj(e,t={},r){if(e==null)throw new Z("rasterCodec:decode","missing encodeddata parameter.");let i,n,s=t.format&&t.format.toLowerCase();if(!(s!=="bsq"&&s!=="bip"||t.width!=null&&t.height!=null))throw new Z("rasterCodec:decode","requires width and height in options parameter.");return s==="tiff"&&t.customOptions?H_e(e,t):((!s||s!=="bsq"&&s!=="bip"&&s!=="deflate"&&s!=="lzw")&&(s=EK(e)),t.useCanvas&&z_e.has(s)?n=await X_e(e,s,t,r):(i=Q_e(s),t.isPoint&&((t={...t}).width++,t.height++),n=i(e,t),t.isPoint&&e2e(n)),n)}const Oj=new lt({classBreaksDef:"class-breaks-definition",uniqueValueDef:"unique-value-definition"});let Mg=class extends me{constructor(){super(...arguments),this.baseSymbol=null,this.colorRamp=null,this.type=null}};c([p({type:vs,json:{write:!0}})],Mg.prototype,"baseSymbol",void 0),c([p({types:n$,json:{read:{reader:s$},write:!0}})],Mg.prototype,"colorRamp",void 0),c([p({json:{read:Oj.read,write:Oj.write}})],Mg.prototype,"type",void 0),Mg=c([N("esri.rest.support.ClassificationDefinition")],Mg);const r2e=Mg,Pj=new lt({esriClassifyEqualInterval:"equal-interval",esriClassifyManual:"manual",esriClassifyNaturalBreaks:"natural-breaks",esriClassifyQuantile:"quantile",esriClassifyStandardDeviation:"standard-deviation",esriClassifyDefinedInterval:"defined-interval"}),Rj=new lt({esriNormalizeByLog:"log",esriNormalizeByPercentOfTotal:"percent-of-total",esriNormalizeByField:"field"});let Ha=class extends r2e{constructor(){super(...arguments),this.breakCount=null,this.classificationField=null,this.classificationMethod=null,this.normalizationField=null,this.normalizationType=null,this.type="class-breaks-definition"}set standardDeviationInterval(e){this.classificationMethod==="standard-deviation"&&this._set("standardDeviationInterval",e)}set definedInterval(e){this.classificationMethod==="defined-interval"&&this._set("definedInterval",e)}};c([p({json:{write:!0}})],Ha.prototype,"breakCount",void 0),c([p({json:{write:!0}})],Ha.prototype,"classificationField",void 0),c([p({type:String,json:{read:Pj.read,write:Pj.write}})],Ha.prototype,"classificationMethod",void 0),c([p({json:{write:!0}})],Ha.prototype,"normalizationField",void 0),c([p({json:{read:Rj.read,write:Rj.write}})],Ha.prototype,"normalizationType",void 0),c([p({value:null,json:{write:!0}})],Ha.prototype,"standardDeviationInterval",null),c([p({value:null,json:{write:!0}})],Ha.prototype,"definedInterval",null),c([p()],Ha.prototype,"type",void 0),Ha=c([N("esri.rest.support.ClassBreaksDefinition")],Ha);const Prt=Ha,i2e=.25,n2e=i$.fromJSON({type:"multipart",colorRamps:[{fromColor:[0,0,255],toColor:[0,255,255]},{fromColor:[0,255,255],toColor:[255,255,0]},{fromColor:[255,255,0],toColor:[255,0,0]}]}),Lj=i$.fromJSON(oK[0]),CK=new Set(["scientific","standard-time","vector-uv","vector-magdir","vector-u","vector-v","vector-magnitude","vector-direction"]);function s2e(e,t){const{attributeTable:r,colormap:i}=e;if(p6(e)){const n=b2e(e);if(U(n))return n}if(U(i)){const n=p2e(e);if(U(n))return n}if(U(r)){const n=h2e(e);if(U(n))return n}return a2e(e,t)}function o2e(e){const t=["raster-stretch"];return RK(e)&&t.push("raster-colormap"),PK(e)&&t.push("unique-value"),m2e(e)&&t.push("class-breaks"),f2e(e)&&t.push("raster-shaded-relief"),p6(e)&&t.push("vector-field"),g2e(e)&&t.push("animated-flow"),t}function Rrt(e,t,r){const i=["nearest","bilinear","cubic","majority"].find(n=>n===r?.toLowerCase());return t==="Map"?i??"bilinear":e.dataType==="standard-time"?i??"nearest":e.dataType==="thematic"||e.attributeTable||e.colormap?i==="nearest"||i==="majority"?i:"nearest":i??"bilinear"}function a2e(e,t){var r,i,n,s;e=l2e(e,t?.variableName);const{bandCount:o}=e;let{bandIds:a,stretchType:l}=t||{};(r=a)!=null&&r.some(w=>w>=o)&&(a=null);let u=e.statistics,h=e.histograms;var d;o>1?(a=(d=a)!=null&&d.length?a:kK(e),u=u==null?null:a.map(w=>u[w]),h=h==null?null:a.map(w=>h[w])):a=[0],l==null&&(l=c2e(e));let f=!1;switch(l){case"none":f=!1;break;case"percent-clip":f=!((i=h)!=null&&i.length);break;default:f=!((n=u)!=null&&n.length)}const{dataType:m}=e,g=((s=a)==null?void 0:s.length)===1&&CK.has(m)?n2e:null,b=new r6({stretchType:l,dynamicRangeAdjustment:f,colorRamp:g,outputMin:0,outputMax:255,gamma:a.length===1?[1]:[1,1,1],useGamma:!1});return l==="percent-clip"?b.maxPercent=b.minPercent=i2e:l==="standard-deviation"&&(b.numberOfStandardDeviations=2),!f&&(U(e.multidimensionalInfo)||t!=null&&t.includeStatisticsInStretch)&&(l==="percent-clip"?b.histograms=h:l!=="min-max"&&l!=="standard-deviation"||(b.statistics=u)),b}function l2e(e,t){if(t==null)return e;let r=e.statistics,i=e.histograms;const{multidimensionalInfo:n}=e;if(t&&U(n)){const{statistics:s,histograms:o}=n.variables.find(a=>a.name===t);s!=null&&s.length&&(r=s),o!=null&&o.length&&(i=o)}return Ew.fromJSON({...e.toJSON(),statistics:r,histograms:i})}function kK(e){const t=e.bandCount;if(t===1)return null;if(t===2)return[0];const r=e.keyProperties&&e.keyProperties.BandProperties;let i;if(r&&r.length===t){const{red:n,green:s,blue:o,nir:a}=u2e(r);n!=null&&s!=null&&o!=null?i=[n,s,o]:a!=null&&n!=null&&s!=null&&(i=[a,n,s])}return!i&&t>=3&&(i=[0,1,2]),i}function u2e(e){const t={};for(let i=0;i<e.length;i++){var r;const n=e[i],s=(r=n.BandName)==null?void 0:r.toLowerCase();if(s==="red")t.red=i;else if(s==="green")t.green=i;else if(s==="blue")t.blue=i;else if(s==="nearinfrared"||s==="nearinfrared_1"||s==="nir")t.nir=i;else if(n.WavelengthMax&&n.WavelengthMin){const o=n.WavelengthMin,a=n.WavelengthMax;t.blue==null&&o>=410&&o<=480&&a>=480&&a<=540?t.blue=i:t.green==null&&o>=490&&o<=560&&a>=560&&a<=610?t.green=i:t.red==null&&o>=595&&o<=670&&a>=660&&a<=730?t.red=i:t.nir==null&&o>=700&&o<=860&&a>=800&&a<=950&&(t.nir=i)}}return t}function c2e(e){let t="percent-clip";const{pixelType:r,dataType:i,histograms:n,statistics:s}=e;return r!=="u8"||i!=="processed"&&U(n)&&U(s)?r==="u8"||i==="elevation"||CK.has(i)?t="min-max":U(n)?t="percent-clip":U(s)&&(t="min-max",t="min-max"):t="none",t}function h2e(e,t,r,i){if(!PK(e,t))return null;const{attributeTable:n,statistics:s}=e,o=OK(n,t),a=Aw(n,"red"),l=Aw(n,"green"),u=Aw(n,"blue"),h=new IZ,d=[],f=new Set,m=!!(a&&l&&u);if(U(n))n.features.forEach(g=>{const b=g.attributes[o.name];if(!f.has(g.attributes[o.name])&&b!=null){f.add(b);const w=m&&(a.type==="single"||a.type==="double")&&(l.type==="single"||l.type==="double")&&(u.type==="single"||u.type==="double")&&!n.features.some(x=>x.attributes[a.name]>1||x.attributes[l.name]>1||x.attributes[u.name]>1),_=w?255:1;d.push(new H0({value:g.attributes[o.name],label:g.attributes[o.name]+"",symbol:{type:"simple-fill",style:"solid",outline:null,color:new Le(m?[g.attributes[a.name]*_,g.attributes[l.name]*_,g.attributes[u.name]*_,1]:[0,0,0,0])}}))}});else if(s!=null&&s[0])for(let g=s[0].min;g<=s[0].max;g++)d.push(new H0({value:g,label:g.toString(),symbol:{type:"simple-fill",style:"solid",outline:null,color:new Le([0,0,0,0])}}));if(d.sort((g,b)=>g.value&&typeof g.value.valueOf()=="string"?0:g.value>b.value?1:-1),!m){const g=Gm(Lj,d.length);d.forEach((b,w)=>b.symbol.color=new Le(g[w].slice(1,4))),h.colorRamp=Lj}if(r||i){const g=r||Gm(i,d.length).map(b=>b.slice(1));d.forEach((b,w)=>b.symbol.color=new Le(g[w])),h.colorRamp=i}return new qv({field:o.name,uniqueValueInfos:d,authoringInfo:h})}function OK(e,t,r){let i;return U(e)?(i=t?e.fields.find(n=>t.toLowerCase()===n.name.toLowerCase()):d2e(e.fields),i||(r||(i=e.fields.find(n=>n.type==="string")),i||(i=Aw(e,"value")))):i=new wo({name:"value"}),i}function d2e(e){let t;for(let r=0;r<e.length;r++){const i=e[r].name.toLowerCase();if(e[r].type==="string"){if(i.startsWith("class")){t=e[r];break}t==null&&(i.endsWith("name")||i.endsWith("type"))&&(t=e[r])}}return t}function Aw(e,t){return U(e)?e.fields.find(r=>r.name.toLowerCase()===t):null}function PK(e,t){const{attributeTable:r,bandCount:i}=e;return!U(r)&&y2e(e)?!0:!(!U(r)||i>1||t&&r.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function RK(e){const{bandCount:t,colormap:r}=e;return U(r)&&r.length&&t===1}function p2e(e){if(!RK(e))return null;let t;const{attributeTable:r,colormap:i}=e;if(U(r)){const n=Aw(r,"value"),s=OK(r,null,!0);s.type==="string"&&(t={},r.features.forEach(o=>{const a=o.attributes;t[a[n.name]]=s?a[s.name]:a[n.name]}))}return t6.createFromColormap(i,t)}function f2e(e){return e.dataType==="elevation"}function m2e(e){const{attributeTable:t,bandCount:r}=e;return r===1&&(U(t)||U(e.histograms))}function y2e(e){var t,r,i;return["u8","s8"].indexOf(e.pixelType)>-1&&((t=e.statistics)==null||(r=t[0])==null?void 0:r.min)!=null&&((i=e.statistics[0])==null?void 0:i.max)!=null&&e.bandCount===1}function p6(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}function g2e(e){const{dataType:t}=e;return t==="vector-uv"||t==="vector-magdir"}const v2e=new Map([["m/s","meter-per-second"],["km/h","kilometer-per-hour"],["knots","knots"],["ft/s","feet-per-second"],["mph","mile-per-hour"]]);function b2e(e){if(!p6(e))return null;let t;if(U(e.statistics)&&e.statistics.length){const n=e.dataType==="vector-uv",{min:s,max:o}=e.statistics[0];t=[{type:"size",field:"Magnitude",minSize:10,maxSize:40,minDataValue:n?Math.min(Math.abs(s),Math.abs(o)):s,maxDataValue:n?Math.max(Math.abs(s),Math.abs(o)):o}]}const r=U(e.multidimensionalInfo)?v2e.get(e.multidimensionalInfo.variables[0].unit):null,i=new o6({visualVariables:t,inputUnit:r,rotationType:"geographic"});return i.visualVariables=[...i.sizeVariables,...i.rotationVariables],i}function Nj(e){var t;return{color:(t=e.symbolLayers[0].material)==null?void 0:t.color,type:"esriSFS",style:"esriSFSSolid"}}function w2e(e){if(e.type==="uniqueValue"){var t;const i=e.uniqueValueInfos,n=i[0].symbol;return n!=null&&(t=n.symbolLayers)!=null&&t.length&&(e.uniqueValueInfos=i.map(s=>({value:s.value,label:s.label,symbol:s.symbol?Nj(s.symbol):null}))),e}if(e.type==="classBreaks"){var r;const i=e.classBreakInfos,n=i[0].symbol;return n!=null&&(r=n.symbolLayers)!=null&&r.length&&(e.classBreakInfos=i.map(s=>({classMinValue:s.classMinValue,classMaxValue:s.classMaxValue,label:s.label,symbol:s.symbol?Nj(s.symbol):null}))),e}return e}function LK(e){let{altitude:t,azimuth:r}=e;const{hillshadeType:i,pixelSizePower:n,pixelSizeFactor:s,scalingType:o,isGCS:a,resolution:l}=e,u=i==="multi-directional"?2*e.zFactor:e.zFactor,{x:h,y:d}=l;let f=u/(8*h),m=u/(8*d);if(a&&u>.001&&(f/=111e3,m/=111e3),o==="adjusted")if(a){const F=111e3*h,z=111e3*d;f=(u+F**n*s)/(8*F),m=(u+z**n*s)/(8*z)}else f=(u+h**n*s)/(8*h),m=(u+d**n*s)/(8*d);let g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-r+90)*Math.PI/180,_=Math.sin(g)*Math.cos(w),x=Math.sin(g)*Math.sin(w);const I=[315,270,225,360,180,0],S=[60,60,60,60,60,90],T=new Float32Array([3,5,3,2,1,4]),$=T.reduce((F,z)=>F+z),E=T.map(F=>F/$),C=i==="multi-directional"?I.length:1,O=new Float32Array(6),R=new Float32Array(6),D=new Float32Array(6);if(i==="multi-directional")for(let F=0;F<C;F++)t=S[F],r=I[F],g=(90-t)*Math.PI/180,b=Math.cos(g),w=(360-r+90)*Math.PI/180,_=Math.sin(g)*Math.cos(w),x=Math.sin(g)*Math.sin(w),O[F]=b,R[F]=_,D[F]=x;else O.fill(b),R.fill(_),D.fill(x);return{resolution:l,factor:[f,m],sinZcosA:_,sinZsinA:x,cosZ:b,sinZcosAs:R,sinZsinAs:D,cosZs:O,weights:E,hillshadeType:["traditional","multi-directional"].indexOf(i)}}function _2e(e,t){if(!ai(e))return e;const{width:r,height:i,mask:n}=e,s=new Uint8Array(r*i);n&&s.set(n);const{factor:o,sinZcosA:a,sinZsinA:l,cosZ:u,sinZcosAs:h,sinZsinAs:d,cosZs:f,weights:m}=LK(t),[g,b]=o,{hillshadeType:w}=t,_=e.pixels[0],x=new Uint8Array(r*i);let I,S,T,$,E,C,O,R;const D=1;for(let F=D;F<i-D;F++){const z=F*r;for(let B=D;B<r-D;B++){if(n&&!n[z+B]){x[z+B]=0;continue}let y=8;if(n&&(y=n[z-r+B-1]+n[z-r+B]+n[z-r+B+1]+n[z+B-1]+n[z+B+1]+n[z+r+B-1]+n[z+r+B]+n[z+r+B+1],y<7)){x[z+B]=0,s[z+B]=0;continue}y===7?(I=n[z-r+B-1]?_[z-r+B-1]:_[z+B],S=n[z-r+B]?_[z-r+B]:_[z+B],T=n[z-r+B+1]?_[z-r+B+1]:_[z+B],$=n[z+B-1]?_[z+B-1]:_[z+B],E=n[z+B+1]?_[z+B+1]:_[z+B],C=n[z+r+B-1]?_[z+r+B-1]:_[z+B],O=n[z+r+B]?_[z+r+B]:_[z+B],R=n[z+r+B+1]?_[z+r+B+1]:_[z+B]):(I=_[z-r+B-1],S=_[z-r+B],T=_[z-r+B+1],$=_[z+B-1],E=_[z+B+1],C=_[z+r+B-1],O=_[z+r+B],R=_[z+r+B+1]);const M=(T+E+E+R-(I+$+$+C))*g,A=(C+O+O+R-(I+S+S+T))*b,P=Math.sqrt(1+M*M+A*A);let Y=0;if(w==="traditional"){let Q=255*(u+l*A-a*M)/P;Q<0&&(Q=0),Y=Q}else{const Q=d.length;for(let le=0;le<Q;le++){let re=255*(f[le]+d[le]*A-h[le]*M)/P;re<0&&(re=0),Y+=re*m[le]}}x[z+B]=255&Y}}for(let F=0;F<i;F++)x[F*r]=x[F*r+1],x[(F+1)*r-1]=x[(F+1)*r-2];for(let F=1;F<r-1;F++)x[F]=x[F+r],x[F+(i-1)*r]=x[F+(i-2)*r];return new qt({width:r,height:i,pixels:[x],mask:n?s:null,pixelType:"u8",validPixelCount:e.validPixelCount,statistics:[{minValue:0,maxValue:255}]})}function x2e(e,t,r,i){if(!ai(e)||!ai(t))return;const{min:n,max:s}=i,o=e.pixels[0],{pixels:a,mask:l}=t,u=a[0],h=255.00001/(s-n),d=new Uint8ClampedArray(u.length),f=new Uint8ClampedArray(u.length),m=new Uint8ClampedArray(u.length),g=r.length-1;for(let b=0;b<u.length;b++){if(l&&l[b]===0)continue;const w=Math.floor((u[b]-n)*h),[_,x]=r[w<0?0:w>g?g:w],I=o[b],S=I*x,T=S*(1-Math.abs(_%2-1)),$=I-S;switch(Math.floor(_)){case 0:d[b]=S+$,f[b]=T+$,m[b]=$;break;case 1:d[b]=T+$,f[b]=S+$,m[b]=$;break;case 2:d[b]=$,f[b]=S+$,m[b]=T+$;break;case 3:d[b]=$,f[b]=T+$,m[b]=S+$;break;case 4:d[b]=T+$,f[b]=$,m[b]=S+$;break;case 5:case 6:d[b]=S+$,f[b]=$,m[b]=T+$}}e.pixels=[d,f,m],e.updateStatistics()}const Dj=Te.getLogger("esri.renderers.support.RasterSymbolizer");function S2e(e,t){const{attributeTable:r,bandCount:i}=e;return!(!U(r)||i>1||t&&r.fields.find(n=>n.name.toLowerCase()===t.toLowerCase())==null)}function M2e(e){return e.dataType==="elevation"}function I2e(e){const{bandCount:t,colormap:r}=e;return U(r)&&r.length&&t===1}const Fj={u1:[0,1],u2:[0,3],u4:[0,15],u8:[0,255],s8:[-128,127],u16:[0,65535],s16:[-32768,32767],u32:[0,4294967295],s32:[-2147483648,2147483647],f32:[-34e38,34e38],f64:[-Number.MAX_VALUE,Number.MAX_VALUE]};let xf=class extends me{constructor(e){super(e)}bind(){const{rendererJSON:e}=this;if(!e)return{success:!1};let t;switch(this.lookup={rendererJSON:{}},e.type){case"uniqueValue":t={success:this._updateUVRenderer(e)};break;case"rasterColormap":t={success:this._updateColormapRenderer(e)};break;case"rasterStretch":t={success:this._updateStretchRenderer(e)};break;case"classBreaks":t={success:this._updateClassBreaksRenderer(e)};break;case"rasterShadedRelief":t={success:this._updateShadedReliefRenderer(e)};break;case"vectorField":t={success:this._updateVectorFieldRenderer()};break;case"animatedFlow":t=this._updateAnimatedFlowRenderer()}return t}symbolize(e){let t=e&&e.pixelBlock;if(!jj(t))return t;if(e.simpleStretchParams&&this.rendererJSON.type==="rasterStretch")return this.simpleStretch(t,e.simpleStretchParams);try{let r;switch(t.pixels.length>3&&(t=cj(t,[0,1,2])),this.rendererJSON.type){case"uniqueValue":case"rasterColormap":r=this._symbolize_colormap(t);break;case"classBreaks":r=this._symbolize_classBreaks(t);break;case"rasterStretch":r=this._symbolize_stretch(t,e.bandIds);break;case"rasterShadedRelief":{const{extent:i}=e,n=i.spatialReference.isGeographic,s={x:(i.xmax-i.xmin)/t.width,y:(i.ymax-i.ymin)/t.height};r=this._symbolize_shadedRelief(t,{isGCS:n,resolution:s});break}}return r}catch(r){return Dj.error("symbolize",r.message),t}}simpleStretch(e,t){if(!jj(e))return e;try{return e.pixels.length>3&&(e=cj(e,[0,1,2])),G4(e,t)}catch(r){return Dj.error("symbolize",r.message),e}}generateWebGLParameters(e){if(["uniqueValue","rasterColormap","classBreaks"].indexOf(this.rendererJSON.type)>-1){var t;const{indexedColormap:a,offset:l}=((t=this.lookup)==null?void 0:t.colormapLut)||{};return{colormap:a,colormapOffset:l,type:"lut"}}const{pixelBlock:r,isGCS:i,resolution:n,bandIds:s}=e,{rendererJSON:o}=this;return o.type==="rasterStretch"?this.generateStretchWebGLParams(r,o,s):o.type==="rasterShadedRelief"?this.generateShadedReliefWebGLParams(o,i,n):o.type==="vectorField"?this._generateVectorFieldWebGLParams(o):null}_isLUTChanged(e){if(!this.lookup||!this.lookup.rendererJSON)return!0;if("colorRamp"in this.rendererJSON){const t=this.rendererJSON.colorRamp;return e?JSON.stringify(t)!==JSON.stringify(this.lookup.rendererJSON.colorRamp):(this.rendererJSON,this.lookup.rendererJSON,JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON))}return JSON.stringify(this.rendererJSON)!==JSON.stringify(this.lookup.rendererJSON)}_symbolize_colormap(e){return this._isLUTChanged()&&!this.bind().success?e:B4(e,this.lookup.colormapLut)}_symbolize_classBreaks(e){const t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1;return this._isLUTChanged()&&!this.bind().success?e:r?B4(e,this.lookup.colormapLut):bwe(e,this.lookup.remapLut)}_symbolize_stretch(e,t){const{pixelType:r,bandCount:i}=this.rasterInfo,n=this.rendererJSON,s=["u8","u16","s8","s16"].indexOf(r)>-1;let o,a;const{dra:l}=n,u=n.useGamma?n.gamma:null;if(n.stretchType==="histogramEqualization"){const f=l?null:this.lookup.histogramLut,m=this.getStretchCutoff(n,e,t,!f),g=G4(e,{...m,gamma:u});a=pj(g,{lut:l?m.histogramLut:f,offset:0})}else if(s){var h,d;if(l){const f=this.getStretchCutoff(n,e,t);o=hj({pixelType:r,...f,gamma:u})}else if(this._isLUTChanged()){if(!this.bind().success)return e;o=this.lookup?this.lookup.stretchLut:null}else o=this.lookup?this.lookup.stretchLut:null;if(!o)return e;i>1&&t?.length===((h=e)==null?void 0:h.pixels.length)&&((d=o)==null?void 0:d.lut.length)===i&&(o={lut:t.map(f=>o.lut[f]),offset:o.offset}),a=pj(e,o)}else{const f=this.getStretchCutoff(n,e,t);a=G4(e,{...f,gamma:u})}if(n.colorRamp){if(this._isLUTChanged(!0)&&!this.bind().success)return e;a=B4(a,this.lookup.colormapLut)}return a}_symbolize_shadedRelief(e,t){var r,i;const n=this.rendererJSON,s={...n,...t},o=_2e(e,s);if(!n.colorRamp)return o;let a;if(this._isLUTChanged(!0)){if(!this.bind().success)return o;a=this.lookup?this.lookup.hsvMap:null}else a=this.lookup?this.lookup.hsvMap:null;if(!a)return o;const l=(r=(i=this.rasterInfo.statistics)==null?void 0:i[0])!=null?r:{min:0,max:8e3};return x2e(o,e,a,l),o}_updateVectorFieldRenderer(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")}_updateAnimatedFlowRenderer(){const{bandCount:e,dataType:t}=this.rasterInfo;return e===2&&(t==="vector-magdir"||t==="vector-uv")?{success:!0}:{success:!1,error:`Unsupported data type "${t}"; AnimatedFlowRenderer only supports "vector-magdir" and "vector-uv".`}}_updateUVRenderer(e){const{bandCount:t,attributeTable:r,pixelType:i}=this.rasterInfo,n=e.field1;if(!n)return!1;const s=e.defaultSymbol,o=t===1&&["u8","s8"].includes(i);if(!S2e(this.rasterInfo,n)&&!o)return!1;const a=[];if(r){const u=r.fields.filter(h=>h.name.toLowerCase()==="value")[0];if(!u)return!1;r.features.forEach(h=>{var d;const f=e.uniqueValueInfos.filter(g=>String(g.value)===String(h.attributes[n]))[0],m=f==null||(d=f.symbol)==null?void 0:d.color;m?a.push([h.attributes[u.name]].concat(m)):s&&a.push([h.attributes[u.name]].concat(s.color))})}else{if(n.toLowerCase()!=="value")return!1;e.uniqueValueInfos.forEach(u=>{var h;const d=u==null||(h=u.symbol)==null?void 0:h.color;d?a.push([parseInt(""+u.value,10)].concat(d)):s&&a.push([parseInt(""+u.value,10)].concat(s.color))})}if(a.length===0)return!1;const l=$1({colormap:a});return this.lookup={rendererJSON:e,colormapLut:l},this.canRenderInWebGL=!0,!0}_updateColormapRenderer(e){if(!I2e(this.rasterInfo))return!1;const t=e.colormapInfos.map(i=>[i.value].concat(i.color)).sort((i,n)=>i[0]-n[0]);if(!t||t.length===0)return!1;const r=$1({colormap:t});return this.lookup={rendererJSON:e,colormapLut:r},this.canRenderInWebGL=!0,!0}_updateShadedReliefRenderer(e){if(!M2e(this.rasterInfo))return!1;if(e.colorRamp){const t=Gm(e.colorRamp,256,!0),r=$1({colormap:t}),i=[],n=r.indexedColormap;for(let s=0;s<n.length;s+=4){const o=rwe({r:n[s],g:n[s+1],b:n[s+2]});i.push([o.h/60,o.s/100,255*o.v/100])}this.lookup={rendererJSON:e,colormapLut:r,hsvMap:i}}else this.lookup=null;return this.canRenderInWebGL=!0,!0}_updateClassBreaksRenderer(e){const t=this.rasterInfo.pixelType,r=["u8","u16","s8","s16"].indexOf(t)>-1,i=e.classBreakInfos;if(i==null||!i.length)return!1;const n=i.sort((h,d)=>h.classMaxValue-d.classMaxValue),s=n[n.length-1];let o=e.minValue;if(!r){const h=[];for(let d=0;d<n.length;d++){var a;h.push({value:(a=n[d].classMinValue)!=null?a:o,mappedColor:n[d].symbol.color}),o=n[d].classMaxValue}return h.push({value:s.classMaxValue,mappedColor:s.symbol.color}),this.lookup={rendererJSON:e,remapLut:h},this.canRenderInWebGL=!1,!0}const l=[];o=Math.floor(e.minValue);for(let h=0;h<n.length;h++){const d=n[h];for(let f=o;f<d.classMaxValue;f++)l.push([f].concat(d.symbol.color));o=Math.ceil(d.classMaxValue)}s.classMaxValue===o&&l.push([s.classMaxValue].concat(s.symbol.color));const u=$1({colormap:l,fillUnspecified:!1});return this.lookup={rendererJSON:e,colormapLut:u},this.canRenderInWebGL=!0,!0}_isHistogramRequired(e){return e==="percentClip"||e==="histogramEqualization"}_isValidRasterStatistics(e){return U(e)&&e.length>0&&e[0].min!=null&&e[0].max!=null}_updateStretchRenderer(e){var t;let{stretchType:r,dra:i}=e;if(!(r==="none"||(t=e.statistics)!=null&&t.length||this._isValidRasterStatistics(this.rasterInfo.statistics)||i))return!1;const n=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(e.stretchType)||n!=null&&n.length||i||(r="minMax");const{gamma:s,useGamma:o,colorRamp:a}=e,l=this.rasterInfo.pixelType,u=!i&&["u8","u16","s8","s16"].indexOf(l)>-1;if(r==="histogramEqualization"){const h=n.map(d=>dj(d));this.lookup={rendererJSON:e,histogramLut:h}}else if(u){const h=this.getStretchCutoff(e),d=hj({pixelType:l,...h,gamma:o?s:null});this.lookup={rendererJSON:e,stretchLut:d}}if(a){const h=Gm(a,256,!0);this.lookup||(this.lookup={rendererJSON:e}),this.lookup.colormapLut=$1({colormap:h}),this.lookup.rendererJSON=e}return this.canRenderInWebGL=!0,!0}getStretchCutoff(e,t=null,r,i){var n,s,o;let a,l,u=e.stretchType;var h;if(e.dra)if(u==="minMax"&&U(t)&&t.statistics)a=t.statistics.map(D=>[D.minValue,D.maxValue,0,0]);else{const D=gwe(t);a=U(D)?D.statistics:null,l=U(D)?D.histograms:null}else a=((h=e.statistics)==null?void 0:h.length)>0?e.statistics:this.rasterInfo.statistics,l=e.histograms||this.rasterInfo.histograms;!this._isHistogramRequired(u)||(n=l)!=null&&n.length||(u="minMax");const d=((s=a)==null?void 0:s.length)||((o=l)==null?void 0:o.length)||this.rasterInfo.bandCount,f=[],m=[];let g,b,w,_,x,I,S,T,$,E,C,O;switch(a&&!Array.isArray(a[0])&&(a=a.map(D=>[D.min,D.max,D.avg,D.stddev])),u){case"none":{const D=Fj[this.rasterInfo.pixelType]||Fj.f32;for(T=0;T<d;T++)f[T]=D[0],m[T]=D[1]}break;case"minMax":for(T=0;T<d;T++)f[T]=a[T][0],m[T]=a[T][1];break;case"standardDeviation":for(T=0;T<d;T++)f[T]=a[T][2]-e.numberOfStandardDeviations*a[T][3],m[T]=a[T][2]+e.numberOfStandardDeviations*a[T][3],f[T]<a[T][0]&&(f[T]=a[T][0]),m[T]>a[T][1]&&(m[T]=a[T][1]);break;case"histogramEqualization":for(T=0;T<d;T++)f[T]=l[T].min,m[T]=l[T].max;break;case"percentClip":for(T=0;T<l.length;T++){for(g=l[T],x=new Uint32Array(g.size),_=g.counts,w=0,b=(g.max-g.min)/g.size,S=g.min===-.5&&b===1?.5:0,$=0;$<g.size;$++)w+=_[$],x[$]=w;for(I=(e.minPercent||0)*w/100,$=0;$<g.size;$++)if(x[$]>I){f[T]=g.min+b*($+S);break}for(I=(1-(e.maxPercent||0)/100)*w,$=g.size-2;$>=0;$--)if(x[$]<I){m[T]=g.min+b*($+2-S);break}}break;default:for(T=0;T<d;T++)f[T]=a[T][0],m[T]=a[T][1]}u==="histogramEqualization"?(C=l[0].size||256,E=0,i&&(O=l.map(D=>dj(D)))):(C=e.max||255,E=e.min||0);const R={minCutOff:f,maxCutOff:m,outMax:C,outMin:E,histogramLut:O};return this.getSelectedBandCutoffs(R,r)}getSelectedBandCutoffs(e,t){if(t==null||t.length===0)return e;const r=Math.max.apply(null,t),{minCutOff:i,maxCutOff:n,outMin:s,outMax:o,histogramLut:a}=e;return i.length===t.length||i.length<=r?e:{minCutOff:t.map(l=>i[l]),maxCutOff:t.map(l=>n[l]),histogramLut:a?t.map(l=>a[l]):null,outMin:s,outMax:o}}generateStretchWebGLParams(e,t,r){let i=null,n=null;const s=this.lookup&&this.lookup.colormapLut;t.colorRamp&&s&&(i=s.indexedColormap,n=s.offset),t.stretchType==="histogramEqualization"&&(t={...t,stretchType:"minMax"});const{gamma:o}=t,a=!!(t.useGamma&&o&&o.some(x=>x!==1)),{minCutOff:l,maxCutOff:u,outMin:h,outMax:d}=this.getStretchCutoff(t,e,r);let f=0;U(e)&&(f=e.getPlaneCount(),f===2&&((e=e.clone()).statistics=[e.statistics[0]],e.pixels=[e.pixels[0]]));const m=Math.min(3,r?.length||f||this.rasterInfo.bandCount),g=new Float32Array(m),b=i||a?1:255;let w;for(w=0;w<m;w++)g[w]=(d-h)/(u[w]-l[w])/b;const _=new Float32Array(m);if(a)for(w=0;w<m;w++)o[w]>1?o[w]>2?_[w]=6.5+(o[w]-2)**2.5:_[w]=6.5+100*(2-o[w])**4:_[w]=1;return{bandCount:m,outMin:h/b,outMax:d/b,minCutOff:l,maxCutOff:u,factor:g,useGamma:a,gamma:a?o:[1,1,1],gammaCorrection:a?_:[1,1,1],colormap:i,colormapOffset:n,stretchType:t.stretchType,type:"stretch"}}generateShadedReliefWebGLParams(e,t,r){var i,n,s;let o=null,a=null;const l=this.lookup&&this.lookup.colormapLut;e.colorRamp&&l&&(o=l.indexedColormap,a=l.offset);const u={...e,isGCS:t,resolution:r},h=LK(u),d=(i=this.rasterInfo.statistics)==null?void 0:i[0];return{...h,minValue:(n=d?.min)!=null?n:0,maxValue:(s=d?.max)!=null?s:8e3,hillshadeType:e.hillshadeType==="traditional"?0:1,type:"hillshade",colormap:o,colormapOffset:a}}_generateVectorFieldWebGLParams(e){var t,r,i,n,s,o;const{style:a,inputUnit:l,outputUnit:u,visualVariables:h,symbolTileSize:d,flowRepresentation:f}=e;let m;const g=(t=h?.find(T=>T.type==="sizeInfo"))!=null?t:{type:"sizeInfo",field:"Magnitude",maxDataValue:(r=this.rasterInfo.statistics)==null?void 0:r[0].max,maxSize:.8*d,minDataValue:(i=this.rasterInfo.statistics)==null?void 0:i[0].min,minSize:.2*d},b=g?g.minDataValue:(n=this.rasterInfo.statistics)==null?void 0:n[0].min,w=g?g.maxDataValue:(s=this.rasterInfo.statistics)==null?void 0:s[0].max,_=U(g.maxSize)&&U(g.minSize)?[g.minSize/d,g.maxSize/d]:[.2,.8];if(a==="wind_speed"||a==="simple_scalar"){const T=(_[0]+_[1])/2;_[0]=_[1]=T}const x=U(b)&&U(w)?[b,w]:null;if(a==="classified_arrow")if(U(b)&&U(w)&&U(g)){m=[];const T=(g.maxDataValue-g.minDataValue)/5;for(let $=0;$<6;$++)m.push(g.minDataValue+T*$)}else m=[0,1e-6,3.5,7,10.5,14];const I=f==="flow_to"==(a==="ocean_current_kn"||a==="ocean_current_m")?0:Math.PI,S=h?.find(T=>T.type==="rotationInfo");return{breakValues:m,dataRange:x,inputUnit:l,outputUnit:u,symbolTileSize:d,symbolPercentRange:_,style:a||"single_arrow",rotation:I,rotationType:((o=this.rasterInfo.storageInfo)==null?void 0:o.tileInfo)&&this.rasterInfo.dataType==="vector-uv"?"geographic":S?.rotationType||e.rotationType,type:"vectorField"}}};function jj(e){return ai(e)&&e.validPixelCount!==0}c([p({json:{write:!0}})],xf.prototype,"rendererJSON",void 0),c([p({type:Ew,json:{write:!0}})],xf.prototype,"rasterInfo",void 0),c([p({json:{write:!0}})],xf.prototype,"lookup",void 0),c([p()],xf.prototype,"canRenderInWebGL",void 0),xf=c([N("esri.renderers.support.RasterSymbolizer")],xf);const T2e=xf,$2e=96;function uP(e,t){const r=t||e.extent,i=e.width,n=vy(r&&r.spatialReference);return r&&i?r.width/i*n*Lye*$2e:0}function Lrt(e){var t;const r=e.layer;return"floorInfo"in r&&(t=r.floorInfo)!=null&&t.floorField&&"floors"in e.view?DK(e.view.floors,r.floorInfo.floorField):null}function Vj(e,t){var r;return"floorInfo"in t&&(r=t.floorInfo)!=null&&r.floorField?DK(e,t.floorInfo.floorField):null}function NK(e,t){const{definitionExpression:r}=t;return e?r?`(${r}) AND (${e})`:e:r}function DK(e,t){if(e==null||!e.length)return null;const r=e.filter(i=>i!=="").map(i=>`'${i}'`);return r.push("''"),`${t} IN (${r.join(",")}) OR ${t} IS NULL`}function Xr(e,t){return t?{...t,query:{...e,...t.query}}:{query:e}}function Lt(e){return typeof e=="string"?Kr(e):e}function Xv(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){i[n]=[];for(let o=0;o<s.length;o++)i[n][o]=Xv(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}let Ig=class extends me{constructor(){super(...arguments),this.north=null,this.up=null,this.spatialReference=null}};c([p({type:Number,json:{write:!0}})],Ig.prototype,"north",void 0),c([p({type:Number,json:{write:!0}})],Ig.prototype,"up",void 0),c([p({type:Fe,json:{write:!0}})],Ig.prototype,"spatialReference",void 0),Ig=c([N("esri.rest.support.ImageAngleResult")],Ig);const E2e=Ig;let Wa=class extends me{constructor(){super(...arguments),this.catalogItemVisibilities=null,this.catalogItems=null,this.location=null,this.name=null,this.objectId=null,this.processedValues=null,this.properties=null,this.value=null}};c([p({json:{write:!0}})],Wa.prototype,"catalogItemVisibilities",void 0),c([p({type:Bu,json:{write:!0}})],Wa.prototype,"catalogItems",void 0),c([p({type:Ke,json:{write:!0}})],Wa.prototype,"location",void 0),c([p({json:{write:!0}})],Wa.prototype,"name",void 0),c([p({json:{write:!0}})],Wa.prototype,"objectId",void 0),c([p({json:{write:!0}})],Wa.prototype,"processedValues",void 0),c([p({json:{write:!0}})],Wa.prototype,"properties",void 0),c([p({json:{write:!0}})],Wa.prototype,"value",void 0),Wa=c([N("esri.rest.support.ImageIdentifyResult")],Wa);const A2e=Wa;let Tc=class extends me{constructor(){super(...arguments),this.attributes=null,this.location=null,this.locationId=null,this.rasterId=null,this.resolution=null,this.pixelValue=null}};c([p({json:{write:!0}})],Tc.prototype,"attributes",void 0),c([p({type:Ke,json:{write:!0}})],Tc.prototype,"location",void 0),c([p({json:{write:!0}})],Tc.prototype,"locationId",void 0),c([p({json:{write:!0}})],Tc.prototype,"rasterId",void 0),c([p({json:{write:!0}})],Tc.prototype,"resolution",void 0),c([p({json:{write:!0}})],Tc.prototype,"pixelValue",void 0),Tc=c([N("esri.rest.support.ImageSample")],Tc);const C2e=Tc;let qM=class extends me{constructor(){super(...arguments),this.samples=null}};c([p({type:[C2e],json:{write:!0}})],qM.prototype,"samples",void 0),qM=c([N("esri.rest.support.ImageSampleResult")],qM);const k2e=qM;let HM=class extends me{constructor(){super(...arguments),this.geometries=null}};c([p({json:{write:!0}})],HM.prototype,"geometries",void 0),HM=c([N("esri.rest.support.ImagePixelLocationResult")],HM);const O2e=HM;function FK(e){const t=e?.time;if(t&&(t.start!=null||t.end!=null)){const r=[];t.start!=null&&r.push(t.start),t.end!=null&&r.indexOf(t.end)===-1&&r.push(t.end),e.time=r.join(",")}}async function jK(e,t,r){const i=Lt(e),n=t.geometry?[t.geometry]:[],s=await _y(n),o=t.toJSON();FK(o);const a=s&&s[0];U(a)&&(o.geometry=a.toJSON());const l=Xv({...i.query,f:"json",...o});return Xr(l,r)}async function P2e(e,t,r){var i;const n=t.toJSON();U(n.angleName)&&(n.angleName=n.angleName.join(",")),U(t.point)&&(i=t.point.spatialReference)!=null&&i.imageCoordinateSystem&&(n.point.spatialReference=f6(t.point.spatialReference)),U(t.spatialReference)&&t.spatialReference.imageCoordinateSystem&&(n.spatialReference=VK(t.spatialReference));const s=Lt(e),o=Xv({...s.query,f:"json",...n}),a=Xr(o,r),{data:l}=await Ee(`${s.path}/computeAngles`,a);return l.spatialReference=l.spatialReference?l.spatialReference.geodataXform!=null?new Fe({wkid:0,imageCoordinateSystem:l.spatialReference}):Fe.fromJSON(l.spatialReference):null,l.north==="NaN"&&(l.north=null),l.up==="NaN"&&(l.up=null),new E2e(l)}async function R2e(e,t,r){const i=t.toJSON(),{geometries:n}=t;for(let h=0;h<n.length;h++){var s;(s=n[h].spatialReference)!=null&&s.imageCoordinateSystem&&(i.geometries.geometries[h].spatialReference=f6(n[h].spatialReference))}const o=Lt(e),a=Xv({...o.query,f:"json",...i}),l=Xr(a,r),{data:u}=await Ee(`${o.path}/computePixelLocation`,l);return O2e.fromJSON(u)}async function L2e(e,t,r){const i=await jK(e,t,r),n=Lt(e),{data:s}=await Ee(`${n.path}/computeStatisticsHistograms`,i),{statistics:o}=s;return o!=null&&o.length&&o.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o,histograms:s.histograms}}async function N2e(e,t,r){const i=await jK(e,t,r),n=Lt(e),{data:s}=await Ee(`${n.path}/computeHistograms`,i);return{histograms:s.histograms}}async function D2e(e,t,r){var i,n;const s=t.toJSON();FK(s),(i=s.outFields)!=null&&i.length&&(s.outFields=s.outFields.join(","));const o=await _y(t.geometry),a=o?.[0];U(a)&&(s.geometry=a.toJSON());const l=Lt(e),u=Xv({...l.query,f:"json",...s}),h=Xr(u,r),{data:d}=await Ee(`${l.path}/getSamples`,h),f=d==null||(n=d.samples)==null?void 0:n.map(m=>{const g=m.value==="NaN"||m.value===""?null:m.value.split(" ").map(b=>Number(b));return{...m,pixelValue:g}});return k2e.fromJSON({samples:f})}async function Uj(e,t,r){const i=Lt(e),n=t.geometry?[t.geometry]:[];return _y(n).then(s=>{const o=t.toJSON(),a=s&&s[0];U(a)&&(o.geometry=JSON.stringify(a.toJSON()));const l=Xv({...i.query,f:"json",...o}),u=Xr(l,r);return Ee(i.path+"/identify",u)}).then(s=>A2e.fromJSON(s.data))}function f6(e){const{imageCoordinateSystem:t}=e;if(t){const{id:r,referenceServiceName:i}=t;return r!=null?i?{icsid:r,icsns:i}:{icsid:r}:{ics:t}}return e.toJSON()}function VK(e,t){const r=f6(e),{icsid:i,icsns:n,wkid:s}=r;return i!=null?n==null||t!=null&&t.toLowerCase().includes("/"+n.toLowerCase()+"/")?`0:${i}`:JSON.stringify(r):s?s.toString():JSON.stringify(r)}function F2e(e){const{exifInfo:t,exifName:r,tagName:i}=e;if(!t||!r||!i)return null;const n=t.find(s=>s.name===r);return n?j2e({tagName:i,tags:n.tags}):null}function j2e(e){const{tagName:t,tags:r}=e;if(!r||!t)return null;const i=r.find(n=>n.name===t);return i&&i.value||null}var cP;const V2e={1:{id:1,rotation:0,mirrored:!1},2:{id:2,rotation:0,mirrored:!0},3:{id:3,rotation:180,mirrored:!1},4:{id:4,rotation:180,mirrored:!0},5:{id:5,rotation:-90,mirrored:!0},6:{id:6,rotation:90,mirrored:!1},7:{id:7,rotation:90,mirrored:!0},8:{id:8,rotation:-90,mirrored:!1}};let Ss=cP=class extends me{constructor(e){super(e),this.contentType=null,this.exifInfo=null,this.id=null,this.globalId=null,this.keywords=null,this.name=null,this.parentGlobalId=null,this.parentObjectId=null,this.size=null,this.url=null}get orientationInfo(){const{exifInfo:e}=this,t=F2e({exifName:"Exif IFD0",tagName:"Orientation",exifInfo:e});return V2e[t]||null}clone(){return new cP({contentType:this.contentType,exifInfo:this.exifInfo,id:this.id,globalId:this.globalId,keywords:this.keywords,name:this.name,parentGlobalId:this.parentGlobalId,parentObjectId:this.parentObjectId,size:this.size,url:this.url})}};c([p({type:String})],Ss.prototype,"contentType",void 0),c([p()],Ss.prototype,"exifInfo",void 0),c([p({readOnly:!0})],Ss.prototype,"orientationInfo",null),c([p({type:jt})],Ss.prototype,"id",void 0),c([p({type:String})],Ss.prototype,"globalId",void 0),c([p({type:String})],Ss.prototype,"keywords",void 0),c([p({type:String})],Ss.prototype,"name",void 0),c([p({json:{read:!1}})],Ss.prototype,"parentGlobalId",void 0),c([p({json:{read:!1}})],Ss.prototype,"parentObjectId",void 0),c([p({type:jt})],Ss.prototype,"size",void 0),c([p({json:{read:!1}})],Ss.prototype,"url",void 0),Ss=cP=c([N("esri.layers.support.AttachmentInfo")],Ss);const UK=Ss,zj=4294967296,Bj=ge("esri-text-decoder")?new TextDecoder("utf-8"):null,U2e=ge("safari")||ge("ios")?6:ge("ff")?12:32;class Sm{constructor(t,r,i=0,n=t?t.byteLength:0){this._tag=0,this._dataType=99,this.init(t,r,i,n)}init(t,r,i,n){this._data=t,this._dataView=r,this._pos=i,this._end=n}clone(){return new Sm(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(t){this._pos=t}nextTag(t){for(;;){if(this._pos===this._end)return!1;const r=this._decodeVarint();if(this._tag=r>>3,this._dataType=7&r,!t||t===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const t=this._decodeVarint();return this._tag=t>>3,this._dataType=7&t,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let t=4294967295;return t=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128?t:(t=(t|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128?t:(t=(t|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128?t:void 0))))}getUInt64(){return this._decodeVarint()}getSInt32(){const t=this.getUInt32();return t>>>1^-(1&t)|0}getSInt64(){return this._decodeSVarint()}getBool(){const t=this._data[this._pos]!==0;return this._skip(1),t}getEnum(){return this._decodeVarint()}getFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getUint32(r+4,!0)*zj;return this._skip(8),i}getSFixed64(){const t=this._dataView,r=this._pos,i=t.getUint32(r,!0)+t.getInt32(r+4,!0)*zj;return this._skip(8),i}getDouble(){const t=this._dataView.getFloat64(this._pos,!0);return this._skip(8),t}getFixed32(){const t=this._dataView.getUint32(this._pos,!0);return this._skip(4),t}getSFixed32(){const t=this._dataView.getInt32(this._pos,!0);return this._skip(4),t}getFloat(){const t=this._dataView.getFloat32(this._pos,!0);return this._skip(4),t}getString(){const t=this._getLength(),r=this._pos,i=this._toString(this._data,r,r+t);return this._skip(t),i}getBytes(){const t=this._getLength(),r=this._pos,i=this._toBytes(this._data,r,r+t);return this._skip(t),i}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(t,r,i,n){const s=this.getMessage(),o=t(s,r,i,n);return s.release(),o}processMessage(t){const r=this.getMessage(),i=t(r);return r.release(),i}getMessage(){const t=this._getLength(),r=Sm.pool.acquire();return r.init(this._data,this._dataView,this._pos,this._pos+t),this._skip(t),r}release(){Sm.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case 0:this._decodeVarint();break;case 1:this._skip(8);break;case 2:this._skip(this._getLength());break;case 5:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(t){this._skip(t)}_skip(t){if(this._pos+t>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=t}_decodeVarint(){const t=this._data;let r,i=this._pos,n=0;if(this._end-i>=10)do{if(r=t[i++],n|=127&r,(128&r)==0||(r=t[i++],n|=(127&r)<<7,(128&r)==0)||(r=t[i++],n|=(127&r)<<14,(128&r)==0)||(r=t[i++],n|=(127&r)<<21,(128&r)==0)||(r=t[i++],n+=268435456*(127&r),(128&r)==0)||(r=t[i++],n+=34359738368*(127&r),(128&r)==0)||(r=t[i++],n+=4398046511104*(127&r),(128&r)==0)||(r=t[i++],n+=562949953421312*(127&r),(128&r)==0)||(r=t[i++],n+=72057594037927940*(127&r),(128&r)==0)||(r=t[i++],n+=9223372036854776e3*(127&r),(128&r)==0))break;throw new Error("Varint too long!")}while(0);else{let s=1;for(;i!==this._end&&(r=t[i],(128&r)!=0);)++i,n+=(127&r)*s,s*=128;if(i===this._end)throw new Error("Varint overrun!");++i,n+=r*s}return this._pos=i,n}_decodeSVarint(){const t=this._decodeVarint();return t%2?-(t+1)/2:t/2}_getLength(){if(this._dataType!==2)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(t,r,i){if((i=Math.min(this._end,i))-r>U2e&&Bj){const o=t.subarray(r,i);return Bj.decode(o)}let n="",s="";for(let o=r;o<i;++o){const a=t[o];128&a?s+="%"+a.toString(16):(n+=decodeURIComponent(s)+String.fromCharCode(a),s="")}return s.length&&(n+=decodeURIComponent(s)),n}_toBytes(t,r,i){return i=Math.min(this._end,i),new Uint8Array(t.buffer,r,i-r)}}Sm.pool=new vl(Sm,null,e=>{e._data=null,e._dataView=null});class Qs{constructor(t=[],r=[],i=!1){this.lengths=t??[],this.coords=r??[],this.hasIndeterminateRingOrder=i}get isPoint(){return this.lengths.length===0}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce((t,r)=>t+r)}forEachVertex(t){let r=0;this.lengths.length||t(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const n=this.lengths[i];for(let s=0;s<n;s++)t(this.coords[2*(s+r)],this.coords[2*(s+r)+1]);r+=n}}clone(t){return t?(t.set(this.coords),new Qs(this.lengths.slice(),t,this.hasIndeterminateRingOrder)):new Qs(this.lengths.slice(),this.coords.slice(),this.hasIndeterminateRingOrder)}}class Gu{constructor(t=null,r={},i,n){this.geometry=t,this.attributes=r,this.centroid=i,this.objectId=n,this.displayId=0,this.geohashX=0,this.geohashY=0}weakClone(){const t=new Gu(this.geometry,this.attributes,this.centroid,this.objectId);return t.displayId=this.displayId,t.geohashX=this.geohashX,t.geohashY=this.geohashY,t}}function z2e(e){return!(ce(e.geometry)||!e.geometry.coords||!e.geometry.coords.length)}class Nrt extends Gu{}class E${constructor(){this.objectIdFieldName=null,this.globalIdFieldName=null,this.geohashFieldName=null,this.geometryProperties=null,this.geometryType=null,this.spatialReference=null,this.hasZ=!1,this.hasM=!1,this.features=[],this.fields=[],this.transform=null,this.exceededTransferLimit=!1,this.uniqueIdField=null,this.queryGeometryType=null,this.queryGeometry=null}weakClone(){const t=new E$;return t.objectIdFieldName=this.objectIdFieldName,t.globalIdFieldName=this.globalIdFieldName,t.geohashFieldName=this.geohashFieldName,t.geometryProperties=this.geometryProperties,t.geometryType=this.geometryType,t.spatialReference=this.spatialReference,t.hasZ=this.hasZ,t.hasM=this.hasM,t.features=this.features,t.fields=this.fields,t.transform=this.transform,t.exceededTransferLimit=this.exceededTransferLimit,t.uniqueIdField=this.uniqueIdField,t.queryGeometry=this.queryGeometry,t.queryGeometryType=this.queryGeometryType,t}}const zK=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"];class Drt{constructor(t){this.options=t,this.geometryTypes=zK,this._coordinatePtr=0,this._vertexDimension=0}createFeatureResult(){return new E$}prepareFeatures(t){this._vertexDimension=2,t.hasZ&&this._vertexDimension++,t.hasM&&this._vertexDimension++}finishFeatureResult(t){if(!t||!t.features||!t.hasZ||!this.options.sourceSpatialReference||!t.spatialReference||Ll(t.spatialReference,this.options.sourceSpatialReference)||t.spatialReference.vcsWkid)return;const r=B0(this.options.sourceSpatialReference)/B0(t.spatialReference);if(r!==1)for(const i of t.features){if(!z2e(i))continue;const n=i.geometry.coords;for(let s=2;s<n.length;s+=3)n[s]*=r}}addFeature(t,r){t.features.push(r)}createFeature(){return new Gu}createSpatialReference(){return{wkid:0}}createGeometry(){return new Qs}addField(t,r){t.fields.push(r)}allocateCoordinates(t){t.coords.length=t.lengths.reduce((r,i)=>r+i,0)*this._vertexDimension,this._coordinatePtr=0}addCoordinate(t,r){t.coords[this._coordinatePtr++]=r}addCoordinatePoint(t,r){t.coords.push(r)}addLength(t,r){t.lengths.push(r)}addQueryGeometry(t,r){t.queryGeometry=r.queryGeometry,t.queryGeometryType=r.queryGeometryType}createPointGeometry(){return new Qs}}const Gj=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble","esriFieldTypeString","esriFieldTypeDate","esriFieldTypeOID","esriFieldTypeGeometry","esriFieldTypeBlob","esriFieldTypeRaster","esriFieldTypeGUID","esriFieldTypeGlobalID","esriFieldTypeXML"],qj=["sqlTypeBigInt","sqlTypeBinary","sqlTypeBit","sqlTypeChar","sqlTypeDate","sqlTypeDecimal","sqlTypeDouble","sqlTypeFloat","sqlTypeGeometry","sqlTypeGUID","sqlTypeInteger","sqlTypeLongNVarchar","sqlTypeLongVarbinary","sqlTypeLongVarchar","sqlTypeNChar","sqlTypeNVarchar","sqlTypeOther","sqlTypeReal","sqlTypeSmallInt","sqlTypeSqlXml","sqlTypeTime","sqlTypeTimestamp","sqlTypeTimestamp2","sqlTypeTinyInt","sqlTypeVarbinary","sqlTypeVarchar"],Hj=["upperLeft","lowerLeft"];function Wj(e){return e>=Gj.length?null:Gj[e]}function B2e(e){return e>=qj.length?null:qj[e]}function Jj(e){return e>=Hj.length?null:Hj[e]}function Zj(e,t){return t>=e.geometryTypes.length?null:e.geometryTypes[t]}function G2e(e,t,r){const n=t.createPointGeometry(r);for(;e.next();)switch(e.tag()){case 3:{const s=e.getUInt32(),o=e.pos()+s;let a=0;for(;e.pos()<o;)t.addCoordinatePoint(n,e.getSInt64(),a++);break}default:e.skip()}return n}function q2e(e,t,r){const s=t.createGeometry(r),o=2+(r.hasZ?1:0)+(r.hasM?1:0);for(;e.next();)switch(e.tag()){case 2:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(;e.pos()<l;)t.addLength(s,e.getUInt32(),u++);break}case 3:{const a=e.getUInt32(),l=e.pos()+a;let u=0;for(t.allocateCoordinates(s);e.pos()<l;)t.addCoordinate(s,e.getSInt64(),u),u++,u===o&&(u=0);break}default:e.skip()}return s}function H2e(e){const n=new Qs;let s="esriGeometryPoint";for(;e.next();)switch(e.tag()){case 2:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.lengths.push(e.getUInt32());break}case 3:{const o=e.getUInt32(),a=e.pos()+o;for(;e.pos()<a;)n.coords.push(e.getSInt64());break}case 1:s=zK[e.getEnum()];break;default:e.skip()}return{queryGeometry:n,queryGeometryType:s}}function W2e(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getSInt32();case 5:return e.getUInt32();case 6:return e.getInt64();case 7:return e.getUInt64();case 8:return e.getSInt64();case 9:return e.getBool();default:return e.skip(),null}return null}function J2e(e){const a={type:Wj(0)};for(;e.next();)switch(e.tag()){case 1:a.name=e.getString();break;case 2:a.type=Wj(e.getEnum());break;case 3:a.alias=e.getString();break;case 4:a.sqlType=B2e(e.getEnum());break;case 5:e.skip();break;case 6:a.defaultValue=e.getString();break;default:e.skip()}return a}function Z2e(e){const i={};for(;e.next();)switch(e.tag()){case 1:i.name=e.getString();break;case 2:i.isSystemMaintained=e.getBool();break;default:e.skip()}return i}function Y2e(e,t,r,i){const a=t.createFeature(r);let l=0;for(;e.next();)switch(e.tag()){case 1:{const u=i[l++].name;a.attributes[u]=e.processMessage(W2e);break}case 2:a.geometry=e.processMessageWithArgs(q2e,t,r);break;case 4:a.centroid=e.processMessageWithArgs(G2e,t,r);break;default:e.skip()}return a}function K2e(e){const s=[1,1,1,1];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function X2e(e){const s=[0,0,0,0];for(;e.next();)switch(e.tag()){case 1:s[0]=e.getDouble();break;case 2:s[1]=e.getDouble();break;case 4:s[2]=e.getDouble();break;case 3:s[3]=e.getDouble();break;default:e.skip()}return s}function Q2e(e){const n={originPosition:Jj(0)};for(;e.next();)switch(e.tag()){case 1:n.originPosition=Jj(e.getEnum());break;case 2:n.scale=e.processMessage(K2e);break;case 3:n.translate=e.processMessage(X2e);break;default:e.skip()}return n}function exe(e){const n={};for(;e.next();)switch(e.tag()){case 1:n.shapeAreaFieldName=e.getString();break;case 2:n.shapeLengthFieldName=e.getString();break;case 3:n.units=e.getString();break;default:e.skip()}return n}function txe(e,t){const a=t.createSpatialReference();for(;e.next();)switch(e.tag()){case 1:a.wkid=e.getUInt32();break;case 5:a.wkt=e.getString();break;case 2:a.latestWkid=e.getUInt32();break;case 3:a.vcsWkid=e.getUInt32();break;case 4:a.latestVcsWkid=e.getUInt32();break;default:e.skip()}return a}function rxe(e,t){const b=t.createFeatureResult();b.geometryType=Zj(t,0);let w=!1;for(;e.next();)switch(e.tag()){case 1:b.objectIdFieldName=e.getString();break;case 3:b.globalIdFieldName=e.getString();break;case 4:b.geohashFieldName=e.getString();break;case 5:b.geometryProperties=e.processMessage(exe);break;case 7:b.geometryType=Zj(t,e.getEnum());break;case 8:b.spatialReference=e.processMessageWithArgs(txe,t);break;case 10:b.hasZ=e.getBool();break;case 11:b.hasM=e.getBool();break;case 12:b.transform=e.processMessage(Q2e);break;case 9:{const _=e.getBool();b.exceededTransferLimit=_;break}case 13:t.addField(b,e.processMessage(J2e));break;case 15:w||(t.prepareFeatures(b),w=!0),t.addFeature(b,e.processMessageWithArgs(Y2e,t,b,b.fields));break;case 2:b.uniqueIdField=e.processMessage(Z2e);break;default:e.skip()}return t.finishFeatureResult(b),b}function ixe(e,t){const n={};let s=null;for(;e.next();)switch(e.tag()){case 4:s=e.processMessageWithArgs(H2e);break;case 1:n.featureResult=e.processMessageWithArgs(rxe,t);break;default:e.skip()}return U(s)&&n.featureResult&&t.addQueryGeometry(n,s),n}function nxe(e,t){try{const i=new Sm(new Uint8Array(e),new DataView(e)),n={};for(;i.next();)i.tag()===2?n.queryResult=i.processMessageWithArgs(ixe,t):i.skip();return n}catch(r){throw new Z("query:parsing-pbf","Error while parsing FeatureSet PBF payload",{error:r})}}function sxe(e,t){const r=nxe(e,t),i=r.queryResult.featureResult,n=r.queryResult.queryGeometry,s=r.queryResult.queryGeometryType;if(i&&i.features&&i.features.length&&i.objectIdFieldName){const o=i.objectIdFieldName;for(const a of i.features)a.attributes&&(a.objectId=a.attributes[o])}return i&&(i.queryGeometry=n,i.queryGeometryType=s),i}function x2(e){const t={};for(const r in e){if(r==="declaredClass")continue;const i=e[r];if(i!=null&&typeof i!="function")if(Array.isArray(i)){t[r]=[];for(let n=0;n<i.length;n++)t[r][n]=x2(i[n])}else typeof i=="object"?i.toJSON&&(t[r]=JSON.stringify(i)):t[r]=i}return t}const Yj="Layer does not support extent calculation.";function BK(e,t,r=!1){const i=e.geometry,n=e.toJSON(),s=n,o=e.outSpatialReference;let a,l;if(U(i)){if(a=i.spatialReference,l=i.spatialReference.wkid||JSON.stringify(i.spatialReference),s.geometryType=Oi(i),r&&i.type==="extent")s.geometry=`${i.xmin},${i.ymin},${i.xmax},${i.ymax}`;else if(r&&i.type==="point")s.geometry=`${i.x},${i.y}`;else{const u=i.toJSON();delete u.spatialReference,s.geometry=JSON.stringify(u)}s.inSR=l}if(a||(a=o),n.groupByFieldsForStatistics&&(s.groupByFieldsForStatistics=n.groupByFieldsForStatistics.join(",")),n.objectIds&&(s.objectIds=n.objectIds.join(",")),n.orderByFields&&(s.orderByFields=n.orderByFields.join(",")),!n.outFields||!n.returnDistinctValues&&(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?delete s.outFields:n.outFields.indexOf("*")!==-1?s.outFields="*":s.outFields=n.outFields.join(","),n.outSR?s.outSR=n.outSR.wkid||JSON.stringify(n.outSR):i&&(n.returnGeometry||n.returnCentroid)&&(s.outSR=s.inSR),n.returnGeometry&&delete n.returnGeometry,n.outStatistics&&(s.outStatistics=JSON.stringify(n.outStatistics)),n.pixelSize&&(s.pixelSize=JSON.stringify(n.pixelSize)),n.quantizationParameters&&(r&&U(a)&&U(e.quantizationParameters)&&U(e.quantizationParameters.extent)&&a.equals(e.quantizationParameters.extent.spatialReference)&&delete n.quantizationParameters.extent.spatialReference,s.quantizationParameters=JSON.stringify(n.quantizationParameters)),n.parameterValues&&(s.parameterValues=JSON.stringify(n.parameterValues)),n.rangeValues&&(s.rangeValues=JSON.stringify(n.rangeValues)),n.dynamicDataSource&&(s.layer=JSON.stringify({source:n.dynamicDataSource}),delete n.dynamicDataSource),n.timeExtent){const u=n.timeExtent,{start:h,end:d}=u;h==null&&d==null||(s.time=h===d?h:`${h??"null"},${d??"null"}`),delete n.timeExtent}return s}async function GK(e,t,r,i){const n=U(t.timeExtent)&&t.timeExtent.isEmpty?{data:{features:[]}}:await Qv(e,t,"json",i);return aI(t,r,n.data),n}async function qK(e,t,r,i){if(U(t.timeExtent)&&t.timeExtent.isEmpty)return Promise.resolve({data:r.createFeatureResult()});const n=await HK(e,t,i),s=n;return s.data=sxe(n.data,r),s}function HK(e,t,r){return Qv(e,t,"pbf",r)}function WK(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):Qv(e,t,"json",r,{returnIdsOnly:!0})}function JK(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):Qv(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function ZK(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):Qv(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(i=>{const n=i.data;if(n.hasOwnProperty("extent"))return i;if(n.features)throw new Error(Yj);if(n.hasOwnProperty("count"))throw new Error(Yj);return i})}function Qv(e,t,r,i={},n={}){const s=typeof e=="string"?Kr(e):e,o=t.geometry?[t.geometry]:[];return i.responseType=r==="pbf"?"array-buffer":"json",_y(o,null,i).then(a=>{const l=a&&a[0];U(l)&&((t=t.clone()).geometry=l);const u=IY(s.path),h=x2({...s.query,f:r,...n,...BK(t,n,u)});return Ee(up(s.path,"query"),{...i,query:{...h,...i.query}})})}var oxe=Object.freeze(Object.defineProperty({__proto__:null,executeQuery:GK,executeQueryForCount:JK,executeQueryForExtent:ZK,executeQueryForIds:WK,executeQueryPBF:qK,executeQueryPBFBuffer:HK,queryToQueryStringParameters:BK,runQuery:Qv},Symbol.toStringTag,{value:"Module"}));async function YK(e,t,r){const i=Lt(e);return JK(i,ni.from(t),{...r}).then(n=>n.data.count)}async function m6(e,t,r){const i=Lt(e);return WK(i,ni.from(t),{...r}).then(n=>n.data.objectIds)}async function axe(e,t,r){const i=await KK(e,t,r);return Bu.fromJSON(i)}async function KK(e,t,r){const i=Lt(e),n={...r},s=ni.from(t),{data:o}=await GK(i,s,s.sourceSpatialReference,n);return o}function Sn(e,t){return e?t?4:3:t?3:2}const e1=Te.getLogger("esri.tasks.support.optimizedFeatureSet"),XK={esriGeometryPoint:0,esriGeometryPolyline:2,esriGeometryPolygon:3,esriGeometryMultipoint:0},QK=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s},mI=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2]},lxe=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+3]},eX=(e,t,r,i,n,s)=>{e[r]=n,e[r+1]=s,e[r+2]=t[i+2],e[r+3]=t[i+3]};function y6(e,t,r,i){if(e){if(r)return t&&i?eX:mI;if(t&&i)return lxe}else if(t&&i)return mI;return QK}function X4({scale:e,translate:t},r){return Math.round((r-t[0])/e[0])}function Q4({scale:e,translate:t},r){return Math.round((t[1]-r)/e[1])}function Kj({scale:e,translate:t},r){return r*e[0]+t[0]}function Xj({scale:e,translate:t},r){return t[1]-r*e[1]}function Frt(e,t,r){return e?t?r?b6(e):g6(e):r?v6(e):A$(e):null}function A$(e){const t=e.coords;return{x:t[0],y:t[1]}}function tX(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e}function g6(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2]}}function uxe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e}function v6(e){const t=e.coords;return{x:t[0],y:t[1],m:t[2]}}function cxe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.m,e}function b6(e){const t=e.coords;return{x:t[0],y:t[1],z:t[2],m:t[3]}}function hxe(e,t){return e.coords[0]=t.x,e.coords[1]=t.y,e.coords[2]=t.z,e.coords[3]=t.m,e}function dxe(e,t,r,i){let n=A$;r&&i?n=b6:r?n=g6:i&&(n=v6);for(const s of t){const{geometry:o,attributes:a}=s,l=U(o)?n(o):null;e.push({attributes:a,geometry:l})}return e}function rX(e,t){return e&&t?hxe:e?uxe:t?cxe:tX}function iX(e,t,r,i,n){const s=rX(r,i);for(const o of t){const{geometry:a,attributes:l}=o;let u;a&&(u=s(new Qs,a)),e.push(new Gu(u,l,null,l[n]))}return e}function pxe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;s&&(a=nX(s,r,i)),e.push({attributes:o,geometry:a})}return e}function nX(e,t,r){if(ce(e))return null;const i=Sn(t,r),n=[];for(let s=0;s<e.coords.length;s+=i){const o=[];for(let a=0;a<i;a++)o.push(e.coords[s+a]);n.push(o)}return t?r?{points:n,hasZ:t,hasM:r}:{points:n,hasZ:t}:r?{points:n,hasM:r}:{points:n}}function sX(e,t,r,i,n){const s=Sn(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=oX(new Qs,a,s)),e.push(new Gu(u,l,null,l[n]))}return e}function oX(e,t,r=Sn(t.hasZ,t.hasM)){e.lengths[0]=t.points.length;const i=e.coords;let n=0;for(const s of t.points)for(let o=0;o<r;o++)i[n++]=s[o];return e}function fxe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o}=n;let a;U(s)&&(a=aX(s,r,i)),e.push({attributes:o,geometry:a})}return e}function aX(e,t,r){if(!e)return null;const i=Sn(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let h=0;h<l;h++){const d=[];for(let f=0;f<i;f++)d.push(n[a++]);u.push(d)}o.push(u)}return t?r?{paths:o,hasZ:t,hasM:r}:{paths:o,hasZ:t}:r?{paths:o,hasM:r}:{paths:o}}function lX(e,t,r,i,n){const s=Sn(r,i);for(const o of t){const a=o.geometry,l=o.attributes;let u;a&&(u=uX(new Qs,a,s)),e.push(new Gu(u,l,null,l[n]))}return e}function uX(e,t,r=Sn(t.hasZ,t.hasM)){const{lengths:i,coords:n}=e;let s=0;for(const o of t.paths){for(const a of o)for(let l=0;l<r;l++)n[s++]=a[l];i.push(o.length)}return e}function mxe(e,t,r,i){for(const n of t){const{geometry:s,attributes:o,centroid:a}=n;let l;if(U(s)&&(l=cX(s,r,i)),a){const u=A$(a);e.push({attributes:o,centroid:u,geometry:l})}else e.push({attributes:o,geometry:l})}return e}function cX(e,t,r){if(!e)return null;const i=Sn(t,r),{coords:n,lengths:s}=e,o=[];let a=0;for(const l of s){const u=[];for(let h=0;h<l;h++){const d=[];for(let f=0;f<i;f++)d.push(n[a++]);u.push(d)}o.push(u)}return t?r?{rings:o,hasZ:t,hasM:r}:{rings:o,hasZ:t}:r?{rings:o,hasM:r}:{rings:o}}function hX(e,t,r,i,n){for(const s of t){const o=s.geometry,a=s.centroid,l=s.attributes;let u;o&&(u=dX(new Qs,o,r,i)),U(a)?e.push(new Gu(u,l,tX(new Qs,a),l[n])):e.push(new Gu(u,l,null,l[n]))}return e}function dX(e,t,r=t.hasZ,i=t.hasM){return yxe(e,t.rings,r,i),e}function yxe(e,t,r,i){const n=Sn(r,i),{lengths:s,coords:o}=e;let a=0;s.length=o.length=0;for(const l of t){for(const u of l)for(let h=0;h<n;h++)o[a++]=u[h];s.push(l.length)}return e}const w0=[],Cw=[];function jrt(e,t,r,i,n){w0[0]=e;const[s]=pX(Cw,w0,t,r,i,n);return w0.length=Cw.length=0,s}function pX(e,t,r,i,n,s){if(e.length=0,!r){for(const o of t){const a=o.attributes[s];e.push(new Gu(null,o.attributes,null,a))}return e}switch(r){case"esriGeometryPoint":return iX(e,t,i,n,s);case"esriGeometryMultipoint":return sX(e,t,i,n,s);case"esriGeometryPolyline":return lX(e,t,i,n,s);case"esriGeometryPolygon":return hX(e,t,i,n,s);default:e1.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${r}'`)),e.length=0}return e}function Vrt(e,t,r,i,n,s){const o=e.length;switch(r){case"esriGeometryPoint":iX(e,t,i,n,s);break;case"esriGeometryMultipoint":sX(e,t,i,n,s);break;case"esriGeometryPolyline":lX(e,t,i,n,s);break;case"esriGeometryPolygon":hX(e,t,i,n,s);break;default:e1.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${r}'`))}for(let a=0;a<t.length;a++)e[a+o].geometryType=r,e[a+o].insertAfter=t[a].insertAfter,e[a+o].groupId=t[a].groupId;return e}function Urt(e,t,r,i){Cw[0]=e,mX(w0,Cw,t,r,i);const n=w0[0];return w0.length=Cw.length=0,n}function zrt(e,t,r){if(ce(e))return null;const i=new Qs;return"hasZ"in e&&t==null&&(t=e.hasZ),"hasM"in e&&r==null&&(r=e.hasM),oN(e)?rX(t??e.z!=null,r??e.m!=null)(i,e):ym(e)?dX(i,e,t,r):aN(e)?uX(i,e,Sn(t,r)):sN(e)?oX(i,e,Sn(t,r)):void e1.error("convertFromGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${e}'`))}function fX(e,t,r,i){const n=e&&("coords"in e?e:e.geometry);if(ce(n))return null;switch(t){case"esriGeometryPoint":{let s=A$;return r&&i?s=b6:r?s=g6:i&&(s=v6),s(n)}case"esriGeometryMultipoint":return nX(n,r,i);case"esriGeometryPolyline":return aX(n,r,i);case"esriGeometryPolygon":return cX(n,r,i);default:return void e1.error("convertToGeometry:unknown-geometry",new Z(`Unable to parse unknown geometry type '${t}'`))}}function gxe(e,t){for(const r of t)e.push({attributes:r.attributes});return e}function mX(e,t,r,i,n){if(e.length=0,ce(r))return gxe(e,t);switch(r){case"esriGeometryPoint":return dxe(e,t,i,n);case"esriGeometryMultipoint":return pxe(e,t,i,n);case"esriGeometryPolyline":return fxe(e,t,i,n);case"esriGeometryPolygon":return mxe(e,t,i,n);default:e1.error("convertToFeatureSet:unknown-geometry",new Z(`Unable to parse unknown geometry type '${r}'`))}return e}function Brt(e){const{objectIdFieldName:t,spatialReference:r,transform:i,fields:n,hasM:s,hasZ:o,features:a,geometryType:l,exceededTransferLimit:u,uniqueIdField:h,queryGeometry:d,queryGeometryType:f}=e,m={features:mX([],a,l,o,s),fields:n,geometryType:l,objectIdFieldName:t,spatialReference:r,uniqueIdField:h,queryGeometry:fX(d,f,!1,!1)};return i&&(m.transform=i),u&&(m.exceededTransferLimit=u),s&&(m.hasM=s),o&&(m.hasZ=o),m}function Grt(e,t){const r=new E$,{hasM:i,hasZ:n,features:s,objectIdFieldName:o,spatialReference:a,geometryType:l,exceededTransferLimit:u,transform:h,fields:d}=e;return d&&(r.fields=d),r.geometryType=l,r.objectIdFieldName=o||t,r.spatialReference=a,r.objectIdFieldName?(s&&pX(r.features,s,l,n,i,r.objectIdFieldName),u&&(r.exceededTransferLimit=u),i&&(r.hasM=i),n&&(r.hasZ=n),h&&(r.transform=h),r):(e1.error(new Z("optimized-features:invalid-objectIdFieldName","objectIdFieldName is missing")),r)}function qrt(e){const{transform:t,features:r,hasM:i,hasZ:n}=e;if(!t)return e;for(const s of r)U(s.geometry)&&dP(s.geometry,s.geometry,i,n,t),s.centroid&&dP(s.centroid,s.centroid,i,n,t);return e.transform=null,e}function Hrt(e,t){const{geometryType:r,features:i,hasM:n,hasZ:s}=t;if(!e)return t;for(let o=0;o<i.length;o++){const a=i[o],l=a.weakClone();l.geometry=new Qs,Qj(l.geometry,a.geometry,n,s,r,e),a.centroid&&(l.centroid=new Qs,Qj(l.centroid,a.centroid,n,s,"esriGeometryPoint",e)),i[o]=l}return t.transform=e,t}function Qj(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),ce(t)||!t.coords.length)return null;const l=XK[n],{coords:u,lengths:h}=t,d=Sn(r,i),f=Sn(r&&o,i&&a),m=y6(r,i,o,a);if(!h.length)return m(e.coords,u,0,0,X4(s,u[0]),Q4(s,u[1])),e.lengths.length&&(e.lengths.length=0),e.coords.length=d,e;let g,b,w,_,x=0,I=0,S=I;for(const T of h){if(T<l)continue;let $=0;I=S,w=g=X4(s,u[x]),_=b=Q4(s,u[x+1]),m(e.coords,u,I,x,w,_),$++,x+=d,I+=f;for(let E=1;E<T;E++,x+=d)w=X4(s,u[x]),_=Q4(s,u[x+1]),w===g&&_===b||(m(e.coords,u,I,x,w-g,_-b),I+=f,$++,g=w,b=_);$>=l&&(e.lengths.push($),S=I)}return e.coords.length=S,e.coords.length?e:null}function Wrt(e,t,r,i,n,s,o=r,a=i){if(e.lengths.length&&(e.lengths.length=0),e.coords.length&&(e.coords.length=0),!t||!t.coords.length)return null;const l=XK[n],{coords:u,lengths:h}=t,d=Sn(r,i),f=Sn(r&&o,i&&a),m=y6(r,i,o,a);if(!h.length)return m(e.coords,u,0,0,u[0],u[1]),e.lengths.length&&(e.lengths.length=0),e.coords.length=d,e;let g=0;const b=s*s;for(const w of h){if(w<l){g+=w*d;continue}const _=e.coords.length/f,x=g,I=g+(w-1)*d;m(e.coords,u,e.coords.length,x,u[x],u[x+1]),hP(e.coords,u,d,b,m,x,I),m(e.coords,u,e.coords.length,I,u[I],u[I+1]);const S=e.coords.length/f-_;S>=l?e.lengths.push(S):e.coords.length=_*f,g+=w*d}return e.coords.length?e:null}function vxe(e,t,r,i){const n=e[t],s=e[t+1],o=e[r],a=e[r+1],l=e[i],u=e[i+1];let h=o,d=a,f=l-h,m=u-d;if(f!==0||m!==0){const g=((n-h)*f+(s-d)*m)/(f*f+m*m);g>1?(h=l,d=u):g>0&&(h+=f*g,d+=m*g)}return f=n-h,m=s-d,f*f+m*m}function hP(e,t,r,i,n,s,o){let a,l=i,u=0;for(let h=s+r;h<o;h+=r)a=vxe(t,h,s,o),a>l&&(u=h,l=a);l>i&&(u-s>r&&hP(e,t,r,i,n,s,u),n(e,t,e.length,u,t[u],t[u+1]),o-u>r&&hP(e,t,r,i,n,u,o))}function Jrt(e,t,r,i){if(ce(t)||!t.coords||!t.coords.length)return null;const n=Sn(r,i);let s=Number.POSITIVE_INFINITY,o=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY;if(t&&t.coords){const u=t.coords;for(let h=0;h<u.length;h+=n){const d=u[h],f=u[h+1];s=Math.min(s,d),a=Math.max(a,d),o=Math.min(o,f),l=Math.max(l,f)}}return e[0]=s,e[1]=o,e[2]=a,e[3]=l,e}function dP(e,t,r,i,n){const{coords:s,lengths:o}=t,a=r?i?eX:mI:i?mI:QK,l=Sn(r,i);if(!s.length)return e!==t&&(e.lengths.length=0,e.coords.length=0),e;if(!o.length)return a(e.coords,s,0,0,Kj(n,s[0]),Xj(n,s[1])),e!==t&&(e.lengths.length=0,e.coords.length=l),e;const[u,h]=n.scale;let d=0;for(let f=0;f<o.length;f++){const m=o[f];e.lengths[f]=m;let g=Kj(n,s[d]),b=Xj(n,s[d+1]);a(e.coords,s,d,d,g,b),d+=l;for(let w=1;w<m;w++,d+=l)g+=s[d]*u,b-=s[d+1]*h,a(e.coords,s,d,d,g,b)}return e!==t&&(e.lengths.length=o.length,e.coords.length=s.length),e}function Zrt(e,t,r,i,n,s){const o=Sn(r,i),a=y6(r,i,n,s),l=t.coords;e.coords.length=0,e.lengths.length=0,e.lengths.push(...t.lengths);for(let u=0;u<l.length;u+=o)a(e.coords,l,e.coords.length,u,l[u],l[u+1]);return e}function bxe(e,t,r,i){let n=0,s=e[i*t],o=e[i*(t+1)];for(let a=1;a<r;a++){const l=s+e[i*(t+a)],u=o+e[i*(t+a)+1],h=(l-s)*(u+o);s=l,o=u,n+=h}return .5*n}function Yrt(e,t){const{coords:r,lengths:i}=e;let n=0,s=0;for(let o=0;o<i.length;o++)s+=bxe(r,n,i[o],t),n+=o;return Math.abs(s)}function Krt(e,t){if(ce(e))return null;const r=e.clone(),i=e.coords,n=e.lengths;let s=0;for(let o=0;o<n.length;o++){const a=n[o];let l=i[t*s],u=i[t*s+1];for(let h=1;h<a;h++){const d=l+i[t*(s+h)],f=u+i[t*(s+h)+1];r.coords[t*(s+h)]=d,r.coords[t*(s+h)+1]=f,l=d,u=f}s+=a}return r}var pP;let Sf=pP=class extends me{constructor(){super(...arguments),this.angleNames=null,this.point=null,this.spatialReference=null,this.rasterId=null}clone(){return new pP(ie({angleNames:this.angleNames,point:this.point,spatialReference:this.spatialReference,rasterId:this.rasterId}))}};c([p({type:[String],json:{name:"angleName",write:!0}})],Sf.prototype,"angleNames",void 0),c([p({type:Ke,json:{write:!0}})],Sf.prototype,"point",void 0),c([p({type:Fe,json:{write:!0}})],Sf.prototype,"spatialReference",void 0),c([p({type:jt,json:{write:!0}})],Sf.prototype,"rasterId",void 0),Sf=pP=c([N("esri.rest.support.ImageAngleParameters")],Sf);const wxe=Sf;var fP;let uu=fP=class extends me{constructor(){super(...arguments),this.geometry=null,this.mosaicRule=null,this.renderingRule=null,this.pixelSize=null,this.raster=void 0,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=Oi(e),t[r]=e.toJSON())}clone(){return new fP(ie({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,raster:this.raster,timeExtent:this.timeExtent}))}};c([p({types:xh,json:{read:Sr}})],uu.prototype,"geometry",void 0),c([Se("geometry")],uu.prototype,"writeGeometry",null),c([p({type:ha,json:{write:!0}})],uu.prototype,"mosaicRule",void 0),c([p({type:ki,json:{write:!0}})],uu.prototype,"renderingRule",void 0),c([p({type:Ke,json:{write:!0}})],uu.prototype,"pixelSize",void 0),c([p({json:{write:!0}})],uu.prototype,"raster",void 0),c([p({type:bs,json:{read:{source:"time"},write:{target:"time"}}})],uu.prototype,"timeExtent",void 0),uu=fP=c([N("esri.rest.support.ImageHistogramParameters")],uu);const eV=uu;var mP;let hi=mP=class extends me{constructor(){super(...arguments),this.geometry=null,this.renderingRules=null,this.pixelSize=null,this.returnGeometry=!0,this.returnCatalogItems=!0,this.returnPixelValues=!0,this.maxItemCount=null,this.timeExtent=null,this.raster=void 0,this.viewId=void 0}writeGeometry(e,t,r){e!=null&&(t.geometryType=Oi(e),t[r]=JSON.stringify(e.toJSON()))}set mosaicRule(e){let t=e;t&&t.mosaicMethod&&(t=ha.fromJSON({...t.toJSON(),mosaicMethod:t.mosaicMethod,mosaicOperation:t.mosaicOperation})),this._set("mosaicRule",t)}writeMosaicRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON()))}set renderingRule(e){let t=e;t&&t.rasterFunction&&(t=ki.fromJSON({...t.toJSON(),rasterFunction:t.rasterFunction,rasterFunctionArguments:t.rasterFunctionArguments})),this._set("renderingRule",t)}writeRenderingRule(e,t,r){e!=null&&(t[r]=JSON.stringify(e.toJSON()))}writeRenderingRules(e,t,r){e!=null&&(t[r]=JSON.stringify(e.map(i=>i.toJSON())))}writePixelSize(e,t,r){e!=null&&(t[r]=JSON.stringify(e))}writeTimeExtent(e,t,r){if(e!=null){const i=U(e.start)?e.start.getTime():null,n=U(e.end)?e.end.getTime():null;t[r]=i!=null?n!=null?`${i},${n}`:`${i}`:null}}clone(){return new mP(ie({geometry:this.geometry,mosaicRule:this.mosaicRule,renderingRule:this.renderingRule,pixelSize:this.pixelSize,returnGeometry:this.returnGeometry,returnCatalogItems:this.returnCatalogItems,returnPixelValues:this.returnPixelValues,maxItemCount:this.maxItemCount,raster:this.raster,viewId:this.viewId,timeExtent:this.timeExtent}))}};c([p({json:{write:!0}})],hi.prototype,"geometry",void 0),c([Se("geometry")],hi.prototype,"writeGeometry",null),c([p({type:ha,json:{write:!0}})],hi.prototype,"mosaicRule",null),c([Se("mosaicRule")],hi.prototype,"writeMosaicRule",null),c([p({type:ki,json:{write:!0}})],hi.prototype,"renderingRule",null),c([Se("renderingRule")],hi.prototype,"writeRenderingRule",null),c([p({type:[ki],json:{write:!0}})],hi.prototype,"renderingRules",void 0),c([Se("renderingRules")],hi.prototype,"writeRenderingRules",null),c([p({type:Ke,json:{write:!0}})],hi.prototype,"pixelSize",void 0),c([Se("pixelSize")],hi.prototype,"writePixelSize",null),c([p({type:Boolean,json:{write:!0}})],hi.prototype,"returnGeometry",void 0),c([p({type:Boolean,json:{write:!0}})],hi.prototype,"returnCatalogItems",void 0),c([p({type:Boolean,json:{write:!0}})],hi.prototype,"returnPixelValues",void 0),c([p({type:Number,json:{write:!0}})],hi.prototype,"maxItemCount",void 0),c([p({type:bs,json:{write:{target:"time"}}})],hi.prototype,"timeExtent",void 0),c([Se("timeExtent")],hi.prototype,"writeTimeExtent",null),c([p({json:{write:!0}})],hi.prototype,"raster",void 0),c([p({json:{write:!0}})],hi.prototype,"viewId",void 0),hi=mP=c([N("esri.rest.support.ImageIdentifyParameters")],hi);const tV=hi;var yP;let Tg=yP=class extends me{constructor(){super(...arguments),this.geometries=null,this.rasterId=null}writeGeometry(e,t,r){t.geometries={geometryType:"esriGeometryPoint",geometries:e.map(i=>i.toJSON())}}clone(){return new yP({geometries:this.geometries.map(e=>e.clone()),rasterId:this.rasterId})}};c([p({type:[Ke],json:{write:!0}})],Tg.prototype,"geometries",void 0),c([Se("geometries")],Tg.prototype,"writeGeometry",null),c([p({type:jt,json:{write:!0}})],Tg.prototype,"rasterId",void 0),Tg=yP=c([N("esri.rest.support.ImagePixelLocationParameters")],Tg);const _xe=Tg;var gP;let Yn=gP=class extends me{constructor(){super(...arguments),this.geometry=null,this.interpolation="nearest",this.mosaicRule=null,this.outFields=null,this.pixelSize=null,this.returnFirstValueOnly=!0,this.sampleDistance=null,this.sampleCount=null,this.sliceId=null,this.timeExtent=null}writeGeometry(e,t,r){e!=null&&(t.geometryType=Oi(e),t[r]=e.toJSON())}set locations(e){if(e!=null&&e.length){const t=new xp({spatialReference:e[0].spatialReference});t.points=e.map(r=>[r.x,r.y]),this._set("locations",e),this.geometry=t}}clone(){return new gP(ie({geometry:this.geometry,locations:this.locations,interpolation:this.interpolation,mosaicRule:this.mosaicRule,outFields:this.outFields,raster:this.raster,returnFirstValueOnly:this.returnFirstValueOnly,sampleDistance:this.sampleDistance,sampleCount:this.sampleCount,sliceId:this.sliceId,pixelSize:this.pixelSize,timeExtent:this.timeExtent}))}};c([p({types:xh,json:{read:Sr}})],Yn.prototype,"geometry",void 0),c([Se("geometry")],Yn.prototype,"writeGeometry",null),c([p({type:String,json:{type:Yd.jsonValues,read:Yd.read,write:Yd.write}})],Yn.prototype,"interpolation",void 0),c([p({type:ha,json:{write:!0}})],Yn.prototype,"mosaicRule",void 0),c([p({type:[String],json:{write:!0}})],Yn.prototype,"outFields",void 0),c([p({type:Ke,json:{write:!0}})],Yn.prototype,"pixelSize",void 0),c([p({type:String,json:{write:!0}})],Yn.prototype,"raster",void 0),c([p({type:Boolean,json:{write:!0}})],Yn.prototype,"returnFirstValueOnly",void 0),c([p({type:Number,json:{write:!0}})],Yn.prototype,"sampleDistance",void 0),c([p({type:Number,json:{write:!0}})],Yn.prototype,"sampleCount",void 0),c([p({type:Number,json:{write:!0}})],Yn.prototype,"sliceId",void 0),c([p({type:bs,json:{read:{source:"time"},write:{target:"time"}}})],Yn.prototype,"timeExtent",void 0),Yn=gP=c([N("esri.rest.support.ImageSampleParameters")],Yn);const xxe=Yn,Sxe=Te.getLogger("esri.views.2d.engine.flow.dataUtils"),rV=8;async function Mxe(e,t,r){const i=performance.now(),n=Ixe(e,t),s=performance.now(),o=$xe(e,n,t.width,t.height),a=performance.now(),l=Axe(o,!0),u=performance.now(),h=Cxe(l),d=performance.now();if(e.profile){const f={"_createFlowFieldFromData()":Math.round(s-i),"_getStreamlines()":Math.round(a-s),"createAnimatedLinesData()":Math.round(u-a),"createLinesMesh()":Math.round(d-u),"Total elapsed time":Math.round(d-i)};Sxe.info("createStreamlinesMesh profile",f)}return await Promise.resolve(),$r(r),h}function Ixe(e,t){const r=Exe(t.data,t.width,t.height,e.smoothing);return e.interpolate?(i,n)=>{const s=Math.floor(i),o=Math.floor(n);if(s<0||s>=t.width)return[0,0];if(o<0||o>=t.height)return[0,0];const a=i-s,l=n-o,u=s,h=o,d=s<t.width-1?s+1:s,f=o<t.height-1?o+1:o,m=r[2*(h*t.width+u)],g=r[2*(h*t.width+d)],b=r[2*(f*t.width+u)],w=r[2*(f*t.width+d)],_=r[2*(h*t.width+u)+1],x=r[2*(h*t.width+d)+1];return[(m*(1-l)+b*l)*(1-a)+(g*(1-l)+w*l)*a,(_*(1-l)+r[2*(f*t.width+u)+1]*l)*(1-a)+(x*(1-l)+r[2*(f*t.width+d)+1]*l)*a]}:(i,n)=>{const s=Math.round(i),o=Math.round(n);return s<0||s>=t.width||o<0||o>=t.height?[0,0]:[r[2*(o*t.width+s)+0],r[2*(o*t.width+s)+1]]}}function Txe(e,t,r,i,n,s,o,a,l){const u=[];let h,d,f=r,m=i,g=0;u.push({x:f,y:m,t:g});for(let b=0;b<e.verticesPerLine;b++){let[w,_]=t(f,m);w*=e.velocityScale,_*=e.velocityScale;const x=Math.sqrt(w*w+_*_);if(x<e.minSpeedThreshold)return u;const I=w/x,S=_/x;if(f+=I*e.segmentLength,m+=S*e.segmentLength,g+=e.segmentLength/x,Math.acos(I*h+S*d)>e.maxTurnAngle)return u;if(e.mergeLines){const T=Math.round(f*l),$=Math.round(m*l);if(T<0||T>o-1||$<0||$>a-1)return u;const E=s[$*o+T];if(E!==-1&&E!==n)return u;s[$*o+T]=n}u.push({x:f,y:m,t:g}),h=I,d=S}return u}function $xe(e,t,r,i){const n=[],s=new xo,o=1/Math.max(e.lineCollisionWidth,1),a=Math.round(r*o),l=Math.round(i*o),u=new Int32Array(a*l);for(let d=0;d<u.length;d++)u[d]=-1;const h=[];for(let d=0;d<i;d+=e.lineSpacing)for(let f=0;f<r;f+=e.lineSpacing)h.push({x:f,y:d,sort:s.getFloat()});h.sort((d,f)=>d.sort-f.sort);for(const{x:d,y:f}of h)if(s.getFloat()<e.density){const m=Txe(e,t,d,f,n.length,u,a,l,o);if(m.length<2)continue;n.push(m)}return n}function Exe(e,t,r,i){if(i===0)return e;const n=Math.round(3*i),s=new Array(2*n+1);let o=0;for(let u=-n;u<=n;u++){const h=Math.exp(-u*u/(i*i));s[u+n]=h,o+=h}for(let u=-n;u<=n;u++)s[u+n]/=o;const a=new Float32Array(e.length);for(let u=0;u<r;u++)for(let h=0;h<t;h++){let d=0,f=0;for(let m=-n;m<=n;m++){if(h+m<0||h+m>=t)continue;const g=s[m+n];d+=g*e[2*(u*t+(h+m))+0],f+=g*e[2*(u*t+(h+m))+1]}a[2*(u*t+h)+0]=d,a[2*(u*t+h)+1]=f}const l=new Float32Array(e.length);for(let u=0;u<t;u++)for(let h=0;h<r;h++){let d=0,f=0;for(let m=-n;m<=n;m++){if(h+m<0||h+m>=r)continue;const g=s[m+n];d+=g*a[2*((h+m)*t+u)+0],f+=g*a[2*((h+m)*t+u)+1]}l[2*(h*t+u)+0]=d,l[2*(h*t+u)+1]=f}return l}function Axe(e,t){const r=new xo,i=e.reduce((l,u)=>l+u.length,0),n=new Float32Array(3*i),s=new Array(e.length);let o=0,a=0;for(const l of e){const u=o;for(const h of l)n[3*o+0]=h.x,n[3*o+1]=h.y,n[3*o+2]=h.t,o++;s[a++]={startVertex:u,numberOfVertices:l.length,totalTime:l[l.length-1].t,timeSeed:t?r.getFloat():0}}return{lineVertices:n,lineDescriptors:s}}function Cxe(e,t=10){const{lineVertices:r,lineDescriptors:i}=e;let n=0,s=0;for(const f of i)n+=2*f.numberOfVertices,s+=6*(f.numberOfVertices-1);const o=new Float32Array(n*rV),a=new Uint32Array(s);let l=0,u=0;function h(){a[u++]=l-2,a[u++]=l,a[u++]=l-1,a[u++]=l,a[u++]=l+1,a[u++]=l-1}function d(f,m,g,b,w,_,x){const I=l*rV;let S=0;o[I+S++]=f,o[I+S++]=m,o[I+S++]=1,o[I+S++]=g,o[I+S++]=_,o[I+S++]=x,o[I+S++]=b,o[I+S++]=w,l++,o[I+S++]=f,o[I+S++]=m,o[I+S++]=-1,o[I+S++]=g,o[I+S++]=_,o[I+S++]=x,o[I+S++]=-b,o[I+S++]=-w,l++}for(const f of i){const{totalTime:m,timeSeed:g}=f;let b=null,w=null,_=null,x=null,I=null;for(let S=0;S<f.numberOfVertices;S++){const T=r[3*(f.startVertex+S)+0],$=r[3*(f.startVertex+S)+1],E=r[3*(f.startVertex+S)+2];let C=null,O=null,R=null,D=null;if(S>0){C=T-b,O=$-w;const F=Math.sqrt(C*C+O*O);if(C/=F,O/=F,S>1){let z=C+x,B=O+I;const y=Math.sqrt(z*z+B*B);z/=y,B/=y;const M=Math.min(1/(z*C+B*O),t);z*=M,B*=M,R=-B,D=z}else R=-O,D=C;R!==null&&D!==null&&(d(b,w,_,R,D,m,g),h())}b=T,w=$,_=E,x=C,I=O}d(b,w,_,-I,x,m,g)}return{vertexData:o,indexData:a}}function iV(e,t){const r=t.pixels,{width:i,height:n}=t,s=new Float32Array(i*n*2);if(e==="vector-uv")for(let o=0;o<i*n;o++)s[2*o+0]=r[0][o],s[2*o+1]=-r[1][o];else if(e==="vector-magdir")for(let o=0;o<i*n;o++){const a=r[0][o],l=Yg(r[1][o]),u=Math.cos(l-Math.PI/2),h=Math.sin(l-Math.PI/2);s[2*o+0]=u*a,s[2*o+1]=h*a}return{data:s,width:i,height:n}}async function Xrt(e,t,r,i,n){const s=Ao(t.spatialReference);if(!s)return nV(e,t,r,i,n);const[o,a]=s.valid,l=a-o,u=Math.ceil(t.width/l),h=t.width/u,d=Math.round(r/u);let f=t.xmin;const m=[];for(let _=0;_<u;_++){const x=new nt({xmin:f,xmax:f+h,ymin:t.ymin,ymax:t.ymax,spatialReference:t.spatialReference});m.push(nV(e,x,d,i,n)),f+=h}const g=await Promise.all(m),b={data:new Float32Array(r*i*2),width:r,height:i};let w=0;for(const _ of g){for(let x=0;x<_.height;x++)for(let I=0;I<_.width;I++)w+I>=r||(b.data[2*(x*r+w+I)+0]=_.data[2*(x*_.width+I)+0],b.data[2*(x*r+w+I)+1]=_.data[2*(x*_.width+I)+1]);w+=_.width}return b}async function nV(e,t,r,i,n){if(e.type==="imagery"){await e.load({signal:n});const a=e.rasterInfo.dataType,l=await e.fetchImage(t,r,i,{signal:n});return!l||ce(l.pixelData)||ce(l.pixelData.pixelBlock)?{data:new Float32Array(r*i*2),width:r,height:i}:iV(a,l.pixelData.pixelBlock)}await e.load({signal:n});const s=e.rasterInfo.dataType,o=await e.fetchPixels(t,r,i,{signal:n});return!o||ce(o.pixelBlock)?{data:new Float32Array(r*i*2),width:r,height:i}:iV(s,o.pixelBlock)}const sV=Te.getLogger("esri.layers.mixins.ArcGISImageService"),e5=li()({U1:"u1",U2:"u2",U4:"u4",U8:"u8",S8:"s8",U16:"u16",S16:"s16",U32:"u32",S32:"s32",F32:"f32",F64:"f64",C64:"c64",C128:"c128",UNKNOWN:"unknown"}),kxe=new Set(["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"]),Oxe=XH(da,{min:0,max:255});function Pxe(e){if(!e)return null;const t=JSON.stringify(e).match(/"rasterFunction":"(.*?")/gi),r=t?.map(i=>i.replace('"rasterFunction":"',"").replace('"',""));return r?r.join("/"):null}const Rxe=e=>{let t=class extends e{constructor(){super(...arguments),this._functionRasterInfos={},this._rasterJobHandler={instance:null,refCount:0,connectionPromise:null},this._symbolizer=null,this._defaultServiceMosaicRule=null,this._serviceSourceType=null,this._serviceSupportsMosaicRule=null,this.rasterAttributeTableFieldPrefix="Raster.",this.adjustAspectRatio=null,this.bandCount=null,this.bandIds=void 0,this.capabilities=null,this.compressionQuality=void 0,this.compressionTolerance=.01,this.copyright=null,this.definitionExpression=null,this.exportImageServiceParameters=null,this.rasterInfo=null,this.fields=null,this.fullExtent=null,this.hasMultidimensions=!1,this.imageMaxHeight=4100,this.imageMaxWidth=4100,this.interpolation=void 0,this.minScale=0,this.maxScale=0,this.multidimensionalInfo=null,this.noData=null,this.noDataInterpretation=void 0,this.objectIdField=null,this.geometryType="polygon",this.typeIdField=null,this.types=[],this.pixelSizeX=null,this.pixelSizeY=null,this.pixelFilter=null,this.raster=void 0,this.viewId=void 0,this.renderer=null,this.rasterAttributeTable=null,this.rasterFunctionInfos=null,this.serviceDataType=null,this.spatialReference=null,this.pixelType=null,this.serviceRasterInfo=null,this.sourceJSON=null,this.url=null,this.version=null}initialize(){this._set("exportImageServiceParameters",new ti({layer:this}))}readDefaultServiceMosaicRule(r,i){return this._serviceSupportsMosaicRule?ha.fromJSON(i):null}readServiceSourceType(r,i){return this._isMosaicDataset(i)?"mosaic-dataset":"raster-dataset"}readServiceSupportsMosaicRule(r,i){return this._isMosaicRuleSupported(i)}get rasterFunctionNamesIndex(){const r=new Map;return!this.rasterFunctionInfos||U(this.rasterFunctionInfos)&&this.rasterFunctionInfos.length<1||U(this.rasterFunctionInfos)&&this.rasterFunctionInfos.forEach(i=>{r.set(i.name.toLowerCase().replace(/ /gi,"_"),i.name)}),r}readBandIds(r,i){if(Array.isArray(r)&&r.length>0&&r.every(n=>typeof n=="number"))return r}readCapabilities(r,i){return this._readCapabilities(i)}writeCompressionQuality(r,i,n){r!=null&&this.format!=="lerc"&&(i[n]=r)}writeCompressionTolerance(r,i,n){this.format==="lerc"&&r!=null&&(i[n]=r)}get fieldsIndex(){return this.fields?new XN(this.fields):null}set format(r){r&&kxe.has(r.toLowerCase())&&this._set("format",r.toLowerCase())}readFormat(r,i){return i.serviceDataType==="esriImageServiceDataTypeVector-UV"||i.serviceDataType==="esriImageServiceDataTypeVector-MagDir"||this.pixelFilter!=null?"lerc":"jpgpng"}readMinScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}readMaxScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}set mosaicRule(r){let i=r;i&&i.mosaicMethod&&(i=ha.fromJSON({...i.toJSON(),mosaicMethod:i.mosaicMethod,mosaicOperation:i.mosaicOperation})),this._set("mosaicRule",i)}readMosaicRule(r,i){const n=r||i.mosaicRule;return n?ha.fromJSON(n):this._isMosaicRuleSupported(i)?ha.fromJSON(i):null}writeMosaicRule(r,i,n){let s=this.mosaicRule;const o=this.definitionExpression;s?o&&o!==s.where&&(s=s.clone(),s.where=o):o&&(s=new ha({where:o})),this._isValidCustomizedMosaicRule(s)&&(i[n]=s.toJSON())}writeNoData(r,i,n){r!=null&&typeof r=="number"&&(i[n]=Oxe(r))}readObjectIdField(r,i){if(!r){const n=i.fields.filter(s=>s.type==="esriFieldTypeOID"||s.type==="oid");r=n&&n[0]&&n[0].name}return r}get parsedUrl(){return this.url?Kr(this.url):null}readRenderer(r,i,n){var s,o;const a=i==null||(s=i.layerDefinition)==null||(o=s.drawingInfo)==null?void 0:o.renderer,l=Ywe(a,n);return l==null?null:(l.type==="vector-field"&&i.symbolTileSize&&!a.symbolTileSize&&(l.symbolTileSize=i.symbolTileSize),yK(l)||sV.warn("ArcGISImageService","Imagery layer doesn't support given renderer type."),l)}writeRenderer(r,i,n){i.layerDefinition=i.layerDefinition||{},i.layerDefinition.drawingInfo=i.layerDefinition.drawingInfo||{},i.layerDefinition.drawingInfo.renderer=r.toJSON(),r.type==="vector-field"&&(i.symbolTileSize=r.symbolTileSize)}get rasterFields(){const r=this.rasterAttributeTableFieldPrefix||"Raster.",i=new wo({name:"Raster.ItemPixelValue",alias:"Item Pixel Value",domain:null,editable:!1,length:50,type:"string"}),n=new wo({name:"Raster.ServicePixelValue",alias:"Service Pixel Value",domain:null,editable:!1,length:50,type:"string"}),s=new wo({name:"Raster.ServicePixelValue.Raw",alias:"Raw Service Pixel Value",domain:null,editable:!1,length:50,type:"string"});let o=this.fields?ie(this.fields):[];o.push(n),this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0&&o.push(i),this.version>=10.4&&U(this.rasterFunctionInfos)&&this.rasterFunctionInfos.some(l=>l.name.toLowerCase()==="none")&&o.push(s),U(this.rasterFunctionInfos)&&this.rasterFunctionInfos.filter(l=>l.name.toLowerCase()!=="none").forEach(l=>{o.push(new wo({name:"Raster.ServicePixelValue."+l.name,alias:l.name,domain:null,editable:!1,length:50,type:"string"}))}),this.pixelFilter==null||this.serviceDataType!=="esriImageServiceDataTypeVector-UV"&&this.serviceDataType!=="esriImageServiceDataTypeVector-MagDir"||(o.push(new wo({name:"Raster.Magnitude",alias:"Magnitude",domain:null,editable:!1,type:"double"})),o.push(new wo({name:"Raster.Direction",alias:"Direction",domain:null,editable:!1,type:"double"})));const a=this.rasterInfo.attributeTable&&this.rasterInfo.attributeTable.fields||null;if(a&&a.length>0){const l=a.filter(u=>u.type!=="esriFieldTypeOID"&&u.name.toLowerCase()!=="value").map(u=>{const h=ie(u);return h.name=r+u.name,h});o=o.concat(l)}return o}set renderingRule(r){let i=r;i&&i.rasterFunction&&(i=ki.fromJSON({...i.toJSON(),rasterFunction:i.rasterFunction,rasterFunctionArguments:i.rasterFunctionArguments})),this._set("renderingRule",i)}readRenderingRule(r,i){const n=i.rasterFunctionInfos;return i.renderingRule||n&&n.length&&n[0].name!=="None"?ki.fromJSON(i.renderingRule||{rasterFunctionInfos:i.rasterFunctionInfos}):null}writeRenderingRule(r,i,n){this._isRFTJson(r)||(i[n]=r.toJSON())}readSpatialReference(r,i){const n=r||i.extent.spatialReference;return n?Fe.fromJSON(n):null}readPixelType(r){return e5.fromJSON(r)||r}writePixelType(r,i,n){(ce(this.serviceRasterInfo)||this.pixelType!==this.serviceRasterInfo.pixelType)&&(i[n]=e5.toJSON(r))}readVersion(r,i){let n=i.currentVersion;return n||(n=i.hasOwnProperty("fields")||i.hasOwnProperty("timeInfo")?10:9.3),n}applyFilter(r){let i=r;return this.pixelFilter&&(i=this._clonePixelData(r),this.pixelFilter(i)),i}async applyRenderer(r,i){let n=r;if(!this._isPicture()&&this.renderer&&this._symbolizer&&!this.pixelFilter){const s=JSON.stringify(this._cachedRendererJson)!==JSON.stringify(this.renderer.toJSON()),o=this._rasterJobHandler.instance,{bandIds:a}=this;if(o){s&&(this._symbolizer.bind(),await o.updateSymbolizer(this._symbolizer,i),this._cachedRendererJson=this.renderer.toJSON());const l=await o.symbolize({bandIds:a,...r},i);n={extent:r.extent,pixelBlock:l}}else n={extent:r.extent,pixelBlock:this._symbolizer.symbolize({bandIds:a,...r})}}return n}destroy(){this._shutdownJobHandler()}increaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount++}decreaseRasterJobHandlerUsage(){this._rasterJobHandler.refCount--,this._rasterJobHandler.refCount<=0&&this._shutdownJobHandler()}async computeAngles(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeAngles)throw new Z("imagery-layer:compute-angles","this operation is not supported on the input image service");return r=ua(wxe,r).clone(),P2e(this.url,r,this._getRequestOptions(i))}async computePixelSpaceLocations(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputePixelLocation)throw new Z("imagery-layer:compute-pixel-space-locations","this operation is not supported on the input image service");return r=ua(_xe,r).clone(),R2e(this.url,r,this._getRequestOptions(i))}async computeHistograms(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeHistograms)throw new Z("imagery-layer:compute-histograms","this operation is not supported on the input image service");r=ua(eV,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;return o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null&&(r.mosaicRule=s),n&&r.raster==null&&(r.raster=n),N2e(this.url,r,this._getRequestOptions(i))}async computeStatisticsHistograms(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsComputeStatisticsHistograms)throw new Z("imagery-layer:compute-statistics-histograms","this operation is not supported on the input image service");r=ua(eV,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;return o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null&&(r.mosaicRule=s),n&&r.raster==null&&(r.raster=n),L2e(this.url,r,this._getRequestOptions(i))}getField(r){const{fieldsIndex:i}=this;return U(i)?i.get(r):void 0}getFieldDomain(r,i){const n=this.getField(r);return n?n.domain:null}fetchImage(r,i,n,s={}){if(r==null||i==null||n==null)return Promise.reject(new Z("imagery-layer:fetch-image","Insufficient parameters for requesting an image. A valid extent, width and height values are required."));const o=this.renderer||this._symbolizer?this.generateRasterInfo(this.renderingRule,{signal:s.signal}):null;return j3(o).then(a=>{a&&(this.rasterInfo=a);const l={imageServiceParameters:this.getExportImageServiceParameters(r,i,n,s.timeExtent),imageProps:{extent:r,width:i,height:n,format:this.format},requestAsImageElement:s.requestAsImageElement&&!this.pixelFilter||!1,signal:s.signal};return this._requestArrayBuffer(l)})}fetchKeyProperties(r){const i=r&&r.renderingRule&&r.renderingRule.toJSON();return Ee(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:this.version>=10.3&&i?JSON.stringify(i):null})}).then(n=>n.data)}fetchRasterAttributeTable(r){const i=r&&r.renderingRule&&r.renderingRule.toJSON();return this.version<10.1?Promise.reject(new Z("#fetchRasterAttributeTable()","Failed to get rasterAttributeTable")):Ee(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.3&&i?JSON.stringify(i):null})}).then(n=>Bu.fromJSON(n.data))}async getCatalogItemRasterInfo(r,i){const n=Ee(this.parsedUrl.path+"/"+r+"/info",{query:this._getQueryParams(),...i}).then(u=>u.data),s=Ee(this.parsedUrl.path+"/"+r+"/info/keyProperties",{query:this._getQueryParams(),...i}).then(u=>u.data).catch(()=>{}),o=await Promise.all([n,s]);if(!o[0])return;const a=nt.fromJSON(o[0].extent),l=o[0].statistics?o[0].statistics.map(u=>({min:u[0],max:u[1],avg:u[2],stddev:u[3]})):null;return new Ew({bandCount:o[0].bandCount,extent:a,spatialReference:a.sr,pixelSize:new Ke({x:o[0].pixelSizeX,y:o[0].pixelSizeY,spatialReference:a.sr}),pixelType:o[0].pixelType.toLowerCase(),statistics:l,histograms:o[0].histograms,keyProperties:o[1]||{}})}async getCatalogItemICSInfo(r,i){const{data:n}=await Ee(this.parsedUrl.path+"/"+r+"/info/ics",{query:this._getQueryParams(),...i}),s=n&&n.ics;if(!s)return;let o=null;try{o=(await Ee(this.parsedUrl.path+"/"+r+"/info",{query:this._getQueryParams(),...i})).data.extent}catch{}if(!o||!o.spatialReference)return{ics:s,icsToPixelTransform:null,icsExtent:null,northDirection:null};const a=this.version>=10.7?Ee(this.parsedUrl.path+"/"+r+"/info/icstopixel",{query:this._getQueryParams(),...i}).then(P=>P.data).catch(()=>({})):{},l=o.spatialReference,u={geometries:JSON.stringify({geometryType:"esriGeometryEnvelope",geometries:[o]}),inSR:l.wkid||JSON.stringify(l),outSR:"0:"+r},h=Ee(this.parsedUrl.path+"/project",{query:this._getQueryParams(u),...i}).then(P=>P.data).catch(()=>({})),d=5,f=(o.xmin+o.xmax)/2,m=(o.ymax-o.ymin)/(d+1),g=o.ymin+m,b=[];for(let P=0;P<d;P++)b.push({x:f,y:g+m*P});const w={geometries:JSON.stringify({geometryType:"esriGeometryPoint",geometries:b}),inSR:l.wkid||JSON.stringify(l),outSR:"0:"+r},_=Ee(this.parsedUrl.path+"/project",{query:this._getQueryParams(w),...i}).then(P=>P.data).catch(()=>({})),x=await Promise.all([a,h,_]);let I=x[0].ipxf;if(I==null){var S,T,$;const P=(S=s.geodataXform)==null?void 0:S.xf_0;(P==null||(T=P.name)==null?void 0:T.toLowerCase())==="topup"&&(P==null||($=P.coefficients)==null?void 0:$.length)===6&&(I={affine:{name:"ics [sensor: Frame] to pixel (column, row) transformation",coefficients:P.coefficients,cellsizeRatio:0,type:"GeometricXform"}})}const E=nt.fromJSON(x[1]&&x[1].geometries&&x[1].geometries[0]);E&&(E.spatialReference=new Fe({wkid:0,imageCoordinateSystem:s}));const C=x[2].geometries?x[2].geometries.filter(P=>P!=null&&P.x!=null&&P.y!=null&&P.x!=="NaN"&&P.y!=="NaN"):[],O=C.length;if(O<3)return{ics:s,icsToPixelTransform:I,icsExtent:E,northDirection:null};let R=0,D=0,F=0,z=0;for(let P=0;P<O;P++)R+=C[P].x,D+=C[P].y,F+=C[P].x*C[P].x,z+=C[P].x*C[P].y;const B=(O*z-R*D)/(O*F-R*R);let y=0;const M=C[d-1].x>C[0].x,A=C[d-1].y>C[0].y;return B===1/0?y=A?90:270:B===0?y=M?0:180:B>0?y=M?180*Math.atan(B)/Math.PI:180*Math.atan(B)/Math.PI+180:B<0&&(y=A?180+180*Math.atan(B)/Math.PI:360+180*Math.atan(B)/Math.PI),{ics:s,icsToPixelTransform:I,icsExtent:E,northDirection:y}}async generateRasterInfo(r,i){if((!r||r.functionName.toLowerCase()==="none"||this._isVectorFieldResampleFunction(r))&&U(this.serviceRasterInfo))return this.serviceRasterInfo;const n=Pxe(r);if(this._functionRasterInfos[n])return this._functionRasterInfos[n];const s=this._generateRasterInfo(r,i);this._functionRasterInfos[n]=s;try{return await s}catch{return this._functionRasterInfos[n]=null,null}}getExportImageServiceParameters(r,i,n,s){r=r.clone().shiftCentralMeridian();const o=VK(r.spatialReference,this.parsedUrl.path);U(this.serviceRasterInfo)&&this.pixelType!==this.serviceRasterInfo.pixelType&&(this.exportImageServiceParameters.pixelType=this.pixelType);const a=this.exportImageServiceParameters.toJSON(),{bandIds:l,noData:u}=a;let{renderingRule:h}=a;const d=this.renderingRule&&this.renderingRule.functionName.toLowerCase()!=="none",f=!this.renderer||this.renderer.type==="raster-stretch";if(l!=null&&l.length&&d&&f){const b={rasterFunction:"ExtractBand",rasterFunctionArguments:{BandIds:l}};if(h.rasterFunction==="Stretch")b.rasterFunctionArguments.Raster=h.rasterFunctionArguments.Raster,h.rasterFunctionArguments.Raster=b;else if(h.rasterFunction==="Colormap"){const w=h.rasterFunctionArguments.Raster;w?.rasterFunction==="Stretch"?(b.rasterFunctionArguments.Raster=w.rasterFunctionArguments.Raster,w.rasterFunctionArguments.Raster=b):(b.rasterFunctionArguments.Raster=w,h.rasterFunctionArguments.Raster=b)}else b.rasterFunctionArguments.Raster=h,h=b;a.bandIds=void 0}else a.bandIds=l?.join(",");u instanceof Array&&u.length>0&&(a.noData=u.join(","));const m=this._serviceSupportsMosaicRule?this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,s):null;a.mosaicRule=m&&JSON.stringify(m),a.renderingRule=h&&JSON.stringify(h);const g={};if(s){const{start:b,end:w}=s.toJSON();b&&w&&b===w?g.time=""+b:b==null&&w==null||(g.time=`${b??"null"},${w??"null"}`)}return{bbox:r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:o,imageSR:o,size:i+","+n,...a,...g}}async getSamples(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsGetSamples)throw new Z("imagery-layer:get-samples","getSamples operation is not supported on the input image service");r=ua(xxe,r).clone();const{raster:n}=this;return n&&r.raster==null&&(r.raster=n),D2e(this.url,r,this._getRequestOptions(i))}async identify(r,i){if(await this._fetchCapabilities(i?.signal),!this.capabilities.operations.supportsIdentify)throw new Z("imagery-layer:query-rasters","query operation is not supported on the input image service");r=ua(tV,r).clone();const{raster:n,mosaicRule:s,renderingRule:o}=this;if(o&&r.renderingRule==null&&(r.renderingRule=o),s&&r.mosaicRule==null){const a=this._combineMosaicRuleWithTimeExtent(s,r.timeExtent);r.mosaicRule=a}return n&&r.raster==null&&(r.raster=n),Uj(this.url,r,this._getRequestOptions(i))}createQuery(){const r=new ni;return r.outFields=["*"],r.returnGeometry=!0,r.where=this.definitionExpression||"1=1",r}async queryRasters(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),axe(this.url,r,i)}async queryObjectIds(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),m6(this.url,r,i)}async queryRasterCount(r,i){return{query:r,requestOptions:i}=await this._prepareForQuery(r,i),YK(this.url,r,i)}queryVisibleRasters(r,i){if(!r)return Promise.reject(new Z("imagery-layer: query-visible-rasters","missing query parameter"));const{pixelSize:n,returnDomainValues:s,returnTopmostRaster:o,showNoDataRecords:a}=i||{pixelSize:null,returnDomainValues:!1,returnTopmostRaster:!1,showNoDataRecords:!1};let l=!1,u=null,h=null;const d="raster.servicepixelvalue",f=this.rasterFunctionNamesIndex;if(U(r.outFields)&&(l=r.outFields.some(I=>I.toLowerCase().indexOf(d)===-1),this.version>=10.4)){const I=r.outFields.filter(S=>S.toLowerCase().indexOf(d)>-1&&S.length>d.length).map(S=>{const T=S.slice(d.length+1);return[this._updateRenderingRulesFunctionName(T,f),T]});u=I.map(S=>new ki({functionName:S[0]})),h=I.map(S=>S[1]),u.length===0?this.renderingRule?(u.push(this.renderingRule),h.push(this.renderingRule.functionName)):u=null:this.renderingRule&&!u.some(S=>S.functionName===this.renderingRule.functionName)&&(u.push(this.renderingRule),h.push(this.renderingRule.functionName))}const m=ce(r.outSpatialReference)||r.outSpatialReference.equals(this.spatialReference),g=r.timeExtent||this.timeExtent,b=this._combineMosaicRuleWithTimeExtent(this.exportImageServiceParameters.mosaicRule,g),w=this._getQueryParams({geometry:r.geometry,timeExtent:g,mosaicRule:b,renderingRule:this.version<10.4?this.renderingRule:null,renderingRules:u,pixelSize:n,returnCatalogItems:l,returnGeometry:m,raster:this.raster,maxItemCount:o?1:null});delete w.f;const _=new tV(w),x=this.generateRasterInfo(this.renderingRule);return new Promise(I=>{x.then(()=>{Uj(this.url,_,{signal:i?.signal,query:{...this.customParameters}}).then(S=>{var T;const $=r.outFields,E=S.value.toLowerCase().indexOf("nodata")>-1;if(l&&!m&&S!=null&&(T=S.catalogItems)!=null&&T.features.length&&(a||!E)){const C=this.objectIdField||"ObjectId",O=S.catalogItems.features,R=O.map(F=>F.attributes&&F.attributes[C]),D=new ni({objectIds:R,returnGeometry:!0,outSpatialReference:r.outSpatialReference,outFields:[C]});return this.queryRasters(D).then(F=>{F&&F.features&&F.features.length>0&&F.features.forEach(z=>{O.forEach(B=>{B.attributes[C]===z.attributes[C]&&(B.geometry=new _n(z.geometry),B.geometry.spatialReference=r.outSpatialReference)})}),I(this._processVisibleRastersResponse(S,{returnDomainValues:s,templateRRFunctionNames:h,showNoDataRecords:a,templateFields:$}))}).catch(()=>{throw new Z("imagery-layer:query-visible-rasters","encountered error when querying visible rasters geometry")})}I(this._processVisibleRastersResponse(S,{returnDomainValues:s,templateRRFunctionNames:h,showNoDataRecords:a,templateFields:$}))}).catch(()=>{throw new Z("imagery-layer:query-visible-rasters","encountered error when querying visible rasters")})})})}async fetchVariableStatisticsHistograms(r,i){const n=Ee(this.parsedUrl.path+"/statistics",{query:this._getQueryParams({variable:r}),signal:i}).then(a=>{var l;return(l=a.data)==null?void 0:l.statistics}),s=Ee(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({variable:r}),signal:i}).then(a=>{var l;return(l=a.data)==null?void 0:l.histograms}),o=await Promise.all([n,s]);return o[0]&&o[0].forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation}),{statistics:o[0]||null,histograms:o[1]||null}}async createStreamlinesMesh(r,i){const n=this._rasterJobHandler.instance;return n?n.createStreamlinesMesh(r,i):Mxe(r.rendererSettings,r.flowData,U(i.signal)?i.signal:new AbortController().signal)}async _fetchService(r){await this._fetchServiceInfo(r),U(this.serviceRasterInfo)&&!this.rasterInfo&&(this.rasterInfo=this.serviceRasterInfo);const i=this.sourceJSON,n=U(this.serviceRasterInfo)?Promise.resolve(this.serviceRasterInfo):this._fetchAuxiliaryRasterInfo({serviceInfo:i,signal:r}).then(a=>(this._set("serviceRasterInfo",a),a)),s=this.renderingRule&&this.renderingRule.functionName.toLowerCase()!=="none"?this.generateRasterInfo(this.renderingRule,{signal:r}):null,o=this._getRasterFunctionInfos();return Promise.all([n,s,o]).then(a=>{a[1]?this._set("rasterInfo",a[1]):this._set("rasterInfo",a[0]),a[2]&&this._set("rasterFunctionInfos",a[2]),this.renderer&&!this._isSupportedRenderer(this.renderer)&&(this.renderer=null,sV.warn("ArcGISImageService","Switching to the default renderer. Renderer applied is not valid for this Imagery Layer")),this._configDefaultRenderer(),this.watch("renderer",()=>this._configDefaultRenderer()),this.watch("renderingRule",u=>{(this.renderer||this._symbolizer||this.popupEnabled&&this.popupTemplate)&&this.generateRasterInfo(u).then(h=>{h&&(this.rasterInfo=h)})});const l=U(this.serviceRasterInfo)&&this.serviceRasterInfo.multidimensionalInfo;l&&this._updateMultidimensionalDefinition(l)})}_combineMosaicRuleWithTimeExtent(r,i){const n=this.timeInfo;if(ce(r)||ce(this.multidimensionalInfo)||ce(i)||ce(n?.startField))return r;const{startField:s}=n;var o;if(r=r.clone(),this._serviceSourceType==="mosaic-dataset")return r.multidimensionalDefinition=(o=r.multidimensionalDefinition)==null?void 0:o.filter(m=>m.dimensionName!==s),this._cleanupMultidimensionalDefinition(r);r.multidimensionalDefinition=r.multidimensionalDefinition||[];const a=r.multidimensionalDefinition.filter(m=>m.dimensionName===s),l=U(i.start)?i.start.getTime():null,u=U(i.end)?i.end.getTime():null,h=l==null||u==null||l===u,d=h?[l||u]:[[l,u]],f=this.version>=10.8;if(a.length)a.forEach(m=>{m.dimensionName===s&&(f?(m.dimensionName=null,m.isSlice=null,m.values=null):(m.isSlice=h,m.values=d))});else if(!f){const m=r.multidimensionalDefinition.filter(g=>g.variableName!=null&&g.dimensionName==null);m.length?m.forEach(g=>{g.dimensionName=s,g.isSlice=h,g.values=d}):r.multidimensionalDefinition.push(new rP({variableName:"",dimensionName:s,isSlice:h,values:d}))}return this._cleanupMultidimensionalDefinition(r)}_cleanupMultidimensionalDefinition(r){return ce(r)?null:(r.multidimensionalDefinition&&(r.multidimensionalDefinition=r.multidimensionalDefinition.filter(i=>!(!i.variableName&&!i.dimensionName)),r.multidimensionalDefinition.length===0&&(r.multidimensionalDefinition=null)),this._serviceSourceType!=="mosaic-dataset"&&r.multidimensionalDefinition==null?null:r)}async _prepareForQuery(r,i){var n;if(await this._fetchCapabilities((n=i)==null?void 0:n.signal),!this.capabilities.operations.supportsQuery)throw new Z("imagery-layer:query-rasters","query operation is not supported on the input image service");return r=U(r)?ua(ni,r):this.createQuery(),i=this._getRequestOptions(i),this.raster&&(i.query={...i.query,raster:this.raster}),{query:r,requestOptions:i}}async _initJobHandler(){if(this._rasterJobHandler.connectionPromise!=null)return this._rasterJobHandler.connectionPromise;const r=new h_e;this._rasterJobHandler.connectionPromise=r.initialize().then(()=>{this._rasterJobHandler.instance=r},()=>null),await this._rasterJobHandler.connectionPromise}_shutdownJobHandler(){this._rasterJobHandler.instance&&this._rasterJobHandler.instance.destroy(),this._rasterJobHandler.instance=null,this._rasterJobHandler.connectionPromise=null,this._rasterJobHandler.refCount=0}_isSupportedRenderer(r){const{rasterInfo:i,renderingRule:n}=this;return r.type==="unique-value"&&n&&n.functionName.toLowerCase()!=="none"&&i.bandCount===1&&["u8","s8"].includes(i.pixelType)||o2e(this.rasterInfo).includes(this.renderer.type)}async _fetchCapabilities(r){return this.capabilities||await this._fetchServiceInfo(r),this.capabilities}async _fetchServiceInfo(r){var i;let n=this.sourceJSON;if(!n){const{data:s,ssl:o}=await Ee(this.parsedUrl.path,{query:this._getQueryParams(),signal:r});n=s,this.sourceJSON=n,o&&(this.url=this.url.replace(/^http:/i,"https:"))}if(((i=n.capabilities)==null?void 0:i.toLowerCase().split(",").map(s=>s.trim()).indexOf("tilesonly"))>-1)throw new Z("imagery-layer:fetch-service-info","use ImageryTileLayer to open tiles-only image services");this.read(n,{origin:"service",url:this.parsedUrl})}_isMosaicDataset(r){var i;return r.serviceSourceType?r.serviceSourceType==="esriImageServiceSourceTypeMosaicDataset":((i=r.fields)==null?void 0:i.length)>0}_isMosaicRuleSupported(r){var i;if(!r)return!1;const n=this._isMosaicDataset(r),s=r.currentVersion>=10.71&&r.hasMultidimensions&&r.timeInfo&&!(r.objectIdField&&((i=r.fields)==null?void 0:i.length)>1);return n||s}_isVectorFieldResampleFunction(r){if(!U(r))return!1;const{functionName:i,functionArguments:n}=r,s=i.toLowerCase()==="resample",o=n?.ResampleType||n?.resampleType;return s&&(o===7||o===10)}_isPicture(){return!this.format||this.format.indexOf("jpg")>-1||this.format.indexOf("png")>-1}_configDefaultRenderer(){if(!this._isPicture()&&!this.pixelFilter){if(!this.bandIds&&this.rasterInfo.bandCount>=3){const n=kK(this.rasterInfo);!n||this.rasterInfo.bandCount===3&&n[0]===0&&n[1]===1&&n[2]===2||(this.bandIds=n)}var r,i;this.renderer||(this.renderer=s2e(this.rasterInfo,{bandIds:this.bandIds,variableName:this.renderingRule?null:(r=this.mosaicRule)==null||(i=r.multidimensionalDefinition)==null?void 0:i[0].variableName})),this._symbolizer?(this._symbolizer.rendererJSON=w2e(this.renderer.toJSON()),this._symbolizer.rasterInfo=this.rasterInfo):this._symbolizer=new T2e({rendererJSON:this.renderer.toJSON(),rasterInfo:this.rasterInfo}),this._symbolizer.bind().success||(this._symbolizer=null)}}_clonePixelData(r){return r==null?r:{extent:r.extent&&r.extent.clone(),pixelBlock:U(r.pixelBlock)&&r.pixelBlock.clone()}}_getQueryParams(r){const{raster:i,viewId:n}=this;return{raster:i,viewId:n,f:"json",...r,...this.customParameters}}_getRequestOptions(r){return{...r,query:{...r?.query,...this.customParameters}}}_decodePixelBlock(r,i,n){return this._rasterJobHandler.instance?this._rasterJobHandler.instance.decode({data:r,options:i}):kj(r,i,n)}async _fetchMultidimensionalInfo(r){var i;const n=await Ee(this.parsedUrl.path+"/multidimensionalInfo",{query:this._getQueryParams(),signal:r}).then(s=>{var o;return(o=s.data)==null?void 0:o.multidimensionalInfo});return(i=n.variables)!=null&&i.length&&n.variables.forEach(s=>{var o;(o=s.statistics)!=null&&o.length&&s.statistics.forEach(a=>{a.avg=a.mean,a.stddev=a.standardDeviation})}),n}async _getRasterFunctionInfos(r){const i=this.sourceJSON.rasterFunctionInfos;return this.serviceRasterInfo?i:i&&this.version>=10.3?i.length===1&&i[0].name.toLowerCase()==="none"?i:Ee(this.parsedUrl.path+"/rasterFunctionInfos",{query:this._getQueryParams(),signal:r}).then(n=>{var s;return(s=n.data)==null?void 0:s.rasterFunctionInfos}):null}_fetchAuxiliaryRasterInfo(r){const i=r&&r.serviceInfo;if(!i)return Promise.reject(new Z("imagery-layer:fetch-metadata","valid serviceInfo is required"));const n=r.renderingRule?JSON.stringify(r.renderingRule.toJSON()):null,s=r.signal,o=!!(i.hasRasterAttributeTable&&this.version>=10.1)&&Ee(this.parsedUrl.path+"/rasterAttributeTable",{query:this._getQueryParams({renderingRule:this.version>=10.1?n:null}),signal:s}).then(d=>Bu.fromJSON(d.data)).catch(()=>null),a=!!(i.hasColormap&&this.version>=10.1)&&Ee(this.parsedUrl.path+"/colormap",{query:this._getQueryParams({renderingRule:this.version>=10.6?n:null}),signal:s}).then(d=>{var f;return(f=d.data)==null?void 0:f.colormap}),l=!!(i.hasHistograms&&this.version>=10.1)&&Ee(this.parsedUrl.path+"/histograms",{query:this._getQueryParams({renderingRule:this.version>=10.1?n:null}),signal:s}).then(d=>{var f;return(f=d.data)==null?void 0:f.histograms}),u=this.version>=10.3&&Ee(this.parsedUrl.path+"/keyProperties",{query:this._getQueryParams({renderingRule:n}),signal:s}).then(d=>d.data).catch(()=>{}),h=!!(i.hasMultidimensions&&this.version>=10.3)&&this._fetchMultidimensionalInfo();return Promise.all([o,a,l,u,h]).then(d=>{let f=null;if(i.minValues&&i.minValues.length===i.bandCount){f=[];for(let w=0;w<i.minValues.length;w++)f.push({min:i.minValues[w],max:i.maxValues[w],avg:i.meanValues[w],stddev:i.stdvValues[w]})}const m=Math.ceil((i.extent.xmax-i.extent.xmin)/i.pixelSizeX-.1),g=Math.ceil((i.extent.ymax-i.extent.ymin)/i.pixelSizeY-.1),b=Fe.fromJSON(i.spatialReference||i.extent.spatialReference);return new Ew({width:m,height:g,bandCount:i.bandCount,extent:nt.fromJSON(i.extent),spatialReference:b,pixelSize:new Ke({x:i.pixelSizeX,y:i.pixelSizeY,spatialReference:b}),pixelType:i.pixelType.toLowerCase(),statistics:f,attributeTable:d[0]||null,colormap:d[1]||null,histograms:d[2]||null,keyProperties:d[3]||{},multidimensionalInfo:d[4]||null})})}_requestArrayBuffer(r){const{imageProps:i,requestAsImageElement:n,signal:s}=r;if(n&&!this.pixelFilter&&i.format&&i.format.indexOf("png")>-1)return Ee(this.parsedUrl.path+"/exportImage",{responseType:"image",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:s}).then(l=>({imageElement:l.data,params:i}));const o=this._initJobHandler(),a=Ee(this.parsedUrl.path+"/exportImage",{responseType:"array-buffer",query:this._getQueryParams({f:"image",...r.imageServiceParameters}),signal:s});return Promise.all([a,o]).then(l=>{const u=l[0].data,h=i.format||"jpgpng";let d=h;if(d!=="bsq"&&d!=="bip"&&(d=t2e(u)),!d)throw new Z("imagery-layer:fetch-image","unsupported format signature "+String.fromCharCode.apply(null,new Uint8Array(u)));const f=h==="gif"||h==="bmp"||h.indexOf("png")>-1&&(d==="png"||d==="jpg"),m={signal:s};return f?kj(u,{useCanvas:!0,...i},m).then(g=>({pixelData:{pixelBlock:g,extent:i.extent},params:i})):this._decodePixelBlock(u,{width:i.width,height:i.height,planes:null,pixelType:null,noDataValue:null,format:h},m).then(g=>({pixelData:{pixelBlock:g,extent:i.extent},params:i}))})}async _generateRasterInfo(r,i){const{data:n}=await Ee(this.parsedUrl.path,{query:this._getQueryParams({renderingRule:r}),...i});return await this._fetchAuxiliaryRasterInfo({serviceInfo:n,renderingRule:r,...i})}_isValidCustomizedMosaicRule(r){return r&&JSON.stringify(r.toJSON())!==JSON.stringify(this._defaultServiceMosaicRule&&this._defaultServiceMosaicRule.toJSON())}_updateMultidimensionalDefinition(r){if(this._isValidCustomizedMosaicRule(this.mosaicRule))return;const i=r.variables[0].dimensions,n="",s=[];for(const o in i)if(i.hasOwnProperty(o)){const a=i[o],l=a.extent;let u=!0,h=[l[0]];a.hasRanges&&a.hasRanges===!0?(u=!1,h=[a.values[0]]):a.name.toLowerCase()==="stdz"&&Math.abs(l[1])<=Math.abs(l[0])&&(h=[l[1]]),s.push(new rP({variableName:n,dimensionName:i[o].name,isSlice:u,values:h}))}if(s.length>0){this.mosaicRule=this.mosaicRule||new ha;const o=this.mosaicRule.multidimensionalDefinition;(!o||o&&o.length<=0)&&(this.mosaicRule.multidimensionalDefinition=s)}}_formatAttributeValue(r,i){if(typeof r=="string"){const n=this.popupTemplate&&this.popupTemplate.fieldInfos,s=this._getFieldInfo(n,i),o=s&&s.format;if(o){let a,l;return r.trim().indexOf(",")>-1?(a=",",l=a+" ",this._formatDelimitedString(r,a,l,o)):r.trim().indexOf(" ")>-1?(a=l=" ",this._formatDelimitedString(r,a,l,o)):this._formatNumberFromString(r,o)}}return r}_getFieldInfo(r,i){if(!r||!r.length||!i)return;const n=i.toLowerCase();let s;return r.some(o=>!(!o.fieldName||o.fieldName.toLowerCase()!==n&&o.fieldName.toLowerCase()!==n.replace(/ /g,"_"))&&(s=o,!0)),s}_formatDelimitedString(r,i,n,s){return r&&i&&n&&s?r.trim().split(i).map(o=>this._formatNumberFromString(o,s)).join(n):r}_formatNumberFromString(r,i){if(!r||!i)return r;const n=Number(r);return isNaN(n)?r:i.format(n)}_processVisibleRastersResponse(r,i){i=i||{};const n=r.value,{templateRRFunctionNames:s,showNoDataRecords:o,returnDomainValues:a,templateFields:l}=i,u=r.processedValues;let h=r.catalogItems&&r.catalogItems.features,d=r.properties&&r.properties.Values&&r.properties.Values.map(x=>x.replace(/ /gi,", "))||[];const f=this.objectIdField||"ObjectId",m=typeof n=="string"&&n.toLowerCase().indexOf("nodata")>-1,g=[];if(n&&!h&&!m){const x={};x[f]=0,d=[n],h=[new xn(this.fullExtent,null,x)]}if(!h)return[];let b,w,_;this._updateResponseFieldNames(h,l),m&&!o&&(h=[]);for(let x=0;x<h.length;x++){if(b=h[x],n!=null){if(w=d[x],_=this.renderingRule&&u&&u.length>0&&s&&s.length>0&&s.indexOf(this.renderingRule.functionName)>-1?u[s.indexOf(this.renderingRule.functionName)]:n,w.toLowerCase()==="nodata"&&!o)continue;const I="Raster.ItemPixelValue",S="Raster.ServicePixelValue";b.attributes[I]=this._formatAttributeValue(w,I),b.attributes[S]=this._formatAttributeValue(_,S),this._updateFeatureWithMagDirValues(b,w);const T=this.fields&&this.fields.length>0;let $=this.renderingRule&&U(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable?T?w:n:_;this.renderingRule||($=T?w:n),this._updateFeatureWithRasterAttributeTableValues(b,$)}if(b.sourceLayer=this,a&&this._updateFeatureWithDomainValues(b),s&&u&&s.length===u.length)for(let I=0;I<s.length;I++){const S="Raster.ServicePixelValue."+s[I];b.attributes[S]=this._formatAttributeValue(u[I],S)}g.push(h[x])}return g}_updateFeatureWithRasterAttributeTableValues(r,i){const n=this.rasterInfo&&this.rasterInfo.attributeTable||U(this.serviceRasterInfo)&&this.serviceRasterInfo.attributeTable,s=n&&n.features;if(!s)return;const o=n.fields,a=o.map(h=>h.name).filter(h=>h.toLowerCase()==="value"),l=a&&a[0];if(!l)return;const u=s.filter(h=>h.attributes[l]===(i!=null?parseInt(i,10):null));u&&u[0]&&o.forEach(h=>{const d=this.rasterAttributeTableFieldPrefix+h.name;r.attributes[d]=this._formatAttributeValue(u[0].attributes[h.name],d)})}_updateFeatureWithMagDirValues(r,i){if(this.serviceDataType!=="esriImageServiceDataTypeVector-UV"&&this.serviceDataType!=="esriImageServiceDataTypeVector-MagDir")return;const n=i.split(/,\s*/).map(u=>parseFloat(u)),s=n.map(u=>[u]),o=n.map(u=>({minValue:u,maxValue:u,noDataValue:null})),a=new qt({height:1,width:1,pixelType:"f32",pixels:s,statistics:o});this.pixelFilter!=null&&this.pixelFilter({pixelBlock:a,extent:new nt(0,0,0,0,this.spatialReference)});const l=this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"?[a.pixels[0][0],a.pixels[1][0]]:s6([a.pixels[0][0],a.pixels[1][0]]);r.attributes["Raster.Magnitude"]=l[0],r.attributes["Raster.Direction"]=l[1]}_updateFeatureWithDomainValues(r){const i=this.fields&&this.fields.filter(n=>n.domain&&n.domain.type==="coded-value");i?.forEach(n=>{const s=r.attributes[n.name];if(s!=null){const o=n.domain.codedValues.filter(a=>a.code===s)[0];o&&(r.attributes[n.name]=o.name)}})}_updateResponseFieldNames(r,i){if(!i||i.length<1)return;const n=this.fieldsIndex;U(n)&&r.forEach(s=>{if(s&&s.attributes){for(const o of i)if(n.has(o)){const a=n.get(o).name;a!==o&&(s.attributes[o]=s.attributes[a],delete s.attributes[a])}}})}_updateRenderingRulesFunctionName(r,i){if(!r||r.length<1)return;if(r==="Raw")return r.replace("Raw","None");const n=r.toLowerCase().replace(/ /gi,"_");return i.has(n)?i.get(n):r}_isRFTJson(r){return r.name&&r.arguments&&r.function&&r.hasOwnProperty("functionType")}_readCapabilities(r){const i=r.capabilities?r.capabilities.toLowerCase().split(",").map(d=>d.trim()):["image","catalog"],{currentVersion:n,advancedQueryCapabilities:s,maxRecordCount:o}=r,a=i.indexOf("image")>-1,l=r.serviceDataType==="esriImageServiceDataTypeElevation",u=!!(r.spatialReference||r.extent&&r.extent.spatialReference),h=i.includes("edit");return{data:{supportsAttachment:!1},operations:{supportsComputeHistograms:a,supportsExportImage:a,supportsIdentify:a,supportsMeasure:i.indexOf("mensuration")>-1&&u,supportsDownload:i.indexOf("download")>-1,supportsQuery:i.indexOf("catalog")>-1&&r.fields&&r.fields.length>0,supportsGetSamples:n>=10.2&&a,supportsProject:n>=10.3&&a,supportsComputeStatisticsHistograms:n>=10.4&&a,supportsQueryBoundary:n>=10.6&&a,supportsCalculateVolume:n>=10.7&&l,supportsComputePixelLocation:n>=10.7&&i.indexOf("catalog")>-1,supportsComputeAngles:n>=10.91,supportsAdd:h,supportsDelete:h,supportsEditing:h,supportsUpdate:h,supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsChangeTracking:!1,supportsQueryAttachments:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:o,maxRecordCountFactor:void 0,supportsStatistics:!(s==null||!s.supportsStatistics),supportsOrderBy:!(s==null||!s.supportsOrderBy),supportsDistinct:!(s==null||!s.supportsDistinct),supportsPagination:!(s==null||!s.supportsPagination),supportsStandardizedQueriesOnly:!(s==null||!s.useStandardizedQueries),supportsPercentileStatistics:!(s==null||!s.supportsPercentileStatistics),supportsCentroid:!(s==null||!s.supportsReturningGeometryCentroid),supportsDistance:!(s==null||!s.supportsQueryWithDistance),supportsExtent:!(s==null||!s.supportsReturningQueryExtent),supportsGeometryProperties:!(s==null||!s.supportsReturningGeometryProperties),supportsHavingClause:!(s==null||!s.supportsHavingClause),supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsMaxRecordCountFactor:!1,supportsSqlExpression:!1,supportsTopFeaturesQuery:!1,supportsQueryByOthers:!1,supportsHistoricMoment:!1,supportsFormatPBF:!1,supportsDisjointSpatialRelationship:!1,supportsCacheHint:!1,standardMaxRecordCount:void 0,tileMaxRecordCount:void 0}}}};return c([p()],t.prototype,"_functionRasterInfos",void 0),c([p()],t.prototype,"_rasterJobHandler",void 0),c([p()],t.prototype,"_symbolizer",void 0),c([p({dependsOn:["_serviceSupportsMosaicRule"]})],t.prototype,"_defaultServiceMosaicRule",void 0),c([ye("_defaultServiceMosaicRule",["defaultMosaicMethod"])],t.prototype,"readDefaultServiceMosaicRule",null),c([p()],t.prototype,"_cachedRendererJson",void 0),c([p({readOnly:!0})],t.prototype,"_serviceSourceType",void 0),c([ye("_serviceSourceType",["serviceSourceType","fields"])],t.prototype,"readServiceSourceType",null),c([p({readOnly:!0})],t.prototype,"_serviceSupportsMosaicRule",void 0),c([ye("_serviceSupportsMosaicRule",["currentVersion","fields"])],t.prototype,"readServiceSupportsMosaicRule",null),c([p()],t.prototype,"rasterAttributeTableFieldPrefix",void 0),c([p({readOnly:!0})],t.prototype,"rasterFunctionNamesIndex",null),c([p()],t.prototype,"adjustAspectRatio",void 0),c([p({readOnly:!0}),ze("serviceRasterInfo.bandCount")],t.prototype,"bandCount",void 0),c([p({type:[jt],json:{write:!0}})],t.prototype,"bandIds",void 0),c([ye("bandIds")],t.prototype,"readBandIds",null),c([p({readOnly:!0,json:{read:!1}})],t.prototype,"capabilities",void 0),c([ye("service","capabilities",["capabilities","currentVersion","serviceDataType"])],t.prototype,"readCapabilities",null),c([p({type:Number})],t.prototype,"compressionQuality",void 0),c([Se("compressionQuality")],t.prototype,"writeCompressionQuality",null),c([p({type:Number})],t.prototype,"compressionTolerance",void 0),c([Se("compressionTolerance")],t.prototype,"writeCompressionTolerance",null),c([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([p({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],t.prototype,"definitionExpression",void 0),c([p({readOnly:!0,constructOnly:!0})],t.prototype,"exportImageServiceParameters",void 0),c([p()],t.prototype,"rasterInfo",void 0),c([p({readOnly:!0,type:[wo]})],t.prototype,"fields",void 0),c([p({readOnly:!0})],t.prototype,"fieldsIndex",null),c([p({type:["png","png8","png24","png32","jpg","bmp","gif","jpgpng","lerc","tiff"],json:{write:!0}})],t.prototype,"format",null),c([ye("service","format",["serviceDataType"])],t.prototype,"readFormat",null),c([p({type:nt})],t.prototype,"fullExtent",void 0),c([p({readOnly:!0})],t.prototype,"hasMultidimensions",void 0),c([p({json:{read:{source:"maxImageHeight"}}})],t.prototype,"imageMaxHeight",void 0),c([p({json:{read:{source:"maxImageWidth"}}})],t.prototype,"imageMaxWidth",void 0),c([p({type:String,json:{type:Yd.jsonValues,read:Yd.read,write:Yd.write}})],t.prototype,"interpolation",void 0),c([p()],t.prototype,"minScale",void 0),c([ye("service","minScale")],t.prototype,"readMinScale",null),c([p()],t.prototype,"maxScale",void 0),c([ye("service","maxScale")],t.prototype,"readMaxScale",null),c([p({type:ha})],t.prototype,"mosaicRule",null),c([ye("mosaicRule",["mosaicRule","defaultMosaicMethod"])],t.prototype,"readMosaicRule",null),c([Se("mosaicRule")],t.prototype,"writeMosaicRule",null),c([p({readOnly:!0}),ze("serviceRasterInfo.multidimensionalInfo")],t.prototype,"multidimensionalInfo",void 0),c([p({json:{type:jt}})],t.prototype,"noData",void 0),c([Se("noData")],t.prototype,"writeNoData",null),c([p({type:String,json:{type:$w.jsonValues,read:$w.read,write:$w.write}})],t.prototype,"noDataInterpretation",void 0),c([p({type:String,readOnly:!0,json:{read:{source:["fields"]}}})],t.prototype,"objectIdField",void 0),c([ye("objectIdField")],t.prototype,"readObjectIdField",null),c([p({})],t.prototype,"geometryType",void 0),c([p({})],t.prototype,"typeIdField",void 0),c([p({})],t.prototype,"types",void 0),c([p({readOnly:!0})],t.prototype,"parsedUrl",null),c([p({readOnly:!0}),ze("serviceRasterInfo.pixelSize.x")],t.prototype,"pixelSizeX",void 0),c([p({readOnly:!0}),ze("serviceRasterInfo.pixelSize.y")],t.prototype,"pixelSizeY",void 0),c([p({type:Function})],t.prototype,"pixelFilter",void 0),c([p()],t.prototype,"raster",void 0),c([p()],t.prototype,"viewId",void 0),c([p({types:QO,json:{name:"layerDefinition.drawingInfo.renderer",origins:{"web-scene":{types:eP,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:r=>({enabled:r&&r.type!=="vector-field"&&r.type!=="animated-flow"})}}}}})],t.prototype,"renderer",void 0),c([ye("renderer")],t.prototype,"readRenderer",null),c([Se("renderer")],t.prototype,"writeRenderer",null),c([p(ww)],t.prototype,"opacity",void 0),c([p({readOnly:!0}),ze("serviceRasterInfo.attributeTable")],t.prototype,"rasterAttributeTable",void 0),c([p({readOnly:!0})],t.prototype,"rasterFields",null),c([p({constructOnly:!0})],t.prototype,"rasterFunctionInfos",void 0),c([p({type:ki})],t.prototype,"renderingRule",null),c([ye("renderingRule",["renderingRule","rasterFunctionInfos"])],t.prototype,"readRenderingRule",null),c([Se("renderingRule")],t.prototype,"writeRenderingRule",null),c([p()],t.prototype,"serviceDataType",void 0),c([p({readOnly:!0,type:Fe})],t.prototype,"spatialReference",void 0),c([ye("spatialReference",["spatialReference","extent"])],t.prototype,"readSpatialReference",null),c([p({json:{type:e5.jsonValues}})],t.prototype,"pixelType",void 0),c([ye("pixelType")],t.prototype,"readPixelType",null),c([Se("pixelType")],t.prototype,"writePixelType",null),c([p({constructOnly:!0,type:Ew})],t.prototype,"serviceRasterInfo",void 0),c([p()],t.prototype,"sourceJSON",void 0),c([p(_2)],t.prototype,"url",void 0),c([p({readOnly:!0})],t.prototype,"version",void 0),c([ye("version",["currentVersion","fields","timeInfo"])],t.prototype,"readVersion",null),t=c([N("esri.layers.mixins.ArcGISImageService")],t),t};let na=class extends by(x$(Kv(wy(Zv(Yv(Rxe(w$(d$(Ip(Sh)))))))))){constructor(...e){super(...e),this.legendEnabled=!0,this.isReference=null,this.operationalLayerType="ArcGISImageServiceLayer",this.popupEnabled=!0,this.popupTemplate=null,this.type="imagery"}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"]},e).catch(wh).then(()=>this._fetchService(t))),Promise.resolve(this)}writeOperationalLayerType(e,t,r){var i;const n=((i=this.renderer)==null?void 0:i.type)==="vector-field";t[r]=n?"ArcGISImageServiceVectorLayer":"ArcGISImageServiceLayer"}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(e){const t=this.rasterFields,r=this.title,i=new Set;let n=!1,s=!1;this.capabilities&&(n=this.capabilities.operations.supportsQuery&&this.fields&&this.fields.length>0,s=n&&(this.serviceDataType==="esriImageServiceDataTypeVector-UV"||this.serviceDataType==="esriImageServiceDataTypeVector-MagDir"));const o=new Set;n&&(o.add("raster.itempixelvalue"),s&&o.add("raster.magnitude").add("raster.direction"));for(const a of t){const l=a.name.toLowerCase();o.has(l)||l.indexOf("raster.servicepixelvalue.")>-1||i.add(a.name)}return QN({fields:t,title:r},{...e,visibleFieldNames:i})}queryFeatures(e,t){return this.queryRasters(e,t).then(r=>{if(r!=null&&r.features)for(const i of r.features)i.layer=i.sourceLayer=this;return r})}queryFeatureCount(e,t){return this.queryRasterCount(e,t)}redraw(){this.emit("redraw")}};c([p(HN)],na.prototype,"legendEnabled",void 0),c([p({type:["show","hide"]})],na.prototype,"listMode",void 0),c([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],na.prototype,"isReference",void 0),c([p({type:["ArcGISImageServiceLayer"],json:{origins:{"web-map":{type:["ArcGISImageServiceLayer","ArcGISImageServiceVectorLayer"],read:!1,write:{target:"layerType",ignoreOrigin:!0}}}}})],na.prototype,"operationalLayerType",void 0),c([Se("web-map","operationalLayerType")],na.prototype,"writeOperationalLayerType",null),c([p(_$)],na.prototype,"popupEnabled",void 0),c([p({type:fy,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],na.prototype,"popupTemplate",void 0),c([p({readOnly:!0})],na.prototype,"defaultPopupTemplate",null),c([p({readOnly:!0,json:{read:!1}})],na.prototype,"type",void 0),na=c([N("esri.layers.ImageryLayer")],na);const Lxe=na;var Qrt=Object.freeze(Object.defineProperty({__proto__:null,default:Lxe},Symbol.toStringTag,{value:"Module"}));class yI{constructor(t,r,i=""){this.major=t,this.minor=r,this._context=i}lessThan(t,r){return this.major<t||t===this.major&&this.minor<r}since(t,r){return!this.lessThan(t,r)}validate(t){if(this.major!==t.major){const r=this._context&&this._context+":",i=this._context&&this._context+" ";throw new Z(r+"unsupported-version",`Required major ${i}version is '${this.major}', but got '\${version.major}.\${version.minor}'`,{version:t})}}clone(){return new yI(this.major,this.minor,this._context)}static parse(t,r=""){const[i,n]=t.split("."),s=/^\s*\d+\s*$/;if(!i||!i.match||!i.match(s))throw new Z((r&&r+":")+"invalid-version","Expected major version to be a number, but got '${version}'",{version:t});if(!n||!n.match||!n.match(s))throw new Z((r&&r+":")+"invalid-version","Expected minor version to be a number, but got '${version}'",{version:t});const o=parseInt(i,10),a=parseInt(n,10);return new yI(o,a,r)}}const yX=e=>{let t=class extends e{constructor(){super(...arguments),this.capabilities=void 0,this.copyright=null,this.fullExtent=null,this.legendEnabled=!0,this.spatialReference=null,this.version=null}readCapabilities(r,i){const n=i.capabilities&&i.capabilities.split(",").map(b=>b.toLowerCase().trim());if(!n)return{operations:{supportsQuery:!1,supportsExportMap:!1,supportsExportTiles:!1,supportsTileMap:!1},exportMap:null,exportTiles:null};const s=this.type,o=n.indexOf("query")!==-1,a=n.indexOf("map")!==-1,l=!!i.exportTilesAllowed,u=n.indexOf("tilemap")!==-1,h=s!=="tile"&&!!i.supportsDynamicLayers,d=s!=="tile"&&(!i.tileInfo||h),f=s!=="tile"&&(!i.tileInfo||h),m=s!=="tile",g=!!i.cimVersion&&yI.parse(i.cimVersion).since(1,4);return{operations:{supportsQuery:o,supportsExportMap:a,supportsExportTiles:l,supportsTileMap:u},exportMap:a?{supportsArcadeExpressionForLabeling:g,supportsSublayersChanges:m,supportsDynamicLayers:h,supportsSublayerVisibility:d,supportsSublayerDefinitionExpression:f}:null,exportTiles:l?{maxExportTilesCount:+i.maxExportTilesCount}:null}}readVersion(r,i){let n=i.currentVersion;return n||(n=i.hasOwnProperty("capabilities")||i.hasOwnProperty("tables")?10:i.hasOwnProperty("supportedImageFormatTypes")?9.31:9.3),n}async fetchSublayerInfo(r,i){return await this.fetchAllLayersAndTables(i),this._allLayersAndTablesMap.get(r)}async fetchAllLayersAndTables(r){await this.load(r),this._allLayersAndTablesPromise||(this._allLayersAndTablesPromise=Ee(Kr(this.url).path+"/layers",{responseType:"json",query:{f:"json",...this.customParameters,token:this.apiKey}}).then(n=>{this._allLayersAndTablesMap=new Map;for(const s of n.data.layers)this._allLayersAndTablesMap.set(s.id,s);return{result:n.data}},n=>({error:n})));const i=await this._allLayersAndTablesPromise;if($r(r),"result"in i)return i.result;throw i.error}};return c([p({readOnly:!0})],t.prototype,"capabilities",void 0),c([ye("service","capabilities",["capabilities","exportTilesAllowed","maxExportTilesCount","supportsDynamicLayers","tileInfo"])],t.prototype,"readCapabilities",null),c([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([p({type:nt})],t.prototype,"fullExtent",void 0),c([p(FY)],t.prototype,"id",void 0),c([p({type:Boolean,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend"}}})],t.prototype,"legendEnabled",void 0),c([p(_$)],t.prototype,"popupEnabled",void 0),c([p({type:Fe})],t.prototype,"spatialReference",void 0),c([p()],t.prototype,"version",void 0),c([ye("version",["currentVersion","capabilities","tables","supportedImageFormatTypes"])],t.prototype,"readVersion",null),t=c([N("esri.layers.mixins.ArcGISMapService")],t),t};let $g=class extends ro(Je){constructor(e){super(e),this.getCollections=null}initialize(){this.handles.add(BH(()=>this.refresh()))}destroy(){this.getCollections=null}refresh(){const e=U(this.getCollections)?this.getCollections():null;if(ce(e))return void this.removeAll();let t=0;for(const r of e)U(r)&&(t=this._processCollection(t,r));this.splice(t,this.length)}_createNewInstance(e){return new Je(e)}_processCollection(e,t){if(!t)return e;const r=this.itemFilterFunction?this.itemFilterFunction:i=>!!i;for(const i of t)if(i){if(r(i)){const n=this.indexOf(i,e);n>=0?n!==e&&this.reorder(i,e):this.add(i,e),++e}if(this.getChildrenFunction){const n=this.getChildrenFunction(i);if(Array.isArray(n))for(const s of n)e=this._processCollection(e,s);else e=this._processCollection(e,n)}}return e}};c([p()],$g.prototype,"getCollections",void 0),c([p()],$g.prototype,"getChildrenFunction",void 0),c([p()],$g.prototype,"itemFilterFunction",void 0),$g=c([N("esri.core.CollectionFlattener")],$g);const Kd=$g;var WM;function t5(e){return e&&e.type==="esriSMS"}function r5(e,t,r){var i;const n=this.originIdOf(t)>=Ds(r.origin);return{ignoreOrigin:!0,allowNull:n,enabled:!!r&&((i=r.layer)==null?void 0:i.type)==="map-image"&&(r.writeSublayerStructure||n)}}function oV(e,t,r){var i;return{enabled:!!r&&((i=r.layer)==null?void 0:i.type)==="tile"&&this._isOverridden(t)}}function qo(e,t,r){return{ignoreOrigin:!0,enabled:r&&r.writeSublayerStructure||!1}}function Gx(e,t,r){return{ignoreOrigin:!0,enabled:!!r&&(r.writeSublayerStructure||this.originIdOf(t)>=Ds(r.origin))}}const i5=Te.getLogger("esri.layers.support.Sublayer");let Nxe=0;const Mf=new Set;Mf.add("layer"),Mf.add("parent"),Mf.add("loaded"),Mf.add("loadStatus"),Mf.add("loadError"),Mf.add("loadWarnings");let gt=WM=class extends ro(Ip(XT(Lo))){constructor(e){super(e),this.capabilities=void 0,this.fields=null,this.fullExtent=null,this.globalIdField=null,this.legendEnabled=!0,this.objectIdField=null,this.popupEnabled=!0,this.popupTemplate=null,this.sourceJSON=null,this.title=null,this.typeIdField=null,this.types=null}async load(e){return this.addResolvingPromise((async()=>{var t;if(!this.layer&&!this.url)throw new Z("sublayer:missing-layer","Sublayer can't be loaded without being part of a layer",{sublayer:this});let r=null;if(!this.layer||this.originIdOf("url")>2||((t=this.source)==null?void 0:t.type)==="data-layer")r=(await Ee(this.url,{responseType:"json",query:{f:"json"},...e})).data;else{var i;let n=this.id;((i=this.source)==null?void 0:i.type)==="map-layer"&&(n=this.source.mapLayerId),r=await this.layer.fetchSublayerInfo(n,e)}r&&(this.sourceJSON=r,this.read({layerDefinition:r},{origin:"service"}))})()),this}readCapabilities(e,t){const r=(e=(t=t.layerDefinition||t).capabilities||e)?e.toLowerCase().split(",").map(i=>i.trim()):[];return{exportMap:{supportsModification:!!t.canModifyLayer},operations:{supportsQuery:r.indexOf("query")!==-1}}}set definitionExpression(e){this._setAndNotifyLayer("definitionExpression",e)}get fieldsIndex(){return new XN(this.fields||[])}set floorInfo(e){this._setAndNotifyLayer("floorInfo",e)}readGlobalIdFieldFromService(e,t){if((t=t.layerDefinition||t).globalIdField)return t.globalIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeGlobalID")return r.name}}get id(){const e=this._get("id");return e??Nxe++}set id(e){this._get("id")!==e&&(this.get("layer.capabilities.exportMap.supportsDynamicLayers")!==!1?this._set("id",e):this._logLockedError("id","capability not available 'layer.capabilities.exportMap.supportsDynamicLayers'"))}set labelingInfo(e){this._setAndNotifyLayer("labelingInfo",e)}writeLabelingInfo(e,t,r,i){e&&e.length&&(t.layerDefinition={drawingInfo:{labelingInfo:e.map(n=>n.write({},i))}})}set labelsVisible(e){this._setAndNotifyLayer("labelsVisible",e)}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}set listMode(e){this._set("listMode",e)}set minScale(e){this._setAndNotifyLayer("minScale",e)}readMinScale(e,t){return t.minScale||t.layerDefinition&&t.layerDefinition.minScale||0}set maxScale(e){this._setAndNotifyLayer("maxScale",e)}readMaxScale(e,t){return t.maxScale||t.layerDefinition&&t.layerDefinition.maxScale||0}readObjectIdFieldFromService(e,t){if((t=t.layerDefinition||t).objectIdField)return t.objectIdField;if(t.fields){for(const r of t.fields)if(r.type==="esriFieldTypeOID")return r.name}}set opacity(e){this._setAndNotifyLayer("opacity",e)}readOpacity(e,t){const r=t.layerDefinition;return 1-.01*(r.transparency!=null?r.transparency:r.drawingInfo.transparency)}writeOpacity(e,t,r,i){t.layerDefinition={drawingInfo:{transparency:100-100*e}}}writeParent(e,t){this.parent&&this.parent!==this.layer?t.parentLayerId=GT(this.parent.id):t.parentLayerId=-1}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){if(e){for(const t of e.getSymbols())if(z0(t)){i5.warn("Sublayer renderer should use 2D symbols");break}}this._setAndNotifyLayer("renderer",e)}get source(){return this._get("source")||new Kc({mapLayerId:this.id})}set source(e){this._setAndNotifyLayer("source",e)}set sublayers(e){this._handleSublayersChange(e,this._get("sublayers")),this._set("sublayers",e)}castSublayers(e){return br(Je.ofType(WM),e)}writeSublayers(e,t,r){this.get("sublayers.length")&&(t[r]=this.sublayers.map(i=>i.id).toArray().reverse())}readTypeIdField(e,t){let r=(t=t.layerDefinition||t).typeIdField;if(r&&t.fields){r=r.toLowerCase();const i=t.fields.find(n=>n.name.toLowerCase()===r);i&&(r=i.name)}return null}get url(){var e,t;const r=(e=(t=this.layer)==null?void 0:t.parsedUrl)!=null?e:this._lastParsedUrl,i=this.source;if(!r)return null;if(this._lastParsedUrl=r,i?.type==="map-layer")return`${r.path}/${i.mapLayerId}`;const n={layer:JSON.stringify({source:this.source})};return`${r.path}/dynamicLayer?${lp(n)}`}set url(e){e?this._override("url",e):this._clearOverride("url")}set visible(e){this._setAndNotifyLayer("visible",e)}writeVisible(e,t,r,i){t[r]=this.getAtOrigin("defaultVisibility","service")||e}clone(){const{store:e}=jn(this),t=new WM;return jn(t).store=e.clone(Mf),this.commitProperty("url"),t._lastParsedUrl=this._lastParsedUrl,t}createPopupTemplate(e){return QN(this,e)}createQuery(){return new ni({returnGeometry:!0,where:this.definitionExpression||"1=1"})}async createFeatureLayer(){var e,t;if(this.hasOwnProperty("sublayers"))return null;const r=(e=this.layer)==null?void 0:e.parsedUrl,i=new(await ae(()=>Promise.resolve().then(function(){return zbe}),void 0)).default({url:r.path});return r&&this.source&&(this.source.type==="map-layer"?i.layerId=this.source.mapLayerId:i.dynamicDataSource=this.source),this.layer.refreshInterval!=null&&(i.refreshInterval=this.layer.refreshInterval),this.definitionExpression&&(i.definitionExpression=this.definitionExpression),this.floorInfo&&(i.floorInfo=ie(this.floorInfo)),this.originIdOf("labelingInfo")>2&&(i.labelingInfo=ie(this.labelingInfo)),this.originIdOf("labelsVisible")>0&&(i.labelsVisible=this.labelsVisible),this.originIdOf("legendEnabled")>0&&(i.legendEnabled=this.legendEnabled),this.originIdOf("visible")>0&&(i.visible=this.visible),this.originIdOf("minScale")>0&&(i.minScale=this.minScale),this.originIdOf("maxScale")>0&&(i.maxScale=this.maxScale),this.originIdOf("opacity")>0&&(i.opacity=this.opacity),this.originIdOf("popupTemplate")>0&&(i.popupTemplate=ie(this.popupTemplate)),this.originIdOf("renderer")>2&&(i.renderer=ie(this.renderer)),((t=this.source)==null?void 0:t.type)==="data-layer"&&(i.dynamicDataSource=this.source.clone()),this.originIdOf("title")>0&&(i.title=this.title),this.layer.type==="map-image"&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),this.layer.type==="tile"&&this.layer.originIdOf("customParameters")>0&&(i.customParameters=this.layer.customParameters),i}getField(e){return this.fieldsIndex.get(e)}getFeatureType(e){const{typeIdField:t,types:r}=this;if(!t||!e)return null;const i=e.attributes?e.attributes[t]:void 0;if(i==null)return null;let n=null;return r.some(s=>{const{id:o}=s;return o!=null&&(o.toString()===i.toString()&&(n=s),!!n)}),n}getFieldDomain(e,t){const r=t&&t.feature,i=this.getFeatureType(r);if(i){const n=i.domains&&i.domains[e];if(n&&n.type!=="inherited")return n}return this._getLayerDomain(e)}async queryFeatures(e=this.createQuery(),t){var r,i,n,s;if(await this.load(),!this.get("capabilities.operations.supportsQuery"))throw new Z("Sublayer.queryFeatures","this layer doesn't support queries.");const[{executeQuery:o},{default:a}]=await Promise.all([ae(()=>Promise.resolve().then(function(){return oxe}),void 0),ae(()=>Promise.resolve().then(function(){return z0e}),void 0)]),l=await o(this.url,ni.from(e),(r=(i=this.layer)==null?void 0:i.spatialReference)!=null?r:null,{...t,query:{...(n=this.layer)==null?void 0:n.customParameters,token:(s=this.layer)==null?void 0:s.apiKey}}),u=a.fromJSON(l.data);if(u!=null&&u.features)for(const h of u.features)h.sourceLayer=this;return u}toExportImageJSON(e){var t;const r={id:this.id,source:((t=this.source)==null?void 0:t.toJSON())||{mapLayerId:this.id,type:"mapLayer"}};if(this.definitionExpression){const s=U(e)?NK(e,this):this.definitionExpression;r.definitionExpression=s}else U(e)&&(r.definitionExpression=e);const i=["renderer","labelingInfo","opacity","labelsVisible"].reduce((s,o)=>(s[o]=this.originIdOf(o),s),{});if(Object.keys(i).some(s=>i[s]>2)){const s=r.drawingInfo={};i.renderer>2&&(s.renderer=this.renderer?this.renderer.toJSON():null),i.labelsVisible>2&&(s.showLabels=this.labelsVisible),this.labelsVisible&&i.labelingInfo>2&&(s.labelingInfo=this.labelingInfo?this.labelingInfo.map(o=>o.write({},{origin:"service",layer:this.layer})):null,s.showLabels=!0),i.opacity>2&&(s.transparency=100-100*this.opacity),this._assignDefaultSymbolColors(s.renderer)}return r}_assignDefaultSymbolColors(e){this._forEachSimpleMarkerSymbols(e,t=>{t.color||t.style!=="esriSMSX"&&t.style!=="esriSMSCross"||(t.outline&&t.outline.color?t.color=t.outline.color:t.color=[0,0,0,0])})}_forEachSimpleMarkerSymbols(e,t){if(e){const r="uniqueValueInfos"in e?e.uniqueValueInfos:"classBreakInfos"in e?e.classBreakInfos:[];for(const i of r)t5(i.symbol)&&t(i.symbol);"symbol"in e&&t5(e.symbol)&&t(e.symbol),"defaultSymbol"in e&&t5(e.defaultSymbol)&&t(e.defaultSymbol)}}_setAndNotifyLayer(e,t){const r=this.layer,i=this._get(e);let n,s;switch(e){case"definitionExpression":case"floorInfo":n="supportsSublayerDefinitionExpression";case"minScale":case"maxScale":case"visible":n="supportsSublayerVisibility";break;case"labelingInfo":case"labelsVisible":case"opacity":case"renderer":case"source":n="supportsDynamicLayers",s="supportsModification"}const o=jn(this).getDefaultOrigin();if(o!=="service"){if(n&&this.get(`layer.capabilities.exportMap.${n}`)===!1)return void this._logLockedError(e,`capability not available 'layer.capabilities.exportMap.${n}'`);if(s&&this.get(`capabilities.exportMap.${s}`)===!1)return void this._logLockedError(e,`capability not available 'capabilities.exportMap.${s}'`)}e!=="source"||this.loadStatus==="not-loaded"?(this._set(e,t),o!=="service"&&i!==t&&r&&r.emit&&r.emit("sublayer-update",{propertyName:e,target:this})):this._logLockedError(e,"'source' can't be changed after calling sublayer.load()")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null,r.layer=null}),this.handles.removeAll()),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this.handles.add([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null}),e.on("before-changes",r=>{const i=this.get("layer.capabilities.exportMap.supportsSublayersChanges");i==null||i||(i5.error(new Z("sublayer:sublayers-non-modifiable","Sublayer can't be added, moved, or removed from the layer's sublayers",{sublayer:this,layer:this.layer})),r.preventDefault())})]))}_logLockedError(e,t){i5.error(new Z("sublayer:locked",`Property '${e}' can't be changed on Sublayer from the layer '${this.layer.id}'`,{reason:t,sublayer:this,layer:this.layer}))}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};gt.test={isMapImageLayerOverridePolicy:e=>e===qo||e===r5,isTileImageLayerOverridePolicy:e=>e===oV},c([p({readOnly:!0})],gt.prototype,"capabilities",void 0),c([ye("service","capabilities",["layerDefinition.canModifyLayer","layerDefinition.capabilities"])],gt.prototype,"readCapabilities",null),c([p({type:String,value:null,json:{name:"layerDefinition.definitionExpression",write:{allowNull:!0,overridePolicy:r5}}})],gt.prototype,"definitionExpression",null),c([p({type:[wo],json:{origins:{service:{read:{source:"layerDefinition.fields"}}}}})],gt.prototype,"fields",void 0),c([p({readOnly:!0})],gt.prototype,"fieldsIndex",null),c([p({type:ZY,value:null,json:{name:"layerDefinition.floorInfo",read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo",overridePolicy:r5},origins:{"web-scene":{read:!1,write:!1}}}})],gt.prototype,"floorInfo",null),c([p({type:nt,json:{read:{source:"layerDefinition.extent"}}})],gt.prototype,"fullExtent",void 0),c([p({type:String})],gt.prototype,"globalIdField",void 0),c([ye("service","globalIdField",["layerDefinition.globalIdField","layerDefinition.fields"])],gt.prototype,"readGlobalIdFieldFromService",null),c([p({type:jt,json:{write:{ignoreOrigin:!0}}})],gt.prototype,"id",null),c([p({value:null,type:[S$],json:{read:{source:"layerDefinition.drawingInfo.labelingInfo"},write:{target:"layerDefinition.drawingInfo.labelingInfo",overridePolicy:qo}}})],gt.prototype,"labelingInfo",null),c([Se("labelingInfo")],gt.prototype,"writeLabelingInfo",null),c([p({type:Boolean,value:!0,json:{read:{source:"layerDefinition.drawingInfo.showLabels"},write:{target:"layerDefinition.drawingInfo.showLabels",overridePolicy:qo}}})],gt.prototype,"labelsVisible",null),c([p({value:null})],gt.prototype,"layer",null),c([p({type:Boolean,value:!0,json:{origins:{service:{read:{enabled:!1}}},read:{source:"showLegend"},write:{target:"showLegend",overridePolicy:Gx}}})],gt.prototype,"legendEnabled",void 0),c([p({type:["show","hide","hide-children"],value:"show",json:{read:!1,write:!1,origins:{"web-scene":{read:!0,write:!0}}}})],gt.prototype,"listMode",null),c([p({type:Number,value:0,json:{write:{overridePolicy:qo}}})],gt.prototype,"minScale",null),c([ye("minScale",["minScale","layerDefinition.minScale"])],gt.prototype,"readMinScale",null),c([p({type:Number,value:0,json:{write:{overridePolicy:qo}}})],gt.prototype,"maxScale",null),c([ye("maxScale",["maxScale","layerDefinition.maxScale"])],gt.prototype,"readMaxScale",null),c([p({type:String})],gt.prototype,"objectIdField",void 0),c([ye("service","objectIdField",["layerDefinition.objectIdField","layerDefinition.fields"])],gt.prototype,"readObjectIdFieldFromService",null),c([p({type:Number,value:1,json:{write:{target:"layerDefinition.drawingInfo.transparency",overridePolicy:qo}}})],gt.prototype,"opacity",null),c([ye("opacity",["layerDefinition.drawingInfo.transparency","layerDefinition.transparency"])],gt.prototype,"readOpacity",null),c([Se("opacity")],gt.prototype,"writeOpacity",null),c([p({json:{type:jt,write:{target:"parentLayerId",writerEnsuresNonNull:!0,overridePolicy:qo}}})],gt.prototype,"parent",void 0),c([Se("parent")],gt.prototype,"writeParent",null),c([p({type:Boolean,value:!0,json:{read:{source:"disablePopup",reader:(e,t)=>!t.disablePopup},write:{target:"disablePopup",overridePolicy:Gx,writer(e,t,r){t[r]=!e}}}})],gt.prototype,"popupEnabled",void 0),c([p({type:fy,json:{read:{source:"popupInfo"},write:{target:"popupInfo",overridePolicy:Gx}}})],gt.prototype,"popupTemplate",void 0),c([p({readOnly:!0})],gt.prototype,"defaultPopupTemplate",null),c([p({types:RN,value:null,json:{name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:qo},origins:{"web-scene":{types:KZ,name:"layerDefinition.drawingInfo.renderer",write:{overridePolicy:qo}}}}})],gt.prototype,"renderer",null),c([p({types:{key:"type",base:null,typeMap:{"data-layer":ss,"map-layer":Kc}},cast(e){if(e){if("mapLayerId"in e)return ua(Kc,e);if("dataSource"in e)return ua(ss,e)}return e},json:{name:"layerDefinition.source",write:{overridePolicy:qo}}})],gt.prototype,"source",null),c([p()],gt.prototype,"sourceJSON",void 0),c([p({value:null,json:{type:[jt],write:{target:"subLayerIds",allowNull:!0,overridePolicy:qo}}})],gt.prototype,"sublayers",null),c([Ct("sublayers")],gt.prototype,"castSublayers",null),c([Se("sublayers")],gt.prototype,"writeSublayers",null),c([p({type:String,json:{name:"name",write:{overridePolicy:Gx}}})],gt.prototype,"title",void 0),c([p({type:String})],gt.prototype,"typeIdField",void 0),c([ye("typeIdField",["layerDefinition.typeIdField"])],gt.prototype,"readTypeIdField",null),c([p({type:[KN],json:{origins:{service:{read:{source:"layerDefinition.types"}}}}})],gt.prototype,"types",void 0),c([p({type:String,json:{read:{source:"layerUrl"},write:{target:"layerUrl",overridePolicy:oV}}})],gt.prototype,"url",null),c([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"},write:{target:"defaultVisibility",overridePolicy:qo}}})],gt.prototype,"visible",null),c([Se("visible")],gt.prototype,"writeVisible",null),gt=WM=c([N("esri.layers.support.Sublayer")],gt);const S2=gt;function aV(e,t,r){return t.flatten(({sublayers:n})=>n).length!==e.length?!0:!!e.some(n=>n.originIdOf("minScale")>r||n.originIdOf("maxScale")>r||n.originIdOf("renderer")>r||n.originIdOf("labelingInfo")>r||n.originIdOf("opacity")>r||n.originIdOf("labelsVisible")>r||n.originIdOf("source")>r)||!gX(e,t)}function Dxe(e,t,r){return!!e.some(i=>{const n=i.source;return!(!n||n.type==="map-layer"&&n.mapLayerId===i.id&&(!n.gdbVersion||n.gdbVersion===r.gdbVersion))||i.originIdOf("renderer")>2||i.originIdOf("labelingInfo")>2||i.originIdOf("opacity")>2||i.originIdOf("labelsVisible")>2})||!gX(e,t)}function gX(e,t){if(!e||!e.length)return!0;const r=t.slice().reverse().flatten(({sublayers:s})=>s&&s.toArray().reverse()).map(s=>s.id).toArray();if(e.length>r.length)return!1;let i=0;const n=r.length;for(const{id:s}of e){for(;i<n&&r[i]!==s;)i++;if(i>=n)return!1}return!0}function Fxe(e){return!!e&&e.some(t=>t.minScale!=null||t.layerDefinition&&t.layerDefinition.minScale!=null)}const jxe=Te.getLogger("esri.layers.TileLayer");function Vxe(e,t){const r=[],i={};return e&&e.forEach(n=>{const s=new S2;if(s.read(n,t),i[s.id]=s,n.parentLayerId!=null&&n.parentLayerId!==-1){const o=i[n.parentLayerId];o.sublayers||(o.sublayers=[]),o.sublayers.unshift(s)}else r.unshift(s)}),r}const n5=Je.ofType(S2);function vX(e,t){e&&e.forEach(r=>{t(r),r.sublayers&&r.sublayers.length&&vX(r.sublayers,t)})}const bX=e=>{let t=class extends e{constructor(...r){super(...r),this.allSublayers=new Kd({getCollections:()=>[this.sublayers],getChildrenFunction:i=>i.sublayers}),this.sublayersSourceJSON={2:{},3:{},4:{},5:{}},this.handles.add(this.watch("sublayers",(i,n)=>this._handleSublayersChange(i,n),!0))}readSublayers(r,i){if(!i||!r)return;const{sublayersSourceJSON:n}=this,s=Ds(i.origin);if(s<2||(n[s]={context:i,visibleLayers:r.visibleLayers||n[s].visibleLayers,layers:r.layers||n[s].layers},s>2))return;this._set("serviceSublayers",this.createSublayersForOrigin("service").sublayers);const{sublayers:o,origin:a}=this.createSublayersForOrigin("web-document"),l=jn(this);l.setDefaultOrigin(a),this._set("sublayers",new n5(o)),l.setDefaultOrigin("user")}findSublayerById(r){return this.allSublayers.find(i=>i.id===r)}createServiceSublayers(){return this.createSublayersForOrigin("service").sublayers}createSublayersForOrigin(r){const i=Ds(r==="web-document"?"web-map":r);let n=2,s=this.sublayersSourceJSON[2].layers,o=this.sublayersSourceJSON[2].context,a=null;const l=[3,4,5].filter(g=>g<=i);for(const g of l){const b=this.sublayersSourceJSON[g];Fxe(b.layers)&&(n=g,s=b.layers,o=b.context,b.visibleLayers&&(a={visibleLayers:b.visibleLayers,context:b.context}))}const u=[3,4,5].filter(g=>g>n&&g<=i);let h=null;for(const g of u){const{layers:b,visibleLayers:w,context:_}=this.sublayersSourceJSON[g];b&&(h={layers:b,context:_}),w&&(a={visibleLayers:w,context:_})}const d=Vxe(s,o),f=new Map,m=new Set;if(h)for(const g of h.layers)f.set(g.id,g);if(a)for(const g of a.visibleLayers)m.add(g);return vX(d,g=>{h&&g.read(f.get(g.id),h.context),a&&g.read({defaultVisibility:m.has(g.id)},a.context)}),{origin:Kw(n),sublayers:new n5({items:d})}}read(r,i){super.read(r,i),this.readSublayers(r,i)}_handleSublayersChange(r,i){i&&(i.forEach(n=>{n.parent=null,n.layer=null}),this.handles.remove("sublayers-owner")),r&&(r.forEach(n=>{n.parent=this,n.layer=this}),this.handles.add([r.on("after-add",({item:n})=>{n.parent=this,n.layer=this}),r.on("after-remove",({item:n})=>{n.parent=null,n.layer=null})],"sublayers-owner"),this.type==="tile"&&this.handles.add(r.on("before-changes",n=>{jxe.error(new Z("tilelayer:sublayers-non-modifiable","ISublayer can't be added, moved, or removed from the layer's sublayers",{layer:this})),n.preventDefault()}),"sublayers-owner"))}};return c([p({readOnly:!0})],t.prototype,"allSublayers",void 0),c([p({readOnly:!0,type:Je.ofType(S2)})],t.prototype,"serviceSublayers",void 0),c([p({value:null,type:n5,json:{read:!1,write:{allowNull:!0,ignoreOrigin:!0}}})],t.prototype,"sublayers",void 0),c([p({readOnly:!0})],t.prototype,"sublayersSourceJSON",void 0),t=c([N("esri.layers.mixins.SublayersOwner")],t),t},Uxe={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let po=class extends ro(Ze){constructor(e){super(e),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const e=this.visibleSublayers.map(t=>{const r=Vj(this.floors,t);return t.toExportImageJSON(r)});return e.length?JSON.stringify(e):null}get hasDynamicLayers(){return this.layer&&Dxe(this.visibleSublayers,this.layer.serviceSublayers,this.layer)}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("sublayer-update",t=>this.notifyChange(Uxe[t.propertyName]))],"layer"))}get layers(){const e=this.visibleSublayers;return e?e.length?"show:"+e.map(t=>t.id).join(","):"show:-1":null}get layerDefs(){var e;const t=!((e=this.floors)==null||!e.length),r=this.visibleSublayers.filter(i=>i.definitionExpression!=null||t&&i.floorInfo!=null);return r.length?JSON.stringify(r.reduce((i,n)=>{const s=Vj(this.floors,n),o=U(s)?NK(s,n):n.definitionExpression;return i[n.id]=o,i},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const e=this.layer;return e&&(e.commitProperty("dpi"),e.commitProperty("imageFormat"),e.commitProperty("imageTransparency"),e.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const e=[];if(!this.layer)return e;const t=this.layer.sublayers,r=n=>{const s=this.scale,o=s===0,a=n.minScale===0||s<=n.minScale,l=n.maxScale===0||s>=n.maxScale;n.visible&&(o||a&&l)&&(n.sublayers?n.sublayers.forEach(r):e.unshift(n))};t&&t.forEach(r);const i=this._get("visibleSublayers");return!i||i.length!==e.length||i.some((n,s)=>e[s]!==n)?e:i}toJSON(){const e=this.layer;let t={dpi:e.dpi,format:e.imageFormat,transparent:e.imageTransparency,gdbVersion:e.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?t.dynamicLayers=this.dynamicLayers:t={...t,layers:this.layers,layerDefs:this.layerDefs},t}};c([p({readOnly:!0})],po.prototype,"dynamicLayers",null),c([p()],po.prototype,"floors",void 0),c([p({readOnly:!0})],po.prototype,"hasDynamicLayers",null),c([p()],po.prototype,"layer",null),c([p({readOnly:!0})],po.prototype,"layers",null),c([p({readOnly:!0})],po.prototype,"layerDefs",null),c([p({type:Number})],po.prototype,"scale",void 0),c([p(F1e)],po.prototype,"timeExtent",void 0),c([p({readOnly:!0})],po.prototype,"version",null),c([p({readOnly:!0})],po.prototype,"visibleSublayers",null),po=c([N("esri.layers.mixins.ExportImageParameters")],po);let di=class extends by(x$(wy(bX(yX(d$(Zv(Yv(Ip(Kv(UN(w$(ro(Sh))))))))))))){constructor(...e){super(...e),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(wh).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("PNG32")>-1?"png32":"png24"}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:u})=>u&&u.toArray().reverse()).toArray();let s=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const u=Ds(i.origin);if(u===3){const h=this.createSublayersForOrigin("service").sublayers;s=aV(n,h,2)}else if(u>3){const h=this.createSublayersForOrigin("portal-item");s=aV(n,h.sublayers,Ds(h.origin))}}const o=[],a={writeSublayerStructure:s,...i};let l=s;n.forEach(u=>{const h=u.write({},a);o.push(h),l=l||u.originOf("visible")==="user"}),o.some(u=>Object.keys(u).length>1)&&(t.layers=o),l&&(t.visibleLayers=n.filter(u=>u.visible).map(u=>u.id))}createExportImageParameters(e,t,r,i){const n=i&&i.pixelRatio||1;e&&this.version>=10&&(e=e.clone().shiftCentralMeridian());const s=new po({layer:this,floors:i?.floors,scale:uP({extent:e,width:t})*n}),o=s.toJSON();s.destroy();const a=!i||!i.rotation||this.version<10.3?{}:{rotation:-i.rotation},l=e&&e.spatialReference,u=l.wkid||JSON.stringify(l.toJSON());o.dpi*=n;const h={};if(i!=null&&i.timeExtent){const{start:d,end:f}=i.timeExtent.toJSON();h.time=d&&f&&d===f?""+d:`${d??"null"},${f??"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(h.time="null,null");return{bbox:e&&e.xmin+","+e.ymin+","+e.xmax+","+e.ymax,bboxSR:u,imageSR:u,size:t+","+r,...o,...a,...h}}async fetchImage(e,t,r,i){var n;const s={responseType:"image",signal:(n=i?.signal)!=null?n:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(e,t,r,i),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},o=this.parsedUrl.path+"/export";return s.query.dynamicLayers!=null&&!this.capabilities.exportMap.supportsDynamicLayers?Promise.reject(new Z("mapimagelayer:dynamiclayer-not-supported",`service ${this.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:s.query})):Ee(o,s).then(a=>a.data).catch(a=>{throw sn(a)?a:new Z("mapimagelayer:image-fetch-error",`Unable to load image: ${o}`,{error:a})})}async fetchRecomputedExtents(e={}){const t={...e,query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:r}=await Ee(this.url,t),{extent:i,fullExtent:n,timeExtent:s}=r,o=i||n;return{fullExtent:o&&nt.fromJSON(o),timeExtent:s&&bs.fromJSON({start:s[0],end:s[1]})}}loadAll(){return jL(this,e=>{e(this.allSublayers)})}async _fetchService(e){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:t,ssl:r}=await Ee(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:e});r&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t,this.read(t,{origin:"service",url:this.parsedUrl})}};c([p({type:Boolean})],di.prototype,"datesInUnknownTimezone",void 0),c([p()],di.prototype,"dpi",void 0),c([p()],di.prototype,"gdbVersion",void 0),c([p()],di.prototype,"imageFormat",void 0),c([ye("imageFormat",["supportedImageFormatTypes"])],di.prototype,"readImageFormat",null),c([p({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],di.prototype,"imageMaxHeight",void 0),c([p({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],di.prototype,"imageMaxWidth",void 0),c([p()],di.prototype,"imageTransparency",void 0),c([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],di.prototype,"isReference",void 0),c([p({json:{read:!1,write:!1}})],di.prototype,"labelsVisible",void 0),c([p({type:["ArcGISMapServiceLayer"]})],di.prototype,"operationalLayerType",void 0),c([p({json:{read:!1,write:!1}})],di.prototype,"popupEnabled",void 0),c([p()],di.prototype,"sourceJSON",void 0),c([p({json:{write:{ignoreOrigin:!0}}})],di.prototype,"sublayers",void 0),c([Se("sublayers",{layers:{type:[S2]},visibleLayers:{type:[jt]}})],di.prototype,"writeSublayers",null),c([p({type:["show","hide","hide-children"]})],di.prototype,"listMode",void 0),c([p({json:{read:!1},readOnly:!0,value:"map-image"})],di.prototype,"type",void 0),c([p(_2)],di.prototype,"url",void 0),di=c([N("esri.layers.MapImageLayer")],di);const w6=di;var eit=Object.freeze(Object.defineProperty({__proto__:null,default:w6},Symbol.toStringTag,{value:"Module"})),vP;let cu=vP=class extends me{constructor(e){super(e),this.cols=null,this.level=0,this.levelValue=null,this.origin=null,this.resolution=0,this.rows=null,this.scale=0}clone(){return new vP({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],cu.prototype,"cols",void 0),c([p({type:jt,json:{write:!0}})],cu.prototype,"level",void 0),c([p({type:String,json:{write:!0}})],cu.prototype,"levelValue",void 0),c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],cu.prototype,"origin",void 0),c([p({type:Number,json:{write:!0}})],cu.prototype,"resolution",void 0),c([p({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],cu.prototype,"rows",void 0),c([p({type:Number,json:{write:!0}})],cu.prototype,"scale",void 0),cu=vP=c([N("esri.layers.support.LOD")],cu);const wt=cu;var Vb;const lV=new lt({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});let hn=Vb=class extends me{constructor(e){super(e),this.dpi=96,this.format=null,this.origin=null,this.minScale=0,this.maxScale=0,this.size=null,this.spatialReference=null}static create(e={}){const{resolutionFactor:t=1,scales:r,size:i=256,spatialReference:n=Fe.WebMercator,numLODs:s=24}=e;if(!Ks(n)){const d=[];if(r)for(let f=0;f<r.length;f++){const m=r[f];d.push({level:f,scale:m,resolution:m})}else{let f=5e-4;for(let m=s-1;m>=0;m--)d.unshift({level:m,scale:f,resolution:f}),f*=2}return new Vb({dpi:96,lods:d,origin:new Ke(0,0,n),size:[i,i],spatialReference:n})}const o=Ao(n),a=e.origin?new Ke({x:e.origin.x,y:e.origin.y,spatialReference:n}):new Ke(o?{x:o.origin[0],y:o.origin[1],spatialReference:n}:{x:0,y:0,spatialReference:n}),l=96,u=1/(vy(n)*39.37*l),h=[];if(r)for(let d=0;d<r.length;d++){const f=r[d],m=f*u;h.push({level:d,scale:f,resolution:m})}else{let d=EW(n)?512/i*5916575275917094e-7:256/i*591657527591555e-6;const f=Math.ceil(s/t);h.push({level:0,scale:d,resolution:d*u});for(let m=1;m<f;m++){const g=d/2**t,b=g*u;h.push({level:m,scale:g,resolution:b}),d=g}}return new Vb({dpi:l,lods:h,origin:a,size:[i,i],spatialReference:n})}get isWrappable(){const{spatialReference:e,origin:t}=this;if(e&&t){const r=Ao(e);return e.isWrappable&&Math.abs(r.origin[0]-t.x)<=r.dx}return!1}readOrigin(e,t){return Ke.fromJSON({spatialReference:t.spatialReference,...e})}set lods(e){let t=0,r=0;const i=[];this._levelToLOD={},e&&(t=-1/0,r=1/0,e.forEach(n=>{i.push(n.scale),t=n.scale>t?n.scale:t,r=n.scale<r?n.scale:r,this._levelToLOD[n.level]=n})),this._set("scales",i),this._set("minScale",t),this._set("maxScale",r),this._set("lods",e),this._initializeUpsampleLevels()}readSize(e,t){return[t.cols,t.rows]}writeSize(e,t){t.cols=e[0],t.rows=e[1]}zoomToScale(e){const t=this.scales;if(e<=0)return t[0];if(e>=t.length-1)return t[t.length-1];{const r=Math.floor(e),i=r+1;return t[r]/(t[r]/t[i])**(e-r)}}scaleToZoom(e){const t=this.scales,r=t.length-1;let i=0;for(;i<r;i++){const n=t[i],s=t[i+1];if(n<=e)return i;if(s===e)return i+1;if(n>e&&s<e)return i+Math.log(n/e)/Math.log(n/s)}return i}snapScale(e,t=.95){const r=this.scaleToZoom(e);return r%Math.floor(r)>=t?this.zoomToScale(Math.ceil(r)):this.zoomToScale(Math.floor(r))}tileAt(e,t,r,i){const n=this.lodAt(e);if(!n)return null;let s,o;if(typeof t=="number")s=t,o=r;else if(Ll(t.spatialReference,this.spatialReference))s=t.x,o=t.y,i=r;else{const u=Vu(t,this.spatialReference);if(ce(u))return null;s=u.x,o=u.y,i=r}const a=n.resolution*this.size[0],l=n.resolution*this.size[1];return i||(i={id:null,level:0,row:0,col:0,extent:Sl()}),i.level=e,i.row=Math.floor((this.origin.y-o)/l+.001),i.col=Math.floor((s-this.origin.x)/a+.001),this.updateTileInfo(i),i}updateTileInfo(e,t=0){let r=this.lodAt(e.level);if(!r&&t===1){const o=this.lods[this.lods.length-1];o.level<e.level&&(r=o)}if(!r)return;const i=e.level-r.level,n=r.resolution*this.size[0]/2**i,s=r.resolution*this.size[1]/2**i;e.id=`${e.level}/${e.row}/${e.col}`,e.extent||(e.extent=Sl()),e.extent[0]=this.origin.x+e.col*n,e.extent[1]=this.origin.y-(e.row+1)*s,e.extent[2]=e.extent[0]+n,e.extent[3]=e.extent[1]+s}upsampleTile(e){const t=this._upsampleLevels[e.level];return!(!t||t.parentLevel===-1)&&(e.level=t.parentLevel,e.row=Math.floor(e.row/t.factor+.001),e.col=Math.floor(e.col/t.factor+.001),this.updateTileInfo(e),!0)}getTileBounds(e,t){const{resolution:r}=this.lodAt(t.level),i=r*this.size[0],n=r*this.size[1];return e[0]=this.origin.x+t.col*i,e[1]=this.origin.y-(t.row+1)*n,e[2]=e[0]+i,e[3]=e[1]+n,e}lodAt(e){return this._levelToLOD&&this._levelToLOD[e]||null}clone(){return Vb.fromJSON(this.write({}))}_initializeUpsampleLevels(){const e=this.lods;this._upsampleLevels=[];let t=null;for(let r=0;r<e.length;r++){const i=e[r];this._upsampleLevels[i.level]={parentLevel:t?t.level:-1,factor:t?t.resolution/i.resolution:0},t=i}}};c([p({type:Number,json:{write:!0}})],hn.prototype,"compressionQuality",void 0),c([p({type:Number,json:{write:!0}})],hn.prototype,"dpi",void 0),c([p({type:String,json:{read:lV.read,write:lV.write,origins:{"web-scene":{read:!1,write:!1}}}})],hn.prototype,"format",void 0),c([p({readOnly:!0})],hn.prototype,"isWrappable",null),c([p({type:Ke,json:{write:!0}})],hn.prototype,"origin",void 0),c([ye("origin")],hn.prototype,"readOrigin",null),c([p({type:[wt],value:null,json:{write:!0}})],hn.prototype,"lods",null),c([p({readOnly:!0})],hn.prototype,"minScale",void 0),c([p({readOnly:!0})],hn.prototype,"maxScale",void 0),c([p({readOnly:!0})],hn.prototype,"scales",void 0),c([p({cast:e=>Array.isArray(e)?e:typeof e=="number"?[e,e]:[256,256]})],hn.prototype,"size",void 0),c([ye("size",["rows","cols"])],hn.prototype,"readSize",null),c([Se("size",{cols:{type:jt},rows:{type:jt}})],hn.prototype,"writeSize",null),c([p({type:Fe,json:{write:!0}})],hn.prototype,"spatialReference",void 0),hn=Vb=c([N("esri.layers.support.TileInfo")],hn);const Fs=hn;var bP;let md=bP=class extends me{constructor(e){super(e)}clone(){return new bP({customLayerParameters:ie(this.customLayerParameters),customParameters:ie(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};c([p({json:{type:Object,write:!0}})],md.prototype,"customLayerParameters",void 0),c([p({json:{type:Object,write:!0}})],md.prototype,"customParameters",void 0),c([p({type:String,json:{write:!0}})],md.prototype,"layerIdentifier",void 0),c([p({type:String,json:{write:!0}})],md.prototype,"tileMatrixSet",void 0),c([p({type:String,json:{write:!0}})],md.prototype,"url",void 0),md=bP=c([N("esri.layer.support.WMTSLayerInfo")],md);const zxe=md;let ri=class extends by(Kv(wy(Zv(Yv(Ip(Sh)))))){constructor(...e){super(...e),this.copyright="",this.fullExtent=new nt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Fe.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=Fe.WebMercator,this.subDomains=null,this.tileInfo=new Fs({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ke({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Fe.WebMercator}),spatialReference:Fe.WebMercator,lods:[new wt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new wt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new wt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new wt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new wt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new wt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new wt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new wt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new wt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new wt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new wt({level:10,scale:577790.554289,resolution:152.874056570411}),new wt({level:11,scale:288895.277144,resolution:76.4370282850732}),new wt({level:12,scale:144447.638572,resolution:38.2185141425366}),new wt({level:13,scale:72223.819286,resolution:19.1092570712683}),new wt({level:14,scale:36111.909643,resolution:9.55462853563415}),new wt({level:15,scale:18055.954822,resolution:4.77731426794937}),new wt({level:16,scale:9027.977411,resolution:2.38865713397468}),new wt({level:17,scale:4513.988705,resolution:1.19432856685505}),new wt({level:18,scale:2256.994353,resolution:.597164283559817}),new wt({level:19,scale:1128.497176,resolution:.298582141647617}),new wt({level:20,scale:564.248588,resolution:.14929107082380833}),new wt({level:21,scale:282.124294,resolution:.07464553541190416}),new wt({level:22,scale:141.062147,resolution:.03732276770595208}),new wt({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(e,t){return typeof e=="string"?{urlTemplate:e,...t}:e}load(e){const t=this.loadFromPortal({supportedTypes:["WMTS"]},e).then(()=>{let r="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const i=new ku(this.urlTemplate);!!this.subDomains&&this.subDomains.length>0||i.authority.indexOf("{subDomain}")===-1||(r="is missing 'subDomains' property")}else r="spatialReference must match tileInfo.spatialReference";else r="is missing the required 'urlTemplate' property value";if(r)throw new Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${r}`)});return this.addResolvingPromise(t),Promise.resolve(this)}get levelValues(){const e=[];if(!this.tileInfo)return null;for(const t of this.tileInfo.lods)e[t.level]=t.levelValue||t.level;return e}readSpatialReference(e,t){return e||t.fullExtent&&t.fullExtent.spatialReference&&Fe.fromJSON(t.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const e=[],{urlTemplate:t,subDomains:r}=this,i=new ku(t),n=i.scheme?i.scheme+"://":"//",s=n+i.authority+"/";if(i.authority.indexOf("{subDomain}")===-1)e.push(s);else if(r&&r.length>0&&i.authority.split(".").length>1)for(const o of r)e.push(n+i.authority.replace(/\{subDomain\}/gi,o)+"/");return e.map(o=>(o.charAt(o.length-1)!=="/"&&(o+="/"),o))}get urlPath(){if(!this.urlTemplate)return null;const e=this.urlTemplate,t=new ku(e),r=(t.scheme?t.scheme+"://":"//")+t.authority+"/";return e.substring(r.length)}readUrlTemplate(e,t){return e||t.templateUrl}writeUrlTemplate(e,t){e&&_l(e)&&(e="https:"+e),e&&(e=e.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),e=$o(e)),t.templateUrl=e}fetchTile(e,t,r,i={}){const{signal:n}=i,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:n,query:{...this.refreshParameters}};return Ee(s,o).then(a=>a.data)}getTileUrl(e,t,r){const i=this.levelValues[e];return this.tileServers[t%this.tileServers.length]+bl(this.urlPath,{level:i,z:i,col:r,x:r,row:t,y:t})}};c([p({type:String,value:"",json:{write:!0}})],ri.prototype,"copyright",void 0),c([p({type:nt,json:{write:!0},nonNullable:!0})],ri.prototype,"fullExtent",void 0),c([p({readOnly:!0,json:{read:!1,write:!1}})],ri.prototype,"legendEnabled",void 0),c([p({type:["show","hide"]})],ri.prototype,"listMode",void 0),c([p()],ri.prototype,"levelValues",null),c([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],ri.prototype,"isReference",void 0),c([p({type:["WebTiledLayer"],value:"WebTiledLayer"})],ri.prototype,"operationalLayerType",void 0),c([p({readOnly:!0,json:{read:!1,write:!1}})],ri.prototype,"popupEnabled",void 0),c([p({type:Fe})],ri.prototype,"spatialReference",void 0),c([ye("spatialReference",["spatialReference","fullExtent.spatialReference"])],ri.prototype,"readSpatialReference",null),c([p({type:[String],json:{write:!0}})],ri.prototype,"subDomains",void 0),c([p({type:Fs,json:{write:!0}})],ri.prototype,"tileInfo",void 0),c([p({readOnly:!0})],ri.prototype,"tileServers",null),c([p({json:{read:!1}})],ri.prototype,"type",void 0),c([p()],ri.prototype,"urlPath",null),c([p({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],ri.prototype,"urlTemplate",void 0),c([ye("urlTemplate",["urlTemplate","templateUrl"])],ri.prototype,"readUrlTemplate",null),c([Se("urlTemplate",{templateUrl:{type:String}})],ri.prototype,"writeUrlTemplate",null),c([p({type:zxe,json:{write:!0}})],ri.prototype,"wmtsInfo",void 0),ri=c([N("esri.layers.WebTileLayer")],ri);const wX=ri;var tit=Object.freeze(Object.defineProperty({__proto__:null,default:wX},Symbol.toStringTag,{value:"Module"}));let Kn=class extends wX{constructor(...e){super(...e),this.portalItem=null,this.isReference=null,this.tileInfo=new Fs({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new Ke({x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Fe.WebMercator}),spatialReference:Fe.WebMercator,lods:[new wt({level:0,scale:591657527591555e-6,resolution:156543.033928}),new wt({level:1,scale:295828763795777e-6,resolution:78271.5169639999}),new wt({level:2,scale:147914381897889e-6,resolution:39135.7584820001}),new wt({level:3,scale:73957190948944e-6,resolution:19567.8792409999}),new wt({level:4,scale:36978595474472e-6,resolution:9783.93962049996}),new wt({level:5,scale:18489297737236e-6,resolution:4891.96981024998}),new wt({level:6,scale:9244648868618e-6,resolution:2445.98490512499}),new wt({level:7,scale:4622324434309e-6,resolution:1222.99245256249}),new wt({level:8,scale:2311162217155e-6,resolution:611.49622628138}),new wt({level:9,scale:1155581108577e-6,resolution:305.748113140558}),new wt({level:10,scale:577790.554289,resolution:152.874056570411}),new wt({level:11,scale:288895.277144,resolution:76.4370282850732}),new wt({level:12,scale:144447.638572,resolution:38.2185141425366}),new wt({level:13,scale:72223.819286,resolution:19.1092570712683}),new wt({level:14,scale:36111.909643,resolution:9.55462853563415}),new wt({level:15,scale:18055.954822,resolution:4.77731426794937}),new wt({level:16,scale:9027.977411,resolution:2.38865713397468}),new wt({level:17,scale:4513.988705,resolution:1.19432856685505}),new wt({level:18,scale:2256.994353,resolution:.597164283559817}),new wt({level:19,scale:1128.497176,resolution:.298582141647617})]}),this.subDomains=["a","b","c"],this.fullExtent=new nt(-20037508342787e-6,-2003750834278e-5,2003750834278e-5,20037508342787e-6,Fe.WebMercator),this.urlTemplate="https://{subDomain}.tile.openstreetmap.org/{level}/{col}/{row}.png",this.operationalLayerType="OpenStreetMap",this.type="open-street-map",this.copyright="Map data &copy; OpenStreetMap contributors, CC-BY-SA"}get refreshInterval(){return 0}};c([p({type:r_,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Kn.prototype,"portalItem",void 0),c([p({type:Boolean,json:{read:!1,write:!1}})],Kn.prototype,"isReference",void 0),c([p({type:Number,readOnly:!0,json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],Kn.prototype,"refreshInterval",null),c([p({type:Fs,json:{write:!1}})],Kn.prototype,"tileInfo",void 0),c([p({type:["show","hide"]})],Kn.prototype,"listMode",void 0),c([p({readOnly:!0,json:{read:!1,write:!1}})],Kn.prototype,"subDomains",void 0),c([p({readOnly:!0,json:{read:!1,write:!1},nonNullable:!0})],Kn.prototype,"fullExtent",void 0),c([p({readOnly:!0,json:{read:!1,write:!1}})],Kn.prototype,"urlTemplate",void 0),c([p({type:["OpenStreetMap"]})],Kn.prototype,"operationalLayerType",void 0),c([p({json:{read:!1}})],Kn.prototype,"type",void 0),c([p({json:{read:!1,write:!1}})],Kn.prototype,"copyright",void 0),c([p({json:{read:!1,write:!1}})],Kn.prototype,"wmtsInfo",void 0),Kn=c([N("esri.layers.OpenStreetMapLayer")],Kn);const _6=Kn;var rit=Object.freeze(Object.defineProperty({__proto__:null,default:_6},Symbol.toStringTag,{value:"Module"}));const Bxe={type:Fs,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:Gxe}}}}};function Gxe(e,t,r,i){if(!e)return null;const{minScale:n,maxScale:s,minLOD:o,maxLOD:a}=t;if(o!=null&&a!=null)return i&&i.ignoreMinMaxLOD?Fs.fromJSON(e):Fs.fromJSON({...e,lods:e.lods.filter(({level:l})=>l!=null&&l>=o&&l<=a)});if(n!==0&&s!==0){const l=d=>Math.round(1e4*d)/1e4,u=n?l(n):1/0,h=s?l(s):-1/0;return Fs.fromJSON({...e,lods:e.lods.filter(d=>{const f=l(d.scale);return f<=u&&f>=h})})}return Fs.fromJSON(e)}class _0{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(t,r){if(this._allAvailability!=="unknown")return this._allAvailability;const i=(t-this.location.top)*this.location.width+(r-this.location.left),n=i%8,s=i>>3,o=this._tileAvailabilityBitSet;return s<0||s>o.length?"unknown":o[s]&1<<n?"available":"unavailable"}_updateFromData(t){const r=this.location.width,i=this.location.height;let n=!0,s=!0;const o=Math.ceil(r*i/8),a=new Uint8Array(o);let l=0;for(let u=0;u<t.length;u++){const h=u%8;t[u]?(s=!1,a[l]|=1<<h):n=!1,h===7&&++l}s?this._allAvailability="unavailable":n?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=a,this.byteSize+=a.length)}static fromDefinition(t,r){const i=t.service.request||Ee,{row:n,col:s,width:o,height:a}=t,l={query:{f:"json"}};return r=r?{...l,...r}:l,i(qxe(t),r).then(u=>u.data).catch(u=>{if(u&&u.details&&u.details.httpStatus===422)return{location:{top:n,left:s,width:o,height:a},valid:!0,data:aue(o*a,0)};throw u}).then(u=>{if(u.location&&(u.location.top!==n||u.location.left!==s||u.location.width!==o||u.location.height!==a))throw new Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:u,definition:{top:n,left:s,width:o,height:a}});return _0.fromJSON(u)})}static fromJSON(t){_0.validateJSON(t);const r=new _0;return r.location=Object.freeze(ie(t.location)),r._updateFromData(t.data),Object.freeze(r)}static validateJSON(t){if(!t||!t.location)throw new Z("tilemap:missing-location","Location missing from tilemap response");if(t.valid===!1)throw new Z("tilemap:invalid","Tilemap response was marked as invalid");if(!t.data)throw new Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(t.data))throw new Z("tilemap:data-mismatch","Data must be an array of numbers");if(t.data.length!==t.location.width*t.location.height)throw new Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function uV(e){return`${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}function qxe(e){let t;if(e.service.type==="vector-tile")t=`${e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`;else{const i=e.service.tileServers;t=`${i&&i.length?i[e.row%i.length]:e.service.url}/tilemap/${e.level}/${e.row}/${e.col}/${e.width}/${e.height}`}const r=e.service.query;return r&&(t=`${t}?${r}`),t}var Bf;const Hxe=Te.getLogger("esri.layers.support.TilemapCache");let Ja=Bf=class extends ro(Ze){constructor(e){super(e),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2097152,this.request=Ee,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new JZ(this.cacheByteSize),this.handles.add([this.watch(["layer.parsedUrl","layer.tileServers?","layer.apiKey?","layer.customParameters?"],()=>this._initializeTilemapDefinition()),It(this,"layer.tileInfo.lods",e=>this._initializeAvailableLevels(e),!0)]),this._initializeTilemapDefinition()}castLevels(e){return e<=2?(Hxe.error("Minimum levels for Tilemap is 3, but got ",e),3):e}get size(){return 1<<this.levels}fetchTilemap(e,t,r,i){if(!this._availableLevels[e])return Promise.reject(new Z("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`));const n=this._tmpTilemapDefinition,s=this._tilemapFromCache(e,t,r,n);if(s)return Promise.resolve(s);const o=i&&i.signal;return i={...i,signal:null},new Promise((a,l)=>{xa(o,()=>l(Zr()));const u=uV(n);let h=this._pendingTilemapRequests[u];if(!h){h=_0.fromDefinition(n,i).then(f=>(this._tilemapCache.put(u,f,f.byteSize),f));const d=()=>delete this._pendingTilemapRequests[u];this._pendingTilemapRequests[u]=h,h.then(d,d)}h.then(a,l)})}getAvailability(e,t,r){if(!this._availableLevels[e])return"unavailable";const i=this._tilemapFromCache(e,t,r,this._tmpTilemapDefinition);return i?i.getAvailability(t,r):"unknown"}fetchAvailability(e,t,r,i){return this._availableLevels[e]?this.fetchTilemap(e,t,r,i).catch(n=>n).then(n=>{if(n instanceof _0){const s=n.getAvailability(t,r);return s==="unavailable"?Promise.reject(new Z("tile-map:tile-unavailable","Tile is not available",{level:e,row:t,col:r})):s}if(sn(n))throw n;return"unknown"}):Promise.reject(new Z("tilemap-cache:level-unavailable",`Level ${e} is unavailable in the service`))}fetchAvailabilityUpsample(e,t,r,i,n){i.level=e,i.row=t,i.col=r;const s=this.layer.tileInfo;s.updateTileInfo(i);const o=this.fetchAvailability(e,t,r,n).catch(a=>{if(sn(a))throw a;if(s.upsampleTile(i))return this.fetchAvailabilityUpsample(i.level,i.row,i.col,i);throw a});return this._fetchAvailabilityUpsamplePrefetch(i.id,e,t,r,n,o),o}async _fetchAvailabilityUpsamplePrefetch(e,t,r,i,n,s){if(!this._prefetchingEnabled)return;const o=`prefetch-${e}`;if(this.handles.has(o))return;const a=new AbortController;s.then(()=>a.abort(),()=>a.abort());let l=!1;const u={remove(){l||(l=!0,a.abort())}};if(this.handles.add(u,o),await Jue(10,a.signal).catch(()=>{}),l||(l=!0,this.handles.remove(o)),wl(a))return;const h={id:e,level:t,row:r,col:i},d={...n,signal:a.signal},f=this.layer.tileInfo;for(let m=0;Bf._prefetches.length<Bf._maxPrefetch&&f.upsampleTile(h);++m){const g=this.fetchAvailability(h.level,h.row,h.col,d);Bf._prefetches.push(g);const b=()=>{Bf._prefetches.removeUnordered(g)};g.then(b,b)}}_initializeTilemapDefinition(){var e;if(!this.layer.parsedUrl)return;const{parsedUrl:t,apiKey:r,customParameters:i}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:t.path,query:lp({...t.query,...i,token:r??((e=t.query)==null?void 0:e.token)}),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(e,t,r,i){i.level=e,i.row=t-t%this.size,i.col=r-r%this.size;const n=uV(i);return this._tilemapCache.get(n)}_initializeAvailableLevels(e){this._availableLevels={},e&&e.forEach(t=>this._availableLevels[t.level]=!0)}get test(){const e=this;return{get prefetchingEnabled(){return e._prefetchingEnabled},set prefetchingEnabled(t){e._prefetchingEnabled=t},hasTilemap:(t,r,i)=>!!e._tilemapFromCache(t,r,i,e._tmpTilemapDefinition)}}};Ja._maxPrefetch=4,Ja._prefetches=new Hd({initialSize:Bf._maxPrefetch}),c([p({constructOnly:!0,type:Number})],Ja.prototype,"levels",void 0),c([Ct("levels")],Ja.prototype,"castLevels",null),c([p({readOnly:!0,type:Number})],Ja.prototype,"size",null),c([p({constructOnly:!0,type:Number})],Ja.prototype,"cacheByteSize",void 0),c([p({constructOnly:!0})],Ja.prototype,"layer",void 0),c([p({constructOnly:!0})],Ja.prototype,"request",void 0),Ja=Bf=c([N("esri.layers.support.TilemapCache")],Ja);const Wxe=e=>{let t=class extends e{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}readMaxScale(r,i){return i.minLOD!=null&&i.maxLOD!=null?r:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(r,i){return i.capabilities&&i.capabilities.indexOf("Tilemap")>-1?new Ja({layer:this}):null}};return c([p({json:{read:{source:"copyrightText"}}})],t.prototype,"copyright",void 0),c([p()],t.prototype,"minScale",void 0),c([ye("service","minScale")],t.prototype,"readMinScale",null),c([p()],t.prototype,"maxScale",void 0),c([ye("service","maxScale")],t.prototype,"readMaxScale",null),c([p({type:Fe})],t.prototype,"spatialReference",void 0),c([p({readOnly:!0})],t.prototype,"supportsBlankTile",null),c([p(Bxe)],t.prototype,"tileInfo",void 0),c([p()],t.prototype,"tilemapCache",void 0),c([ye("service","tilemapCache",["capabilities"])],t.prototype,"readTilemapCache",null),c([p()],t.prototype,"version",void 0),t=c([N("esri.layers.mixins.ArcGISCachedService")],t),t},cV=["Canvas/World_Dark_Gray_Base","Canvas/World_Dark_Gray_Reference","Canvas/World_Light_Gray_Base","Canvas/World_Light_Gray_Reference","Elevation/World_Hillshade","Elevation/World_Hillshade_Dark","Ocean/World_Ocean_Base","Ocean/World_Ocean_Reference","Ocean_Basemap","Reference/World_Boundaries_and_Places","Reference/World_Boundaries_and_Places_Alternate","Reference/World_Transportation","World_Imagery","World_Street_Map","World_Topo_Map"];let xi=class extends by(bX(wy(Zv(Yv(Wxe(yX(d$(Ip(ro(Kv(UN(w$(Sh))))))))))))){constructor(...e){super(...e),this.listMode="show",this.isReference=null,this.operationalLayerType="ArcGISTiledMapServiceLayer",this.resampling=!0,this.sourceJSON=null,this.spatialReference=null,this.path=null,this.sublayers=null,this.type="tile",this.url=null}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},e).catch(wh).then(()=>this._fetchService(t))),Promise.resolve(this)}get attributionDataUrl(){var e;const t=(e=this.parsedUrl)==null?void 0:e.path.toLowerCase();return t&&this._getDefaultAttribution(this._getMapName(t))}readSpatialReference(e,t){return(e=e||t.tileInfo&&t.tileInfo.spatialReference)&&Fe.fromJSON(e)}writeSublayers(e,t,r,i){if(!this.loaded||!e)return;const n=e.slice().reverse().flatten(({sublayers:a})=>a&&a.toArray().reverse()).toArray(),s=[],o={writeSublayerStructure:!1,...i};n.forEach(a=>{const l=a.write({},o);s.push(l)}),s.some(a=>Object.keys(a).length>1)&&(t.layers=s)}get tileServers(){return this._getDefaultTileServers(this.parsedUrl.path)}castTileServers(e){return Array.isArray(e)?e.map(t=>Kr(t).path):null}fetchTile(e,t,r,i={}){const{signal:n}=i,s=this.getTileUrl(e,t,r),o={responseType:"image",signal:n,query:{...this.refreshParameters}};return Ee(s,o).then(a=>a.data)}getTileUrl(e,t,r){const i=!this.tilemapCache&&this.supportsBlankTile,n=lp({...this.parsedUrl.query,blankTile:!i&&null,...this.customParameters,token:this.apiKey}),s=this.tileServers;return`${s&&s.length?s[t%s.length]:this.parsedUrl.path}/tile/${e}/${t}/${r}${n?"?"+n:""}`}_fetchService(e){return new Promise((t,r)=>{if(this.sourceJSON){if(this.sourceJSON.bandCount!=null&&this.sourceJSON.pixelSizeX!=null)throw new Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");return void t({data:this.sourceJSON})}if(!this.parsedUrl)throw new Z("tile-layer:undefined-url","layer's url is not defined");const i=Wv(this.parsedUrl.path);if(U(i)&&i.serverType==="ImageServer")throw new Z("tile-layer:unsupported-url","use ImageryTileLayer to open a tiled image service");Ee(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},responseType:"json",signal:e}).then(t,r)}).then(t=>{if(t.ssl&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=t.data,this.read(t.data,{origin:"service",url:this.parsedUrl}),this.version===10.1&&!IY(this.url))return this._fetchServerVersion(this.url,e).then(r=>{this.read({currentVersion:r})}).catch(()=>{})})}_fetchServerVersion(e,t){if(!W0e(e))return Promise.reject();const r=e.replace(/(.*\/rest)\/.*/i,"$1")+"/info";return Ee(r,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then(i=>{if(i.data&&i.data.currentVersion)return i.data.currentVersion;throw new Z("tile-layer:version-not-available")})}_getMapName(e){const t=e.match(/^(?:https?:)?\/\/(server\.arcgisonline\.com|services\.arcgisonline\.com|ibasemaps-api\.arcgis\.com)\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/mapserver/i);return t&&t[2]}_getDefaultAttribution(e){if(!e)return;let t;e=e.toLowerCase();for(let r=0,i=cV.length;r<i;r++)if(t=cV[r],t.toLowerCase().indexOf(e)>-1)return ma("//static.arcgis.com/attribution/"+t)}_getDefaultTileServers(e){const t=e.search(/^(?:https?:)?\/\/server\.arcgisonline\.com/i)!==-1,r=e.search(/^(?:https?:)?\/\/services\.arcgisonline\.com/i)!==-1;return t||r?[e,e.replace(t?/server\.arcgisonline/i:/services\.arcgisonline/i,t?"services.arcgisonline":"server.arcgisonline")]:[]}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};c([p({readOnly:!0})],xi.prototype,"attributionDataUrl",null),c([p({type:["show","hide","hide-children"]})],xi.prototype,"listMode",void 0),c([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],xi.prototype,"isReference",void 0),c([p({readOnly:!0,type:["ArcGISTiledMapServiceLayer"]})],xi.prototype,"operationalLayerType",void 0),c([p({type:Boolean})],xi.prototype,"resampling",void 0),c([p()],xi.prototype,"sourceJSON",void 0),c([p({type:Fe})],xi.prototype,"spatialReference",void 0),c([ye("spatialReference",["spatialReference","tileInfo"])],xi.prototype,"readSpatialReference",null),c([p({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],xi.prototype,"path",void 0),c([p({readOnly:!0})],xi.prototype,"sublayers",void 0),c([Se("sublayers",{layers:{type:[S2]}})],xi.prototype,"writeSublayers",null),c([p({json:{read:!1,write:!1}})],xi.prototype,"popupEnabled",void 0),c([p()],xi.prototype,"tileServers",null),c([Ct("tileServers")],xi.prototype,"castTileServers",null),c([p({readOnly:!0,json:{read:!1}})],xi.prototype,"type",void 0),c([p(_2)],xi.prototype,"url",void 0),xi=c([N("esri.layers.TileLayer")],xi),xi.prototype.fetchTile.__isDefault__=!0;const x6=xi;var iit=Object.freeze(Object.defineProperty({__proto__:null,default:x6},Symbol.toStringTag,{value:"Module"}));const Jxe={visible:"visibleSublayers"};let qc=class extends ro(Ze){constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.handles.remove("layer"),e&&this.handles.add([e.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),e.on("wms-sublayer-update",t=>this.notifyChange(Jxe[t.propertyName]))],"layer"))}get layers(){const{visibleSublayers:e}=this;return e.filter(t=>t.name).map(t=>t.name).join(",")}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:t}=this,r=e?.sublayers,i=[],n=s=>{const{minScale:o,maxScale:a,sublayers:l,visible:u}=s;u&&(t===0||(o===0||t<=o)&&(a===0||t>=a))&&(l?l.forEach(n):i.unshift(s))};return r?.forEach(n),i}toJSON(){const{layer:e,layers:t}=this,{imageFormat:r,imageTransparency:i,version:n}=e;return{format:r,request:"GetMap",service:"WMS",styles:"",transparent:i,version:n,layers:t}}};c([p()],qc.prototype,"layer",null),c([p({readOnly:!0})],qc.prototype,"layers",null),c([p({type:Number})],qc.prototype,"scale",void 0),c([p({readOnly:!0})],qc.prototype,"version",null),c([p({readOnly:!0})],qc.prototype,"visibleSublayers",null),qc=c([N("esri.layers.support.ExportWMSImageParameters")],qc);var JM;let Zxe=0,Tr=JM=class extends Hk{constructor(e){super(e),this._sublayersHandles=new gi,this.dimensions=null,this.fullExtents=null,this.featureInfoFormat=null,this.featureInfoUrl=null,this.legendUrl=null,this.legendEnabled=!0,this.maxScale=0,this.minScale=0,this.popupEnabled=!1,this.queryable=!1,this.spatialReferences=null}get description(){return this._get("description")}set description(e){this._set("description",e)}get fullExtent(){return this._get("fullExtent")}set fullExtent(e){this._set("fullExtent",e)}readExtent(e,t){return(e=t.extent)?nt.fromJSON(e):null}get id(){const e=this._get("id");return e??Zxe++}set id(e){this._set("id",e)}readLegendUrl(e,t){return t?t.legendUrl||t.legendURL:null}set layer(e){this._set("layer",e),this.sublayers&&this.sublayers.forEach(t=>t.layer=e)}get name(){return this._get("name")}set name(e){this._set("name",e)}set sublayers(e){const t=this._get("sublayers");t&&(t.forEach(r=>{r.layer=null}),this._sublayersHandles.removeAll(),this._sublayersHandles=null),e&&(e.forEach(r=>{r.parent=this,r.layer=this.layer}),this._sublayersHandles.add([e.on("after-add",({item:r})=>{r.parent=this,r.layer=this.layer}),e.on("after-remove",({item:r})=>{r.parent=null,r.layer=null})])),this._set("sublayers",e)}castSublayers(e){return br(Je.ofType(JM),e)}get title(){return this._get("title")}set title(e){this._set("title",e)}get visible(){return this._get("visible")}set visible(e){this._setAndNotifyLayer("visible",e)}clone(){const e=new JM;return this.hasOwnProperty("description")&&(e.description=this.description),this.hasOwnProperty("fullExtent")&&(e.fullExtent=this.fullExtent.clone()),this.hasOwnProperty("fullExtents")&&(e.fullExtents=this.fullExtents.map(t=>t.clone())),this.hasOwnProperty("featureInfoFormat")&&(e.featureInfoFormat=this.featureInfoFormat),this.hasOwnProperty("featureInfoUrl")&&(e.featureInfoUrl=this.featureInfoUrl),this.hasOwnProperty("legendUrl")&&(e.legendUrl=this.legendUrl),this.hasOwnProperty("legendEnabled")&&(e.legendEnabled=this.legendEnabled),this.hasOwnProperty("layer")&&(e.layer=this.layer),this.hasOwnProperty("name")&&(e.name=this.name),this.hasOwnProperty("parent")&&(e.parent=this.parent),this.hasOwnProperty("queryable")&&(e.queryable=this.queryable),this.hasOwnProperty("sublayers")&&(e.sublayers=this.sublayers&&this.sublayers.map(t=>t.clone())),this.hasOwnProperty("spatialReferences")&&(e.spatialReferences=this.spatialReferences.map(t=>t)),this.hasOwnProperty("visible")&&(e.visible=this.visible),this.hasOwnProperty("title")&&(e.title=this.title),e}_setAndNotifyLayer(e,t){const r=this.layer;this._get(e)!==t&&(this._set(e,t),r&&r.emit("wms-sublayer-update",{propertyName:e,id:this.id}))}};c([p()],Tr.prototype,"description",null),c([p({readOnly:!0})],Tr.prototype,"dimensions",void 0),c([p({value:null})],Tr.prototype,"fullExtent",null),c([ye("fullExtent",["extent"])],Tr.prototype,"readExtent",null),c([p()],Tr.prototype,"fullExtents",void 0),c([p()],Tr.prototype,"featureInfoFormat",void 0),c([p()],Tr.prototype,"featureInfoUrl",void 0),c([p({type:Number,json:{write:{enabled:!1,overridePolicy:()=>({ignoreOrigin:!0,enabled:!0})}}})],Tr.prototype,"id",null),c([p({type:String,json:{origins:{"web-document":{read:{source:["legendUrl","legendURL"]},write:{target:"legendUrl",ignoreOrigin:!0}}},read:{source:"legendURL"},write:{ignoreOrigin:!0}}})],Tr.prototype,"legendUrl",void 0),c([ye(["web-document"],"legendUrl")],Tr.prototype,"readLegendUrl",null),c([p({value:!0,type:Boolean,json:{read:{source:"showLegend"},write:{target:"showLegend"},origins:{"web-map":{read:!1,write:!1},"web-scene":{read:!1,write:!1}}}})],Tr.prototype,"legendEnabled",void 0),c([p({value:null})],Tr.prototype,"layer",null),c([p()],Tr.prototype,"maxScale",void 0),c([p()],Tr.prototype,"minScale",void 0),c([p({type:String,value:null,json:{read:{source:"name"},write:{ignoreOrigin:!0}}})],Tr.prototype,"name",null),c([p()],Tr.prototype,"parent",void 0),c([p({type:Boolean,json:{read:{source:"showPopup"},write:{ignoreOrigin:!0,target:"showPopup"}}})],Tr.prototype,"popupEnabled",void 0),c([p({type:Boolean,json:{write:{ignoreOrigin:!0}}})],Tr.prototype,"queryable",void 0),c([p()],Tr.prototype,"sublayers",null),c([Ct("sublayers")],Tr.prototype,"castSublayers",null),c([p({type:[Number],json:{read:{source:"spatialReferences"}}})],Tr.prototype,"spatialReferences",void 0),c([p({type:String,value:null,json:{write:{ignoreOrigin:!0}}})],Tr.prototype,"title",null),c([p({type:Boolean,value:!0,json:{read:{source:"defaultVisibility"}}})],Tr.prototype,"visible",null),Tr=JM=c([N("esri.layers.support.WMSSublayer")],Tr);const wP=Tr,Yxe=[[4001,4999],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3416,3416],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]],qx={84:4326,83:4269,27:4267};function Kxe(e){if(!e)return null;const t={idCounter:-1};typeof e=="string"&&(e=new DOMParser().parseFromString(e,"text/xml"));const r=e.documentElement;if(r.nodeName==="ServiceExceptionReport"){const y=Array.prototype.slice.call(r.childNodes).map(M=>M.textContent).join(`\r
`);throw new Z("wmslayer:wms-capabilities-xml-is-not-valid","The server returned errors when the WMS capabilities were requested.",y)}const i=Nn("Capability",r),n=Nn("Service",r),s=Nn("Request",i);if(!i||!n||!s)return null;const o=Nn("Layer",i);if(!o)return null;const a=r.nodeName==="WMS_Capabilities"||r.nodeName==="WMT_MS_Capabilities"?r.getAttribute("version"):"1.3.0",l=_u("Title",n,"")||_u("Name",n,""),u=_u("AccessConstraints",n,""),h=_u("Abstract",n,""),d=parseInt(_u("MaxWidth",n,"5000"),10),f=parseInt(_u("MaxHeight",n,"5000"),10),m=dV(s,"GetMap"),g=hV(s,"GetMap"),b=Ub(o,a,t);let w,_=0;if(Array.prototype.slice.call(i.childNodes).forEach(y=>{y.nodeName==="Layer"&&(_===0?w=y:(_===1&&b.name&&(b.name="",b.sublayers.push(Ub(w,a,t))),b.sublayers.push(Ub(y,a,t))),_++)}),!b)return null;let x,I;const S=b.fullExtents;if(x=b.sublayers,x||(x=[]),x.length===0&&x.push(b),I=b.extent,!I){const y=new nt(x[0].extent);b.extent=y.toJSON(),I=b.extent}const T=b.spatialReferences.length>0?b.spatialReferences:_X(b),$=hV(s,"GetFeatureInfo");let E;if($){const y=dV(s,"GetFeatureInfo");y.indexOf("text/html")>-1?E="text/html":y.indexOf("text/plain")>-1&&(E="text/plain")}if(!E){const y=function(M){M&&(M.queryable=!1,M.sublayers&&M.sublayers.forEach(A=>{y(A)}))};y(b)}const C=xX(x),O=b.minScale||0,R=b.maxScale||0,D=b.dimensions,F=C.reduce((y,M)=>y.concat(M.dimensions),[]),z=D.concat(F).filter(tSe);let B=null;if(z.length>0){let y=Number.POSITIVE_INFINITY,M=Number.NEGATIVE_INFINITY;z.forEach(A=>{const{extent:P}=A;eSe(P)?P.forEach(Y=>{y=Math.min(y,Y.getTime()),M=Math.max(M,Y.getTime())}):P.forEach(Y=>{y=Math.min(y,Y.min.getTime()),M=Math.max(M,Y.max.getTime())})}),B={startTimeField:null,endTimeField:null,trackIdField:null,timeExtent:[y,M]}}return{copyright:u,description:h,dimensions:D,extent:I,fullExtents:S,featureInfoFormat:E,featureInfoUrl:$,mapUrl:g,maxWidth:d,maxHeight:f,maxScale:R,minScale:O,layers:C,spatialReferences:T,supportedImageFormatTypes:m,timeInfo:B,title:l,version:a}}function _P(e){return Yxe.some(([t,r])=>e>=t&&e<=r)}function Xxe(e){return e.length?e.filter(t=>t.popupEnabled&&t.name&&t.queryable).map(t=>t.name).join(","):""}function _X(e){if(e.spatialReferences.length>0)return e.spatialReferences;if(e.sublayers)for(const t of e.sublayers){const r=_X(t);if(r.length>0)return r}return[]}function xX(e){let t=[];return e.forEach(r=>{t.push(r),r.sublayers&&r.sublayers.length&&(t=t.concat(xX(r.sublayers)),delete r.sublayers)}),t}function ZM(e,t,r){var i;return(i=t.getAttribute(e))!=null?i:r}function Qxe(e,t,r,i){const n=Nn(e,r);return n?ZM(t,n,i):i}function Nn(e,t){for(let r=0;r<t.childNodes.length;r++){const i=t.childNodes[r];if(SX(i)&&i.nodeName===e)return i}return null}function YM(e,t){const r=[];for(let i=0;i<t.childNodes.length;i++){const n=t.childNodes[i];SX(n)&&n.nodeName===e&&r.push(n)}return r}function _u(e,t,r){const i=Nn(e,t);return i?i.textContent:r}function C1(e,t,r){if(!e)return null;const i=parseFloat(e.getAttribute("minx")),n=parseFloat(e.getAttribute("miny")),s=parseFloat(e.getAttribute("maxx")),o=parseFloat(e.getAttribute("maxy"));let a,l,u,h;r?(a=isNaN(n)?-Number.MAX_VALUE:n,l=isNaN(i)?-Number.MAX_VALUE:i,u=isNaN(o)?Number.MAX_VALUE:o,h=isNaN(s)?Number.MAX_VALUE:s):(a=isNaN(i)?-Number.MAX_VALUE:i,l=isNaN(n)?-Number.MAX_VALUE:n,u=isNaN(s)?Number.MAX_VALUE:s,h=isNaN(o)?Number.MAX_VALUE:o);const d=new Fe({wkid:t});return new nt({xmin:a,ymin:l,xmax:u,ymax:h,spatialReference:d})}function hV(e,t){const r=Nn(t,e);if(r){const i=Nn("DCPType",r);if(i){const n=Nn("HTTP",i);if(n){const s=Nn("Get",n);if(s){let o=Qxe("OnlineResource","xlink:href",s,null);if(o)return o.indexOf("&")===o.length-1&&(o=o.substring(0,o.length-1)),rSe(o,["service","request"])}}}}return null}function dV(e,t){const r=YM("Operation",e);if(r.length===0)return YM("Format",Nn(t,e)).map(n=>n.textContent);const i=[];return r.forEach(n=>{n.getAttribute("name")===t&&YM("Format",n).forEach(s=>{i.push(s.textContent)})}),i}function pV(e,t,r){const i=Nn(t,e);if(!i)return r;const{textContent:n}=i;if(n==null||n==="")return r;const s=Number(n);return isNaN(s)?r:s}function Ub(e,t,r){var i;if(!e)return null;const n={id:r.idCounter++,fullExtents:[],parentLayerId:null,queryable:e.getAttribute("queryable")==="1",spatialReferences:[],sublayers:null},s=Nn("LatLonBoundingBox",e),o=Nn("EX_GeographicBoundingBox",e);let a=null;s&&(a=C1(s,4326)),o&&(a=new nt(0,0,0,0,new Fe({wkid:4326})),a.xmin=parseFloat(_u("westBoundLongitude",o,"0")),a.ymin=parseFloat(_u("southBoundLatitude",o,"0")),a.xmax=parseFloat(_u("eastBoundLongitude",o,"0")),a.ymax=parseFloat(_u("northBoundLatitude",o,"0"))),s||o||(a=new nt(-180,-90,180,90,new Fe({wkid:4326}))),n.minScale=pV(e,"MaxScaleDenominator",0),n.maxScale=pV(e,"MinScaleDenominator",0);const l=["1.0.0","1.1.0","1.1.1"].indexOf(t)>-1?"SRS":"CRS";return Array.prototype.slice.call(e.childNodes).forEach(u=>{if(u.nodeName==="Name")n.name=u.textContent||"";else if(u.nodeName==="Title")n.title=u.textContent||"";else if(u.nodeName==="Abstract")n.description=u.textContent||"";else if(u.nodeName==="BoundingBox"){const h=u.getAttribute(l);if(h&&h.indexOf("EPSG:")===0){const f=parseInt(h.substring(5),10);f===0||isNaN(f)||a||(a=t==="1.3.0"?C1(u,f,_P(f)):C1(u,f))}const d=h&&h.indexOf(":");if(d&&d>-1){let f=parseInt(h.substring(d+1,h.length),10);f===0||isNaN(f)||(f=qx[f]?qx[f]:f);const m=t==="1.3.0"?C1(u,f,_P(f)):C1(u,f);n.fullExtents.push(m)}}else if(u.nodeName===l)u.textContent.split(" ").forEach(h=>{const d=h.includes(":")?parseInt(h.split(":")[1],10):parseInt(h,10);if(d!==0&&!isNaN(d)){const f=qx[d]?qx[d]:d;n.spatialReferences.includes(f)||n.spatialReferences.push(f)}});else if(u.nodeName!=="Style"||n.legendURL){if(u.nodeName==="Layer"){const h=Ub(u,t,r);h&&(h.parentLayerId=n.id,n.sublayers||(n.sublayers=[]),n.sublayers.push(h))}}else{const h=Nn("LegendURL",u);if(h){const d=Nn("OnlineResource",h);d&&(n.legendURL=d.getAttribute("xlink:href"))}}}),n.extent=(i=a)==null?void 0:i.toJSON(),n.dimensions=YM("Dimension",e).filter(u=>u.getAttribute("name")&&u.getAttribute("units")&&u.textContent).map(u=>{const h=u.getAttribute("name"),d=u.getAttribute("units"),f=u.textContent,m=u.getAttribute("unitSymbol"),g=u.getAttribute("default"),b=ZM("default",u,"0")!=="0",w=ZM("nearestValue",u,"0")!=="0",_=ZM("current",u,"0")!=="0";return/^time$/i.test(h)&&/^ISO8601$/i.test(d)?{name:"time",units:"ISO8601",extent:yV(f),default:yV(g),multipleValues:b,nearestValue:w,current:_}:/^elevation$/i.test(h)?{name:"elevation",units:d,extent:fV(f),unitSymbol:m,default:fV(g),multipleValues:b,nearestValue:w}:{name:h,units:d,extent:mV(f),unitSymbol:m,default:mV(g),multipleValues:b,nearestValue:w}}),n}function eSe(e){return Array.isArray(e)&&e.length>0&&e[0]instanceof Date}function SX(e){return e.nodeType===Node.ELEMENT_NODE}function tSe(e){return e.name==="time"}function rSe(e,t){const r=[],i=Kr(e);for(const n in i.query)i.query.hasOwnProperty(n)&&t.indexOf(n.toLowerCase())===-1&&r.push(n+"="+i.query[n]);return i.path+(r.length?"?"+r.join("&"):"")}function fV(e){if(!e)return null;const t=e.indexOf("/")!==-1,r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:parseFloat(n[0]),max:parseFloat(n[1]),resolution:n.length>=3&&n[2]!=="0"?parseFloat(n[2]):void 0}}).filter(i=>i):r.map(i=>parseFloat(i))}function mV(e){if(!e)return null;const t=e.indexOf("/")!==-1,r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:n[0],max:n[1],resolution:n.length>=3&&n[2]!=="0"?n[2]:void 0}}).filter(i=>i):r}function yV(e){if(!e)return null;const t=e.indexOf("/")!==-1,r=e.split(",");return t?r.map(i=>{const n=i.split("/");return n.length<2?null:{min:new Date(n[0]),max:new Date(n[1]),resolution:n.length>=3&&n[2]!=="0"?iSe(n[2]):void 0}}).filter(i=>i):r.map(i=>new Date(i))}function iSe(e){const t=/(?:p(\d+y|\d+(?:.|,)\d+y)?(\d+m|\d+(?:.|,)\d+m)?(\d+d|\d+(?:.|,)\d+d)?)?(?:t(\d+h|\d+(?:.|,)\d+h)?(\d+m|\d+(?:.|,)\d+m)?(\d+s|\d+(?:.|,)\d+s)?)?/i,r=e.match(t);return r?{years:Vy(r[1]),months:Vy(r[2]),days:Vy(r[3]),hours:Vy(r[4]),minutes:Vy(r[5]),seconds:Vy(r[6])}:null}function Vy(e){if(!e)return 0;const t=/(?:\d+(?:.|,)\d+|\d+)/,r=e.match(t);if(!r)return 0;const i=r[0].replace(",",".");return Number(i)}function s5(e){return e.toISOString().replace(/\.[0-9]{3}/,"")}const gV=new Set([102100,3857,102113,900913]),nSe=new Set([3395,54004]);function sSe(e,t){let r=e.wkid;return ce(t)?r:(!t.includes(r)&&e.latestWkid&&(r=e.latestWkid),gV.has(r)?t.find(i=>gV.has(i))||t.find(i=>nSe.has(i))||102100:r)}const o5=new lt({bmp:"image/bmp",gif:"image/gif",jpg:"image/jpeg",png:"image/png",svg:"image/svg+xml"},{ignoreUnknown:!1});let Ut=class extends ro(by(x$(Kv(wy(Zv(Yv(Ip(Sh)))))))){constructor(...e){super(...e),this.allSublayers=new Kd({getCollections:()=>[this.sublayers],getChildrenFunction:t=>t.sublayers}),this.customParameters=null,this.customLayerParameters=null,this.copyright=null,this.description=null,this.dimensions=null,this.fullExtent=null,this.fullExtents=null,this.featureInfoFormat=null,this.featureInfoUrl=null,this.imageFormat=null,this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.legendEnabled=!0,this.mapUrl=null,this.isReference=null,this.operationalLayerType="WMS",this.spatialReference=null,this.spatialReferences=null,this.sublayers=null,this.type="wms",this.url=null,this.version=null,this.watch("sublayers",(t,r)=>{if(r){for(const i of r)i.layer=null;this.handles.remove("wms-sublayer")}if(t){for(const i of t)i.parent=this,i.layer=this;this.handles.add([t.on("after-add",({item:i})=>{i.parent=this,i.layer=this}),t.on("after-remove",({item:i})=>{i.parent=null,i.layer=null})],"wms-sublayer")}},!0)}normalizeCtorArgs(e,t){return typeof e=="string"?{url:e,...t}:e}load(e){const t=U(e)?e.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WMS"]},e).catch(wh).then(()=>this._fetchService(t))),Promise.resolve(this)}readFullExtentFromItemOrMap(e,t){const r=t.extent;return new nt({xmin:r[0][0],ymin:r[0][1],xmax:r[1][0],ymax:r[1][1]})}writeFullExtent(e,t){t.extent=[[e.xmin,e.ymin],[e.xmax,e.ymax]]}readImageFormat(e,t){const r=t.supportedImageFormatTypes;return r&&r.indexOf("image/png")>-1?"image/png":r&&r[0]}readSpatialReferenceFromItemOrDocument(e,t){return new Fe(t.spatialReferences[0])}writeSpatialReferences(e,t){const r=this.spatialReference&&this.spatialReference.wkid;e&&r?(t.spatialReferences=e.filter(i=>i!==r),t.spatialReferences.unshift(r)):t.spatialReferences=e}readSublayersFromItemOrMap(e,t,r){return vV(t.layers,r,t.visibleLayers)}readSublayers(e,t,r){return vV(t.layers,r)}writeSublayers(e,t,r,i){t.layers=[];const n=new Map,s=e.flatten(({sublayers:o})=>o&&o.toArray()).toArray();s.forEach(o=>{typeof o.parent.id=="number"&&(n.has(o.parent.id)?n.get(o.parent.id).push(o.id):n.set(o.parent.id,[o.id]))}),s.forEach(o=>{const a={sublayer:o,...i},l=o.write({parentLayerId:typeof o.parent.id=="number"?o.parent.id:-1},a);if(n.has(o.id)&&(l.sublayerIds=n.get(o.id)),!o.sublayers&&o.name){const u=o.write({},a);delete u.id,t.layers.push(u)}}),t.visibleLayers=s.filter(o=>o.visible&&!o.sublayers).map(o=>o.name)}createExportImageParameters(e,t,r,i){const n=i&&i.pixelRatio||1,s=uP({extent:e,width:t})*n,o=new qc({layer:this,scale:s}),{xmin:a,ymin:l,xmax:u,ymax:h,spatialReference:d}=e,f=sSe(d,this.spatialReferences),m=this.version==="1.3.0"&&_P(f)?`${l},${a},${h},${u}`:`${a},${l},${u},${h}`,g=o.toJSON();return{bbox:m,[this.version==="1.3.0"?"crs":"srs"]:isNaN(f)?void 0:"EPSG:"+f,...g}}async fetchImage(e,t,r,i){var n,s;const o=this.mapUrl,a=this.createExportImageParameters(e,t,r,i);if(!a.layers){const f=document.createElement("canvas");return f.width=t,f.height=r,f}const l=i==null||(n=i.timeExtent)==null?void 0:n.start,u=i==null||(s=i.timeExtent)==null?void 0:s.end,h=U(l)&&U(u)?l.getTime()===u.getTime()?s5(l):`${s5(l)}/${s5(u)}`:void 0,d={responseType:"image",query:this._mixCustomParameters({width:t,height:r,...a,time:h,...this.refreshParameters}),signal:i?.signal};return Ee(o,d).then(f=>f.data)}fetchFeatureInfo(e,t,r,i,n){const s=uP({extent:e,width:t}),o=new qc({layer:this,scale:s}),a=Xxe(o.visibleSublayers);if(!this.featureInfoUrl||!a)return null;const l=this.version==="1.3.0"?{I:i,J:n}:{x:i,y:n},u={query_layers:a,request:"GetFeatureInfo",info_format:this.featureInfoFormat,feature_count:25,width:t,height:r,...l},h={...this.createExportImageParameters(e,t,r),...u},d=this._mixCustomParameters(h),f=WA(this.featureInfoUrl,d),m=document.createElement("iframe");m.src=f,m.style.border="none",m.style.margin="0",m.style.width="100%",m.setAttribute("sandbox","");const g=new fy({title:this.title,content:m});return new xn({sourceLayer:this,popupTemplate:g})}findSublayerById(e){return this.allSublayers.find(t=>t.id===e)}findSublayerByName(e){return this.allSublayers.find(t=>t.name===e)}supportsSpatialReference(e){return Q0e(this.url)||this.spatialReferences.some(t=>{const r=t===900913?Fe.WebMercator:new Fe({wkid:t});return Ll(r,e)})}async _fetchService(e){if(!this.resourceInfo){this.parsedUrl.query&&this.parsedUrl.query.service&&(this.parsedUrl.query.SERVICE=this.parsedUrl.query.service,delete this.parsedUrl.query.service),this.parsedUrl.query&&this.parsedUrl.query.request&&(this.parsedUrl.query.REQUEST=this.parsedUrl.query.request,delete this.parsedUrl.query.request);const t=await Ee(this.parsedUrl.path,{query:{SERVICE:"WMS",REQUEST:"GetCapabilities",...this.parsedUrl.query,...this.customParameters},responseType:"xml",signal:e});this.resourceInfo=Kxe(t.data)}if(this.parsedUrl){const t=new ku(this.parsedUrl.path);t.scheme!=="https"||t.port&&t.port!=="443"||Kt.request.httpsDomains.indexOf(t.host)!==-1||Kt.request.httpsDomains.push(t.host)}this.read(this.resourceInfo,{origin:"service"})}_mixCustomParameters(e){if(!this.customLayerParameters&&!this.customParameters)return e;const t={...this.customParameters,...this.customLayerParameters};for(const r in t)e[r.toLowerCase()]=t[r];return e}};function oSe(e,t){return e.some(r=>{for(const i in r)if(dW(r,i,null,t))return!0;return!1})}function vV(e,t,r){const i=new Map;e.every(s=>s.id==null)&&(e=ie(e)).forEach((s,o)=>s.id=o);for(const s of e){const o=new wP;o.read(s,t),r?.indexOf(o.name)===-1&&(o.visible=!1),i.set(o.id,o)}const n=[];for(const s of e){const o=i.get(s.id);if(s.parentLayerId!=null&&s.parentLayerId>=0){const a=i.get(s.parentLayerId);a.sublayers||(a.sublayers=new Je),a.sublayers.unshift(o)}else n.unshift(o)}return n}c([p({readOnly:!0})],Ut.prototype,"allSublayers",void 0),c([p({json:{type:Object,write:!0}})],Ut.prototype,"customParameters",void 0),c([p({json:{type:Object,write:!0}})],Ut.prototype,"customLayerParameters",void 0),c([p({type:String,json:{write:!0}})],Ut.prototype,"copyright",void 0),c([p()],Ut.prototype,"description",void 0),c([p({readOnly:!0})],Ut.prototype,"dimensions",void 0),c([p({json:{type:[[Number]],read:{source:"extent"},write:{target:"extent"},origins:{"web-document":{write:{ignoreOrigin:!0}},"portal-item":{write:{ignoreOrigin:!0}}}}})],Ut.prototype,"fullExtent",void 0),c([ye(["web-document","portal-item"],"fullExtent",["extent"])],Ut.prototype,"readFullExtentFromItemOrMap",null),c([Se(["web-document","portal-item"],"fullExtent",{extent:{type:[[Number]]}})],Ut.prototype,"writeFullExtent",null),c([p()],Ut.prototype,"fullExtents",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ut.prototype,"featureInfoFormat",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ut.prototype,"featureInfoUrl",void 0),c([p({type:String,json:{origins:{"web-document":{default:"image/png",type:o5.jsonValues,read:{reader:o5.read,source:"format"},write:{writer:o5.write,target:"format"}}}}})],Ut.prototype,"imageFormat",void 0),c([ye("imageFormat",["supportedImageFormatTypes"])],Ut.prototype,"readImageFormat",null),c([p({type:Number,json:{read:{source:"maxHeight"},write:{target:"maxHeight"}}})],Ut.prototype,"imageMaxHeight",void 0),c([p({type:Number,json:{read:{source:"maxWidth"},write:{target:"maxWidth"}}})],Ut.prototype,"imageMaxWidth",void 0),c([p()],Ut.prototype,"imageTransparency",void 0),c([p(HN)],Ut.prototype,"legendEnabled",void 0),c([p({type:["show","hide","hide-children"]})],Ut.prototype,"listMode",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ut.prototype,"mapUrl",void 0),c([p({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],Ut.prototype,"isReference",void 0),c([p({type:["WMS"]})],Ut.prototype,"operationalLayerType",void 0),c([p({type:Fe,json:{origins:{service:{read:{source:"extent.spatialReference"}}},write:!1}})],Ut.prototype,"spatialReference",void 0),c([ye(["web-document","portal-item"],"spatialReference",["spatialReferences"])],Ut.prototype,"readSpatialReferenceFromItemOrDocument",null),c([p({type:[jt],json:{read:!1,origins:{service:{read:!0},"web-document":{read:!1,write:{ignoreOrigin:!0}},"portal-item":{read:!1,write:{ignoreOrigin:!0}}}}})],Ut.prototype,"spatialReferences",void 0),c([Se(["web-document","portal-item"],"spatialReferences")],Ut.prototype,"writeSpatialReferences",null),c([p({type:Je.ofType(wP),json:{write:{target:"layers",overridePolicy(e,t,r){if(oSe(this.allSublayers,r))return{ignoreOrigin:!0}}}}})],Ut.prototype,"sublayers",void 0),c([ye(["web-document","portal-item"],"sublayers",["layers","visibleLayers"])],Ut.prototype,"readSublayersFromItemOrMap",null),c([ye("service","sublayers",["layers"])],Ut.prototype,"readSublayers",null),c([Se("sublayers",{layers:{type:[wP]},visibleLayers:{type:[String]}})],Ut.prototype,"writeSublayers",null),c([p({json:{read:!1},readOnly:!0,value:"wms"})],Ut.prototype,"type",void 0),c([p(_2)],Ut.prototype,"url",void 0),c([p({type:String,json:{write:{ignoreOrigin:!0}}})],Ut.prototype,"version",void 0),Ut=c([N("esri.layers.WMSLayer")],Ut);const MX=Ut;var nit=Object.freeze(Object.defineProperty({__proto__:null,default:MX},Symbol.toStringTag,{value:"Module"}));let If=class extends me{};c([p({type:Boolean,json:{write:!0}})],If.prototype,"timeDataCumulative",void 0),c([p({type:Number,json:{write:!0}})],If.prototype,"timeOffset",void 0),c([p({type:String,json:{write:!0}})],If.prototype,"timeOffsetUnits",void 0),c([p({type:Boolean,json:{write:!0}})],If.prototype,"useTime",void 0),If=c([N("esri.layers.support.LayerTimeOptions")],If);const aSe=If;function lSe(e){return e&&e.type==="base-tile"||e.type==="tile"||e.type==="elevation"||e.type==="imagery-tile"||e.type==="base-elevation"||e.type==="open-street-map"||e.type==="wcs"||e.type==="web-tile"||e.type==="wmts"||e.type==="vector-tile"}function uSe(e){const t=/[:;]/,r=[];let i=!1;if(e&&(e.forEach(function(n,s){r.push([s,n]),!i&&t.test(n)&&(i=!0)}),r.length>0)){let n;if(i){const s={};r.forEach(o=>{s[o[0]]=o[1]}),n=JSON.stringify(s)}else{const s=[];r.forEach(o=>{s.push(o[0]+":"+o[1])}),n=s.join(";")}return n}return null}function cSe(e){if(!e)return;const t=[];return e.forEach(function(r,i){t.push('"'+i+'":'+JSON.stringify(r))}),t.length?"{"+t.join(",")+"}":void 0}let _s=class extends Ze{constructor(e){super(e),this.extent=null,this.width=null,this.height=null,this.dpi=null,this.format=null,this.imageSpatialReference=null,this.layerDefinitions=[],this.layerOption=null,this.layerIds=null,this.transparent=!0,this.timeExtent=null,this.layerTimeOptions=null}toJSON(){let e,t=this.extent;if(t=t&&t.clone()._normalize(!0),this.timeExtent){const a=this.timeExtent.toJSON(),{start:l,end:u}=a;l==null&&u==null||(e=l===u?""+l:`${l??"null"},${u??"null"}`)}const r=this.layerOption,i=t?t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()):null,n=this.imageSpatialReference,s={dpi:this.dpi,format:this.format,transparent:this.transparent,size:this.width!==null&&this.height!==null?this.width+","+this.height:null,bbox:t?t.xmin+","+t.ymin+","+t.xmax+","+t.ymax:null,bboxSR:i,layers:r?r+":"+this.layerIds.join(","):null,layerDefs:uSe(this.layerDefinitions),layerTimeOptions:cSe(this.layerTimeOptions),imageSR:n?n.wkid||JSON.stringify(n.toJSON()):i,time:e},o={};return Object.keys(s).filter(a=>s[a]!==null).forEach(a=>o[a]=s[a]),o}};c([p({type:nt})],_s.prototype,"extent",void 0),c([p()],_s.prototype,"width",void 0),c([p()],_s.prototype,"height",void 0),c([p()],_s.prototype,"dpi",void 0),c([p()],_s.prototype,"format",void 0),c([p({type:Fe})],_s.prototype,"imageSpatialReference",void 0),c([p()],_s.prototype,"layerDefinitions",void 0),c([p()],_s.prototype,"layerOption",void 0),c([p()],_s.prototype,"layerIds",void 0),c([p()],_s.prototype,"transparent",void 0),c([p({type:bs})],_s.prototype,"timeExtent",void 0),c([p({type:[aSe]})],_s.prototype,"layerTimeOptions",void 0),_s=c([N("esri.layers.support.ImageParameters")],_s);var xP;let KM=xP=class extends me{constructor(e){super(e),this.type="none"}clone(){return new xP({type:this.type})}};c([tt({none:"none",stayAbove:"stay-above"})],KM.prototype,"type",void 0),KM=xP=c([N("esri.ground.NavigationConstraint")],KM);var SP;const bV=Te.getLogger("esri.Ground");let $c=SP=class extends a2(Lo){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Je;const t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&bV.error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},r=i=>{i.parent=null};this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>r(i.item))}initialize(){this.when().catch(e=>{bV.error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){const e=this.layers.removeAll();for(const t of e)t.destroy();this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e={...e}).resourceInfo),e}set layers(e){this._set("layers",Rm(e,this._get("layers")))}writeLayers(e,t,r,i){const n=[];e&&(i={...i,layerContainerType:"ground"},e.forEach(s=>{if("write"in s){const o={};Oye(s)().write(o,i)&&n.push(o)}else i&&i.messages&&i.messages.push(new Z("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=n}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return jL(this,e=>{e(this.layers)})}async queryElevation(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await ae(()=>import("./ElevationQuery.f3852bc1.js"),[]);$r(t);const i=new r,n=this.layers.filter(wV).toArray();return i.queryAll(n,e,t)}async createElevationSampler(e,t){await this.load({signal:t?.signal});const{ElevationQuery:r}=await ae(()=>import("./ElevationQuery.f3852bc1.js"),[]);$r(t);const i=new r,n=this.layers.filter(wV).toArray();return i.createSamplerAll(n,e,t)}clone(){const e={opacity:this.opacity,surfaceColor:ie(this.surfaceColor),navigationConstraint:ie(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new SP({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){const t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve(null)}_loadLayersFromJSON(e,t,r){const i=t&&t.origin||"web-scene",n=t&&t.portal||null,s=t&&t.url||null;return ae(()=>import("./layersCreator.a7491b53.js"),["assets/layersCreator.a7491b53.js","assets/lazyLayerLoader.b01d3002.js","assets/portalLayers.aa08137a.js","assets/layersLoader.0d4ab3a2.js","assets/jsonContext.c19e06f9.js"]).then(({populateOperationalLayers:o})=>{$r(r);const a=[];if(e.layers&&Array.isArray(e.layers)){const l={context:{origin:i,url:s,portal:n,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,e.layers,l))}return Zs(a)}).then(()=>{})}};function hSe(e){return e&&"createElevationSampler"in e}function wV(e){return e.type==="elevation"||hSe(e)}c([p({json:{read:!1}})],$c.prototype,"layers",null),c([Se("layers")],$c.prototype,"writeLayers",null),c([p({readOnly:!0})],$c.prototype,"resourceInfo",void 0),c([p({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:jt,read:{reader:u_,source:"transparency"},write:{writer:(e,t)=>{t.transparency=pN(e)},target:"transparency"}}})],$c.prototype,"opacity",void 0),c([p({type:Le,json:{type:[jt],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],$c.prototype,"surfaceColor",void 0),c([p({type:KM,json:{write:!0}})],$c.prototype,"navigationConstraint",void 0),$c=SP=c([N("esri.Ground")],$c);const gI=$c;function dSe(e){var t;return!!(e&&e.loaded&&"capabilities"in e&&e!=null&&(t=e.capabilities)!=null&&t.operations&&"supportsEditing"in e.capabilities.operations&&e.capabilities.operations.supportsEditing===!0)&&!("editingEnabled"in e&&!e.editingEnabled)}const _V=Te.getLogger("esri.support.basemapUtils");function pSe(){return{}}function fSe(e){for(const t in e){const r=e[t];r?.destroyed===!1&&r.destroy(),delete e[t]}}function mSe(e,t){var r;let i;if(typeof e=="string"){if(!(e in rC)){const n=Object.entries(rC).filter(([s,o])=>Kt.apiKey&&!o.classic||!Kt.apiKey&&o.classic&&!o.deprecated).map(([s])=>`"${s}"`).join(", ");return _V.warn(`Unable to find basemap definition for: ${e}. Try one of these: ${n}`),null}t&&(i=t[e]),i||(i=Vm.fromId(e),t&&(t[e]=i))}else i=br(Vm,e);return(r=i)!=null&&r.destroyed&&(_V.warn("The provided basemap is already destroyed",{basemap:i}),i=null),i}function ySe(e,t){return e===t?!0:wSe(xV(e),xV(t),{mustMatchReferences:!0})==="equal"}function xV(e){return e?!e.loaded&&e.resourceInfo?vSe(e.resourceInfo.data):{baseLayers:SV(e.baseLayers),referenceLayers:SV(e.referenceLayers)}:null}function SV(e){return(Je.isCollection(e)?e.toArray():e).map(gSe)}function gSe(e){return{type:e.type,url:IX("urlTemplate"in e&&e.urlTemplate||e.url||"styleUrl"in e&&e.styleUrl),minScale:"minScale"in e&&e.minScale!=null?e.minScale:0,maxScale:"maxScale"in e&&e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visible==null||!!e.visible}}function vSe(e){return e?{baseLayers:MV(e.baseMapLayers.filter(t=>!t.isReference)),referenceLayers:MV(e.baseMapLayers.filter(t=>t.isReference))}:null}function MV(e){return e.map(t=>bSe(t))}function bSe(e){let t;switch(e.layerType){case"VectorTileLayer":t="vector-tile";break;case"ArcGISTiledMapServiceLayer":t="tile";break;default:t="unknown"}return{type:t,url:IX(e.templateUrl||e.urlTemplate||e.styleUrl||e.url),minScale:e.minScale!=null?e.minScale:0,maxScale:e.maxScale!=null?e.maxScale:0,opacity:e.opacity!=null?e.opacity:1,visible:e.visibility==null||!!e.visibility}}function wSe(e,t,r){return e!=null!=(t!=null)?"not-equal":e?IV(e.baseLayers,t.baseLayers)?IV(e.referenceLayers,t.referenceLayers)?"equal":r.mustMatchReferences?"not-equal":"base-layers-equal":"not-equal":"equal"}function IV(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!_Se(e[r],t[r]))return!1;return!0}function _Se(e,t){return e.type===t.type&&e.url===t.url&&e.minScale===t.minScale&&e.maxScale===t.maxScale&&e.visible===t.visible&&e.opacity===t.opacity}function IX(e){return e?$o(e).replace(/^\s*https?:/i,"").toLowerCase():""}const xSe=Te.getLogger("esri.support.groundUtils"),TV={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function SSe(e){let t=null;if(typeof e=="string")if(e in TV){const r=TV[e];t=new gI({resourceInfo:{data:{layers:[r]}}})}else xSe.warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=br(gI,e);return t}function MSe(e){return e&&e.type==="group"}function MP(e,t,r){let i,n;if(e)for(let s=0,o=e.length;s<o;s++){if(i=e.getItemAt(s),i[t]===r)return i;if(MSe(i)&&(n=MP(i.layers,t,r),n))return n}}const $V=Te.getLogger("esri.support.LayersMixin"),ISe=e=>{let t=class extends e{constructor(...r){super(...r),this.layers=new Je;const i=o=>{o.parent&&"remove"in o.parent&&o.parent.remove(o)},n=o=>{o.parent=this,this.layerAdded(o),o.type!=="elevation"&&o.type!=="base-elevation"||$V.error(`Layer 'title:${o.title}, id:${o.id}' of type '${o.type}' is not supported as an operational layer and will therefore be ignored.`)},s=o=>{o.parent=null,this.layerRemoved(o)};this.layers.on("before-add",o=>i(o.item)),this.layers.on("after-add",o=>n(o.item)),this.layers.on("after-remove",o=>s(o.item))}destroy(){const r=this.layers.removeAll();for(const i of r)this.layerRemoved(i),i.destroy();this.layers.destroy()}set layers(r){this._set("layers",Rm(r,this._get("layers")))}add(r,i){const n=this.layers;if(i=n.getNextIndex(i),r instanceof Sh){const s=r;s.parent===this?this.reorder(s,i):n.add(s,i)}else hy(r)?r.then(s=>{this.destroyed||this.add(s,i)}):$V.error("#add()","The item being added is not a Layer or a Promise that resolves to a Layer.")}addMany(r,i){const n=this.layers;i=n.getNextIndex(i),r.slice().forEach(s=>{s.parent!==this?(n.add(s,i),i+=1):this.reorder(s,i)})}findLayerById(r){return MP(this.layers,"id",r)}findLayerByUid(r){return MP(this.layers,"uid",r)}remove(r){return this.layers.remove(r)}removeMany(r){return this.layers.removeMany(r)}removeAll(){return this.layers.removeAll()}reorder(r,i){return this.layers.reorder(r,i)}layerAdded(r){}layerRemoved(r){}};return c([p()],t.prototype,"layers",null),t=c([N("esri.support.LayersMixin")],t),t},TX="esri.support.TablesMixin",TSe=Te.getLogger(TX);function $Se(e){return e&&e.type==="group"}function IP(e,t,r){if(e)for(let i=0,n=e.length;i<n;i++){const s=e.getItemAt(i);if(s[t]===r)return s;if($Se(s)){const o=IP(s.tables,t,r);if(o)return o}}}const ESe=e=>{let t=class extends e{constructor(...r){super(...r),this.tables=new Je,this.tables.on("after-add",i=>{const n=i.item;n.parent&&n.parent!==this&&"tables"in n.parent&&n.parent.tables.remove(n),n.parent=this,n.type!=="feature"&&TSe.error(`Layer 'title:${n.title}, id:${n.id}' of type '${n.type}' is not supported as a table and will therefore be ignored.`)}),this.tables.on("after-remove",i=>{i.item.parent=null})}destroy(){const r=this.tables.removeAll();for(const i of r)i.destroy();this.tables.destroy()}set tables(r){this._set("tables",Rm(r,this._get("tables")))}findTableById(r){return IP(this.tables,"id",r)}findTableByUid(r){return IP(this.tables,"uid",r)}};return c([p()],t.prototype,"tables",null),t=c([N(TX)],t),t};let hu=class extends ESe(ISe(_h.EventedMixin(Ze))){constructor(e){super(e),this.allLayers=new Kd({getCollections:()=>{var t,r,i;return[(t=this.basemap)==null?void 0:t.baseLayers,(r=this.ground)==null?void 0:r.layers,this.layers,(i=this.basemap)==null?void 0:i.referenceLayers]},getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=new Kd({getCollections:()=>[this.tables,this.layers],getChildrenFunction:t=>{const r=[];return"tables"in t&&r.push(t.tables),"layers"in t&&r.push(t.layers),r},itemFilterFunction:t=>{const r=t.parent;return r&&"tables"in r&&r.tables.includes(t)}}),this.basemap=null,this.editableLayers=new Kd({getCollections:()=>[this.allLayers],itemFilterFunction:dSe}),this.ground=new gI,this._basemapCache=pSe()}destroy(){var e,t;this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),(e=this.ground)==null||e.destroy(),(t=this.basemap)==null||t.destroy(),fSe(this._basemapCache),this._basemapCache=null}castBasemap(e){return mSe(e,this._basemapCache)}castGround(e){const t=SSe(e);return ce(t)?this._get("ground"):t}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};c([p({readOnly:!0,dependsOn:[]})],hu.prototype,"allLayers",void 0),c([p({readOnly:!0})],hu.prototype,"allTables",void 0),c([p({type:Vm})],hu.prototype,"basemap",void 0),c([Ct("basemap")],hu.prototype,"castBasemap",null),c([p({readOnly:!0})],hu.prototype,"editableLayers",void 0),c([p({type:gI,nonNullable:!0})],hu.prototype,"ground",void 0),c([Ct("ground")],hu.prototype,"castGround",null),hu=c([N("esri.Map")],hu);const $X=hu;function ASe(e){const t=e.toJSON();return t.attachmentTypes&&(t.attachmentTypes=t.attachmentTypes.join(",")),t.keywords&&(t.keywords=t.keywords.join(",")),t.globalIds&&(t.globalIds=t.globalIds.join(",")),t.objectIds&&(t.objectIds=t.objectIds.join(",")),t.size&&(t.size=t.size.join(",")),t}function CSe(e,t){const r={};for(const i of e){const{parentObjectId:n,parentGlobalId:s,attachmentInfos:o}=i;for(const a of o){const{id:l}=a,u=yhe(Uhe(`${t}/${n}/attachments/${l}`)),h=UK.fromJSON(a);h.set({url:u,parentObjectId:n,parentGlobalId:s}),r[n]?r[n].push(h):r[n]=[h]}}return r}function kSe(e,t,r){let i={query:x2({...e.query,f:"json",...ASe(t)})};return r&&(i={...r,...i,query:{...r.query,...i.query}}),Ee(e.path+"/queryAttachments",i)}async function OSe(e,t,r){const i=Lt(e);return kSe(i,cI.from(t),{...r}).then(n=>CSe(n.data.attachmentGroups,i.path))}async function PSe(e,t,r){const i=Lt(e);return ZK(i,ni.from(t),{...r}).then(n=>({count:n.data.count,extent:nt.fromJSON(n.data.extent)}))}function RSe(e,t){return t}function S6(e,t,r,i){switch(r){case 0:return v_(e,t+i,0);case 1:return e.originPosition==="lowerLeft"?v_(e,t+i,1):DSe(e,t+i,1)}}function EX(e,t,r,i){return r===2?v_(e,t,2):S6(e,t,r,i)}function LSe(e,t,r,i){return r===2?v_(e,t,3):S6(e,t,r,i)}function NSe(e,t,r,i){return r===3?v_(e,t,3):EX(e,t,r,i)}function v_({translate:e,scale:t},r,i){return e[i]+r*t[i]}function DSe({translate:e,scale:t},r,i){return e[i]-r*t[i]}class FSe{constructor(t){this.options=t,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this.previousCoordinate=[0,0],this.transform=null,this.applyTransform=RSe,this.lengths=[],this.currentLengthIndex=0,this.toAddInCurrentPath=0,this.vertexDimension=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,this.AttributesConstructor=function(){}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(t){if(this.options.applyTransform&&(t.transform=null),this.AttributesConstructor=function(){},this.coordinateBuffer=null,this.lengths.length=0,!t.hasZ)return;const r=_Y(t.geometryType,this.options.sourceSpatialReference,t.spatialReference);if(!ce(r))for(const i of t.features)r(i.geometry)}createSpatialReference(){return{}}addField(t,r){t.fields.push(r);const i=t.fields.map(n=>n.name);this.AttributesConstructor=function(){for(const n of i)this[n]=null}}addFeature(t,r){t.features.push(r)}prepareFeatures(t){switch(this.transform=t.transform,this.options.applyTransform&&t.transform&&(this.applyTransform=this.deriveApplyTransform(t)),this.vertexDimension=2,t.hasZ&&this.vertexDimension++,t.hasM&&this.vertexDimension++,t.geometryType){case"esriGeometryPoint":this.addCoordinate=(r,i,n)=>this.addCoordinatePoint(r,i,n),this.createGeometry=r=>this.createPointGeometry(r);break;case"esriGeometryPolygon":this.addCoordinate=(r,i,n)=>this.addCoordinatePolygon(r,i,n),this.createGeometry=r=>this.createPolygonGeometry(r);break;case"esriGeometryPolyline":this.addCoordinate=(r,i,n)=>this.addCoordinatePolyline(r,i,n),this.createGeometry=r=>this.createPolylineGeometry(r);break;case"esriGeometryMultipoint":this.addCoordinate=(r,i,n)=>this.addCoordinateMultipoint(r,i,n),this.createGeometry=r=>this.createMultipointGeometry(r);break;default:t.geometryType}}createFeature(){return this.lengths.length=0,this.currentLengthIndex=0,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0,this.coordinateBuffer=null,this.coordinateBufferPtr=0,{attributes:new this.AttributesConstructor}}allocateCoordinates(){}addLength(t,r,i){this.lengths.length===0&&(this.toAddInCurrentPath=r),this.lengths.push(r)}addQueryGeometry(t,r){const{queryGeometry:i,queryGeometryType:n}=r,s=dP(i.clone(),i,!1,!1,this.transform),o=fX(s,n,!1,!1);t.queryGeometryType=n,t.queryGeometry={...o}}createPointGeometry(t){const r={x:0,y:0,spatialReference:t.spatialReference};return t.hasZ&&(r.z=0),t.hasM&&(r.m=0),r}addCoordinatePoint(t,r,i){switch(r=this.applyTransform(this.transform,r,i,0),i){case 0:t.x=r;break;case 1:t.y=r;break;case 2:"z"in t?t.z=r:t.m=r;break;case 3:t.m=r}}transformPathLikeValue(t,r){let i=0;return r<=1&&(i=this.previousCoordinate[r],this.previousCoordinate[r]+=t),this.applyTransform(this.transform,t,r,i)}addCoordinatePolyline(t,r,i){this.dehydratedAddPointsCoordinate(t.paths,r,i)}addCoordinatePolygon(t,r,i){this.dehydratedAddPointsCoordinate(t.rings,r,i)}addCoordinateMultipoint(t,r,i){i===0&&t.points.push([]);const n=this.transformPathLikeValue(r,i);t.points[t.points.length-1].push(n)}createPolygonGeometry(t){return{rings:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}createPolylineGeometry(t){return{paths:[[]],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}createMultipointGeometry(t){return{points:[],spatialReference:t.spatialReference,hasZ:!!t.hasZ,hasM:!!t.hasM}}dehydratedAddPointsCoordinate(t,r,i){i===0&&this.toAddInCurrentPath--==0&&(t.push([]),this.toAddInCurrentPath=this.lengths[++this.currentLengthIndex]-1,this.previousCoordinate[0]=0,this.previousCoordinate[1]=0);const n=this.transformPathLikeValue(r,i),s=t[t.length-1];i===0&&(this.coordinateBufferPtr=0,this.coordinateBuffer=new Array(this.vertexDimension),s.push(this.coordinateBuffer)),this.coordinateBuffer[this.coordinateBufferPtr++]=n}deriveApplyTransform(t){const{hasZ:r,hasM:i}=t;return r&&i?NSe:r?EX:i?LSe:S6}}async function jSe(e,t,r){const i=Lt(e),n={...r},s=ni.from(t),o=!s.quantizationParameters,{data:a}=await qK(i,s,new FSe({sourceSpatialReference:s.sourceSpatialReference,applyTransform:o}),n);return a}function VSe(e,t){const r=e.toJSON();return r.objectIds&&(r.objectIds=r.objectIds.join(",")),r.orderByFields&&(r.orderByFields=r.orderByFields.join(",")),!r.outFields||t!=null&&t.returnCountOnly?delete r.outFields:r.outFields.indexOf("*")!==-1?r.outFields="*":r.outFields=r.outFields.join(","),r.outSpatialReference&&(r.outSR=r.outSR.wkid||JSON.stringify(r.outSR.toJSON()),delete r.outSpatialReference),r.dynamicDataSource&&(r.layer=JSON.stringify({source:r.dynamicDataSource}),delete r.dynamicDataSource),r}async function USe(e,t,r){const i=await AX(e,t,r),n=i.data,s=n.geometryType,o=n.spatialReference,a={};for(const l of n.relatedRecordGroups){const u={fields:void 0,objectIdFieldName:void 0,geometryType:s,spatialReference:o,hasZ:!!n.hasZ,hasM:!!n.hasM,features:l.relatedRecords};if(l.objectId!=null)a[l.objectId]=u;else for(const h in l)l.hasOwnProperty(h)&&h!=="relatedRecords"&&(a[l[h]]=u)}return{...i,data:a}}async function zSe(e,t,r){const i=await AX(e,t,r,{returnCountOnly:!0}),n=i.data,s={};for(const o of n.relatedRecordGroups)o.objectId!=null&&(s[o.objectId]=o.count);return{...i,data:s}}async function AX(e,t,r={},i){const n=x2({...e.query,f:"json",...i,...VSe(t,i)});return Ee(e.path+"/queryRelatedRecords",{...r,query:{...r.query,...n}})}async function BSe(e,t,r){t=Bm.from(t);const i=Lt(e);return USe(i,t,r).then(n=>{const s=n.data,o={};return Object.keys(s).forEach(a=>o[a]=Bu.fromJSON(s[a])),o})}async function GSe(e,t,r){t=Bm.from(t);const i=Lt(e);return zSe(i,t,{...r}).then(n=>n.data)}const EV="Layer does not support extent calculation.";function qSe(e,t){var r,i;const n=e.geometry,s=e.toJSON(),o=s;if(U(n)&&(o.geometry=JSON.stringify(n),o.geometryType=Oi(n),o.inSR=n.spatialReference.wkid||JSON.stringify(n.spatialReference)),(r=s.topFilter)!=null&&r.groupByFields&&(o.topFilter.groupByFields=s.topFilter.groupByFields.join(",")),(i=s.topFilter)!=null&&i.orderByFields&&(o.topFilter.orderByFields=s.topFilter.orderByFields.join(",")),s.topFilter&&(o.topFilter=JSON.stringify(o.topFilter)),s.objectIds&&(o.objectIds=s.objectIds.join(",")),s.orderByFields&&(o.orderByFields=s.orderByFields.join(",")),s.outFields&&!(t!=null&&t.returnCountOnly||t!=null&&t.returnExtentOnly||t!=null&&t.returnIdsOnly)?s.outFields.indexOf("*")!==-1?o.outFields="*":o.outFields=s.outFields.join(","):delete o.outFields,s.outSR?o.outSR=s.outSR.wkid||JSON.stringify(s.outSR):n&&s.returnGeometry&&(o.outSR=o.inSR),s.returnGeometry&&delete s.returnGeometry,s.timeExtent){const a=s.timeExtent,{start:l,end:u}=a;l==null&&u==null||(o.time=l===u?l:`${l??"null"},${u??"null"}`),delete s.timeExtent}return o}async function HSe(e,t,r,i){const n=await C$(e,t,"json",i);return aI(t,r,n.data),n}async function WSe(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):C$(e,t,"json",r,{returnIdsOnly:!0})}async function JSe(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0,extent:null}}):C$(e,t,"json",r,{returnExtentOnly:!0,returnCountOnly:!0}).then(i=>{const n=i.data;if(n.hasOwnProperty("extent"))return i;if(n.features)throw new Error(EV);if(n.hasOwnProperty("count"))throw new Error(EV);return i})}function ZSe(e,t,r){return U(t.timeExtent)&&t.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):C$(e,t,"json",r,{returnIdsOnly:!0,returnCountOnly:!0})}function C$(e,t,r,i={},n={}){const s=typeof e=="string"?Kr(e):e,o=t.geometry?[t.geometry]:[];return i.responseType=r==="pbf"?"array-buffer":"json",_y(o,null,i).then(a=>{const l=a&&a[0];U(l)&&((t=t.clone()).geometry=l);const u=x2({...s.query,f:r,...n,...qSe(t,n)});return Ee(up(s.path,"queryTopFeatures"),{...i,query:{...u,...i.query}})})}async function YSe(e,t,r,i){const n=Lt(e),s={...i},{data:o}=await HSe(n,Fd.from(t),r,s);return Bu.fromJSON(o)}async function KSe(e,t,r){const i=Lt(e);return(await WSe(i,Fd.from(t),{...r})).data.objectIds}async function XSe(e,t,r){const i=Lt(e),n=await JSe(i,Fd.from(t),{...r});return{count:n.data.count,extent:nt.fromJSON(n.data.extent)}}async function QSe(e,t,r){const i=Lt(e);return(await ZSe(i,Fd.from(t),{...r})).data.count}async function eMe(e,t,r){const i=Lt(e),n={...i.query,f:"json",...t.toJSON()},s=Xr(n,r);return Ee(i.path+"/areasAndLengths",s).then(o=>o.data)}function Hm(e){return{geometryType:Oi(e[0]),geometries:e.map(t=>t.toJSON())}}function CX(e,t,r){const i=EJ(t);return e.map(n=>{const s=i.fromJSON(n);return s.spatialReference=r,s})}async function tMe(e,t,r,i){const n=t[0].spatialReference,s=Lt(e),o={...s.query,f:"json",sr:JSON.stringify(n.toJSON()),polygons:JSON.stringify(Hm(t).geometries),polylines:JSON.stringify(Hm(r).geometries)},a=Xr(o,i);return Ee(s.path+"/autoComplete",a).then(({data:l})=>(l.geometries||[]).map(({rings:u})=>new _n({spatialReference:n,rings:u})))}async function rMe(e,t,r){const i=Lt(e),n={...i.query,f:"json",...t.toJSON()},s=t.outSpatialReference||t.geometries[0].spatialReference,o=Xr(n,r);return Ee(i.path+"/buffer",o).then(a=>(a.data.geometries||[]).map(({rings:l})=>new _n({spatialReference:s,rings:l})))}async function iMe(e,t,r){const i=t[0].spatialReference,n=Lt(e),s={...n.query,f:"json",sr:JSON.stringify(i.toJSON()),geometries:JSON.stringify(Hm(t))},o=Xr(s,r);return Ee(n.path+"/convexHull",o).then(({data:a})=>Sr(a.geometry).set({spatialReference:i}))}async function nMe(e,t,r,i){const n=Lt(e),s=t[0].spatialReference,o={...i,query:{...n.query,f:"json",sr:JSON.stringify(s),target:JSON.stringify({geometryType:Oi(t[0]),geometries:t}),cutter:JSON.stringify(r)}},a=await Ee(n.path+"/cut",o),{cutIndexes:l,geometries:u=[]}=a.data;return{cutIndexes:l,geometries:u.map(h=>{const d=Sr(h);return d.spatialReference=s,d})}}async function sMe(e,t,r){const i=t.geometries[0].spatialReference,n=Lt(e),s={...n.query,f:"json",...t.toJSON()},o=Xr(s,r);return Ee(n.path+"/densify",o).then(({data:a})=>(a.geometries||[]).map(l=>Sr(l).set({spatialReference:i})))}async function oMe(e,t,r,i){const n=t[0].spatialReference,s=Lt(e);let o={query:{...s.query,f:"json",sr:JSON.stringify(n.toJSON()),geometries:JSON.stringify(Hm(t)),geometry:JSON.stringify({geometryType:Oi(r),geometry:r.toJSON()})}};return i&&(o={...i,...o}),Ee(s.path+"/difference",o).then(({data:a})=>(a.geometries||[]).map(l=>Sr(l).set({spatialReference:n})))}async function aMe(e,t,r){const i=Lt(e),n={...i.query,f:"json",...t.toJSON()},s=Xr(n,r);return Ee(i.path+"/distance",s).then(({data:o})=>o&&o.distance)}const kX=new lt({MGRS:"mgrs",USNG:"usng",UTM:"utm",GeoRef:"geo-ref",GARS:"gars",DMS:"dms",DDM:"ddm",DD:"dd"});async function lMe(e,t,r){const i={};t.sr!=null&&typeof t.sr=="object"?i.sr=t.sr.wkid||JSON.stringify(t.sr):i.sr=t.sr,i.strings=JSON.stringify(t.strings);const n=t.conversionType||"mgrs";i.conversionType=kX.toJSON(n),i.conversionMode=t.conversionMode;const s=Lt(e),o={...s.query,f:"json",...i},a=Xr(o,r);return Ee(s.path+"/fromGeoCoordinateString",a).then(({data:l})=>l.coordinates)}let yd=class extends me{constructor(e){super(e),this.deviationUnit=null,this.geometries=null,this.maxDeviation=null}};c([p({type:String,json:{write:!0}})],yd.prototype,"deviationUnit",void 0),c([p({json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],yd.prototype,"geometries",void 0),c([p({type:Number,json:{write:!0}})],yd.prototype,"maxDeviation",void 0),yd=c([N("esri.rest.support.GeneralizeParameters")],yd),yd.from=br(yd);const uMe=yd,cMe=new lt({109006:"centimeters",9102:"decimal-degrees",109005:"decimeters",9002:"feet",109009:"inches",9036:"kilometers",9001:"meters",9035:"miles",109007:"millimeters",109012:"nautical-miles",9096:"yards"});function hMe(e){const{geometries:t,deviationUnit:r,maxDeviation:i}=e.toJSON(),n={maxDeviation:i};return t&&t.length&&(n.geometries=JSON.stringify({geometryType:Oi(t[0]),geometries:t}),n.sr=JSON.stringify(t[0].spatialReference)),cMe.write(r,n,"deviationUnit"),n}async function dMe(e,t,r){const i=(t=uMe.from(t)).toJSON(),n=hMe(t),s=Lt(e),o={...s.query,f:"json",...n},a=i.geometries[0].spatialReference,l=Xr(o,r);return Ee(s.path+"/generalize",l).then(({data:u})=>(u.geometries||[]).map(h=>Sr(h).set({spatialReference:a})))}async function pMe(e,t,r,i){const n=t[0].spatialReference,s=Lt(e),o={...s.query,f:"json",sr:JSON.stringify(n.toJSON()),geometries:JSON.stringify(Hm(t)),geometry:JSON.stringify({geometryType:Oi(r),geometry:r.toJSON()})},a=Xr(o,i);return Ee(s.path+"/intersect",a).then(({data:l})=>(l.geometries||[]).map(u=>Sr(u).set({spatialReference:n})))}function fMe(e,t,r){const i=t.map(l=>l.toJSON()),n=t[0].spatialReference,s=Lt(e),o={...s.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n.toJSON()),polygons:JSON.stringify(i)},a=Xr(o,r);return Ee(s.path+"/labelPoints",a).then(({data:l})=>(l.labelPoints||[]).map(u=>Sr(u).set({spatialReference:n})))}let Ec=class extends me{constructor(e){super(e),this.calculationType=null,this.geodesic=null,this.lengthUnit=null,this.polylines=null}};c([p({type:String,json:{write:!0}})],Ec.prototype,"calculationType",void 0),c([p({type:Boolean,json:{write:!0}})],Ec.prototype,"geodesic",void 0),c([p({json:{write:!0}})],Ec.prototype,"lengthUnit",void 0),c([p({type:[Vi],json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],Ec.prototype,"polylines",void 0),Ec=c([N("esri.rest.support.LengthsParameters")],Ec),Ec.from=br(Ec);const mMe=Ec,yMe=new lt({preserveShape:"preserve-shape"});function gMe(e){const{polylines:t,lengthUnit:r,geodesic:i,calculationType:n}=e.toJSON(),s={};s.polylines=JSON.stringify(t);const o=e.polylines[0].spatialReference;return s.sr=o.wkid?o.wkid:JSON.stringify(o.toJSON()),r&&(s.lengthUnit=r),i&&(s.geodesic=i),n&&(s.calculationType=yMe.toJSON(n)),s}async function vMe(e,t,r){t=mMe.from(t);const i=gMe(t),n=Lt(e),s={...n.query,f:"json",...i},o=Xr(s,r);return Ee(n.path+"/lengths",o).then(({data:a})=>a)}let du=class extends me{constructor(e){super(e),this.bevelRatio=null,this.geometries=null,this.offsetDistance=null,this.offsetHow=null,this.offsetUnit=null}};c([p({type:Number,json:{write:!0}})],du.prototype,"bevelRatio",void 0),c([p({json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.geometries=e.map(r=>r.toJSON())}}}})],du.prototype,"geometries",void 0),c([p({type:Number,json:{write:!0}})],du.prototype,"offsetDistance",void 0),c([p({type:String,json:{write:!0}})],du.prototype,"offsetHow",void 0),c([p({type:String,json:{write:!0}})],du.prototype,"offsetUnit",void 0),du=c([N("esri.rest.support.OffsetParameters")],du),du.from=br(du);const bMe=du,wMe=new lt({esriGeometryOffsetBevelled:"bevelled",esriGeometryOffsetMitered:"mitered",esriGeometryOffsetRounded:"rounded"}),_Me=new lt({9001:"meters",9002:"feet",9036:"kilometers",9093:"miles",109012:"nautical-miles",109001:"yards"});function xMe(e){const{geometries:t,bevelRatio:r,offsetDistance:i,offsetHow:n,offsetUnit:s}=e.toJSON(),o={bevelRatio:r,offsetDistance:i};return t&&t.length&&(o.geometries=JSON.stringify({geometryType:Oi(t[0]),geometries:t}),o.sr=JSON.stringify(t[0].spatialReference)),n&&(o.offsetHow=wMe.toJSON(n)),s&&(o.offsetUnit=_Me.toJSON(s)),o}async function SMe(e,t,r){t=bMe.from(t);const i=xMe(t),n=Lt(e),s={...n.query,f:"json",...i},o=t.geometries[0].spatialReference,a=Xr(s,r);return Ee(n.path+"/offset",a).then(({data:l})=>(l.geometries||[]).map(u=>Sr(u).set({spatialReference:o})))}let Tf=class extends me{constructor(e){super(e),this.geometries=null,this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map(function(i){return i.toJSON()}),t=this.geometries[0],r={};return r.outSR=this.outSpatialReference.wkid||JSON.stringify(this.outSpatialReference.toJSON()),r.inSR=t.spatialReference.wkid||JSON.stringify(t.spatialReference.toJSON()),r.geometries=JSON.stringify({geometryType:Oi(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),this.transformForward!=null&&(r.transformForward=this.transformForward),r}};c([p()],Tf.prototype,"geometries",void 0),c([p({json:{read:{source:"outSR"}}})],Tf.prototype,"outSpatialReference",void 0),c([p()],Tf.prototype,"transformation",void 0),c([p()],Tf.prototype,"transformForward",void 0),Tf=c([N("esri.rest.support.ProjectParameters")],Tf);const MMe=Tf,IMe=br(MMe);async function TMe(e,t,r){t=IMe(t);const i=Lt(e),n={...i.query,f:"json",...t.toJSON()},s=t.outSpatialReference,o=Oi(t.geometries[0]),a=Xr(n,r);return Ee(i.path+"/project",a).then(({data:{geometries:l}})=>CX(l,o,s))}let Ac=class extends me{constructor(e){super(e),this.geometries1=null,this.geometries2=null,this.relation=null,this.relationParameter=null}};c([p({json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.geometries1=e.map(r=>r.toJSON())}}}})],Ac.prototype,"geometries1",void 0),c([p({json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.geometries2=e.map(r=>r.toJSON())}}}})],Ac.prototype,"geometries2",void 0),c([p({type:String,json:{write:!0}})],Ac.prototype,"relation",void 0),c([p({type:String,json:{write:!0}})],Ac.prototype,"relationParameter",void 0),Ac=c([N("esri.rest.support.RelationParameters")],Ac),Ac.from=br(Ac);const $Me=Ac,EMe=new lt({esriGeometryRelationCross:"cross",esriGeometryRelationDisjoint:"disjoint",esriGeometryRelationIn:"in",esriGeometryRelationInteriorIntersection:"interior-intersection",esriGeometryRelationIntersection:"intersection",esriGeometryRelationLineCoincidence:"line-coincidence",esriGeometryRelationLineTouch:"line-touch",esriGeometryRelationOverlap:"overlap",esriGeometryRelationPointTouch:"point-touch",esriGeometryRelationTouch:"touch",esriGeometryRelationWithin:"within",esriGeometryRelationRelation:"relation"});function AMe(e){const{geometries1:t,geometries2:r,relation:i,relationParameter:n}=e.toJSON(),s={};if(t&&t.length){s.geometries1=JSON.stringify({geometryType:Oi(t[0]),geometries:t});const o=t[0].spatialReference;s.sr=o.wkid?o.wkid:JSON.stringify(o)}return r&&r.length>0&&(s.geometries2=JSON.stringify({geometryType:Oi(r[0]),geometries:r})),i&&(s.relation=EMe.toJSON(i)),n&&(s.relationParam=n),s}async function CMe(e,t,r){t=$Me.from(t);const i=AMe(t),n=Lt(e),s={...n.query,f:"json",...i},o=Xr(s,r);return Ee(n.path+"/relation",o).then(({data:a})=>a.relations)}async function kMe(e,t,r,i){const n=t.spatialReference,s=Lt(e),o={...s.query,f:"json",sr:JSON.stringify(n.toJSON()),target:JSON.stringify({geometryType:Oi(t),geometry:t.toJSON()}),reshaper:JSON.stringify(r.toJSON())},a=Xr(o,i);return Ee(s.path+"/reshape",a).then(({data:l})=>Sr(l.geometry).set({spatialReference:n}))}async function OMe(e,t,r){const i=typeof e=="string"?Kr(e):e,n=t[0].spatialReference,s=Oi(t[0]),o={...r,query:{...i.query,f:"json",sr:n.wkid?n.wkid:JSON.stringify(n),geometries:JSON.stringify(Hm(t))}},{data:a}=await Ee(i.path+"/simplify",o);return CX(a.geometries,s,n)}async function PMe(e,t,r){const i={};t.sr!=null&&typeof t.sr=="object"?i.sr=t.sr.wkid||JSON.stringify(t.sr):i.sr=t.sr,i.coordinates=JSON.stringify(t.coordinates);const n=t.conversionType||"mgrs";i.conversionType=kX.toJSON(n),i.conversionMode=t.conversionMode,i.numOfDigits=t.numOfDigits,i.rounding=t.rounding,i.addSpaces=t.addSpaces;const s=Lt(e),o={...s.query,f:"json",...i},a=Xr(o,r);return Ee(s.path+"/toGeoCoordinateString",a).then(({data:l})=>l.strings)}let gd=class extends me{constructor(e){super(e),this.extendHow="default-curve-extension",this.polylines=null,this.trimExtendTo=null}};c([p({type:String,json:{write:!0}})],gd.prototype,"extendHow",void 0),c([p({type:[Vi],json:{read:{reader:e=>e?e.map(t=>Sr(t)):null},write:{writer:(e,t)=>{t.polylines=e.map(r=>r.toJSON())}}}})],gd.prototype,"polylines",void 0),c([p({json:{read:{reader:e=>e?Sr(e):null},write:{writer:(e,t)=>{t.trimExtendTo=e.toJSON()}}}})],gd.prototype,"trimExtendTo",void 0),gd=c([N("esri.rest.support.TrimExtendParameters")],gd),gd.from=br(gd);const RMe=gd,LMe=new lt({0:"default-curve-extension",1:"relocate-ends",2:"keep-end-attributes",4:"no-end-attributes",8:"no-extend-at-from",16:"no-extend-at-to"});function NMe(e){const{extendHow:t,polylines:r,trimExtendTo:i}=e.toJSON(),n={};return n.extendHow=LMe.toJSON(t),r&&r.length&&(n.polylines=JSON.stringify(r),n.sr=JSON.stringify(r[0].spatialReference)),i&&(n.trimExtendTo=JSON.stringify(i)),n}async function DMe(e,t,r){t=RMe.from(t);const i=NMe(t),n=Lt(e),s={...n.query,f:"json",...i},o=t.sr,a=Xr(s,r);return Ee(n.path+"/trimExtend",a).then(({data:l})=>(l.geometries||[]).map(({paths:u})=>new Vi({spatialReference:o,paths:u})))}async function FMe(e,t,r){const i=t[0].spatialReference,n=Lt(e),s={...n.query,f:"json",sr:JSON.stringify(i.toJSON()),geometries:JSON.stringify(Hm(t))},o=Xr(s,r);return Ee(n.path+"/union",o).then(({data:a})=>Sr(a.geometry).set({spatialReference:i}))}let Eg=class extends Ze{constructor(...e){super(...e),this.requestOptions=null,this.url=null}normalizeCtorArgs(e,t){return typeof e!="string"?e:{url:e,...t}}get parsedUrl(){return this._parseUrl(this.url)}_parseUrl(e){return e?Kr(e):null}_encode(e,t,r){const i={};for(const n in e){if(n==="declaredClass")continue;const s=e[n];if(s!=null&&typeof s!="function")if(Array.isArray(s)){i[n]=[];for(let o=0;o<s.length;o++)i[n][o]=this._encode(s[o])}else if(typeof s=="object")if(s.toJSON){const o=s.toJSON(r&&r[n]);i[n]=t?o:JSON.stringify(o)}else i[n]=t?s:JSON.stringify(s);else i[n]=s}return i}};c([p({readOnly:!0})],Eg.prototype,"parsedUrl",null),c([p()],Eg.prototype,"requestOptions",void 0),c([p({type:String})],Eg.prototype,"url",void 0),Eg=c([N("esri.tasks.Task")],Eg);const OX=Eg;let je=class extends OX{constructor(e){super(e),this.url=null}areasAndLengths(e,t){return eMe(this.url,e,t)}autoComplete(e,t,r){return tMe(this.url,e,t,r)}buffer(e,t){return rMe(this.url,e,t)}convexHull(e,t){return iMe(this.url,e,t)}cut(e,t,r){return nMe(this.url,e,t,r)}densify(e,t){return sMe(this.url,e,t)}difference(e,t,r){return oMe(this.url,e,t,r)}distance(e,t){return aMe(this.url,e,t)}fromGeoCoordinateString(e,t){return lMe(this.url,e,t)}generalize(e,t){return dMe(this.url,e,t)}intersect(e,t,r){return pMe(this.url,e,t,r)}labelPoints(e,t){return fMe(this.url,e,t)}lengths(e,t){return vMe(this.url,e,t)}offset(e,t){return SMe(this.url,e,t)}project(e,t){return TMe(this.url,e,t)}relation(e,t){return CMe(this.url,e,t)}reshape(e,t,r){return kMe(this.url,e,t,r)}simplify(e,t){return OMe(this.url,e,t)}toGeoCoordinateString(e,t){return PMe(this.url,e,t)}trimExtend(e,t){return DMe(this.url,e,t)}union(e,t){return FMe(this.url,e,t)}};je.UNIT_METER=9001,je.UNIT_GERMAN_METER=9031,je.UNIT_FOOT=9002,je.UNIT_SURVEY_FOOT=9003,je.UNIT_CLARKE_FOOT=9005,je.UNIT_FATHOM=9014,je.UNIT_NAUTICAL_MILE=9030,je.UNIT_SURVEY_CHAIN=9033,je.UNIT_SURVEY_LINK=9034,je.UNIT_SURVEY_MILE=9035,je.UNIT_KILOMETER=9036,je.UNIT_CLARKE_YARD=9037,je.UNIT_CLARKE_CHAIN=9038,je.UNIT_CLARKE_LINK=9039,je.UNIT_SEARS_YARD=9040,je.UNIT_SEARS_FOOT=9041,je.UNIT_SEARS_CHAIN=9042,je.UNIT_SEARS_LINK=9043,je.UNIT_BENOIT_1895A_YARD=9050,je.UNIT_BENOIT_1895A_FOOT=9051,je.UNIT_BENOIT_1895A_CHAIN=9052,je.UNIT_BENOIT_1895A_LINK=9053,je.UNIT_BENOIT_1895B_YARD=9060,je.UNIT_BENOIT_1895B_FOOT=9061,je.UNIT_BENOIT_1895B_CHAIN=9062,je.UNIT_BENOIT_1895B_LINK=9063,je.UNIT_INDIAN_FOOT=9080,je.UNIT_INDIAN_1937_FOOT=9081,je.UNIT_INDIAN_1962_FOOT=9082,je.UNIT_INDIAN_1975_FOOT=9083,je.UNIT_INDIAN_YARD=9084,je.UNIT_INDIAN_1937_YARD=9085,je.UNIT_INDIAN_1962_YARD=9086,je.UNIT_INDIAN_1975_YARD=9087,je.UNIT_FOOT_1865=9070,je.UNIT_RADIAN=9101,je.UNIT_DEGREE=9102,je.UNIT_ARCMINUTE=9103,je.UNIT_ARCSECOND=9104,je.UNIT_GRAD=9105,je.UNIT_GON=9106,je.UNIT_MICRORADIAN=9109,je.UNIT_ARCMINUTE_CENTESIMAL=9112,je.UNIT_ARCSECOND_CENTESIMAL=9113,je.UNIT_MIL6400=9114,je.UNIT_BRITISH_1936_FOOT=9095,je.UNIT_GOLDCOAST_FOOT=9094,je.UNIT_INTERNATIONAL_CHAIN=109003,je.UNIT_INTERNATIONAL_LINK=109004,je.UNIT_INTERNATIONAL_YARD=109001,je.UNIT_STATUTE_MILE=9093,je.UNIT_SURVEY_YARD=109002,je.UNIT_50KILOMETER_LENGTH=109030,je.UNIT_150KILOMETER_LENGTH=109031,je.UNIT_DECIMETER=109005,je.UNIT_CENTIMETER=109006,je.UNIT_MILLIMETER=109007,je.UNIT_INTERNATIONAL_INCH=109008,je.UNIT_US_SURVEY_INCH=109009,je.UNIT_INTERNATIONAL_ROD=109010,je.UNIT_US_SURVEY_ROD=109011,je.UNIT_US_NAUTICAL_MILE=109012,je.UNIT_UK_NAUTICAL_MILE=109013,je.UNIT_SQUARE_INCHES="esriSquareInches",je.UNIT_SQUARE_FEET="esriSquareFeet",je.UNIT_SQUARE_YARDS="esriSquareYards",je.UNIT_ACRES="esriAcres",je.UNIT_SQUARE_MILES="esriSquareMiles",je.UNIT_SQUARE_MILLIMETERS="esriSquareMillimeters",je.UNIT_SQUARE_CENTIMETERS="esriSquareCentimeters",je.UNIT_SQUARE_DECIMETERS="esriSquareDecimeters",je.UNIT_SQUARE_METERS="esriSquareMeters",je.UNIT_ARES="esriAres",je.UNIT_HECTARES="esriHectares",je.UNIT_SQUARE_KILOMETERS="esriSquareKilometers",c([p()],je.prototype,"url",void 0),je=c([N("esri.tasks.GeometryService")],je);const jMe=je;var VMe=Object.freeze(Object.defineProperty({__proto__:null,default:jMe},Symbol.toStringTag,{value:"Module"}));function sit(e){const t=[];return function*(){yield*t;for(const r of e)t.push(r),yield r}}function oit(e,t){for(const r of e)if(r!=null&&t(r))return r}function AV(e){return e!=null&&typeof e[Symbol.iterator]=="function"}const XM={widthBreakpoint:{getValue(e){const t=e.viewSize[0],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){const t=e.viewSize[1],r=e.breakpoints,i=this.values;return t<=r.xsmall?i.xsmall:t<=r.small?i.small:t<=r.medium?i.medium:t<=r.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){const t=e.viewSize,r=t[0],i=t[1],n=this.values;return i>=r?n.portrait:n.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},a5={xsmall:544,small:768,medium:992,large:1200};function UMe(e){const t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function l5(e,t){return t?XM[e].valueToClassName[t].split(" "):[]}const zMe=e=>{let t=class extends e{constructor(...r){super(...r),this._breakpointsHandles=new gi,this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=a5}initialize(){this._breakpointsHandles.add(It(this,["breakpoints","size"],this._updateClassNames))}destroy(){this.destroyed||(this._removeActiveClassNames(),this._breakpointsHandles.destroy(),this._breakpointsHandles=null)}set breakpoints(r){if(r===this._get("breakpoints"))return;const i=UMe(r);if(!i){const n=JSON.stringify(a5,null,2);console.warn("provided breakpoints are not valid, using defaults:"+n)}r=i?r:a5,this._set("breakpoints",{...r})}_updateClassNames(){if(!this.container)return;const r=cs.acquire(),i=cs.acquire();let n,s=!1;for(n in XM){const o=this[n],a=XM[n].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[n]=a,l5(n,o).forEach(l=>i.push(l)),l5(n,a).forEach(l=>r.push(l)))}s&&(this._applyClassNameChanges(r,i),cs.release(r),cs.release(i))}_applyClassNameChanges(r,i){const n=this.container;n&&(i.forEach(s=>n.classList.remove(s)),r.forEach(s=>n.classList.add(s)))}_removeActiveClassNames(){const r=this.container;if(!r)return;let i;for(i in XM)l5(i,this[i]).forEach(n=>r.classList.remove(n))}};return c([p()],t.prototype,"breakpoints",null),c([p()],t.prototype,"orientation",void 0),c([p()],t.prototype,"widthBreakpoint",void 0),c([p()],t.prototype,"heightBreakpoint",void 0),t=c([N("esri.views.BreakpointsOwner")],t),t};function M6(e){return typeof e=="string"?document.getElementById(e):e}function PX(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function CV(e,t){const r=t.parentNode;r&&r.insertBefore(e,t)}function kV(e,t){for(;;){const r=e.firstChild;if(!r)break;t.appendChild(r)}}/*!
 * @esri/arcgis-html-sanitizer - v2.9.0 - Mon Dec 13 2021 15:07:01 GMT-0500 (Eastern Standard Time)
 * Copyright (c) 2021 - Environmental Systems Research Institute, Inc.
 * Apache-2.0
 * 
 * js-xss
 * Copyright (c) 2012-2017 Zongmin Lei() <leizongmin@gmail.com>
 * http://ucdok.com
 * MIT License, see https://github.com/leizongmin/js-xss/blob/master/LICENSE for details
 * 
 * Lodash/isPlainObject
 * Copyright (c) JS Foundation and other contributors <https://js.foundation/>
 * MIT License, see https://raw.githubusercontent.com/lodash/lodash/4.17.10-npm/LICENSE for details
 */var BMe="[object Object]";function GMe(e){var t=!1;if(e!=null&&typeof e.toString!="function")try{t=!!(e+"")}catch{}return t}function qMe(e,t){return function(r){return e(t(r))}}var HMe=Function.prototype,RX=Object.prototype,LX=HMe.toString,WMe=RX.hasOwnProperty,JMe=LX.call(Object),ZMe=RX.toString,YMe=qMe(Object.getPrototypeOf,Object);function KMe(e){return!!e&&typeof e=="object"}function XMe(e){if(!KMe(e)||ZMe.call(e)!=BMe||GMe(e))return!1;var t=YMe(e);if(t===null)return!0;var r=WMe.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&LX.call(r)==JMe}var QMe=XMe,e0={exports:{}},Qr={},b_={exports:{}},xy={};function NX(){var e={};return e["align-content"]=!1,e["align-items"]=!1,e["align-self"]=!1,e["alignment-adjust"]=!1,e["alignment-baseline"]=!1,e.all=!1,e["anchor-point"]=!1,e.animation=!1,e["animation-delay"]=!1,e["animation-direction"]=!1,e["animation-duration"]=!1,e["animation-fill-mode"]=!1,e["animation-iteration-count"]=!1,e["animation-name"]=!1,e["animation-play-state"]=!1,e["animation-timing-function"]=!1,e.azimuth=!1,e["backface-visibility"]=!1,e.background=!0,e["background-attachment"]=!0,e["background-clip"]=!0,e["background-color"]=!0,e["background-image"]=!0,e["background-origin"]=!0,e["background-position"]=!0,e["background-repeat"]=!0,e["background-size"]=!0,e["baseline-shift"]=!1,e.binding=!1,e.bleed=!1,e["bookmark-label"]=!1,e["bookmark-level"]=!1,e["bookmark-state"]=!1,e.border=!0,e["border-bottom"]=!0,e["border-bottom-color"]=!0,e["border-bottom-left-radius"]=!0,e["border-bottom-right-radius"]=!0,e["border-bottom-style"]=!0,e["border-bottom-width"]=!0,e["border-collapse"]=!0,e["border-color"]=!0,e["border-image"]=!0,e["border-image-outset"]=!0,e["border-image-repeat"]=!0,e["border-image-slice"]=!0,e["border-image-source"]=!0,e["border-image-width"]=!0,e["border-left"]=!0,e["border-left-color"]=!0,e["border-left-style"]=!0,e["border-left-width"]=!0,e["border-radius"]=!0,e["border-right"]=!0,e["border-right-color"]=!0,e["border-right-style"]=!0,e["border-right-width"]=!0,e["border-spacing"]=!0,e["border-style"]=!0,e["border-top"]=!0,e["border-top-color"]=!0,e["border-top-left-radius"]=!0,e["border-top-right-radius"]=!0,e["border-top-style"]=!0,e["border-top-width"]=!0,e["border-width"]=!0,e.bottom=!1,e["box-decoration-break"]=!0,e["box-shadow"]=!0,e["box-sizing"]=!0,e["box-snap"]=!0,e["box-suppress"]=!0,e["break-after"]=!0,e["break-before"]=!0,e["break-inside"]=!0,e["caption-side"]=!1,e.chains=!1,e.clear=!0,e.clip=!1,e["clip-path"]=!1,e["clip-rule"]=!1,e.color=!0,e["color-interpolation-filters"]=!0,e["column-count"]=!1,e["column-fill"]=!1,e["column-gap"]=!1,e["column-rule"]=!1,e["column-rule-color"]=!1,e["column-rule-style"]=!1,e["column-rule-width"]=!1,e["column-span"]=!1,e["column-width"]=!1,e.columns=!1,e.contain=!1,e.content=!1,e["counter-increment"]=!1,e["counter-reset"]=!1,e["counter-set"]=!1,e.crop=!1,e.cue=!1,e["cue-after"]=!1,e["cue-before"]=!1,e.cursor=!1,e.direction=!1,e.display=!0,e["display-inside"]=!0,e["display-list"]=!0,e["display-outside"]=!0,e["dominant-baseline"]=!1,e.elevation=!1,e["empty-cells"]=!1,e.filter=!1,e.flex=!1,e["flex-basis"]=!1,e["flex-direction"]=!1,e["flex-flow"]=!1,e["flex-grow"]=!1,e["flex-shrink"]=!1,e["flex-wrap"]=!1,e.float=!1,e["float-offset"]=!1,e["flood-color"]=!1,e["flood-opacity"]=!1,e["flow-from"]=!1,e["flow-into"]=!1,e.font=!0,e["font-family"]=!0,e["font-feature-settings"]=!0,e["font-kerning"]=!0,e["font-language-override"]=!0,e["font-size"]=!0,e["font-size-adjust"]=!0,e["font-stretch"]=!0,e["font-style"]=!0,e["font-synthesis"]=!0,e["font-variant"]=!0,e["font-variant-alternates"]=!0,e["font-variant-caps"]=!0,e["font-variant-east-asian"]=!0,e["font-variant-ligatures"]=!0,e["font-variant-numeric"]=!0,e["font-variant-position"]=!0,e["font-weight"]=!0,e.grid=!1,e["grid-area"]=!1,e["grid-auto-columns"]=!1,e["grid-auto-flow"]=!1,e["grid-auto-rows"]=!1,e["grid-column"]=!1,e["grid-column-end"]=!1,e["grid-column-start"]=!1,e["grid-row"]=!1,e["grid-row-end"]=!1,e["grid-row-start"]=!1,e["grid-template"]=!1,e["grid-template-areas"]=!1,e["grid-template-columns"]=!1,e["grid-template-rows"]=!1,e["hanging-punctuation"]=!1,e.height=!0,e.hyphens=!1,e.icon=!1,e["image-orientation"]=!1,e["image-resolution"]=!1,e["ime-mode"]=!1,e["initial-letters"]=!1,e["inline-box-align"]=!1,e["justify-content"]=!1,e["justify-items"]=!1,e["justify-self"]=!1,e.left=!1,e["letter-spacing"]=!0,e["lighting-color"]=!0,e["line-box-contain"]=!1,e["line-break"]=!1,e["line-grid"]=!1,e["line-height"]=!1,e["line-snap"]=!1,e["line-stacking"]=!1,e["line-stacking-ruby"]=!1,e["line-stacking-shift"]=!1,e["line-stacking-strategy"]=!1,e["list-style"]=!0,e["list-style-image"]=!0,e["list-style-position"]=!0,e["list-style-type"]=!0,e.margin=!0,e["margin-bottom"]=!0,e["margin-left"]=!0,e["margin-right"]=!0,e["margin-top"]=!0,e["marker-offset"]=!1,e["marker-side"]=!1,e.marks=!1,e.mask=!1,e["mask-box"]=!1,e["mask-box-outset"]=!1,e["mask-box-repeat"]=!1,e["mask-box-slice"]=!1,e["mask-box-source"]=!1,e["mask-box-width"]=!1,e["mask-clip"]=!1,e["mask-image"]=!1,e["mask-origin"]=!1,e["mask-position"]=!1,e["mask-repeat"]=!1,e["mask-size"]=!1,e["mask-source-type"]=!1,e["mask-type"]=!1,e["max-height"]=!0,e["max-lines"]=!1,e["max-width"]=!0,e["min-height"]=!0,e["min-width"]=!0,e["move-to"]=!1,e["nav-down"]=!1,e["nav-index"]=!1,e["nav-left"]=!1,e["nav-right"]=!1,e["nav-up"]=!1,e["object-fit"]=!1,e["object-position"]=!1,e.opacity=!1,e.order=!1,e.orphans=!1,e.outline=!1,e["outline-color"]=!1,e["outline-offset"]=!1,e["outline-style"]=!1,e["outline-width"]=!1,e.overflow=!1,e["overflow-wrap"]=!1,e["overflow-x"]=!1,e["overflow-y"]=!1,e.padding=!0,e["padding-bottom"]=!0,e["padding-left"]=!0,e["padding-right"]=!0,e["padding-top"]=!0,e.page=!1,e["page-break-after"]=!1,e["page-break-before"]=!1,e["page-break-inside"]=!1,e["page-policy"]=!1,e.pause=!1,e["pause-after"]=!1,e["pause-before"]=!1,e.perspective=!1,e["perspective-origin"]=!1,e.pitch=!1,e["pitch-range"]=!1,e["play-during"]=!1,e.position=!1,e["presentation-level"]=!1,e.quotes=!1,e["region-fragment"]=!1,e.resize=!1,e.rest=!1,e["rest-after"]=!1,e["rest-before"]=!1,e.richness=!1,e.right=!1,e.rotation=!1,e["rotation-point"]=!1,e["ruby-align"]=!1,e["ruby-merge"]=!1,e["ruby-position"]=!1,e["shape-image-threshold"]=!1,e["shape-outside"]=!1,e["shape-margin"]=!1,e.size=!1,e.speak=!1,e["speak-as"]=!1,e["speak-header"]=!1,e["speak-numeral"]=!1,e["speak-punctuation"]=!1,e["speech-rate"]=!1,e.stress=!1,e["string-set"]=!1,e["tab-size"]=!1,e["table-layout"]=!1,e["text-align"]=!0,e["text-align-last"]=!0,e["text-combine-upright"]=!0,e["text-decoration"]=!0,e["text-decoration-color"]=!0,e["text-decoration-line"]=!0,e["text-decoration-skip"]=!0,e["text-decoration-style"]=!0,e["text-emphasis"]=!0,e["text-emphasis-color"]=!0,e["text-emphasis-position"]=!0,e["text-emphasis-style"]=!0,e["text-height"]=!0,e["text-indent"]=!0,e["text-justify"]=!0,e["text-orientation"]=!0,e["text-overflow"]=!0,e["text-shadow"]=!0,e["text-space-collapse"]=!0,e["text-transform"]=!0,e["text-underline-position"]=!0,e["text-wrap"]=!0,e.top=!1,e.transform=!1,e["transform-origin"]=!1,e["transform-style"]=!1,e.transition=!1,e["transition-delay"]=!1,e["transition-duration"]=!1,e["transition-property"]=!1,e["transition-timing-function"]=!1,e["unicode-bidi"]=!1,e["vertical-align"]=!1,e.visibility=!1,e["voice-balance"]=!1,e["voice-duration"]=!1,e["voice-family"]=!1,e["voice-pitch"]=!1,e["voice-range"]=!1,e["voice-rate"]=!1,e["voice-stress"]=!1,e["voice-volume"]=!1,e.volume=!1,e["white-space"]=!1,e.widows=!1,e.width=!0,e["will-change"]=!1,e["word-break"]=!0,e["word-spacing"]=!0,e["word-wrap"]=!0,e["wrap-flow"]=!1,e["wrap-through"]=!1,e["writing-mode"]=!1,e["z-index"]=!1,e}function e3e(e,t,r){}function t3e(e,t,r){}var r3e=/javascript\s*\:/img;function i3e(e,t){return r3e.test(t)?"":t}xy.whiteList=NX();xy.getDefaultWhiteList=NX;xy.onAttr=e3e;xy.onIgnoreAttr=t3e;xy.safeAttrValue=i3e;var n3e={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},trimRight:function(e){return String.prototype.trimRight?e.trimRight():e.replace(/(\s*$)/g,"")}},k1=n3e;function s3e(e,t){e=k1.trimRight(e),e[e.length-1]!==";"&&(e+=";");var r=e.length,i=!1,n=0,s=0,o="";function a(){if(!i){var h=k1.trim(e.slice(n,s)),d=h.indexOf(":");if(d!==-1){var f=k1.trim(h.slice(0,d)),m=k1.trim(h.slice(d+1));if(f){var g=t(n,o.length,f,m,h);g&&(o+=g+"; ")}}}n=s+1}for(;s<r;s++){var l=e[s];if(l==="/"&&e[s+1]==="*"){var u=e.indexOf("*/",s+2);if(u===-1)break;s=u+1,n=s+1,i=!1}else l==="("?i=!0:l===")"?i=!1:l===";"?i||a():l===`
`&&a()}return k1.trim(o)}var o3e=s3e,Hx=xy,a3e=o3e;function OV(e){return e==null}function l3e(e){var t={};for(var r in e)t[r]=e[r];return t}function DX(e){e=l3e(e||{}),e.whiteList=e.whiteList||Hx.whiteList,e.onAttr=e.onAttr||Hx.onAttr,e.onIgnoreAttr=e.onIgnoreAttr||Hx.onIgnoreAttr,e.safeAttrValue=e.safeAttrValue||Hx.safeAttrValue,this.options=e}DX.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onAttr,s=r.onIgnoreAttr,o=r.safeAttrValue,a=a3e(e,function(l,u,h,d,f){var m=i[h],g=!1;if(m===!0?g=m:typeof m=="function"?g=m(d):m instanceof RegExp&&(g=m.test(d)),g!==!0&&(g=!1),d=o(h,d),!!d){var b={position:u,sourcePosition:l,source:f,isWhite:g};if(g){var w=n(h,d,b);return OV(w)?h+":"+d:w}else{var w=s(h,d,b);if(!OV(w))return w}}});return a};var u3e=DX;(function(e,t){var r=xy,i=u3e;function n(o,a){var l=new i(a);return l.process(o)}t=e.exports=n,t.FilterCSS=i;for(var s in r)t[s]=r[s]})(b_,b_.exports);var I6={indexOf:function(e,t){var r,i;if(Array.prototype.indexOf)return e.indexOf(t);for(r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1},forEach:function(e,t,r){var i,n;if(Array.prototype.forEach)return e.forEach(t,r);for(i=0,n=e.length;i<n;i++)t.call(r,e[i],i,e)},trim:function(e){return String.prototype.trim?e.trim():e.replace(/(^\s*)|(\s*$)/g,"")},spaceIndex:function(e){var t=/\s|\n|\t/,r=t.exec(e);return r?r.index:-1}},c3e=b_.exports.FilterCSS,h3e=b_.exports.getDefaultWhiteList,vI=I6;function FX(){return{a:["target","href","title"],abbr:["title"],address:[],area:["shape","coords","href","alt"],article:[],aside:[],audio:["autoplay","controls","crossorigin","loop","muted","preload","src"],b:[],bdi:["dir"],bdo:["dir"],big:[],blockquote:["cite"],br:[],caption:[],center:[],cite:[],code:[],col:["align","valign","span","width"],colgroup:["align","valign","span","width"],dd:[],del:["datetime"],details:["open"],div:[],dl:[],dt:[],em:[],figcaption:[],figure:[],font:["color","size","face"],footer:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],header:[],hr:[],i:[],img:["src","alt","title","width","height"],ins:["datetime"],li:[],mark:[],nav:[],ol:[],p:[],pre:[],s:[],section:[],small:[],span:[],sub:[],summary:[],sup:[],strong:[],strike:[],table:["width","border","align","valign"],tbody:["align","valign"],td:["width","rowspan","colspan","align","valign"],tfoot:["align","valign"],th:["width","rowspan","colspan","align","valign"],thead:["align","valign"],tr:["rowspan","align","valign"],tt:[],u:[],ul:[],video:["autoplay","controls","crossorigin","loop","muted","playsinline","poster","preload","src","height","width"]}}var jX=new c3e;function d3e(e,t,r){}function p3e(e,t,r){}function f3e(e,t,r){}function m3e(e,t,r){}function VX(e){return e.replace(g3e,"&lt;").replace(v3e,"&gt;")}function y3e(e,t,r,i){if(r=HX(r),t==="href"||t==="src"){if(r=vI.trim(r),r==="#")return"#";if(!(r.substr(0,7)==="http://"||r.substr(0,8)==="https://"||r.substr(0,7)==="mailto:"||r.substr(0,4)==="tel:"||r.substr(0,11)==="data:image/"||r.substr(0,6)==="ftp://"||r.substr(0,2)==="./"||r.substr(0,3)==="../"||r[0]==="#"||r[0]==="/"))return""}else if(t==="background"){if(Wx.lastIndex=0,Wx.test(r))return""}else if(t==="style"){if(PV.lastIndex=0,PV.test(r)||(RV.lastIndex=0,RV.test(r)&&(Wx.lastIndex=0,Wx.test(r))))return"";i!==!1&&(i=i||jX,r=i.process(r))}return r=WX(r),r}var g3e=/</g,v3e=/>/g,b3e=/"/g,w3e=/&quot;/g,_3e=/&#([a-zA-Z0-9]*);?/gim,x3e=/&colon;?/gim,S3e=/&newline;?/gim,Wx=/((j\s*a\s*v\s*a|v\s*b|l\s*i\s*v\s*e)\s*s\s*c\s*r\s*i\s*p\s*t\s*|m\s*o\s*c\s*h\s*a)\:/gi,PV=/e\s*x\s*p\s*r\s*e\s*s\s*s\s*i\s*o\s*n\s*\(.*/gi,RV=/u\s*r\s*l\s*\(.*/gi;function UX(e){return e.replace(b3e,"&quot;")}function zX(e){return e.replace(w3e,'"')}function BX(e){return e.replace(_3e,function(r,i){return i[0]==="x"||i[0]==="X"?String.fromCharCode(parseInt(i.substr(1),16)):String.fromCharCode(parseInt(i,10))})}function GX(e){return e.replace(x3e,":").replace(S3e," ")}function qX(e){for(var t="",r=0,i=e.length;r<i;r++)t+=e.charCodeAt(r)<32?" ":e.charAt(r);return vI.trim(t)}function HX(e){return e=zX(e),e=BX(e),e=GX(e),e=qX(e),e}function WX(e){return e=UX(e),e=VX(e),e}function M3e(){return""}function I3e(e,t){typeof t!="function"&&(t=function(){});var r=!Array.isArray(e);function i(o){return r?!0:vI.indexOf(e,o)!==-1}var n=[],s=!1;return{onIgnoreTag:function(o,a,l){if(i(o))if(l.isClosing){var u="[/removed]",h=l.position+u.length;return n.push([s!==!1?s:l.position,h]),s=!1,u}else return s||(s=l.position),"[removed]";else return t(o,a,l)},remove:function(o){var a="",l=0;return vI.forEach(n,function(u){a+=o.slice(l,u[0]),l=u[1]}),a+=o.slice(l),a}}}function T3e(e){for(var t="",r=0;r<e.length;){var i=e.indexOf("<!--",r);if(i===-1){t+=e.slice(r);break}t+=e.slice(r,i);var n=e.indexOf("-->",i);if(n===-1)break;r=n+3}return t}function $3e(e){var t=e.split("");return t=t.filter(function(r){var i=r.charCodeAt(0);return i===127?!1:i<=31?i===10||i===13:!0}),t.join("")}Qr.whiteList=FX();Qr.getDefaultWhiteList=FX;Qr.onTag=d3e;Qr.onIgnoreTag=p3e;Qr.onTagAttr=f3e;Qr.onIgnoreTagAttr=m3e;Qr.safeAttrValue=y3e;Qr.escapeHtml=VX;Qr.escapeQuote=UX;Qr.unescapeQuote=zX;Qr.escapeHtmlEntities=BX;Qr.escapeDangerHtml5Entities=GX;Qr.clearNonPrintableCharacter=qX;Qr.friendlyAttrValue=HX;Qr.escapeAttrValue=WX;Qr.onIgnoreTagStripAll=M3e;Qr.StripTagBody=I3e;Qr.stripCommentTag=T3e;Qr.stripBlankChar=$3e;Qr.cssFilter=jX;Qr.getDefaultCSSWhiteList=h3e;var k$={},Ed=I6;function E3e(e){var t=Ed.spaceIndex(e);if(t===-1)var r=e.slice(1,-1);else var r=e.slice(1,t+1);return r=Ed.trim(r).toLowerCase(),r.slice(0,1)==="/"&&(r=r.slice(1)),r.slice(-1)==="/"&&(r=r.slice(0,-1)),r}function A3e(e){return e.slice(0,2)==="</"}function C3e(e,t,r){var i="",n=0,s=!1,o=!1,a=0,l=e.length,u="",h="";e:for(a=0;a<l;a++){var d=e.charAt(a);if(s===!1){if(d==="<"){s=a;continue}}else if(o===!1){if(d==="<"){i+=r(e.slice(n,a)),s=a,n=a;continue}if(d===">"){i+=r(e.slice(n,s)),h=e.slice(s,a+1),u=E3e(h),i+=t(s,i.length,u,h,A3e(h)),n=a+1,s=!1;continue}if(d==='"'||d==="'")for(var f=1,m=e.charAt(a-f);m.trim()===""||m==="=";){if(m==="="){o=d;continue e}m=e.charAt(a-++f)}}else if(d===o){o=!1;continue}}return n<e.length&&(i+=r(e.substr(n))),i}var k3e=/[^a-zA-Z0-9_:\.\-]/gim;function O3e(e,t){var r=0,i=[],n=!1,s=e.length;function o(d,f){if(d=Ed.trim(d),d=d.replace(k3e,"").toLowerCase(),!(d.length<1)){var m=t(d,f||"");m&&i.push(m)}}for(var a=0;a<s;a++){var l=e.charAt(a),u,h;if(n===!1&&l==="="){n=e.slice(r,a),r=a+1;continue}if(n!==!1&&a===r&&(l==='"'||l==="'")&&e.charAt(a-1)==="="){if(h=e.indexOf(l,a+1),h===-1)break;u=Ed.trim(e.slice(r+1,h)),o(n,u),n=!1,a=h,r=a+1;continue}if(/\s|\n|\t/.test(l))if(e=e.replace(/\s|\n|\t/g," "),n===!1)if(h=P3e(e,a),h===-1){u=Ed.trim(e.slice(r,a)),o(u),n=!1,r=a+1;continue}else{a=h-1;continue}else if(h=R3e(e,a-1),h===-1){u=Ed.trim(e.slice(r,a)),u=LV(u),o(n,u),n=!1,r=a+1;continue}else continue}return r<e.length&&(n===!1?o(e.slice(r)):o(n,LV(Ed.trim(e.slice(r))))),Ed.trim(i.join(" "))}function P3e(e,t){for(;t<e.length;t++){var r=e[t];if(r!==" ")return r==="="?t:-1}}function R3e(e,t){for(;t>0;t--){var r=e[t];if(r!==" ")return r==="="?t:-1}}function L3e(e){return e[0]==='"'&&e[e.length-1]==='"'||e[0]==="'"&&e[e.length-1]==="'"}function LV(e){return L3e(e)?e.substr(1,e.length-2):e}k$.parseTag=C3e;k$.parseAttr=O3e;var N3e=b_.exports.FilterCSS,Qa=Qr,JX=k$,D3e=JX.parseTag,F3e=JX.parseAttr,QM=I6;function Jx(e){return e==null}function j3e(e){var t=QM.spaceIndex(e);if(t===-1)return{html:"",closing:e[e.length-2]==="/"};e=QM.trim(e.slice(t+1,-1));var r=e[e.length-1]==="/";return r&&(e=QM.trim(e.slice(0,-1))),{html:e,closing:r}}function V3e(e){var t={};for(var r in e)t[r]=e[r];return t}function ZX(e){e=V3e(e||{}),e.stripIgnoreTag&&(e.onIgnoreTag&&console.error('Notes: cannot use these two options "stripIgnoreTag" and "onIgnoreTag" at the same time'),e.onIgnoreTag=Qa.onIgnoreTagStripAll),e.whiteList=e.whiteList||Qa.whiteList,e.onTag=e.onTag||Qa.onTag,e.onTagAttr=e.onTagAttr||Qa.onTagAttr,e.onIgnoreTag=e.onIgnoreTag||Qa.onIgnoreTag,e.onIgnoreTagAttr=e.onIgnoreTagAttr||Qa.onIgnoreTagAttr,e.safeAttrValue=e.safeAttrValue||Qa.safeAttrValue,e.escapeHtml=e.escapeHtml||Qa.escapeHtml,this.options=e,e.css===!1?this.cssFilter=!1:(e.css=e.css||{},this.cssFilter=new N3e(e.css))}ZX.prototype.process=function(e){if(e=e||"",e=e.toString(),!e)return"";var t=this,r=t.options,i=r.whiteList,n=r.onTag,s=r.onIgnoreTag,o=r.onTagAttr,a=r.onIgnoreTagAttr,l=r.safeAttrValue,u=r.escapeHtml,h=t.cssFilter;r.stripBlankChar&&(e=Qa.stripBlankChar(e)),r.allowCommentTag||(e=Qa.stripCommentTag(e));var d=!1;if(r.stripIgnoreTagBody){var d=Qa.StripTagBody(r.stripIgnoreTagBody,s);s=d.onIgnoreTag}var f=D3e(e,function(m,g,b,w,_){var x={sourcePosition:m,position:g,isClosing:_,isWhite:i.hasOwnProperty(b)},I=n(b,w,x);if(!Jx(I))return I;if(x.isWhite){if(x.isClosing)return"</"+b+">";var S=j3e(w),T=i[b],$=F3e(S.html,function(C,O){var R=QM.indexOf(T,C)!==-1,D=o(b,C,O,R);if(!Jx(D))return D;if(R)return O=l(b,C,O,h),O?C+'="'+O+'"':C;var D=a(b,C,O,R);return Jx(D)?void 0:D}),w="<"+b;return $&&(w+=" "+$),S.closing&&(w+=" /"),w+=">",w}else{var I=s(b,w,x);return Jx(I)?u(w):I}},u);return d&&(f=d.remove(f)),f};var U3e=ZX;(function(e,t){var r=Qr,i=k$,n=U3e;function s(l,u){var h=new n(u);return h.process(l)}t=e.exports=s,t.filterXSS=s,t.FilterXSS=n;for(var o in r)t[o]=r[o];for(var o in i)t[o]=i[o];function a(){return typeof self<"u"&&typeof DedicatedWorkerGlobalScope<"u"&&self instanceof DedicatedWorkerGlobalScope}a()&&(self.filterXSS=e.exports)})(e0,e0.exports);var z3e=function(){function e(t,r){var i=this;this.arcgisWhiteList={a:["href","style","target"],abbr:["title"],audio:["autoplay","controls","loop","muted","preload"],b:[],br:[],dd:["style"],div:["align","style"],dl:["style"],dt:["style"],em:[],figcaption:["style"],figure:["style"],font:["color","face","size","style"],h1:["style"],h2:["style"],h3:["style"],h4:["style"],h5:["style"],h6:["style"],hr:[],i:[],img:["alt","border","height","src","style","width"],li:[],ol:[],p:["style"],source:["media","src","type"],span:["style"],strong:[],sub:["style"],sup:["style"],table:["border","cellpadding","cellspacing","height","style","width"],tbody:[],tr:["align","height","style","valign"],td:["align","colspan","height","nowrap","rowspan","style","valign","width"],th:["align","colspan","height","nowrap","rowspan","style","valign","width"],u:[],ul:[],video:["autoplay","controls","height","loop","muted","poster","preload","width"]},this.allowedProtocols=["http","https","mailto","iform","tel","flow","lfmobile","arcgis-navigator","arcgis-appstudio-player","arcgis-survey123","arcgis-collector","arcgis-workforce","arcgis-explorer","arcgis-trek2there","arcgis-quickcapture","mspbi","comgooglemaps","pdfefile","pdfehttp","pdfehttps","boxapp","boxemm","awb","awbs","gropen","radarscope"],this.arcgisFilterOptions={allowCommentTag:!0,safeAttrValue:function(s,o,a,l){return s==="a"&&o==="href"||(s==="img"||s==="source")&&o==="src"?i.sanitizeUrl(a):e0.exports.safeAttrValue(s,o,a,l)}};var n;t&&!r?n=t:t&&r?(n=Object.create(this.arcgisFilterOptions),Object.keys(t).forEach(function(s){s==="whiteList"?n.whiteList=i._extendObjectOfArrays([i.arcgisWhiteList,t.whiteList||{}]):n[s]=t[s]})):(n=Object.create(this.arcgisFilterOptions),n.whiteList=this.arcgisWhiteList),this.xssFilterOptions=n,this._xssFilter=new e0.exports.FilterXSS(n)}return e.prototype.sanitize=function(t,r){switch(r===void 0&&(r={}),typeof t){case"number":return isNaN(t)||!isFinite(t)?null:t;case"boolean":return t;case"string":return this._xssFilter.process(t);case"object":return this._iterateOverObject(t,r);default:return r.allowUndefined&&typeof t>"u"?void 0:null}},e.prototype.sanitizeUrl=function(t){var r=this._trim(t.substring(0,t.indexOf(":")));return t==="/"||t==="#"||t[0]==="#"||this.allowedProtocols.indexOf(r.toLowerCase())>-1?e0.exports.escapeAttrValue(t):""},e.prototype.sanitizeHTMLAttribute=function(t,r,i,n){return typeof this.xssFilterOptions.safeAttrValue=="function"?this.xssFilterOptions.safeAttrValue(t,r,i,n):e0.exports.safeAttrValue(t,r,i,n)},e.prototype.validate=function(t,r){r===void 0&&(r={});var i=this.sanitize(t,r);return{isValid:t===i,sanitized:i}},e.prototype._extendObjectOfArrays=function(t){var r={};return t.forEach(function(i){Object.keys(i).forEach(function(n){Array.isArray(i[n])&&Array.isArray(r[n])?r[n]=r[n].concat(i[n]):r[n]=i[n]})}),r},e.prototype._iterateOverObject=function(t,r){var i=this;r===void 0&&(r={});try{var n=!1,s=void 0;if(Array.isArray(t))s=t.reduce(function(a,l){var u=i.validate(l,r);return u.isValid?a.concat([l]):(n=!0,a.concat([u.sanitized]))},[]);else if(QMe(t)){var o=Object.keys(t);s=o.reduce(function(a,l){var u=t[l],h=i.validate(u,r);return h.isValid?a[l]=u:(n=!0,a[l]=h.sanitized),a},{})}else return r.allowUndefined&&typeof t>"u"?void 0:null;return n?s:t}catch{return null}},e.prototype._trim=function(t){return String.prototype.trim?t.trim():t.replace(/(^\s*)|(\s*$)/g,"")},e}(),Wm,K0,B3e=function(e){if("WebkitTransition"in e.style)Wm="webkitTransitionEnd",K0="webkitAnimationEnd";else{if(!("transition"in e.style))throw new Error("Your browser is not supported!");Wm="transitionend",K0="animationend"}},YX=function(e){Wm||B3e(e)},G3e=function(e,t){return t===void 0&&(t=e+"-active"),function(r){YX(r);var i=!1,n=function(s){i||(i=!0,r.removeEventListener(Wm,n),r.removeEventListener(K0,n),r.classList.remove(e),r.classList.remove(t))};r.classList.add(e),r.addEventListener(Wm,n),r.addEventListener(K0,n),requestAnimationFrame(function(){r.classList.add(t)})}},q3e=function(e,t){return t===void 0&&(t=e+"-active"),function(r,i){YX(r);var n=!1,s=function(o){n||(n=!0,r.removeEventListener(Wm,s),r.removeEventListener(K0,s),i())};r.classList.add(e),r.addEventListener(Wm,s),r.addEventListener(K0,s),requestAnimationFrame(function(){r.classList.add(t)})}};function KX(e){const t=cs.acquire();for(let i=0;i<arguments.length;i++){const n=arguments[i],s=typeof n;if(s==="string")t.push(n);else if(Array.isArray(n))t.push.apply(t,n);else if(s==="object")for(const o in n)n[o]&&t.push(o)}const r=t.join(" ");return cs.release(t),r}function jd(e){const t=e?.closest("[dir]");return t!==null&&t instanceof HTMLElement&&t.dir==="rtl"||document.dir==="rtl"}function NV(e){const t="data-node-ref";this[e.getAttribute(t)]=null}function TP(e){const t="data-node-ref";this[e.getAttribute(t)]=e}function H3e(e,t){return(e==="enter"?G3e:q3e)(t)}Te.getLogger("esri.widgets.support.widgetUtils");const W3e=["dd","dl","dt","h1","h2","h3","h4","h5","h6","sub","sup","animate","animatetransform","circle","clippath","defs","ellipse","g","image","line","lineargradient","marker","mask","path","pattern","polygon","polyline","radialgradient","rect","stop","svg","switch","symbol","text","textpath","tspan","use"],J3e=W3e.reduce((e,t)=>(e[t]=[],e),{}),Z3e=["align","alink","alt","bgcolor","border","cellpadding","cellspacing","class","color","cols","colspan","coords","d","dir","face","height","hspace","ismap","lang","marginheight","marginwidth","multiple","nohref","noresize","noshade","nowrap","ref","rel","rev","rows","rowspan","scrolling","shape","span","summary","tabindex","title","usemap","valign","value","vlink","vspace","width"],XX=new z3e({whiteList:J3e,onTagAttr:(e,t,r)=>{const i=`${t}="${r}"`;if(Z3e.includes(t))return i},stripIgnoreTag:!0,stripIgnoreTagBody:["script","style"]},!0);function Y3e(e){return e==="Enter"||e===" "}function QX(){return getComputedStyle(document.body).getPropertyValue("--esri-calcite-theme-name").replace(/\s|'|"/g,"")}function eQ(){return QX().startsWith("dark")}function K3e(){return"calcite-theme-"+(eQ()?"dark":"light")}const tQ="http://www.w3.org/",O$=`${tQ}2000/svg`,rQ=`${tQ}1999/xlink`;let bI,DV=[],T6=(e,t)=>{let r={};return Object.keys(e).forEach(i=>{r[i]=e[i]}),t&&Object.keys(t).forEach(i=>{r[i]=t[i]}),r},$6=(e,t)=>e.vnodeSelector===t.vnodeSelector&&(e.properties&&t.properties?e.properties.key===t.properties.key&&e.properties.bind===t.properties.bind:!e.properties&&!t.properties),iQ=e=>{if(typeof e!="string")throw new Error("Style values must be strings")},X3e=(e,t,r)=>{if(t.vnodeSelector!==""){for(let i=r;i<e.length;i++)if($6(e[i],t))return i}return-1},u5=(e,t,r,i)=>{let n=e[t];if(n.vnodeSelector==="")return;let s=n.properties;if(!(s&&(s.key===void 0?s.bind:s.key))){for(let o=0;o<e.length;o++)if(o!==t){let a=e[o];if($6(a,n))throw new Error(`${r.vnodeSelector} had a ${n.vnodeSelector} child ${i==="added"?i:"removed"}, but there is now more than one. You must add unique key properties to make them distinguishable.`)}}},Q3e=e=>{if(e.properties){let t=e.properties.enterAnimation;t&&t(e.domNode,e.properties)}},$P=[],EP=!1,nQ=e=>{(e.children||[]).forEach(nQ),e.properties&&e.properties.afterRemoved&&e.properties.afterRemoved.apply(e.properties.bind||e.properties,[e.domNode])},FV=()=>{EP=!1,$P.forEach(nQ),$P.length=0},jV=e=>{$P.push(e),EP||(EP=!0,typeof window<"u"&&"requestIdleCallback"in window?window.requestIdleCallback(FV,{timeout:16}):setTimeout(FV,16))},VV=e=>{let t=e.domNode;if(e.properties){let r=e.properties.exitAnimation;if(r)return t.style.pointerEvents="none",void r(t,()=>{t.parentNode&&(t.parentNode.removeChild(t),jV(e))},e.properties)}t.parentNode&&(t.parentNode.removeChild(t),jV(e))},eIe=(e,t,r)=>{if(!t)return;let i=r.eventHandlerInterceptor,n=Object.keys(t),s=n.length;for(let o=0;o<s;o++){let a=n[o],l=t[a];if(a==="className")throw new Error('Property "className" is not supported, use "class".');if(a==="class")AP(e,l,!0);else if(a==="classes"){let u=Object.keys(l),h=u.length;for(let d=0;d<h;d++){let f=u[d];l[f]&&e.classList.add(f)}}else if(a==="styles"){let u=Object.keys(l),h=u.length;for(let d=0;d<h;d++){let f=u[d],m=l[f];m&&(iQ(m),r.styleApplyer(e,f,m))}}else if(a!=="key"&&l!=null){let u=typeof l;u==="function"?(a.lastIndexOf("on",0)===0&&(i&&(l=i(a,l,e,t)),a==="oninput"&&function(){let h=l;l=function(d){h.apply(this,[d]),d.target["oninput-value"]=d.target.value}}()),e[a]=l):r.namespace===O$?a==="href"?e.setAttributeNS(rQ,a,l):e.setAttribute(a,l):u==="string"&&a!=="value"?a==="innerHTML"?e[a]=XX.sanitize(l):e.setAttribute(a,l):e[a]=l}}},tIe=(e,t,r)=>{if(t)for(let i of t)t0(i,e,void 0,r)},sQ=(e,t,r)=>{tIe(e,t.children,r),t.text&&(e.textContent=t.text),eIe(e,t.properties,r),t.properties&&t.properties.afterCreate&&t.properties.afterCreate.apply(t.properties.bind||t.properties,[e,r,t.vnodeSelector,t.properties,t.children])},t0=(e,t,r,i)=>{let n,s=0,o=e.vnodeSelector,a=t.ownerDocument;if(o==="")n=e.domNode=a.createTextNode(e.text),r!==void 0?t.insertBefore(n,r):t.appendChild(n);else{for(let l=0;l<=o.length;++l){let u=o.charAt(l);if(l===o.length||u==="."||u==="#"){let h=o.charAt(s-1),d=o.slice(s,l);h==="."?n.classList.add(d):h==="#"?n.id=d:(d==="svg"&&(i=T6(i,{namespace:O$})),i.namespace!==void 0?n=e.domNode=a.createElementNS(i.namespace,d):(n=e.domNode=e.domNode||a.createElement(d),d==="input"&&e.properties&&e.properties.type!==void 0&&n.setAttribute("type",e.properties.type)),r!==void 0?t.insertBefore(n,r):n.parentNode!==t&&t.appendChild(n)),s=l+1}}sQ(n,e,i)}},AP=(e,t,r)=>{t&&t.split(" ").forEach(i=>{i&&e.classList.toggle(i,r)})},rIe=(e,t,r,i)=>{if(!r)return;let n=!1,s=Object.keys(r),o=s.length;for(let a=0;a<o;a++){let l=s[a],u=r[l],h=t[l];if(l==="class")h!==u&&(AP(e,h,!1),AP(e,u,!0));else if(l==="classes"){let d=e.classList,f=Object.keys(u),m=f.length;for(let g=0;g<m;g++){let b=f[g],w=!!u[b];w!==!!h[b]&&(n=!0,w?d.add(b):d.remove(b))}}else if(l==="styles"){let d=Object.keys(u),f=d.length;for(let m=0;m<f;m++){let g=d[m],b=u[g];b!==h[g]&&(n=!0,b?(iQ(b),i.styleApplyer(e,g,b)):i.styleApplyer(e,g,""))}}else if(u||typeof h!="string"||(u=""),l==="value"){let d=e[l];d!==u&&(e["oninput-value"]?d===e["oninput-value"]:u!==h)&&(e[l]=u,e["oninput-value"]=void 0),u!==h&&(n=!0)}else if(u!==h){let d=typeof u;d==="function"&&i.eventHandlerInterceptor||(i.namespace===O$?l==="href"?e.setAttributeNS(rQ,l,u):e.setAttribute(l,u):d==="string"?l==="innerHTML"?e[l]=XX.sanitize(u):l==="role"&&u===""?e.removeAttribute(l):e.setAttribute(l,u):e[l]!==u&&(e[l]=u),n=!0)}}return n},iIe=(e,t,r,i,n)=>{if(r===i)return!1;i=i||DV;let s,o=(r=r||DV).length,a=i.length,l=0,u=0,h=!1;for(;u<a;){let d=l<o?r[l]:void 0,f=i[u];if(d!==void 0&&$6(d,f))h=bI(d,f,n)||h,l++;else{let m=X3e(r,f,l+1);if(m>=0){for(s=l;s<m;s++)VV(r[s]),u5(r,s,e,"removed");h=bI(r[m],f,n)||h,l=m+1}else t0(f,t,l<o?r[l].domNode:void 0,n),Q3e(f),u5(i,u,e,"added")}u++}if(o>l)for(s=l;s<o;s++)VV(r[s]),u5(r,s,e,"removed");return h};bI=(e,t,r)=>{let i=e.domNode,n=!1;if(e===t)return!1;let s=!1;if(t.vnodeSelector===""){if(t.text!==e.text){let o=i.ownerDocument.createTextNode(t.text);return i.parentNode.replaceChild(o,i),t.domNode=o,n=!0,n}t.domNode=i}else t.vnodeSelector.lastIndexOf("svg",0)===0&&(r=T6(r,{namespace:O$})),e.text!==t.text&&(s=!0,t.text===void 0?i.removeChild(i.firstChild):i.textContent=t.text),t.domNode=i,s=iIe(t,i,e.children,t.children,r)||s,s=rIe(i,e.properties,t.properties,r)||s,t.properties&&t.properties.afterUpdate&&t.properties.afterUpdate.apply(t.properties.bind||t.properties,[i,r,t.vnodeSelector,t.properties,t.children]);return s&&t.properties&&t.properties.updateAnimation&&t.properties.updateAnimation(i,t.properties,e.properties),n};let O1=(e,t)=>({getLastRender:()=>e,update:r=>{if(e.vnodeSelector!==r.vnodeSelector)throw new Error("The selector for the root VNode may not be changed. (consider using dom.merge and add one extra level to the virtual DOM)");let i=e;e=r,bI(i,r,t)},domNode:e.domNode});const nIe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}};let Ag=e=>T6(nIe,e),Vd={create:(e,t)=>(t=Ag(t),t0(e,document.createElement("div"),void 0,t),O1(e,t)),append:(e,t,r)=>(r=Ag(r),t0(t,e,void 0,r),O1(t,r)),insertBefore:(e,t,r)=>(r=Ag(r),t0(t,e.parentNode,e,r),O1(t,r)),merge:(e,t,r)=>(r=Ag(r),t.domNode=e,sQ(e,t,r),O1(t,r)),replace:(e,t,r)=>(r=Ag(r),t0(t,e.parentNode,e,r),e.parentNode.removeChild(e),O1(t,r))},oQ,sIe=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r};oQ=Array.prototype.find?(e,t)=>e.find(t):(e,t)=>e.filter(t)[0];let oIe=(e,t)=>{let r=e;return t.forEach(i=>{r=r&&r.children?oQ(r.children,n=>n.domNode===i):void 0}),r},aIe=(e,t,r)=>{let i=function(n){r("domEvent",n);let s=t(),o=sIe(n.currentTarget,s.domNode);o.reverse();let a,l=oIe(s.getLastRender(),o);return e.scheduleRender(),l&&(a=l.properties[`on${n.type}`].apply(l.properties.bind||this,arguments)),r("domEventProcessed",n),a};return(n,s,o,a)=>i},UV=e=>{let t,r,i=Ag(e),n=i.performanceLogger,s=!0,o=!1,a=[],l=[],u=(d,f,m)=>{let g,b=()=>g;i.eventHandlerInterceptor=aIe(t,b,n),g=d(f,m(),i),a.push(g),l.push(m)},h=()=>{if(r=void 0,s){s=!1,n("renderStart",void 0);for(let d=0;d<a.length;d++){let f=l[d]();n("rendered",void 0),a[d].update(f),n("patched",void 0)}n("renderDone",void 0),s=!0}};return t={renderNow:h,scheduleRender:()=>{r||o||(r=requestAnimationFrame(h))},stop:()=>{r&&(cancelAnimationFrame(r),r=void 0),o=!0},resume:()=>{o=!1,s=!0,t.scheduleRender()},append:(d,f)=>{u(Vd.append,d,f)},insertBefore:(d,f)=>{u(Vd.insertBefore,d,f)},merge:(d,f)=>{u(Vd.merge,d,f)},replace:(d,f)=>{u(Vd.replace,d,f)},detach:d=>{for(let f=0;f<l.length;f++)if(l[f]===d)return l.splice(f,1),a.splice(f,1)[0];throw new Error("renderFunction was not found")}},t},vd=class extends Ze{constructor(){super(...arguments),this.items=new Je,this._watchUpdatingTracking=new g0,this._callbacks=new Map,this._projector=UV(),this._hiddenProjector=UV()}get needsRender(){return this.items.length>0}initialize(){const e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(this.items,t=>{for(const r of t.added){const i=()=>r.render();this._callbacks.set(r,i),this._projector.append(this.surface,i)}for(const r of t.removed){const i=this._projector.detach(this._callbacks.get(r));this.surface.removeChild(i.domNode),this._callbacks.delete(r)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){const t=this._hiddenSurface,r=this._hiddenProjector;let i=null;const n=()=>(i=e.render(),i);r.append(t,n),r.renderNow();const s={left:0,top:0,right:0,bottom:0};if(i&&i.domNode){const o=i.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(r.detach(n);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){const r=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(r.left,i.left)<=Math.min(r.right,i.right)&&Math.max(r.top,i.top)<=Math.min(r.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}renderCanvas(e){if(!this.items.some(r=>r.visible))return;const t=e.getContext("2d");t.save(),t.font=`10px ${getComputedStyle(this.surface).fontFamily}`,this.items.forEach(r=>{t.save(),r.renderCanvas(t),t.restore()}),t.restore()}};c([p({readOnly:!0})],vd.prototype,"surface",void 0),c([p({readOnly:!0})],vd.prototype,"items",void 0),c([p({readOnly:!0})],vd.prototype,"needsRender",null),c([p({readOnly:!0})],vd.prototype,"_watchUpdatingTracking",void 0),c([p({readOnly:!0,aliasOf:"_watchUpdatingTracking.updating"})],vd.prototype,"updating",void 0),vd=c([N("esri.views.overlay.ViewOverlay")],vd);const zV=vd;function E6(e,t,r,i){let n=null,s=1e3;typeof t=="number"?(s=t,i=r):(n=t??null,s=r);let o,a=0;const l=()=>{a=0,e.apply(i,o)},u=(...h)=>{n&&n.apply(i,h),o=h,s?a||(a=setTimeout(l,s)):l()};return u.remove=()=>{a&&(clearTimeout(a),a=0)},u.forceUpdate=()=>{a&&(clearTimeout(a),l())},u.hasPendingUpdates=()=>!!a,u}function lIe(){const e=crypto.getRandomValues(new Uint16Array(8));e[3]=4095&e[3]|16384,e[4]=16383&e[4]|32768;const t=r=>e[r].toString(16);return t(0)+t(1)+"-"+t(2)+"-"+t(3)+"-"+t(4)+"-"+t(5)+t(6)+t(7)}const uIe={handleInterceptedEvent:(e,t,r,i)=>(e.scheduleRender(),t.properties[`on${i.type}`].apply(t.properties.bind||r,[i]))},cIe={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{e.style[t]=r}},hIe=e=>({...cIe,...e}),dIe=(e,t)=>{const r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},pIe=(e,t)=>e.find(t),BV=(e,t,r=!1)=>{let i=e;return t.forEach((n,s)=>{var o;const a=(o=i)!=null&&o.children?pIe(i.children,l=>l.domNode===n):void 0;r&&!a&&s!==t.length-1||(i=a)}),i},fIe=e=>{let t;const r={...uIe,...e},i=hIe(r),n=i.performanceLogger;let s,o=!0,a=!1;const l=[],u=[],h=(f,m,g)=>{let b;i.eventHandlerInterceptor=(_,x,I,S)=>function(T){let $;n("domEvent",T);const E=dIe(T.currentTarget,b.domNode),C=E.some(R=>{var D;return customElements.get(R==null||(D=R.tagName)==null?void 0:D.toLowerCase())});if(T.eventPhase===Event.CAPTURING_PHASE||!C)E.reverse(),$=BV(b.getLastRender(),E);else{const R=T.composedPath(),D=R.slice(R.indexOf(T.currentTarget),R.indexOf(b.domNode)).filter(F=>F.getRootNode()===F.ownerDocument).reverse();$=BV(b.getLastRender(),D,!0)}let O;return $&&(O=r.handleInterceptedEvent(t,$,this,T)),n("domEventProcessed",T),O},r.postProcessProjectionOptions==null||r.postProcessProjectionOptions(i);const w=g();b=f(m,w,i),l.push(b),u.push(g),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(b,w)};let d=()=>{if(s=void 0,o){o=!1,n("renderStart",void 0);for(let f=0;f<l.length;f++){const m=u[f]();n("rendered",void 0),l[f].update(m),n("patched",void 0)}n("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(d=r.modifyDoRenderImplementation(d,l,u)),t={renderNow:d,scheduleRender:()=>{s||a||(s=requestAnimationFrame(d))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),a=!0},resume:()=>{a=!1,o=!0,t.scheduleRender()},append:(f,m)=>{h(Vd.append,f,m)},insertBefore:(f,m)=>{h(Vd.insertBefore,f,m)},merge:(f,m)=>{h(Vd.merge,f,m)},replace:(f,m)=>{h(Vd.replace,f,m)},detach:f=>{for(let m=0;m<u.length;m++)if(u[m]===f)return u.splice(m,1),l.splice(m,1)[0];throw new Error("renderFunction was not found")}},t},Dt={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,safari10:!1,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,cssVarShim:!1,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,dynamicImportShim:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0};let Cg,aQ,P$,lQ=!1,wI=!1,A6=!1,vo=!1,GV=null,CP=!1;const t1=typeof window<"u"?window:{};Dt.cssVarShim&&t1.CSS;const pl=t1.document||{head:{}};t1.HTMLElement||class{};const Mn={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,r,i)=>e.addEventListener(t,r,i),rel:(e,t,r,i)=>e.removeEventListener(t,r,i),ce:(e,t)=>new CustomEvent(e,t)},_I=Dt.shadowDomShim&&Dt.shadowDom?(()=>(pl.head.attachShadow+"").indexOf("[native")>-1)():!0,mIe=(()=>{let e=!1;try{pl.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch{}return e})(),yIe=e=>Promise.resolve(e),gIe=Dt.constructableCSS?(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replace=="function"}catch{}return!1})():!1,uQ=(e,t,r,i)=>{r&&r.map(([n,s,o])=>{const a=bIe(e,n),l=vIe(t,o),u=wIe(n);Mn.ael(a,s,l,u),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>Mn.rel(a,s,l,u))})},vIe=(e,t)=>r=>{try{Dt.lazyLoad||e.$hostElement$[t](r)}catch(i){I2(i)}},bIe=(e,t)=>t&4?pl:t&8?t1:t&16?pl.body:e,wIe=e=>mIe?{passive:(e&1)!==0,capture:(e&2)!==0}:(e&2)!==0,qV="http://www.w3.org/1999/xlink",Jm=(e,t="")=>()=>{},HV=new WeakMap,_Ie=(e,t,r)=>{let i=MI.get(e);gIe&&r?(i=i||new CSSStyleSheet,i.replace(t)):i=t,MI.set(e,i)},xIe=(e,t,r,i)=>{let n=cQ(t,r),s=MI.get(n);if(e=e.nodeType===11?e:pl,s)if(typeof s=="string"){e=e.head||e;let o=HV.get(e),a;o||HV.set(e,o=new Set),o.has(n)||(a=pl.createElement("style"),a.innerHTML=s,e.insertBefore(a,e.querySelector("link")),o&&o.add(n))}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return n},SIe=e=>{const t=e.$cmpMeta$,r=e.$hostElement$,i=t.$flags$,n=Jm("attachStyles",t.$tagName$),s=xIe(_I&&r.shadowRoot?r.shadowRoot:r.getRootNode(),t,e.$modeName$);i&10&&(r["s-sc"]=s,r.classList.add(s+"-h"),i&2&&r.classList.add(s+"-s")),n()},cQ=(e,t)=>"sc-"+(t&&e.$flags$&32?e.$tagName$+"-"+t:e.$tagName$),MIe=e=>eTe.map(t=>t(e)).find(t=>!!t),WV={},IIe="http://www.w3.org/2000/svg",TIe="http://www.w3.org/1999/xhtml",$Ie=e=>e!=null,C6=e=>(e=typeof e,e==="object"||e==="function"),hQ=(e,t,...r)=>{let i=null,n=null,s=null,o=!1,a=!1,l=[];const u=d=>{for(let f=0;f<d.length;f++)i=d[f],Array.isArray(i)?u(i):i!=null&&typeof i!="boolean"&&((o=typeof e!="function"&&!C6(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?xI(null,i):i),a=o)};if(u(r),t&&(Dt.isDev&&e==="input"&&kIe(t),Dt.vdomKey&&t.key&&(n=t.key),Dt.slotRelocation&&t.name&&(s=t.name),Dt.vdomClass)){const d=t.className||t.class;d&&(t.class=typeof d!="object"?d:Object.keys(d).filter(f=>d[f]).join(" "))}if(Dt.isDev&&l.some(dQ)&&QIe(`The <Host> must be the single root component. Make sure:
- You are NOT using hostData() and <Host> in the same component.
- <Host> is used once, and it's the single root component of the render() function.`),Dt.vdomFunctional&&typeof e=="function")return e(t===null?{}:t,l,AIe);const h=xI(e,null);return h.$attrs$=t,l.length>0&&(h.$children$=l),Dt.vdomKey&&(h.$key$=n),Dt.slotRelocation&&(h.$name$=s),h},xI=(e,t)=>{const r={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null};return Dt.vdomAttribute&&(r.$attrs$=null),Dt.vdomKey&&(r.$key$=null),Dt.slotRelocation&&(r.$name$=null),r},EIe={},dQ=e=>e&&e.$tag$===EIe,AIe={forEach:(e,t)=>e.map(JV).forEach(t),map:(e,t)=>e.map(JV).map(t).map(CIe)},JV=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),CIe=e=>{if(typeof e.vtag=="function"){const r=Object.assign({},e.vattrs);return e.vkey&&(r.key=e.vkey),e.vname&&(r.name=e.vname),hQ(e.vtag,r,...e.vchildren||[])}const t=xI(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},kIe=e=>{const t=Object.keys(e),r=t.indexOf("type"),i=t.indexOf("min"),n=t.indexOf("max"),s=t.indexOf("min"),o=t.indexOf("value");o!==-1&&(o<r||o<i||o<n||o<s)&&SQ('The "value" prop of <input> should be set after "min", "max", "type" and "step"')},ZV=(e,t,r,i,n,s)=>{if(r!==i){let o=QV(e,t),a=t.toLowerCase();if(t==="class"){const l=e.classList,u=YV(r),h=YV(i);l.remove(...u.filter(d=>d&&!h.includes(d))),l.add(...h.filter(d=>d&&!u.includes(d)))}else if(t==="style"){for(const l in r)(!i||i[l]==null)&&(l.includes("-")?e.style.removeProperty(l):e.style[l]="");for(const l in i)(!r||i[l]!==r[l])&&(l.includes("-")?e.style.setProperty(l,i[l]):e.style[l]=i[l])}else if(t!=="key")if(t==="ref")i&&i(e);else if(!e.__lookupSetter__(t)&&t[0]==="o"&&t[1]==="n")t[2]==="-"?t=t.slice(3):QV(t1,a)?t=a.slice(2):t=a[2]+t.slice(3),r&&Mn.rel(e,t,r,!1),i&&Mn.ael(e,t,i,!1);else{const l=C6(i);if((o||l&&i!==null)&&!n)try{if(e.tagName.includes("-"))e[t]=i;else{let h=i??"";t==="list"?o=!1:(r==null||e[t]!=h)&&(e[t]=h)}}catch{}let u=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(t=a,u=!0),i==null||i===!1?(i!==!1||e.getAttribute(t)==="")&&(u?e.removeAttributeNS(qV,t):e.removeAttribute(t)):(!o||s&4||n)&&!l&&(i=i===!0?"":i,u?e.setAttributeNS(qV,t,i):e.setAttribute(t,i))}}},OIe=/\s/,YV=e=>e?e.split(OIe):[],pQ=(e,t,r,i)=>{const n=t.$elm$.nodeType===11&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||WV,o=t.$attrs$||WV;for(i in s)i in o||ZV(n,i,s[i],void 0,r,t.$flags$);for(i in o)ZV(n,i,s[i],o[i],r,t.$flags$)},SI=(e,t,r,i)=>{let n=t.$children$[r],s=0,o,a,l;if(lQ||(A6=!0,n.$tag$==="slot"&&(Cg&&i.classList.add(Cg+"-s"),n.$flags$|=n.$children$?2:1)),n.$text$!==null)o=n.$elm$=pl.createTextNode(n.$text$);else if(n.$flags$&1)o=n.$elm$=pl.createTextNode("");else{if(vo||(vo=n.$tag$==="svg"),o=n.$elm$=pl.createElementNS(vo?IIe:TIe,n.$flags$&2?"slot-fb":n.$tag$),vo&&n.$tag$==="foreignObject"&&(vo=!1),pQ(null,n,vo),$Ie(Cg)&&o["s-si"]!==Cg&&o.classList.add(o["s-si"]=Cg),n.$children$)for(s=0;s<n.$children$.length;++s)a=SI(e,n,s,o),a&&o.appendChild(a);n.$tag$==="svg"?vo=!1:o.tagName==="foreignObject"&&(vo=!0)}return o["s-hn"]=P$,n.$flags$&3&&(o["s-sr"]=!0,o["s-cr"]=aQ,o["s-sn"]=n.$name$||"",l=e&&e.$children$&&e.$children$[r],l&&l.$tag$===n.$tag$&&e.$elm$&&w_(e.$elm$,!1)),o},w_=(e,t)=>{Mn.$flags$|=1;const r=e.childNodes;for(let i=r.length-1;i>=0;i--){const n=r[i];n["s-hn"]!==P$&&n["s-ol"]&&(yQ(n).insertBefore(n,k6(n)),n["s-ol"].remove(),n["s-ol"]=void 0,A6=!0),t&&w_(n,t)}Mn.$flags$&=-2},fQ=(e,t,r,i,n,s)=>{let o=e["s-cr"]&&e["s-cr"].parentNode||e,a;for(o.shadowRoot&&o.tagName===P$&&(o=o.shadowRoot);n<=s;++n)i[n]&&(a=SI(null,r,n,e),a&&(i[n].$elm$=a,o.insertBefore(a,k6(t))))},mQ=(e,t,r,i,n)=>{for(;t<=r;++t)(i=e[t])&&(n=i.$elm$,bQ(i),wI=!0,n["s-ol"]?n["s-ol"].remove():w_(n,!0),n.remove())},PIe=(e,t,r,i)=>{let n=0,s=0,o=0,a=0,l=t.length-1,u=t[0],h=t[l],d=i.length-1,f=i[0],m=i[d],g,b;for(;n<=l&&s<=d;)if(u==null)u=t[++n];else if(h==null)h=t[--l];else if(f==null)f=i[++s];else if(m==null)m=i[--d];else if(Zx(u,f))kg(u,f),u=t[++n],f=i[++s];else if(Zx(h,m))kg(h,m),h=t[--l],m=i[--d];else if(Zx(u,m))(u.$tag$==="slot"||m.$tag$==="slot")&&w_(u.$elm$.parentNode,!1),kg(u,m),e.insertBefore(u.$elm$,h.$elm$.nextSibling),u=t[++n],m=i[--d];else if(Zx(h,f))(u.$tag$==="slot"||m.$tag$==="slot")&&w_(h.$elm$.parentNode,!1),kg(h,f),e.insertBefore(h.$elm$,u.$elm$),h=t[--l],f=i[++s];else{for(o=-1,a=n;a<=l;++a)if(t[a]&&t[a].$key$!==null&&t[a].$key$===f.$key$){o=a;break}o>=0?(b=t[o],b.$tag$!==f.$tag$?g=SI(t&&t[s],r,o,e):(kg(b,f),t[o]=void 0,g=b.$elm$),f=i[++s]):(g=SI(t&&t[s],r,s,e),f=i[++s]),g&&yQ(u.$elm$).insertBefore(g,k6(u.$elm$))}n>l?fQ(e,i[d+1]==null?null:i[d+1].$elm$,r,i,s,d):s>d&&mQ(t,n,l)},Zx=(e,t)=>e.$tag$===t.$tag$?e.$tag$==="slot"?e.$name$===t.$name$:e.$key$===t.$key$:!1,k6=e=>e&&e["s-ol"]||e,yQ=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,kg=(e,t)=>{const r=t.$elm$=e.$elm$,i=e.$children$,n=t.$children$,s=t.$tag$,o=t.$text$;let a;o===null?(vo=s==="svg"?!0:s==="foreignObject"?!1:vo,s==="slot"||pQ(e,t,vo),i!==null&&n!==null?PIe(r,i,t,n):n!==null?(e.$text$!==null&&(r.textContent=""),fQ(r,null,t,n,0,n.length-1)):i!==null&&mQ(i,0,i.length-1),vo&&s==="svg"&&(vo=!1)):(a=r["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(r.data=o)},gQ=e=>{let t=e.childNodes,r,i,n,s,o,a;for(i=0,n=t.length;i<n;i++)if(r=t[i],r.nodeType===1){if(r["s-sr"]){for(o=r["s-sn"],r.hidden=!1,s=0;s<n;s++)if(a=t[s].nodeType,t[s]["s-hn"]!==r["s-hn"]||o!==""){if(a===1&&o===t[s].getAttribute("slot")){r.hidden=!0;break}}else if(a===1||a===3&&t[s].textContent.trim()!==""){r.hidden=!0;break}}gQ(r)}},tl=[],vQ=e=>{let t,r,i,n,s,o,a=0,l=e.childNodes,u=l.length;for(;a<u;a++){if(t=l[a],t["s-sr"]&&(r=t["s-cr"])&&r.parentNode)for(i=r.parentNode.childNodes,n=t["s-sn"],o=i.length-1;o>=0;o--)r=i[o],!r["s-cn"]&&!r["s-nr"]&&r["s-hn"]!==t["s-hn"]&&(KV(r,n)?(s=tl.find(h=>h.$nodeToRelocate$===r),wI=!0,r["s-sn"]=r["s-sn"]||n,s?s.$slotRefNode$=t:tl.push({$slotRefNode$:t,$nodeToRelocate$:r}),r["s-sr"]&&tl.map(h=>{KV(h.$nodeToRelocate$,r["s-sn"])&&(s=tl.find(d=>d.$nodeToRelocate$===r),s&&!h.$slotRefNode$&&(h.$slotRefNode$=s.$slotRefNode$))})):tl.some(h=>h.$nodeToRelocate$===r)||tl.push({$nodeToRelocate$:r}));t.nodeType===1&&vQ(t)}},KV=(e,t)=>e.nodeType===1?e.getAttribute("slot")===null&&t===""||e.getAttribute("slot")===t:e["s-sn"]===t?!0:t==="",bQ=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(bQ)},RIe=(e,t)=>{const r=e.$hostElement$,i=e.$cmpMeta$,n=e.$vnode$||xI(null,null),s=dQ(t)?t:hQ(null,null,t);P$=r.tagName,i.$attrsToReflect$&&(s.$attrs$=s.$attrs$||{},i.$attrsToReflect$.map(([o,a])=>s.$attrs$[a]=r[o])),s.$tag$=null,s.$flags$|=4,e.$vnode$=s,s.$elm$=n.$elm$=r.shadowRoot||r,Cg=r["s-sc"],aQ=r["s-cr"],lQ=_I&&(i.$flags$&1)!==0,wI=!1,kg(n,s);{if(Mn.$flags$|=1,A6){vQ(s.$elm$);let o,a,l,u,h,d,f=0;for(;f<tl.length;f++)o=tl[f],a=o.$nodeToRelocate$,a["s-ol"]||(l=pl.createTextNode(""),l["s-nr"]=a,a.parentNode.insertBefore(a["s-ol"]=l,a));for(f=0;f<tl.length;f++)if(o=tl[f],a=o.$nodeToRelocate$,o.$slotRefNode$){for(u=o.$slotRefNode$.parentNode,h=o.$slotRefNode$.nextSibling,l=a["s-ol"];l=l.previousSibling;)if(d=l["s-nr"],d&&d["s-sn"]===a["s-sn"]&&u===d.parentNode&&(d=d.nextSibling,!d||!d["s-nr"])){h=d;break}(!h&&u!==a.parentNode||a.nextSibling!==h)&&a!==h&&(!a["s-hn"]&&a["s-ol"]&&(a["s-hn"]=a["s-ol"].parentNode.nodeName),u.insertBefore(a,h))}else a.nodeType===1&&(a.hidden=!0)}wI&&gQ(s.$elm$),Mn.$flags$&=-2,tl.length=0}},LIe=e=>Dt.lazyLoad?M2(e).$hostElement$:e,ait=(e,t,r)=>{const i=LIe(e);return{emit:n=>(Dt.isDev&&!i.isConnected&&SQ(`The "${t}" event was emitted, but the dispatcher node is no longer connected to the dom.`),NIe(i,t,{bubbles:!!(r&4),composed:!!(r&2),cancelable:!!(r&1),detail:n}))}},NIe=(e,t,r)=>{const i=Mn.ce(t,r);return e.dispatchEvent(i),i},DIe=(e,t)=>{},wQ=(e,t)=>(e.$flags$|=16,DIe(e,e.$ancestorComponent$),iTe(()=>FIe(e,t))),FIe=(e,t)=>{const r=e.$hostElement$,i=Jm("scheduleUpdate",e.$cmpMeta$.$tagName$),n=r;let s;return t?s=x0(n,"componentWillLoad"):s=x0(n,"componentWillUpdate"),s=XV(s,()=>x0(n,"componentWillRender")),i(),XV(s,()=>jIe(e,n,t))},jIe=async(e,t,r)=>{const i=e.$hostElement$,n=Jm("update",e.$cmpMeta$.$tagName$);i["s-rc"],r&&SIe(e);const s=Jm("render",e.$cmpMeta$.$tagName$);VIe(e,t,i),s(),n(),UIe(e)},VIe=(e,t,r)=>{try{GV=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Dt.hasRenderFn||Dt.reflect)&&(Dt.vdomRender||Dt.reflect)&&(Dt.hydrateServerSide||RIe(e,t))}catch(a){I2(a,e.$hostElement$)}return GV=null,null},UIe=e=>{const t=e.$cmpMeta$.$tagName$,r=e.$hostElement$,i=Jm("postUpdate",t),n=r;e.$ancestorComponent$,x0(n,"componentDidRender"),e.$flags$&64?(x0(n,"componentDidUpdate"),i()):(e.$flags$|=64,x0(n,"componentDidLoad"),i())},x0=(e,t,r)=>{if(e&&e[t])try{return e[t](r)}catch(i){I2(i)}},XV=(e,t)=>e&&e.then?e.then(t):t(),zIe=(e,t)=>e!=null&&!C6(e)?t&4?e==="false"?!1:e===""||!!e:t&2?parseFloat(e):t&1?String(e):e:e,BIe=(e,t)=>M2(e).$instanceValues$.get(t),GIe=(e,t,r,i)=>{const n=M2(e),s=e,o=n.$instanceValues$.get(t),a=n.$flags$,l=s;if(r=zIe(r,i.$members$[t][0]),r!==o){n.$instanceValues$.set(t,r);{if(i.$watchers$&&a&128){const u=i.$watchers$[t];u&&u.map(h=>{try{l[h](r,o,t)}catch(d){I2(d,s)}})}if((a&18)===2){if(l.componentShouldUpdate&&l.componentShouldUpdate(r,o,t)===!1)return;wQ(n,!1)}}}},qIe=(e,t,r)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const i=Object.entries(t.$members$),n=e.prototype;i.map(([s,[o]])=>{(o&31||o&32)&&Object.defineProperty(n,s,{get(){return BIe(this,s)},set(a){GIe(this,s,a,t)},configurable:!0,enumerable:!0})});{const s=new Map;n.attributeChangedCallback=function(o,a,l){Mn.jmp(()=>{const u=s.get(o);if(this.hasOwnProperty(u))l=this[u],delete this[u];else if(n.hasOwnProperty(u)&&typeof this[u]=="number"&&this[u]==l)return;this[u]=l===null&&typeof this[u]=="boolean"?!1:l})},e.observedAttributes=i.filter(([o,a])=>a[0]&15).map(([o,a])=>{const l=a[1]||o;return s.set(l,o),a[0]&512&&t.$attrsToReflect$.push([o,l]),l})}}return e},HIe=async(e,t,r,i,n)=>{if((t.$flags$&32)===0&&(n=e.constructor,t.$flags$|=32,customElements.whenDefined(r.$tagName$).then(()=>t.$flags$|=128),n.style)){let o=n.style;typeof o!="string"&&(o=o[t.$modeName$=MIe(e)]);const a=cQ(r,t.$modeName$);if(!MI.has(a)){const l=Jm("registerStyles",r.$tagName$);_Ie(a,o,!!(r.$flags$&1)),l()}}t.$ancestorComponent$,(()=>wQ(t,!0))()},WIe=e=>{},JIe=e=>{if((Mn.$flags$&1)===0){const t=M2(e),r=t.$cmpMeta$,i=Jm("connectedCallback",r.$tagName$);t.$flags$&1?(uQ(e,t,r.$listeners$),WIe(t.$lazyInstance$)):(t.$flags$|=1,r.$flags$&12&&ZIe(e),r.$members$&&Object.entries(r.$members$).map(([n,[s]])=>{if(s&31&&e.hasOwnProperty(n)){const o=e[n];delete e[n],e[n]=o}}),HIe(e,t,r)),i()}},ZIe=e=>{const t=e["s-cr"]=pl.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},YIe=e=>{if((Mn.$flags$&1)===0){const t=M2(e);t.$rmListeners$&&(t.$rmListeners$.map(r=>r()),t.$rmListeners$=void 0)}},lit=(e,t)=>{const r={$flags$:t[0],$tagName$:t[1]};Dt.member&&(r.$members$=t[2]),Dt.hostListener&&(r.$listeners$=t[3]),Dt.watchCallback&&(r.$watchers$=e.$watchers$),Dt.reflect&&(r.$attrsToReflect$=[]),Dt.shadowDom&&!_I&&r.$flags$&1&&(r.$flags$|=8);const i=e.prototype.connectedCallback,n=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){XIe(this,r)},connectedCallback(){JIe(this),Dt.connectedCallback&&i&&i.call(this)},disconnectedCallback(){YIe(this),Dt.disconnectedCallback&&n&&n.call(this)},__attachShadow(){_I?Dt.shadowDelegatesFocus?this.attachShadow({mode:"open",delegatesFocus:!!(r.$flags$&16)}):this.attachShadow({mode:"open"}):this.shadowRoot=this}}),e.is=r.$tagName$,qIe(e,r)},uit=e=>{const t=new URL(e,Mn.$resourcesUrl$);return t.origin!==t1.location.origin?t.href:t.pathname},KIe=e=>Mn.$resourcesUrl$=e,_Q=new WeakMap,M2=e=>_Q.get(e),XIe=(e,t)=>{const r={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Dt.isDev&&(r.$renderCount$=0),Dt.method&&Dt.lazyLoad&&(r.$onInstancePromise$=new Promise(i=>r.$onInstanceResolve$=i)),Dt.asyncLoading&&(r.$onReadyPromise$=new Promise(i=>r.$onReadyResolve$=i),e["s-p"]=[],e["s-rc"]=[]),uQ(e,r,t.$listeners$),_Q.set(e,r)},QV=(e,t)=>t in e,I2=(e,t)=>(0,console.error)(e,t),xQ=Dt.isTesting?["STENCIL:"]:["%cstencil","color: white;background:#4c47ff;font-weight: bold; font-size:10px; padding:2px 6px; border-radius: 5px"],QIe=(...e)=>console.error(...xQ,...e),SQ=(...e)=>console.warn(...xQ,...e),MI=new Map,eTe=[],eU=[],MQ=[],tTe=(e,t)=>r=>{e.push(r),CP||(CP=!0,t&&Mn.$flags$&4?rTe(kP):Mn.raf(kP))},tU=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(r){I2(r)}e.length=0},kP=()=>{tU(eU),tU(MQ),(CP=eU.length>0)&&Mn.raf(kP)},rTe=e=>yIe().then(e),iTe=tTe(MQ,!0);Dt.isDev,Dt.isTesting;let IQ;function nTe(){KIe(ma(Zt(IQ)))}IQ="components/assets";const TQ=Symbol("widget"),sTe=[],oTe={},II=new WeakMap;function $Q(e,t){let r=t.children;if(r&&r.length)for(let n=0;n<r.length;++n)r[n]=$Q(e,r[n]);else r=sTe;const i=t.vnodeSelector;if(O6(i)){const n=t.properties||oTe,s=n.key||i;return{vnodeSelector:"div",properties:{key:s,afterCreate:aTe,afterUpdate:lTe,afterRemoved:EQ,parentWidget:e,widgetConstructor:i,widgetProperties:{...n,key:s,children:r}},children:void 0,text:void 0,domNode:null}}return t}function aTe(e,t,r,{parentWidget:i,widgetConstructor:n,widgetProperties:s}){const o=new n(s);o.container=e,II.set(e,o),o.afterCreate==null||o.afterCreate(o,e),i._internalHandles.add(DT(()=>EQ(e)))}function lTe(e,t,r,{widgetProperties:i}){const n=II.get(e);n&&(n.set(i),n.afterUpdate==null||n.afterUpdate(n,e))}function EQ(e){const t=II.get(e);t&&(t.destroy(),II.delete(e))}function O6(e){return typeof e=="function"&&e[TQ]}const AQ="esri.widgets.Widget",rU=Te.getLogger(AQ);let uTe=0;const Og=new Map,cTe={widgetIcon:"esri-icon-checkbox-unchecked"};function CQ(e,t){for(const r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?CQ(e[r],t[r]):e[r]=t[r]);return e}const hTe=fIe({postProcessProjectionOptions(e){const t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(i,n,s,o)=>{const a=t(i,n,s,o),l=r.test(i);if(!((i=i.replace(r,"")).toLowerCase()in s)||l){const u=i[2].toLowerCase()+i.slice(3),h=m=>a.call(s,m);s.addEventListener(u,h,l);const d=()=>s.removeEventListener(u,h,l),f=o.afterRemoved;o.afterRemoved=m=>{f?.(m),d()}}return a}},handleInterceptedEvent(e,t,r,i){const{eventPhase:n,type:s}=i,o=n===Event.CAPTURING_PHASE;let a=`on${s}${o?"capture":""}`;const l=t.properties;(a in l||(a=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,a in l))&&(Og.clear(),e.scheduleRender(),l[a].call(l.bind||r,i))}});let c5=!1,Si=class extends l2(_h.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._internalHandles=new gi,this._projector=hTe,this._readyForTrueRender=!1,this.domNode=null,this.iconClass=cTe.widgetIcon,this.label=this.declaredClass.split(".").pop(),this.visible=!0,this.key=this,this._loadLocale=LH(async()=>{if(this._messageBundleProps&&this._messageBundleProps.length){const a=await Zs(this._messageBundleProps.map(async({bundlePath:l,propertyName:u})=>{let h=await UW(l);this.uiStrings&&Object.keys(this.uiStrings)&&(h=CQ(ie(h),this.uiStrings)),this[u]=h}));for(const l of a)l.error&&rU.error("widget-intl:locale-error",this.declaredClass,l.error)}await this.loadLocale()}),nTe();const r=["light","dark"],i=QX()||"light";r.includes(i)||RT(rU,"The following themes are deprecated: light-blue, dark-blue, light-green, dark-green, light-purple, dark-purple, light-red, and dark-red.",{version:"4.19",warnOnce:!0,see:"https://developers.arcgis.com/javascript/latest/styling/"});const n="esri-widget-uid-"+lIe(),s=this.render.bind(this);this._trackingTarget=new zT(()=>this.scheduleRender());const o=()=>{var a;if(!this._readyForTrueRender||this.destroyed)return null;if(!this.visible)return{vnodeSelector:"div",properties:{key:n,class:"",styles:{display:"none"}},domNode:void 0,children:void 0,text:void 0};const l=s();let{properties:u}=l;u||(l.properties=u={});let{key:h,styles:d}=u;h||(u.key=n),d||(u.styles=d={}),d.display||(d.display="");let f=0;return(a=l.children)==null||a.forEach(m=>{if(O6(m.vnodeSelector))return;let{properties:g}=m;g||(m.properties=g={}),g.key||(g.key=`${this.id}--${f++}`)}),$Q(this,l)};this.render=()=>{if(c5)return o();let a=Og.get(this);if(a)return a;this._trackingTarget.clear(),c5=!0;try{a=dh(this._trackingTarget,o)}finally{c5=!1}return Og.set(this,a),a},this.addResolvingPromise(this._resourcesFetch=this.beforeFirstRender().then(()=>{this._readyForTrueRender=!0,this._postInitialize()}))}normalizeCtorArgs(e,t){const r={...e};return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){return Promise.all([this.loadDependencies(),this._loadLocale()]).then(()=>{}).catch(OA)}async loadDependencies(){}async loadLocale(){}destroy(){this.destroyed||(this._trackingTarget=Tu(this._trackingTarget),this.viewModel=Tu(this.viewModel),this._detach(this.container),this._set("container",null),this._internalHandles.destroy(),this._emitter.clear(),this.render=()=>null,this._projector=null,Og.delete(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return M6(e)}get id(){return this._get("id")||this.get("container.id")||Date.now().toString(16)+"-widget-"+uTe++}set id(e){e&&this._set("id",e)}get renderable(){return this._resourcesFetch}get test(){return{projector:this._projector,handles:this._internalHandles}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(Og.delete(this),this._projector.scheduleRender())}classes(...e){return KX.apply(this,e)}own(e){arguments.length>1&&(e=Array.prototype.slice.call(arguments)),this._internalHandles.add(e)}renderNow(){Og.delete(this),this._projector.renderNow()}_postInitialize(){var e;if(this.destroyed)return;this.scheduleRender(),(e=this._delegatedEventNames)!=null&&e.length&&this._internalHandles.add(It(this,"viewModel",(r,i)=>{i&&this._internalHandles.remove("delegated-events"),r&&this._internalHandles.add(this._delegatedEventNames.map(n=>r.on(n,s=>{this.emit(n,s)})),"delegated-events")})),this.postInitialize();const t=async()=>{await this._loadLocale().catch(OA),this.scheduleRender()};this._internalHandles.add([Mde(t),this.watch("uiStrings",t),FN(this,"container",async r=>{this.destroyed||this._attach(r)})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){e&&this._attached&&(this._projector.detach(this.render),e.parentNode&&e.parentNode.removeChild(e),this._attached=!1)}};Si[TQ]=!0,c([p()],Si.prototype,"_readyForTrueRender",void 0),c([p({value:null})],Si.prototype,"container",null),c([Ct("container")],Si.prototype,"castContainer",null),c([p({aliasOf:"container"})],Si.prototype,"domNode",void 0),c([p()],Si.prototype,"iconClass",void 0),c([p()],Si.prototype,"id",null),c([p()],Si.prototype,"label",void 0),c([p()],Si.prototype,"renderable",null),c([p()],Si.prototype,"uiStrings",void 0),c([p()],Si.prototype,"viewModel",void 0),c([p()],Si.prototype,"visible",void 0),c([p()],Si.prototype,"key",void 0),c([p()],Si.prototype,"children",void 0),c([p()],Si.prototype,"afterCreate",void 0),c([p()],Si.prototype,"afterUpdate",void 0),c([p()],Si.prototype,"afterRemoved",void 0),Si=c([N(AQ)],Si);const Tn=Si,iU=["B","kB","MB","GB","TB"];function dTe(e,t){let r=t===0?0:Math.floor(Math.log(t)/Math.log(1024));r=xl(r,0,iU.length-1);const i=Um(t/1024**r,{maximumFractionDigits:2});return bl(e.units.bytes[iU[r]],{fileSize:i})}const pTe="esri.widgets.Feature.support.featureUtils",nU=Te.getLogger(pTe),fTe=/href=(""|'')/gi,mTe=/(\{([^\{\r\n]+)\})/g,yTe=/\'/g,kQ=/^\s*expression\//i,gTe=/(\n)/gi,vTe=/[\u00A0-\u9999<>\&]/gim,bTe=/href\s*=\s*(?:\"([^\"]+)\"|\'([^\']+)\')/gi,wTe=/^(?:mailto:|tel:)/,OQ="relationships/",OP=FJ("short-date-short-time");function PQ(e){if(!ce(e))return e.get("sourceLayer")||e.get("layer")}async function TI(e,t){return typeof e=="function"?e.call(null,t):e}function RQ(e=""){if(e)return!wTe.test(e.trim().toLowerCase())}function LQ(e){return!!e&&kQ.test(e)}function _Te(e,t){if(!LQ(t)||!e)return null;const r=t.replace(kQ,"").toLowerCase();let i;return e.some(n=>n.name.toLowerCase()===r&&(i=n,!0)),i}function NQ(e,t){const r=_Te(t,e?.fieldName);return r?r.title||null:e?e.label||e.fieldName:null}function xTe(e,t){const r=t.get(e.toLowerCase());return`{${r&&r.fieldName||e}}`}function STe(e){return e.replace(fTe,"")}function $I(e,t){const r=P6(t,e);return r?r.name:e}function MTe(e,t){return e&&e.map(r=>$I(r,t))}function P6(e,t){return e&&typeof e.getField=="function"?e.getField(t):null}function DQ(e){return`${e}`.trim()}function tm({attributes:e,globalAttributes:t,layer:r,text:i,expressionAttributes:n,fieldInfoMap:s}){return i?PP({formattedAttributes:t,template:ETe(i,{...t,...n,...e},r),fieldInfoMap:s}):""}function PP({formattedAttributes:e,template:t,fieldInfoMap:r}){return DQ(STe(bl(bl(t,i=>xTe(i,r)),e)))}function ITe(e,t,r=!1){const i=t[e];if(typeof i=="string"){const n="%27",s=(r?encodeURIComponent(i):i).replace(yTe,n);t[e]=s}}function TTe(e,t=!1){const r={...e};return Object.keys(r).forEach(i=>ITe(i,r,t)),r}function $Te(e,t,r){const i=(t=DQ(t))&&t[0]!=="{";return bl(e,TTe(r,i))}function RP(e,t){return e.replace(mTe,(r,i,n)=>{const s=P6(t,n);return s?`{${s.name}}`:i})}function ETe(e,t,r){const i=RP(e,r);return i&&i.replace(bTe,(n,s,o)=>$Te(n,s||o,t))}function ATe(e,t){if(typeof e=="string"&&t&&t.dateFormat==null&&(t.places!=null||t.digitSeparator!=null)){const r=Number(e);if(!isNaN(r))return r}return e}function CTe(e){return e?.type==="feature"}function kTe(e){return e?.type==="map-image"}function OTe(e){return!(e==null||!e.layer)}function FQ(e,t){const r=t.fieldInfos,i=t.fieldName,n=jQ(r,i),s=n?.clone(),o=t.preventPlacesFormatting,a=t.layer,l=P6(a,i);if(s&&l?.type==="date"){const h=s.format||new pw;h.dateFormat=h.dateFormat||"short-date-short-time",h.dateTimeFormatOptions=CTe(a)&&a.datesInUnknownTimezone||OTe(a)&&kTe(a.layer)&&a.layer.datesInUnknownTimezone?{timeZone:"UTC"}:null,s.format=h}const u=s&&s.format;return typeof(e=ATe(e,u))=="string"||e==null||u==null?T2(e):o?Um(e,{...VJ(u),minimumFractionDigits:0,maximumFractionDigits:20}):u.format(e)}function jQ(e,t){if(!e||!e.length||!t)return;const r=t.toLowerCase();let i;return e.some(n=>!(!n.fieldName||n.fieldName.toLowerCase()!==r)&&(i=n,!0)),i}function PTe({fieldName:e,graphic:t,layer:r}){if(ih(e)||!r||typeof r.getFeatureType!="function")return null;const{typeIdField:i}=r;if(!i||e!==i)return null;const n=r.getFeatureType(t);return n?n.name:null}function RTe({fieldName:e,value:t,graphic:r,layer:i}){if(ih(e)||!i||typeof i.getFieldDomain!="function")return null;const n=i.getFieldDomain(e,{feature:r});return n&&n.type==="coded-value"?n.getName(t):null}function LTe(e,t){const{creatorField:r,creationDateField:i,editorField:n,editDateField:s}=e;if(!t)return;const o=t[s];if(typeof o=="number"){const l=t[n];return{type:"edit",date:cp(o,OP),user:l}}const a=t[i];if(typeof a=="number"){const l=t[r];return{type:"create",date:cp(a,OP),user:l}}return null}function NTe(e,t){const r=new Map;return e&&e.forEach(i=>{const n=$I(i.fieldName,t);i.fieldName=n,r.set(n.toLowerCase(),i)}),r}function sU(e){const t=[];if(!e)return t;const{fieldInfos:r,content:i}=e;return r&&t.push(...r),i&&Array.isArray(i)&&i.forEach(n=>{if(n.type==="fields"){const s=n&&n.fieldInfos;s&&t.push(...s)}}),t}function R6(e){return e.replace(vTe,t=>`&#${t.charCodeAt(0)};`)}function T2(e){return typeof e=="string"?e.replace(gTe,'<br class="esri-text-new-line" />'):e}function DTe(e){const{value:t,fieldName:r,fieldInfos:i,fieldInfoMap:n,layer:s,graphic:o}=e;if(t==null)return"";const a=RTe({fieldName:r,value:t,graphic:o,layer:s});if(a)return a;const l=PTe({fieldName:r,graphic:o,layer:s});if(l)return l;if(n.get(r.toLowerCase()))return FQ(t,{fieldInfos:i,fieldName:r,layer:s});const u=s&&s.fieldsIndex;return u&&u.isDateField(r)?cp(t,OP):T2(t)}function h5({fieldInfos:e,attributes:t,layer:r,graphic:i,fieldInfoMap:n,relatedInfos:s}){const o={};return s?.forEach(a=>zTe(o,a)),Object.keys(t).forEach(a=>{const l=t[a];o[a]=DTe({fieldName:a,fieldInfos:e,fieldInfoMap:n,layer:r,value:l,graphic:i})}),o}async function FTe(e,t){var r,i;const{layer:n,graphic:s,outFields:o,objectIds:a,returnGeometry:l,spatialReference:u}=e,h=a[0];if(typeof h!="number"&&typeof h!="string"){const f="Could not query required fields for the specified feature. The feature's ID is invalid.",m={layer:n,graphic:s,objectId:h,requiredFields:o};return nU.warn(f,m),null}if((r=n.capabilities)==null||(i=r.operations)==null||!i.supportsQuery){const f="The specified layer cannot be queried. The following fields will not be available.",m={layer:n,graphic:s,requiredFields:o,returnGeometry:l};return nU.warn(f,m),null}const d=n.createQuery();return d.objectIds=a,d.outFields=o!=null&&o.length?o:[n.objectIdField],d.returnGeometry=!!l,d.returnZ=!!l,d.returnM=!!l,d.outSpatialReference=u,(await n.queryFeatures(d,t)).features[0]}async function jTe(e){var t;if((t=e.expressionInfos)==null||!t.length)return!1;const r=await mh(),{arcadeUtils:{hasGeometryFunctions:i}}=r;return i(e)}async function VTe({graphic:e,popupTemplate:t,layer:r,spatialReference:i},n){if(!r||!t||(typeof r.load=="function"&&await r.load(n),!e.attributes))return;const s=e.attributes[r.objectIdField];if(s==null)return;const o=[s],a=await t.getRequiredFields(r.fieldsIndex),l=Xfe(a,e),u=l?[]:a,h=t.returnGeometry||await jTe(t);if(l&&!h)return;const d=await FTe({layer:r,graphic:e,outFields:u,objectIds:o,returnGeometry:h,spatialReference:i},n);d&&(d.geometry&&(e.geometry=d.geometry),d.attributes&&(e.attributes={...e.attributes,...d.attributes}))}function ih(e=""){return!!e&&e.indexOf(OQ)!==-1}function UTe(e){return e?`${OQ}${e.layerId}/${e.fieldName}`:""}function oU({attributes:e,graphic:t,relatedInfo:r}){e&&t&&r&&Object.keys(t.attributes).forEach(i=>{const n=UTe({layerId:r.relation.id.toString(),fieldName:i});e[n]=t.attributes[i]})}function zTe(e,t){e&&t&&(t.relatedFeatures&&t.relatedFeatures&&t.relatedFeatures.forEach(r=>oU({attributes:e,graphic:r,relatedInfo:t})),t.relatedStatsFeatures&&t.relatedStatsFeatures&&t.relatedStatsFeatures.forEach(r=>oU({attributes:e,graphic:r,relatedInfo:t})))}const aU=e=>{if(!e)return!1;const t=e.toUpperCase();return t.indexOf("CURRENT_TIMESTAMP")>-1||t.indexOf("CURRENT_DATE")>-1||t.indexOf("CURRENT_TIME")>-1},VQ=({layer:e,method:t,query:r,definitionExpression:i})=>{var n,s;if((n=e.capabilities)==null||(s=n.query)==null||!s.supportsCacheHint||t==="attachments")return;const o=U(r.where)&&r.where,a=U(r.geometry)&&r.geometry;aU(i)||aU(o)||a?.type==="extent"||r.resultType==="tile"||(r.cacheHint=!0)},BTe=({query:e,layer:t,method:r})=>{VQ({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},GTe=({queryPayload:e,layer:t,method:r})=>{VQ({layer:t,method:r,query:e,definitionExpression:`${t.definitionExpression} ${t.serviceDefinitionExpression}`})},lU={editing:!1,operations:{add:!0,update:!0,delete:!0}},UQ=Je.ofType(UK),qTe="graphic.layer.capabilities.operations.supportsResizeAttachments";let Za=class extends Z0{constructor(e){super(e),this._getAttachmentsPromise=null,this._attachmentLayer=null,this.abilities={...lU},this.activeAttachmentInfo=null,this.attachmentInfos=new UQ,this.graphic=null,this.mode="view",this.handles.add([It(this,"graphic",()=>this._graphicChanged())])}destroy(){this._attachmentLayer=null,this.graphic=null}castAbilities(e){return{...lU,...e}}get state(){return this._getAttachmentsPromise?"loading":this.graphic?"ready":"disabled"}get supportsResizeAttachments(){return this.get(qTe)||!1}async getAttachments(){const{_attachmentLayer:e,attachmentInfos:t}=this;if(!e||typeof e.queryAttachments!="function")throw new Z("invalid-layer","getAttachments(): A valid layer is required.");const r=this._getFeatureId(),i=new cI({objectIds:[r],returnMetadata:!0}),n=[],s=e.queryAttachments(i).then(a=>a[r]||n).catch(()=>n);this._getAttachmentsPromise=s,this.notifyChange("state");const o=await s;return t.removeAll(),o.length&&t.addMany(o),this._getAttachmentsPromise=null,this.notifyChange("state"),o}async addAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new Z("invalid-attachment","addAttachment(): An attachment is required.",{attachment:e});if(!n.operations.add)throw new Z("invalid-abilities","addAttachment(): add abilities are required.");if(!t||typeof t.addAttachment!="function")throw new Z("invalid-layer","addAttachment(): A valid layer is required.");const s=t.addAttachment(i,e).then(a=>this._queryAttachment(a.objectId)),o=await s;return r.add(o),o}async deleteAttachment(e){const{_attachmentLayer:t,attachmentInfos:r,graphic:i,abilities:n}=this;if(!e)throw new Z("invalid-attachment-info","deleteAttachment(): An attachmentInfo is required.",{attachmentInfo:e});if(!n.operations.delete)throw new Z("invalid-abilities","deleteAttachment(): delete abilities are required.");if(!t||typeof t.deleteAttachments!="function")throw new Z("invalid-layer","deleteAttachment(): A valid layer is required.");const s=t.deleteAttachments(i,[e.id]).then(()=>e),o=await s;return r.remove(o),o}async updateAttachment(e,t=this.activeAttachmentInfo){const{_attachmentLayer:r,attachmentInfos:i,graphic:n,abilities:s}=this;if(!e)throw new Z("invalid-attachment","updateAttachment(): An attachment is required.",{attachment:e});if(!t)throw new Z("invalid-attachment-info","updateAttachment(): An attachmentInfo is required.",{attachmentInfo:t});if(!s.operations.update)throw new Z("invalid-abilities","updateAttachment(): Update abilities are required.");const o=i.findIndex(u=>u===t);if(!r||typeof r.updateAttachment!="function")throw new Z("invalid-layer","updateAttachment(): A valid layer is required.");const a=r.updateAttachment(n,t.id,e).then(u=>this._queryAttachment(u.objectId)),l=await a;return i.splice(o,1,l),l}async _queryAttachment(e){if(!e)throw new Z("invalid-attachment-id","Could not query attachment.");const{_attachmentLayer:t}=this,r=this._getFeatureId(),i=new cI({objectIds:[r],attachmentsWhere:`AttachmentId=${e}`,returnMetadata:!0});return t.queryAttachments(i).then(n=>n[r][0])}_getFeatureId(){const{_attachmentLayer:e,graphic:t}=this;if(!e||!t)return null;const{objectIdField:r}=e,{attributes:i}=t;return i&&i[r]}_graphicChanged(){this.graphic&&(this._setAttachmentLayer(),this.getAttachments().catch(()=>{}))}_setAttachmentLayer(){const{graphic:e}=this,t=PQ(e);this._attachmentLayer=t?t.type==="scene"&&U(t.associatedLayer)?t.associatedLayer:t:null}};c([p()],Za.prototype,"abilities",void 0),c([Ct("abilities")],Za.prototype,"castAbilities",null),c([p()],Za.prototype,"activeAttachmentInfo",void 0),c([p({readOnly:!0,type:UQ})],Za.prototype,"attachmentInfos",void 0),c([p({type:xn})],Za.prototype,"graphic",void 0),c([p()],Za.prototype,"mode",void 0),c([p({readOnly:!0})],Za.prototype,"state",null),c([p({readOnly:!0})],Za.prototype,"supportsResizeAttachments",null),Za=c([N("esri.widgets.Attachments.AttachmentsViewModel")],Za);const L6=Za;function HTe(e){const t=e.toLowerCase();return t==="image/bmp"||t==="image/emf"||t==="image/exif"||t==="image/gif"||t==="image/x-icon"||t==="image/jpeg"||t==="image/png"||t==="image/tiff"||t==="image/x-wmf"}function WTe(e){const t=Zt("esri/themes/base/images/files/");return e?e==="text/plain"?`${t}text-32.svg`:e==="application/pdf"?`${t}pdf-32.svg`:e==="text/csv"?`${t}csv-32.svg`:e==="application/gpx+xml"?`${t}gpx-32.svg`:e==="application/x-dwf"?`${t}cad-32.svg`:e==="application/postscript"||e==="application/json"||e==="text/xml"||e==="model/vrml"?`${t}code-32.svg`:e==="application/x-zip-compressed"||e==="application/x-7z-compressed"||e==="application/x-gzip"||e==="application/x-tar"||e==="application/x-gtar"||e==="application/x-bzip2"||e==="application/gzip"||e==="application/x-compress"||e==="application/x-apple-diskimage"||e==="application/x-rar-compressed"||e==="application/zip"?`${t}zip-32.svg`:e.indexOf("image/")!==-1?`${t}image-32.svg`:e.indexOf("audio/")!==-1?`${t}sound-32.svg`:e.indexOf("video/")!==-1?`${t}video-32.svg`:e.indexOf("msexcel")!==-1||e.indexOf("ms-excel")!==-1||e.indexOf("spreadsheetml")!==-1?`${t}excel-32.svg`:e.indexOf("msword")!==-1||e.indexOf("ms-word")!==-1||e.indexOf("wordprocessingml")!==-1?`${t}word-32.svg`:e.indexOf("powerpoint")!==-1||e.indexOf("presentationml")!==-1?`${t}report-32.svg`:`${t}generic-32.svg`:`${t}generic-32.svg`}function Vn(e){return function(t,r){t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}var JTe=function(e){return{vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}},zQ=function(e,t){for(var r=0,i=e.length;r<i;r++){var n=e[r];Array.isArray(n)?zQ(n,t):n!=null&&n!==!1&&(n.hasOwnProperty("vnodeSelector")||(n=JTe(n)),t.push(n))}},ZTe=function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(r.length===1&&typeof r[0]=="string")return{vnodeSelector:e,properties:t||void 0,children:void 0,text:r[0],domNode:null};var n=[];return zQ(r,n),{vnodeSelector:e,properties:t||void 0,children:n,text:void 0,domNode:null}};function oe(e,t,...r){return typeof e!="function"||O6(e)?ZTe(e,t,...r):e(t,...r)}const uU={addButton:!0,addSubmitButton:!0,cancelAddButton:!0,cancelUpdateButton:!0,deleteButton:!0,errorMessage:!0,progressBar:!0,updateButton:!0},Ue={base:"esri-attachments",loaderContainer:"esri-attachments__loader-container",loader:"esri-attachments__loader",fadeIn:"esri-attachments--fade-in",container:"esri-attachments__container",containerList:"esri-attachments__container--list",containerPreview:"esri-attachments__container--preview",actions:"esri-attachments__actions",deleteButton:"esri-attachments__delete-button",addAttachmentButton:"esri-attachments__add-attachment-button",errorMessage:"esri-attachments__error-message",items:"esri-attachments__items",item:"esri-attachments__item",itemButton:"esri-attachments__item-button",itemMask:"esri-attachments__item-mask",itemMaskIcon:"esri-attachments__item-mask--icon",itemImage:"esri-attachments__image",itemImageResizable:"esri-attachments__image--resizable",itemLabel:"esri-attachments__label",itemFilename:"esri-attachments__filename",itemChevronIcon:"esri-attachments__item-chevron-icon",itemLink:"esri-attachments__item-link",itemLinkOverlay:"esri-attachments__item-link-overlay",itemLinkOverlayIcon:"esri-attachments__item-link-overlay-icon",itemEditIcon:"esri-attachments__item-edit-icon",itemAddIcon:"esri-attachments__item-add-icon",itemAddButton:"esri-attachments__item-add-button",formNode:"esri-attachments__form-node",fileFieldset:"esri-attachments__file-fieldset",fileLabel:"esri-attachments__file-label",fileName:"esri-attachments__file-name",fileInput:"esri-attachments__file-input",metadata:"esri-attachments__metadata",metadataFieldset:"esri-attachments__metadata-fieldset",progressBar:"esri-attachments__progress-bar",esriWidget:"esri-widget",esriButton:"esri-button",buttonDisabled:"esri-button--disabled",esriButtonSecondary:"esri-button--secondary",esriButtonTertiary:"esri-button--tertiary",esriButtonThird:"esri-button--third",esriButtonSmall:"esri-button--small",esriButtonHalf:"esri-button--half",empty:"esri-widget__content--empty",iconExternalLink:"esri-icon-link-external",iconEdit:"esri-icon-edit",iconRight:"esri-icon-right",iconLeft:"esri-icon-left",iconPlus:"esri-icon-plus"},d5=window.CSS;let Pn=class extends Tn{constructor(e,t){super(e,t),this.abilities=null,this.displayType="auto",this.graphic=null,this.label=void 0,this.messages=null,this.messagesUnits=null,this.selectedFile=null,this.submitting=!1,this.viewModel=new L6,this.visibleElements={...uU},this._supportsImageOrientation=d5&&d5.supports&&d5.supports("image-orientation","from-image"),this._addAttachmentForm=null,this._updateAttachmentForm=null}initialize(){this.own(yh(this,"viewModel.attachmentInfos","change",()=>this.scheduleRender()),It(this,"viewModel.mode",()=>this._modeChanged()))}get effectiveDisplayType(){return this.displayType==="auto"?this.viewModel.supportsResizeAttachments?"preview":"list":this.displayType}castVisibleElements(e){return{...uU,...e}}addAttachment(){const{_addAttachmentForm:e,viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.addAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Z("attachments:add-attachment",this.messages.addErrorMessage,r)),r})}deleteAttachment(e){const{viewModel:t}=this;return this._set("submitting",!0),this._set("error",null),t.deleteAttachment(e).then(r=>(this._set("submitting",!1),this._set("error",null),t.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Z("attachments:delete-attachment",this.messages.deleteErrorMessage,r)),r})}updateAttachment(){const{viewModel:e}=this,{_updateAttachmentForm:t}=this;return this._set("submitting",!0),this._set("error",null),e.updateAttachment(t).then(r=>(this._set("submitting",!1),this._set("error",null),e.mode="view",r)).catch(r=>{throw this._set("submitting",!1),this._set("error",new Z("attachments:update-attachment",this.messages.updateErrorMessage,r)),r})}render(){const{submitting:e,viewModel:t}=this,{state:r}=t;return oe("div",{class:this.classes(Ue.base,Ue.esriWidget)},e?this.renderProgressBar():null,r==="loading"?this.renderLoading():this.renderAttachments(),this.renderErrorMessage())}renderErrorMessage(){const{error:e,visibleElements:t}=this;return e&&t.errorMessage?oe("div",{key:"error-message",class:Ue.errorMessage},e.message):null}renderAttachments(){const{mode:e,activeAttachmentInfo:t}=this.viewModel;return e==="add"?this.renderAddForm():e==="edit"?this.renderDetailsForm(t):this.renderAttachmentContainer()}renderLoading(){return oe("div",{class:Ue.loaderContainer,key:"loader"},oe("div",{class:Ue.loader}))}renderProgressBar(){return this.visibleElements.progressBar?oe("div",{class:Ue.progressBar,key:"progress-bar"}):null}renderAddForm(){const{submitting:e,selectedFile:t}=this,r=e||!t,i=this.visibleElements.cancelAddButton?oe("button",{type:"button",bind:this,disabled:e,onclick:this._cancelForm,class:this.classes(Ue.esriButton,Ue.esriButtonTertiary,Ue.esriButtonSmall,Ue.esriButtonHalf,e&&Ue.buttonDisabled)},this.messages.cancel):null,n=this.visibleElements.addSubmitButton?oe("button",{type:"submit",disabled:r,class:this.classes(Ue.esriButton,Ue.esriButtonSecondary,Ue.esriButtonSmall,Ue.esriButtonHalf,{[Ue.buttonDisabled]:r})},this.messages.add):null,s=t?oe("span",{key:"file-name",class:Ue.fileName},t.name):null,o=oe("form",{bind:this,afterCreate:TP,afterRemoved:NV,"data-node-ref":"_addAttachmentForm",onsubmit:this._submitAddAttachment},oe("fieldset",{class:Ue.fileFieldset},s,oe("label",{class:this.classes(Ue.fileLabel,Ue.esriButton,Ue.esriButtonSecondary)},t?this.messages.changeFile:this.messages.selectFile,oe("input",{class:Ue.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))),n,i);return oe("div",{key:"add-form-container",class:Ue.formNode},o)}renderDetailsForm(e){const{visibleElements:t,viewModel:r,selectedFile:i,submitting:n}=this,{contentType:s,size:o,url:a}=e,{abilities:l}=r,u=n||!i,h=l.editing&&l.operations.delete&&t.deleteButton?oe("button",{key:"delete-button",type:"button",disabled:n,bind:this,onclick:x=>this._submitDeleteAttachment(x,e),class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonTertiary,Ue.deleteButton,{[Ue.buttonDisabled]:n})},this.messages.delete):null,d=l.editing&&l.operations.update&&t.updateButton?oe("button",{disabled:u,key:"update-button",type:"submit",class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonThird,{[Ue.buttonDisabled]:u})},this.messages.update):null,f=this.visibleElements.cancelUpdateButton?oe("button",{disabled:n,key:"cancel-button",type:"button",bind:this,onclick:this._cancelForm,class:this.classes(Ue.esriButton,Ue.esriButtonSmall,Ue.esriButtonTertiary,Ue.esriButtonThird,{[Ue.buttonDisabled]:n})},this.messages.cancel):null,m=i?oe("span",{key:"file-name",class:Ue.fileName},i.name):null,g=l.editing&&l.operations.update?oe("fieldset",{key:"file",class:Ue.fileFieldset},m,oe("label",{class:this.classes(Ue.fileLabel,Ue.esriButton,Ue.esriButtonSecondary)},this.messages.changeFile,oe("input",{class:Ue.fileInput,type:"file",name:"attachment",bind:this,onchange:this._handleFileInputChange}))):null,b=oe("fieldset",{key:"size",class:Ue.metadataFieldset},oe("label",null,dTe(this.messagesUnits,o))),w=oe("fieldset",{key:"content-type",class:Ue.metadataFieldset},oe("label",null,s)),_=oe("form",{bind:this,afterCreate:TP,afterRemoved:NV,"data-node-ref":"_updateAttachmentForm",onsubmit:this._submitUpdateAttachment},oe("div",{class:Ue.metadata},b,w),g,oe("div",{class:Ue.actions},h,f,d));return oe("div",{key:"edit-form-container",class:Ue.formNode},oe("a",{class:Ue.itemLink,href:a,rel:"noreferrer",target:"_blank"},this.renderImageMask({attachmentInfo:e,size:400}),oe("div",{class:Ue.itemLinkOverlay},oe("span",{class:Ue.itemLinkOverlayIcon},oe("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32"},oe("path",{d:"M28 13h1v16H3V3h16v1H4v24h24zm-5-9h4.293L15.646 15.638l.707.707L28 4.707V9h1V3h-6z"}),oe("path",{fill:"none",d:"M0 0h32v32H0z"}))))),_)}renderImageMask({attachmentInfo:e,size:t}){const{supportsResizeAttachments:r}=this.viewModel,{contentType:i,name:n,url:s}=e,o=r&&HTe(i),a=this._getCSSTransform(e,o),l=a?{transform:a,"image-orientation":"none"}:{},u=s.indexOf("?")===-1?"?":"&",h=o?`${s}${u}w=${t}`:WTe(i),d={[Ue.itemMaskIcon]:!o},f={[Ue.itemImageResizable]:r};return oe("div",{class:this.classes(d,Ue.itemMask)},oe("img",{styles:l,alt:n,src:h,class:this.classes(f,Ue.itemImage)}))}renderAttachmentInfo({attachmentInfo:e,displayType:t}){const{viewModel:r}=this,{abilities:i}=r,{name:n,url:s}=e,o=this.renderImageMask({attachmentInfo:e,size:t==="list"?48:400}),a=i.editing?oe("span",{"aria-hidden":"true",class:this.classes(Ue.itemChevronIcon,jd(this.container)?Ue.iconLeft:Ue.iconRight)}):null,l=[o,oe("label",{class:Ue.itemLabel},oe("span",{class:Ue.itemFilename},n||this.messages.noTitle),a)],u=i.editing?oe("button",{key:"details-button",bind:this,class:Ue.itemButton,title:this.messages.attachmentDetails,"aria-label":this.messages.attachmentDetails,"data-attachment-info-id":e.id,onclick:()=>this._startEditAttachment(e),type:"button"},l):oe("a",{key:"details-link",class:Ue.itemButton,href:s,target:"_blank"},l);return oe("li",{class:Ue.item,key:e},u)}renderAttachmentContainer(){const{effectiveDisplayType:e,viewModel:t,visibleElements:r}=this,{attachmentInfos:i,abilities:n}=t,s=i&&i.length,o={[Ue.containerList]:e!=="preview",[Ue.containerPreview]:e==="preview"},a=n.editing&&n.operations.add&&r.addButton?oe("button",{bind:this,onclick:()=>this._startAddAttachment(),class:this.classes(Ue.esriButton,Ue.esriButtonTertiary,Ue.addAttachmentButton),type:"button"},oe("span",{"aria-hidden":"true",class:this.classes(Ue.itemAddIcon,Ue.iconPlus)}),this.messages.add):null,l=s?oe("ul",{class:Ue.items},i.toArray().map(u=>this.renderAttachmentInfo({attachmentInfo:u,displayType:e}))):oe("div",{class:Ue.empty},this.messages.noAttachments);return oe("div",{key:"attachments-container",class:this.classes(Ue.container,o)},l,a)}_modeChanged(){this._set("error",null),this._set("selectedFile",null)}_handleFileInputChange(e){const t=e.target,r=t&&t.files&&t.files.item(0);this._set("selectedFile",r)}_submitDeleteAttachment(e,t){e.preventDefault(),this.deleteAttachment(t)}_submitAddAttachment(e){e.preventDefault(),this.addAttachment()}_submitUpdateAttachment(e){e.preventDefault(),this.updateAttachment()}_startEditAttachment(e){const{viewModel:t}=this;t.activeAttachmentInfo=e,t.mode="edit"}_startAddAttachment(){this.viewModel.mode="add"}_cancelForm(e){e.preventDefault(),this.viewModel.mode="view"}_getCSSTransform(e,t){const{orientationInfo:r}=e;return!this._supportsImageOrientation&&t&&r?[r.rotation?`rotate(${r.rotation}deg)`:"",r.mirrored?"scaleX(-1)":""].join(" "):""}};c([ze("viewModel.abilities")],Pn.prototype,"abilities",void 0),c([p()],Pn.prototype,"displayType",void 0),c([p({readOnly:!0})],Pn.prototype,"effectiveDisplayType",null),c([ze("viewModel.graphic")],Pn.prototype,"graphic",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Pn.prototype,"label",void 0),c([p(),Vn("esri/widgets/Attachments/t9n/Attachments")],Pn.prototype,"messages",void 0),c([p(),Vn("esri/core/t9n/Units")],Pn.prototype,"messagesUnits",void 0),c([p({readOnly:!0})],Pn.prototype,"selectedFile",void 0),c([p({readOnly:!0})],Pn.prototype,"submitting",void 0),c([p({readOnly:!0})],Pn.prototype,"error",void 0),c([p({type:L6})],Pn.prototype,"viewModel",void 0),c([p()],Pn.prototype,"visibleElements",void 0),c([Ct("visibleElements")],Pn.prototype,"castVisibleElements",null),Pn=c([N("esri.widgets.Attachments")],Pn);const YTe=Pn;let zb=class extends L6{constructor(e){super(e),this.description=null,this.title=null}};c([p()],zb.prototype,"description",void 0),c([p()],zb.prototype,"title",void 0),zb=c([N("esri.widgets.Feature.FeatureAttachments.FeatureAttachmentsViewModel")],zb);const N6=zb,KTe={heading:"esri-widget__heading"};function R$(e,t){const r=`h${xl(Math.ceil(e.level),1,6)}`;return delete e.level,oe(r,{...e,class:KX(KTe.heading,e.class)},t)}const p5={base:"esri-feature-element-info",title:"esri-feature-element-info__title",description:"esri-feature-element-info__description"};let Pg=class extends Tn{constructor(e,t){super(e,t),this.description=null,this.headingLevel=2,this.title=null}render(){return oe("div",{class:p5.base},this.renderTitle(),this.renderDescription())}renderTitle(){const{title:e}=this;return e?oe(R$,{level:this.headingLevel,class:p5.title},e):null}renderDescription(){const{description:e}=this;return e?oe("div",{key:"description",class:p5.description},e):null}};c([p()],Pg.prototype,"description",void 0),c([p()],Pg.prototype,"headingLevel",void 0),c([p()],Pg.prototype,"title",void 0),Pg=c([N("esri.widgets.Feature.support.FeatureElementInfo")],Pg);const D6=Pg,XTe={base:"esri-feature-attachments"};let pu=class extends Tn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attachmentsWidget=new YTe,this.description=null,this.displayType=null,this.graphic=null,this.headingLevel=2,this.title=null,this.viewModel=new N6}initialize(){this._featureElementInfo=new D6,It(this,["viewModel.description","viewModel.title","headingLevel"],()=>this._setupFeatureElementInfo()),It(this,"viewModel.graphic",e=>this.attachmentsWidget.graphic=e)}destroy(){this.attachmentsWidget.destroy(),this._featureElementInfo.destroy()}render(){var e;const{attachmentsWidget:t}=this;return oe("div",{class:XTe.base},(e=this._featureElementInfo)==null?void 0:e.render(),t?.render())}_setupFeatureElementInfo(){const{description:e,title:t,headingLevel:r}=this;this._featureElementInfo.set({description:e,title:t,headingLevel:r})}};c([p({readOnly:!0})],pu.prototype,"attachmentsWidget",void 0),c([ze("viewModel.description")],pu.prototype,"description",void 0),c([ze("attachmentsWidget.displayType")],pu.prototype,"displayType",void 0),c([ze("viewModel.graphic")],pu.prototype,"graphic",void 0),c([p()],pu.prototype,"headingLevel",void 0),c([ze("viewModel.title")],pu.prototype,"title",void 0),c([p({type:N6})],pu.prototype,"viewModel",void 0),pu=c([N("esri.widgets.Feature.FeatureAttachments")],pu);const QTe=pu;let bd=class extends ro(Ze){constructor(e){super(e),this._loadingPromise=null,this.created=null,this.creator=null,this.destroyer=null,this.graphic=null,this.handles.add(It(this,"creator",t=>{this._destroyContent(),this._createContent(t)}))}destroy(){this._destroyContent()}get state(){return this._loadingPromise?"loading":"ready"}_destroyContent(){const{created:e,graphic:t,destroyer:r}=this;e&&(TI(r,{graphic:t}).catch(()=>null),this._set("created",null))}async _createContent(e){const{graphic:t}=this,r=TI(e,{graphic:t}).catch(()=>null);this._loadingPromise=r,this.notifyChange("state");const i=await r;r===this._loadingPromise&&(this._loadingPromise=null,this.notifyChange("state"),this._set("created",i))}};c([p({readOnly:!0})],bd.prototype,"created",void 0),c([p()],bd.prototype,"creator",void 0),c([p()],bd.prototype,"destroyer",void 0),c([p({type:xn})],bd.prototype,"graphic",void 0),c([p({readOnly:!0})],bd.prototype,"state",null),bd=c([N("esri.widgets.Feature.FeatureContent.FeatureContentViewModel")],bd);const EI=bd;function bo(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${t}'`);return{value:t$e(e[t])}}}function e$e(e){const{type:t}=e;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function t$e(e){return function(t,...r){e$e(t)?Y3e(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...r)}}function r$e(e){return e.split(",").map(t=>t.trim())}function i$e(e){return t=>{t.hasOwnProperty("_delegatedEventNames")||(t._delegatedEventNames=t._delegatedEventNames?t._delegatedEventNames.slice():[]);const r=t._delegatedEventNames,i=Array.isArray(e)?e:r$e(e);r.push(...i)}}function BQ(e){return e&&typeof e.render=="function"}function n$e(e){return e&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}const f5={base:"esri-feature-content",loaderContainer:"esri-feature-content__loader-container",loader:"esri-feature-content__loader"};let Rg=class extends Tn{constructor(e,t){super(e,t),this.creator=null,this.graphic=null,this.viewModel=null,this._addTargetToAnchors=r=>{Array.from(r.querySelectorAll("a")).forEach(i=>{RQ(i.href)&&!i.hasAttribute("target")&&i.setAttribute("target","_blank")})}}renderLoading(){return oe("div",{class:f5.loaderContainer,key:"loader"},oe("div",{class:f5.loader}))}renderCreated(){var e;const t=(e=this.viewModel)==null?void 0:e.created;return t?t instanceof HTMLElement?oe("div",{key:t,bind:t,afterCreate:this._attachToNode}):BQ(t)?oe("div",{key:t},!t.destroyed&&t.render()):oe("div",{key:t,innerHTML:t,afterCreate:this._addTargetToAnchors}):null}render(){var e;const t=(e=this.viewModel)==null?void 0:e.state;return oe("div",{class:f5.base},t==="loading"?this.renderLoading():this.renderCreated())}_attachToNode(e){const t=this;e.appendChild(t)}};c([ze("viewModel.creator")],Rg.prototype,"creator",void 0),c([ze("viewModel.graphic")],Rg.prototype,"graphic",void 0),c([p({type:EI})],Rg.prototype,"viewModel",void 0),Rg=c([N("esri.widgets.Feature.FeatureContent")],Rg);const e3=Rg;let Cc=class extends Ze{constructor(e){super(e),this.attributes=null,this.expressionInfos=null,this.description=null,this.fieldInfos=null,this.title=null}get formattedFieldInfos(){const{expressionInfos:e,fieldInfos:t}=this,r=[];return t?.forEach(i=>{if(!(!i.hasOwnProperty("visible")||i.visible))return;const n=i.clone();n.label=NQ(n,e),r.push(n)}),r}};c([p()],Cc.prototype,"attributes",void 0),c([p({type:[JJ]})],Cc.prototype,"expressionInfos",void 0),c([p()],Cc.prototype,"description",void 0),c([p({type:[c2]})],Cc.prototype,"fieldInfos",void 0),c([p({readOnly:!0})],Cc.prototype,"formattedFieldInfos",null),c([p()],Cc.prototype,"title",void 0),Cc=c([N("esri.widgets.Feature.FeatureFields.FeatureFieldsViewModel")],Cc);const L$=Cc,s$e=[{pattern:/^\s*(https?:\/\/([^\s]+))\s*$/i,target:"_blank",label:"{messages.view}"},{pattern:/^\s*(tel:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(mailto:([^\s]+))\s*$/i,label:"{hierPart}"},{pattern:/^\s*(arcgis-appstudio-player:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"App Studio Player"},{pattern:/^\s*(arcgis-collector:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Collector"},{pattern:/^\s*(arcgis-explorer:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Explorer"},{pattern:/^\s*(arcgis-navigator:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Navigator"},{pattern:/^\s*(arcgis-survey123:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Survey123"},{pattern:/^\s*(arcgis-trek2there:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Trek2There"},{pattern:/^\s*(arcgis-workforce:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Workforce"},{pattern:/^\s*(iform:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"iForm"},{pattern:/^\s*(flow:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"FlowFinity"},{pattern:/^\s*(lfmobile:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Laserfische"},{pattern:/^\s*(mspbi:\/\/([^\s]+))\s*$/i,label:"{messages.openInApp}",appName:"Microsoft Power Bi"}];function o$e(e){let t=null;return s$e.some(r=>(r.pattern.test(e)&&(t=r),!!t)),t}function a$e(e,t){if(typeof t!="string"||!t)return t;const r=o$e(t);if(!r)return t;const i=t.match(r.pattern),n=i&&i[2],s=bl(bl(r.label,{messages:e,hierPart:n}),{appName:r.appName}),o=r.target?` target="${r.target}"`:"",a=r.target==="_blank"?' rel="noreferrer"':"";return t.replace(r.pattern,`<a${o} href="$1"${a}>${s}</a>`)}const P1={base:"esri-feature-fields",fieldHeader:"esri-feature-fields__field-header",fieldData:"esri-feature-fields__field-data",fieldDataDate:"esri-feature-fields__field-data--date",esriTable:"esri-widget__table"};let Ya=class extends Tn{constructor(e,t){super(e,t),this._featureElementInfo=null,this.attributes=null,this.description=null,this.expressionInfos=null,this.fieldInfos=null,this.title=null,this.viewModel=new L$,this.messages=null,this.messagesURIUtils=null}initialize(){this._featureElementInfo=new D6,It(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo())}destroy(){this._featureElementInfo.destroy()}renderFieldInfo(e,t){const{attributes:r}=this.viewModel,i=e.fieldName,n=e.label||i,s=r?r[i]==null?"":r[i]:"",o=!(!e.format||!e.format.dateFormat),a=typeof s=="number"&&!o?this._forceLTR(s):a$e(this.messagesURIUtils,s),l={[P1.fieldDataDate]:o};return oe("tr",{key:`fields-element-info-row-${i}-${t}`},oe("th",{key:`fields-element-info-row-header-${i}-${t}`,class:P1.fieldHeader,innerHTML:n}),oe("td",{key:`fields-element-info-row-data-${i}-${t}`,class:this.classes(P1.fieldData,l),innerHTML:a}))}renderFields(){const{formattedFieldInfos:e}=this.viewModel;return e!=null&&e.length?oe("table",{class:P1.esriTable,summary:this.messages.fieldsSummary},oe("tbody",null,e.map((t,r)=>this.renderFieldInfo(t,r)))):null}render(){var e;return oe("div",{class:P1.base},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderFields())}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_forceLTR(e){return`&lrm;${e}`}};c([ze("viewModel.attributes")],Ya.prototype,"attributes",void 0),c([ze("viewModel.description")],Ya.prototype,"description",void 0),c([ze("viewModel.expressionInfos")],Ya.prototype,"expressionInfos",void 0),c([ze("viewModel.fieldInfos")],Ya.prototype,"fieldInfos",void 0),c([ze("viewModel.title")],Ya.prototype,"title",void 0),c([p({type:L$})],Ya.prototype,"viewModel",void 0),c([p(),Vn("esri/widgets/Feature/t9n/Feature")],Ya.prototype,"messages",void 0),c([p(),Vn("esri/widgets/support/t9n/uriUtils")],Ya.prototype,"messagesURIUtils",void 0),Ya=c([N("esri.widgets.Feature.FeatureFields")],Ya);const GQ=Ya;let kc=class extends OX{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.format="json",this.gdbVersion=null,this.infoFor3D=null,this.sourceSpatialReference=null}execute(e,t){return this.executeJSON(e,t).then(r=>this.featureSetFromJSON(e,r,t))}async executeJSON(e,t){var r;const i={...this.requestOptions,...t},n=this._normalizeQuery(e),s=((r=e.outStatistics)==null?void 0:r[0])!=null,o=ge("featurelayer-pbf-statistics"),a=!s||o;let l;if(this.format==="pbf"&&a)try{l=await jSe(this.url,n,i)}catch(u){if(u.name!=="query:parsing-pbf")throw u;this.format="json"}return this.format!=="json"&&a||(l=await KK(this.url,n,i)),this._normalizeFields(l.fields),l}async featureSetFromJSON(e,t,r){if(!(this._queryIs3DObjectFormat(e)&&U(this.infoFor3D)&&t.features&&t.features.length))return Bu.fromJSON(t);const{meshFeatureSetFromJSON:i}=await PL(ae(()=>import("./meshFeatureSet.6ae6c4a0.js").then(function(n){return n.a}),["assets/meshFeatureSet.6ae6c4a0.js","assets/georeference.b867f831.js","assets/quat.a34c75bf.js","assets/vec33.0ef90cb8.js","assets/BufferView.3bef53f7.js","assets/earcut.f20dd8d8.js","assets/deduplicate.6943d3fc.js"]),r);return i(e,this.infoFor3D,t)}executeForCount(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return YK(this.url,i,r)}executeForExtent(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return PSe(this.url,i,r)}executeForIds(e,t){const r={...this.requestOptions,...t},i=this._normalizeQuery(e);return m6(this.url,i,r)}executeRelationshipQuery(e,t){e=Bm.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),BSe(this.url,e,r)}executeRelationshipQueryForCount(e,t){e=Bm.from(e);const r={...this.requestOptions,...t};return(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),GSe(this.url,e,r)}executeAttachmentQuery(e,t){const r={...this.requestOptions,...t};return OSe(this.url,e,r)}executeTopFeaturesQuery(e,t){const r={...this.requestOptions,...t};return YSe(this.parsedUrl,e,this.sourceSpatialReference,r)}executeForTopIds(e,t){const r={...this.requestOptions,...t};return KSe(this.parsedUrl,e,r)}executeForTopExtents(e,t){const r={...this.requestOptions,...t};return XSe(this.parsedUrl,e,r)}executeForTopCount(e,t){const r={...this.requestOptions,...t};return QSe(this.parsedUrl,e,r)}_normalizeQuery(e){let t=ni.from(e);if(t.sourceSpatialReference=t.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(t=t===e?t.clone():t,t.gdbVersion=e.gdbVersion||this.gdbVersion,t.dynamicDataSource=e.dynamicDataSource?ss.from(e.dynamicDataSource):this.dynamicDataSource),U(this.infoFor3D)&&this._queryIs3DObjectFormat(e)){t=t===e?t.clone():t,t.formatOf3DObjects=null;for(const r of this.infoFor3D.queryFormats){if(r.id==="3D_glb"){t.formatOf3DObjects=r.id;break}r.id!=="3D_gltf"||t.formatOf3DObjects||(t.formatOf3DObjects=r.id)}if(!t.formatOf3DObjects)throw new Z("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(ce(t.outFields)||!t.outFields.includes("*")){t=t===e?t.clone():t,ce(t.outFields)&&(t.outFields=[]);const{originX:r,originY:i,originZ:n,translationX:s,translationY:o,translationZ:a,scaleX:l,scaleY:u,scaleZ:h,rotationX:d,rotationY:f,rotationZ:m,rotationDeg:g}=this.infoFor3D.transformFieldRoles;t.outFields.push(r,i,n,s,o,a,l,u,h,d,f,m,g)}}return t}_normalizeFields(e){if(U(this.fieldsIndex)&&U(e))for(const t of e){const r=this.fieldsIndex.get(t.name);r&&Object.assign(t,r.toJSON())}}_queryIs3DObjectFormat(e){return U(this.infoFor3D)&&e.returnGeometry&&e.multipatchOption!=="xyFootprint"&&!e.outStatistics}};c([p({type:ss})],kc.prototype,"dynamicDataSource",void 0),c([p()],kc.prototype,"fieldsIndex",void 0),c([p()],kc.prototype,"format",void 0),c([p()],kc.prototype,"gdbVersion",void 0),c([p()],kc.prototype,"infoFor3D",void 0),c([p()],kc.prototype,"sourceSpatialReference",void 0),kc=c([N("esri.tasks.QueryTask")],kc);const l$e=kc,u$e="esri.widgets.Feature.support.relatedFeatureUtils",cU=Te.getLogger(u$e),hU=new Map;function Bb(e){if(!ih(e))return null;const[t,r]=e.split("/").slice(1);return{layerId:t,fieldName:r}}function c$e(e,t){if(!t.relationships)return null;let r=null;const{relationships:i}=t;return i.some(n=>n.id===parseInt(e,10)&&(r=n,!0)),r}function h$e({originRelationship:e,relationships:t,layerId:r}){let i;return t&&t.some(n=>(`${n.relatedTableId}`===r&&n.id===e.id&&(i=n),!!i)),i}function d$e(e,t){const r=t.toLowerCase();for(const i in e)if(i.toLowerCase()===r)return e[i];return null}function p$e(e,t){const r=c$e(e,t);if(!r)return;const i=`${t.url}/${r.relatedTableId}`;return{url:i,queryTask:new l$e({url:i,sourceSpatialReference:t.spatialReference}),relation:r,relatedFields:[],outStatistics:[]}}function f$e(e,t){if(!t||!e)return;const{features:r,statsFeatures:i}=e,n=r&&r.value;t.relatedFeatures=n?n.features:[];const s=i&&i.value;t.relatedStatsFeatures=s?s.features:[]}function m$e(e,t,r,i){const n=new Bm;return n.outFields=["*"],n.relationshipId=typeof t.id=="number"?t.id:parseInt(t.id,10),n.objectIds=[e.attributes[r.objectIdField]],r.queryRelatedFeatures(n,i)}function y$e(e,t,r){let i=0;const n=[];for(;i<t.length;)n.push(`${e} IN (${t.slice(i,r+i)})`),i+=r;return n.join(" OR ")}async function g$e(e,t,r,i){const n=r.layerId.toString(),{layerInfo:s,queryTask:o,relation:a,relatedFields:l,outStatistics:u}=t,h=h$e({originRelationship:a,relationships:s.relationships,layerId:n});if(h.relationshipTableId&&h.keyFieldInRelationshipTable){const f=(await m$e(e,h,r,i))[e.attributes[r.objectIdField]];if(!f)return null;const m=f.features.map(g=>g.attributes[s.objectIdField]);if(u?.length>0&&s.supportsStatistics){const g=new ni;g.where=y$e(s.objectIdField,m,1e3),g.outFields=l,g.outStatistics=u;const b={features:Promise.resolve(f),statsFeatures:o.execute(g)};return Zs(b)}}const d=h?.keyField;if(d){const f=uN(x$e(s.fields,d)),m=d$e(e.attributes,a.keyField),g=f?`${d}=${m}`:`${d}='${m}'`,b=o.execute(new ni({where:g,outFields:t.relatedFields}),i),w=t.outStatistics&&t.outStatistics.length>0&&s.supportsStatistics?o.execute(new ni({where:g,outFields:t.relatedFields,outStatistics:t.outStatistics}),i):null,_={features:b};return w&&(_.statsFeatures=w),Zs(_)}return null}function v$e(e,t){return Ee(e,{query:{f:"json"},signal:t&&t.signal})}function b$e({relatedInfos:e,layer:t},r){const i={};return e.forEach((n,s)=>{const{relation:o}=n;if(!o){const d=new Z("relation-required","A relation is required on a layer to retrieve related records.");throw cU.error(d),d}const{relatedTableId:a}=o;if(typeof a!="number"){const d=new Z("A related table ID is required on a layer to retrieve related records.");throw cU.error(d),d}const l=`${t.url}/${a}`,u=hU.get(l),h=u||v$e(l,r);u||hU.set(l,h),i[s]=h}),Zs(i)}function w$e({graphic:e,relatedInfos:t,layer:r},i){const n={};return t.forEach((s,o)=>{s.layerInfo&&(n[o]=g$e(e,s,r,i))}),Zs(n)}function _$e({relatedInfo:e,fieldName:t,fieldInfo:r}){if(e.relatedFields.push(t),r.statisticType){const i=new RY({statisticType:r.statisticType,onStatisticField:t,outStatisticFieldName:t});e.outStatistics.push(i)}}function x$e(e,t){if(e!=null){t=t.toLowerCase();for(const r of e)if(r&&r.name.toLowerCase()===t)return r}return null}let dn=class extends Ze{constructor(e){super(e),this.activeMediaInfoIndex=0,this.attributes=null,this.description=null,this.fieldInfoMap=null,this.formattedAttributes=null,this.expressionAttributes=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null}get activeMediaInfo(){return this.formattedMediaInfos[this.activeMediaInfoIndex]||null}get formattedMediaInfos(){return this._formatMediaInfos()||[]}get formattedMediaInfoCount(){return this.formattedMediaInfos.length}setActiveMedia(e){this._setContentElementMedia(e)}next(){this._pageContentElementMedia(1)}previous(){this._pageContentElementMedia(-1)}_setContentElementMedia(e){const{formattedMediaInfoCount:t}=this,r=(e+t)%t;this.activeMediaInfoIndex=r}_pageContentElementMedia(e){const{activeMediaInfoIndex:t}=this,r=t+e;this._setContentElementMedia(r)}_formatMediaInfos(){const{attributes:e,mediaInfos:t,formattedAttributes:r,expressionAttributes:i,fieldInfoMap:n,layer:s}=this;return t?.map(o=>{const a=o?.clone();if(!a)return null;if(a.title=tm({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.title}),a.caption=tm({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.caption}),a.altText=tm({attributes:e,fieldInfoMap:n,globalAttributes:r,expressionAttributes:i,layer:s,text:a.altText}),a.type==="image"){const{value:l}=a;return this._setImageValue({value:l,formattedAttributes:r,layer:s}),a.value.sourceURL?a:void 0}if(a.type==="pie-chart"||a.type==="line-chart"||a.type==="column-chart"||a.type==="bar-chart"){const{value:l}=a;return this._setChartValue({value:l,chartType:a.type,attributes:e,formattedAttributes:r,layer:s}),a}return null}).filter(Boolean)}_setImageValue(e){const{fieldInfoMap:t}=this,{value:r,formattedAttributes:i,layer:n}=e,{linkURL:s,sourceURL:o}=r;if(o){const a=RP(o,n);r.sourceURL=PP({formattedAttributes:i,template:a,fieldInfoMap:t})}if(s){const a=RP(s,n);r.linkURL=PP({formattedAttributes:i,template:a,fieldInfoMap:t})}}_setChartValue(e){const{value:t,attributes:r,formattedAttributes:i,chartType:n,layer:s}=e,{popupTemplate:o,relatedInfos:a}=this,{fields:l,normalizeField:u}=t;if(t.fields=MTe(l,s),u&&(t.normalizeField=$I(u,s)),!l.some(d=>!!(i[d]!=null||ih(d)&&a.size)))return;const h=o?.fieldInfos;l.forEach(d=>{if(ih(d))return void(t.series=[...t.series,...this._getRelatedChartInfos({fieldInfos:h,fieldName:d,formattedAttributes:i,chartType:n,value:t})]);const f=this._getChartOption({value:t,attributes:r,chartType:n,formattedAttributes:i,fieldName:d,fieldInfos:h});t.series.push(f)})}_getRelatedChartInfos(e){var t;const{fieldInfos:r,fieldName:i,formattedAttributes:n,chartType:s,value:o}=e,a=[],l=Bb(i),{layerId:u,fieldName:h}=l,d=(t=this.relatedInfos)==null?void 0:t.get(u.toString());if(!d)return a;const{relatedFeatures:f,relation:m}=d;if(!m||!f)return a;const{cardinality:g}=m;return f.forEach(b=>{const{attributes:w}=b;w&&Object.keys(w).forEach(_=>{_===h&&a.push(this._getChartOption({value:o,attributes:w,formattedAttributes:n,fieldName:i,chartType:s,relatedFieldName:_,fieldInfos:r}))})}),g==="one-to-many"||g==="many-to-many"?a:[a[0]]}_getTooltip({label:e,value:t,chartType:r}){return r==="pie-chart"?e:`${e}: ${t}`}_getChartOption(e){var t;const{value:r,attributes:i,formattedAttributes:n,fieldName:s,relatedFieldName:o,fieldInfos:a,chartType:l}=e,{layer:u}=this,{normalizeField:h,tooltipField:d}=r,f=h?ih(h)?i[Bb(h).fieldName]:i[h]:null,m=o&&i[o]!==void 0?i[o]:i[s]!==void 0?i[s]:n[s],g=m===void 0?null:m&&f?m/f:m,b=new UJ({value:g});if(ih(s)){const S=Bb(s),T=Bb(d),$=T?T.fieldName:null,E=FQ(g,{fieldInfos:a,fieldName:o,layer:u,preventPlacesFormatting:!!f}),C=S?S.label||S.fieldName:o,O=$&&i[$]!==void 0?i[$]:C;return b.tooltip=this._getTooltip({label:O,value:E,chartType:l}),b}const w=jQ(a,s),_=$I(s,u),x=d&&n[d]!==void 0?n[d]:NQ(w||new c2({fieldName:_}),(t=this.popupTemplate)==null?void 0:t.expressionInfos),I=n[_];return b.tooltip=this._getTooltip({label:x,value:I,chartType:l}),b}};c([p()],dn.prototype,"activeMediaInfoIndex",void 0),c([p({readOnly:!0})],dn.prototype,"activeMediaInfo",null),c([p()],dn.prototype,"attributes",void 0),c([p()],dn.prototype,"description",void 0),c([p()],dn.prototype,"fieldInfoMap",void 0),c([p()],dn.prototype,"formattedAttributes",void 0),c([p()],dn.prototype,"expressionAttributes",void 0),c([p({readOnly:!0})],dn.prototype,"formattedMediaInfos",null),c([p()],dn.prototype,"layer",void 0),c([p({readOnly:!0})],dn.prototype,"formattedMediaInfoCount",null),c([p()],dn.prototype,"mediaInfos",void 0),c([p()],dn.prototype,"popupTemplate",void 0),c([p()],dn.prototype,"relatedInfos",void 0),c([p()],dn.prototype,"title",void 0),dn=c([N("esri.widgets.Feature.FeatureMedia.FeatureMediaViewModel")],dn);const rm=dn;var dU=["#ffffff","#858585","#ffbebe","#ffebbe","#ffebaf","#ffffbe","#e9ffbe","#d3ffbe","#beffe8","#bee8ff","#bed2ff","#e8beff","#ffbee8","#ebebeb","#707070","#ff7f7f","#ffa77f","#ffd37f","#ffff73","#d1ff73","#a3ff73","#73ffdf","#73dfff","#73b2ff","#df73ff","#ff73df","#d6d6d6","#5c5c5c","#ff0000","#ff5500","#ffaa00","#ffff00","#aaff00","#55ff00","#00ffc5","#00c5ff","#0070ff","#c500ff","#ff00c5","#c2c2c2","#474747","#e60000","#e64c00","#e69800","#e6e600","#98e600","#4ce600","#00e6a9","#00a9e6","#005ce6","#a900e6","#e600a9","#adadad","#242424","#a80000","#a83800","#a87000","#a8a800","#70a800","#38a800","#00a884","#0084a8","#004da8","#8400a8","#a80084","#999999","#1a1a1a","#730000","#732600","#734c00","#737300","#4c7300","#267300","#00734c","#004c73","#002673","#4c0073","#73004"],S$e=[].concat(dU.slice(30,39),dU.slice(28,30).reverse()),M$e=[{name:"default",colors:S$e},{name:"cat-dark",colors:["#ed5151","#149ece","#a7c636","#9e559c","#fc921f","#ffde3e","#f789d8","#b7814a","#3caf99","#6b6bd6","#b54779","#7f7f7f"]},{name:"tropical-bliss",colors:["#fce138","#ff9399","#fcd27e","#f1983c","#a553b7","#b1a9d0","#6ecffc","#4c81cd","#fc6f84","#fc3e5a","#6af689","#48885c"]},{name:"desert-blooms",colors:["#102432","#144d59","#ffc730","#ed9310","#a64f1b","#661510","#d9351a","#b31515","#4a0932","#8c213f","#18382e","#2c6954"]},{name:"under-the-sea",colors:["#bf9727","#607100","#00734c","#704489","#01acca","#024e76","#f09100","#ea311f","#c6004b","#7570b3","#666666","#333333"]},{name:"vibrant-rainbow",colors:["#fffb00","#f5cb11","#9fd40c","#46e39c","#32b8a6","#7ff2fa","#ac08cc","#dd33ff","#eb7200","#e8a784","#bf2e2e","#6c7000"]},{name:"ocean-bay",colors:["#191921","#11495c","#78b1c2","#454f4b","#8f8f82","#9be0c0","#87b051","#f7ec88","#ebdcc1","#dbb658","#c43541","#75351e"]},{name:"prairie-summer",colors:["#332424","#751555","#d47013","#d68989","#211173","#82aad6","#7bfaeb","#6ec9a8","#6b6408","#eada40","#ccc54a","#1fc235"]},{name:"pastel-chalk",colors:["#fffd99","#f5e6a4","#c1d48c","#b8e3d0","#a0b8b5","#cbf7fa","#d791f2","#dfc1eb","#f2b983","#e8c4b2","#bf8e8e","#94995c"]},{name:"seq-yellow-orange-red-bright",colors:["#910000","#b1260b","#c0370f","#e05919","#ef6a1d","#ff7b22","#ffa143","#ffb454","#ffda74","#ffed85"]},{name:"seq-reds-bright",colors:["#57453b","#7b4238","#9f4036","#c23d33","#d7483c","#ec5244","#f3696c","#f9816c","#ffc4ae","#fff0dc"]},{name:"seq-purples-bright",colors:["#4e465c","#5a4a78","#695291","#775baa","#8663c3","#946bdc","#aa89e8","#c1a6f3","#d7c4ff","#e6e1ff"]},{name:"seq-blues-bright",colors:["#404d54","#435c6c","#48799d","#4b88b6","#4d96ce","#50a5e7","#74bbed","#98d0f3","#bce6f9","#e6faff"]},{name:"seq-greens-bright",colors:["#39544c","#386757","#368165","#359b73","#33b581","#4bc392","#64d2a2","#7ce0b3","#cbf6d9","#f4ffea"]},{name:"seq-browns-bright",colors:["#524834","#715b38","#8f6e3c","#ae8140","#cc9444","#eba748","#eeb664","#f0c47f","#f9e0b7","#fff8eb"]}];const pU="en-us",F6=new Map([["ar",()=>ae(()=>import("./ar.7682532e.js"),["assets/ar.7682532e.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.a)],["bg-bg",()=>ae(()=>import("./bg_BG.22b55e23.js"),["assets/bg_BG.22b55e23.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.b)],["bs-ba",()=>ae(()=>import("./bs_BA.5c66c689.js"),["assets/bs_BA.5c66c689.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.b)],["ca-es",()=>ae(()=>import("./ca_ES.92920050.js"),["assets/ca_ES.92920050.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.c)],["cs-cz",()=>ae(()=>import("./cs_CZ.e1f9a3b1.js"),["assets/cs_CZ.e1f9a3b1.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.c)],["da-dk",()=>ae(()=>import("./da_DK.96eb04ca.js"),["assets/da_DK.96eb04ca.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.d)],["de-de",()=>ae(()=>import("./de_DE.83c27c2a.js"),["assets/de_DE.83c27c2a.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.d)],["de-ch",()=>ae(()=>import("./de_CH.3b34a8f9.js"),["assets/de_CH.3b34a8f9.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.d)],["el-gr",()=>ae(()=>import("./el_GR.37a7963f.js"),["assets/el_GR.37a7963f.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.e)],["en-us",()=>ae(()=>import("./en_US.9bbe7904.js"),["assets/en_US.9bbe7904.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.e)],["en-ca",()=>ae(()=>import("./en_CA.863f4cc7.js"),["assets/en_CA.863f4cc7.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.e)],["es-es",()=>ae(()=>import("./es_ES.8687bedb.js"),["assets/es_ES.8687bedb.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.e)],["et-ee",()=>ae(()=>import("./et_EE.908f07b7.js"),["assets/et_EE.908f07b7.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.e)],["fi-fi",()=>ae(()=>import("./fi_FI.8fa88c39.js"),["assets/fi_FI.8fa88c39.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.f)],["fr-fr",()=>ae(()=>import("./fr_FR.ca17330f.js"),["assets/fr_FR.ca17330f.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.f)],["he-il",()=>ae(()=>import("./he_IL.532e0abb.js"),["assets/he_IL.532e0abb.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.h)],["hr-hr",()=>ae(()=>import("./hr_HR.dfb17c24.js"),["assets/hr_HR.dfb17c24.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.h)],["hu-hu",()=>ae(()=>import("./hu_HU.17d1e16d.js"),["assets/hu_HU.17d1e16d.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.h)],["id-id",()=>ae(()=>import("./id_ID.92dd84ec.js"),["assets/id_ID.92dd84ec.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.i)],["it-it",()=>ae(()=>import("./it_IT.2703e4ba.js"),["assets/it_IT.2703e4ba.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.i)],["ja-jp",()=>ae(()=>import("./ja_JP.efb72a9f.js"),["assets/ja_JP.efb72a9f.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.j)],["ko-kr",()=>ae(()=>import("./ko_KR.e2c40f5f.js"),["assets/ko_KR.e2c40f5f.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.k)],["lt-lt",()=>ae(()=>import("./lt_LT.df150266.js"),["assets/lt_LT.df150266.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.l)],["lv-lv",()=>ae(()=>import("./lv_LV.bde0bb97.js"),["assets/lv_LV.bde0bb97.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.l)],["nb-no",()=>ae(()=>import("./nb_NO.ca6adc23.js"),["assets/nb_NO.ca6adc23.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.n)],["nl-nl",()=>ae(()=>import("./nl_NL.747ddbf9.js"),["assets/nl_NL.747ddbf9.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.n)],["pl-pl",()=>ae(()=>import("./pl_PL.c92df51f.js"),["assets/pl_PL.c92df51f.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.p)],["pt-br",()=>ae(()=>import("./pt_BR.9df8f4c6.js"),["assets/pt_BR.9df8f4c6.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.p)],["pt-pt",()=>ae(()=>import("./pt_PT.9408a289.js"),["assets/pt_PT.9408a289.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.p)],["ro-ro",()=>ae(()=>import("./ro_RO.e571d9fb.js"),["assets/ro_RO.e571d9fb.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.r)],["ru-ru",()=>ae(()=>import("./ru_RU.41ca935a.js"),["assets/ru_RU.41ca935a.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.r)],["sk-sk",()=>ae(()=>import("./sk_SK.c118fb38.js"),["assets/sk_SK.c118fb38.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.s)],["sl-sl",()=>ae(()=>import("./sl_SL.6670fb92.js"),["assets/sl_SL.6670fb92.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.s)],["sr-rs",()=>ae(()=>import("./sr_RS.d1c88d95.js"),["assets/sr_RS.d1c88d95.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.s)],["sv-se",()=>ae(()=>import("./sv_SE.e7f41dba.js"),["assets/sv_SE.e7f41dba.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.s)],["th-th",()=>ae(()=>import("./th_TH.57cbb233.js"),["assets/th_TH.57cbb233.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.t)],["tr-tr",()=>ae(()=>import("./tr_TR.98983625.js"),["assets/tr_TR.98983625.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.t)],["uk-ua",()=>ae(()=>import("./uk_UA.b9fa5639.js"),["assets/uk_UA.b9fa5639.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.u)],["vi-vn",()=>ae(()=>import("./vi_VN.412c3357.js"),["assets/vi_VN.412c3357.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.v)],["zh-cn",()=>ae(()=>import("./zh_Hans.f1ad18f6.js"),["assets/zh_Hans.f1ad18f6.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.z)],["zh-hk",()=>ae(()=>import("./zh_Hant.bc99d1e1.js"),["assets/zh_Hant.bc99d1e1.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.z)],["zh-tw",()=>ae(()=>import("./zh_Hant.bc99d1e1.js"),["assets/zh_Hant.bc99d1e1.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(e=>e.z)]]);function I$e(e){const t=e.split("-")[0].toLowerCase();let r=null;for(const i of F6.keys())if(i.startsWith(t)){r=i;break}return r}function T$e(e){return e?F6.has(e.toLowerCase())?e.toLowerCase():I$e(e)||pU:pU}let Uy,R1;async function $$e(e=Sa()){if(e=T$e(e),Uy&&e===R1)return Uy;Uy=ae(()=>import("./index.a93d0f9a.js"),["assets/index.a93d0f9a.js","assets/_commonjsHelpers.8a97ce0f.js"]).then(t=>t.i),R1=e;try{const[t,r]=await Promise.all([Uy,F6.get(R1)()]);R1===e&&(t.am4core.options.defaultLocale=r.default),t.am4core.options.suppressWarnings=!0,t.am4core.options.autoDispose=!0}catch{return Uy=null,R1=null,null}return Uy}function E$e(e,t="default"){const r=M$e.find(i=>i.name===t);return r?r.colors.map(i=>e.color(i)):null}const zr={base:"esri-feature-media",mediaContainer:"esri-feature-media__container",mediaItemContainer:"esri-feature-media__item-container",mediaItem:"esri-feature-media__item",mediaItemTitle:"esri-feature-media__item-title",mediaItemCaption:"esri-feature-media__item-caption",mediaPrevious:"esri-feature-media__previous",mediaPreviousIconLTR:"esri-feature-media__previous-icon",mediaPreviousIconRTL:"esri-feature-media__previous-icon--rtl",mediaNext:"esri-feature-media__next",mediaNextIconLTR:"esri-feature-media__next-icon",mediaNextIconRTL:"esri-feature-media__next-icon--rtl",mediaChart:"esri-feature-media__chart",mediaButton:"esri-feature-media__button",mediaIcon:"esri-feature-media__icon",iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow"},m5=.05,y5=.95,g5=15;let Ms=class extends Tn{constructor(e,t){super(e,t),this._refreshTimer=null,this._refreshIntervalInfo=null,this._featureElementInfo=null,this.attributes=null,this.activeMediaInfoIndex=null,this.description=null,this.fieldInfoMap=null,this.layer=null,this.mediaInfos=null,this.popupTemplate=null,this.relatedInfos=null,this.title=null,this.viewModel=new rm,this.messages=null,this._getChartDependencies=async r=>{const i=await $$e(),{viewModel:n}=this;if(!n)return;const{activeMediaInfo:s}=n;this._renderChart({chartDiv:r,mediaInfo:s,chartsModule:i})}}initialize(){this._featureElementInfo=new D6,this.own(It(this,["viewModel.activeMediaInfo","viewModel.activeMediaInfoIndex"],()=>this._setupMediaRefreshTimer()),It(this,["viewModel.description","viewModel.title"],()=>this._setupFeatureElementInfo()))}destroy(){this._clearMediaRefreshTimer(),this._featureElementInfo.destroy()}render(){var e;return oe("div",{bind:this,class:zr.base,onkeyup:this._handleMediaKeyup},(e=this._featureElementInfo)==null?void 0:e.render(),this.renderMedia())}renderMedia(){const{formattedMediaInfoCount:e}=this.viewModel;return e?oe("div",{key:"media-element-container",class:zr.mediaContainer},this.renderMediaPageButton("previous"),this.renderMediaInfo(),this.renderMediaPageButton("next")):null}renderImageMediaInfo(e){const{_refreshIntervalInfo:t}=this,{activeMediaInfoIndex:r,formattedMediaInfoCount:i}=this.viewModel,{value:n,refreshInterval:s,altText:o,title:a,type:l}=e,{sourceURL:u,linkURL:h}=n,d=RQ(h)?"_blank":"_self",f=d==="_blank"?"noreferrer":"",m=s?t:null,g=m?m.timestamp:0,b=m?m.sourceURL:u,w=oe("img",{alt:o||a,key:`media-${l}-${r}-${i}-${g}`,src:b});return(h?oe("a",{title:a,href:h,rel:f,target:d},w):null)||w}renderChartMediaInfo(e){const{activeMediaInfoIndex:t,formattedMediaInfoCount:r}=this.viewModel;return oe("div",{key:`media-${e.type}-${t}-${r}`,bind:this,class:zr.mediaChart,afterCreate:this._getChartDependencies})}renderMediaInfoType(){const{activeMediaInfo:e}=this.viewModel;return e?e.type==="image"?this.renderImageMediaInfo(e):e.type.indexOf("chart")!==-1?this.renderChartMediaInfo(e):null:null}renderMediaInfo(){const{activeMediaInfo:e}=this.viewModel;if(!e)return null;const t=e.title?oe("div",{key:"media-title",class:zr.mediaItemTitle,innerHTML:e.title}):null,r=e.caption?oe("div",{key:"media-caption",class:zr.mediaItemCaption,innerHTML:e.caption}):null;return oe("div",{key:"media-container",class:zr.mediaItemContainer},oe("div",{key:"media-item-container",class:zr.mediaItem},this.renderMediaInfoType()),t,r)}renderMediaPageButton(e){if(this.viewModel.formattedMediaInfoCount<2)return null;const t=e==="previous",r=t?this.messages.previous:this.messages.next,i=t?this.classes(zr.mediaButton,zr.mediaPrevious):this.classes(zr.mediaButton,zr.mediaNext),n=t?this.classes(zr.mediaIcon,zr.mediaPreviousIconLTR,zr.iconLeftTriangleArrow):this.classes(zr.mediaIcon,zr.mediaNextIconLTR,zr.iconRightTriangleArrow),s=t?this.classes(zr.mediaIcon,zr.mediaPreviousIconRTL,zr.iconRightTriangleArrow):this.classes(zr.mediaIcon,zr.mediaNextIconRTL,zr.iconLeftTriangleArrow),o=t?"media-previous":"media-next",a=t?this._previous:this._next;return oe("button",{type:"button",key:o,title:r,"aria-label":r,tabIndex:0,class:i,bind:this,onclick:a},oe("span",{"aria-hidden":"true",class:n}),oe("span",{"aria-hidden":"true",class:s}))}_setupFeatureElementInfo(){const{description:e,title:t}=this;this._featureElementInfo.set({description:e,title:t})}_next(){this.viewModel.next()}_previous(){this.viewModel.previous()}_handleMediaKeyup(e){const t=jf(e);t==="ArrowLeft"&&(e.stopPropagation(),this.viewModel.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.viewModel.next())}_renderChart(e){const{chartsModule:t,chartDiv:r,mediaInfo:i}=e,{value:n,type:s}=i,{am4core:o}=t,a=E$e(o);function l(h){h instanceof o.ColorSet&&a&&(h.list=a)}eQ()&&o.useTheme(t.am4themes_dark),o.useTheme(t.am4themes_animated),o.useTheme(l);const u=s==="pie-chart"?this._createPieChart(e):this._createXYChart(e);r.setAttribute("aria-label",i.altText||i.title),u.data=n.series.map(h=>({tooltip:h.tooltip,value:h.value})).filter(h=>s!=="pie-chart"||h.value>0)}_customizeChartTooltip(e,t){e.label.wrap=!0,e.label.maxWidth=200,e.autoTextColor=!1,e.getFillFromObject=!1,e.label.fill=t.color("#ffffff"),e.background.fill=t.color({r:0,g:0,b:0,a:.7})}_createPieChart(e){const{chartDiv:t,chartsModule:r}=e,{am4core:i,am4charts:n}=r,s=i.create(t,n.PieChart);s.rtl=jd(this.container);const o=s.series.push(new n.PieSeries);return o.labels.template.disabled=!0,o.ticks.template.disabled=!0,o.dataFields.value="value",o.dataFields.category="tooltip",this._customizeChartTooltip(o.tooltip,i),s}_getMinSeriesValue(e){let t=0;return e.forEach(r=>t=Math.min(r.value,t)),t}_createColumnChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=m5,l.renderer.maxLabelPosition=y5,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),u.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueY="value",h.dataFields.categoryX="tooltip",e.cursor=new o.XYCursor,n.series.length>g5&&(e.scrollbarX=new s.Scrollbar)}_createBarChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.yAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.inversed=!0,a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dx=a.tooltip.contentWidth});const l=e.xAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=m5,l.renderer.maxLabelPosition=y5,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),u.wrap=!0;const h=e.series.push(new o.ColumnSeries);h.dataFields.valueX="value",h.dataFields.categoryY="tooltip",e.cursor=new o.XYCursor,n.series.length>g5&&(e.scrollbarY=new s.Scrollbar)}_createLineChart(e,t){const{chartsModule:r,mediaInfo:i}=t,{value:n}=i,{am4core:s,am4charts:o}=r,a=e.xAxes.push(new o.CategoryAxis);a.dataFields.category="tooltip",a.renderer.labels.template.disabled=!0,this._customizeChartTooltip(a.tooltip,s),a.tooltip.events.on("sizechanged",()=>{a.tooltip.dy=-a.tooltip.contentHeight});const l=e.yAxes.push(new o.ValueAxis),u=l.renderer.labels.template;l.renderer.minLabelPosition=m5,l.renderer.maxLabelPosition=y5,l.min=this._getMinSeriesValue(n.series),this._customizeChartTooltip(l.tooltip,s),u.wrap=!0;const h=e.series.push(new o.LineSeries);h.dataFields.categoryX="tooltip",h.dataFields.valueY="value",e.cursor=new o.XYCursor,n.series.length>g5&&(e.scrollbarX=new s.Scrollbar)}_createXYChart(e){const{chartDiv:t,chartsModule:r,mediaInfo:i}=e,{type:n}=i,{am4core:s,am4charts:o}=r,a=s.create(t,o.XYChart);return a.rtl=jd(this.container),n==="column-chart"&&this._createColumnChart(a,e),n==="bar-chart"&&this._createBarChart(a,e),n==="line-chart"&&this._createLineChart(a,e),a}_clearMediaRefreshTimer(){const{_refreshTimer:e}=this;e&&(clearTimeout(e),this._refreshTimer=null)}_updateMediaInfoTimestamp(e){const t=Date.now();this._refreshIntervalInfo={timestamp:t,sourceURL:this._getImageSource(e,t)},this.scheduleRender()}_setupMediaRefreshTimer(){this._clearMediaRefreshTimer();const{activeMediaInfo:e}=this.viewModel;e&&e.type==="image"&&e.refreshInterval&&this._setRefreshTimeout(e)}_setRefreshTimeout(e){const{refreshInterval:t,value:r}=e;if(!t)return;const i=6e4*t;this._updateMediaInfoTimestamp(r.sourceURL);const n=setInterval(()=>{this._updateMediaInfoTimestamp(r.sourceURL)},i);this._refreshTimer=n}_getImageSource(e,t){const r=e.indexOf("?")!==-1?"&":"?",[i,n=""]=e.split("#");return`${i}${r}timestamp=${t}${n?"#":""}${n}`}};c([ze("viewModel.attributes")],Ms.prototype,"attributes",void 0),c([ze("viewModel.activeMediaInfoIndex")],Ms.prototype,"activeMediaInfoIndex",void 0),c([ze("viewModel.description")],Ms.prototype,"description",void 0),c([ze("viewModel.fieldInfoMap")],Ms.prototype,"fieldInfoMap",void 0),c([ze("viewModel.layer")],Ms.prototype,"layer",void 0),c([ze("viewModel.mediaInfos")],Ms.prototype,"mediaInfos",void 0),c([ze("viewModel.popupTemplate")],Ms.prototype,"popupTemplate",void 0),c([ze("viewModel.relatedInfos")],Ms.prototype,"relatedInfos",void 0),c([ze("viewModel.title")],Ms.prototype,"title",void 0),c([p({type:rm})],Ms.prototype,"viewModel",void 0),c([p(),Vn("esri/widgets/Feature/t9n/Feature")],Ms.prototype,"messages",void 0),Ms=c([N("esri.widgets.Feature.FeatureMedia")],Ms);const qQ=Ms;class A$e{constructor(t,r){this.definition=null,this.context=null,this.definition=t,this.context=r}}class Ku{constructor(t=[]){this._elements=t}length(){return this._elements.length}get(t){return this._elements[t]}toArray(){const t=[];for(let r=0;r<this.length();r++)t.push(this.get(r));return t}}class Sy extends Ku{constructor(t,r,i,n,s,o){super(t),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=i,this._hasM=n,this._cacheId=s,this._partId=o}get(t){if(this._lazyPt[t]===void 0){const r=this._elements[t];if(r===void 0)return;const i=this._hasZ,n=this._hasM;let s=null;s=i&&!n?new Ke(r[0],r[1],r[2],void 0,this._spRef):n&&!i?new Ke(r[0],r[1],void 0,r[2],this._spRef):i&&n?new Ke(r[0],r[1],r[2],r[3],this._spRef):new Ke(r[0],r[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+t.toString(),this._lazyPt[t]=s}return this._lazyPt[t]}equalityTest(t){return t===this||t!==null&&t instanceof Sy&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}}class j6 extends Ku{constructor(t,r,i,n,s){super(t),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=i,this._hasM=n,this._spRef=r,this._cacheId=s}get(t){if(this._lazyPath[t]===void 0){const r=this._elements[t];if(r===void 0)return;this._lazyPath[t]=new Sy(r,this._spRef,this._hasZ,this._hasM,this._cacheId,t)}return this._lazyPath[t]}equalityTest(t){return t===this||t!==null&&t instanceof j6&&t.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}}class My extends Error{}class C$e extends My{constructor(t){super(`Invalid DateTime: ${t.toMessage()}`)}}class k$e extends My{constructor(t){super(`Invalid Interval: ${t.toMessage()}`)}}class O$e extends My{constructor(t){super(`Invalid Duration: ${t.toMessage()}`)}}class Gb extends My{}class HQ extends My{constructor(t){super(`Invalid unit ${t}`)}}class pa extends My{}class Dh extends My{constructor(){super("Zone is an abstract class")}}const Ve="numeric",Ml="short",Co="long",LP={year:Ve,month:Ve,day:Ve},WQ={year:Ve,month:Ml,day:Ve},P$e={year:Ve,month:Ml,day:Ve,weekday:Ml},JQ={year:Ve,month:Co,day:Ve},ZQ={year:Ve,month:Co,day:Ve,weekday:Co},YQ={hour:Ve,minute:Ve},KQ={hour:Ve,minute:Ve,second:Ve},XQ={hour:Ve,minute:Ve,second:Ve,timeZoneName:Ml},QQ={hour:Ve,minute:Ve,second:Ve,timeZoneName:Co},eee={hour:Ve,minute:Ve,hourCycle:"h23"},tee={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23"},ree={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Ml},iee={hour:Ve,minute:Ve,second:Ve,hourCycle:"h23",timeZoneName:Co},nee={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve},see={year:Ve,month:Ve,day:Ve,hour:Ve,minute:Ve,second:Ve},oee={year:Ve,month:Ml,day:Ve,hour:Ve,minute:Ve},aee={year:Ve,month:Ml,day:Ve,hour:Ve,minute:Ve,second:Ve},R$e={year:Ve,month:Ml,day:Ve,weekday:Ml,hour:Ve,minute:Ve},lee={year:Ve,month:Co,day:Ve,hour:Ve,minute:Ve,timeZoneName:Ml},uee={year:Ve,month:Co,day:Ve,hour:Ve,minute:Ve,second:Ve,timeZoneName:Ml},cee={year:Ve,month:Co,day:Ve,weekday:Co,hour:Ve,minute:Ve,timeZoneName:Co},hee={year:Ve,month:Co,day:Ve,weekday:Co,hour:Ve,minute:Ve,second:Ve,timeZoneName:Co};function ir(e){return typeof e>"u"}function Mm(e){return typeof e=="number"}function N$(e){return typeof e=="number"&&e%1===0}function L$e(e){return typeof e=="string"}function N$e(e){return Object.prototype.toString.call(e)==="[object Date]"}function dee(){try{return typeof Intl<"u"&&!!Intl.RelativeTimeFormat}catch{return!1}}function D$e(e){return Array.isArray(e)?e:[e]}function fU(e,t,r){if(e.length!==0)return e.reduce((i,n)=>{const s=[t(n),n];return i&&r(i[0],s[0])===i[0]?i:s},null)[1]}function F$e(e,t){return t.reduce((r,i)=>(r[i]=e[i],r),{})}function X0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function nh(e,t,r){return N$(e)&&e>=t&&e<=r}function j$e(e,t){return e-t*Math.floor(e/t)}function r0(e,t=2){const r=e<0?"-":"",i=r?e*-1:e;let n;return i.toString().length<t?n=("0".repeat(t)+i).slice(-t):n=i.toString(),`${r}${n}`}function Ad(e){if(!(ir(e)||e===null||e===""))return parseInt(e,10)}function Lp(e){if(!(ir(e)||e===null||e===""))return parseFloat(e)}function V6(e){if(!(ir(e)||e===null||e==="")){const t=parseFloat("0."+e)*1e3;return Math.floor(t)}}function U6(e,t,r=!1){const i=10**t;return(r?Math.trunc:Math.round)(e*i)/i}function $2(e){return e%4===0&&(e%100!==0||e%400===0)}function kw(e){return $2(e)?366:365}function AI(e,t){const r=j$e(t-1,12)+1,i=e+(t-r)/12;return r===2?$2(i)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][r-1]}function z6(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(t.getUTCFullYear()-1900)),+t}function CI(e){const t=(e+Math.floor(e/4)-Math.floor(e/100)+Math.floor(e/400))%7,r=e-1,i=(r+Math.floor(r/4)-Math.floor(r/100)+Math.floor(r/400))%7;return t===4||i===3?53:52}function NP(e){return e>99?e:e>60?1900+e:2e3+e}function pee(e,t,r,i=null){const n=new Date(e),s={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};i&&(s.timeZone=i);const o={timeZoneName:t,...s},a=new Intl.DateTimeFormat(r,o).formatToParts(n).find(l=>l.type.toLowerCase()==="timezonename");return a?a.value:null}function D$(e,t){let r=parseInt(e,10);Number.isNaN(r)&&(r=0);const i=parseInt(t,10)||0,n=r<0||Object.is(r,-0)?-i:i;return r*60+n}function fee(e){const t=Number(e);if(typeof e=="boolean"||e===""||Number.isNaN(t))throw new pa(`Invalid unit value ${e}`);return t}function kI(e,t){const r={};for(const i in e)if(X0(e,i)){const n=e[i];if(n==null)continue;r[t(i)]=fee(n)}return r}function OI(e,t){const r=Math.trunc(Math.abs(e/60)),i=Math.trunc(Math.abs(e%60)),n=e>=0?"+":"-";switch(t){case"short":return`${n}${r0(r,2)}:${r0(i,2)}`;case"narrow":return`${n}${r}${i>0?`:${i}`:""}`;case"techie":return`${n}${r0(r,2)}${r0(i,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function F$(e){return F$e(e,["hour","minute","second","millisecond"])}const mee=/[A-Za-z_+-]{1,256}(:?\/[A-Za-z0-9_+-]{1,256}(\/[A-Za-z0-9_+-]{1,256})?)?/,V$e=["January","February","March","April","May","June","July","August","September","October","November","December"],yee=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],U$e=["J","F","M","A","M","J","J","A","S","O","N","D"];function gee(e){switch(e){case"narrow":return[...U$e];case"short":return[...yee];case"long":return[...V$e];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const vee=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],bee=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],z$e=["M","T","W","T","F","S","S"];function wee(e){switch(e){case"narrow":return[...z$e];case"short":return[...bee];case"long":return[...vee];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const _ee=["AM","PM"],B$e=["Before Christ","Anno Domini"],G$e=["BC","AD"],q$e=["B","A"];function xee(e){switch(e){case"narrow":return[...q$e];case"short":return[...G$e];case"long":return[...B$e];default:return null}}function H$e(e){return _ee[e.hour<12?0:1]}function W$e(e,t){return wee(t)[e.weekday-1]}function J$e(e,t){return gee(t)[e.month-1]}function Z$e(e,t){return xee(t)[e.year<0?0:1]}function Y$e(e,t,r="always",i=!1){const n={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},s=["hours","minutes","seconds"].indexOf(e)===-1;if(r==="auto"&&s){const d=e==="days";switch(t){case 1:return d?"tomorrow":`next ${n[e][0]}`;case-1:return d?"yesterday":`last ${n[e][0]}`;case 0:return d?"today":`this ${n[e][0]}`}}const o=Object.is(t,-0)||t<0,a=Math.abs(t),l=a===1,u=n[e],h=i?l?u[1]:u[2]||u[1]:l?n[e][0]:e;return o?`${a} ${h} ago`:`in ${a} ${h}`}function mU(e,t){let r="";for(const i of e)i.literal?r+=i.val:r+=t(i.val);return r}const K$e={D:LP,DD:WQ,DDD:JQ,DDDD:ZQ,t:YQ,tt:KQ,ttt:XQ,tttt:QQ,T:eee,TT:tee,TTT:ree,TTTT:iee,f:nee,ff:oee,fff:lee,ffff:cee,F:see,FF:aee,FFF:uee,FFFF:hee};class js{static create(t,r={}){return new js(t,r)}static parseFormat(t){let r=null,i="",n=!1;const s=[];for(let o=0;o<t.length;o++){const a=t.charAt(o);a==="'"?(i.length>0&&s.push({literal:n,val:i}),r=null,i="",n=!n):n||a===r?i+=a:(i.length>0&&s.push({literal:!1,val:i}),i=a,r=a)}return i.length>0&&s.push({literal:n,val:i}),s}static macroTokenToFormatOpts(t){return K$e[t]}constructor(t,r){this.opts=r,this.loc=t,this.systemLoc=null}formatWithSystemDefault(t,r){return this.systemLoc===null&&(this.systemLoc=this.loc.redefaultToSystem()),this.systemLoc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTime(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).format()}formatDateTimeParts(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).formatToParts()}resolvedOptions(t,r={}){return this.loc.dtFormatter(t,{...this.opts,...r}).resolvedOptions()}num(t,r=0){if(this.opts.forceSimple)return r0(t,r);const i={...this.opts};return r>0&&(i.padTo=r),this.loc.numberFormatter(i).format(t)}formatDateTimeFromString(t,r){const i=this.loc.listingMode()==="en",n=this.loc.outputCalendar&&this.loc.outputCalendar!=="gregory",s=(m,g)=>this.loc.extract(t,m,g),o=m=>t.isOffsetFixed&&t.offset===0&&m.allowZ?"Z":t.isValid?t.zone.formatOffset(t.ts,m.format):"",a=()=>i?H$e(t):s({hour:"numeric",hourCycle:"h12"},"dayperiod"),l=(m,g)=>i?J$e(t,m):s(g?{month:m}:{month:m,day:"numeric"},"month"),u=(m,g)=>i?W$e(t,m):s(g?{weekday:m}:{weekday:m,month:"long",day:"numeric"},"weekday"),h=m=>{const g=js.macroTokenToFormatOpts(m);return g?this.formatWithSystemDefault(t,g):m},d=m=>i?Z$e(t,m):s({era:m},"era"),f=m=>{switch(m){case"S":return this.num(t.millisecond);case"u":case"SSS":return this.num(t.millisecond,3);case"s":return this.num(t.second);case"ss":return this.num(t.second,2);case"uu":return this.num(Math.floor(t.millisecond/10),2);case"uuu":return this.num(Math.floor(t.millisecond/100));case"m":return this.num(t.minute);case"mm":return this.num(t.minute,2);case"h":return this.num(t.hour%12===0?12:t.hour%12);case"hh":return this.num(t.hour%12===0?12:t.hour%12,2);case"H":return this.num(t.hour);case"HH":return this.num(t.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return t.zone.offsetName(t.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return t.zone.offsetName(t.ts,{format:"long",locale:this.loc.locale});case"z":return t.zoneName;case"a":return a();case"d":return n?s({day:"numeric"},"day"):this.num(t.day);case"dd":return n?s({day:"2-digit"},"day"):this.num(t.day,2);case"c":return this.num(t.weekday);case"ccc":return u("short",!0);case"cccc":return u("long",!0);case"ccccc":return u("narrow",!0);case"E":return this.num(t.weekday);case"EEE":return u("short",!1);case"EEEE":return u("long",!1);case"EEEEE":return u("narrow",!1);case"L":return n?s({month:"numeric",day:"numeric"},"month"):this.num(t.month);case"LL":return n?s({month:"2-digit",day:"numeric"},"month"):this.num(t.month,2);case"LLL":return l("short",!0);case"LLLL":return l("long",!0);case"LLLLL":return l("narrow",!0);case"M":return n?s({month:"numeric"},"month"):this.num(t.month);case"MM":return n?s({month:"2-digit"},"month"):this.num(t.month,2);case"MMM":return l("short",!1);case"MMMM":return l("long",!1);case"MMMMM":return l("narrow",!1);case"y":return n?s({year:"numeric"},"year"):this.num(t.year);case"yy":return n?s({year:"2-digit"},"year"):this.num(t.year.toString().slice(-2),2);case"yyyy":return n?s({year:"numeric"},"year"):this.num(t.year,4);case"yyyyyy":return n?s({year:"numeric"},"year"):this.num(t.year,6);case"G":return d("short");case"GG":return d("long");case"GGGGG":return d("narrow");case"kk":return this.num(t.weekYear.toString().slice(-2),2);case"kkkk":return this.num(t.weekYear,4);case"W":return this.num(t.weekNumber);case"WW":return this.num(t.weekNumber,2);case"o":return this.num(t.ordinal);case"ooo":return this.num(t.ordinal,3);case"q":return this.num(t.quarter);case"qq":return this.num(t.quarter,2);case"X":return this.num(Math.floor(t.ts/1e3));case"x":return this.num(t.ts);default:return h(m)}};return mU(js.parseFormat(r),f)}formatDurationFromString(t,r){const i=l=>{switch(l[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"M":return"month";case"y":return"year";default:return null}},n=l=>u=>{const h=i(u);return h?this.num(l.get(h),u.length):u},s=js.parseFormat(r),o=s.reduce((l,{literal:u,val:h})=>u?l:l.concat(h),[]),a=t.shiftTo(...o.map(i).filter(l=>l));return mU(s,n(a))}}class ul{constructor(t,r){this.reason=t,this.explanation=r}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}class E2{get type(){throw new Dh}get name(){throw new Dh}get isUniversal(){throw new Dh}offsetName(t,r){throw new Dh}formatOffset(t,r){throw new Dh}offset(t){throw new Dh}equals(t){throw new Dh}get isValid(){throw new Dh}}let v5=null;class B6 extends E2{static get instance(){return v5===null&&(v5=new B6),v5}get type(){return"system"}get name(){return new Intl.DateTimeFormat().resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return pee(t,r,i)}formatOffset(t,r){return OI(this.offset(t),r)}offset(t){return-new Date(t).getTimezoneOffset()}equals(t){return t.type==="system"}get isValid(){return!0}}const X$e=RegExp(`^${mee.source}$`);let t3={};function Q$e(e){return t3[e]||(t3[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})),t3[e]}const eEe={year:0,month:1,day:2,hour:3,minute:4,second:5};function tEe(e,t){const r=e.format(t).replace(/\u200E/g,""),i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(r),[,n,s,o,a,l,u]=i;return[o,n,s,a,l,u]}function rEe(e,t){const r=e.formatToParts(t),i=[];for(let n=0;n<r.length;n++){const{type:s,value:o}=r[n],a=eEe[s];ir(a)||(i[a]=parseInt(o,10))}return i}let Yx={};class Il extends E2{static create(t){return Yx[t]||(Yx[t]=new Il(t)),Yx[t]}static resetCache(){Yx={},t3={}}static isValidSpecifier(t){return!!(t&&t.match(X$e))}static isValidZone(t){if(!t)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:t}).format(),!0}catch{return!1}}constructor(t){super(),this.zoneName=t,this.valid=Il.isValidZone(t)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(t,{format:r,locale:i}){return pee(t,r,i,this.name)}formatOffset(t,r){return OI(this.offset(t),r)}offset(t){const r=new Date(t);if(isNaN(r))return NaN;const i=Q$e(this.name),[n,s,o,a,l,u]=i.formatToParts?rEe(i,r):tEe(i,r),d=z6({year:n,month:s,day:o,hour:a===24?0:a,minute:l,second:u,millisecond:0});let f=+r;const m=f%1e3;return f-=m>=0?m:1e3+m,(d-f)/(60*1e3)}equals(t){return t.type==="iana"&&t.name===this.name}get isValid(){return this.valid}}let b5=null;class hs extends E2{static get utcInstance(){return b5===null&&(b5=new hs(0)),b5}static instance(t){return t===0?hs.utcInstance:new hs(t)}static parseSpecifier(t){if(t){const r=t.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new hs(D$(r[1],r[2]))}return null}constructor(t){super(),this.fixed=t}get type(){return"fixed"}get name(){return this.fixed===0?"UTC":`UTC${OI(this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(t,r){return OI(this.fixed,r)}get isUniversal(){return!0}offset(){return this.fixed}equals(t){return t.type==="fixed"&&t.fixed===this.fixed}get isValid(){return!0}}class yU extends E2{constructor(t){super(),this.zoneName=t}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function kd(e,t){if(ir(e)||e===null)return t;if(e instanceof E2)return e;if(L$e(e)){const r=e.toLowerCase();return r==="local"||r==="system"?t:r==="utc"||r==="gmt"?hs.utcInstance:Il.isValidSpecifier(r)?Il.create(e):hs.parseSpecifier(r)||new yU(e)}else return Mm(e)?hs.instance(e):typeof e=="object"&&e.offset&&typeof e.offset=="number"?e:new yU(e)}let gU=()=>Date.now(),vU="system",bU=null,wU=null,_U=null,xU;class ji{static get now(){return gU}static set now(t){gU=t}static set defaultZone(t){vU=t}static get defaultZone(){return kd(vU,B6.instance)}static get defaultLocale(){return bU}static set defaultLocale(t){bU=t}static get defaultNumberingSystem(){return wU}static set defaultNumberingSystem(t){wU=t}static get defaultOutputCalendar(){return _U}static set defaultOutputCalendar(t){_U=t}static get throwOnInvalid(){return xU}static set throwOnInvalid(t){xU=t}static resetCaches(){Jr.resetCache(),Il.resetCache()}}let DP={};function FP(e,t={}){const r=JSON.stringify([e,t]);let i=DP[r];return i||(i=new Intl.DateTimeFormat(e,t),DP[r]=i),i}let jP={};function iEe(e,t={}){const r=JSON.stringify([e,t]);let i=jP[r];return i||(i=new Intl.NumberFormat(e,t),jP[r]=i),i}let VP={};function nEe(e,t={}){const{base:r,...i}=t,n=JSON.stringify([e,i]);let s=VP[n];return s||(s=new Intl.RelativeTimeFormat(e,t),VP[n]=s),s}let qb=null;function sEe(){return qb||(qb=new Intl.DateTimeFormat().resolvedOptions().locale,qb)}function oEe(e){const t=e.indexOf("-u-");if(t===-1)return[e];{let r;const i=e.substring(0,t);try{r=FP(e).resolvedOptions()}catch{r=FP(i).resolvedOptions()}const{numberingSystem:n,calendar:s}=r;return[i,n,s]}}function aEe(e,t,r){return(r||t)&&(e+="-u",r&&(e+=`-ca-${r}`),t&&(e+=`-nu-${t}`)),e}function lEe(e){const t=[];for(let r=1;r<=12;r++){const i=St.utc(2016,r,1);t.push(e(i))}return t}function uEe(e){const t=[];for(let r=1;r<=7;r++){const i=St.utc(2016,11,13+r);t.push(e(i))}return t}function Kx(e,t,r,i,n){const s=e.listingMode(r);return s==="error"?null:s==="en"?i(t):n(t)}function cEe(e){return e.numberingSystem&&e.numberingSystem!=="latn"?!1:e.numberingSystem==="latn"||!e.locale||e.locale.startsWith("en")||new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem==="latn"}class hEe{constructor(t,r,i){if(this.padTo=i.padTo||0,this.floor=i.floor||!1,!r){const n={useGrouping:!1};i.padTo>0&&(n.minimumIntegerDigits=i.padTo),this.inf=iEe(t,n)}}format(t){if(this.inf){const r=this.floor?Math.floor(t):t;return this.inf.format(r)}else{const r=this.floor?Math.floor(t):U6(t,3);return r0(r,this.padTo)}}}class dEe{constructor(t,r,i){this.opts=i;let n;if(t.zone.isUniversal){const o=-1*(t.offset/60),a=o>=0?`Etc/GMT+${o}`:`Etc/GMT${o}`;t.offset!==0&&Il.create(a).valid?(n=a,this.dt=t):(n="UTC",i.timeZoneName?this.dt=t:this.dt=t.offset===0?t:St.fromMillis(t.ts+t.offset*60*1e3))}else t.zone.type==="system"?this.dt=t:(this.dt=t,n=t.zone.name);const s={...this.opts};n&&(s.timeZone=n),this.dtf=FP(r,s)}format(){return this.dtf.format(this.dt.toJSDate())}formatToParts(){return this.dtf.formatToParts(this.dt.toJSDate())}resolvedOptions(){return this.dtf.resolvedOptions()}}class pEe{constructor(t,r,i){this.opts={style:"long",...i},!r&&dee()&&(this.rtf=nEe(t,i))}format(t,r){return this.rtf?this.rtf.format(t,r):Y$e(r,t,this.opts.numeric,this.opts.style!=="long")}formatToParts(t,r){return this.rtf?this.rtf.formatToParts(t,r):[]}}class Jr{static fromOpts(t){return Jr.create(t.locale,t.numberingSystem,t.outputCalendar,t.defaultToEN)}static create(t,r,i,n=!1){const s=t||ji.defaultLocale,o=s||(n?"en-US":sEe()),a=r||ji.defaultNumberingSystem,l=i||ji.defaultOutputCalendar;return new Jr(o,a,l,s)}static resetCache(){qb=null,DP={},jP={},VP={}}static fromObject({locale:t,numberingSystem:r,outputCalendar:i}={}){return Jr.create(t,r,i)}constructor(t,r,i,n){const[s,o,a]=oEe(t);this.locale=s,this.numberingSystem=r||o||null,this.outputCalendar=i||a||null,this.intl=aEe(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=n,this.fastNumbersCached=null}get fastNumbers(){return this.fastNumbersCached==null&&(this.fastNumbersCached=cEe(this)),this.fastNumbersCached}listingMode(t=!0){const r=this.isEnglish(),i=(this.numberingSystem===null||this.numberingSystem==="latn")&&(this.outputCalendar===null||this.outputCalendar==="gregory");return r&&i?"en":"intl"}clone(t){return!t||Object.getOwnPropertyNames(t).length===0?this:Jr.create(t.locale||this.specifiedLocale,t.numberingSystem||this.numberingSystem,t.outputCalendar||this.outputCalendar,t.defaultToEN||!1)}redefaultToEN(t={}){return this.clone({...t,defaultToEN:!0})}redefaultToSystem(t={}){return this.clone({...t,defaultToEN:!1})}months(t,r=!1,i=!0){return Kx(this,t,i,gee,()=>{const n=r?{month:t,day:"numeric"}:{month:t},s=r?"format":"standalone";return this.monthsCache[s][t]||(this.monthsCache[s][t]=lEe(o=>this.extract(o,n,"month"))),this.monthsCache[s][t]})}weekdays(t,r=!1,i=!0){return Kx(this,t,i,wee,()=>{const n=r?{weekday:t,year:"numeric",month:"long",day:"numeric"}:{weekday:t},s=r?"format":"standalone";return this.weekdaysCache[s][t]||(this.weekdaysCache[s][t]=uEe(o=>this.extract(o,n,"weekday"))),this.weekdaysCache[s][t]})}meridiems(t=!0){return Kx(this,void 0,t,()=>_ee,()=>{if(!this.meridiemCache){const r={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[St.utc(2016,11,13,9),St.utc(2016,11,13,19)].map(i=>this.extract(i,r,"dayperiod"))}return this.meridiemCache})}eras(t,r=!0){return Kx(this,t,r,xee,()=>{const i={era:t};return this.eraCache[t]||(this.eraCache[t]=[St.utc(-40,1,1),St.utc(2017,1,1)].map(n=>this.extract(n,i,"era"))),this.eraCache[t]})}extract(t,r,i){const n=this.dtFormatter(t,r),s=n.formatToParts(),o=s.find(a=>a.type.toLowerCase()===i);return o?o.value:null}numberFormatter(t={}){return new hEe(this.intl,t.forceSimple||this.fastNumbers,t)}dtFormatter(t,r={}){return new dEe(t,this.intl,r)}relFormatter(t={}){return new pEe(this.intl,this.isEnglish(),t)}isEnglish(){return this.locale==="en"||this.locale.toLowerCase()==="en-us"||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(t){return this.locale===t.locale&&this.numberingSystem===t.numberingSystem&&this.outputCalendar===t.outputCalendar}}function r1(...e){const t=e.reduce((r,i)=>r+i.source,"");return RegExp(`^${t}$`)}function Iy(...e){return t=>e.reduce(([r,i,n],s)=>{const[o,a,l]=s(t,n);return[{...r,...o},i||a,l]},[{},null,1]).slice(0,2)}function i1(e,...t){if(e==null)return[null,null];for(const[r,i]of t){const n=r.exec(e);if(n)return i(n)}return[null,null]}function See(...e){return(t,r)=>{const i={};let n;for(n=0;n<e.length;n++)i[e[n]]=Ad(t[r+n]);return[i,null,r+n]}}const Mee=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,G6=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,Iee=RegExp(`${G6.source}${Mee.source}?`),q6=RegExp(`(?:T${Iee.source})?`),fEe=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,mEe=/(\d{4})-?W(\d\d)(?:-?(\d))?/,yEe=/(\d{4})-?(\d{3})/,gEe=See("weekYear","weekNumber","weekDay"),vEe=See("year","ordinal"),bEe=/(\d{4})-(\d\d)-(\d\d)/,Tee=RegExp(`${G6.source} ?(?:${Mee.source}|(${mee.source}))?`),wEe=RegExp(`(?: ${Tee.source})?`);function S0(e,t,r){const i=e[t];return ir(i)?r:Ad(i)}function $ee(e,t){return[{year:S0(e,t),month:S0(e,t+1,1),day:S0(e,t+2,1)},null,t+3]}function Ty(e,t){return[{hours:S0(e,t,0),minutes:S0(e,t+1,0),seconds:S0(e,t+2,0),milliseconds:V6(e[t+3])},null,t+4]}function n1(e,t){const r=!e[t]&&!e[t+1],i=D$(e[t+1],e[t+2]),n=r?null:hs.instance(i);return[{},n,t+3]}function Eee(e,t){const r=e[t]?Il.create(e[t]):null;return[{},r,t+1]}const _Ee=RegExp(`^T?${G6.source}$`),xEe=/^-?P(?:(?:(-?\d{1,9}(?:\.\d{1,9})?)Y)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,9}(?:\.\d{1,9})?)W)?(?:(-?\d{1,9}(?:\.\d{1,9})?)D)?(?:T(?:(-?\d{1,9}(?:\.\d{1,9})?)H)?(?:(-?\d{1,9}(?:\.\d{1,9})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,9}))?S)?)?)$/;function SEe(e){const[t,r,i,n,s,o,a,l,u]=e,h=t[0]==="-",d=l&&l[0]==="-",f=(m,g=!1)=>m!==void 0&&(g||m&&h)?-m:m;return[{years:f(Lp(r)),months:f(Lp(i)),weeks:f(Lp(n)),days:f(Lp(s)),hours:f(Lp(o)),minutes:f(Lp(a)),seconds:f(Lp(l),l==="-0"),milliseconds:f(V6(u),d)}]}const MEe={GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function H6(e,t,r,i,n,s,o){const a={year:t.length===2?NP(Ad(t)):Ad(t),month:yee.indexOf(r)+1,day:Ad(i),hour:Ad(n),minute:Ad(s)};return o&&(a.second=Ad(o)),e&&(a.weekday=e.length>3?vee.indexOf(e)+1:bee.indexOf(e)+1),a}const IEe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function TEe(e){const[,t,r,i,n,s,o,a,l,u,h,d]=e,f=H6(t,n,i,r,s,o,a);let m;return l?m=MEe[l]:u?m=0:m=D$(h,d),[f,new hs(m)]}function $Ee(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const EEe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,AEe=/^(Monday|Tuesday|Wedsday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,CEe=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function SU(e){const[,t,r,i,n,s,o,a]=e;return[H6(t,n,i,r,s,o,a),hs.utcInstance]}function kEe(e){const[,t,r,i,n,s,o,a]=e;return[H6(t,a,r,i,n,s,o),hs.utcInstance]}const OEe=r1(fEe,q6),PEe=r1(mEe,q6),REe=r1(yEe,q6),LEe=r1(Iee),NEe=Iy($ee,Ty,n1),DEe=Iy(gEe,Ty,n1),FEe=Iy(vEe,Ty,n1),jEe=Iy(Ty,n1);function VEe(e){return i1(e,[OEe,NEe],[PEe,DEe],[REe,FEe],[LEe,jEe])}function UEe(e){return i1($Ee(e),[IEe,TEe])}function zEe(e){return i1(e,[EEe,SU],[AEe,SU],[CEe,kEe])}function BEe(e){return i1(e,[xEe,SEe])}const GEe=Iy(Ty);function qEe(e){return i1(e,[_Ee,GEe])}const HEe=r1(bEe,wEe),WEe=r1(Tee),JEe=Iy($ee,Ty,n1,Eee),ZEe=Iy(Ty,n1,Eee);function YEe(e){return i1(e,[HEe,JEe],[WEe,ZEe])}const KEe="Invalid Duration",Aee={weeks:{days:7,hours:7*24,minutes:7*24*60,seconds:7*24*60*60,milliseconds:7*24*60*60*1e3},days:{hours:24,minutes:24*60,seconds:24*60*60,milliseconds:24*60*60*1e3},hours:{minutes:60,seconds:60*60,milliseconds:60*60*1e3},minutes:{seconds:60,milliseconds:60*1e3},seconds:{milliseconds:1e3}},XEe={years:{quarters:4,months:12,weeks:52,days:365,hours:365*24,minutes:365*24*60,seconds:365*24*60*60,milliseconds:365*24*60*60*1e3},quarters:{months:3,weeks:13,days:91,hours:91*24,minutes:91*24*60,seconds:91*24*60*60,milliseconds:91*24*60*60*1e3},months:{weeks:4,days:30,hours:30*24,minutes:30*24*60,seconds:30*24*60*60,milliseconds:30*24*60*60*1e3},...Aee},Ho=146097/400,zy=146097/4800,QEe={years:{quarters:4,months:12,weeks:Ho/7,days:Ho,hours:Ho*24,minutes:Ho*24*60,seconds:Ho*24*60*60,milliseconds:Ho*24*60*60*1e3},quarters:{months:3,weeks:Ho/28,days:Ho/4,hours:Ho*24/4,minutes:Ho*24*60/4,seconds:Ho*24*60*60/4,milliseconds:Ho*24*60*60*1e3/4},months:{weeks:zy/7,days:zy,hours:zy*24,minutes:zy*24*60,seconds:zy*24*60*60,milliseconds:zy*24*60*60*1e3},...Aee},Lg=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],e4e=Lg.slice(0).reverse();function Np(e,t,r=!1){const i={values:r?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy};return new er(i)}function t4e(e){return e<0?Math.floor(e):Math.ceil(e)}function Cee(e,t,r,i,n){const s=e[n][r],o=t[r]/s,a=Math.sign(o)===Math.sign(i[n]),l=!a&&i[n]!==0&&Math.abs(o)<=1?t4e(o):Math.trunc(o);i[n]+=l,t[r]-=l*s}function r4e(e,t){e4e.reduce((r,i)=>ir(t[i])?r:(r&&Cee(e,t,r,t,i),i),null)}class er{constructor(t){const r=t.conversionAccuracy==="longterm"||!1;this.values=t.values,this.loc=t.loc||Jr.create(),this.conversionAccuracy=r?"longterm":"casual",this.invalid=t.invalid||null,this.matrix=r?QEe:XEe,this.isLuxonDuration=!0}static fromMillis(t,r){return er.fromObject({milliseconds:t},r)}static fromObject(t,r={}){if(t==null||typeof t!="object")throw new pa(`Duration.fromObject: argument expected to be an object, got ${t===null?"null":typeof t}`);return new er({values:kI(t,er.normalizeUnit),loc:Jr.fromObject(r),conversionAccuracy:r.conversionAccuracy})}static fromDurationLike(t){if(Mm(t))return er.fromMillis(t);if(er.isDuration(t))return t;if(typeof t=="object")return er.fromObject(t);throw new pa(`Unknown duration argument ${t} of type ${typeof t}`)}static fromISO(t,r){const[i]=BEe(t);return i?er.fromObject(i,r):er.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static fromISOTime(t,r){const[i]=qEe(t);return i?er.fromObject(i,r):er.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static invalid(t,r=null){if(!t)throw new pa("need to specify a reason the Duration is invalid");const i=t instanceof ul?t:new ul(t,r);if(ji.throwOnInvalid)throw new O$e(i);return new er({invalid:i})}static normalizeUnit(t){const r={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[t&&t.toLowerCase()];if(!r)throw new HQ(t);return r}static isDuration(t){return t&&t.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(t,r={}){const i={...r,floor:r.round!==!1&&r.floor!==!1};return this.isValid?js.create(this.loc,i).formatDurationFromString(this,t):KEe}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let t="P";return this.years!==0&&(t+=this.years+"Y"),(this.months!==0||this.quarters!==0)&&(t+=this.months+this.quarters*3+"M"),this.weeks!==0&&(t+=this.weeks+"W"),this.days!==0&&(t+=this.days+"D"),(this.hours!==0||this.minutes!==0||this.seconds!==0||this.milliseconds!==0)&&(t+="T"),this.hours!==0&&(t+=this.hours+"H"),this.minutes!==0&&(t+=this.minutes+"M"),(this.seconds!==0||this.milliseconds!==0)&&(t+=U6(this.seconds+this.milliseconds/1e3,3)+"S"),t==="P"&&(t+="T0S"),t}toISOTime(t={}){if(!this.isValid)return null;const r=this.toMillis();if(r<0||r>=864e5)return null;t={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...t};const i=this.shiftTo("hours","minutes","seconds","milliseconds");let n=t.format==="basic"?"hhmm":"hh:mm";(!t.suppressSeconds||i.seconds!==0||i.milliseconds!==0)&&(n+=t.format==="basic"?"ss":":ss",(!t.suppressMilliseconds||i.milliseconds!==0)&&(n+=".SSS"));let s=i.toFormat(n);return t.includePrefix&&(s="T"+s),s}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){return this.as("milliseconds")}valueOf(){return this.toMillis()}plus(t){if(!this.isValid)return this;const r=er.fromDurationLike(t),i={};for(const n of Lg)(X0(r.values,n)||X0(this.values,n))&&(i[n]=r.get(n)+this.get(n));return Np(this,{values:i},!0)}minus(t){if(!this.isValid)return this;const r=er.fromDurationLike(t);return this.plus(r.negate())}mapUnits(t){if(!this.isValid)return this;const r={};for(const i of Object.keys(this.values))r[i]=fee(t(this.values[i],i));return Np(this,{values:r},!0)}get(t){return this[er.normalizeUnit(t)]}set(t){if(!this.isValid)return this;const r={...this.values,...kI(t,er.normalizeUnit)};return Np(this,{values:r})}reconfigure({locale:t,numberingSystem:r,conversionAccuracy:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r}),s={loc:n};return i&&(s.conversionAccuracy=i),Np(this,s)}as(t){return this.isValid?this.shiftTo(t).get(t):NaN}normalize(){if(!this.isValid)return this;const t=this.toObject();return r4e(this.matrix,t),Np(this,{values:t},!0)}shiftTo(...t){if(!this.isValid)return this;if(t.length===0)return this;t=t.map(o=>er.normalizeUnit(o));const r={},i={},n=this.toObject();let s;for(const o of Lg)if(t.indexOf(o)>=0){s=o;let a=0;for(const u in i)a+=this.matrix[u][o]*i[u],i[u]=0;Mm(n[o])&&(a+=n[o]);const l=Math.trunc(a);r[o]=l,i[o]=a-l;for(const u in n)Lg.indexOf(u)>Lg.indexOf(o)&&Cee(this.matrix,n,u,r,o)}else Mm(n[o])&&(i[o]=n[o]);for(const o in i)i[o]!==0&&(r[s]+=o===s?i[o]:i[o]/this.matrix[s][o]);return Np(this,{values:r},!0).normalize()}negate(){if(!this.isValid)return this;const t={};for(const r of Object.keys(this.values))t[r]=-this.values[r];return Np(this,{values:t},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(t){if(!this.isValid||!t.isValid||!this.loc.equals(t.loc))return!1;function r(i,n){return i===void 0||i===0?n===void 0||n===0:i===n}for(const i of Lg)if(!r(this.values[i],t.values[i]))return!1;return!0}}const L1="Invalid Interval";function i4e(e,t){return!e||!e.isValid?ii.invalid("missing or invalid start"):!t||!t.isValid?ii.invalid("missing or invalid end"):t<e?ii.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null}class ii{constructor(t){this.s=t.start,this.e=t.end,this.invalid=t.invalid||null,this.isLuxonInterval=!0}static invalid(t,r=null){if(!t)throw new pa("need to specify a reason the Interval is invalid");const i=t instanceof ul?t:new ul(t,r);if(ji.throwOnInvalid)throw new k$e(i);return new ii({invalid:i})}static fromDateTimes(t,r){const i=F1(t),n=F1(r),s=i4e(i,n);return s??new ii({start:i,end:n})}static after(t,r){const i=er.fromDurationLike(r),n=F1(t);return ii.fromDateTimes(n,n.plus(i))}static before(t,r){const i=er.fromDurationLike(r),n=F1(t);return ii.fromDateTimes(n.minus(i),n)}static fromISO(t,r){const[i,n]=(t||"").split("/",2);if(i&&n){let s,o;try{s=St.fromISO(i,r),o=s.isValid}catch{o=!1}let a,l;try{a=St.fromISO(n,r),l=a.isValid}catch{l=!1}if(o&&l)return ii.fromDateTimes(s,a);if(o){const u=er.fromISO(n,r);if(u.isValid)return ii.after(s,u)}else if(l){const u=er.fromISO(i,r);if(u.isValid)return ii.before(a,u)}}return ii.invalid("unparsable",`the input "${t}" can't be parsed as ISO 8601`)}static isInterval(t){return t&&t.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return this.invalidReason===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(t="milliseconds"){return this.isValid?this.toDuration(t).get(t):NaN}count(t="milliseconds"){if(!this.isValid)return NaN;const r=this.start.startOf(t),i=this.end.startOf(t);return Math.floor(i.diff(r,t).get(t))+1}hasSame(t){return this.isValid?this.isEmpty()||this.e.minus(1).hasSame(this.s,t):!1}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(t){return this.isValid?this.s>t:!1}isBefore(t){return this.isValid?this.e<=t:!1}contains(t){return this.isValid?this.s<=t&&this.e>t:!1}set({start:t,end:r}={}){return this.isValid?ii.fromDateTimes(t||this.s,r||this.e):this}splitAt(...t){if(!this.isValid)return[];const r=t.map(F1).filter(o=>this.contains(o)).sort(),i=[];let{s:n}=this,s=0;for(;n<this.e;){const o=r[s]||this.e,a=+o>+this.e?this.e:o;i.push(ii.fromDateTimes(n,a)),n=a,s+=1}return i}splitBy(t){const r=er.fromDurationLike(t);if(!this.isValid||!r.isValid||r.as("milliseconds")===0)return[];let{s:i}=this,n=1,s;const o=[];for(;i<this.e;){const a=this.start.plus(r.mapUnits(l=>l*n));s=+a>+this.e?this.e:a,o.push(ii.fromDateTimes(i,s)),i=s,n+=1}return o}divideEqually(t){return this.isValid?this.splitBy(this.length()/t).slice(0,t):[]}overlaps(t){return this.e>t.s&&this.s<t.e}abutsStart(t){return this.isValid?+this.e==+t.s:!1}abutsEnd(t){return this.isValid?+t.e==+this.s:!1}engulfs(t){return this.isValid?this.s<=t.s&&this.e>=t.e:!1}equals(t){return!this.isValid||!t.isValid?!1:this.s.equals(t.s)&&this.e.equals(t.e)}intersection(t){if(!this.isValid)return this;const r=this.s>t.s?this.s:t.s,i=this.e<t.e?this.e:t.e;return r>=i?null:ii.fromDateTimes(r,i)}union(t){if(!this.isValid)return this;const r=this.s<t.s?this.s:t.s,i=this.e>t.e?this.e:t.e;return ii.fromDateTimes(r,i)}static merge(t){const[r,i]=t.sort((n,s)=>n.s-s.s).reduce(([n,s],o)=>s?s.overlaps(o)||s.abutsStart(o)?[n,s.union(o)]:[n.concat([s]),o]:[n,o],[[],null]);return i&&r.push(i),r}static xor(t){let r=null,i=0;const n=[],s=t.map(l=>[{time:l.s,type:"s"},{time:l.e,type:"e"}]),o=Array.prototype.concat(...s),a=o.sort((l,u)=>l.time-u.time);for(const l of a)i+=l.type==="s"?1:-1,i===1?r=l.time:(r&&+r!=+l.time&&n.push(ii.fromDateTimes(r,l.time)),r=null);return ii.merge(n)}difference(...t){return ii.xor([this].concat(t)).map(r=>this.intersection(r)).filter(r=>r&&!r.isEmpty())}toString(){return this.isValid?`[${this.s.toISO()} \u2013 ${this.e.toISO()})`:L1}toISO(t){return this.isValid?`${this.s.toISO(t)}/${this.e.toISO(t)}`:L1}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:L1}toISOTime(t){return this.isValid?`${this.s.toISOTime(t)}/${this.e.toISOTime(t)}`:L1}toFormat(t,{separator:r=" \u2013 "}={}){return this.isValid?`${this.s.toFormat(t)}${r}${this.e.toFormat(t)}`:L1}toDuration(t,r){return this.isValid?this.e.diff(this.s,t,r):er.invalid(this.invalidReason)}mapEndpoints(t){return ii.fromDateTimes(t(this.s),t(this.e))}}class Xx{static hasDST(t=ji.defaultZone){const r=St.now().setZone(t).set({month:12});return!t.isUniversal&&r.offset!==r.set({month:6}).offset}static isValidIANAZone(t){return Il.isValidSpecifier(t)&&Il.isValidZone(t)}static normalizeZone(t){return kd(t,ji.defaultZone)}static months(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Jr.create(r,i,s)).months(t)}static monthsFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null,outputCalendar:s="gregory"}={}){return(n||Jr.create(r,i,s)).months(t,!0)}static weekdays(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Jr.create(r,i,null)).weekdays(t)}static weekdaysFormat(t="long",{locale:r=null,numberingSystem:i=null,locObj:n=null}={}){return(n||Jr.create(r,i,null)).weekdays(t,!0)}static meridiems({locale:t=null}={}){return Jr.create(t).meridiems()}static eras(t="short",{locale:r=null}={}){return Jr.create(r,null,"gregory").eras(t)}static features(){return{relative:dee()}}}function MU(e,t){const r=n=>n.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),i=r(t)-r(e);return Math.floor(er.fromMillis(i).as("days"))}function n4e(e,t,r){const i=[["years",(a,l)=>l.year-a.year],["quarters",(a,l)=>l.quarter-a.quarter],["months",(a,l)=>l.month-a.month+(l.year-a.year)*12],["weeks",(a,l)=>{const u=MU(a,l);return(u-u%7)/7}],["days",MU]],n={};let s,o;for(const[a,l]of i)if(r.indexOf(a)>=0){s=a;let u=l(e,t);o=e.plus({[a]:u}),o>t?(e=e.plus({[a]:u-1}),u-=1):e=o,n[a]=u}return[e,n,o,s]}function s4e(e,t,r,i){let[n,s,o,a]=n4e(e,t,r);const l=t-n,u=r.filter(d=>["hours","minutes","seconds","milliseconds"].indexOf(d)>=0);u.length===0&&(o<t&&(o=n.plus({[a]:1})),o!==n&&(s[a]=(s[a]||0)+l/(o-n)));const h=er.fromObject(s,i);return u.length>0?er.fromMillis(l,i).shiftTo(...u).plus(h):h}const W6={arab:"[\u0660-\u0669]",arabext:"[\u06F0-\u06F9]",bali:"[\u1B50-\u1B59]",beng:"[\u09E6-\u09EF]",deva:"[\u0966-\u096F]",fullwide:"[\uFF10-\uFF19]",gujr:"[\u0AE6-\u0AEF]",hanidec:"[\u3007|\u4E00|\u4E8C|\u4E09|\u56DB|\u4E94|\u516D|\u4E03|\u516B|\u4E5D]",khmr:"[\u17E0-\u17E9]",knda:"[\u0CE6-\u0CEF]",laoo:"[\u0ED0-\u0ED9]",limb:"[\u1946-\u194F]",mlym:"[\u0D66-\u0D6F]",mong:"[\u1810-\u1819]",mymr:"[\u1040-\u1049]",orya:"[\u0B66-\u0B6F]",tamldec:"[\u0BE6-\u0BEF]",telu:"[\u0C66-\u0C6F]",thai:"[\u0E50-\u0E59]",tibt:"[\u0F20-\u0F29]",latn:"\\d"},IU={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},o4e=W6.hanidec.replace(/[\[|\]]/g,"").split("");function a4e(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let r=0;r<e.length;r++){const i=e.charCodeAt(r);if(e[r].search(W6.hanidec)!==-1)t+=o4e.indexOf(e[r]);else for(const n in IU){const[s,o]=IU[n];i>=s&&i<=o&&(t+=i-s)}}return parseInt(t,10)}else return t}function ka({numberingSystem:e},t=""){return new RegExp(`${W6[e||"latn"]}${t}`)}const l4e="missing Intl.DateTimeFormat.formatToParts support";function nr(e,t=r=>r){return{regex:e,deser:([r])=>t(a4e(r))}}const u4e=String.fromCharCode(160),kee=`( |${u4e})`,Oee=new RegExp(kee,"g");function c4e(e){return e.replace(/\./g,"\\.?").replace(Oee,kee)}function TU(e){return e.replace(/\./g,"").replace(Oee," ").toLowerCase()}function Oa(e,t){return e===null?null:{regex:RegExp(e.map(c4e).join("|")),deser:([r])=>e.findIndex(i=>TU(r)===TU(i))+t}}function $U(e,t){return{regex:e,deser:([,r,i])=>D$(r,i),groups:t}}function w5(e){return{regex:e,deser:([t])=>t}}function h4e(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d4e(e,t){const r=ka(t),i=ka(t,"{2}"),n=ka(t,"{3}"),s=ka(t,"{4}"),o=ka(t,"{6}"),a=ka(t,"{1,2}"),l=ka(t,"{1,3}"),u=ka(t,"{1,6}"),h=ka(t,"{1,9}"),d=ka(t,"{2,4}"),f=ka(t,"{4,6}"),m=w=>({regex:RegExp(h4e(w.val)),deser:([_])=>_,literal:!0}),b=(w=>{if(e.literal)return m(w);switch(w.val){case"G":return Oa(t.eras("short",!1),0);case"GG":return Oa(t.eras("long",!1),0);case"y":return nr(u);case"yy":return nr(d,NP);case"yyyy":return nr(s);case"yyyyy":return nr(f);case"yyyyyy":return nr(o);case"M":return nr(a);case"MM":return nr(i);case"MMM":return Oa(t.months("short",!0,!1),1);case"MMMM":return Oa(t.months("long",!0,!1),1);case"L":return nr(a);case"LL":return nr(i);case"LLL":return Oa(t.months("short",!1,!1),1);case"LLLL":return Oa(t.months("long",!1,!1),1);case"d":return nr(a);case"dd":return nr(i);case"o":return nr(l);case"ooo":return nr(n);case"HH":return nr(i);case"H":return nr(a);case"hh":return nr(i);case"h":return nr(a);case"mm":return nr(i);case"m":return nr(a);case"q":return nr(a);case"qq":return nr(i);case"s":return nr(a);case"ss":return nr(i);case"S":return nr(l);case"SSS":return nr(n);case"u":return w5(h);case"uu":return w5(a);case"uuu":return nr(r);case"a":return Oa(t.meridiems(),0);case"kkkk":return nr(s);case"kk":return nr(d,NP);case"W":return nr(a);case"WW":return nr(i);case"E":case"c":return nr(r);case"EEE":return Oa(t.weekdays("short",!1,!1),1);case"EEEE":return Oa(t.weekdays("long",!1,!1),1);case"ccc":return Oa(t.weekdays("short",!0,!1),1);case"cccc":return Oa(t.weekdays("long",!0,!1),1);case"Z":case"ZZ":return $U(new RegExp(`([+-]${a.source})(?::(${i.source}))?`),2);case"ZZZ":return $U(new RegExp(`([+-]${a.source})(${i.source})?`),2);case"z":return w5(/[a-z_+-/]{1,256}?/i);default:return m(w)}})(e)||{invalidReason:l4e};return b.token=e,b}const p4e={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour:{numeric:"h","2-digit":"hh"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"}};function f4e(e,t,r){const{type:i,value:n}=e;if(i==="literal")return{literal:!0,val:n};const s=r[i];let o=p4e[i];if(typeof o=="object"&&(o=o[s]),o)return{literal:!1,val:o}}function m4e(e){return[`^${e.map(r=>r.regex).reduce((r,i)=>`${r}(${i.source})`,"")}$`,e]}function y4e(e,t,r){const i=e.match(t);if(i){const n={};let s=1;for(const o in r)if(X0(r,o)){const a=r[o],l=a.groups?a.groups+1:1;!a.literal&&a.token&&(n[a.token.val[0]]=a.deser(i.slice(s,s+l))),s+=l}return[i,n]}else return[i,{}]}function g4e(e){const t=n=>{switch(n){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let r;return ir(e.Z)?ir(e.z)?r=null:r=Il.create(e.z):r=new hs(e.Z),ir(e.q)||(e.M=(e.q-1)*3+1),ir(e.h)||(e.h<12&&e.a===1?e.h+=12:e.h===12&&e.a===0&&(e.h=0)),e.G===0&&e.y&&(e.y=-e.y),ir(e.u)||(e.S=V6(e.u)),[Object.keys(e).reduce((n,s)=>{const o=t(s);return o&&(n[o]=e[s]),n},{}),r]}let _5=null;function v4e(){return _5||(_5=St.fromMillis(1555555555555)),_5}function b4e(e,t){if(e.literal)return e;const r=js.macroTokenToFormatOpts(e.val);if(!r)return e;const s=js.create(t,r).formatDateTimeParts(v4e()).map(o=>f4e(o,t,r));return s.includes(void 0)?e:s}function w4e(e,t){return Array.prototype.concat(...e.map(r=>b4e(r,t)))}function Pee(e,t,r){const i=w4e(js.parseFormat(r),e),n=i.map(o=>d4e(o,e)),s=n.find(o=>o.invalidReason);if(s)return{input:t,tokens:i,invalidReason:s.invalidReason};{const[o,a]=m4e(n),l=RegExp(o,"i"),[u,h]=y4e(t,l,a),[d,f]=h?g4e(h):[null,null];if(X0(h,"a")&&X0(h,"H"))throw new Gb("Can't include meridiem when specifying 24-hour format");return{input:t,tokens:i,regex:l,rawMatches:u,matches:h,result:d,zone:f}}}function _4e(e,t,r){const{result:i,zone:n,invalidReason:s}=Pee(e,t,r);return[i,n,s]}const Ree=[0,31,59,90,120,151,181,212,243,273,304,334],Lee=[0,31,60,91,121,152,182,213,244,274,305,335];function ya(e,t){return new ul("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function Nee(e,t,r){const i=new Date(Date.UTC(e,t-1,r)).getUTCDay();return i===0?7:i}function Dee(e,t,r){return r+($2(e)?Lee:Ree)[t-1]}function Fee(e,t){const r=$2(e)?Lee:Ree,i=r.findIndex(s=>s<t),n=t-r[i];return{month:i+1,day:n}}function UP(e){const{year:t,month:r,day:i}=e,n=Dee(t,r,i),s=Nee(t,r,i);let o=Math.floor((n-s+10)/7),a;return o<1?(a=t-1,o=CI(a)):o>CI(t)?(a=t+1,o=1):a=t,{weekYear:a,weekNumber:o,weekday:s,...F$(e)}}function EU(e){const{weekYear:t,weekNumber:r,weekday:i}=e,n=Nee(t,1,4),s=kw(t);let o=r*7+i-n-3,a;o<1?(a=t-1,o+=kw(a)):o>s?(a=t+1,o-=kw(t)):a=t;const{month:l,day:u}=Fee(a,o);return{year:a,month:l,day:u,...F$(e)}}function x5(e){const{year:t,month:r,day:i}=e,n=Dee(t,r,i);return{year:t,ordinal:n,...F$(e)}}function AU(e){const{year:t,ordinal:r}=e,{month:i,day:n}=Fee(t,r);return{year:t,month:i,day:n,...F$(e)}}function x4e(e){const t=N$(e.weekYear),r=nh(e.weekNumber,1,CI(e.weekYear)),i=nh(e.weekday,1,7);return t?r?i?!1:ya("weekday",e.weekday):ya("week",e.week):ya("weekYear",e.weekYear)}function S4e(e){const t=N$(e.year),r=nh(e.ordinal,1,kw(e.year));return t?r?!1:ya("ordinal",e.ordinal):ya("year",e.year)}function jee(e){const t=N$(e.year),r=nh(e.month,1,12),i=nh(e.day,1,AI(e.year,e.month));return t?r?i?!1:ya("day",e.day):ya("month",e.month):ya("year",e.year)}function Vee(e){const{hour:t,minute:r,second:i,millisecond:n}=e,s=nh(t,0,23)||t===24&&r===0&&i===0&&n===0,o=nh(r,0,59),a=nh(i,0,59),l=nh(n,0,999);return s?o?a?l?!1:ya("millisecond",n):ya("second",i):ya("minute",r):ya("hour",t)}const S5="Invalid DateTime",CU=864e13;function Qx(e){return new ul("unsupported zone",`the zone "${e.name}" is not supported`)}function M5(e){return e.weekData===null&&(e.weekData=UP(e.c)),e.weekData}function N1(e,t){const r={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new St({...r,...t,old:r})}function Uee(e,t,r){let i=e-t*60*1e3;const n=r.offset(i);if(t===n)return[i,t];i-=(n-t)*60*1e3;const s=r.offset(i);return n===s?[i,n]:[e-Math.min(n,s)*60*1e3,Math.max(n,s)]}function kU(e,t){e+=t*60*1e3;const r=new Date(e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:r.getUTCHours(),minute:r.getUTCMinutes(),second:r.getUTCSeconds(),millisecond:r.getUTCMilliseconds()}}function r3(e,t,r){return Uee(z6(e),t,r)}function OU(e,t){const r=e.o,i=e.c.year+Math.trunc(t.years),n=e.c.month+Math.trunc(t.months)+Math.trunc(t.quarters)*3,s={...e.c,year:i,month:n,day:Math.min(e.c.day,AI(i,n))+Math.trunc(t.days)+Math.trunc(t.weeks)*7},o=er.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=z6(s);let[l,u]=Uee(a,r,e.zone);return o!==0&&(l+=o,u=e.zone.offset(l)),{ts:l,o:u}}function D1(e,t,r,i,n){const{setZone:s,zone:o}=r;if(e&&Object.keys(e).length!==0){const a=t||o,l=St.fromObject(e,{...r,zone:a});return s?l:l.setZone(o)}else return St.invalid(new ul("unparsable",`the input "${n}" can't be parsed as ${i}`))}function Ng(e,t,r=!0){return e.isValid?js.create(Jr.create("en-US"),{allowZ:r,forceSimple:!0}).formatDateTimeFromString(e,t):null}function PU(e,{suppressSeconds:t=!1,suppressMilliseconds:r=!1,includeOffset:i,includePrefix:n=!1,includeZone:s=!1,spaceZone:o=!1,format:a="extended"}){let l=a==="basic"?"HHmm":"HH:mm";(!t||e.second!==0||e.millisecond!==0)&&(l+=a==="basic"?"ss":":ss",(!r||e.millisecond!==0)&&(l+=".SSS")),(s||i)&&o&&(l+=" "),s?l+="z":i&&(l+=a==="basic"?"ZZZ":"ZZ");let u=Ng(e,l);return n&&(u="T"+u),u}const zee={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},M4e={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},I4e={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Bee=["year","month","day","hour","minute","second","millisecond"],T4e=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],$4e=["year","ordinal","hour","minute","second","millisecond"];function RU(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new HQ(e);return t}function LU(e,t){const r=kd(t.zone,ji.defaultZone),i=Jr.fromObject(t),n=ji.now();let s,o;if(ir(e.year))s=n;else{for(const u of Bee)ir(e[u])&&(e[u]=zee[u]);const a=jee(e)||Vee(e);if(a)return St.invalid(a);const l=r.offset(n);[s,o]=r3(e,l,r)}return new St({ts:s,zone:r,loc:i,o})}function NU(e,t,r){const i=ir(r.round)?!0:r.round,n=(o,a)=>(o=U6(o,i||r.calendary?0:2,!0),t.loc.clone(r).relFormatter(r).format(o,a)),s=o=>r.calendary?t.hasSame(e,o)?0:t.startOf(o).diff(e.startOf(o),o).get(o):t.diff(e,o).get(o);if(r.unit)return n(s(r.unit),r.unit);for(const o of r.units){const a=s(o);if(Math.abs(a)>=1)return n(a,o)}return n(e>t?-0:0,r.units[r.units.length-1])}function DU(e){let t={},r;return e.length>0&&typeof e[e.length-1]=="object"?(t=e[e.length-1],r=Array.from(e).slice(0,e.length-1)):r=Array.from(e),[t,r]}class St{constructor(t){const r=t.zone||ji.defaultZone;let i=t.invalid||(Number.isNaN(t.ts)?new ul("invalid input"):null)||(r.isValid?null:Qx(r));this.ts=ir(t.ts)?ji.now():t.ts;let n=null,s=null;if(!i)if(t.old&&t.old.ts===this.ts&&t.old.zone.equals(r))[n,s]=[t.old.c,t.old.o];else{const a=r.offset(this.ts);n=kU(this.ts,a),i=Number.isNaN(n.year)?new ul("invalid input"):null,n=i?null:n,s=i?null:a}this._zone=r,this.loc=t.loc||Jr.create(),this.invalid=i,this.weekData=null,this.c=n,this.o=s,this.isLuxonDateTime=!0}static now(){return new St({})}static local(){const[t,r]=DU(arguments),[i,n,s,o,a,l,u]=r;return LU({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static utc(){const[t,r]=DU(arguments),[i,n,s,o,a,l,u]=r;return t.zone=hs.utcInstance,LU({year:i,month:n,day:s,hour:o,minute:a,second:l,millisecond:u},t)}static fromJSDate(t,r={}){const i=N$e(t)?t.valueOf():NaN;if(Number.isNaN(i))return St.invalid("invalid input");const n=kd(r.zone,ji.defaultZone);return n.isValid?new St({ts:i,zone:n,loc:Jr.fromObject(r)}):St.invalid(Qx(n))}static fromMillis(t,r={}){if(Mm(t))return t<-CU||t>CU?St.invalid("Timestamp out of range"):new St({ts:t,zone:kd(r.zone,ji.defaultZone),loc:Jr.fromObject(r)});throw new pa(`fromMillis requires a numerical input, but received a ${typeof t} with value ${t}`)}static fromSeconds(t,r={}){if(Mm(t))return new St({ts:t*1e3,zone:kd(r.zone,ji.defaultZone),loc:Jr.fromObject(r)});throw new pa("fromSeconds requires a numerical input")}static fromObject(t,r={}){t=t||{};const i=kd(r.zone,ji.defaultZone);if(!i.isValid)return St.invalid(Qx(i));const n=ji.now(),s=i.offset(n),o=kI(t,RU),a=!ir(o.ordinal),l=!ir(o.year),u=!ir(o.month)||!ir(o.day),h=l||u,d=o.weekYear||o.weekNumber,f=Jr.fromObject(r);if((h||a)&&d)throw new Gb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(u&&a)throw new Gb("Can't mix ordinal dates with month/day");const m=d||o.weekday&&!h;let g,b,w=kU(n,s);m?(g=T4e,b=M4e,w=UP(w)):a?(g=$4e,b=I4e,w=x5(w)):(g=Bee,b=zee);let _=!1;for(const C of g){const O=o[C];ir(O)?_?o[C]=b[C]:o[C]=w[C]:_=!0}const x=m?x4e(o):a?S4e(o):jee(o),I=x||Vee(o);if(I)return St.invalid(I);const S=m?EU(o):a?AU(o):o,[T,$]=r3(S,s,i),E=new St({ts:T,zone:i,o:$,loc:f});return o.weekday&&h&&t.weekday!==E.weekday?St.invalid("mismatched weekday",`you can't specify both a weekday of ${o.weekday} and a date of ${E.toISO()}`):E}static fromISO(t,r={}){const[i,n]=VEe(t);return D1(i,n,r,"ISO 8601",t)}static fromRFC2822(t,r={}){const[i,n]=UEe(t);return D1(i,n,r,"RFC 2822",t)}static fromHTTP(t,r={}){const[i,n]=zEe(t);return D1(i,n,r,"HTTP",r)}static fromFormat(t,r,i={}){if(ir(t)||ir(r))throw new pa("fromFormat requires an input string and a format");const{locale:n=null,numberingSystem:s=null}=i,o=Jr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0}),[a,l,u]=_4e(o,t,r);return u?St.invalid(u):D1(a,l,i,`format ${r}`,t)}static fromString(t,r,i={}){return St.fromFormat(t,r,i)}static fromSQL(t,r={}){const[i,n]=YEe(t);return D1(i,n,r,"SQL",t)}static invalid(t,r=null){if(!t)throw new pa("need to specify a reason the DateTime is invalid");const i=t instanceof ul?t:new ul(t,r);if(ji.throwOnInvalid)throw new C$e(i);return new St({invalid:i})}static isDateTime(t){return t&&t.isLuxonDateTime||!1}get(t){return this[t]}get isValid(){return this.invalid===null}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?M5(this).weekYear:NaN}get weekNumber(){return this.isValid?M5(this).weekNumber:NaN}get weekday(){return this.isValid?M5(this).weekday:NaN}get ordinal(){return this.isValid?x5(this.c).ordinal:NaN}get monthShort(){return this.isValid?Xx.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Xx.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Xx.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Xx.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return this.isOffsetFixed?!1:this.offset>this.set({month:1}).offset||this.offset>this.set({month:5}).offset}get isInLeapYear(){return $2(this.year)}get daysInMonth(){return AI(this.year,this.month)}get daysInYear(){return this.isValid?kw(this.year):NaN}get weeksInWeekYear(){return this.isValid?CI(this.weekYear):NaN}resolvedLocaleOptions(t={}){const{locale:r,numberingSystem:i,calendar:n}=js.create(this.loc.clone(t),t).resolvedOptions(this);return{locale:r,numberingSystem:i,outputCalendar:n}}toUTC(t=0,r={}){return this.setZone(hs.instance(t),r)}toLocal(){return this.setZone(ji.defaultZone)}setZone(t,{keepLocalTime:r=!1,keepCalendarTime:i=!1}={}){if(t=kd(t,ji.defaultZone),t.equals(this.zone))return this;if(t.isValid){let n=this.ts;if(r||i){const s=t.offset(this.ts),o=this.toObject();[n]=r3(o,s,t)}return N1(this,{ts:n,zone:t})}else return St.invalid(Qx(t))}reconfigure({locale:t,numberingSystem:r,outputCalendar:i}={}){const n=this.loc.clone({locale:t,numberingSystem:r,outputCalendar:i});return N1(this,{loc:n})}setLocale(t){return this.reconfigure({locale:t})}set(t){if(!this.isValid)return this;const r=kI(t,RU),i=!ir(r.weekYear)||!ir(r.weekNumber)||!ir(r.weekday),n=!ir(r.ordinal),s=!ir(r.year),o=!ir(r.month)||!ir(r.day),a=s||o,l=r.weekYear||r.weekNumber;if((a||n)&&l)throw new Gb("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(o&&n)throw new Gb("Can't mix ordinal dates with month/day");let u;i?u=EU({...UP(this.c),...r}):ir(r.ordinal)?(u={...this.toObject(),...r},ir(r.day)&&(u.day=Math.min(AI(u.year,u.month),u.day))):u=AU({...x5(this.c),...r});const[h,d]=r3(u,this.o,this.zone);return N1(this,{ts:h,o:d})}plus(t){if(!this.isValid)return this;const r=er.fromDurationLike(t);return N1(this,OU(this,r))}minus(t){if(!this.isValid)return this;const r=er.fromDurationLike(t).negate();return N1(this,OU(this,r))}startOf(t){if(!this.isValid)return this;const r={},i=er.normalizeUnit(t);switch(i){case"years":r.month=1;case"quarters":case"months":r.day=1;case"weeks":case"days":r.hour=0;case"hours":r.minute=0;case"minutes":r.second=0;case"seconds":r.millisecond=0;break}if(i==="weeks"&&(r.weekday=1),i==="quarters"){const n=Math.ceil(this.month/3);r.month=(n-1)*3+1}return this.set(r)}endOf(t){return this.isValid?this.plus({[t]:1}).startOf(t).minus(1):this}toFormat(t,r={}){return this.isValid?js.create(this.loc.redefaultToEN(r)).formatDateTimeFromString(this,t):S5}toLocaleString(t=LP,r={}){return this.isValid?js.create(this.loc.clone(r),t).formatDateTime(this):S5}toLocaleParts(t={}){return this.isValid?js.create(this.loc.clone(t),t).formatDateTimeParts(this):[]}toISO(t={}){return this.isValid?`${this.toISODate(t)}T${this.toISOTime(t)}`:null}toISODate({format:t="extended"}={}){let r=t==="basic"?"yyyyMMdd":"yyyy-MM-dd";return this.year>9999&&(r="+"+r),Ng(this,r)}toISOWeekDate(){return Ng(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:t=!1,suppressSeconds:r=!1,includeOffset:i=!0,includePrefix:n=!1,format:s="extended"}={}){return PU(this,{suppressSeconds:r,suppressMilliseconds:t,includeOffset:i,includePrefix:n,format:s})}toRFC2822(){return Ng(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ng(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return Ng(this,"yyyy-MM-dd")}toSQLTime({includeOffset:t=!0,includeZone:r=!1}={}){return PU(this,{includeOffset:t,includeZone:r,spaceZone:!0})}toSQL(t={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(t)}`:null}toString(){return this.isValid?this.toISO():S5}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(t={}){if(!this.isValid)return{};const r={...this.c};return t.includeConfig&&(r.outputCalendar=this.outputCalendar,r.numberingSystem=this.loc.numberingSystem,r.locale=this.loc.locale),r}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(t,r="milliseconds",i={}){if(!this.isValid||!t.isValid)return er.invalid("created by diffing an invalid DateTime");const n={locale:this.locale,numberingSystem:this.numberingSystem,...i},s=D$e(r).map(er.normalizeUnit),o=t.valueOf()>this.valueOf(),a=o?this:t,l=o?t:this,u=s4e(a,l,s,n);return o?u.negate():u}diffNow(t="milliseconds",r={}){return this.diff(St.now(),t,r)}until(t){return this.isValid?ii.fromDateTimes(this,t):this}hasSame(t,r){if(!this.isValid)return!1;const i=t.valueOf(),n=this.setZone(t.zone,{keepLocalTime:!0});return n.startOf(r)<=i&&i<=n.endOf(r)}equals(t){return this.isValid&&t.isValid&&this.valueOf()===t.valueOf()&&this.zone.equals(t.zone)&&this.loc.equals(t.loc)}toRelative(t={}){if(!this.isValid)return null;const r=t.base||St.fromObject({},{zone:this.zone}),i=t.padding?this<r?-t.padding:t.padding:0;let n=["years","months","days","hours","minutes","seconds"],s=t.unit;return Array.isArray(t.unit)&&(n=t.unit,s=void 0),NU(r,this.plus(i),{...t,numeric:"always",units:n,unit:s})}toRelativeCalendar(t={}){return this.isValid?NU(t.base||St.fromObject({},{zone:this.zone}),this,{...t,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...t){if(!t.every(St.isDateTime))throw new pa("min requires all arguments be DateTimes");return fU(t,r=>r.valueOf(),Math.min)}static max(...t){if(!t.every(St.isDateTime))throw new pa("max requires all arguments be DateTimes");return fU(t,r=>r.valueOf(),Math.max)}static fromFormatExplain(t,r,i={}){const{locale:n=null,numberingSystem:s=null}=i,o=Jr.fromOpts({locale:n,numberingSystem:s,defaultToEN:!0});return Pee(o,t,r)}static fromStringExplain(t,r,i={}){return St.fromFormatExplain(t,r,i)}static get DATE_SHORT(){return LP}static get DATE_MED(){return WQ}static get DATE_MED_WITH_WEEKDAY(){return P$e}static get DATE_FULL(){return JQ}static get DATE_HUGE(){return ZQ}static get TIME_SIMPLE(){return YQ}static get TIME_WITH_SECONDS(){return KQ}static get TIME_WITH_SHORT_OFFSET(){return XQ}static get TIME_WITH_LONG_OFFSET(){return QQ}static get TIME_24_SIMPLE(){return eee}static get TIME_24_WITH_SECONDS(){return tee}static get TIME_24_WITH_SHORT_OFFSET(){return ree}static get TIME_24_WITH_LONG_OFFSET(){return iee}static get DATETIME_SHORT(){return nee}static get DATETIME_SHORT_WITH_SECONDS(){return see}static get DATETIME_MED(){return oee}static get DATETIME_MED_WITH_SECONDS(){return aee}static get DATETIME_MED_WITH_WEEKDAY(){return R$e}static get DATETIME_FULL(){return lee}static get DATETIME_FULL_WITH_SECONDS(){return uee}static get DATETIME_HUGE(){return cee}static get DATETIME_HUGE_WITH_SECONDS(){return hee}}function F1(e){if(St.isDateTime(e))return e;if(e&&e.valueOf&&Mm(e.valueOf()))return St.fromJSDate(e);if(e&&typeof e=="object")return St.fromObject(e);throw new pa(`Unknown datetime argument: ${e}, of type ${typeof e}`)}const I5={ar:[".",","],bg:[",","\xA0"],bs:[",","."],ca:[",","."],cs:[",","\xA0"],da:[",","."],de:[",","."],"de-ch":[".","\u2019"],el:[",","."],en:[".",","],"en-au":[".",","],es:[",","."],"es-mx":[".",","],et:[",","\xA0"],fi:[",","\xA0"],fr:[",","\u202F"],"fr-ch":[",","\u202F"],he:[".",","],hi:[".",",","#,##,##0.###"],hr:[",","."],hu:[",","\xA0"],id:[",","."],it:[",","."],"it-ch":[".","\u2019"],ja:[".",","],ko:[".",","],lt:[",","\xA0"],lv:[",","\xA0"],mk:[",","."],nb:[",","\xA0"],nl:[",","."],pl:[",","\xA0"],pt:[",","."],"pt-pt":[",","\xA0"],ro:[",","."],ru:[",","\xA0"],sk:[",","\xA0"],sl:[",","."],sr:[",","."],sv:[",","\xA0"],th:[".",","],tr:[",","."],uk:[",","\xA0"],vi:[",","."],zh:[".",","]};function Gee(e){e||(e=Sa());let t=e in I5;if(!t){const s=e.split("-");s.length>1&&s[0]in I5&&(e=s[0],t=!0),t||(e="en")}const[r,i,n="#,##0.###"]=I5[e];return{decimal:r,group:i,pattern:n}}function E4e(e,t){const r=Gee((t={...t}).locale);t.customs=r;const i=t.pattern||r.pattern;return isNaN(e)||Math.abs(e)===1/0?null:A4e(e,i,t)}const qee=/[#0,]*[#0](?:\.0*#*)?/;function A4e(e,t,r){const i=(r=r||{}).customs.group,n=r.customs.decimal,s=t.split(";"),o=s[0];if((t=s[e<0?1:0]||"-"+o).indexOf("%")!==-1)e*=100;else if(t.indexOf("\u2030")!==-1)e*=1e3;else{if(t.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");if(t.indexOf("E")!==-1)throw new Error("exponential notation not supported")}const a=qee,l=o.match(a);if(!l)throw new Error("unable to find a number expression in pattern: "+t);return r.fractional===!1&&(r.places=0),t.replace(a,C4e(e,l[0],{decimal:n,group:i,places:r.places,round:r.round}))}function C4e(e,t,r){(r=r||{}).places===!0&&(r.places=0),r.places===1/0&&(r.places=6);const i=t.split("."),n=typeof r.places=="string"&&r.places.indexOf(",");let s=r.places;n?s=r.places.substring(n+1):s>=0||(s=(i[1]||[]).length),r.round<0||(e=Number(e.toFixed(Number(s))));const o=String(Math.abs(e)).split("."),a=o[1]||"";if(i[1]||r.places){n&&(r.places=r.places.substring(0,n));const g=r.places!==void 0?r.places:i[1]&&i[1].lastIndexOf("0")+1;g>a.length&&(o[1]=a.padEnd(Number(g),"0")),s<a.length&&(o[1]=a.substr(0,Number(s)))}else o[1]&&o.pop();const l=i[0].replace(",","");let u=l.indexOf("0");u!==-1&&(u=l.length-u,u>o[0].length&&(o[0]=o[0].padStart(u,"0")),l.indexOf("#")===-1&&(o[0]=o[0].substr(o[0].length-u)));let h,d,f=i[0].lastIndexOf(",");if(f!==-1){h=i[0].length-f-1;const g=i[0].substr(0,f);f=g.lastIndexOf(","),f!==-1&&(d=g.length-f-1)}const m=[];for(let g=o[0];g;){const b=g.length-h;m.push(b>0?g.substr(b):g),g=b>0?g.slice(0,b):"",d&&(h=d,d=void 0)}return o[0]=m.reverse().join(r.group||","),o.join(r.decimal||".")}function k4e(e){const t=Gee((e=e||{}).locale),r=e.pattern||t.pattern,i=t.group,n=t.decimal;let s=1;if(r.indexOf("%")!==-1)s/=100;else if(r.indexOf("\u2030")!==-1)s/=1e3;else if(r.indexOf("\xA4")!==-1)throw new Error("currency notation not supported");const o=r.split(";");return o.length===1&&o.push("-"+o[0]),{regexp:__(o,function(l){return(l="(?:"+wH(l,".")+")").replace(qee,function(u){const h={signed:!1,separator:e.strict?i:[i,""],fractional:e.fractional,decimal:n,exponent:!1},d=u.split(".");let f=e.places;d.length===1&&s!==1&&(d[1]="###"),d.length===1||f===0?h.fractional=!1:(f===void 0&&(f=e.pattern?d[1].lastIndexOf("0")+1:1/0),f&&e.fractional==null&&(h.fractional=!0),!e.places&&f<d[1].length&&(f+=","+d[1].length),h.places=f);const m=d[0].split(",");return m.length>1&&(h.groupSize=m.pop().length,m.length>1&&(h.groupSize2=m.pop().length)),"("+P4e(h)+")"})},!0).replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:i,decimal:n,factor:s}}function O4e(e,t){const r=k4e(t),i=new RegExp("^"+r.regexp+"$").exec(e);if(!i)return NaN;let n=i[1];if(!i[1]){if(!i[2])return NaN;n=i[2],r.factor*=-1}return n=n.replace(new RegExp("["+r.group+"\\s\\xa0]","g"),"").replace(r.decimal,"."),Number(n)*r.factor}function P4e(e){"places"in(e=e||{})||(e.places=1/0),typeof e.decimal!="string"&&(e.decimal="."),"fractional"in e&&!/^0/.test(String(e.places))||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);const t=FU(e),r=__(e.fractional,function(n){let s="";return n&&e.places!==0&&(s="\\"+e.decimal,e.places===1/0?s="(?:"+s+"\\d+)?":s+="\\d{"+e.places+"}"),s},!0);let i=t+r;return r&&(i="(?:(?:"+i+")|(?:"+r+"))"),i+__(e.exponent,function(n){return n?"([eE]"+FU({signed:e.eSigned})+")":""})}function FU(e){return"signed"in(e=e||{})||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="",__(e.signed,function(t){return t?"[-+]":""},!0)+__(e.separator,function(t){if(!t)return"(?:\\d+)";(t=wH(t))===" "?t="\\s":t==="\xA0"&&(t="\\s\\xa0");const r=e.groupSize,i=e.groupSize2;if(i){const n="(?:0|[1-9]\\d{0,"+(i-1)+"}(?:["+t+"]\\d{"+i+"})*["+t+"]\\d{"+r+"})";return r-i>0?"(?:"+n+"|(?:0|[1-9]\\d{0,"+(r-1)+"}))":n}return"(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*)"},!0)}const __=function(e,t,r){if(!(e instanceof Array))return t(e);const i=[];for(let n=0;n<e.length;n++)i.push(t(e[n]));return R4e(i.join("|"),r)},R4e=function(e,t){return"("+(t?"?:":"")+e+")"};class Hee{constructor(t){this.value=t}}class Wee{constructor(t){this.value=t}}class J6{constructor(t){this.fn=t}}class Z6{constructor(t,r){this.paramCount=r,this.fn=t}}const L4e=J6,N4e=Wee,D4e=Hee,F4e=Z6,_o={type:"VOID"},j4e={type:"BREAK"},V4e={type:"CONTINUE"};function x_(e,t,r){return t===""||t==null||t===r||t===r?e:e=e.split(t).join(r)}function Y6(e){return e instanceof J6||e instanceof A$e||e instanceof Z6}function PI(e){return!!vn(e)||!!as(e)||!!Rn(e)||!!os(e)||e===null||e===_o||typeof e=="number"}function U4e(e,t){return e===void 0?t:e}function vn(e){return typeof e=="string"||e instanceof String}function os(e){return typeof e=="boolean"}function as(e){return typeof e=="number"}function z4e(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Ma(e){return e instanceof Array}function B4e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureset.support.FeatureSet")===!0}function G4e(e){return(e&&e.declaredRootClass&&e.declaredRootClass==="esri.arcade.featureSetCollection")===!0}function Zm(e){return e instanceof Ku}function Rn(e){return e instanceof Date}function q4e(e,t,r){if(e.length<t||e.length>r)throw new Error("Function called with wrong number of Parameters")}function H4e(e){return e<0?-Math.round(-e):Math.round(e)}function W4e(){let e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(t==="x"?r:3&r|8).toString(16)})}function K6(e,t){return isNaN(e)===!1?t==null||t===""?e.toString():(t=x_(t,"\u2030",""),t=x_(t,"\xA4",""),E4e(e,{pattern:t})):e.toString()}function j$(e,t){const r=St.fromJSDate(e);return t==null||t===""?r.toISO({suppressMilliseconds:!0}):r.toFormat(Jee(t),{locale:Sa(),numberingSystem:"latn"})}function Jee(e){e=e.replace(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let t="";const r=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;for(const i of e.match(r))switch(i){case"D":t+="d";break;case"DD":t+="dd";break;case"DDD":t+="o";break;case"d":t+="c";break;case"ddd":t+="ccc";break;case"dddd":t+="cccc";break;case"M":t+="L";break;case"MM":t+="LL";break;case"MMM":t+="LLL";break;case"MMMM":t+="LLLL";break;case"YY":t+="yy";break;case"Y":case"YYYY":t+="yyyy";break;case"Q":t+="q";break;case"Z":t+="ZZ";break;case"ZZ":t+="ZZZ";break;case"S":t+="'S'";break;case"SS":t+="'SS'";break;case"SSS":t+="u";break;case"A":case"a":t+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":t+=i;break;default:i.length>=2&&i.slice(0,1)==="["&&i.slice(-1)==="]"?t+=`'${i.slice(1,-1)}'`:t+=`'${i}'`}return t}function lr(e,t,r){switch(r){case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}return!1}function J4e(e,t,r){if(e===null){if(t===null||t===_o)return lr(null,null,r);if(as(t))return lr(0,t,r);if(vn(t)||os(t))return lr(0,Hr(t),r);if(Rn(t))return lr(0,t.getTime(),r)}if(e===_o){if(t===null||t===_o)return lr(null,null,r);if(as(t))return lr(0,t,r);if(vn(t)||os(t))return lr(0,Hr(t),r);if(Rn(t))return lr(0,t.getTime(),r)}else if(as(e)){if(as(t))return lr(e,t,r);if(os(t))return lr(e,Hr(t),r);if(t===null||t===_o)return lr(e,0,r);if(vn(t))return lr(e,Hr(t),r);if(Rn(t))return lr(e,t.getTime(),r)}else if(vn(e)){if(vn(t))return lr(Xd(e),Xd(t),r);if(Rn(t))return lr(Hr(e),t.getTime(),r);if(as(t))return lr(Hr(e),t,r);if(t===null||t===_o)return lr(Hr(e),0,r);if(os(t))return lr(Hr(e),Hr(t),r)}else if(Rn(e)){if(Rn(t))return lr(e,t,r);if(t===null||t===_o)return lr(e.getTime(),0,r);if(as(t))return lr(e.getTime(),t,r);if(os(t)||vn(t))return lr(e.getTime(),Hr(t),r)}else if(os(e)){if(os(t))return lr(e,t,r);if(as(t))return lr(Hr(e),Hr(t),r);if(Rn(t))return lr(Hr(e),t.getTime(),r);if(t===null||t===_o)return lr(Hr(e),0,r);if(vn(t))return lr(Hr(e),Hr(t),r)}return!!Zee(e,t)&&(r==="<="||r===">=")}function Zee(e,t){if(e===t||e===null&&t===_o||t===null&&e===_o)return!0;if(Rn(e)&&Rn(t))return e.getTime()===t.getTime();if(e instanceof j6||e instanceof Sy)return e.equalityTest(t);if(e instanceof Ke&&t instanceof Ke){const r=e.cache._arcadeCacheId,i=t.cache._arcadeCacheId;if(r!=null)return r===i}return e!==void 0&&t!==void 0&&e!==null&&t!==null&&typeof e=="object"&&typeof t=="object"&&(e._arcadeCacheId===t._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===t._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null)}function Xd(e,t){if(vn(e))return e;if(e===null)return"";if(as(e))return K6(e,t);if(os(e))return e.toString();if(Rn(e))return j$(e,t);if(e instanceof Xs)return JSON.stringify(e.toJSON());if(Ma(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=RI(e[i]);return"["+r.join(",")+"]"}if(e instanceof Ku){const r=[];for(let i=0;i<e.length();i++)r[i]=RI(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():Y6(e)?"object, Function":""}function Z4e(e){const t=[];if(Ma(e)===!1)return null;if(e instanceof Ku){for(let r=0;r<e.length();r++)t[r]=Hr(e.get(r));return t}for(let r=0;r<e.length;r++)t[r]=Hr(e[r]);return t}function i3(e,t){if(vn(e))return e;if(e===null)return"";if(as(e))return K6(e,t);if(os(e))return e.toString();if(Rn(e))return j$(e,t);if(e instanceof Xs)return e instanceof nt?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+zP(e.spatialReference)+"}":zP(e.toJSON(),(r,i)=>r.key===i.key?0:r.key==="spatialReference"?1:i.key==="spatialReference"||r.key<i.key?-1:r.key>i.key?1:0);if(Ma(e)){const r=[];for(let i=0;i<e.length;i++)r[i]=RI(e[i]);return"["+r.join(",")+"]"}if(e instanceof Ku){const r=[];for(let i=0;i<e.length();i++)r[i]=RI(e.get(i));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():Y6(e)?"object, Function":""}function RI(e){if(e===null)return"null";if(os(e)||as(e)||vn(e))return JSON.stringify(e);if(e instanceof Xs||e instanceof Ku||e instanceof Array)return i3(e);if(e instanceof Date)return JSON.stringify(j$(e,""));if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText()}else if(e===_o)return"null";return"null"}function Hr(e,t){return as(e)?e:e===null||e===""?0:Rn(e)?NaN:os(e)?e?1:0:Ma(e)||e===""||e===void 0?NaN:t!==void 0&&vn(e)?(t=x_(t,"\u2030",""),t=x_(t,"\xA4",""),O4e(e,{pattern:t})):e===_o?0:Number(e)}function Y4e(e){if(Rn(e))return e;if(vn(e)){const t=Yee(e);if(t)return t.toJSDate()}return null}function K4e(e){return Rn(e)?St.fromJSDate(e):vn(e)?Yee(e):null}function Yee(e){const t=/ (\d\d)/;let r=St.fromISO(e);return r.isValid||t.test(e)&&(e=e.replace(t,"T$1"),r=St.fromISO(e),r.isValid)?r:null}function X4e(e){return os(e)?e:vn(e)?(e=e.toLowerCase())==="true":!!as(e)&&e!==0&&!isNaN(e)}function Q4e(e,t){return ce(e)?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=t),e)}function e5e(e){if(e===null)return null;if(e instanceof Ke)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof _n){if(e.rings.length===0)return null;for(const t of e.rings)if(t.length>0)return e;return null}if(e instanceof Vi){if(e.paths.length===0)return null;for(const t of e.paths)if(t.length>0)return e;return null}return e instanceof xp?e.points.length===0?null:e:e instanceof nt?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function t5e(e,t){if(!e||!e.domain)return t;let r=null;if(e.field.type==="string"||e.field.type==="esriFieldTypeString")t=Xd(t);else{if(t==null)return null;if(t==="")return t;t=Hr(t)}for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.code===t&&(r=n)}return r===null?t:r.name}function r5e(e,t){if(!e||!e.domain)return t;let r=null;t=Xd(t);for(let i=0;i<e.domain.codedValues.length;i++){const n=e.domain.codedValues[i];n.name===t&&(r=n)}return r===null?t:r.code}function i5e(e,t,r=null,i){if(!t||!t.fields)return null;let n,s,o=null;for(let a=0;a<t.fields.length;a++){const l=t.fields[a];l.name.toLowerCase()===e.toString().toLowerCase()&&(o=l)}if(o===null)throw new Error("Field not found");return i||(i=r&&t.typeIdField&&r._field(t.typeIdField)),i!=null&&t.types.some(function(a){return a.id===i&&(n=a.domains&&a.domains[o.name],n&&n.type==="inherited"&&(n=jU(o.name,t),s=!0),!0)}),s||n||(n=jU(e,t)),{field:o,domain:n}}function jU(e,t){let r;return t.fields.some(function(i){return i.name.toLowerCase()===e.toLowerCase()&&(r=i.domain),!!r}),r}function zP(e,t){t||(t={}),typeof t=="function"&&(t={cmp:t});const r=typeof t.cycles=="boolean"&&t.cycles,i=t.cmp&&(n=t.cmp,function(o){return function(a,l){const u={key:a,value:o[a]},h={key:l,value:o[l]};return n(u,h)}});var n;const s=[];return function o(a){if(a&&a.toJSON&&typeof a.toJSON=="function"&&(a=a.toJSON()),a===void 0)return;if(typeof a=="number")return isFinite(a)?""+a:"null";if(typeof a!="object")return JSON.stringify(a);let l,u;if(Array.isArray(a)){for(u="[",l=0;l<a.length;l++)l&&(u+=","),u+=o(a[l])||"null";return u+"]"}if(a===null)return"null";if(s.indexOf(a)!==-1){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}const h=s.push(a)-1,d=Object.keys(a).sort(i&&i(a));for(u="",l=0;l<d.length;l++){const f=d[l],m=o(a[f]);m&&(u&&(u+=","),u+=JSON.stringify(f)+":"+m)}return s.splice(h,1),"{"+u+"}"}(e)}function n5e(e){if(e===null)return null;const t=[];for(const r of e)r&&(r.declaredClass&&r.declaredClass==="esri.arcade.Feature"||r.type==="FeatureSetReader")?t.push(r.geometry()):t.push(r);return t}function Q0(e,t){if(!(t instanceof Ke))throw new Error("Invalid Argument");e.push(t.hasZ?t.hasM?[t.x,t.y,t.z,t.m]:[t.x,t.y,t.z]:[t.x,t.y])}function s5e(e,t){if(Ma(e)||Zm(e)){let r=!1,i=!1,n=[],s=t;if(Ma(e)){for(const o of e)Q0(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ,i=e[0].hasM)}else if(e instanceof Sy)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else{if(!Zm(e))throw new Error("Invalid Argument");for(const o of e.toArray())Q0(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:(tN(n,i,r)===!1&&(n=n.slice(0).reverse()),new _n({rings:[n],spatialReference:s,hasZ:r,hasM:i}))}return e}function o5e(e,t){if(Ma(e)||Zm(e)){let r=!1,i=!1,n=[],s=t;if(Ma(e)){for(const o of e)Q0(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof Sy)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(Zm(e)){for(const o of e.toArray())Q0(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new Vi({paths:[n],spatialReference:s,hasZ:r,hasM:i})}return e}function a5e(e,t){if(Ma(e)||Zm(e)){let r=!1,i=!1,n=[],s=t;if(Ma(e)){for(const o of e)Q0(n,o);n.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,i=e[0].hasM===!0)}else if(e instanceof Sy)n=e._elements,n.length>0&&(r=e._hasZ,i=e._hasM,s=e.get(0).spatialReference);else if(Zm(e)){for(const o of e.toArray())Q0(n,o);n.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,i=e.get(0).hasM===!0)}return n.length===0?null:new xp({points:n,spatialReference:s,hasZ:r,hasM:i})}return e}function l5e(e,t=!1){const r=[];if(e===null)return r;if(Ma(e)===!0){for(let i=0;i<e.length;i++){const n=Xd(e[i]);n===""&&t!==!0||r.push(n)}return r}if(e instanceof Ku){for(let i=0;i<e.length();i++){const n=Xd(e.get(i));n===""&&t!==!0||r.push(n)}return r}if(PI(e)){const i=Xd(e);return i===""&&t!==!0||r.push(i),r}return[]}let T5=0;function u5e(e){return T5++,T5%100==0?(T5=0,PH(t=>{setTimeout(()=>{t(e)},0)})):e}function c5e(e,t,r){switch(r){case"&":return e&t;case"|":return e|t;case"^":return e^t;case"<<":return e<<t;case">>":return e>>t;case">>>":return e>>>t}}function S_(e,t=null){return e==null?null:os(e)||as(e)||vn(e)?e:e instanceof Xs?t?.keepGeometryType===!0?e:e.toJSON():e instanceof Ku?e.toArray().map(r=>S_(r,t)):e instanceof Array?e.map(r=>S_(r,t)):e instanceof Date?e:e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(t):null}function h5e(e,t,r,i,n){return X6(e,t,r).then(s=>{n[i]=s})}function X6(e,t=null,r=null){if(e instanceof Ku&&(e=e.toArray()),e==null)return eb(null);if(PI(e)||e instanceof Xs||e instanceof Date)return eb(S_(e,r));if(e instanceof Array){const i=[],n=[];for(const s of e)s===null||PI(s)||s instanceof Xs||s instanceof Date?n.push(S_(s,r)):(n.push(null),i.push(h5e(s,t,r,n.length-1,n)));return i.length>0?OH(i).then(()=>n):eb(n)}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(t,r):eb(null)}const cit=Object.freeze({__proto__:null,ReturnResultE:Hee,ImplicitResultE:Wee,NativeFunctionE:J6,SizzleFunctionE:Z6,NativeFunction:L4e,ImplicitResult:N4e,ReturnResult:D4e,SizzleFunction:F4e,voidOperation:_o,breakResult:j4e,continueResult:V4e,multiReplace:x_,isFunctionParameter:Y6,isSimpleType:PI,defaultUndefined:U4e,isString:vn,isBoolean:os,isNumber:as,isInteger:z4e,isArray:Ma,isFeatureSet:B4e,isFeatureSetCollection:G4e,isImmutableArray:Zm,isDate:Rn,pcCheck:q4e,absRound:H4e,generateUUID:W4e,formatNumber:K6,formatDate:j$,standardiseDateFormat:Jee,greaterThanLessThan:J4e,equalityTest:Zee,toString:Xd,toNumberArray:Z4e,toStringExplicit:i3,toNumber:Hr,toDate:Y4e,toDateTime:K4e,toBoolean:X4e,fixSpatialReference:Q4e,fixNullGeometry:e5e,getDomainValue:t5e,getDomainCode:r5e,getDomain:i5e,stableStringify:zP,autoCastFeatureToGeometry:n5e,autoCastArrayOfPointsToPolygon:s5e,autoCastArrayOfPointsToPolyline:o5e,autoCastArrayOfPointsToMultiPoint:a5e,toStringArray:l5e,tick:u5e,binaryOperator:c5e,castAsJson:S_,castAsJsonAsync:X6}),d5e=["$datastore","$map","$layer","$aggregatedfeatures"],p5e="esri.widgets.Feature.support.arcadeFeatureUtils",f5e=Te.getLogger(p5e);function m5e(e){return typeof e=="string"?T2(R6(e)):Array.isArray(e)?y5e(e):e?.declaredClass==="esri.arcade.Dictionary"?g5e(e):e}function y5e(e){return`<ul class="esri-widget__list">${e.map(t=>`<li>${typeof t=="string"?T2(R6(t)):t}</li>`).join("")}</ul>`}function g5e(e){return`<table class="esri-widget__table">${e.keys().map(t=>{const r=e.field(t);return`<tr><th>${t}</th><td>${typeof r=="string"?T2(R6(r)):r}</td></tr>`}).join("")}</table>`}function v5e({aggregatedFeatures:e,arcadeUtils:t,featureSetVars:r,context:i,viewInfo:n,map:s,graphic:o,interceptor:a}){r.forEach(l=>{const u=l.toLowerCase(),h={map:s,spatialReference:n.sr,interceptor:a};if(u==="$map"&&(i.vars[u]=t.convertMapToFeatureSetCollection(h)),u==="$layer"&&(i.vars[u]=t.convertFeatureLayerToFeatureSet({layer:o.sourceLayer,spatialReference:n.sr,interceptor:a})),u==="$datastore"&&(i.vars[u]=t.convertServiceUrlToWorkspace({url:o.sourceLayer.url,spatialReference:n.sr,interceptor:a})),u==="$aggregatedfeatures"){const d=o.layer,{fields:f,objectIdField:m,geometryType:g,spatialReference:b,displayField:w}=d,_=new M$({fields:f,objectIdField:m,geometryType:g,spatialReference:b,displayField:w,...d.type==="feature"?{templates:d.templates,typeIdField:d.typeIdField,types:d.types}:null,source:e});i.vars[u]=t.convertFeatureLayerToFeatureSet({layer:_,spatialReference:n.sr,interceptor:a})}})}function Kee(){return ae(()=>import("./arcadeUtils.611ac886.js").then(function(e){return e.Q}),["assets/arcadeUtils.611ac886.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js"])}async function b5e({graphic:e,view:t}){const{isAggregate:r,layer:i}=e;if(!r||!i||t?.type!=="2d")return[];const n=await t.whenLayerView(i);if(!n.createQuery||!n.queryFeatures)return[];const s=n.createQuery();s.aggregateIds=[e.getObjectId()];const{features:o}=await n.queryFeatures(s);return o}async function Xee({expressionInfo:e,arcadeUtils:t,interceptor:r,spatialReference:i,map:n,graphic:s,view:o}){if(!e||!e.expression)return null;const a=t.createSyntaxTree(e.expression),l=d5e.filter(m=>t.hasVariable(a,m)),[u]=await OH([b5e({graphic:s,view:o}),t.loadScriptDependencies(a,!0,l)]),h=t.getViewInfo({spatialReference:i}),d=t.createExecContext(s,h);d.interceptor=r,d.useAsync=!0,v5e({aggregatedFeatures:u,arcadeUtils:t,featureSetVars:l,context:d,viewInfo:h,map:n,graphic:s,interceptor:r});const f=t.createFunction(a,d);return t.executeAsyncFunction(f,d).catch(m=>f5e.error("arcade-execution-error",{error:m,graphic:s,expressionInfo:e}))}async function w5e({expressionInfos:e,spatialReference:t,graphic:r,interceptor:i,map:n,view:s}){if(!e||!e.length)return{};const o=await Kee(),a={};for(const h of e)a[`expression/${h.name}`]=Xee({expressionInfo:h,arcadeUtils:o,interceptor:i,spatialReference:t,map:n,graphic:r,view:s});const l=await Zs(a),u={};for(const h in l)u[h]=m5e(l[h].value);return u}const _5e=1;let fo=class extends ro(Ze){constructor(e){super(e),this._abortController=null,this.expressionInfo=null,this.graphic=null,this.contentElement=null,this.contentElementViewModel=null,this.interceptor=null,this.view=null,this._cancelQuery=()=>{const{_abortController:t}=this;t&&t.abort(),this._abortController=null},this._createVM=()=>{var t,r;const i=(t=this.contentElement)==null?void 0:t.type;(r=this.contentElementViewModel)==null||r.destroy();const n=i==="fields"?new L$:i==="media"?new rm:i==="text"?new EI:null;this._set("contentElementViewModel",n)},this._compile=async()=>{this._cancelQuery();const t=new AbortController;this._abortController=t,await this._compileExpression(),this._abortController===t&&(this._abortController=null)},this._compileThrottled=E6(this._compile,_5e,this),this._compileExpression=async()=>{const{expressionInfo:t,graphic:r,interceptor:i,spatialReference:n,map:s,view:o,_abortController:a}=this;if(!(t&&r&&n&&s&&o))return void this._set("contentElement",null);const l=await Kee();if(a!==this._abortController)return;const u=await Xee({arcadeUtils:l,expressionInfo:t,graphic:r,interceptor:i,map:s,spatialReference:n,view:o});if(!u||u.declaredClass!=="esri.arcade.Dictionary")return void this._set("contentElement",null);const h=await X6(u,a.signal),d=h?.type,f=d==="media"?l_.fromJSON(h):d==="text"?U0.fromJSON(h):d==="fields"?V0.fromJSON(h):null;this._set("contentElement",f)},this.handles.add([It(this,["expressionInfo","graphic","map","spatialReference","view"],this._compileThrottled),It(this,"contentElement",this._createVM)])}destroy(){var e;this._cancelQuery(),(e=this.contentElementViewModel)==null||e.destroy(),this._set("contentElementViewModel",null),this._set("contentElement",null)}get spatialReference(){var e;return((e=this.view)==null?void 0:e.spatialReference)||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get state(){const{_abortController:e,contentElement:t,contentElementViewModel:r}=this;return e?"loading":t||r?"ready":"disabled"}get map(){var e;return((e=this.view)==null?void 0:e.map)||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}};c([p()],fo.prototype,"_abortController",void 0),c([p({type:NJ})],fo.prototype,"expressionInfo",void 0),c([p({type:xn})],fo.prototype,"graphic",void 0),c([p({readOnly:!0})],fo.prototype,"contentElement",void 0),c([p({readOnly:!0})],fo.prototype,"contentElementViewModel",void 0),c([p()],fo.prototype,"interceptor",void 0),c([p()],fo.prototype,"spatialReference",null),c([p({readOnly:!0})],fo.prototype,"state",null),c([p()],fo.prototype,"map",null),c([p()],fo.prototype,"view",void 0),fo=c([N("esri.widgets.Feature.FeatureExpression.FeatureExpressionViewModel")],fo);const Q6=fo,eS={iconLoading:"esri-icon-loading-indicator esri-rotating",base:"esri-feature-expression",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"};let n3=class extends Tn{constructor(e,t){super(e,t),this.viewModel=new Q6}initialize(){It(this,"viewModel.contentElementViewModel",()=>this._setupExpressionWidget())}destroy(){var e;(e=this._contentWidget)==null||e.destroy(),this._contentWidget=null}renderLoading(){return oe("div",{key:"loading-container",class:eS.loadingSpinnerContainer},oe("span",{class:this.classes(eS.iconLoading,eS.spinner)}))}render(){var e;const{state:t}=this.viewModel;return oe("div",{class:eS.base},t==="loading"?this.renderLoading():t==="disabled"?null:(e=this._contentWidget)==null?void 0:e.render())}_setupExpressionWidget(){var e;const{contentElementViewModel:t,contentElement:r}=this.viewModel,i=r?.type;(e=this._contentWidget)==null||e.destroy(),this._contentWidget=null;const n=t?i==="fields"?new GQ({viewModel:t}):i==="media"?new qQ({viewModel:t}):i==="text"?new e3({viewModel:t}):null:null;this._contentWidget=n,this.scheduleRender()}};c([p({type:Q6})],n3.prototype,"viewModel",void 0),n3=c([N("esri.widgets.Feature.FeatureExpression")],n3);const x5e=n3;class S5e{constructor(t,r){this.preLayerQueryCallback=t,this.preRequestCallback=r,this.preLayerQueryCallback||(this.preLayerQueryCallback=i=>{}),this.preRequestCallback||(this.preLayerQueryCallback=i=>{})}}var s3;const M5e=1,VU="content-view-models",Qee="esri.widgets.FeatureViewModel",I5e=Te.getLogger(Qee),UU={attachmentsContent:!0,customContent:!0,expressionContent:!0,fieldsContent:!0,mediaContent:!0,textContent:!0};let Dr=s3=class extends Ze{constructor(e){super(e),this._handles=new gi,this._error=null,this._featureAbortController=null,this.graphicChangedThrottled=E6(this.graphicChanged,M5e,this),this._expressionAttributes=null,this._graphicExpressionAttributes=null,this.abilities={...UU},this.content=null,this.contentViewModels=[],this.defaultPopupTemplateEnabled=!1,this.formattedAttributes=null,this.lastEditInfo=null,this.relatedInfos=new Map,this.title="",this.view=null,this._isAllowedContentType=t=>{const{abilities:r}=this;return t.type==="attachments"&&r.attachmentsContent||t.type==="custom"&&r.customContent||t.type==="fields"&&r.fieldsContent||t.type==="media"&&r.mediaContent||t.type==="text"&&r.textContent||t.type==="expression"&&r.expressionContent},this._handles.add(It(this,["graphic","_effectivePopupTemplate","abilities"],()=>this.graphicChangedThrottled()))}destroy(){this._clear(),this._cancelFeatureQuery(),this._error=null,this._handles.destroy(),this._handles=null,this.graphic=null,this._destroyContentViewModels(),this.relatedInfos.clear()}get _effectivePopupTemplate(){return U(this.graphic)?this.graphic.getEffectivePopupTemplate(this.defaultPopupTemplateEnabled):null}get _fieldInfoMap(){return NTe(sU(this._effectivePopupTemplate),this._sourceLayer)}get _sourceLayer(){return PQ(this.graphic)}castAbilities(e){return{...UU,...e}}get state(){return this.graphic?this._error?"error":this.waitingForContent?"loading":"ready":"disabled"}set graphic(e){this._set("graphic",e?e.clone():null)}get spatialReference(){return this.get("view.spatialReference")||null}set spatialReference(e){e!==void 0?this._override("spatialReference",e):this._clearOverride("spatialReference")}get map(){return this.get("view.map")||null}set map(e){e!==void 0?this._override("map",e):this._clearOverride("map")}get waitingForContent(){return!!this._featureAbortController}setActiveMedia(e,t){const r=this.contentViewModels[e];r instanceof rm&&r.setActiveMedia(t)}nextMedia(e){const t=this.contentViewModels[e];t instanceof rm&&t.next()}previousMedia(e){const t=this.contentViewModels[e];t instanceof rm&&t.previous()}_clear(){this._set("title",""),this._set("content",null),this._set("formattedAttributes",null)}async graphicChanged(){this._cancelFeatureQuery(),this._error=null,this._clear();const{graphic:e}=this;if(!e)return;const t=new AbortController;this._featureAbortController=t;try{await this._queryFeature({signal:t.signal})}catch(r){sn(r)||(this._error=r,I5e.error("error","The popupTemplate could not be displayed for this feature.",{error:r,graphic:e,popupTemplate:this._effectivePopupTemplate}))}this._featureAbortController===t&&(this._featureAbortController=null)}_cancelFeatureQuery(){const{_featureAbortController:e}=this;e&&e.abort(),this._featureAbortController=null}_compileContentElement(e,t){return e.type==="attachments"?this._compileAttachments(e,t):e.type==="custom"?this._compileCustom(e,t):e.type==="fields"?this._compileFields(e,t):e.type==="media"?this._compileMedia(e,t):e.type==="text"?this._compileText(e,t):e.type==="expression"?this._compileExpression(e,t):void 0}_compileContent(e){if(this._destroyContentViewModels(),this.graphic)return Array.isArray(e)?e.filter(this._isAllowedContentType).map((t,r)=>this._compileContentElement(t,r)):typeof e=="string"?this._compileText(new U0({text:e}),0).text:e}_destroyContentViewModels(){var e;(e=this._handles)==null||e.remove(VU),this.contentViewModels.forEach(t=>t&&!t.destroyed&&t.destroy()),this._set("contentViewModels",[])}_setExpressionContentVM(e,t){const{formattedAttributes:r}=this,{contentElement:i,contentElementViewModel:n}=e,s=i?.type;n&&s&&(s==="fields"&&(this._createFieldsFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createFieldsVMParams(i,t))),s==="media"&&(this._createMediaFormattedAttributes({contentElement:i,contentElementIndex:t,formattedAttributes:r}),n.set(this._createMediaVMParams(i,t))),s==="text"&&n.set(this._createTextVMParams(i)))}_compileExpression(e,t){const{expressionInfo:r}=e,{graphic:i,map:n,spatialReference:s,view:o}=this,a=new Q6({expressionInfo:r,graphic:i,interceptor:s3.interceptor,map:n,spatialReference:s,view:o});return this.contentViewModels[t]=a,this._handles.add(It(a,"contentElementViewModel",()=>this._setExpressionContentVM(a,t)),VU),e}_compileAttachments(e,t){const{graphic:r}=this,{description:i,title:n}=e;return this.contentViewModels[t]=new N6({graphic:r,...this._compileTitleAndDesc({title:n,description:i})}),e}_compileCustom(e,t){const{graphic:r}=this,{creator:i,destroyer:n}=e;return this.contentViewModels[t]=new EI({graphic:r,creator:i,destroyer:n}),e}_compileTitleAndDesc({title:e,description:t}){const{_fieldInfoMap:r,_sourceLayer:i,graphic:n,formattedAttributes:s,_expressionAttributes:o}=this,{attributes:a}=n,l=s.global;return{title:tm({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:e}),description:tm({attributes:a,fieldInfoMap:r,globalAttributes:l,expressionAttributes:o,layer:i,text:t})}}_createFieldsVMParams(e,t){const{_effectivePopupTemplate:r,formattedAttributes:i}=this,n={...i.global,...i.content[t]},s=e?.fieldInfos||r?.fieldInfos,o=s?.filter(({fieldName:h})=>LQ(h)||ih(h)||n.hasOwnProperty(h)),a=r?.expressionInfos,{description:l,title:u}=e;return{attributes:n,expressionInfos:a,fieldInfos:o,...this._compileTitleAndDesc({title:u,description:l})}}_compileFields(e,t){const r=e.clone(),i=new L$(this._createFieldsVMParams(e,t));return this.contentViewModels[t]=i,r.fieldInfos=i.formattedFieldInfos.slice(0),r}_createMediaVMParams(e,t){const{graphic:r,_fieldInfoMap:i,formattedAttributes:n,_effectivePopupTemplate:s,relatedInfos:o,_sourceLayer:a,_expressionAttributes:l}=this,{attributes:u}=r,{description:h,mediaInfos:d,title:f}=e;return{activeMediaInfoIndex:e.activeMediaInfoIndex||0,attributes:u,layer:a,fieldInfoMap:i,formattedAttributes:{...n.global,...n.content[t]},expressionAttributes:l,mediaInfos:d,popupTemplate:s,relatedInfos:o,...this._compileTitleAndDesc({title:f,description:h})}}_compileMedia(e,t){const r=e.clone(),i=new rm(this._createMediaVMParams(e,t));return r.mediaInfos=i.formattedMediaInfos.slice(0),this.contentViewModels[t]=i,r}_createTextVMParams(e){const{graphic:t,_fieldInfoMap:r,_sourceLayer:i,_expressionAttributes:n}=this;if(e&&e.text){const{attributes:s}=t,o=this.formattedAttributes.global;e.text=tm({attributes:s,fieldInfoMap:r,globalAttributes:o,expressionAttributes:n,layer:i,text:e.text})}return{graphic:t,creator:e.text}}_compileText(e,t){const r=e.clone();return this.contentViewModels[t]=new EI(this._createTextVMParams(r)),r}_compileLastEditInfo(){const{_effectivePopupTemplate:e,_sourceLayer:t,graphic:r}=this;if(!e)return;const{lastEditInfoEnabled:i}=e,n=t?.editFieldsInfo;return i&&n?LTe(n,r.attributes):void 0}_compileTitle(e){const{_fieldInfoMap:t,_sourceLayer:r,graphic:i,_expressionAttributes:n}=this,{attributes:s}=i,o=this.formattedAttributes.global;return tm({attributes:s,fieldInfoMap:t,globalAttributes:o,expressionAttributes:n,layer:r,text:e})}async _getTitle(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.title;return TI(r,{graphic:t})}async _getContent(){const{_effectivePopupTemplate:e,graphic:t}=this,r=e?.content;return TI(r,{graphic:t})}async _queryFeature(e){const{_featureAbortController:t,_sourceLayer:r,graphic:i,_effectivePopupTemplate:n,spatialReference:s,map:o,view:a}=this,{content:{value:l},title:{value:u}}=await Zs({content:this._getContent(),title:this._getTitle()});if(t!==this._featureAbortController||!i)return;await VTe({graphic:i,popupTemplate:n,layer:r,spatialReference:s},e);const{expressionAttributes:{value:h}}=await Zs({checkForRelatedFeatures:this._checkForRelatedFeatures(e),expressionAttributes:w5e({expressionInfos:n?.expressionInfos,spatialReference:s,graphic:i,map:o,interceptor:s3.interceptor,view:a})});t===this._featureAbortController&&i&&(this._expressionAttributes=h,this._graphicExpressionAttributes={...i.attributes,...h},this._set("formattedAttributes",this._createFormattedAttributes(l)),this._set("title",this._compileTitle(u)),this._set("lastEditInfo",this._compileLastEditInfo()||null),this._set("content",this._compileContent(l)||null))}_createMediaFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){const{_effectivePopupTemplate:i,graphic:n,relatedInfos:s,_sourceLayer:o,_fieldInfoMap:a,_graphicExpressionAttributes:l}=this;r.content[t]=h5({fieldInfos:i?.fieldInfos,graphic:n,attributes:{...l,...e.attributes},layer:o,fieldInfoMap:a,relatedInfos:s})}_createFieldsFormattedAttributes({contentElement:e,contentElementIndex:t,formattedAttributes:r}){if(e.fieldInfos){const{graphic:i,relatedInfos:n,_sourceLayer:s,_fieldInfoMap:o,_graphicExpressionAttributes:a}=this;r.content[t]=h5({fieldInfos:e.fieldInfos,graphic:i,attributes:{...a,...e.attributes},layer:s,fieldInfoMap:o,relatedInfos:n})}}_createFormattedAttributes(e){const{_effectivePopupTemplate:t,graphic:r,relatedInfos:i,_sourceLayer:n,_fieldInfoMap:s,_graphicExpressionAttributes:o}=this,a=t?.fieldInfos,l={global:h5({fieldInfos:a,graphic:r,attributes:o,layer:n,fieldInfoMap:s,relatedInfos:i}),content:[]};return Array.isArray(e)&&e.forEach((u,h)=>{u.type==="fields"&&this._createFieldsFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l}),u.type==="media"&&this._createMediaFormattedAttributes({contentElement:u,contentElementIndex:h,formattedAttributes:l})}),l}_checkForRelatedFeatures(e){const{graphic:t,_effectivePopupTemplate:r}=this;return this._queryRelatedInfos(t,sU(r),e)}async _queryRelatedInfos(e,t,r){const{relatedInfos:i,_sourceLayer:n}=this;i.clear();const s=U(n.associatedLayer)?await n.associatedLayer.load(r):n;if(!s)return;const o=t.filter(u=>u&&ih(u.fieldName));if(!o||!o.length)return;t.forEach(u=>this._configureRelatedInfo(u,s));const a=await b$e({relatedInfos:i,layer:s},r);Object.keys(a).forEach(u=>{var h;const d=i.get(u.toString()),f=(h=a[u])==null?void 0:h.value;d&&f&&(d.layerInfo=f.data)});const l=await w$e({graphic:e,relatedInfos:i,layer:s},r);Object.keys(l).forEach(u=>{var h;f$e((h=l[u])==null?void 0:h.value,i.get(u.toString()))})}_configureRelatedInfo(e,t){const{relatedInfos:r}=this,i=Bb(e.fieldName);if(!i)return;const{layerId:n,fieldName:s}=i;if(!n)return;const o=r.get(n.toString())||p$e(n,t);o&&(_$e({relatedInfo:o,fieldName:s,fieldInfo:e}),this.relatedInfos.set(n,o))}};Dr.interceptor=new S5e(BTe,GTe),c([p()],Dr.prototype,"_error",void 0),c([p()],Dr.prototype,"_featureAbortController",void 0),c([p({readOnly:!0})],Dr.prototype,"_effectivePopupTemplate",null),c([p({readOnly:!0})],Dr.prototype,"_fieldInfoMap",null),c([p({readOnly:!0})],Dr.prototype,"_sourceLayer",null),c([p()],Dr.prototype,"abilities",void 0),c([Ct("abilities")],Dr.prototype,"castAbilities",null),c([p({readOnly:!0})],Dr.prototype,"content",void 0),c([p({readOnly:!0})],Dr.prototype,"contentViewModels",void 0),c([p({type:Boolean})],Dr.prototype,"defaultPopupTemplateEnabled",void 0),c([p({readOnly:!0})],Dr.prototype,"state",null),c([p({readOnly:!0})],Dr.prototype,"formattedAttributes",void 0),c([p({type:xn,value:null})],Dr.prototype,"graphic",null),c([p({readOnly:!0})],Dr.prototype,"lastEditInfo",void 0),c([p({readOnly:!0})],Dr.prototype,"relatedInfos",void 0),c([p()],Dr.prototype,"spatialReference",null),c([p({readOnly:!0})],Dr.prototype,"title",void 0),c([p()],Dr.prototype,"map",null),c([p({readOnly:!0})],Dr.prototype,"waitingForContent",null),c([p()],Dr.prototype,"view",void 0),Dr=s3=c([N(Qee)],Dr);const e8=Dr,ete=e=>{let t=class extends e{constructor(){super(...arguments),this.renderNodeContent=r=>BQ(r)&&!r.destroyed?oe("div",{key:r},r.render()):r instanceof HTMLElement?oe("div",{key:r,bind:r,afterCreate:this._attachToNode}):n$e(r)?oe("div",{key:r,bind:r.domNode,afterCreate:this._attachToNode}):null}_attachToNode(r){const i=this;r.appendChild(i)}};return t=c([N("esri.widgets.Feature.ContentMixin")],t),t},un={iconText:"esri-icon-font-fallback-text",iconLoading:"esri-icon-loading-indicator esri-rotating",esriTable:"esri-widget__table",esriWidget:"esri-widget",base:"esri-feature",container:"esri-feature__size-container",title:"esri-feature__title",main:"esri-feature__main-container",btn:"esri-feature__button",icon:"esri-feature__icon",content:"esri-feature__content",contentElement:"esri-feature__content-element",text:"esri-feature__text",lastEditedInfo:"esri-feature__last-edited-info",fields:"esri-feature__fields",fieldHeader:"esri-feature__field-header",fieldData:"esri-feature__field-data",fieldDataDate:"esri-feature__field-data--date",loadingSpinnerContainer:"esri-feature__loading-container",spinner:"esri-feature__loading-spinner"},zU={title:!0,content:!0,lastEditedInfo:!0};let pn=class extends ete(Tn){constructor(e,t){super(e,t),this._contentWidgets=[],this.graphic=null,this.defaultPopupTemplateEnabled=!1,this.headingLevel=2,this.label=void 0,this.messages=null,this.messagesCommon=null,this.messagesURIUtils=null,this.spatialReference=null,this.title=null,this.visibleElements={...zU},this.map=null,this.view=null,this.viewModel=new e8}initialize(){this.own(It(this,"viewModel.contentViewModels",()=>this._setupContentWidgets()))}loadDependencies(){return ae(()=>import("./calcite-notice.352f0dba.js"),[])}destroy(){this._destroyContentWidgets()}castVisibleElements(e){return{...zU,...e}}render(){const{state:e}=this.viewModel,t=oe("div",{class:un.container,key:"container"},this.renderTitle(),e==="error"?this.renderError():e==="loading"?this.renderLoading():this.renderContentContainer());return oe("div",{class:this.classes(un.base,un.esriWidget)},t)}setActiveMedia(e,t){this.viewModel.setActiveMedia(e,t)}nextMedia(e){this.viewModel.nextMedia(e)}previousMedia(e){this.viewModel.previousMedia(e)}renderError(){const{messagesCommon:e,messages:t,visibleElements:r}=this;return oe("calcite-notice",{active:!0,color:"red",icon:"exclamation-mark-circle",scale:"s"},r.title?oe("div",{key:"error-title",slot:"title"},e.errorMessage):null,oe("div",{key:"error-message",slot:"message"},t.loadingError))}renderLoading(){return oe("div",{key:"loading-container",class:un.loadingSpinnerContainer},oe("span",{class:this.classes(un.iconLoading,un.spinner)}))}renderContentContainer(){const{visibleElements:e}=this;return e.content?oe("div",{class:un.main},[this.renderContent(),this.renderLastEditInfo()]):null}renderTitle(){const{visibleElements:e,title:t}=this;return e.title?oe(R$,{level:this.headingLevel,class:un.title,innerHTML:t}):null}renderContent(){const e=this.viewModel.content,t="content";if(!e)return null;if(Array.isArray(e))return e.length?oe("div",{key:`${t}-content-elements`},e.map(this.renderContentElement,this)):null;if(typeof e=="string"){const r=this._contentWidgets[0];return!r||r.destroyed?null:oe("div",{key:`${t}-content`},r.render())}return this.renderNodeContent(e)}renderContentElement(e,t){const{visibleElements:r}=this;if(typeof r.content!="boolean"&&!r.content[e.type])return null;switch(e.type){case"attachments":return this.renderAttachments(t);case"custom":return this.renderCustom(e,t);case"fields":return this.renderFields(t);case"media":return this.renderMedia(t);case"text":return this.renderText(e,t);case"expression":return this.renderExpression(t);default:return null}}renderAttachments(e){const t=this._contentWidgets[e];if(!t||t.destroyed)return null;const{state:r,attachmentInfos:i}=t.viewModel;return r==="loading"||i.length>0?oe("div",{key:this._buildKey("attachments-element",e),class:this.classes(un.contentElement)},t.render()):null}renderExpression(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("expression-element",e),class:un.contentElement},t.render())}renderCustom(e,t){const{creator:r}=e,i=this._contentWidgets[t];return!i||i.destroyed?null:r?oe("div",{key:this._buildKey("custom-element",t),class:un.contentElement},i.render()):null}renderFields(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("fields-element",e),class:un.contentElement},t.render())}renderMedia(e){const t=this._contentWidgets[e];return!t||t.destroyed?null:oe("div",{key:this._buildKey("media-element",e),class:un.contentElement},t.render())}renderLastEditInfo(){const{visibleElements:e,messages:t}=this,{lastEditInfo:r}=this.viewModel;if(!r||!e.lastEditedInfo)return null;const{date:i,user:n}=r,s=r.type==="edit"?n?t.lastEditedByUser:t.lastEdited:n?t.lastCreatedByUser:t.lastCreated,o=_c(s,{date:i,user:n});return oe("div",{key:"edit-info-element",class:this.classes(un.lastEditedInfo,un.contentElement)},o)}renderText(e,t){const r=e.text,i=this._contentWidgets[t];return!i||i.destroyed?null:r?oe("div",{key:this._buildKey("text-element",t),class:this.classes(un.contentElement,un.text)},i.render()):null}_buildKey(e,...t){return`${e}__${this.get("viewModel.graphic.uid")||"0"}-${t.join("-")}`}_destroyContentWidget(e){e&&(e.viewModel=null,!e.destroyed&&e.destroy())}_destroyContentWidgets(){this._contentWidgets.forEach(e=>this._destroyContentWidget(e)),this._contentWidgets=[]}_setupContentWidgets(){this._destroyContentWidgets();const{headingLevel:e,visibleElements:t}=this,r=this.get("viewModel.content"),{contentViewModels:i}=this.viewModel;if(Array.isArray(r))r.forEach((n,s)=>{n.type==="attachments"&&(this._contentWidgets[s]=new QTe({displayType:n.displayType,headingLevel:t.title?e+1:e,viewModel:i[s]})),n.type==="fields"&&(this._contentWidgets[s]=new GQ({viewModel:i[s]})),n.type==="media"&&(this._contentWidgets[s]=new qQ({viewModel:i[s]})),n.type==="text"&&(this._contentWidgets[s]=new e3({viewModel:i[s]})),n.type==="custom"&&(this._contentWidgets[s]=new e3({viewModel:i[s]})),n.type==="expression"&&(this._contentWidgets[s]=new x5e({viewModel:i[s]}))},this);else{const n=i[0];n&&!n.destroyed&&(this._contentWidgets[0]=new e3({viewModel:n}))}this.scheduleRender()}};c([ze("viewModel.graphic")],pn.prototype,"graphic",void 0),c([ze("viewModel.defaultPopupTemplateEnabled")],pn.prototype,"defaultPopupTemplateEnabled",void 0),c([p()],pn.prototype,"headingLevel",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],pn.prototype,"label",void 0),c([p(),Vn("esri/widgets/Feature/t9n/Feature")],pn.prototype,"messages",void 0),c([p(),Vn("esri/t9n/common")],pn.prototype,"messagesCommon",void 0),c([p(),Vn("esri/widgets/support/t9n/uriUtils")],pn.prototype,"messagesURIUtils",void 0),c([ze("viewModel.spatialReference")],pn.prototype,"spatialReference",void 0),c([ze("viewModel.title")],pn.prototype,"title",void 0),c([p()],pn.prototype,"visibleElements",void 0),c([Ct("visibleElements")],pn.prototype,"castVisibleElements",null),c([ze("viewModel.map")],pn.prototype,"map",void 0),c([ze("viewModel.view")],pn.prototype,"view",void 0),c([p({type:e8})],pn.prototype,"viewModel",void 0),pn=c([N("esri.widgets.Feature")],pn);const T5e=pn;let $f=class extends _h.EventedAccessor{constructor(e){super(e),this._anchorHandles=new gi,this.location=null,this.screenLocation=null,this.screenLocationEnabled=!1,this.view=null,this._anchorHandles.add([sr(this,["screenLocationEnabled","location","view.size","view.stationary"],()=>this._updateScreenPointAndHandle()),sr(this,["view","view.ready"],()=>this._wireUpView())])}destroy(){this.view=null,this._anchorHandles&&this._anchorHandles.destroy(),this._anchorHandles=null,this._viewpointHandle=null}_wireUpView(){const e="view";if(this._anchorHandles.remove(e),this._viewpointHandle=null,!this.get("view.ready"))return;this._setScreenLocation();const{view:t}=this,r=t.type==="3d"?"camera":"viewpoint",i=s0e(t,r,()=>this._viewpointChange());this._anchorHandles.add(i,e),this._viewpointHandle=i,this._toggleWatchingViewpoint()}_viewpointChange(){this._setScreenLocation(),this.emit("view-change")}_updateScreenPointAndHandle(){this._setScreenLocation(),this._toggleWatchingViewpoint()}_toggleWatchingViewpoint(){const{_viewpointHandle:e,location:t,screenLocationEnabled:r}=this;!e||(t&&r?e.resume():e.pause())}_setScreenLocation(){const{location:e,view:t,screenLocationEnabled:r}=this,i=this.get("view.ready"),n=r&&i&&U(e)?t.toScreen(e):null;this._set("screenLocation",n)}};c([p()],$f.prototype,"location",void 0),c([p({readOnly:!0})],$f.prototype,"screenLocation",void 0),c([p()],$f.prototype,"screenLocationEnabled",void 0),c([p()],$f.prototype,"view",void 0),$f=c([N("esri.widgets.support.AnchorElementViewModel")],$f);const tte=$f,$5e="esri.widgets.CompassViewModel";let o3=class extends tte{constructor(e){super(e),this.visible=!1}};c([p()],o3.prototype,"visible",void 0),o3=c([N($5e)],o3);const rte=o3,$5={base:"esri-spinner",spinnerStart:"esri-spinner--start",spinnerFinish:"esri-spinner--finish"};let Ef=class extends Tn{constructor(e,t){super(e,t),this._animationDelay=500,this._animationPromise=null,this.location=null,this.view=null,this.viewModel=new rte,this.visible=!1}initialize(){this.own([sr(this,"visible",e=>this._visibleChange(e))])}destroy(){this._animationPromise=null}show(e){const{location:t,promise:r}=e;t&&(this.viewModel.location=t),this.visible=!0;const i=()=>this.hide();r&&r.catch(()=>{}).then(i)}hide(){this.visible=!1}render(){const{visible:e}=this,{screenLocation:t}=this.viewModel,r=!!t,i=e&&r,n=!e&&r,s={[$5.spinnerStart]:i,[$5.spinnerFinish]:n},o=this._getPositionStyles();return oe("div",{class:this.classes($5.base,s),styles:o})}_visibleChange(e){if(e)return void(this.viewModel.screenLocationEnabled=!0);const t=RL(this._animationDelay);this._animationPromise=t,t.catch(()=>{}).then(()=>{this._animationPromise===t&&(this.viewModel.screenLocationEnabled=!1,this._animationPromise=null)})}_getPositionStyles(){const{screenLocation:e,view:t}=this.viewModel;if(!t||ce(e))return{};const{padding:r}=t;return{left:e.x-r.left+"px",top:e.y-r.top+"px"}}};c([ze("viewModel.location")],Ef.prototype,"location",void 0),c([ze("viewModel.view")],Ef.prototype,"view",void 0),c([p({type:rte})],Ef.prototype,"viewModel",void 0),c([ze("viewModel.visible")],Ef.prototype,"visible",void 0),Ef=c([N("esri.widgets.Spinner")],Ef);const E5e=Ef;function ite(e){return e&&"opacity"in e?e.opacity*ite(e.parent):1}async function A5e(e,t){var r,i;if(!e)return;const n=e.sourceLayer,s=(r=U(t)&&(i=t.useSourceLayer)!=null&&i?n:e.layer)!=null?r:n,o=ite(s);if(U(e.symbol)&&(!U(t)||t.ignoreGraphicSymbol!==!0)){const x=e.symbol.type==="web-style"?await e.symbol.fetchSymbol(U(t)?t.abortOptions:null):e.symbol.clone();return W4(x,null,o),x}const a=U(t)&&t.renderer||s&&"renderer"in s&&s.renderer;let l=a&&"getSymbolAsync"in a?await a.getSymbolAsync(e,t):null;if(!l)return;if(l=l.type==="web-style"?await l.fetchSymbol(U(t)?t.abortOptions:null):l.clone(),!("visualVariables"in a)||!a.visualVariables||!a.visualVariables.length)return W4(l,null,o),l;if("arcadeRequiredForVisualVariables"in a&&a.arcadeRequiredForVisualVariables&&(ce(t)||ce(t.arcade))){const x={...t};x.arcade=await mh(),t=x}const u=await ae(()=>Promise.resolve().then(function(){return oge}),void 0),h=[],d=[],f=[],m=[];for(const x of a.visualVariables)switch(x.type){case"color":h.push(x);break;case"opacity":d.push(x);break;case"rotation":m.push(x);break;case"size":x.target||f.push(x)}const g=!!h.length&&h[h.length-1],b=g?u.getColor(g,e,t):null,w=!!d.length&&d[d.length-1];let _=w?u.getOpacity(w,e,t):null;if(o!=null&&(_=_!=null?_*o:o),W4(l,b,_),f.length){const x=u.getAllSizes(f,e,t);await fK(l,x)}for(const x of m)mK(l,u.getRotationAngle(x,e,t),x.axis);return l}class BP{constructor(t=r=>r.values().next().value){this._peeker=t,this._items=new Set}get length(){return this._items.size}clear(){this._items.clear()}last(){if(this._items.size===0)return;let t;for(t of this._items);return t}peek(){if(this._items.size!==0)return this._peeker(this._items)}push(t){this.contains(t)||this._items.add(t)}contains(t){return this._items.has(t)}pop(){if(this.length===0)return;const t=this.peek();return this._items.delete(t),t}popLast(){if(this.length===0)return;const t=this.last();return this._items.delete(t),t}remove(t){this._items.delete(t)}filter(t){return this._items.forEach(r=>{t(r)||this._items.delete(r)}),this}}const C5e=ge("mac")?"Meta":"Ctrl",V$={8:"Backspace",9:"Tab",13:"Enter",27:"Escape",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete"};for(let e=48;e<58;e++)V$[e]=String.fromCharCode(e);for(let e=1;e<25;e++)V$[111+e]=`F${e}`;for(let e=65;e<91;e++)V$[e]=[String.fromCharCode(e+32),String.fromCharCode(e)];function k5e(e){if(e.key!==void 0)return jf(e);const t=V$[e.keyCode];return Array.isArray(t)?e.shiftKey?t[1]:t[0]:t}function O5e(e){switch(e){case"Ctrl":case"Alt":case"Shift":case"Meta":case"Primary":return!0}return!1}class P5e{constructor(t,r=[]){this.eventType=t,this.keyModifiers=r}matches(t){if(t.type!==this.eventType)return!1;if(this.keyModifiers.length===0)return!0;const r=t.modifiers;for(const i of this.keyModifiers)if(!r.has(i))return!1;return!0}}const BU=Te.getLogger("esri.views.input.InputHandler");class on{constructor(t){this._manager=null,this._incoming={},this._outgoing={},this._incomingEventMatches=null,this._incomingEventTypes=null,this._outgoingEventTypes=null,this._hasSideEffects=t}get incomingEventMatches(){if(!this._incomingEventMatches){this._incomingEventMatches=[];for(const t in this._incoming){const r=this._incoming[t];for(const i of r)this._incomingEventMatches.push(i.match)}}return this._incomingEventMatches}get incomingEventTypes(){return this._incomingEventTypes||(this._incomingEventTypes=this.incomingEventMatches.map(t=>t.eventType)),this._incomingEventTypes}get outgoingEventTypes(){return this._outgoingEventTypes||(this._outgoingEventTypes=Object.keys(this._outgoing)),this._outgoingEventTypes}get hasSideEffects(){return this._hasSideEffects}get hasPendingInputs(){return!1}onInstall(t){this._manager?BU.error("This InputHandler has already been registered with an InputManager"):(t.setEventCallback(r=>this._handleEvent(r)),t.setUninstallCallback(()=>this._onUninstall()),this._manager=t)}onUninstall(){}registerIncoming(t,r,i){let n;typeof r=="function"?(i=r,n=[]):n=r||[];const s=typeof t=="string"?new P5e(t,n):t,o=()=>{this._incomingEventTypes=null,this._incomingEventMatches=null},a=h=>{const d=this._incoming[h.match.eventType];if(d){const f=d.indexOf(h);d.splice(f,1),o(),this._manager&&this._manager.updateDependencies()}},l=new R5e(s,i,{onPause:a,onRemove:a,onResume:h=>{const d=this._incoming[h.match.eventType];d&&d.indexOf(h)===-1&&(d.push(h),o(),this._manager&&this._manager.updateDependencies())}});let u=this._incoming[s.eventType];return u||(u=[],this._incoming[s.eventType]=u),u.push(l),o(),this._manager&&this._manager.updateDependencies(),l}registerOutgoing(t){if(this._outgoing[t])throw Error("There is already a callback registered for this outgoing InputEvent: "+t);const r=new L5e(t,{onEmit:(i,n,s,o)=>{this._manager.emit(i.eventType,n,s,o)},onRemove:i=>{delete this._outgoing[i.eventType],this._manager.updateDependencies()}});return this._outgoing[t]=r,this._outgoingEventTypes=null,this._manager&&this._manager.updateDependencies(),r}startCapturingPointer(t){this._manager.setPointerCapture(t,!0)}stopCapturingPointer(t){this._manager.setPointerCapture(t,!1)}refreshHasPendingInputs(){this._manager.refreshHasPendingInputs()}_onUninstall(){this._manager?(this.onUninstall(),this._manager=null):BU.error("This InputHandler is not registered with an InputManager")}_handleEvent(t){const r=this._incoming[t.type];if(r){for(const i of r)if(i.match.matches(t)&&(i.callback(t),t.shouldStopPropagation()))break}}}class R5e{constructor(t,r,i){this.match=t,this._callback=r,this._handler=i}pause(){this._handler.onPause(this)}resume(){this._handler.onResume(this)}remove(){this._handler.onRemove(this)}get callback(){return this._callback}}class L5e{constructor(t,r){this.eventType=t,this._removed=!1,this._handler=r}emit(t,r,i){this._removed||this._handler.onEmit(this,t,r,i)}remove(){this._removed=!0,this._handler.onRemove(this)}}class N5e extends on{constructor(t){super(!0),this._onChange=t,this._value="mouse",this.registerIncoming("pointer-down",r=>{const i=r.data.native.pointerType==="touch";this._setValue(i?"touch":"mouse")}),this._moveHandler=this.registerIncoming("pointer-move",r=>{const i=r.data.native.pointerType==="touch";this._setValue(i?"touch":"mouse")}),this._moveHandler.pause()}_setValue(t){t!==this._value&&(t==="touch"?this._moveHandler.resume():this._moveHandler.pause(),this._value=t,this._onChange(t))}}const E5=Te.getLogger("esri.views.input.InputManager");let Af=class extends Ze{constructor(e){super(e),this._pointerCaptures=new Map,this._nameToGroup={},this._handlers=[],this._currentPropagation=null,this._updateDependenciesAfterPropagation=!1,this._sourceEvents=new Set,this._keyModifiers=new Set,this._activeKeyModifiers=new Set,this._stoppedPropagationEventIds=new Set,this.primaryKey=C5e,this.latestPointerType="mouse",this.test={timestamp:void 0,hasCurrentPropagation:()=>!!this._currentPropagation}}initialize(){this.eventSource.onEventReceived=this._onEventReceived.bind(this),this._installRecognizers()}destroy(){const e=Object.keys(this._nameToGroup);for(const t of e)this.uninstallHandlers(t);this.eventSource=null,this._currentPropagation=null}get hasPendingInputs(){return this._handlers.some(e=>e.handler.hasPendingInputs)}installHandlers(e,t,r=Qd.INTERNAL){if(this._nameToGroup[e])return void E5.error("There is already an InputHandler group registered under the name `"+e+"`");if(t.length===0)return void E5.error("Can't register a group of zero handlers");const i={name:e,handlers:t.map(n=>({handler:n,active:!0,removed:!1,priorityIndex:0,groupPriority:r,eventCallback:null,uninstallCallback:null}))};this._nameToGroup[e]=i;for(let n=i.handlers.length-1;n>=0;n--){const s=i.handlers[n];this._handlers.push(s),s.handler.onInstall({updateDependencies:()=>{this.updateDependencies()},emit:(o,a,l,u,h)=>{this._emitInputEvent(s.priorityIndex+1,o,a,l,h,u)},setPointerCapture:(o,a)=>{this._setPointerCapture(i,s,o,a)},setEventCallback:o=>{s.eventCallback=o},setUninstallCallback:o=>{s.uninstallCallback=o},refreshHasPendingInputs:()=>{this.notifyChange("hasPendingInputs")}})}this.updateDependencies()}uninstallHandlers(e){const t=this._nameToGroup[e];t?(t.handlers.forEach(r=>{r.removed=!0,r.uninstallCallback()}),delete this._nameToGroup[e],this._currentPropagation?this._currentPropagation.needsHandlerGarbageCollect=!0:this._garbageCollectRemovedHandlers()):E5.error("There is no InputHandler group registered under the name `"+e+"`")}hasHandlers(e){return this._nameToGroup[e]!==void 0}updateDependencies(){if(this._currentPropagation)return void(this._updateDependenciesAfterPropagation=!0);this._updateDependenciesAfterPropagation=!1;const e=new Set,t=new Set;this._handlersPriority=[];for(let r=this._handlers.length-1;r>=0;r--){const i=this._handlers[r];i.priorityIndex=r,this._handlersPriority.push(i)}this._handlersPriority=this._sortHandlersPriority(this._handlersPriority);for(let r=this._handlersPriority.length-1;r>=0;r--){const i=this._handlersPriority[r];i.priorityIndex=r;let n=i.handler.hasSideEffects;if(!n){for(const s of i.handler.outgoingEventTypes)if(e.has(s)){n=!0;break}}if(n)for(const s of i.handler.incomingEventMatches){e.add(s.eventType);for(const o of s.keyModifiers)O5e(o)||t.add(o)}i.active=n}this._sourceEvents=e,this._keyModifiers=t,this._pointerCaptures.size>0&&this._sourceEvents.add("pointer-capture-lost"),this._keyModifiers.size>0&&(this._sourceEvents.add("key-down"),this._sourceEvents.add("key-up")),this.eventSource&&(this.eventSource.activeEvents=this._sourceEvents)}_setLatestPointerType(e){this._set("latestPointerType",e)}_onEventReceived(e,t){if(e==="pointer-capture-lost"){const n=t;this._pointerCaptures.delete(n.native.pointerId)}this._updateKeyModifiers(e,t);const r=this.test.timestamp!=null?this.test.timestamp:t.native?t.native.timestamp:void 0,i=t.native?t.native.cancelable:void 0;this._emitInputEventFromSource(e,t,r,i)}_updateKeyModifiers(e,t){if(!t)return;let r=!1;const i=()=>{if(!r){const o=new Set;this._activeKeyModifiers.forEach(a=>{o.add(a)}),this._activeKeyModifiers=o,r=!0}},n=(o,a)=>{a&&!this._activeKeyModifiers.has(o)?(i(),this._activeKeyModifiers.add(o)):!a&&this._activeKeyModifiers.has(o)&&(i(),this._activeKeyModifiers.delete(o))};if(e==="key-down"||e==="key-up"){const o=t.key;this._keyModifiers.has(o)&&n(o,e==="key-down")}const s=t.native;n("Alt",!(!s||!s.altKey)),n("Ctrl",!(!s||!s.ctrlKey)),n("Shift",!(!s||!s.shiftKey)),n("Meta",!(!s||!s.metaKey)),n("Primary",this._activeKeyModifiers.has(this.primaryKey))}_installRecognizers(){this._latestPointerTypeHandler=new N5e(e=>this._setLatestPointerType(e)),this.recognizers.length>0&&this.installHandlers("default",this.recognizers,Qd.INTERNAL),this.installHandlers("input-manager-logic",[this._latestPointerTypeHandler],Qd.INTERNAL)}_setPointerCapture(e,t,r,i){const n=e.name+"-"+t.priorityIndex,s=this._pointerCaptures.get(r.pointerId)||new Set;this._pointerCaptures.set(r.pointerId,s),i?(s.add(n),s.size===1&&this.eventSource&&this.eventSource.setPointerCapture(r,!0)):s.has(n)&&(s.delete(n),s.size===0&&(this._pointerCaptures.delete(r.pointerId),this.eventSource&&this.eventSource.setPointerCapture(r,!1)))}_garbageCollectRemovedHandlers(){this._handlers=this._handlers.filter(e=>!e.removed),this.updateDependencies()}_emitInputEventFromSource(e,t,r,i){this._emitInputEvent(0,e,t,r,i)}_emitInputEvent(e,t,r,i,n,s){const o=i!==void 0?i:this._currentPropagation?this._currentPropagation.timestamp:performance.now(),a=n!==void 0&&n,l={event:new D5e(t,r,o,s||this._activeKeyModifiers,a),priorityIndex:e};this._currentPropagation?this._currentPropagation.events.push(l):this._doNewPropagation(l)}_doNewPropagation(e){this._currentPropagation={events:new BP,currentHandler:null,needsHandlerGarbageCollect:!1,timestamp:e.event.timestamp},this._currentPropagation.events.push(e),this._continuePropagation()}_continuePropagation(){const e=this._currentPropagation;if(e){for(;this._currentPropagation.events.length>0;){const{event:t,priorityIndex:r}=this._currentPropagation.events.pop(),i=t.data&&t.data.eventId;if(!(i!=null&&this._stoppedPropagationEventIds.has(i)))for(e.currentHandler=this._handlersPriority[r];e.currentHandler;){if(e.currentHandler.removed)e.needsHandlerGarbageCollect=!0;else{if(e.currentHandler.active&&!t.shouldStopPropagation()&&e.currentHandler.eventCallback(t),t.shouldStopPropagation()){i!=null&&this._stoppedPropagationEventIds.add(i);break}if(t.shouldPausePropagation(()=>this._continuePropagation()))return void this._pausePropagation({event:t,priorityIndex:e.currentHandler.priorityIndex+1})}e.currentHandler=this._handlersPriority[e.currentHandler.priorityIndex+1]}}e.needsHandlerGarbageCollect&&this._garbageCollectRemovedHandlers(),this.hasPendingInputs||this._stoppedPropagationEventIds.clear(),this._currentPropagation=null,this._updateDependenciesAfterPropagation&&this.updateDependencies()}}_pausePropagation(e){const t=new BP;for(t.push(e);this._currentPropagation.events.length;)t.push(this._currentPropagation.events.pop());this._currentPropagation.events=t,this._currentPropagation.currentHandler=null}_compareHandlerPriority(e,t){if(e.handler.hasSideEffects!==t.handler.hasSideEffects)return e.handler.hasSideEffects?1:-1;if(e.groupPriority!==t.groupPriority)return e.groupPriority>t.groupPriority?-1:1;for(const r of e.handler.incomingEventMatches)for(const i of t.handler.incomingEventMatches){if(r.eventType!==i.eventType)continue;const n=r.keyModifiers.filter(s=>i.keyModifiers.indexOf(s)!==-1);if(n.length===r.keyModifiers.length!=(n.length===i.keyModifiers.length))return r.keyModifiers.length>i.keyModifiers.length?-1:1}return e.priorityIndex>t.priorityIndex?-1:1}_sortHandlersPriority(e){const t=[];for(const r of e){let i=0;for(;i<t.length&&this._compareHandlerPriority(r,t[i])>=0;)i++;t.splice(i,0,r)}return t}get debug(){const e=t=>{const r=this._setPointerCapture;this._setPointerCapture=()=>{},t(),this._setPointerCapture=r};return{injectEvent:(t,r)=>{e(()=>{this._onEventReceived(t,r)})},disablePointerCapture:e}}};c([p({readOnly:!0})],Af.prototype,"hasPendingInputs",null),c([p()],Af.prototype,"eventSource",void 0),c([p()],Af.prototype,"recognizers",void 0),c([p({readOnly:!0})],Af.prototype,"latestPointerType",void 0),Af=c([N("esri.views.input.InputManager")],Af);class D5e{constructor(t,r,i,n,s){this.type=t,this.data=r,this.timestamp=i,this.modifiers=n,this.cancelable=s,this._propagationState=0,this._resumeCallback=null}stopPropagation(){this._propagationState|=1}shouldStopPropagation(){return(1&this._propagationState)!=0}async(t){this._propagationState|=2;const r=(i,n)=>{this._propagationState&=-3;const s=this._resumeCallback;if(this._resumeCallback=null,s&&s(),n)throw i;return i};return(typeof t=="function"?t():t).then(i=>r(i,!1),i=>r(i,!0))}shouldPausePropagation(t){return!!(2&this._propagationState)&&(this._resumeCallback=t,!0)}preventDefault(){this.data.native.preventDefault()}}const Qd={DEFAULT:0,TOOL:-1,WIDGET:-2,INTERNAL:-3};function F5e(e){return e&&typeof e.highlight=="function"}const U$={iconZoom:"esri-icon-zoom-in-magnifying-glass",iconTrash:"esri-icon-trash",iconBrowseClusteredFeatures:"esri-icon-table"},im=new Nv({id:"zoom-to-feature",title:"{messages.zoom}",className:U$.iconZoom}),GU=new Nv({id:"remove-selected-feature",title:"{messages.remove}",className:U$.iconTrash}),i0=new Nv({id:"zoom-to-clustered-features",title:"{messages.zoom}",className:U$.iconZoom}),n0=new Nv({id:"browse-clustered-features",title:"{messages.browseClusteredFeatures}",className:U$.iconBrowseClusteredFeatures}),j5e="esri.widgets.Popup.PopupViewModel",dp=Te.getLogger(j5e),V5e=function(e){const{event:t,view:r}=e,{action:i}=t,n=r&&r.popup;if(!i)return Promise.reject(new Z("trigger-action:missing-arguments","Event has no action"));if(!n)return Promise.reject(new Z("trigger-action:missing-arguments","view.popup is missing"));const{disabled:s,id:o}=i;if(!o)return Promise.reject(new Z("trigger-action:invalid-action","action.id is missing"));if(s)return Promise.reject(new Z("trigger-action:invalid-action","Action is disabled"));if(o===im.id)return z5e(n.viewModel).catch(OA);if(o===i0.id)return B5e(n.viewModel);if(o===n0.id)return n.featureMenuOpen=!n.featureMenuOpen,n.viewModel.browseClusterEnabled=!n.viewModel.browseClusterEnabled,Promise.resolve();if(n.viewModel.browseClusterEnabled=!1,o===GU.id){n.close();const{selectedFeature:a}=n;if(!a)return Promise.reject(new Z(`trigger-action:${GU.id}`,"selectedFeature is required",{selectedFeature:a}));const{sourceLayer:l}=a;return l?l.remove(a):r.graphics.remove(a),Promise.resolve()}return Promise.resolve()};function nte(e){const{selectedFeature:t,location:r,view:i}=e;return i?i.type==="3d"?t||r:e.get("selectedFeature.geometry")||r:null}function U5e(e,t){if(t?.type!=="3d"||!e||e.declaredClass!=="esri.Graphic")return!0;const r=t.getViewForGraphic(e);if(r&&"whenGraphicBounds"in r){let i=!1;return r.whenGraphicBounds(e,{useViewElevation:!0}).then(n=>{i=!n||!n.boundingBox||n.boundingBox[0]===n.boundingBox[3]&&n.boundingBox[1]===n.boundingBox[4]&&n.boundingBox[2]===n.boundingBox[5]}).catch(()=>{const n=new Z("zoom-to:invalid-graphic","Could not zoom to the location of the graphic.",{graphic:e});dp.error(n)}),i}return!0}async function z5e(e){const{location:t,selectedFeature:r,view:i,zoomFactor:n}=e,s=nte(e);if(!s){const u=new Z("zoom-to:invalid-target-or-view","Cannot zoom to location without a target and view.",{target:s,view:i});return dp.error(u),Promise.reject(u)}const o=i.scale/n,a=e.get("selectedFeature.geometry")||t,l=a&&a.type==="point"&&U5e(r,i);im.active=!0,im.disabled=!0;try{await e.view.goTo({target:s,scale:l?o:void 0})}finally{im.active=!1,im.disabled=!1,e.zoomToLocation=null,l&&(e.location=a)}}async function B5e(e){const{selectedFeature:t,view:r}=e;if(r?.type!=="2d"){const a=new Z("zoomToCluster:invalid-view","View must be 2d MapView.",{view:r});throw dp.error(a),a}if(!t.isAggregate){const a=new Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw dp.error(a),a}const i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],i0.active=!0,i0.disabled=!0;const{extent:o}=await n.queryExtent(s);await r.goTo({target:o}),i0.active=!1,i0.disabled=!1}async function G5e(e){const{selectedFeature:t,view:r}=e;if(r?.type!=="2d"){const a=new Z("displayClusterExtent:invalid-view","View must be 2d MapView.",{view:r});throw dp.error(a),a}if(!t.isAggregate){const a=new Z("zoomToCluster:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw dp.error(a),a}const i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()];const{extent:o}=await n.queryExtent(s);e.selectedClusterBoundaryFeature.geometry=o,r.graphics.add(e.selectedClusterBoundaryFeature)}async function q5e(e){const{selectedFeature:t,view:r}=e;if(r?.type!=="2d"){const a=new Z("browseAggregateFeatures:invalid-view","View must be 2d MapView.",{view:r});throw dp.error(a),a}if(!t.isAggregate){const a=new Z("browseAggregateFeatures:invalid-selectedFeature","Selected feature must represent an aggregate/cluster graphic.",{selectedFeature:t});throw dp.error(a),a}const i=t.sourceLayer,n=await r.whenLayerView(i),s=n.createQuery();s.aggregateIds=[t.getObjectId()],n0.active=!0,n0.disabled=!0;const{features:o}=await n.queryFeatures(s);n0.active=!1,n0.disabled=!1,r.popup.open({features:[t].concat(o),featureMenuOpen:!0})}function H5e(e){e.features=e.features.filter(t=>t.isAggregate)}const ste=e=>{let t=class extends e{constructor(...r){super(...r),this.goToOverride=null,this.view=null}callGoTo(r){const{view:i}=this;return this.goToOverride?this.goToOverride(i,r):i.goTo(r.target,r.options)}};return c([p()],t.prototype,"goToOverride",void 0),c([p()],t.prototype,"view",void 0),t=c([N("esri.widgets.support.GoTo")],t),t},Ow=Je.ofType({key:"type",defaultKeyValue:"button",base:QT,typeMap:{button:Nv,toggle:YJ}}),W5e=()=>[im.clone()],J5e=()=>[i0.clone(),n0.clone()],ote="esri.widgets.Popup.PopupViewModel",qU=Te.getLogger(ote);let Nt=class extends ste(tte){constructor(e){super(e),this._handles=new gi,this._pendingPromises=new Set,this._fetchFeaturesController=null,this._selectedClusterFeature=null,this.featurePage=null,this.actions=new Ow,this.defaultPopupTemplateEnabled=!1,this.autoCloseEnabled=!1,this.autoOpenEnabled=!0,this.browseClusterEnabled=!1,this.content=null,this.featuresPerPage=20,this.featureViewModelAbilities=null,this.featureViewModels=[],this.highlightEnabled=!0,this.includeDefaultActions=!0,this.selectedClusterBoundaryFeature=new xn({symbol:new Sp({outline:{width:1.5,color:"cyan"},style:"none"})}),this.title=null,this.updateLocationEnabled=!1,this.view=null,this.visible=!1,this.zoomFactor=4,this.zoomToLocation=null}get isLoadingFeature(){return this.featureViewModels.some(e=>e.waitingForContent)}initialize(){this._handles.add([It(this,["autoOpenEnabled","view"],()=>this._autoOpenEnabledChange()),this.on("view-change",()=>this._autoClose()),sr(this,["highlightEnabled","selectedFeature","visible","view"],()=>this._highlightFeature()),sr(this,"view.animation.state",e=>this._animationStateChange(e)),sr(this,"location",e=>this._locationChange(e)),sr(this,"selectedFeature",e=>this._selectedFeatureChange(e)),sr(this,["selectedFeatureIndex","featureCount","featuresPerPage"],()=>this._selectedFeatureIndexChange()),sr(this,["featurePage","selectedFeatureIndex","featureCount","featuresPerPage, featureViewModels"],()=>this._setGraphicOnFeatureViewModels()),sr(this,"featureViewModels",()=>this._featureViewModelsChange()),this.on("trigger-action",e=>V5e({event:e,view:this.view})),hO(this,"waitingForResult",()=>this._waitingForResultChange(),!0),sr(this,["features","view","view.map","view.spatialReference"],()=>this._updateFeatureVMs()),sr(this,["view.scale"],this._viewScaleChange),hO(this,"visible",()=>this.browseClusterEnabled=!1),sr(this,"browseClusterEnabled",e=>e?this.enableClusterBrowsing():this.disableClusterBrowsing())])}destroy(){this._cancelFetchingFeatures(),this._handles.destroy(),this._handles=null,this._pendingPromises.clear(),this.browseClusterEnabled=!1,this.view=null}get active(){return!(!this.visible||this.waitingForResult)}get allActions(){const e=this._get("allActions")||new Ow;e.removeAll();const{actions:t,defaultActions:r,defaultPopupTemplateEnabled:i,includeDefaultActions:n,selectedFeature:s}=this,o=n?r.concat(t):t,a=s&&(typeof s.getEffectivePopupTemplate=="function"&&s.getEffectivePopupTemplate(i)||s.popupTemplate),l=a&&a.actions,u=a&&a.overwriteActions?l:l?l.concat(o):o;return u&&u.filter(Boolean).forEach(h=>e.add(h)),e}get defaultActions(){var e;const t=this._get("defaultActions")||new Ow;return t.removeAll(),t.addMany((e=this.selectedFeature)!=null&&e.isAggregate?J5e():W5e()),t}get featureCount(){return this.features.length}get features(){return this._get("features")||[]}set features(e){const t=e||[];this._set("features",t);const{pendingPromisesCount:r,promiseCount:i,selectedFeatureIndex:n}=this,s=i&&t.length;s&&r&&n===-1?this.selectedFeatureIndex=0:s&&n!==-1||(this.selectedFeatureIndex=t.length?0:-1)}get location(){return this._get("location")||null}set location(e){const t=this.get("view.spatialReference.isWebMercator");e&&e.get("spatialReference.isWGS84")&&t&&(e=Jd(e)),this._set("location",e)}get pendingPromisesCount(){return this._pendingPromises.size}get waitingForResult(){return!(!(!!this._fetchFeaturesController||this.pendingPromisesCount>0)||this.featureCount!==0)}get promiseCount(){return this.promises.length}get promises(){return this._get("promises")||[]}set promises(e){if(this._pendingPromises.clear(),this.features=[],!Array.isArray(e)||!e.length)return this._set("promises",[]),void this.notifyChange("pendingPromisesCount");this._set("promises",e),(e=e.slice(0)).forEach(t=>{this._pendingPromises.add(t);const r=n=>{this._pendingPromises.has(t)&&this._updateFeatures(n),this._updatePendingPromises(t)},i=()=>this._updatePendingPromises(t);t.then(r,i)}),this.notifyChange("pendingPromisesCount")}get selectedFeature(){const{features:e,selectedFeatureIndex:t}=this;return t===-1?null:e[t]||null}get selectedFeatureIndex(){const e=this._get("selectedFeatureIndex");return typeof e=="number"?e:-1}set selectedFeatureIndex(e){const{featureCount:t}=this;e=isNaN(e)||e<-1||!t?-1:(e+t)%t,this._set("selectedFeatureIndex",e)}get selectedFeatureViewModel(){return this.featureViewModels[this.selectedFeatureIndex]||null}get state(){return this.get("view.ready")?"ready":"disabled"}centerAtLocation(){const{view:e}=this,t=nte(this);if(!t){const r=new Z("center-at-location:invalid-target-or-view","Cannot center at a location without a target and view.",{target:t,view:e});return qU.error(r),Promise.reject(r)}return this.callGoTo({target:{target:t,scale:e.scale}})}clear(){this.set({promises:[],features:[],content:null,title:null,location:null})}fetchFeatures(e,t){const{view:r}=this;if(!r||!e){const i=new Z("fetch-features:invalid-screenpoint-or-view","Cannot fetch features without a screenPoint and view.",{screenPoint:e,view:r});return qU.error(i),Promise.reject(i)}return r.fetchPopupFeatures(e,{event:t&&t.event,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,signal:t&&t.signal})}open(e){const t={updateLocationEnabled:!1,promises:[],fetchFeatures:!1,...e,visible:!0},{fetchFeatures:r}=t;delete t.fetchFeatures,r&&this._setFetchFeaturesPromises(t.location),this.set(t)}triggerAction(e){const t=this.allActions.getItemAt(e);t&&!t.disabled&&this.emit("trigger-action",{action:t})}next(){return this.selectedFeatureIndex=this.selectedFeatureIndex+1,this}previous(){return this.selectedFeatureIndex=this.selectedFeatureIndex-1,this}disableClusterBrowsing(){H5e(this),this._clearBrowsedClusterGraphics()}async enableClusterBrowsing(){await G5e(this),await q5e(this)}_animationStateChange(e){this.zoomToLocation||(im.disabled=e==="waiting-for-target")}_clearBrowsedClusterGraphics(){var e;const t=(e=this.view)==null?void 0:e.graphics;t&&(t.remove(this.selectedClusterBoundaryFeature),t.remove(this._selectedClusterFeature)),this._selectedClusterFeature=null,this.selectedClusterBoundaryFeature.geometry=null}_viewScaleChange(){var e;((e=this.selectedFeature)!=null&&e.isAggregate||this.browseClusterEnabled)&&(this.browseClusterEnabled=!1,this.visible=!1)}_locationChange(e){const{selectedFeature:t,updateLocationEnabled:r}=this;r&&e&&(!t||t.geometry)&&this.centerAtLocation()}_selectedFeatureIndexChange(){this.featurePage=this.featureCount>1?Math.floor(this.selectedFeatureIndex/this.featuresPerPage)+1:null}_featureViewModelsChange(){this.featurePage=this.featureCount>1?1:null}_setGraphicOnFeatureViewModels(){const{features:e,featureCount:t,featurePage:r,featuresPerPage:i,featureViewModels:n}=this;if(r===null)return;const s=((r-1)*i+t)%t,o=s+i;n.slice(s,o).forEach((a,l)=>{a&&!a.graphic&&(a.graphic=e[s+l])})}async _selectedFeatureChange(e){if(!e)return;const{location:t,updateLocationEnabled:r,view:i}=this;if(this.browseClusterEnabled)return this._selectedClusterFeature&&(i.graphics.remove(this._selectedClusterFeature),this._selectedClusterFeature=null),e.isAggregate?void 0:(e.symbol=await A5e(e),this._selectedClusterFeature=e,void i.graphics.add(this._selectedClusterFeature));!r&&t||!e.geometry?r&&!e.geometry&&this.centerAtLocation().then(()=>{this.location=i.center.clone()}):this.location=this._getPointFromGeometry(e.geometry)}_waitingForResultChange(){!this.featureCount&&this.promises&&(this.visible=!1)}_setFetchFeaturesPromises(e){return this._fetchFeaturesWithController(this._getScreenPoint(e||this.location)).then(t=>{const{clientOnlyGraphics:r,promisesPerLayerView:i}=t,n=Promise.resolve(r),s=i.map(o=>o.promise);this.promises=[n,...s]})}_destroyFeatureVMs(){this.featureViewModels.forEach(e=>e&&!e.destroyed&&e.destroy()),this._set("featureViewModels",[])}_updateFeatureVMs(){const{selectedFeature:e,features:t,featureViewModels:r}=this;if(e!=null&&e.isAggregate||(this.browseClusterEnabled=!1),this._destroyFeatureVMs(),!t||!t.length)return;const i=r.slice(0),n=[];t.forEach((s,o)=>{if(!s)return;let a=null;if(i.some((h,d)=>(h&&h.graphic===s&&(a=h,i.splice(d,1)),!!a)),a)n[o]=a;else{var l,u;const h=new e8({abilities:this.featureViewModelAbilities,defaultPopupTemplateEnabled:this.defaultPopupTemplateEnabled,spatialReference:(l=this.view)==null?void 0:l.spatialReference,graphic:s===e?s:null,map:(u=this.view)==null?void 0:u.map,view:this.view});n[o]=h}}),i.forEach(s=>s&&!s.destroyed&&s.destroy()),this._set("featureViewModels",n)}_getScreenPoint(e){const{view:t}=this;return t&&e&&typeof t.toScreen=="function"?t.toScreen(e):null}_autoOpenEnabledChange(){const e="auto-fetch-features",{_handles:t,autoOpenEnabled:r}=this;if(t.remove(e),r&&this.view){const i=this.view.on("click",n=>{n.pointerType==="mouse"&&n.button!==0||this._fetchFeaturesAndOpen(n)},Qd.WIDGET);t.add(i,e)}}_cancelFetchingFeatures(){const e=this._fetchFeaturesController;e&&e.abort(),this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}_fetchFeaturesWithController(e,t){this._cancelFetchingFeatures();const r=new AbortController,{signal:i}=r;this._fetchFeaturesController=r,this.notifyChange("waitingForResult");const n=this.fetchFeatures(e,{signal:i,event:t});return n.catch(()=>{}).then(()=>{this._fetchFeaturesController=null,this.notifyChange("waitingForResult")}),n}_fetchFeaturesAndOpen(e){const{screenPoint:t,mapPoint:r}=e,{view:i}=this;this._fetchFeaturesWithController(t,e).then(n=>{const{clientOnlyGraphics:s,promisesPerLayerView:o,location:a}=n,l=[Promise.resolve(s),...o.map(u=>u.promise)];return i.popup.open({location:a||r,promises:l}),n})}_updatePendingPromises(e){e&&this._pendingPromises.has(e)&&(this._pendingPromises.delete(e),this.notifyChange("pendingPromisesCount"))}_autoClose(){this.autoCloseEnabled&&(this.visible=!1)}_getPointFromGeometry(e){return ce(e)?null:e.type==="point"?e:e.type==="extent"?e.center:e.type==="polygon"?e.centroid:e.type==="multipoint"||e.type==="polyline"?e.extent.center:null}async _getLayerView(e,t){return await e.when(),e.whenLayerView(t)}async _highlightFeature(){const e="highlight";this._handles.remove(e);const{selectedFeature:t,highlightEnabled:r,view:i,visible:n}=this;if(!(t&&i&&r&&n))return;let{layer:s,sourceLayer:o}=t;if(o?.type!=="map-notes"&&o?.type!=="subtype-group"||(s=o),!(s&&s instanceof Sh))return;const a=this._getLayerView(i,s);this._highlightPromise=a;const l=await a;if(!(l&&F5e(l)&&this._highlightPromise===a&&this.selectedFeature&&this.highlightEnabled&&this.visible))return;const u="objectIdField"in s&&s.objectIdField,h=t.attributes,d=h&&u&&h[u],f=l.highlight(d||t);this._handles.add(f,e)}_updateFeatures(e){const{features:t}=this;if(!e||!e.length)return;if(!t.length)return void(this.features=e);const r=e.filter(i=>t.indexOf(i)===-1);this.features=t.concat(r)}};c([p()],Nt.prototype,"featurePage",void 0),c([p()],Nt.prototype,"isLoadingFeature",null),c([p({type:Ow})],Nt.prototype,"actions",void 0),c([p({readOnly:!0})],Nt.prototype,"active",null),c([p({readOnly:!0})],Nt.prototype,"allActions",null),c([p({type:Boolean})],Nt.prototype,"defaultPopupTemplateEnabled",void 0),c([p()],Nt.prototype,"autoCloseEnabled",void 0),c([p()],Nt.prototype,"autoOpenEnabled",void 0),c([p()],Nt.prototype,"browseClusterEnabled",void 0),c([p()],Nt.prototype,"content",void 0),c([p({type:Ow,readOnly:!0})],Nt.prototype,"defaultActions",null),c([p({readOnly:!0})],Nt.prototype,"featureCount",null),c([p()],Nt.prototype,"features",null),c([p()],Nt.prototype,"featuresPerPage",void 0),c([p()],Nt.prototype,"featureViewModelAbilities",void 0),c([p({readOnly:!0})],Nt.prototype,"featureViewModels",void 0),c([p()],Nt.prototype,"highlightEnabled",void 0),c([p()],Nt.prototype,"includeDefaultActions",void 0),c([p({type:Ke})],Nt.prototype,"location",null),c([p({readOnly:!0})],Nt.prototype,"pendingPromisesCount",null),c([p({readOnly:!0})],Nt.prototype,"selectedClusterBoundaryFeature",void 0),c([p({readOnly:!0})],Nt.prototype,"waitingForResult",null),c([p({readOnly:!0})],Nt.prototype,"promiseCount",null),c([p()],Nt.prototype,"promises",null),c([p({value:null,readOnly:!0})],Nt.prototype,"selectedFeature",null),c([p({value:-1})],Nt.prototype,"selectedFeatureIndex",null),c([p({readOnly:!0})],Nt.prototype,"selectedFeatureViewModel",null),c([p({readOnly:!0})],Nt.prototype,"state",null),c([p()],Nt.prototype,"title",void 0),c([p()],Nt.prototype,"updateLocationEnabled",void 0),c([p()],Nt.prototype,"view",void 0),c([p()],Nt.prototype,"visible",void 0),c([p()],Nt.prototype,"zoomFactor",void 0),c([p()],Nt.prototype,"zoomToLocation",void 0),c([p()],Nt.prototype,"centerAtLocation",null),Nt=c([N(ote)],Nt);const ate=Nt,HU="selected-index",Z5e=0,WU="popup-spinner",$e={iconLeftTriangleArrow:"esri-icon-left-triangle-arrow",iconRightTriangleArrow:"esri-icon-right-triangle-arrow",iconDockToTop:"esri-icon-maximize",iconDockToBottom:"esri-icon-dock-bottom",iconDockToLeft:"esri-icon-dock-left",iconDockToRight:"esri-icon-dock-right",iconClose:"esri-icon-close",iconUndock:"esri-icon-minimize",iconCheckMark:"esri-icon-check-mark",iconLoading:"esri-icon-loading-indicator",iconDefaultAction:"esri-icon-default-action",iconActionsMenu:"esri-icon-handle-horizontal",rotating:"esri-rotating",base:"esri-popup",widget:"esri-widget",main:"esri-popup__main-container",loadingContainer:"esri-popup__loading-container",isCollapsible:"esri-popup--is-collapsible",isCollapsed:"esri-popup--is-collapsed",shadow:"esri-popup--shadow",isDocked:"esri-popup--is-docked",isDockedTopLeft:"esri-popup--is-docked-top-left",isDockedTopCenter:"esri-popup--is-docked-top-center",isDockedTopRight:"esri-popup--is-docked-top-right",isDockedBottomLeft:"esri-popup--is-docked-bottom-left",isDockedBottomCenter:"esri-popup--is-docked-bottom-center",isDockedBottomRight:"esri-popup--is-docked-bottom-right",alignTopCenter:"esri-popup--aligned-top-center",alignBottomCenter:"esri-popup--aligned-bottom-center",alignTopLeft:"esri-popup--aligned-top-left",alignBottomLeft:"esri-popup--aligned-bottom-left",alignTopRight:"esri-popup--aligned-top-right",alignBottomRight:"esri-popup--aligned-bottom-right",isFeatureMenuOpen:"esri-popup--feature-menu-open",isActionsMenuOpen:"esri-popup--actions-menu-open",hasFeatureUpdated:"esri-popup--feature-updated",header:"esri-popup__header",headerButtons:"esri-popup__header-buttons",headerContainer:"esri-popup__header-container",headerContainerButton:"esri-popup__header-container--button",headerTitle:"esri-popup__header-title",content:"esri-popup__content",footer:"esri-popup__footer",footerHasPagination:"esri-popup__footer--has-pagination",footerHasActions:"esri-popup__footer--has-actions",footerHasActionsMenu:"esri-popup__footer--has-actions-menu",button:"esri-popup__button",buttonDisabled:"esri-popup__button--disabled",buttonDock:"esri-popup__button--dock",icon:"esri-popup__icon",iconDock:"esri-popup__icon--dock-icon",inlineActionsContainer:"esri-popup__inline-actions-container",actionsMenuButton:"esri-popup__actions-menu-button",actions:"esri-popup__actions",action:"esri-popup__action",actionImage:"esri-popup__action-image",actionText:"esri-popup__action-text",actionToggle:"esri-popup__action-toggle",actionToggleOn:"esri-popup__action-toggle--on",pointer:"esri-popup__pointer",pointerDirection:"esri-popup__pointer-direction",navigation:"esri-popup__navigation",paginationPrevious:"esri-popup__pagination-previous",paginationNext:"esri-popup__pagination-next",paginationPreviousIconLTR:"esri-popup__pagination-previous-icon",paginationPreviousIconRTL:"esri-popup__pagination-previous-icon--rtl",paginationNextIconLTR:"esri-popup__pagination-next-icon",paginationNextIconRTL:"esri-popup__pagination-next-icon--rtl",featureMenu:"esri-popup__feature-menu",featureMenuList:"esri-popup__feature-menu-list",featureMenuItem:"esri-popup__feature-menu-item",featureMenuViewport:"esri-popup__feature-menu-viewport",featureMenuHeader:"esri-popup__feature-menu-header",featureMenuNote:"esri-popup__feature-menu-note",featureMenuSelected:"esri-popup__feature-menu-item--selected",featureMenuButton:"esri-popup__feature-menu-button",featureMenuTitle:"esri-popup__feature-menu-title",featureMenuObserver:"esri-popup__feature-menu-observer",featureMenuLoader:"esri-popup__feature-menu-loader",collapseButton:"esri-popup__collapse-button"},JU={buttonEnabled:!0,position:"auto",breakpoint:{width:544}},ZU="esri-popup";function nc(e,t){return t===void 0?`${ZU}__${e}`:`${ZU}__${e}-${t}`}const lte="esri.widgets.Popup",YU=Te.getLogger(lte),KU={closeButton:!0,featureNavigation:!0};let rt=class extends ete(Tn){constructor(e,t){super(e,t),this._blurClose=!1,this._blurContainer=!1,this._containerNode=null,this._mainContainerNode=null,this._featureMenuNode=null,this._actionsMenuNode=null,this._focusClose=!1,this._focusContainer=!1,this._focusDockButton=!1,this._focusFeatureMenuButton=!1,this._focusActionsMenuButton=!1,this._focusFirstFeature=!1,this._focusFirstAction=!1,this._handles=new gi,this._pointerOffsetInPx=16,this._spinner=null,this._feature=null,this._featureMenuIntersectionObserverCallback=([r])=>{r!=null&&r.isIntersecting&&this.viewModel.featurePage++},this._featureMenuIntersectionObserver=new IntersectionObserver(this._featureMenuIntersectionObserverCallback,{root:window.document}),this._displaySpinnerThrottled=E6(()=>this._displaySpinner(),Z5e),this.actions=null,this.alignment="auto",this.autoCloseEnabled=null,this.autoOpenEnabled=null,this.defaultPopupTemplateEnabled=null,this.content=null,this.collapsed=!1,this.collapseEnabled=!0,this.dockEnabled=!1,this.featureCount=null,this.featureMenuOpen=!1,this.features=null,this.goToOverride=null,this.headingLevel=2,this.highlightEnabled=null,this.location=null,this.label=void 0,this.maxInlineActions=3,this.messages=null,this.messagesCommon=null,this.promises=null,this.selectedFeature=null,this.selectedFeatureIndex=null,this.spinnerEnabled=!0,this.title=null,this.updateLocationEnabled=null,this.view=null,this.viewModel=new ate,this.visible=null,this.visibleElements={...KU},this._addSelectedFeatureIndexHandle(),this.own([sr(this,"viewModel.screenLocation",()=>this._positionContainer()),sr(this,["viewModel.active","dockEnabled"],()=>this._toggleScreenLocationEnabled()),sr(this,"viewModel.screenLocation",(r,i)=>{!!r!=!!i&&this.reposition()}),sr(this,["viewModel.view.padding","viewModel.view.size","viewModel.active","viewModel.location","alignment"],()=>this.reposition()),sr(this,"spinnerEnabled",r=>this._spinnerEnabledChange(r)),sr(this,"viewModel.view.size",(r,i)=>this._updateDockEnabledForViewSize(r,i)),sr(this,"viewModel.view",(r,i)=>this._viewChange(r,i)),sr(this,"viewModel.view.ready",(r,i)=>this._viewReadyChange(r,i)),sr(this,["viewModel.waitingForResult","viewModel.location"],()=>{this._hideSpinner(),this._displaySpinnerThrottled()}),sr(this,["selectedFeatureWidget.viewModel.title","selectedFeatureWidget.viewModel.state"],()=>this._setTitleFromFeatureWidget()),sr(this,["selectedFeatureWidget.viewModel.content","selectedFeatureWidget.viewModel.state"],()=>this._setContentFromFeatureWidget()),hO(this,"collapsed",()=>{var r,i;((r=this.viewModel)==null||(i=r.view)==null?void 0:i.widthBreakpoint)==="xsmall"&&this.viewModel.active&&this.collapseEnabled&&this.viewModel.centerAtLocation()}),yh(this,"viewModel.allActions","change",()=>this._watchActions()),It(this,"viewModel.allActions",()=>this._watchActions()),sr(this,"viewModel.featureViewModels",()=>this._featureMenuViewportScrollTop())])}destroy(){var e,t;this._destroySelectedFeatureWidget(),this._destroySpinner(),(e=this._handles)==null||e.destroy(),this._unobserveFeatureMenuObserver(),(t=this._featureMenuIntersectionObserver)==null||t.disconnect(),this._handles=null}get actionsMenuId(){return`${this.id}-actions-menu`}get actionsMenuButtonId(){return`${this.id}-actions-menu-button`}get featureMenuId(){return`${this.id}-feature-menu`}get titleId(){return`${this.id}-popup-title`}get contentId(){return`${this.id}-popup-content`}get hasContent(){var e,t,r,i,n,s,o;return!!(this.selectedFeatureWidget?((e=this.selectedFeatureWidget)==null||(t=e.viewModel)==null?void 0:t.waitingForContent)||((r=this.selectedFeatureWidget)==null||(i=r.viewModel)==null?void 0:i.state)==="error"||((n=this.selectedFeatureWidget)==null||(s=n.viewModel)==null?void 0:s.content):(o=this.viewModel)==null?void 0:o.content)}get featureNavigationVisible(){return this.viewModel.active&&this.viewModel.featureCount>1&&this.visibleElements.featureNavigation}get collapsible(){return!!(this.collapseEnabled&&this.viewModel.title&&this.hasContent)}get featureMenuVisible(){return this.featureNavigationVisible&&this.featureMenuOpen}get contentCollapsed(){return this.collapsible&&!this.featureMenuVisible&&this.collapsed}get dividedActions(){return this._divideActions()}set actionsMenuOpen(e){this._set("actionsMenuOpen",!!e)}get actionsMenuOpen(){return!!this.viewModel.active&&this._get("actionsMenuOpen")}get currentAlignment(){return this._getCurrentAlignment()}get currentDockPosition(){return this._getCurrentDockPosition()}get dockOptions(){return this._get("dockOptions")||JU}set dockOptions(e){const t={...JU},r=this.get("viewModel.view.breakpoints"),i={};r&&(i.width=r.xsmall,i.height=r.xsmall);const n={...t,...e},s={...t.breakpoint,...i},{breakpoint:o}=n;o===!0?n.breakpoint=s:typeof o=="object"&&(n.breakpoint={...s,...o}),this._set("dockOptions",n),this._setCurrentDockPosition(),this.reposition()}get selectedFeatureWidget(){const{_feature:e,visibleElements:t,headingLevel:r}=this,{selectedFeatureViewModel:i}=this.viewModel,n={...t,title:!1};return i?(e?(e.viewModel=i,e.visibleElements=n):this._feature=new T5e({headingLevel:r+1,viewModel:i,visibleElements:n}),this._feature):null}castVisibleElements(e){return{...KU,...e}}blur(){const{active:e}=this.viewModel;e||YU.warn("Popup can only be blurred when currently active."),this.visibleElements.closeButton?this._blurClose=!0:this._blurContainer=!0,this.scheduleRender()}clear(){this.viewModel.clear()}close(){this.visible=!1}fetchFeatures(e,t){return this.viewModel.fetchFeatures(e,t)}focus(){const{active:e}=this.viewModel;e||YU.warn("Popup can only be focused when currently active."),this.visibleElements.closeButton?this._focusClose=!0:this._focusContainer=!0,this.scheduleRender()}next(){return this.viewModel.next()}open(e){var t,r;this._handles.remove(HU);const i=!!e&&!!e.featureMenuOpen,n=!!e&&!!e.actionsMenuOpen,s={collapsed:!!e&&!!e.collapsed,actionsMenuOpen:n,featureMenuOpen:i};((t=this.viewModel)==null||(r=t.view)==null?void 0:r.widthBreakpoint)==="xsmall"&&(s.collapsed=!0),this.set(s),this.viewModel.open(e),this._addSelectedFeatureIndexHandle()}previous(){return this.viewModel.previous()}reposition(){this.renderNow(),this._positionContainer(),this._setCurrentAlignment()}triggerAction(e){this.viewModel.triggerAction(e)}render(){var e,t,r,i;const{actionsMenuOpen:n,dockEnabled:s,featureMenuVisible:o,dividedActions:a,currentAlignment:l,currentDockPosition:u}=this,{active:h}=this.viewModel,{menuActions:d}=a,f=h&&d.length>1&&n,m=h&&s,g=h&&!s,b=(e=this.selectedFeature)==null||(t=e.layer)==null?void 0:t.title,w=(r=this.selectedFeature)==null||(i=r.layer)==null?void 0:i.id,_={[$e.alignTopCenter]:l==="top-center",[$e.alignBottomCenter]:l==="bottom-center",[$e.alignTopLeft]:l==="top-left",[$e.alignBottomLeft]:l==="bottom-left",[$e.alignTopRight]:l==="top-right",[$e.alignBottomRight]:l==="bottom-right",[$e.isDocked]:m,[$e.shadow]:g,[$e.isDockedTopLeft]:u==="top-left",[$e.isDockedTopCenter]:u==="top-center",[$e.isDockedTopRight]:u==="top-right",[$e.isDockedBottomLeft]:u==="bottom-left",[$e.isDockedBottomCenter]:u==="bottom-center",[$e.isDockedBottomRight]:u==="bottom-right",[$e.isFeatureMenuOpen]:o,[$e.isActionsMenuOpen]:f};return oe("div",{class:this.classes($e.base,_),role:"presentation","data-layer-title":b,"data-layer-id":w,bind:this,afterCreate:this._positionContainer,afterUpdate:this._positionContainer},h?[this.renderMainContainer(),this.renderPointer()]:null)}renderLoadingIcon(){return oe("span",{"aria-hidden":"true",class:this.classes($e.icon,$e.iconLoading,$e.rotating)})}renderNavigationLoading(){const{messagesCommon:e}=this;return this.viewModel.pendingPromisesCount?oe("div",{key:nc("loading-container"),role:"presentation",class:$e.loadingContainer,"aria-label":e.loading,title:e.loading},this.renderLoadingIcon()):null}renderPreviousIcon(){const e=jd(this.container),t={[$e.iconRightTriangleArrow]:e,[$e.paginationPreviousIconRTL]:e,[$e.iconLeftTriangleArrow]:!e,[$e.paginationPreviousIconLTR]:!e};return oe("span",{"aria-hidden":"true",class:this.classes($e.icon,t)})}renderPreviousButton(){const{messages:e}=this;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._previous,onkeydown:this._previous,class:this.classes($e.button,$e.paginationPrevious),"aria-label":e.previous,title:e.previous},this.renderPreviousIcon())}renderNextIcon(){const e=jd(this.container),t={[$e.iconLeftTriangleArrow]:e,[$e.paginationNextIconRTL]:e,[$e.iconRightTriangleArrow]:!e,[$e.paginationNextIconLTR]:!e};return oe("span",{"aria-hidden":"true",class:this.classes($e.icon,t)})}renderNextButton(){const{messages:e}=this;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._next,onkeydown:this._next,class:this.classes($e.button,$e.paginationNext),"aria-label":e.next,title:e.next},this.renderNextIcon())}renderFeatureMenuButton(){const{featureMenuOpen:e,featureMenuId:t,messagesCommon:r}=this,{featureCount:i,selectedFeatureIndex:n}=this.viewModel;return oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._toggleFeatureMenu,onkeydown:this._toggleFeatureMenu,afterCreate:this._focusFeatureMenuButtonNode,afterUpdate:this._focusFeatureMenuButtonNode,class:this.classes($e.button,$e.featureMenuButton),"aria-haspopup":"true","aria-controls":t,"aria-expanded":e.toString(),"aria-label":r.menu,title:r.menu},this._getPageText(i,n))}renderNavigationButtons(){return this.featureNavigationVisible?[this.renderPreviousButton(),this.renderNavigationLoading()||this.renderFeatureMenuButton(),this.renderNextButton()]:null}renderDockIcon(){const{dockEnabled:e}=this,t=this._wouldDockTo(),r={[$e.iconUndock]:e,[$e.iconDock]:!e,[$e.iconDockToRight]:!e&&(t==="top-right"||t==="bottom-right"),[$e.iconDockToLeft]:!e&&(t==="top-left"||t==="bottom-left"),[$e.iconDockToTop]:!e&&t==="top-center",[$e.iconDockToBottom]:!e&&t==="bottom-center"};return oe("span",{"aria-hidden":"true",class:this.classes(r,$e.icon)})}renderDockButton(){var e,t,r;const{dockEnabled:i,messages:n}=this,s=(e=this.viewModel)==null||(t=e.view)==null?void 0:t.widthBreakpoint,o=i?n.undock:n.dock;return s!=="xsmall"&&(r=this.dockOptions)!=null&&r.buttonEnabled?oe("div",{role:"button","aria-label":o,title:o,tabIndex:0,bind:this,onclick:this._toggleDockEnabled,onkeydown:this._toggleDockEnabled,afterCreate:this._focusDockButtonNode,afterUpdate:this._focusDockButtonNode,class:this.classes($e.button,$e.buttonDock)},this.renderDockIcon()):null}renderTitle(){const{title:e}=this.viewModel,{titleId:t,collapsible:r,contentCollapsed:i,messagesCommon:n}=this,s={[$e.headerContainerButton]:r},o=oe(R$,{level:this.headingLevel,class:$e.headerTitle,innerHTML:e}),a=r?oe("button",{key:`${e}--collapsible`,id:t,title:i?n.expand:n.collapse,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes($e.headerContainer,s),"aria-expanded":i?"false":"true",onclick:this._toggleCollapsed},o):oe("div",{key:e,id:t,bind:this,enterAnimation:this._createFeatureUpdatedAnimation(),class:this.classes($e.headerContainer,s)},o);return e?a:null}renderCloseIcon(){return oe("span",{"aria-hidden":"true",class:this.classes($e.icon,$e.iconClose)})}renderCloseButton(){const{visibleElements:e,messagesCommon:t}=this;return e.closeButton?oe("div",{role:"button",tabIndex:0,bind:this,onclick:this._close,onkeydown:this._close,class:$e.button,"aria-label":t.close,title:t.close,afterCreate:this._closeButtonNodeUpdated,afterUpdate:this._closeButtonNodeUpdated},this.renderCloseIcon()):null}renderHeader(){return oe("header",{class:$e.header},this.renderTitle(),oe("div",{class:$e.headerButtons},this.renderDockButton(),this.renderCloseButton()))}renderContentContainer(){const{contentId:e,hasContent:t,contentCollapsed:r}=this,{content:i}=this.viewModel;return t&&!r?oe("article",{key:i,enterAnimation:this._createFeatureUpdatedAnimation(),id:e,class:$e.content},this.renderContent()):null}renderActionsMenuButton(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i,messagesCommon:n}=this,s=r?n.close:n.open,{menuActions:o}=i;return o.length?oe("div",{key:nc("actions-menu-button"),class:this.classes($e.button,$e.actionsMenuButton),role:"button",id:t,"aria-haspopup":"true","aria-controls":r?e:null,tabIndex:0,bind:this,onclick:this._toggleActionsMenu,onkeydown:this._toggleActionsMenu,afterCreate:this._focusActionsMenuButtonNode,afterUpdate:this._focusActionsMenuButtonNode,"aria-label":s,title:s},oe("span",{"aria-hidden":"true",class:$e.iconActionsMenu})):null}renderMenuActions(){const{actionsMenuId:e,actionsMenuButtonId:t,actionsMenuOpen:r,dividedActions:i}=this,{menuActions:n}=i;return n.length&&r?oe("ul",{id:e,role:"menu","aria-labelledby":t,key:nc("actions"),class:$e.actions,bind:this,onkeyup:this._handleActionMenuKeyup,afterCreate:this._actionsMenuNodeUpdated,afterUpdate:this._actionsMenuNodeUpdated},n.toArray().map(s=>this.renderAction({action:s,type:"menu-item"}))):null}renderInlineActions(){const{inlineActions:e}=this.dividedActions;return!!e.length&&e.toArray().map(t=>this.renderAction({action:t,type:"inline"}))}renderInlineActionsContainer(){const{inlineActions:e,menuActions:t}=this.dividedActions,r=!!e.length,i=!!t.length;return r||i?oe("div",{key:"inline-actions-container","data-inline-actions":r.toString(),"data-menu-actions":i.toString(),class:$e.inlineActionsContainer},this.renderInlineActions(),this.renderActionsMenuButton(),this.renderMenuActions()):null}renderNavigation(){return this.featureNavigationVisible?oe("section",{key:nc("navigation"),class:this.classes($e.navigation)},this.renderNavigationButtons()):null}renderFooter(){const{featureNavigationVisible:e,dividedActions:t}=this,{inlineActions:r,menuActions:i}=t,n=!!r.length,s=!!i.length,o={[$e.footerHasPagination]:e,[$e.footerHasActions]:n,[$e.footerHasActionsMenu]:s};return e||n?oe("div",{key:nc("feature-buttons"),class:this.classes($e.footer,o)},this.renderInlineActionsContainer(),this.renderNavigation()):null}renderFeatureMenuContainer(){const{messages:e}=this,{featureViewModels:t,isLoadingFeature:r}=this.viewModel,i=_c(e.selectedFeatures,{total:t.length});return oe("section",{key:nc("menu"),class:$e.featureMenu},oe("strong",{class:$e.featureMenuHeader},i),oe("nav",{bind:this,class:$e.featureMenuViewport,"data-node-ref":"_featureMenuViewportNode",afterCreate:TP},this.renderFeatureMenu(),oe("div",{class:$e.featureMenuObserver,bind:this,afterCreate:this._featureMenuIntersectionObserverCreated}),r?oe("div",{class:$e.featureMenuLoader},this.renderLoadingIcon()):null))}renderPointer(){return this.dockEnabled?null:oe("div",{key:nc("pointer"),class:$e.pointer,role:"presentation"},oe("div",{class:this.classes($e.pointerDirection,$e.shadow)}))}renderMainContainer(){const{dockEnabled:e,currentAlignment:t,currentDockPosition:r,titleId:i,contentId:n,collapsible:s,hasContent:o,contentCollapsed:a,visibleElements:l}=this,{title:u}=this.viewModel,h=t==="bottom-left"||t==="bottom-center"||t==="bottom-right"||r==="top-left"||r==="top-center"||r==="top-right",d=t==="top-left"||t==="top-center"||t==="top-right"||r==="bottom-left"||r==="bottom-center"||r==="bottom-right",f={[$e.shadow]:e,[$e.isCollapsible]:s,[$e.isCollapsed]:a};return oe("div",{class:this.classes($e.main,$e.widget,f),tabIndex:l.closeButton?null:-1,role:"dialog","aria-labelledby":u?i:"","aria-describedby":o&&!a?n:"",bind:this,onkeyup:this._handleMainKeyup,afterCreate:this._mainContainerNodeUpdated,afterUpdate:this._mainContainerNodeUpdated},h?this.renderFooter():null,h?this.renderFeatureMenuContainer():null,this.renderHeader(),this.renderContentContainer(),d?this.renderFooter():null,d?this.renderFeatureMenuContainer():null)}renderContent(){var e;const t=(e=this.viewModel)==null?void 0:e.content;return t?typeof t=="string"?oe("div",{key:t,innerHTML:t}):this.renderNodeContent(t):null}renderActionText(e){return oe("span",{key:"text",class:$e.actionText},e)}renderActionIcon(e){const t=this._getActionClass(e),r=this._getActionImage(e),i={[$e.iconLoading]:e.active,[$e.rotating]:e.active,[$e.icon]:!!t,[$e.actionImage]:!e.active&&!!r};return t&&(i[t]=!e.active),oe("span",{key:"icon","aria-hidden":"true",class:this.classes($e.icon,i),styles:this._getIconStyles(r)})}renderAction(e){const{action:t,type:r}=e,i=this._getActionTitle(t),n={[$e.action]:t.type!=="toggle",[$e.actionToggle]:t.type==="toggle",[$e.actionToggleOn]:t.type==="toggle"&&t.value,[$e.buttonDisabled]:t.disabled},s=[this.renderActionIcon(t),this.renderActionText(i)],o=r==="menu-item"?oe("li",{key:t.uid,role:"menuitem",tabIndex:0,title:i,"aria-label":i,class:this.classes($e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s):oe("div",{key:t.uid,role:"button",tabIndex:0,title:i,"aria-label":i,class:this.classes($e.button,n),onkeyup:this._handleActionMenuItemKeyup,bind:this,"data-action-uid":t.uid,onclick:this._triggerAction,onkeydown:this._triggerAction},s);return t.visible?o:null}renderFeatureMenuItem(e,t){const{messages:r,messagesCommon:i}=this,{selectedFeatureIndex:n,selectedFeatureViewModel:s}=this.viewModel,o=e===s,a={[$e.featureMenuSelected]:o},l=o?oe("span",{key:nc(`feature-menu-selected-feature-${n}`),title:r.selectedFeature,"aria-label":r.selectedFeature,class:$e.iconCheckMark}):null,u=oe("span",{innerHTML:e.title||i.untitled});return oe("li",{role:"menuitem",tabIndex:-1,key:nc(`feature-menu-feature-${n}`),class:this.classes(a,$e.featureMenuItem),bind:this,"data-feature-index":t,onkeyup:this._handleFeatureMenuItemKeyup,onclick:this._selectFeature,onkeydown:this._selectFeature},oe("span",{class:$e.featureMenuTitle},u,l))}renderFeatureMenu(){const{featureMenuId:e}=this,{featureViewModels:t}=this.viewModel;return t.length>1?oe("ol",{class:$e.featureMenuList,id:e,bind:this,afterCreate:this._featureMenuNodeUpdated,afterUpdate:this._featureMenuNodeUpdated,onkeyup:this._handleFeatureMenuKeyup,role:"menu"},t.filter(r=>!!r.graphic).map((r,i)=>this.renderFeatureMenuItem(r,i))):null}_getActionTitle(e){const{messages:t,selectedFeature:r,messagesCommon:i}=this,{id:n}=e,s=r?.attributes,o=n==="zoom-to-feature"?_c(e.title,{messages:t}):n==="remove-selected-feature"?_c(e.title,{messages:i}):n==="zoom-to-clustered-features"||n==="browse-clustered-features"?_c(e.title,{messages:t}):e.title;return o&&s?_c(o,s):o}_getActionClass(e){const{selectedFeature:t}=this,r=t?.attributes,{className:i,image:n}=e,s=n||i?i:$e.iconDefaultAction;return s&&r?_c(s,r):s}_getActionImage(e){const{selectedFeature:t}=this,r=t?.attributes,{image:i}=e;return i&&r?_c(i,r):i}_createFeatureUpdatedAnimation(){return H3e("enter",$e.hasFeatureUpdated)}_getInlineActionCount(){const{maxInlineActions:e,featureNavigationVisible:t}=this;if(typeof e!="number")return null;const r=Math.round(e);return Math.max(t?r-1:r,0)}_watchActions(){const{allActions:e}=this.viewModel;this.notifyChange("dividedActions");const t="actions";this._handles.remove(t),e&&e.forEach(r=>{this._handles.add(sr(r,["uid","active","className","disabled","id","title","image","visible"],()=>this.scheduleRender()),t)})}_divideActions(){const{allActions:e}=this.viewModel,t=e.filter(s=>s.visible),r=this._getInlineActionCount(),i=r===null,n=r===0;return{inlineActions:i?t.slice(0):n?new Je:t.slice(0,r),menuActions:i?new Je:n?t.slice(0):t.slice(r)}}_featureMenuOpenChanged(e){e?this._focusFirstFeature=!0:this._focusFeatureMenuButton=!0}_actionsMenuOpenChanged(e){e?this._focusFirstAction=!0:this._focusActionsMenuButton=!0}_setTitleFromFeatureWidget(){const{selectedFeatureWidget:e,messagesCommon:t}=this;var r,i;e&&(this.viewModel.title=((r=e.viewModel)==null?void 0:r.state)==="error"?t.errorMessage:((i=e.viewModel)==null?void 0:i.title)||"")}_setContentFromFeatureWidget(){const{selectedFeatureWidget:e}=this;e&&(this.viewModel.content=e)}_unobserveFeatureMenuObserver(){this._featureMenuIntersectionObserverNode&&this._featureMenuIntersectionObserver.unobserve(this._featureMenuIntersectionObserverNode)}_featureMenuIntersectionObserverCreated(e){this._unobserveFeatureMenuObserver(),this._featureMenuIntersectionObserver.observe(e),this._featureMenuIntersectionObserverNode=e}_handleFeatureMenuKeyup(e){jf(e)==="Escape"&&(e.stopPropagation(),this._focusFeatureMenuButton=!0,this.featureMenuOpen=!1,this.scheduleRender())}_handleActionMenuKeyup(e){jf(e)==="Escape"&&(e.stopPropagation(),this._focusActionsMenuButton=!0,this.actionsMenuOpen=!1,this.scheduleRender())}_handleFeatureMenuItemKeyup(e){const t=jf(e),{_featureMenuNode:r}=this,i=e.currentTarget["data-feature-index"];if(!r)return;const n=r.querySelectorAll("li"),s=n.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),n[n.length-1].focus()):(e.stopPropagation(),n[0].focus()):(e.stopPropagation(),n[(i+1+s)%s].focus()):(e.stopPropagation(),n[(i-1+s)%s].focus())}_handleActionMenuItemKeyup(e){const t=jf(e),{_actionsMenuNode:r}=this,i=e.currentTarget.dataset.actionUid,{menuActions:n}=this.dividedActions,s=n.findIndex(l=>l.uid===i);if(!r)return;const o=r.querySelectorAll("li"),a=o.length;t!=="ArrowUp"?t!=="ArrowDown"?t!=="Home"?t!=="End"||(e.stopPropagation(),o[o.length-1].focus()):(e.stopPropagation(),o[0].focus()):(e.stopPropagation(),o[(s+1+a)%a].focus()):(e.stopPropagation(),o[(s-1+a)%a].focus())}_handleMainKeyup(e){const t=jf(e);t==="ArrowLeft"&&(e.stopPropagation(),this.previous()),t==="ArrowRight"&&(e.stopPropagation(),this.next())}_spinnerEnabledChange(e){if(this._destroySpinner(),!e)return;const t=this.get("viewModel.view");this._createSpinner(t)}_hideSpinner(){const{_spinner:e}=this;e&&(e.location=null,e.hide())}_displaySpinner(){const{_spinner:e}=this;if(!e)return;const{location:t,waitingForResult:r}=this.viewModel;r?e.show({location:t}):e.hide()}_getIconStyles(e){return{"background-image":e?`url(${e})`:""}}_addSelectedFeatureIndexHandle(){const e=sr(this,"viewModel.selectedFeatureIndex",(t,r)=>this._selectedFeatureIndexUpdated(t,r));this._handles.add(e,HU)}_selectedFeatureIndexUpdated(e,t){const{featureCount:r}=this;r&&e!==t&&e!==-1&&(this.actionsMenuOpen=!1,this.featureMenuOpen=!1)}_destroySelectedFeatureWidget(){const{_feature:e}=this;e&&(e.viewModel=null,e&&!e.destroyed&&e.destroy()),this._feature=null}_isScreenLocationWithinView(e,t){return e.x>-1&&e.y>-1&&e.x<=t.width&&e.y<=t.height}_isOutsideView(e){const{popupHeight:t,popupWidth:r,screenLocation:i,side:n,view:s}=e;if(isNaN(r)||isNaN(t)||!s||!i)return!1;const o=s.padding;return n==="right"&&i.x+r/2>s.width-o.right||n==="left"&&i.x-r/2<o.left||n==="top"&&i.y-t<o.top||n==="bottom"&&i.y+t>s.height-o.bottom}_calculateAutoAlignment(e){if(e!=="auto")return e;const{_pointerOffsetInPx:t,_containerNode:r,_mainContainerNode:i,viewModel:n}=this,{screenLocation:s,view:o}=n;if(ce(s)||!o||!r)return"top-center";if(!this._isScreenLocationWithinView(s,o))return this._get("currentAlignment")||"top-center";function a(I){return parseInt(I.replace(/[^-\d\.]/g,""),10)}const l=i?window.getComputedStyle(i,null):null,u=l?a(l.getPropertyValue("max-height")):0,h=l?a(l.getPropertyValue("height")):0,{height:d,width:f}=r.getBoundingClientRect(),m=f+t,g=Math.max(d,u,h)+t,b=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"right",view:o}),w=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"left",view:o}),_=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"top",view:o}),x=this._isOutsideView({popupHeight:g,popupWidth:m,screenLocation:s,side:"bottom",view:o});return w?_?"bottom-right":"top-right":b?_?"bottom-left":"top-left":_?x?"top-center":"bottom-center":"top-center"}_callCurrentAlignment(e){return typeof e=="function"?e.call(this):e}_getCurrentAlignment(){const{alignment:e,dockEnabled:t}=this;return t||!this.viewModel.active?null:this._calculatePositionResult(this._calculateAutoAlignment(this._callCurrentAlignment(e)))}_setCurrentAlignment(){this._set("currentAlignment",this._getCurrentAlignment())}_setCurrentDockPosition(){this._set("currentDockPosition",this._getCurrentDockPosition())}_calculatePositionResult(e){const t=["left","right"];return jd(this.container)&&t.reverse(),e.replace(/leading/gi,t[0]).replace(/trailing/gi,t[1])}_callDockPosition(e){return typeof e=="function"?e.call(this):e}_getDockPosition(){var e;return this._calculatePositionResult(this._calculateAutoDockPosition(this._callDockPosition((e=this.dockOptions)==null?void 0:e.position)))}_getCurrentDockPosition(){return this.dockEnabled&&this.viewModel.active?this._getDockPosition():null}_wouldDockTo(){return this.dockEnabled?null:this._getDockPosition()}_calculateAutoDockPosition(e){var t;if(e!=="auto")return e;const r=(t=this.viewModel)==null?void 0:t.view,i=jd(this.container)?"top-left":"top-right";if(!r)return i;const n=r.padding||{left:0,right:0,top:0,bottom:0},s=r.width-n.left-n.right,{breakpoints:o}=r;return o&&s<=o.xsmall?"bottom-center":i}_positionContainer(e=this._containerNode){if(e&&(this._containerNode=e),!e)return;const{screenLocation:t}=this.viewModel,{width:r}=e.getBoundingClientRect(),i=this._calculatePositionStyle(t,r);i&&(e.style.top=i.top,e.style.left=i.left,e.style.bottom=i.bottom,e.style.right=i.right)}_calculateFullWidth(e){const{currentAlignment:t,_pointerOffsetInPx:r}=this;return t==="top-left"||t==="bottom-left"||t==="top-right"||t==="bottom-right"?e+r:e}_calculateAlignmentPosition(e,t,r,i){const{currentAlignment:n,_pointerOffsetInPx:s}=this,o=i/2,a=r.height-t,l=r.width-e,{padding:u}=this.view;return n==="bottom-center"?{top:t+s-u.top,left:e-o-u.left}:n==="top-left"?{bottom:a+s-u.bottom,right:l+s-u.right}:n==="bottom-left"?{top:t+s-u.top,right:l+s-u.right}:n==="top-right"?{bottom:a+s-u.bottom,left:e+s-u.left}:n==="bottom-right"?{top:t+s-u.top,left:e+s-u.left}:n==="top-center"?{bottom:a+s-u.bottom,left:e-o-u.left}:void 0}_calculatePositionStyle(e,t){const{dockEnabled:r,view:i}=this;if(!i)return;if(r)return{left:"",top:"",right:"",bottom:""};if(ce(e)||!t)return;const n=this._calculateFullWidth(t),s=this._calculateAlignmentPosition(e.x,e.y,i,n);return s?{top:s.top!==void 0?`${s.top}px`:"auto",left:s.left!==void 0?`${s.left}px`:"auto",bottom:s.bottom!==void 0?`${s.bottom}px`:"auto",right:s.right!==void 0?`${s.right}px`:"auto"}:void 0}_viewChange(e,t){e&&t&&(this.close(),this.clear())}_viewReadyChange(e,t){if(e){const r=this.get("viewModel.view");this._wireUpView(r)}else t&&(this.close(),this.clear())}_wireUpView(e){if(this._destroySpinner(),!e)return;const{spinnerEnabled:t}=this;t&&this._createSpinner(e),this._setDockEnabledForViewSize(this.dockOptions)}_dockingThresholdCrossed(e,t,r){const[i,n]=e,[s,o]=t,{width:a,height:l}=r;return i<=a&&s>a||i>a&&s<=a||n<=l&&o>l||n>l&&o<=l}_updateDockEnabledForViewSize(e,t){if(!e||!t)return;const r=this.get("viewModel.view.padding")||{left:0,right:0,top:0,bottom:0},i=r.left+r.right,n=r.top+r.bottom,s=[],o=[];s[0]=e[0]-i,s[1]=e[1]-n,o[0]=t[0]-i,o[1]=t[1]-n;const{dockOptions:a}=this,l=a.breakpoint;this._dockingThresholdCrossed(s,o,l)&&this._setDockEnabledForViewSize(a),this._setCurrentDockPosition()}_focusDockButtonNode(e){this._focusDockButton&&(this._focusDockButton=!1,e.focus())}_closeButtonNodeUpdated(e){return this._focusClose?(this._focusClose=!1,void e.focus()):this._blurClose?(this._blurClose=!1,void e.blur()):void 0}_mainContainerNodeUpdated(e){return this._mainContainerNode=e,this._focusContainer?(this._focusContainer=!1,void e.focus()):this._blurContainer?(this._blurContainer=!1,void e.blur()):void 0}_featureMenuNodeUpdated(e){if(this._featureMenuNode=e,!e||!this._focusFirstFeature)return;this._focusFirstFeature=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_actionsMenuNodeUpdated(e){if(this._actionsMenuNode=e,!e||!this._focusFirstAction)return;this._focusFirstAction=!1;const t=e.querySelectorAll("li");t.length&&t[0].focus()}_focusFeatureMenuButtonNode(e){this._focusFeatureMenuButton&&(this._focusFeatureMenuButton=!1,e.focus())}_focusActionsMenuButtonNode(e){this._focusActionsMenuButton&&(this._focusActionsMenuButton=!1,e.focus())}_featureMenuViewportScrollTop(){this._featureMenuViewportNode&&(this._featureMenuViewportNode.scrollTop=0)}_toggleScreenLocationEnabled(){const{dockEnabled:e,viewModel:t}=this;if(!t)return;const r=t.active&&!e;t.screenLocationEnabled=r}_shouldDockAtCurrentViewSize(e){var t,r;const i=e.breakpoint,n=(t=this.viewModel)==null||(r=t.view)==null?void 0:r.ui;if(!n)return!1;const{width:s,height:o}=n;if(isNaN(s)||isNaN(o))return!1;const a=i.hasOwnProperty("width")&&s<=i.width,l=i.hasOwnProperty("height")&&o<=i.height;return a||l}_setDockEnabledForViewSize(e){e.breakpoint&&(this.dockEnabled=this._shouldDockAtCurrentViewSize(e))}_getPageText(e,t){return this.featureNavigationVisible?_c(this.messages.pageText,{index:t+1,total:e}):null}_destroySpinner(){const{_spinner:e,view:t}=this;e&&(t&&t.ui&&t.ui.remove(this._spinner,WU),e.destroy(),this._spinner=null)}_createSpinner(e){e&&(this._spinner=new E5e({view:e}),e.ui.add(this._spinner,{key:WU,position:"manual"}))}_toggleCollapsed(){this.collapsed=!this.collapsed}_close(){this.close(),this.view&&this.view.focus()}_toggleDockEnabled(){this.dockEnabled=!this.dockEnabled,this._focusDockButton=!0,this.scheduleRender()}_toggleFeatureMenu(){const e=!this.featureMenuOpen;this._featureMenuOpenChanged(e),this.actionsMenuOpen=!1,this.featureMenuOpen=e}_toggleActionsMenu(){const e=!this.actionsMenuOpen;this._actionsMenuOpenChanged(e),this.featureMenuOpen=!1,this.actionsMenuOpen=e}_triggerAction(e){const t=e.currentTarget.dataset.actionUid,{allActions:r}=this.viewModel,i=r.findIndex(s=>s.uid===t),n=r.getItemAt(i);n&&n.type==="toggle"&&(n.value=!n.value),this.actionsMenuOpen=!1,this.viewModel.triggerAction(i)}_selectFeature(e){const t=e.currentTarget["data-feature-index"];isNaN(t)||(this.viewModel.selectedFeatureIndex=t),this.featureMenuOpen=!1,this._focusFeatureMenuButton=!0,this.scheduleRender()}_next(){this.next()}_previous(){this.previous()}};c([p({readOnly:!0})],rt.prototype,"actionsMenuId",null),c([p({readOnly:!0})],rt.prototype,"actionsMenuButtonId",null),c([p({readOnly:!0})],rt.prototype,"featureMenuId",null),c([p({readOnly:!0})],rt.prototype,"titleId",null),c([p({readOnly:!0})],rt.prototype,"contentId",null),c([p({readOnly:!0})],rt.prototype,"hasContent",null),c([p({readOnly:!0})],rt.prototype,"featureNavigationVisible",null),c([p({readOnly:!0})],rt.prototype,"collapsible",null),c([p({readOnly:!0})],rt.prototype,"featureMenuVisible",null),c([p({readOnly:!0})],rt.prototype,"contentCollapsed",null),c([p({readOnly:!0})],rt.prototype,"dividedActions",null),c([ze("viewModel.actions")],rt.prototype,"actions",void 0),c([p()],rt.prototype,"actionsMenuOpen",null),c([p()],rt.prototype,"alignment",void 0),c([ze("viewModel.autoCloseEnabled")],rt.prototype,"autoCloseEnabled",void 0),c([ze("viewModel.autoOpenEnabled")],rt.prototype,"autoOpenEnabled",void 0),c([ze("viewModel.defaultPopupTemplateEnabled")],rt.prototype,"defaultPopupTemplateEnabled",void 0),c([ze("viewModel.content")],rt.prototype,"content",void 0),c([p()],rt.prototype,"collapsed",void 0),c([p()],rt.prototype,"collapseEnabled",void 0),c([p({readOnly:!0})],rt.prototype,"currentAlignment",null),c([p({readOnly:!0})],rt.prototype,"currentDockPosition",null),c([p()],rt.prototype,"dockOptions",null),c([p()],rt.prototype,"dockEnabled",void 0),c([ze("viewModel.featureCount")],rt.prototype,"featureCount",void 0),c([p()],rt.prototype,"featureMenuOpen",void 0),c([ze("viewModel.features")],rt.prototype,"features",void 0),c([ze("viewModel.goToOverride")],rt.prototype,"goToOverride",void 0),c([p()],rt.prototype,"headingLevel",void 0),c([ze("viewModel.highlightEnabled")],rt.prototype,"highlightEnabled",void 0),c([ze("viewModel.location")],rt.prototype,"location",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],rt.prototype,"label",void 0),c([p()],rt.prototype,"maxInlineActions",void 0),c([p(),Vn("esri/widgets/Popup/t9n/Popup")],rt.prototype,"messages",void 0),c([p(),Vn("esri/t9n/common")],rt.prototype,"messagesCommon",void 0),c([ze("viewModel.promises")],rt.prototype,"promises",void 0),c([ze("viewModel.selectedFeature")],rt.prototype,"selectedFeature",void 0),c([ze("viewModel.selectedFeatureIndex")],rt.prototype,"selectedFeatureIndex",void 0),c([p({readOnly:!0})],rt.prototype,"selectedFeatureWidget",null),c([p()],rt.prototype,"spinnerEnabled",void 0),c([ze("viewModel.title")],rt.prototype,"title",void 0),c([ze("viewModel.updateLocationEnabled")],rt.prototype,"updateLocationEnabled",void 0),c([ze("viewModel.view")],rt.prototype,"view",void 0),c([p({type:ate}),i$e(["triggerAction","trigger-action"])],rt.prototype,"viewModel",void 0),c([ze("viewModel.visible")],rt.prototype,"visible",void 0),c([p()],rt.prototype,"visibleElements",void 0),c([Ct("visibleElements")],rt.prototype,"castVisibleElements",null),c([bo()],rt.prototype,"_close",null),c([bo()],rt.prototype,"_toggleDockEnabled",null),c([bo()],rt.prototype,"_toggleFeatureMenu",null),c([bo()],rt.prototype,"_toggleActionsMenu",null),c([bo()],rt.prototype,"_triggerAction",null),c([bo()],rt.prototype,"_selectFeature",null),c([bo()],rt.prototype,"_next",null),c([bo()],rt.prototype,"_previous",null),rt=c([N(lte)],rt);const XU=rt,A5=[0,0];function Y5e(e){const t=(e.ownerDocument||window.document).defaultView,r=e.getBoundingClientRect();return A5[0]=r.left+t.pageXOffset,A5[1]=r.top+t.pageYOffset,A5}function QU(e){e&&(PX(e),e.parentNode&&e.parentNode.removeChild(e))}function K5e(e){const t=document.createElement("div");return e.appendChild(t),t}const j1=16,tS=750,X5e=512,Q5e=2,eAe=e=>{let t=class extends e{constructor(...r){super(...r),this._freqInfo={freq:j1,time:tS},this._overlayRenderTaskHandle=null,this.height=0,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.handles.add([this.watch("cursor",i=>{const n=this.surface;n&&n.setAttribute("data-cursor",i)}),this.watch("interacting",i=>{const n=this.surface;n&&n.setAttribute("data-interacting",i.toString())})])}initialize(){this.handles.add(this.watch("ui",(r,i)=>this._handleUIChange(r,i))),this._wireUI(this.ui),this.handles.add([this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui&&(this.ui.destroy(),this.ui=null),this.popup&&!this.popup.destroyed&&this.popup.destroy(),this.container=null)}set container(r){const i=this._get("container");if(i===r)return;const n="dom-size";if(this.handles.remove(n),this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay.destroy(),this._set("overlay",null),QU(this.root),this._set("root",null),kV(this.userContent,i),QU(this.userContent),this._set("userContent",null)),r){r.classList.add("esri-view");const s=document.createElement("div");s.className="esri-view-user-storage",kV(r,s),r.appendChild(s),this._set("userContent",s);const o=document.createElement("div");o.className="esri-view-root",r.insertBefore(o,r.firstChild),this._set("root",o);const a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);const l=new zV;o.appendChild(l.surface),this._set("overlay",l),l.watch("needsRender",u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=L0({render:()=>{this.overlay.render()}}):this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null)}),this.forceDOMReadyCycle(),this.handles.add(It(this,"size",u=>{const[h,d]=u,f="esri-view-surface--inset-outline";h>=document.body.clientWidth||d>=document.body.clientHeight?a.classList.add(f):a.classList.remove(f)}),n),this._set("container",r),this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const r=document.activeElement===this.surface;return document.hasFocus()&&r}get popup(){return this._get("popup")||new XU({view:this})}set popup(r){const i=this._get("popup");i&&i!==r&&i.destroy(),this._set("popup",r)}get size(){return[this.width,this.height]}blur(){this.surface&&this.surface.blur()}focus(){this.surface&&this.surface.focus()}pageToContainer(r,i,n){const s=this.position;return r-=s[0],i-=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}containerToPage(r,i,n){const s=this.position;return r+=s[0],i+=s[1],n?(n[0]=r,n[1]=i):n=[r,i],n}_handleUIChange(r,i){i&&(this.handles.remove("ui"),i.destroy()),r&&this._wireUI(r),this._set("ui",r)}_wireUI(r){this.handles.remove("ui"),r&&(r.view=this,this.handles.add([It(this,"root",i=>{r.container=i?K5e(i):null}),It(this,"popup",(i,n)=>{const s="popup",o="manual";n&&r.remove(n,s),i&&(i.view=r.view,r.add(i,{key:s,position:o}))})],"ui"))}_stopMeasuring(){this.handles.remove("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const r=this._freqInfo;r.freq=j1,r.time=tS,this.handles.add([(()=>{const i=()=>{r.freq=j1,r.time=tS};return window.addEventListener("resize",i),{remove(){window.removeEventListener("resize",i)}}})(),L0({prepare:i=>{const n=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,n&&(s.freq=j1,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;const o=this._position();s.freq=o||n?j1:Math.min(tS,s.freq*Q5e),!n&&s.freq>=X5e&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){const r=this.container,i=r?r.clientWidth:0,n=r?r.clientHeight:0;if(i===0||n===0)return this.suspended||this._set("suspended",!0),!1;const s=this.width,o=this.height;return i===s&&n===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",n),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:n}),!0)}_position(){const r=this.container,i=this.position,n=Y5e(r);return(!i||n[0]!==i[0]||n[1]!==i[1])&&(this._set("position",[n[0],n[1]]),!0)}forceDOMReadyCycle(){}};return c([p({value:null,cast:r=>M6(r)})],t.prototype,"container",null),c([p({readOnly:!0})],t.prototype,"focused",null),c([p({readOnly:!0})],t.prototype,"height",void 0),c([p({type:XU})],t.prototype,"popup",null),c([p({type:zV})],t.prototype,"overlay",void 0),c([p({readOnly:!0})],t.prototype,"position",void 0),c([p({readOnly:!0})],t.prototype,"resizing",void 0),c([p({readOnly:!0})],t.prototype,"root",void 0),c([p({value:null,readOnly:!0})],t.prototype,"size",null),c([p({readOnly:!0})],t.prototype,"surface",void 0),c([p({readOnly:!0})],t.prototype,"suspended",void 0),c([p()],t.prototype,"ui",void 0),c([p({readOnly:!0})],t.prototype,"userContent",void 0),c([p({readOnly:!0})],t.prototype,"width",void 0),c([p()],t.prototype,"widthBreakpoint",void 0),t=c([N("esri.views.DOMContainer")],t),t};class t8{constructor(t,r){this.min=t,this.max=r,this.range=r-t}ndiff(t,r=0){return Math.ceil((t-r)/this.range)*this.range+r}_normalize(t,r,i,n=0,s=!1){return(i-=n)<t?i+=this.ndiff(t-i):i>r&&(i-=this.ndiff(i-r)),s&&i===r&&(i=t),i+n}normalize(t,r=0,i=!1){return this._normalize(this.min,this.max,t,r,i)}clamp(t,r=0){return xl(t-r,this.min,this.max)+r}monotonic(t,r,i){return t<r?r:r+this.ndiff(t-r,i)}minimalMonotonic(t,r,i){return this._normalize(t,t+this.range,r,i)}center(t,r,i){return r=this.monotonic(t,r,i),this.normalize((t+r)/2,i)}diff(t,r,i){return this.monotonic(t,r,i)-t}shortestSignedDiff(t,r){t=this.normalize(t);const i=(r=this.normalize(r))-t,n=r<t?this.minimalMonotonic(t,r)-t:r-this.minimalMonotonic(r,t);return Math.abs(i)<Math.abs(n)?i:n}contains(t,r,i){return r=this.minimalMonotonic(t,r),(i=this.minimalMonotonic(t,i))>t&&i<r}}function r8(e){for(const t in e){const r=e[t];r instanceof Function&&(e[t]=r.bind(e))}return e}r8(new t8(0,2*Math.PI));r8(new t8(-Math.PI,Math.PI));const tAe=r8(new t8(0,360));var GP;let Oc=GP=class extends me{constructor(...e){super(...e),this.position=new Ke([0,0,0]),this.heading=0,this.tilt=0,this.fov=55}normalizeCtorArgs(e,t,r,i){if(e&&typeof e=="object"&&("x"in e||Array.isArray(e))){const n={position:e};return t!=null&&(n.heading=t),r!=null&&(n.tilt=r),i!=null&&(n.fov=i),n}return e}writePosition(e,t,r,i){const n=e.clone();n.x=da(e.x||0),n.y=da(e.y||0),n.z=e.hasZ?da(e.z||0):e.z,t[r]=n.write({},i)}readPosition(e,t){const r=new Ke;return r.read(e,t),r.x=da(r.x||0),r.y=da(r.y||0),r.z=r.hasZ?da(r.z||0):r.z,r}equals(e){return!!e&&this.tilt===e.tilt&&this.heading===e.heading&&this.fov===e.fov&&this.position.equals(e.position)}clone(){return new GP({position:this.position.clone(),heading:this.heading,tilt:this.tilt,fov:this.fov})}};c([p({type:Ke,json:{write:{isRequired:!0}}})],Oc.prototype,"position",void 0),c([Se("position")],Oc.prototype,"writePosition",null),c([ye("position")],Oc.prototype,"readPosition",null),c([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ct(e=>tAe.normalize(da(e)))],Oc.prototype,"heading",void 0),c([p({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),Ct(e=>xl(da(e),-180,180))],Oc.prototype,"tilt",void 0),c([p({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],Oc.prototype,"fov",void 0),Oc=GP=c([N("esri.Camera")],Oc);const rAe=Oc;var qP;let wd=qP=class extends me{constructor(e){super(e),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(e){return(e%=360)<0&&(e+=360),e}clone(){return new qP({rotation:this.rotation,scale:this.scale,targetGeometry:U(this.targetGeometry)?this.targetGeometry.clone():null,camera:U(this.camera)?this.camera.clone():null})}};function C5(){return{enabled:!this.camera}}c([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:C5}}}}})],wd.prototype,"rotation",void 0),c([Ct("rotation")],wd.prototype,"castRotation",null),c([p({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:C5}}}}})],wd.prototype,"scale",void 0),c([p({types:xh,json:{read:Sr,write:!0,origins:{"web-scene":{read:Sr,write:{overridePolicy:C5}}}}})],wd.prototype,"targetGeometry",void 0),c([p({type:rAe,json:{write:!0}})],wd.prototype,"camera",void 0),wd=qP=c([N("esri.Viewpoint")],wd);const oh=wd,iAe=e=>{let t=class extends e{async fetchPopupFeatures(r,i){await this.when();const{location:n,queryArea:s,layerViewsAndGraphics:o,clientOnlyGraphics:a}=await this._prepareFetchPopupFeatures(r,i),l=Promise.resolve(a),u=this._queryLayerPopupFeatures(s,o,i),h=u.map(d=>d.promise);return{location:n,clientOnlyGraphics:a,allGraphicsPromise:zue([l,...h]).then(lue),promisesPerLayerView:u}}_queryLayerPopupFeatures(r,i,n){return i.map(({layerView:s,graphics:o})=>{const a={clientGraphics:o,event:U(n)?n.event:null,signal:U(n)?n.signal:null,defaultPopupTemplateEnabled:!!U(n)&&!!n.defaultPopupTemplateEnabled},l=s.fetchPopupFeatures(r,a);return{layerView:s,promise:l}})}_isValidPopupGraphic(r,i){return r&&!!r.getEffectivePopupTemplate(U(i)&&i.defaultPopupTemplateEnabled)}async _prepareFetchPopupFeatures(r,i){const{clientGraphics:n,queryArea:s,location:o}=await this._popupHitTestGraphics(r,i),a=this._getFetchPopupLayerViews(),{layerViewsAndGraphics:l,clientOnlyGraphics:u}=this._graphicsPerFetchPopupLayerView(n,a);return{clientOnlyGraphics:u,layerViewsAndGraphics:l,queryArea:s,location:o}}async _popupHitTestGraphics(r,i){const{results:n,mapPoint:s}=await this.popupHitTest(r),o=n.filter(l=>this._isValidPopupGraphic(l.graphic,i)),a=o.length?o[0].mapPoint:null;return{clientGraphics:o.map(l=>l.graphic),queryArea:s,location:s||a}}_getFetchPopupLayerViews(){const r=[];return this.allLayerViews.forEach(i=>{this._isValidPopupLayerView(i)&&r.push(i)}),U(this.graphicsView)&&this._isValidPopupLayerView(this.graphicsView)&&r.push(this.graphicsView),r.reverse()}_isValidPopupLayerView(r){return U(r)&&(!("layer"in r)||!r.suspended)&&"fetchPopupFeatures"in r}_graphicsPerFetchPopupLayerView(r,i){const n=[],s=new Map,o=i.map(a=>{const l=[];return"layer"in a?s.set(a.layer,l):s.set(a.graphics,l),{layerView:a,graphics:l}});for(const a of r){const l=s.get(a.layer)||s.get(a.sourceLayer)||null;l?l.push(a):n.push(a)}return{layerViewsAndGraphics:o,clientOnlyGraphics:n}}};return t=c([N("esri.views.PopupView")],t),t};let LI=class extends xw{_own(e){e.parent=this.owner}_release(e){e.parent=null}};LI=c([N("esri.support.AnalysesCollection")],LI);let _d=class extends Ze{constructor(e){super(e),this.view=null,this.baseLayerViews=new Je,this.referenceLayerViews=new Je,this._loadingHandle=It(this,"view.map.basemap",t=>{t&&t.load().catch(()=>{})})}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null)}get suspended(){return!this.view||this.view.suspended}get updating(){return(!this.view||!this.view.suspended)&&!(!(this.view&&this.view.map&&this.view.map.basemap)||this.view.map.basemap.loaded)}};c([p({constructOnly:!0})],_d.prototype,"view",void 0),c([p({readOnly:!0})],_d.prototype,"baseLayerViews",void 0),c([p({readOnly:!0})],_d.prototype,"referenceLayerViews",void 0),c([p({readOnly:!0})],_d.prototype,"suspended",null),c([p({type:Boolean,readOnly:!0})],_d.prototype,"updating",null),_d=c([N("esri.views.BasemapView")],_d);const nAe=Te.getLogger("esri.views.LayerViewManager");class sAe{constructor(t,r,i){this.layer=t,this.view=r,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=ph(),this._started=!1,this.done=!1,xa(this._controller.signal,()=>{const n=new Z("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(n)})}get promise(){return this._deferred.promise}destroy(){this._controller.abort();const{layerView:t}=this;if(!t)return;const{layer:r,view:i}=this;r.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:r,layerView:t}),this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null}async start(){if(this._started)return;this._started=!0;const{_controller:{signal:t},layer:r,view:i}=this;this._map=i.map;try{var n,s;let o,a;if(await r.load({signal:t}),"prefetchResources"in r&&await r.prefetchResources({signal:t}),r.createLayerView)o=await r.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(r))throw new Z("layer:view-not-supported","No layerview implementation was found");const u=await this.layerViewImporter.importLayerView(r);$r(t),o="default"in u?new u.default({layer:r,view:i}):new u({layer:r,view:i})}const l=()=>{a=LT(a),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};a=xa(t,l),$r(t);try{await o.when()}catch(u){throw l(),u}if(!(!((n=this._map)==null||(s=n.allLayers)==null)&&s.includes(r)))return l(),void this._deferred.reject(new Z("view:no-layerview-for-layer","The layer has been removed from the map",{layer:r}));this.layerView=o,r.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:r,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){r.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:r,error:o}),this.done=!0,this._deferred.reject(new Z("layerview:create-error","layerview creation failed",{layer:r,error:o}))}}}let sa=class extends Z0{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._watchUpdatingTracking=new g0,this.supportsGround=!0,this._preloadLayerViewModules=()=>{var t;const r=(t=this.view.map)==null?void 0:t.allLayers;if(r)for(const i of r)this.layerViewImporter.hasLayerViewModule(i)&&this.layerViewImporter.importLayerView(i)},this._reschedule=()=>(ce(this._workPromise)&&(this._workPromise=ph()),this.handles.remove("reschedule"),this.handles.add(s2(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{var t,r,i;const n=this.view.map;if(this._map!==n&&(this.clear(),this._map=n),ce(this._workPromise))return void this.notifyChange("updating");this.handles.remove("reschedule"),this.handles.remove("collection-change");const s=new Kd({getCollections:()=>this._rootCollectionNames.map(l=>this.get(l)),getChildrenFunction:l=>l&&"layers"in l?l.layers:null});if(!s)return this._workPromise.resolve(),void(this._workPromise=null);for(const l of s)this._createLayerView(l);this._refreshCollections();for(const[l,u]of this._layerLayerViewInfoMap)s.includes(l)||(this._layerLayerViewInfoMap.delete(u.layer),u.destroy());const o=s.filter(l=>l.type==="group").map(l=>l.layers),a=[n==null||(t=n.ground)==null?void 0:t.layers,n==null||(r=n.basemap)==null?void 0:r.baseLayers,n==null||(i=n.basemap)==null?void 0:i.referenceLayers,n?.layers,...o].filter(l=>!!l);this.handles.add(a.map(l=>this._watchUpdatingTracking.addOnCollectionChange(l,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.handles.add([yh(this,"view.map.allLayers","change",this._preloadLayerViewModules,this._preloadLayerViewModules),It(this.view,["map.basemap","map.ground","map.layers","ready"],this._reschedule,!0)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),this._watchUpdatingTracking.destroy(),this._map=null}get _layersToLayerViews(){const e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return U(this._workPromise)||this._watchUpdatingTracking.updating||BT(this._layerLayerViewInfoMap,e=>!e.done)}get updatingRemaining(){let e=0;for(const t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){if(!this.destroyed){for(const e of this._layerLayerViewInfoMap.values())e.destroy();this._layerLayerViewInfoMap.clear(),this._refreshCollections()}}async whenLayerView(e){if(await this._reschedule(),!this._layerLayerViewInfoMap.has(e))throw new Z("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e});return this._layerLayerViewInfoMap.get(e).promise}_refreshCollections(){for(const[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(this.get(e),this.get(t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,r){if(!e||!t)return void(t&&t.removeAll());let i=0;for(const n of e){const s=this._layerLayerViewInfoMap.get(n);if(!s||!s.layerView)continue;const o=s.layerView;o.layer=n,o.parent=r,t.getItemAt(i)!==o&&t.splice(i,0,o),n.layers&&this._populateLayerViewsOwners(n.layers,o.layerViews,o),i+=1}i<t.length&&t.splice(i,t.length)}_createLayerView(e){if(this._layerLayerViewInfoMap.has(e))return this.view.ready&&this._layerLayerViewInfoMap.get(e).start(),this.notifyChange("updating"),void this.notifyChange("updatingRemaining");e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);const t=new sAe(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),r=>{var i,n;r&&(sn(r)||r.name==="cancelled:layerview-create")||nAe.error(`Failed to create layerview for layer title:'${(i=e.title)!=null?i:"no title"}', id:'${(n=e.id)!=null?n:"no id"}' of type '${e.type}'.`,{layer:e,error:r}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([p()],sa.prototype,"_workPromise",void 0),c([p({readOnly:!0})],sa.prototype,"_watchUpdatingTracking",void 0),c([p({readOnly:!0})],sa.prototype,"_layersToLayerViews",null),c([p({readOnly:!0})],sa.prototype,"_rootCollectionNames",null),c([p()],sa.prototype,"layerViewImporter",void 0),c([p()],sa.prototype,"supportsGround",void 0),c([p({readOnly:!0})],sa.prototype,"updating",null),c([p({readOnly:!0})],sa.prototype,"updatingRemaining",null),c([p({constructOnly:!0})],sa.prototype,"view",void 0),sa=c([N("esri.views.LayerViewManager")],sa);const oAe=sa;let mo=class extends Ze{constructor(e){super(e),this.factor=1.5,this.offset=tn(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([p({type:Number})],mo.prototype,"factor",void 0),c([p({nonNullable:!0})],mo.prototype,"offset",void 0),c([p()],mo.prototype,"position",void 0),c([p({type:Number,range:{min:0}})],mo.prototype,"size",void 0),c([p()],mo.prototype,"maskUrl",void 0),c([p()],mo.prototype,"maskEnabled",void 0),c([p()],mo.prototype,"overlayUrl",void 0),c([p()],mo.prototype,"overlayEnabled",void 0),c([p({readOnly:!0})],mo.prototype,"version",null),c([p({type:Boolean})],mo.prototype,"visible",void 0),mo=c([N("esri.views.Magnifier")],mo);const ute=mo;let a3=class extends Ze{constructor(){super(...arguments),this._tasks=new Array,this.running=!1}get length(){return this._tasks.length}destroy(){this.cancelAll()}runTask(e){for(;!e.done&&this._process(e);)e.madeProgress()}push(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.push(new ez(i,n,e,t,r)))}unshift(e,t,r){return this.running=!0,new Promise((i,n)=>this._tasks.unshift(new ez(i,n,e,t,r)))}_process(e){if(this._tasks.length===0)return!1;const t=this._tasks.shift();try{const r=wl(t.signal);if(r&&!t.abortCallback)t.reject(Zr());else{const i=r?t.abortCallback(Zr()):t.callback(e);RH(i)?i.then(t.resolve,t.reject):t.resolve(i)}}catch(r){t.reject(r)}return this.running=this._tasks.length>0,!0}cancelAll(){const e=Zr();for(const t of this._tasks)if(t.abortCallback){const r=t.abortCallback(e);t.resolve(r)}else t.reject(e);this._tasks.length=0,this.running=!1}};c([p()],a3.prototype,"running",void 0),a3=c([N("esri.layers.support.PromiseQueue")],a3);class ez{constructor(t,r,i,n,s){this.resolve=t,this.reject=r,this.callback=i,this.signal=n,this.abortCallback=s}}let Hb=class extends Ze{constructor(){super(...arguments),this.SCHEDULER_LOG_SLOW_TASKS=!1,this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=!1}};c([p()],Hb.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0),c([p()],Hb.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0),Hb=c([N("esri.views.support.DebugFlags")],Hb);const aAe=new Hb,lAe=Te.getLogger("esri.views.support.Scheduler");var Rt;(function(e){e.RESOURCE_CONTROLLER="schedule",e.SLIDE="slide",e.STREAM_DATA_LOADER="stream loader",e.ELEVATION_QUERY="elevation query",e.TERRAIN_SURFACE="terrain",e.SURFACE_GEOMETRY_UPDATES="surface geometry updates",e.GRAPHICS_CORE="Graphics3D",e.I3S_CONTROLLER="I3S",e.POINT_CLOUD_LAYER="point cloud",e.FEATURE_TILE_FETCHER="feature fetcher",e.OVERLAY="overlay",e.STAGE="stage",e.GRAPHICS_DECONFLICTOR="graphics deconflictor",e.FILTER_VISIBILITY="Graphics3D filter visibility",e.SCALE_VISIBILITY="Graphics3D scale visibility",e.FRUSTUM_VISIBILITY="Graphics3D frustum visibility",e.POINT_OF_INTEREST_FREQUENT="POI frequent",e.POINT_OF_INTEREST_INFREQUENT="POI infrequent",e.LABELER="labeler",e.FEATURE_QUERY_ENGINE="feature query",e.FEATURE_TILE_TREE="feature tile tree",e.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree",e.ELEVATION_ALIGNMENT="elevation alignment",e.TEXT_TEXTURE_ATLAS="text texture atlas",e.TEXTURE_UNLOAD="texture unload",e.LINE_OF_SIGHT_TOOL="line of sight tool",e.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool",e.ELEVATION_PROFILE="elevation profile",e.SNAPPING="snapping",e.SHADOW_ACCUMULATOR="shadow accumulator",e.CLOUDS_GENERATOR="cloud generator",e[e.TEST_PRIO=1]="TEST_PRIO"})(Rt||(Rt={}));const bu=0,tz=new Map([[Rt.RESOURCE_CONTROLLER,bu],[Rt.SLIDE,bu],[Rt.STREAM_DATA_LOADER,bu],[Rt.ELEVATION_QUERY,bu],[Rt.TERRAIN_SURFACE,1],[Rt.SURFACE_GEOMETRY_UPDATES,1],[Rt.GRAPHICS_CORE,2],[Rt.I3S_CONTROLLER,2],[Rt.POINT_CLOUD_LAYER,2],[Rt.FEATURE_TILE_FETCHER,2],[Rt.OVERLAY,4],[Rt.STAGE,4],[Rt.GRAPHICS_DECONFLICTOR,4],[Rt.FILTER_VISIBILITY,4],[Rt.SCALE_VISIBILITY,4],[Rt.FRUSTUM_VISIBILITY,4],[Rt.POINT_OF_INTEREST_FREQUENT,6],[Rt.POINT_OF_INTEREST_INFREQUENT,30],[Rt.LABELER,8],[Rt.FEATURE_QUERY_ENGINE,8],[Rt.FEATURE_TILE_TREE,16],[Rt.FEATURE_TILE_TREE_ACTIVE,bu],[Rt.ELEVATION_ALIGNMENT,12],[Rt.TEXT_TEXTURE_ATLAS,12],[Rt.CLOUDS_GENERATOR,12],[Rt.TEXTURE_UNLOAD,12],[Rt.LINE_OF_SIGHT_TOOL,16],[Rt.LINE_OF_SIGHT_TOOL_INTERACTIVE,bu],[Rt.SNAPPING,bu],[Rt.SHADOW_ACCUMULATOR,30]]);function rz(e){return tz.has(e)?tz.get(e):typeof e=="number"?e:1}const iz=6.5,nz=1,uAe=30,sz=1e3/30,oz=100,az=.9;var HP,Dp;(function(e){let t=class extends Ze{constructor(n){super(n),this.updating=!0,this._microTaskQueued=!1,this.performanceInfo={total:new aw("total"),tasks:new Map},this._frameTaskTimes=new Map,this._budget=null,this._state=1,this._tasks=new Hd,this._runQueue=new Hd,this._load=0,this._idleStateCallbacks=new Hd,this._idleUpdatesStartFired=!1,this._maxReschedule=rS,this._forceTask=!1,this._debug=!1,this._debugHandle=It(aAe,"SCHEDULER_LOG_SLOW_TASKS",a=>this._debug=a),this._budget=new i(n.nowFunc);for(const a of Object.keys(Rt))this.performanceInfo.tasks.set(Rt[a],new aw(Rt[a]));let s;const o=this;this._test={get state(){return IL(s,o._state)},set state(a){s=a},FRAME_SAFETY_BUDGET:iz,INTERACTING_BUDGET:sz,IDLE_BUDGET:oz,get budget(){return o._budget.budget},usedBudget:0,setBudget:a=>o._budget=a,updateTask:a=>this._updateTask(a),getState:a=>this._getState(a),getRuntime:a=>this._getRuntime(a),frameTaskTimes:this._frameTaskTimes,resetRuntimes:()=>this._resetRuntimes(),getRunning:()=>this._getRunning()}}destroy(){this._debugHandle&&this._debugHandle.remove(),this._microTaskQueued=!1}activate(){this._budget.done||this._microTaskQueued||(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,this._budget.done||(this._maxReschedule=rS,this._schedule(),this.frame()))}))}registerTask(n,s){const o=rz(n),a=new r(this,n,s,o);return this._tasks.push(a),this.performanceInfo.tasks.has(n)||this.performanceInfo.tasks.set(n,new aw(n)),a}registerIdleStateCallbacks(n,s){const o={idleBegin:n,idleEnd:s};this._idleStateCallbacks.push(o),this.state===2&&this._idleUpdatesStartFired&&o.idleBegin();const a=this;return{remove:()=>this._removeIdleStateCallbacks(o),set idleBegin(l){a._idleUpdatesStartFired&&(o.idleEnd(),a._state===2&&l()),o.idleBegin=l},set idleEnd(l){o.idleEnd=l}}}get now(){return this.nowFunc()}get load(){return this._load}set state(n){this._state!==n&&(this._state=n,this.state!==2&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(s=>s.idleEnd())))}get state(){return ce(this._test.state)?this._state:this._test.state}updateBudget(n){this._test.usedBudget=0;let s=iz,o=n.frameDuration,a=nz;switch(this.state){case 2:s=0,o=Math.max(oz,n.frameDuration),a=uAe;break;case 1:o=Math.max(sz,n.frameDuration)}return o=o-n.elapsedFrameTime-s,this.state!==2&&o<nz&&!this._forceTask?(this._forceTask=!0,!1):(o=Math.max(o,a),this._budget.reset(o,this.state),this._maxReschedule=rS,this._updateLoad(),this._schedule())}frame(){switch(this._forceTask=!1,this._microTaskQueued=!1,this.state){case 2:this._idleUpdatesStartFired||(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(n=>n.idleBegin())),this._runIdle();break;case 1:this._runInteracting();break;default:this._runAnimating()}this._test.usedBudget=this._budget.elapsed}stopFrame(){this._budget.reset(0,this._state),this._budget.madeProgress()}_removeIdleStateCallbacks(n){this._idleUpdatesStartFired&&n.idleEnd(),this._idleStateCallbacks.removeUnordered(n)}removeTask(n){this._tasks.removeUnordered(n),this._runQueue.removeUnordered(n)}_updateTask(n){this._tasks.forAll(s=>{s.name===n&&s.setPriority(n)})}_getState(n){if(this._runQueue.some(o=>o.name===n))return Dp.SCHEDULED;let s=Dp.IDLE;return this._tasks.forAll(o=>{o.name===n&&o.needsUpdate&&(o.schedulePriority<=1?s=Dp.READY:s!==Dp.READY&&(s=Dp.WAITING))}),s}_getRuntime(n){let s=0;return this._tasks.forAll(o=>{o.name===n&&(s+=o.runtime)}),s}_resetRuntimes(){this._tasks.forAll(n=>n.runtime=0)}_getRunning(){const n=new Map;if(this._tasks.forAll(o=>{o.needsUpdate&&n.set(o.name,(n.get(o.name)||0)+1)}),n.size===0)return null;let s="";return n.forEach((o,a)=>{s+=o>1?` ${o}x ${a}`:` ${a}`}),s}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const n=this._tasks.reduce((s,o)=>o.needsUpdate?++s:s,0);this._load=this._load*az+n*(1-az)}_schedule(){if(this._maxReschedule<=0)return!1;for(this._runQueue.filterInPlace(n=>!!n.needsUpdate||(n.schedulePriority=n.basePriority,!1)),this._tasks.forAll(n=>{n.basePriority===bu&&n.needsUpdate&&!this._runQueue.some(s=>s===n)&&this._runQueue.unshift(n)});this._runQueue.length===0;){let n=!1,s=0;if(this._tasks.forAll(o=>{o.needsUpdate&&o.schedulePriority!==0&&o.basePriority!==bu&&(n=!0,s=Math.max(s,o.basePriority),o.schedulePriority===1?(o.schedulePriority=0,this._runQueue.push(o)):--o.schedulePriority)}),!n)return this.updating=!1,!1;this._maxReschedule===rS&&(this._maxReschedule=s),--this._maxReschedule}return this.updating=!0,!0}_run(){const n=this._budget.now();this._startFrameTaskTimes();do for(;this._runQueue.length>0;){const s=this._budget.now(),o=this._runQueue.pop();this._budget.resetProgress();try{o.task.runTask(this._budget)}catch(l){lAe.error(`Exception in task "${o.name}"`,l)}o.schedulePriority=o.basePriority;const a=this._budget.now()-s;if(o.runtime+=a,this._frameTaskTimes.set(o.priority,this._frameTaskTimes.get(o.priority)+a),this._debug&&this._budget.elapsed>2*this._budget.budget&&console.log("Task",o.name,"used",this._budget.elapsed,"of max",this._budget.budget,"ms"),this._budget.remaining<=0)return void this._recordFrameTaskTimes(this._budget.now()-n)}while(this._schedule());this._recordFrameTaskTimes(this._budget.now()-n)}_startFrameTaskTimes(){for(const n of Object.keys(Rt))this._frameTaskTimes.set(Rt[n],0)}_recordFrameTaskTimes(n){this._frameTaskTimes.forEach((s,o)=>this.performanceInfo.tasks.get(o).record(s)),this.performanceInfo.total.record(n)}get test(){return this._test}};c([p()],t.prototype,"updating",void 0),c([p()],t.prototype,"nowFunc",void 0),t=c([N("esri.views.support.Scheduler")],t),e.Scheduler=t;let r=class extends Ze{constructor(n,s,o,a){super({}),this._scheduler=n,this.name=s,this._basePriority=a,this.runtime=0,this._queue=new a3,this._handles=new gi,this.schedulePriority=this._basePriority,this.task=U(o)?o:this._queue,this._handles.add(Xge(()=>this.task.running,()=>n.activate()))}get updating(){return this._queue.running}normalizeCtorArgs(){return{}}remove(){this.processQueue(cte),this._scheduler.removeTask(this),this.schedule=WP.schedule,this.reschedule=WP.reschedule,this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(n){this.name=n;const s=rz(n);this._basePriority!==bu&&this.schedulePriority===0||(this.schedulePriority=s),this._basePriority=s}get priority(){return this.name}set priority(n){this.setPriority(n)}get needsUpdate(){return this.updating||this.task.running}schedule(n,s,o){return this._queue.push(n,s,o)}reschedule(n,s,o){return this._queue.unshift(n,s,o)}processQueue(n){this._queue.runTask(n)}};c([p({constructOnly:!0})],r.prototype,"task",void 0),c([p({readOnly:!0})],r.prototype,"updating",null),r=c([N("esri.views.support.SchedulerTask")],r);class i{constructor(s){this.now=s,this._begin=0,this._budget=0,this._state=2,this._didWork=!1,this._enabled=!0}run(s){return!this.done&&(s()===!0&&(this._didWork=!0),!0)}get done(){return this._didWork&&this.elapsed>=this._budget&&this._enabled}get budget(){return this._budget}madeProgress(){this._didWork=!0}get state(){return this._state}get enabled(){return this._enabled}set enabled(s){this._enabled=s}reset(s,o){this._begin=this.now(),this._budget=s,this._state=o,this._didWork=!1}get remaining(){return Math.max(this._budget-this.elapsed,0)}get elapsed(){return this.now()-this._begin}resetProgress(){this._didWork=!1}get hasProgressed(){return this._didWork}}e.Budget=i})(HP||(HP={})),function(e){e.SCHEDULED="s",e.READY="r",e.WAITING="w",e.IDLE="i"}(Dp||(Dp={}));const cte=(()=>{const e=new HP.Budget(()=>performance.now());return e.enabled=!1,e})();class cAe{remove(){}processQueue(){}schedule(t,r,i){try{if(wl(r)){const n=Zr();return i?Promise.resolve(i(n)):Promise.reject(n)}return j3(t(cte))}catch(n){return Promise.reject(n)}}reschedule(t,r,i){return this.schedule(t,r,i)}}const WP=new cAe,rS=Number.MAX_SAFE_INTEGER;class hAe{constructor(t,r){this._stage=t,this._textureRequests=new Map,this._frameTask=U(r)?r.registerTask(Rt.TEXTURE_UNLOAD):WP}destroy(){this._frameTask.remove(),this._textureRequests.forEach(t=>this._releaseTextureRequest(t)),this._textureRequests.clear()}fromData(t,r){const i=this.makeUid(t);let n=this._textureRequests.get(i);return n||(n={referenceCount:0,texture:r(),textureAsync:null,abortController:null},this._stage&&(this._stage.add(n.texture),this._stage.loadSynchronous(n.texture)),this._textureRequests.set(i,n)),n.referenceCount++,{uid:i,texture:n.texture,release:()=>this._release(i)}}_release(t){if(!this._textureRequests)return;const r=this._textureRequests.get(t);r?(r.referenceCount<1&&console.warn("TextureCollection: reference count is < 1 for "+t),r.referenceCount--,r.referenceCount<1&&this._frameTask.schedule(()=>this._releaseNow(t))):console.warn(`TextureCollection: texture doesn't exist: '${t}'`)}get test(){return{textureRequests:this._textureRequests}}_releaseNow(t){if(!this._textureRequests)return;const r=this._textureRequests.get(t);!r||r.referenceCount>0||(this._releaseTextureRequest(r),this._textureRequests.delete(t))}_releaseTextureRequest(t){var r;t.texture?(r=this._stage)==null||r.remove(t.texture):t.abortController&&(t.abortController.abort(),t.abortController=null)}makeUid(t,r=null){return U(r)?`${t}.${r}px`:t}}const hte=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],dte={};function pte(e){return!!dte[e]}function dAe(e){for(const t of e)if(!pte(t))return!1;return!0}hte.forEach(e=>{dte[e]=!0});class pAe{constructor(t){this.handlers=new Map,this.counter=0,this.handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this.handlers.forEach(({handler:r,priority:i},n)=>this.inputManager.installHandlers(n,[r],i))}disconnect(){this.inputManager&&this.handlers.forEach((t,r)=>this.inputManager.uninstallHandlers(r)),this.inputManager=null}destroy(){this.disconnect(),this.handlers.clear(),this.view=null}on(t,r,i,n){const s=Array.isArray(t)?t:t.split(",");if(!dAe(s))return s.some(pte)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(r)?a=r:(o=r,a=[]),typeof i=="function"?o=i:n=i,n=n??Qd.DEFAULT;const l=this.createUniqueGroupName(),u=new fAe(this.view,s,a,o);this.handlers.set(l,{handler:u,priority:n});for(const h of s){const d=this.handlerCounts.get(h)||0;this.handlerCounts.set(h,d+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],n),{remove:()=>this.removeHandler(l,s)}}hasHandler(t){return!!this.handlerCounts.get(t)}removeHandler(t,r){if(this.handlers.has(t)){this.handlers.delete(t);for(const i of r){const n=this.handlerCounts.get(i);n===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):n===1?this.handlerCounts.delete(i):this.handlerCounts.set(i,n-1)}}this.inputManager&&this.inputManager.uninstallHandlers(t)}createUniqueGroupName(){return this.counter+=1,`viewEvents_${this.counter}`}}class fAe extends on{constructor(t,r,i,n){super(!0),this.view=t;for(const s of r)switch(s){case"click":this.registerIncoming("click",i,o=>n(this.wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",i,o=>n(this.wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>n(this.wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>n(this.wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",i,o=>n(this.wrapHold(o)));break;case"drag":this.registerIncoming("drag",i,o=>{const a=this.wrapDrag(o);a&&n(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>n(this.wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>n(this.wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>n(this.wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>n(this.wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>n(this.wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>n(this.wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>n(this.wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>n(this.wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>n(this.wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{n(this.wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",i,o=>{n(this.wrapFocus(o))});break;case"blur":this.registerIncoming("blur",i,o=>{n(this.wrapBlur(o))})}}wrapFocus(t){return{type:"focus",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}wrapBlur(t){return{type:"blur",timestamp:t.timestamp,native:t.data.native,cancelable:t.cancelable,stopPropagation:()=>t.stopPropagation(),async:r=>t.async(r),preventDefault:()=>t.preventDefault()}}wrapClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,screenPoint:tn(s,o),mapPoint:this.getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}wrapDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,{cancelable:u,timestamp:h}=t;return{type:"double-click",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:h,mapPoint:this.getMapPoint(s,o),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:d=>t.async(d),preventDefault:()=>t.preventDefault()}}wrapImmediateClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:d}=t;return{type:"immediate-click",pointerId:u,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:this.getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}wrapImmediateDoubleClick(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:h,timestamp:d}=t;return{type:"immediate-double-click",pointerId:u,pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:d,mapPoint:this.getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}wrapHold(t){const{pointerType:r,button:i,buttons:n,x:s,y:o,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:r,button:i,buttons:n,x:s,y:o,native:a,timestamp:u,mapPoint:this.getMapPoint(s,o),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}getMapPoint(t,r){return this.view.toMap(tn(t,r),{exclude:[]})}wrapDrag(t){const r=t.data,{x:i,y:n}=r.center,{action:s,pointerType:o,button:a}=r;if(s==="start"&&(this.latestDragStart=r),!this.latestDragStart)return;const l=r.pointer.native,u=r.buttons,{cancelable:h,timestamp:d}=t,f={x:this.latestDragStart.center.x,y:this.latestDragStart.center.y};return s==="end"&&(this.latestDragStart=void 0),{type:"drag",action:s,x:i,y:n,origin:f,pointerType:o,button:a,buttons:u,radius:r.radius,angle:hJ(r.angle),native:l,timestamp:d,cancelable:h,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}wrapKeyDown(t){const{key:r,repeat:i,native:n}=t.data,{cancelable:s,timestamp:o}=t;return{type:"key-down",key:r,repeat:i,native:n,timestamp:o,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:a=>t.async(a),preventDefault:()=>t.preventDefault()}}wrapKeyUp(t){const{key:r,native:i}=t.data,{cancelable:n,timestamp:s}=t;return{type:"key-up",key:r,native:i,timestamp:s,cancelable:n,stopPropagation:()=>t.stopPropagation(),async:o=>t.async(o),preventDefault:()=>t.preventDefault()}}wrapPointer(t,r){const{x:i,y:n,button:s,buttons:o,native:a,eventId:l}=t.data,u=a.pointerId,h=a.pointerType,{cancelable:d,timestamp:f}=t;return{type:r,x:i,y:n,pointerId:u,pointerType:h,button:s,buttons:o,native:a,timestamp:f,eventId:l,cancelable:d,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}wrapPointerDrag(t){const{x:r,y:i,buttons:n,native:s,eventId:o}=t.data.currentEvent,{button:a}=t.data.startEvent,l=t.data.startEvent.native.pointerId,u=t.data.startEvent.native.pointerType,h=t.data.action,d={x:t.data.startEvent.x,y:t.data.startEvent.y},{cancelable:f,timestamp:m}=t;return{type:"pointer-drag",x:r,y:i,pointerId:l,pointerType:u,button:a,buttons:n,action:h,origin:d,native:s,timestamp:m,eventId:o,cancelable:f,stopPropagation:()=>t.stopPropagation(),async:g=>t.async(g),preventDefault:()=>t.preventDefault()}}wrapMouseWheel(t){const{cancelable:r,data:i,timestamp:n}=t,{x:s,y:o,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:n,cancelable:r,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}wrapGamepad(t){const{action:r,state:i,device:n}=t.data,{cancelable:s,timestamp:o}=t,{buttons:a,axes:l}=i;return{type:"gamepad",device:n,timestamp:o,action:r,buttons:a,axes:l,cancelable:s,stopPropagation:()=>t.stopPropagation(),async:u=>t.async(u),preventDefault:()=>t.preventDefault()}}}function mAe(e){return[e.on("after-add",t=>{const r=t.item;r.view&&r.view.ready&&!r.attached&&r.attach()}),e.on("after-remove",t=>{const r=t.item;r.active&&(r.view.activeTool=null),r.attached&&r.detach()})]}function NI(e){return e.visible&&e.getEditableFlag(0)&&e.getEditableFlag(1)}function fu(e){return tn(e.x,e.y)}function fte(e,t){const r=(e instanceof HTMLElement?e:e.surface).getBoundingClientRect();return tn(t.clientX-r.left,t.clientY-r.top)}function lz(e,t){return t instanceof Event?fte(e,t):fu(t)}function uz(e){if(e instanceof Event)return!0;if(typeof e=="object"&&"type"in e)switch(e.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}class yAe{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._currentlyActiveTool=null,this._revertToActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}handleInputEvent(t,r){const i=()=>t.stopPropagation();switch(t.type){case"pointer-move":cz(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!hz(t))break;const n=fu(t),s=this._intersect(n,t.pointerType,r.forEachTool);if(ce(s))break;const o=this._findToolAndManipulatorByKey(s,r.forEachTool,iS),a=y1(o,u=>u.manipulator),l=y1(o,u=>u.tool);!(U(a)&&U(l)&&a.interactive)||a.grabbable&&a.grabbableForEvent(t)||!a.grabbing||a.dragging||this._ungrabManipulatorBeforeDragging(a,l,t),U(a)&&a.interactive&&a.grabbable&&a.grabbableForEvent(t)&&!a.grabbing&&(this._grabbedManipulators.set(t.pointerId,{key:s,start:n,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&r.activeTool!==s.tool&&(this._currentlyActiveTool=r.activeTool,this._revertToActiveTool=!0,r.setActiveTool(s.tool)),a.grabbing=!0,a.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:n}),i());break}case"pointer-up":this._handlePointerEnd(t,r);break;case"pointer-drag":{if(!hz(t))break;const n=this._grabbedManipulators.get(t.pointerId),s=this._draggedManipulators.get(t.pointerId),o=y1(n||s,({key:h})=>h),a=this._findManipulatorByKey(o,r.forEachTool);if(ce(a))break;const l=fu(t);l.x=xl(l.x,0,r.view.width),l.y=xl(l.y,0,r.view.height);const u=(n||s).start;switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(a.dragging=!0,s?a.events.emit("drag",{action:"update",start:u,screenPoint:l}):a.events.emit("drag",{action:"start",start:u,screenPoint:l,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{key:o,start:u}));break;case"end":a.dragging=!1,s&&a.events.emit("drag",{action:"end",start:u,screenPoint:l}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,r)}i();break}case"immediate-click":{const n=fu(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findToolAndManipulatorByKey(s,r.forEachTool,iS);if(gAe(t)||r.forEachTool(h=>{if((!U(o)||o.tool!==h||h.automaticManipulatorSelection)&&h.manipulators){let d=!1;h.manipulators.forEach(({manipulator:f})=>{f.selected&&(f.selected=!1,d=!0)}),d&&h.manipulatorSelectionChanged&&h.manipulatorSelectionChanged()}}),ce(o))break;const{manipulator:a,tool:l}=o;if(!a.interactive)break;a.selectable&&l.automaticManipulatorSelection&&(a.selected=!a.selected,l.manipulatorSelectionChanged&&l.manipulatorSelectionChanged());const u=t.native.shiftKey;a.events.emit("immediate-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:u,stopPropagation:i});break}case"click":{const n=fu(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(ce(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit(t.type,{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{const n=fu(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(ce(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}case"immediate-double-click":{const n=fu(t),s=this._intersect(n,t.pointerType,r.forEachTool),o=this._findManipulatorByKey(s,r.forEachTool);if(ce(o)||!o.interactive)break;const a=t.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:n,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i});break}}this._updateCursor(r.forEachTool)}_ungrabManipulatorBeforeDragging(t,r,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:i.pointerType,screenPoint:fu(i)}),this._grabbedManipulators.forEach(({key:n},s)=>{n.tool===r&&r.manipulators.findById(n.manipulatorId)===t&&this._grabbedManipulators.delete(s)})}_handlePointerEnd(t,r){const i=y1(this._grabbedManipulators.get(t.pointerId),({key:s})=>s),n=this._findManipulatorByKey(i,r.forEachTool);U(n)&&!n.dragging&&(this._grabbedManipulators.size===1&&this._draggedManipulators.size===0&&this._revertToActiveTool&&(r.setActiveTool(this._currentlyActiveTool),this._revertToActiveTool=!1,this._currentlyActiveTool=null),n.grabbing&&(n.grabbing=!1,n.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:fu(t)})),this._grabbedManipulators.delete(t.pointerId))}_cursorFromMap(t,r){let i=null;return BT(t,({key:n})=>{const s=this._findManipulatorByKey(n,r);return!!(U(s)&&s.interactive&&"cursor"in s&&s.cursor)&&(i=s.cursor,!0)}),i}_updateCursor(t){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators,t)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators,t)||"pointer":this._cursor=null}clearPointers(t,r,i=!0,n){const s=o=>o.tool===t&&(ce(n)||o.manipulatorId===n);this._grabbedManipulators.forEach(({key:o,pointerType:a},l)=>{if(s(o)){this._grabbedManipulators.delete(l);const u=this._findManipulatorByKey(o,r);U(u)&&(u.grabbing=!1,u.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:a}))}}),this._draggedManipulators.forEach(({key:o},a)=>{if(s(o)){this._draggedManipulators.delete(a);const l=this._findManipulatorByKey(o,r);U(l)&&(l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}}),i&&this._hoveredManipulators.forEach(({key:o},a)=>{if(s(o)){this._hoveredManipulators.delete(a);const l=this._findManipulatorByKey(o,r);U(l)&&(l.hovering=!1)}}),this._updateCursor(r)}_intersect(t,r,i){let n=null;return i(s=>{if(s.manipulators==null||!NI(s))return!1;const o=s.manipulators.intersect(t,r);return!ce(o)&&(n={manipulatorId:o.id,tool:s},!0)}),n}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((r,i)=>{this._updateHoveredStateForPointerAtScreenPosition(tn(r.x,r.y),i,r.pointerType,t)})}handleHoverEvent(t,r){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!cz(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(fu(t),t.pointerId,t.pointerType,r)}_updateHoveredStateForPointerAtScreenPosition(t,r,i,n){const s=this._intersect(t,i,n);let o=this._findManipulatorByKey(s,n);const a=y1(this._hoveredManipulators.get(r),({key:u})=>u),l=this._findManipulatorByKey(a,n);U(o)&&!o.interactive&&(o=null),l!==o&&(U(l)&&(l.hovering=!1),U(o)?(o.hovering=!0,this._hoveredManipulators.set(r,{key:s})):this._hoveredManipulators.delete(r),this._updateCursor(n))}_findManipulatorByKey(t,r){return this._findToolAndManipulatorByKey(t,r,iS)?iS.manipulator:null}_findToolAndManipulatorByKey(t,r,i){return ce(t)?null:(i.tool=null,i.manipulator=null,r(n=>{if(n!==t.tool||n.manipulators==null||!NI(n))return!1;const s=n.manipulators.findById(t.manipulatorId);return!!U(s)&&(i.manipulator=s,i.tool=n,!0)}),i.manipulator?i:null)}}function cz(e){return e==="mouse"}function hz(e){return e.pointerType!=="mouse"||e.button===0}function gAe(e){return!!e.native.shiftKey}const iS={manipulator:null,tool:null},k5=Te.getLogger("esri.views.ToolViewManager"),dz="attached",O5="tools";let Pc=class extends Z0{constructor(e){super(e),this._manipulatorState=new yAe,this.tools=new Je,this.cursor=null,this._forEachTool=t=>{for(const r of this.tools.items)if(t(r))return}}initialize(){this.handles.add([this.view.on(hte,e=>{this._handleInputEvent(e)},Qd.TOOL),...mAe(this.tools),this.tools.on("before-add",e=>{const t=e.item;if(t==null||this.tools.includes(t))return k5.warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault()}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._forEachTool)}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this._forEachTool(e=>e.destroy())}set activeTool(e){if(U(e)&&!this.view.ready)return void k5.error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return void(U(e)&&k5.warn("Tool is already active - ignoring activation request."));U(this.activeTool)&&this.activeTool.deactivate(),U(e)&&e.activate(),this._set("activeTool",e),this._removeIncompleteTools(e);const t=ce(this.activeTool);for(const r of this.tools){r.setEditableFlag(1,t||r===this.activeTool);const i=NI(r);!t&&i||this._manipulatorState.clearPointers(r,this._forEachTool,!i)}this._updateCursor()}get updating(){return this.updatingHandles.updating||this.tools.some(e=>e.updating)}attach(){this._forEachTool(e=>e.attach()),this.view.type==="3d"?(this._set("textures",new hAe(this.view._stage,this.view.resourceController.scheduler)),this.handles.add([this.view.state.watch("camera",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}),this.view.elevationProvider.on("elevation-change",e=>{this._forEachManipulator(t=>{t.onElevationChange!=null&&t.onElevationChange(e)})}),DT(()=>this._set("textures",Tu(this.textures)))],dz)):this.handles.add(this.view.watch("extent",()=>{this._forEachManipulator(e=>{e.onViewChange!=null&&e.onViewChange()})}))}detach(){U(this.activeTool)&&(this.activeTool=null),this._forEachTool(e=>{e.detach(),e.destroy()}),this.tools.removeAll(),this.handles.remove(dz)}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:r})=>e(r,t))})}_handleInputEvent(e){let t=!1;const r={...e,stopPropagation:()=>{t=!0,e.stopPropagation()}};U(this.activeTool)?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(r):this._forEachTool(i=>{!t&&i.attached&&i.visible&&i.handleInputEvent(r)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(r,{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:i=>{this.activeTool=i},view:this.view}),!t&&U(this.activeTool)&&this.activeTool.handleInputEventAfter(r),this._manipulatorState.handleHoverEvent(r,this._forEachTool),this._updateCursor()}_refreshToolWatchers(){this.handles.remove(O5),this._forEachTool(e=>{if(e instanceof Ze){const t=sr(e,["cursor","visible","editable"],()=>{NI(e)||this._manipulatorState.clearPointers(e,this._forEachTool),this._updateCursor()});this.handles.add(t,O5)}e.manipulators&&this.handles.add(e.manipulators.on("change",t=>{t.removed.forEach(({id:r})=>{this._manipulatorState.clearPointers(e,this._forEachTool,!0,r)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}),O5)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateCursor(){let e=this._manipulatorState.cursor;this._forEachTool(t=>!(!U(t.cursor)||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(ce(e)||t!==e)&&!t.completed).forEach(t=>{this.tools.remove(t),t.destroy()})}};c([p({constructOnly:!0,nonNullable:!0})],Pc.prototype,"view",void 0),c([p({readOnly:!0,nonNullable:!0})],Pc.prototype,"textures",void 0),c([p({value:null})],Pc.prototype,"activeTool",null),c([p({readOnly:!0,type:Je})],Pc.prototype,"tools",void 0),c([p({readOnly:!0})],Pc.prototype,"cursor",void 0),c([p({readOnly:!0})],Pc.prototype,"updating",null),Pc=c([N("esri.views.ToolViewManager")],Pc);const vAe=Pc;let Dg=class extends Ze{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":bAe.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){return(navigator.getGamepads?navigator.getGamepads():[])[this.nativeIndex]}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return wAe[this.deviceType]}};c([p({nonNullable:!0,readOnly:!0})],Dg.prototype,"nativeIndex",void 0),c([p({type:String,readOnly:!0})],Dg.prototype,"deviceType",null),c([p({type:Number,readOnly:!0})],Dg.prototype,"axisThreshold",null),Dg=c([N("esri.views.input.gamepad.GamepadInputDevice")],Dg);const bAe=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),wAe={standard:.15,spacemouse:.025,unknown:0},i8=Dg;let Wb=class extends Ze{constructor(...e){super(...e),this.devices=new Je,this.enabledFocusMode="document"}};c([p({type:Je.ofType(i8),readOnly:!0})],Wb.prototype,"devices",void 0),c([p({type:["document","view","none"]})],Wb.prototype,"enabledFocusMode",void 0),Wb=c([N("esri.views.input.gamepad.GamepadSettings")],Wb);const _Ae=Wb;let l3=class extends Ze{constructor(){super(...arguments),this.gamepad=new _Ae}};c([p({readOnly:!0})],l3.prototype,"gamepad",void 0),l3=c([N("esri.views.input.Input")],l3);const xAe=l3;let xd=class extends Ze{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([p({type:Boolean,nonNullable:!0})],xd.prototype,"enabled",void 0),c([p({type:i8})],xd.prototype,"device",void 0),c([p({type:["pan","zoom"],nonNullable:!0})],xd.prototype,"mode",void 0),c([p({type:["forward-down","forward-up"],nonNullable:!0})],xd.prototype,"tiltDirection",void 0),c([p({type:Number,nonNullable:!0})],xd.prototype,"velocityFactor",void 0),xd=c([N("esri.views.navigation.gamepad.GamepadSettings")],xd);const mte=xd;let Cf=class extends Ze{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new mte,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([p({type:Boolean})],Cf.prototype,"browserTouchPanEnabled",void 0),c([p({type:mte,nonNullable:!0})],Cf.prototype,"gamepad",void 0),c([p({type:Boolean})],Cf.prototype,"momentumEnabled",void 0),c([p({type:Boolean})],Cf.prototype,"mouseWheelZoomEnabled",void 0),Cf=c([N("esri.views.navigation.Navigation")],Cf);const yte=Cf;let P5,se=null;function gte(){return!!se}function SAe(){return!!ge("esri-wasm")}function vte(){return P5||(P5=ae(()=>import("./pe-wasm.bbd7a0c0.js"),[]).then(e=>e.p).then(({default:e})=>e({locateFile:t=>Zt(`esri/geometry/support/${t}`)})).then(e=>{wte(e)}),P5)}var JP,Rr,ZP;(function(e){function t(s,o,a){se.ensureCache.prepare();const l=Gf(a),u=a===l,h=se.ensureFloat64(l),d=se._pe_geog_to_proj(se.getPointer(s),o,h);return d&&Od(a,o,h,u),d}function r(s,o,a,l){switch(l){case Rr.PE_TRANSFORM_P_TO_G:return i(s,o,a);case Rr.PE_TRANSFORM_G_TO_P:return t(s,o,a)}return 0}function i(s,o,a){return n(s,o,a,0)}function n(s,o,a,l){se.ensureCache.prepare();const u=Gf(a),h=a===u,d=se.ensureFloat64(u),f=se._pe_proj_to_geog_center(se.getPointer(s),o,d,l);return f&&Od(a,o,d,h),f}e.geogToProj=t,e.projGeog=r,e.projToGeog=i,e.projToGeogCenter=n})(JP||(JP={})),function(e){function t(){e.PE_BUFFER_MAX=se.PeDefs.prototype.PE_BUFFER_MAX,e.PE_NAME_MAX=se.PeDefs.prototype.PE_NAME_MAX,e.PE_MGRS_MAX=se.PeDefs.prototype.PE_MGRS_MAX,e.PE_USNG_MAX=se.PeDefs.prototype.PE_USNG_MAX,e.PE_DD_MAX=se.PeDefs.prototype.PE_DD_MAX,e.PE_DDM_MAX=se.PeDefs.prototype.PE_DDM_MAX,e.PE_DMS_MAX=se.PeDefs.prototype.PE_DMS_MAX,e.PE_UTM_MAX=se.PeDefs.prototype.PE_UTM_MAX,e.PE_PARM_MAX=se.PeDefs.prototype.PE_PARM_MAX,e.PE_TYPE_NONE=se.PeDefs.prototype.PE_TYPE_NONE,e.PE_TYPE_GEOGCS=se.PeDefs.prototype.PE_TYPE_GEOGCS,e.PE_TYPE_PROJCS=se.PeDefs.prototype.PE_TYPE_PROJCS,e.PE_TYPE_GEOGTRAN=se.PeDefs.prototype.PE_TYPE_GEOGTRAN,e.PE_TYPE_COORDSYS=se.PeDefs.prototype.PE_TYPE_COORDSYS,e.PE_TYPE_UNIT=se.PeDefs.prototype.PE_TYPE_UNIT,e.PE_TYPE_LINUNIT=se.PeDefs.prototype.PE_TYPE_LINUNIT,e.PE_STR_OPTS_NONE=se.PeDefs.prototype.PE_STR_OPTS_NONE,e.PE_STR_AUTH_NONE=se.PeDefs.prototype.PE_STR_AUTH_NONE,e.PE_STR_AUTH_TOP=se.PeDefs.prototype.PE_STR_AUTH_TOP,e.PE_STR_NAME_CANON=se.PeDefs.prototype.PE_STR_NAME_CANON,e.PE_PARM_X0=se.PeDefs.prototype.PE_PARM_X0,e.PE_PARM_ND=se.PeDefs.prototype.PE_PARM_ND,e.PE_TRANSFORM_1_TO_2=se.PeDefs.prototype.PE_TRANSFORM_1_TO_2,e.PE_TRANSFORM_2_TO_1=se.PeDefs.prototype.PE_TRANSFORM_2_TO_1,e.PE_TRANSFORM_P_TO_G=se.PeDefs.prototype.PE_TRANSFORM_P_TO_G,e.PE_TRANSFORM_G_TO_P=se.PeDefs.prototype.PE_TRANSFORM_G_TO_P,e.PE_HORIZON_RECT=se.PeDefs.prototype.PE_HORIZON_RECT,e.PE_HORIZON_POLY=se.PeDefs.prototype.PE_HORIZON_POLY,e.PE_HORIZON_LINE=se.PeDefs.prototype.PE_HORIZON_LINE,e.PE_HORIZON_DELTA=se.PeDefs.prototype.PE_HORIZON_DELTA}e.init=t}(Rr||(Rr={})),function(e){const t={},r={},i=m=>{if(m){const g=m.getType();switch(g){case Rr.PE_TYPE_GEOGCS:m=se.castObject(m,se.PeGeogcs);break;case Rr.PE_TYPE_PROJCS:m=se.castObject(m,se.PeProjcs);break;case Rr.PE_TYPE_GEOGTRAN:m=se.castObject(m,se.PeGeogtran);break;default:g&Rr.PE_TYPE_UNIT&&(m=se.castObject(m,se.PeUnit))}}return m};function n(){se.PeFactory.prototype.initialize(null)}function s(m){return o(Rr.PE_TYPE_COORDSYS,m)}function o(m,g){let b=null,w=t[m];if(w||(w={},t[m]=w),w.hasOwnProperty(String(g)))b=w[g];else{const _=se.PeFactory.prototype.factoryByType(m,g);se.compare(_,se.NULL)||(b=_,w[g]=b)}return b=i(b),b}function a(m,g){let b=null,w=r[m];if(w||(w={},r[m]=w),w.hasOwnProperty(g))b=w[g];else{const _=se.PeFactory.prototype.fromString(m,g);se.compare(_,se.NULL)||(b=_,w[g]=b)}return b=i(b),b}function l(m){return o(Rr.PE_TYPE_GEOGCS,m)}function u(m){return o(Rr.PE_TYPE_GEOGTRAN,m)}function h(m){return se.PeFactory.prototype.getCode(m)}function d(m){return o(Rr.PE_TYPE_PROJCS,m)}function f(m){return o(Rr.PE_TYPE_UNIT,m)}e.initialize=n,e.coordsys=s,e.factoryByType=o,e.fromString=a,e.geogcs=l,e.geogtran=u,e.getCode=h,e.projcs=d,e.unit=f}(ZP||(ZP={}));let bte=null;var DI,YP,KP,XP,FI,QP,jI,VI,eR;function wte(e){function t(s,o,a){s[o]=a(s[o])}se=e,Rr.init(),DI.init(),FI.init(),jI.init(),VI.init(),bte=class extends se.PeGCSExtent{destroy(){se.destroy(this)}};const r=[se.PeDatum,se.PeGeogcs,se.PeGeogtran,se.PeObject,se.PeParameter,se.PePrimem,se.PeProjcs,se.PeSpheroid,se.PeUnit];for(const s of r)t(s.prototype,"getName",o=>function(){return o.call(this,new Array(Rr.PE_NAME_MAX))});for(const s of[se.PeGeogtran,se.PeProjcs])t(s.prototype,"getParameters",o=>function(){const a=new Array(Rr.PE_PARM_MAX);let l=o.call(this);for(let u=0;u<a.length;u++){const h=se.getValue(l,"*");a[u]=h?se.wrapPointer(h,se.PeParameter):null,l+=Int32Array.BYTES_PER_ELEMENT}return a});t(se.PeHorizon.prototype,"getCoord",s=>function(){const o=this.getSize();if(!o)return null;const a=[];return Od(a,o,s.call(this)),a}),t(se.PeGTlistExtendedEntry.prototype,"getEntries",s=>{const o=se._pe_getPeGTlistExtendedGTsSize();return function(){let a=null;const l=s.call(this);if(!se.compare(l,se.NULL)){a=[l];const u=this.getSteps();if(u>1){const h=se.getPointer(l);for(let d=1;d<u;d++)a.push(se.wrapPointer(h+o*d,se.PeGTlistExtendedGTs))}}return a}});const i=se._pe_getPeHorizonSize(),n=s=>function(){let o=this._cache;if(o||(o=new Map,this._cache=o),o.has(s))return o.get(s);let a=null;const l=s.call(this);if(!se.compare(l,se.NULL)){a=[l];const u=l.getNump();if(u>1){const h=se.getPointer(l);for(let d=1;d<u;d++)a.push(se.wrapPointer(h+i*d,se.PeHorizon))}}return o.set(s,a),a};t(se.PeProjcs.prototype,"horizonGcsGenerate",n),t(se.PeProjcs.prototype,"horizonPcsGenerate",n),se.PeObject.prototype.toString=function(s=Rr.PE_STR_OPTS_NONE){se.ensureCache.prepare();const o=se.getPointer(this),a=se.ensureInt8(new Array(Rr.PE_BUFFER_MAX));return se.UTF8ToString(se._pe_object_to_string_ext(o,s,a))}}function sc(e){if(!e)return;const t=se.getClass(e);if(!t)return;const r=se.getCache(t);if(!r)return;const i=se.getPointer(e);i&&delete r[i]}function nS(e,t){const r=[],i=new Array(t);for(let n=0;n<e;n++)r.push(se.ensureInt8(i));return r}function Gf(e){let t;return Array.isArray(e[0])?(t=[],e.forEach(r=>{t.push(r[0],r[1])})):t=e,t}function Od(e,t,r,i=!1){if(i)for(let n=0;n<2*t;n++)e[n]=se.getValue(r+n*Float64Array.BYTES_PER_ELEMENT,"double");else{const n=e.length===0;for(let s=0;s<t;s++)n&&(e[s]=new Array(2)),e[s][0]=se.getValue(r,"double"),e[s][1]=se.getValue(r+Float64Array.BYTES_PER_ELEMENT,"double"),r+=2*Float64Array.BYTES_PER_ELEMENT}}(function(e){let t;function r(){e.PE_GTLIST_OPTS_COMMON=se.PeGTlistExtended.prototype.PE_GTLIST_OPTS_COMMON,t=se._pe_getPeGTlistExtendedEntrySize()}function i(n,s,o,a,l,u){let h=null;const d=new se.PeInteger(u);try{const f=se.PeGTlistExtended.prototype.getGTlist(n,s,o,a,l,d);if((u=d.val)&&(h=[f],u>1)){const m=se.getPointer(f);for(let g=1;g<u;g++)h.push(se.wrapPointer(m+t*g,se.PeGTlistExtendedEntry))}}finally{se.destroy(d)}return h}e.init=r,e.getGTlist=i})(DI||(DI={})),function(e){function t(r){if(r&&r.length){for(const i of r)sc(i),i.getEntries().forEach(n=>{sc(n);const s=n.getGeogtran();sc(s),s.getParameters().forEach(sc),[s.getGeogcs1(),s.getGeogcs2()].forEach(o=>{sc(o);const a=o.getDatum();sc(a),sc(a.getSpheroid()),sc(o.getPrimem()),sc(o.getUnit())})});se.PeGTlistExtendedEntry.prototype.Delete(r[0])}}e.destroy=t}(YP||(YP={})),function(e){function t(r,i,n,s,o){se.ensureCache.prepare();const a=Gf(n),l=n===a,u=se.ensureFloat64(a);let h=0;s&&(h=se.ensureFloat64(s));const d=se._pe_geog_to_geog(se.getPointer(r),i,u,h,o);return d&&Od(n,i,u,l),d}e.geogToGeog=t}(KP||(KP={})),function(e){const t=(u,h,d,f,m,g)=>{let b,w;switch(se.ensureCache.prepare(),u){case"dd":b=se._pe_geog_to_dd,w=Rr.PE_DD_MAX;break;case"ddm":b=se._pe_geog_to_ddm,w=Rr.PE_DDM_MAX;break;case"dms":b=se._pe_geog_to_dms,w=Rr.PE_DMS_MAX}let _=0;h&&(_=se.getPointer(h));const x=Gf(f),I=se.ensureFloat64(x),S=nS(d,w),T=b(_,d,I,m,se.ensureInt32(S));if(T)for(let $=0;$<d;$++)g[$]=se.UTF8ToString(S[$]);return T},r=(u,h,d,f,m)=>{let g;switch(se.ensureCache.prepare(),u){case"dd":g=se._pe_dd_to_geog;break;case"ddm":g=se._pe_ddm_to_geog;break;case"dms":g=se._pe_dms_to_geog}let b=0;h&&(b=se.getPointer(h));const w=f.map(S=>se.ensureString(S)),_=se.ensureInt32(w),x=se.ensureFloat64(new Array(2*d)),I=g(b,d,_,x);return I&&Od(m,d,x),I};function i(u,h,d,f,m){return t("dms",u,h,d,f,m)}function n(u,h,d,f){return r("dms",u,h,d,f)}function s(u,h,d,f,m){return t("ddm",u,h,d,f,m)}function o(u,h,d,f){return r("ddm",u,h,d,f)}function a(u,h,d,f,m){return t("dd",u,h,d,f,m)}function l(u,h,d,f){return r("dd",u,h,d,f)}e.geog_to_dms=i,e.dms_to_geog=n,e.geog_to_ddm=s,e.ddm_to_geog=o,e.geog_to_dd=a,e.dd_to_geog=l}(XP||(XP={})),function(e){function t(){e.PE_MGRS_STYLE_NEW=se.PeNotationMgrs.prototype.PE_MGRS_STYLE_NEW,e.PE_MGRS_STYLE_OLD=se.PeNotationMgrs.prototype.PE_MGRS_STYLE_OLD,e.PE_MGRS_STYLE_AUTO=se.PeNotationMgrs.prototype.PE_MGRS_STYLE_AUTO,e.PE_MGRS_180_ZONE_1_PLUS=se.PeNotationMgrs.prototype.PE_MGRS_180_ZONE_1_PLUS,e.PE_MGRS_ADD_SPACES=se.PeNotationMgrs.prototype.PE_MGRS_ADD_SPACES}function r(n,s,o,a,l,u,h){se.ensureCache.prepare();let d=0;n&&(d=se.getPointer(n));const f=Gf(o),m=se.ensureFloat64(f),g=nS(s,Rr.PE_MGRS_MAX),b=se.ensureInt32(g),w=se._pe_geog_to_mgrs_extended(d,s,m,a,l,u,b);if(w)for(let _=0;_<s;_++)h[_]=se.UTF8ToString(g[_]);return w}function i(n,s,o,a,l){se.ensureCache.prepare();let u=0;n&&(u=se.getPointer(n));const h=o.map(g=>se.ensureString(g)),d=se.ensureInt32(h),f=se.ensureFloat64(new Array(2*s)),m=se._pe_mgrs_to_geog_extended(u,s,d,a,f);return m&&Od(l,s,f),m}e.init=t,e.geog_to_mgrs_extended=r,e.mgrs_to_geog_extended=i}(FI||(FI={})),function(e){function t(i,n,s,o,a,l,u){se.ensureCache.prepare();let h=0;i&&(h=se.getPointer(i));const d=Gf(s),f=se.ensureFloat64(d),m=nS(n,Rr.PE_MGRS_MAX),g=se.ensureInt32(m),b=se._pe_geog_to_usng(h,n,f,o,a,l,g);if(b)for(let w=0;w<n;w++)u[w]=se.UTF8ToString(m[w]);return b}function r(i,n,s,o){se.ensureCache.prepare();let a=0;i&&(a=se.getPointer(i));const l=s.map(f=>se.ensureString(f)),u=se.ensureInt32(l),h=se.ensureFloat64(new Array(2*n)),d=se._pe_usng_to_geog(a,n,u,h);return d&&Od(o,n,h),d}e.geog_to_usng=t,e.usng_to_geog=r}(QP||(QP={})),function(e){function t(){e.PE_UTM_OPTS_NONE=se.PeNotationUtm.prototype.PE_UTM_OPTS_NONE,e.PE_UTM_OPTS_ADD_SPACES=se.PeNotationUtm.prototype.PE_UTM_OPTS_ADD_SPACES,e.PE_UTM_OPTS_NS=se.PeNotationUtm.prototype.PE_UTM_OPTS_NS}function r(n,s,o,a,l){se.ensureCache.prepare();let u=0;n&&(u=se.getPointer(n));const h=Gf(o),d=se.ensureFloat64(h),f=nS(s,Rr.PE_UTM_MAX),m=se.ensureInt32(f),g=se._pe_geog_to_utm(u,s,d,a,m);if(g)for(let b=0;b<s;b++)l[b]=se.UTF8ToString(f[b]);return g}function i(n,s,o,a,l){se.ensureCache.prepare();let u=0;n&&(u=se.getPointer(n));const h=o.map(g=>se.ensureString(g)),d=se.ensureInt32(h),f=se.ensureFloat64(new Array(2*s)),m=se._pe_utm_to_geog(u,s,d,a,f);return m&&Od(l,s,f),m}e.init=t,e.geog_to_utm=r,e.utm_to_geog=i}(jI||(jI={})),function(e){const t=new Map;function r(){e.PE_PCSINFO_OPTION_NONE=se.PePCSInfo.prototype.PE_PCSINFO_OPTION_NONE,e.PE_PCSINFO_OPTION_DOMAIN=se.PePCSInfo.prototype.PE_PCSINFO_OPTION_DOMAIN,e.PE_POLE_OUTSIDE_BOUNDARY=se.PePCSInfo.prototype.PE_POLE_OUTSIDE_BOUNDARY,e.PE_POLE_POINT=se.PePCSInfo.prototype.PE_POLE_POINT}function i(n,s=e.PE_PCSINFO_OPTION_DOMAIN){let o,a;return t.has(n)&&(a=t.get(n),a[s]&&(o=a[s])),o||(o=se.PePCSInfo.prototype.generate(n,s),a||(a=[],t.set(n,a)),a[s]=o),o}e.init=r,e.generate=i}(VI||(VI={})),function(e){function t(){return se.PeVersion.prototype.version_string()}e.version_string=t}(eR||(eR={}));const MAe=Object.freeze({__proto__:null,get _pe(){return se},isLoaded:gte,isSupported:SAe,load:vte,get PeCSTransformations(){return JP},get PeDefs(){return Rr},get PeFactory(){return ZP},get PeGCSExtent(){return bte},get PeGTlistExtended(){return DI},get PeGTlistExtendedEntry(){return YP},get PeGTTransformations(){return KP},get PeNotationDms(){return XP},get PeNotationMgrs(){return FI},get PeNotationUsng(){return QP},get PeNotationUtm(){return jI},get PePCSInfo(){return VI},get PeVersion(){return eR},_init:wte}),Fp=Math.PI/180,IAe=/SPHEROID\[([^\]]+)]/i,Fh=ar.radius,Pa=ar.eccentricitySquared,TAe={a1:Fh*Pa,a2:Fh*Pa*Fh*Pa,a3:Fh*Pa*Pa/2,a4:Fh*Pa*Fh*Pa*2.5,a5:Fh*Pa+Fh*Pa*Pa/2,a6:1-Pa},$Ae={4267:{a:63782064e-1,f:1/294.9786982},4269:{a:6378137,f:1/298.257222101},4326:{a:ar.radius,f:ar.flattening},104900:{a:2439700,f:0},104901:{a:6051e3,f:0},104902:{a:6051800,f:0},104903:{a:fh.radius,f:fh.flattening},104904:{a:3393400,f:1/192.0430107526882},104905:{a:Ou.radius,f:Ou.flattening},104906:{a:6200,f:0},104907:{a:11100,f:0},104908:{a:71492e3,f:.06487439154031222},104909:{a:8200,f:0},104910:{a:83500,f:0},104911:{a:1e4,f:0},104912:{a:2409300,f:0},104913:{a:15e3,f:0},104914:{a:4e4,f:0},104915:{a:1562090,f:0},104916:{a:2632345,f:0},104917:{a:85e3,f:0},104918:{a:1821460,f:0},104919:{a:5e3,f:0},104920:{a:12e3,f:0},104921:{a:3e4,f:3},104922:{a:18e3,f:0},104923:{a:14e3,f:0},104924:{a:49300,f:0},104925:{a:60268e3,f:1/10.2079945799458},104926:{a:16e3,f:0},104927:{a:9500,f:0},104928:{a:56e4,f:0},104929:{a:249400,f:0},104930:{a:59500,f:0},104931:{a:16e3,f:0},104932:{a:133e3,f:0},104933:{a:718e3,f:0},104934:{a:888e3,f:0},104935:{a:1986300,f:0},104936:{a:1e4,f:0},104937:{a:41900,f:0},104938:{a:11e4,f:0},104939:{a:50100,f:0},104940:{a:764e3,f:0},104941:{a:11e3,f:0},104942:{a:529800,f:0},104943:{a:2575e3,f:0},104944:{a:25559e3,f:1/43.61604095563141},104945:{a:578900,f:0},104946:{a:33e3,f:0},104947:{a:21e3,f:0},104948:{a:13e3,f:0},104949:{a:31e3,f:0},104950:{a:27e3,f:0},104951:{a:42e3,f:0},104952:{a:235800,f:0},104953:{a:761400,f:0},104954:{a:15e3,f:0},104955:{a:54e3,f:0},104956:{a:77e3,f:0},104957:{a:27e3,f:0},104958:{a:788900,f:0},104959:{a:584700,f:0},104960:{a:24764e3,f:.01708124697141011},104961:{a:74e3,f:0},104962:{a:79e3,f:0},104963:{a:104e3,f:.14423076923076922},104964:{a:29e3,f:0},104965:{a:17e4,f:0},104966:{a:208e3,f:0},104967:{a:4e4,f:0},104968:{a:1352600,f:0},104969:{a:1195e3,f:0},104970:{a:593e3,f:0},104971:{a:Ou.radius,f:0},104972:{a:47e4,f:0},104973:{a:255e3,f:0},104974:{a:2439400,f:0}};let sS=0;class M0{constructor(t=null){this.uid=sS++,t?(this._wkt=t.wkt!==void 0?t.wkt:null,this._wkid=t.wkid!==void 0?t.wkid:-1,this._isInverse=t.isInverse!==void 0&&t.isInverse===!0):(this._wkt=null,this._wkid=-1,this._isInverse=!1)}static fromGE(t){const r=new M0;return r._wkt=t.wkt,r._wkid=t.wkid,r._isInverse=t.isInverse,r}get wkt(){return this._wkt}set wkt(t){this._wkt=t,this.uid=sS++}get wkid(){return this._wkid}set wkid(t){this._wkid=t,this.uid=sS++}get isInverse(){return this._isInverse}set isInverse(t){this._isInverse=t,this.uid=sS++}getInverse(){const t=new M0;return t._wkt=this.wkt,t._wkid=this._wkid,t._isInverse=!this.isInverse,t}}class Ud{constructor(t){if(this.steps=[],this._cached_projection={},this._chain="",this._gtlistentry=null,t&&t.steps)for(const r of t.steps)r instanceof M0?this.steps.push(r):this.steps.push(new M0({wkid:r.wkid,wkt:r.wkt,isInverse:r.isInverse}))}static cacheKey(t,r){return[t.wkid!==void 0&&t.wkid!==null?t.wkid.toString():"-1",t.wkt!==void 0&&t.wkt!==null?t.wkt.toString():"",r.wkid!==void 0&&r.wkid!==null?r.wkid.toString():"-1",r.wkt!==void 0&&r.wkt!==null?r.wkt.toString():""].join(",")}static fromGE(t){const r=new Ud;let i="";for(const n of t.steps){const s=M0.fromGE(n);r.steps.push(s),i+=s.uid.toString()+","}return r._cached_projection={},r._gtlistentry=null,r._chain=i,r}getInverse(){const t=new Ud;t.steps=[];for(let r=this.steps.length-1;r>=0;r--){const i=this.steps[r];t.steps.push(i.getInverse())}return t}getGTListEntry(){let t="";for(const r of this.steps)t+=r.uid.toString()+",";return t!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=t),this._gtlistentry}assignCachedGe(t,r,i){this._cached_projection[Ud.cacheKey(t,r)]=i}getCachedGeTransformation(t,r){let i="";for(const s of this.steps)i+=s.uid.toString()+",";i!==this._chain&&(this._gtlistentry=null,this._cached_projection={},this._chain=i);const n=this._cached_projection[Ud.cacheKey(t,r)];return n===void 0?null:n}}let Ym=null,UI=null,R5=null,L5={};function n8(){return!!Ym&&gte()}function pz(e){return ce(R5)&&(R5=Promise.all([vte(),ae(()=>import("./geometryEngineBase.fd888c07.js"),[]).then(t=>t.g),ae(()=>import("./hydrated.ff8be8a9.js"),[])])),R5.then(([,t,{hydratedAdapter:r}])=>{$r(e),UI=r,Ym=t.default,Ym._enableProjection(MAe)})}function _te(e,t,r=null){return Array.isArray(e)?e.length===0?[]:fz(UI,e,e[0].spatialReference,t,r):fz(UI,[e],e.spatialReference,t,r)[0]}function fz(e,t,r,i,n=null){if(ce(r)||ce(i))return t;if(zI(r,i,n))return t.map(s=>AAe(s,r,i));if(ce(n)){const s=Ud.cacheKey(r,i);L5[s]!==void 0?n=L5[s]:(n=EAe(r,i,null),ce(n)&&(n=new Ud),L5[s]=n)}if(ce(Ym))throw new xte;return Ym._project(e,t,r,i,n)}function EAe(e,t,r=null){if(ce(Ym))throw new xte;if(ce(e)||ce(t))return null;const i=Ym._getTransformation(UI,e,t,r,r?.spatialReference);return i!==null?Ud.fromGE(i):null}class xte extends Z{constructor(){super("projection:not-loaded","projection engine not fully loaded yet, please call load()")}}function zI(e,t,r){return!r&&(!!Ll(e,t)||Ks(e)&&Ks(t)&&!!Tte(e,t,Ate))}async function hit(e,t,r,i){if(!n8()){if(Array.isArray(e)){for(const{source:n,dest:s,geographicTransformation:o}of e)if(!zI(n,s,o))return pz(i)}else if(!zI(e,t,r))return pz(i)}}function AAe(e,t,r){return e?"x"in e?CAe(e,t,new Ke,r,0):"xmin"in e?PAe(e,t,new nt,r,0):"rings"in e?Ste(e,t,new _n,r,0):"paths"in e?OAe(e,t,new Vi,r,0):"points"in e?kAe(e,t,new xp,r,0):null:null}function CAe(e,t,r,i,n){$i[0]=e.x,$i[1]=e.y;const s=e.z;return $i[2]=s!==void 0?s:n,A2($i,t,0,$i,i,0,1)?(r.x=$i[0],r.y=$i[1],r.spatialReference=i,s===void 0?(r.z=void 0,r.hasZ=!1):(r.z=$i[2],r.hasZ=!0),e.m===void 0?(r.m=void 0,r.hasM=!1):(r.m=e.m,r.hasM=!0),r):null}function kAe(e,t,r,i,n){const{points:s,hasZ:o,hasM:a}=e,l=[],u=s.length,h=[];for(const d of s)h.push(d[0],d[1],o?d[2]:n);if(!A2(h,t,0,h,i,0,u))return null;for(let d=0;d<u;++d){const f=3*d,m=h[f],g=h[f+1];o&&a?l.push([m,g,h[f+2],s[d][3]]):o?l.push([m,g,h[f+2]]):a?l.push([m,g,s[d][2]]):l.push([m,g])}return r.points=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r}function OAe(e,t,r,i,n){const{paths:s,hasZ:o,hasM:a}=e,l=[];return Mte(s,o,a,t,l,i,n)?(r.paths=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function dit(e,t,r=t.spatialReference,i=0){return U(r)&&U(Ste(e,e.spatialReference,t,r,i))}function Ste(e,t,r,i,n){const{rings:s,hasZ:o,hasM:a}=e,l=[];return Mte(s,o,a,t,l,i,n)?(r.rings=l,r.spatialReference=i,r.hasZ=o,r.hasM=a,r):null}function PAe(e,t,r,i,n){const{xmin:s,ymin:o,xmax:a,ymax:l,hasZ:u,hasM:h}=e;return mz(s,o,u?e.zmin:n,t,$i,i)?(r.xmin=$i[0],r.ymin=$i[1],u&&(r.zmin=$i[2]),mz(a,l,u?e.zmax:n,t,$i,i)?(r.xmax=$i[0],r.ymax=$i[1],u&&(r.zmax=$i[2]),h&&(r.mmin=e.mmin,r.mmax=e.mmax),r.spatialReference=i,r):null):null}function pit(e,t,r,i=0){$i[0]=e.x,$i[1]=e.y;const n=e.z;return $i[2]=n!==void 0?n:i,A2($i,e.spatialReference,0,t,r,0,1)}function mz(e,t,r,i,n,s){return oS[0]=e,oS[1]=t,oS[2]=r,A2(oS,i,0,n,s,0,1)}function A2(e,t,r,i,n,s,o=1){const a=Tte(t,n,Ate);if(ce(a))return!1;if(a===fr){if(e===i&&r===s)return!0;const u=r+3*o;for(let h=r,d=s;h<u;h++,d++)i[d]=e[h];return!0}const l=r+3*o;for(let u=r,h=s;u<l;u+=3,h+=3)a(e,u,i,h);return!0}function Mte(e,t,r,i,n,s,o=0){const a=new Array;for(const u of e)for(const h of u)a.push(h[0],h[1],t?h[2]:o);if(!A2(a,i,0,a,s,0,a.length/3))return!1;let l=0;n.length=0;for(const u of e){const h=new Array;for(const d of u)t&&r?h.push([a[l++],a[l++],a[l++],d[3]]):t?h.push([a[l++],a[l++],a[l++]]):r?(h.push([a[l++],a[l++],d[2]]),l++):(h.push([a[l++],a[l++]]),l++);n.push(h)}return!0}function fit(e,t,r,i){if(ce(e)||ce(i))return!1;const n=M_(e,Ete),s=M_(i,YAe);if(n===s&&!yz(s)&&(n!==0||Ll(e,i)))return lI(r),$Y(r,r,t),!0;if(yz(s)){const o=s0[n][11],a=s0[11][s];return!ce(o)&&!ce(a)&&(o(t,0,jh,0),a(jh,0,Vh,0),Ite(Eu*jh[0],Eu*jh[1],r),r[12]=Vh[0],r[13]=Vh[1],r[14]=Vh[2],!0)}if(!(s!==3&&s!==12||n!==2&&n!==1&&n!==3)){const o=s0[n][11],a=s0[11][s];return!ce(o)&&!ce(a)&&(o(t,0,jh,0),a(jh,0,Vh,0),n===1?RAe(Eu*jh[0],Eu*jh[1],r):lI(r),r[12]=Vh[0],r[13]=Vh[1],r[14]=Vh[2],!0)}return!1}function yz(e){return e===1||e===7||e===9}function Ite(e,t,r){const i=Math.sin(e),n=Math.cos(e),s=Math.sin(t),o=Math.cos(t),a=r;return a[0]=-i,a[4]=-s*n,a[8]=o*n,a[12]=0,a[1]=n,a[5]=-s*i,a[9]=o*i,a[13]=0,a[2]=0,a[6]=o,a[10]=s,a[14]=0,a[3]=0,a[7]=0,a[11]=0,a[15]=1,a}function RAe(e,t,r){return Ite(e,t,r),Mh(r,r),r}function M_(e,t){return t.spatialReference===e?t.spatialReferenceId:(t.spatialReference=e,"metersPerUnit"in t&&(t.metersPerUnit=vy(e,1)),e.wkt===CN.wkt?t.spatialReferenceId=1:t_(e)?t.spatialReferenceId=2:Lm(e)?t.spatialReferenceId=3:Lhe(e)?t.spatialReferenceId=12:e.wkt===Pye.wkt?t.spatialReferenceId=4:e.wkid===4490?t.spatialReferenceId=5:e.wkt===h_.wkt?t.spatialReferenceId=7:e.wkt===d_.wkt?t.spatialReferenceId=9:Pv(e)?t.spatialReferenceId=8:Rv(e)?t.spatialReferenceId=10:t.spatialReferenceId=0)}function fr(e,t,r,i){e!==r&&(r[i++]=e[t++],r[i++]=e[t++],r[i]=e[t])}function I0(e,t,r,i){r[i++]=ev*(e[t++]/ar.radius),r[i++]=ev*(Math.PI/2-2*Math.atan(Math.exp(-e[t++]/ar.radius))),r[i]=e[t]}function LAe(e,t,r,i){I0(e,t,r,i),om(r,i,r,i)}function NAe(e,t,r,i){I0(e,t,r,i),lm(r,i,r,i)}function DAe(e,t,r,i,n){const s=.4999999*Math.PI,o=xl(Eu*e[t+1],-s,s),a=Math.sin(o);r[i++]=Eu*e[t]*n.radius,r[i++]=n.halfSemiMajorAxis*Math.log((1+a)/(1-a)),r[i]=e[t+2]}function I_(e,t,r,i){DAe(e,t,r,i,ar)}const gz=ar.radius*Math.PI/180,vz=180/(ar.radius*Math.PI);function nm(e,t,r,i){r[i]=e[t]*gz,r[i+1]=e[t+1]*gz,r[i+2]=e[t+2]}function sm(e,t,r,i){r[i]=e[t]*vz,r[i+1]=e[t+1]*vz,r[i+2]=e[t+2]}function FAe(e,t,r,i){I0(e,t,r,i),nm(r,i,r,i)}function jAe(e,t,r,i){um(e,t,r,i),nm(r,i,r,i)}function VAe(e,t,r,i){am(e,t,r,i),nm(r,i,r,i)}function UAe(e,t,r,i){sm(e,t,r,i),om(r,i,r,i)}function zAe(e,t,r,i){sm(e,t,r,i),I_(r,i,r,i)}function BAe(e,t,r,i){sm(e,t,r,i),lm(r,i,r,i)}function s8(e){if(ce(e))return!1;const t=M_(e,Ete);return!!s0[t][6]}function o8(e,t,r,i,n){const s=n+e[t+2],o=Eu*e[t+1],a=Eu*e[t],l=Math.cos(o);r[i++]=Math.cos(a)*l*s,r[i++]=Math.sin(a)*l*s,r[i]=Math.sin(o)*s}function bz(e,t,r,i){o8(e,t,r,i,fh.radius)}function wz(e,t,r,i){o8(e,t,r,i,Ou.radius)}function om(e,t,r,i){o8(e,t,r,i,ar.radius)}function a8(e,t,r,i,n){const s=e[t],o=e[t+1],a=e[t+2],l=Math.sqrt(s*s+o*o+a*a),u=dJ(a/(l===0?1:l)),h=Math.atan2(o,s);r[i++]=ev*h,r[i++]=ev*u,r[i]=l-n}function _z(e,t,r,i){a8(e,t,r,i,fh.radius)}function xz(e,t,r,i){a8(e,t,r,i,Ou.radius)}function am(e,t,r,i){a8(e,t,r,i,ar.radius)}function GAe(e,t,r,i){am(e,t,r,i),I_(r,i,r,i)}function qAe(e,t,r,i){am(e,t,r,i),lm(r,i,r,i)}function HAe(e,t,r,i,n){const s=Eu*e[t],o=Eu*e[t+1],a=e[t+2],l=Math.sin(o),u=Math.cos(o),h=n.radius/Math.sqrt(1-n.eccentricitySquared*l*l);r[i++]=(h+a)*u*Math.cos(s),r[i++]=(h+a)*u*Math.sin(s),r[i++]=(h*(1-n.eccentricitySquared)+a)*l}function lm(e,t,r,i){HAe(e,t,r,i,ar)}function um(e,t,r,i){const n=TAe,s=e[t],o=e[t+1],a=e[t+2];let l,u,h,d,f,m,g,b,w,_,x,I,S,T,$,E,C,O,R,D,F;l=Math.abs(a),u=s*s+o*o,h=Math.sqrt(u),d=u+a*a,f=Math.sqrt(d),D=Math.atan2(o,s),m=a*a/d,g=u/d,T=n.a2/f,$=n.a3-n.a4/f,g>.3?(b=l/f*(1+g*(n.a1+T+m*$)/f),R=Math.asin(b),_=b*b,w=Math.sqrt(1-_)):(w=h/f*(1-m*(n.a5-T-g*$)/f),R=Math.acos(w),_=1-w*w,b=Math.sqrt(_)),x=1-ar.eccentricitySquared*_,I=ar.radius/Math.sqrt(x),S=n.a6*I,T=h-I*w,$=l-S*b,C=w*T+b*$,E=w*$-b*T,O=E/(S/x+C),R+=O,F=C+E*O/2,a<0&&(R=-R),r[i++]=ev*D,r[i++]=ev*R,r[i]=F}function WAe(e,t,r,i){um(e,t,r,i),om(r,i,r,i)}function JAe(e,t,r,i){um(e,t,r,i),I_(r,i,r,i)}const s0={2:{5:null,8:null,10:null,11:fr,6:fr,1:om,7:null,9:null,0:null,3:I_,12:nm,2:fr,4:lm},5:{5:fr,8:null,10:null,11:fr,6:fr,1:om,7:null,9:null,0:null,3:null,12:nm,2:null,4:lm},8:{5:null,8:fr,10:null,11:fr,6:null,1:null,7:wz,9:null,0:null,3:null,12:null,2:null,4:null},10:{5:null,8:null,10:fr,11:fr,6:null,1:null,7:null,9:bz,0:null,3:null,12:null,2:null,4:null},3:{5:null,8:null,10:null,11:I0,6:I0,1:LAe,7:null,9:null,0:null,3:fr,12:FAe,2:I0,4:NAe},4:{5:um,8:null,10:null,11:um,6:um,1:WAe,7:null,9:null,0:null,3:JAe,12:jAe,2:um,4:fr},1:{5:am,8:null,10:null,11:am,6:am,1:fr,7:null,9:null,0:null,3:GAe,12:VAe,2:am,4:qAe},7:{5:null,8:xz,10:null,11:xz,6:null,1:null,7:fr,9:null,0:null,3:null,12:null,2:null,4:null},9:{5:null,8:null,10:_z,11:_z,6:null,1:null,7:null,9:fr,0:null,3:null,12:null,2:null,4:null},0:{5:null,8:null,10:null,11:null,6:null,1:null,7:null,9:null,0:fr,3:null,12:null,2:null,4:null},11:{5:fr,8:fr,10:fr,11:fr,6:fr,1:om,7:wz,9:bz,0:null,3:I_,12:nm,2:fr,4:lm},6:{5:null,8:null,10:null,11:fr,6:fr,1:om,7:null,9:null,0:null,3:null,12:nm,2:fr,4:lm},12:{5:sm,8:null,10:null,11:sm,6:sm,1:UAe,7:null,9:null,0:null,3:zAe,12:fr,2:sm,4:BAe}};function Tte(e,t,r=$te()){return ce(e)||ce(t)?null:ZAe(e,t,r).projector}function ZAe(e,t,r){if(ce(e)||ce(t)||r.source.spatialReference===e&&r.dest.spatialReference===t)return r;const i=M_(e,r.source),n=M_(t,r.dest);return i===0&&n===0?Ll(e,t)?r.projector=fr:r.projector=null:r.projector=s0[i][n],r}function $te(){return{source:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},dest:{spatialReference:null,spatialReferenceId:0,metersPerUnit:1},projector:fr}}const Ete={spatialReference:null,spatialReferenceId:0},YAe={spatialReference:null,spatialReferenceId:0},Ate=$te(),Eu=Yg(1),ev=hJ(1),oS=to(),jh=to(),Vh=to(),$i=to();function KAe(e){const t=e.url&&Wv(e.url);return!((e.spatialReference&&e.spatialReference.vcsWkid)==null&&U(t)&&t.serverType==="ImageServer")&&Cte(e)&&e.heightModelInfo?e.heightModelInfo:XAe(e)?c$.deriveUnitFromSR(eCe,e.spatialReference):null}function Cte(e){return"heightModelInfo"in e}function kte(e){if(e.type==="unknown"||!("capabilities"in e))return!1;switch(e.type){case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"wfs":return!0;default:return!1}}function XAe(e){return kte(e)?!!(e.capabilities&&e.capabilities.data&&e.capabilities.data.supportsZ):Ote(e)}function QAe(e){return e.layers!=null||Ote(e)||kte(e)||Cte(e)}function Ote(e){switch(e.type){case"building-scene":case"elevation":case"integrated-mesh":case"point-cloud":case"scene":case"voxel":return!0;case"analysis":case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"csv":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"map-image":case"map-notes":case"ogc-feature":case"open-street-map":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}const eCe=new c$({heightModel:"gravity-related-height"});function BI(e){return e===1?"global":"local"}const Sz=10,Pte=Te.getLogger("esri.views.support.DefaultsFromMap");Pte.level="info";let wr=class extends Ze{constructor(e){super(e),this._handles=new gi,this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.priorityCollection=null,this.logDebugInformation=!1,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._handles=Tu(this._handles),this._projectExtentTask.task&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=AA(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return U(this.userSpatialReference)?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return ce(this.userSpatialReference)||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){var e,t,r,i;const n=(e=this.map)==null?void 0:e.call(this),s=[];return U(this.priorityCollection)&&s.push(this.priorityCollection),s.push({parent:n?.basemap,layers:n==null||(t=n.basemap)==null?void 0:t.baseLayers},{layers:n?.layers},{parent:n?.ground,layers:n==null||(r=n.ground)==null?void 0:r.layers},{parent:n?.basemap,layers:n==null||(i=n.basemap)==null?void 0:i.referenceLayers}),s}get _allLayers(){var e,t;const r=this._collectLayers(this.mapCollections);return this._debug("Collected",(e=(t=r.layers)==null?void 0:t.length)!=null?e:0,"layers, updating",r.updating),r}get _spatialReferenceTask(){var e,t;if(this.suspended)return(t=this._get("_spatialReferenceTask"))!=null?t:{updating:!1};const{layers:r,updating:i}=this._allLayers,n={candidates:null};for(const o of r)if(this._processSpatialReferenceCandidates(o,n),n.candidates&&n.candidates.length===1)break;if(((e=n.candidates)==null?void 0:e.length)!==1&&i)return{updating:!0};const s=this._pickSpatialReferenceCandidate(n.candidates);return this._debug("Finished spatial reference",U(s)?`${s.spatialReference.wkid}:${U(s.viewingMode)?BI(s.viewingMode):"global/local"}`:"none available"),{spatialReference:U(s)?s.spatialReference:null,viewingMode:U(s)?s.viewingMode:null,updating:!1}}get _tileInfoTask(){var e,t,r,i,n,s,o,a;if(!this.required.tileInfo)return(a=this._get("_tileInfoTask"))!=null?a:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{layers:l,updating:u}=this._collectLayers([{parent:(e=this.map)==null||(t=e.call(this))==null?void 0:t.basemap,layers:(r=this.map)==null||(i=r.call(this))==null||(n=i.basemap)==null?void 0:n.baseLayers},{layers:(s=this.map)==null||(o=s.call(this))==null?void 0:o.layers}]);if(l&&l.length>0&&"tileInfo"in l[0]){const h=l[0].tileInfo;return{tileInfo:h&&h.spatialReference.equals(this.spatialReference)?h:null,updating:!1}}return{updating:u}}get _heightModelInfoTask(){var e,t;if(!this.required.heightModelInfo||this.suspended&&(e=this._get("_heightModelInfoTask"))!=null&&e.heightModelInfo)return(t=this._get("_heightModelInfoTask"))!=null?t:{updating:!1};const{layers:r,updating:i}=this._allLayers;for(const l of r){var n,s;if(this._debug("Considering",(n=(s=l.title)!=null?s:l.id)!=null?n:l.declaredClass,"for height model info"),QAe(l)){const u=KAe(l);var o,a;if(u)return this._debug("Derived height model info",u),{heightModelInfo:u,vcsWkid:(o=l.spatialReference)==null?void 0:o.vcsWkid,latestVcsWkid:(a=l.spatialReference)==null?void 0:a.latestVcsWkid,updating:!1}}this._debug("Layer does not support height models")}return this._debug("No height model info found,","updating",i),{updating:i}}get _extentCandidatesTask(){var e;if(this.suspended||!this.required.extent)return(e=this._get("_extentCandidatesTask"))!=null?e:{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const t=this._allLayers,r=t.updating,i=[];for(const n of t.layers){const s="fullExtents"in n&&n.fullExtents||(U(n.fullExtent)?[n.fullExtent]:[]),o=s.find(a=>a.spatialReference.equals(this.spatialReference));if(o)return{candidates:[{extent:o,layer:n}],updating:!1};if(this._getSupportedSpatialReferences(n).length>0)for(const a of s)i.push({extent:a,layer:n})}return{candidates:i,updating:r}}get _extentTask(){const{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(ce(e)||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};const{candidate:r,requiresGeometryService:i}=this._pickExtentCandidate(e),n=this.spatialReference;if(r.extent.equals(this._projectExtentTask.input)&&n.equals(this._projectExtentTask.spatialReference))return{extent:this._projectExtentTask.output,updating:U(this._projectExtentTask.task)&&!this._projectExtentTask.task.finished};if(U(this._projectExtentTask.task)&&(this._debug("Aborting project extent task"),this._projectExtentTask.task=AA(this._projectExtentTask.task)),!i){this._projectExtentTask={input:null,output:null,task:null,spatialReference:null};try{return{extent:_te(r.extent,n),updating:!1}}catch{return{updating:!1}}}return this._debug("Starting project extent task for",r.extent),this._projectExtentTask={input:r.extent.clone(),output:null,spatialReference:n.clone(),task:DH(async s=>{try{const o=await PL(ae(()=>import("./geometryServiceUtils.c2a111ef.js"),[]),s),a=await o.projectGeometry(r.extent,n,r.layer.portalItem,s);this._debug("Project extent task finished",a),this._projectExtentTask={...this._projectExtentTask,task:null,output:a}}catch{if(wl(s))return;this._projectExtentTask={...this._projectExtentTask,task:null}}})},{updating:!0}}_processSpatialReferenceCandidates(e,t){var r;const i=this._getSupportedSpatialReferences(e);if(i.length!==0)if(this._debug("Spatial reference candidates from",(r=e.title)!=null?r:e.id,":",i.map(n=>`${n.spatialReference.wkid}:${U(n.viewingMode)?BI(n.viewingMode):"global/local"}`).join(", ")),t.candidates){const n=[],s=(o,a)=>ce(o.viewingMode)?a.viewingMode:(ce(a.viewingMode)||o.viewingMode===a.viewingMode)&&o.viewingMode;for(const o of t.candidates)for(const a of i){if(!o.spatialReference.equals(a.spatialReference))continue;const l=s(o,a);if(l!==!1){n.push({spatialReference:o.spatialReference,viewingMode:l});break}}n.length>0&&(t.candidates=n)}else t.candidates=i}_pickSpatialReferenceCandidate(e){const t=this.defaultSpatialReference;return!e||e.length<1?U(t)?{spatialReference:t,viewingMode:null}:null:U(t)&&e.length>1&&e.some(({spatialReference:r})=>r.equals(t))?{spatialReference:t,viewingMode:null}:e[0]}_getSupportedSpatialReferences(e){const t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];const r=[];for(const i of t){const n=this.getSpatialReferenceSupport({spatialReference:i,layer:e});if(U(n)){const s=U(n.constraints)?n.constraints:[{spatialReference:i}];for(const{spatialReference:o,viewingMode:a}of s)(ce(this.userSpatialReference)||o.equals(this.userSpatialReference))&&r.push({spatialReference:o,viewingMode:a})}}return r}_pickExtentCandidate(e){const t=this.spatialReference,r=e.find(({extent:i})=>zI(i.spatialReference,t)||n8());return U(r)?{candidate:r,requiresGeometryService:!1}:{candidate:e[0],requiresGeometryService:!0}}_collectLayers(e){var t;if(this._loadMaybe((t=this.map)==null?void 0:t.call(this))!=="loaded")return{layers:[],updating:!0};const r={layers:[],preloading:-1,updating:!1};for(const i of e)if(this._collectCollection(i,r),r.preloading===Sz)break;return{layers:r.layers,updating:r.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(const n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":var r,i;t.updating||(this._debug("Considering layer",(r=(i=n.title)!=null?i:n.id)!=null?r:n.declaredClass),t.layers.push(n)),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===Sz)break}}}_loadMaybe(e){return e&&"loadStatus"in e?e.loadStatus==="not-loaded"?(this._debug("Triggering load",(t=(r=e.title)!=null?r:e.id)!=null?t:e.declaredClass),e.load(),"loading"):e.loadStatus:"loaded";var t,r}_debug(...e){this.logDebugInformation&&Pte.info(...e)}};c([p()],wr.prototype,"required",void 0),c([p({constructOnly:!0})],wr.prototype,"map",void 0),c([p({constructOnly:!0})],wr.prototype,"getSpatialReferenceSupport",void 0),c([p()],wr.prototype,"defaultSpatialReference",void 0),c([p()],wr.prototype,"userSpatialReference",void 0),c([p()],wr.prototype,"priorityCollection",void 0),c([p()],wr.prototype,"logDebugInformation",void 0),c([p()],wr.prototype,"suspended",void 0),c([p({readOnly:!0})],wr.prototype,"ready",null),c([p({readOnly:!0})],wr.prototype,"heightModelInfoReady",null),c([p({readOnly:!0})],wr.prototype,"spatialReference",null),c([p({readOnly:!0})],wr.prototype,"extent",null),c([p({readOnly:!0})],wr.prototype,"heightModelInfo",null),c([p({readOnly:!0})],wr.prototype,"vcsWkid",null),c([p({readOnly:!0})],wr.prototype,"latestVcsWkid",null),c([p({readOnly:!0})],wr.prototype,"viewingMode",null),c([p({readOnly:!0})],wr.prototype,"tileInfo",null),c([p({readOnly:!0})],wr.prototype,"mapCollections",null),c([p({readOnly:!0})],wr.prototype,"_allLayers",null),c([p({readOnly:!0})],wr.prototype,"_spatialReferenceTask",null),c([p({readOnly:!0})],wr.prototype,"_tileInfoTask",null),c([p({readOnly:!0})],wr.prototype,"_heightModelInfoTask",null),c([p({readOnly:!0})],wr.prototype,"_extentCandidatesTask",null),c([p()],wr.prototype,"_extentTask",null),c([p()],wr.prototype,"_projectExtentTask",void 0),wr=c([N("esri.views.support.DefaultsFromMap")],wr);const tCe=wr;var u3;const aS=Te.getLogger("esri.views.View");let ut=u3=class extends ro(_h.EventedMixin(l2(Ze))){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.allLayerViews=new Kd({getCollections:()=>{var t,r,i;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,(r=this.groundView)==null?void 0:r.layerViews,this.layerViews,(i=this.basemapView)==null?void 0:i.referenceLayerViews]},getChildrenFunction:t=>t.layerViews}),this.groundView=null,this.animation=null,this.basemapView=null,this.fatalError=null,this.extent=null,this.graphics=new _m,this.analyses=new LI,this.navigating=!1,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Je,this.magnifier=new ute,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new xAe,this.navigation=new yte,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new pAe(this),this.persistableViewModels=new Je,this._isValid=!1,this._readyCycleForced=!1,this.handles.add(this.watch("preconditionsReady",t=>{var r,i;t?(this._currentSpatialReference=this.spatialReference,u3.views.add(this)):(this._currentSpatialReference=null,u3.views.remove(this)),this.notifyChange("spatialReference"),!t&&this.ready?((r=this.layerViewManager)==null||r.clear(),(i=this.toolViewManager)==null||i.detach(),U(this.analysisViewManager)&&this.analysisViewManager.detach(),this._teardown()):t&&!this.ready&&(U(this.analysisViewManager)&&this.analysisViewManager.attach(),this._startup(),this.toolViewManager.attach())},!0))}initialize(){this.addResolvingPromise(this.validate().then(()=>(this._isValid=!0,FN(this,"ready")))),this.basemapView=new _d({view:this}),this.layerViewManager=new oAe({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new vAe({view:this}),this._setupSpatialReferenceLogger(),this.handles.add([Rb(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required={...this.defaultsFromMap.required,extent:e},{sync:!0,initial:!0}),Rb(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},{sync:!0}),Rb(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},{sync:!0,initial:!0})])}_setupSpatialReferenceLogger(){let e=null;this.handles.add([Rb(()=>{var t;return(t=this.defaultsFromMap)==null?void 0:t.ready},t=>{var r;const i=((r=this.map)==null?void 0:r.allLayers.length)>0;if(t&&!this.spatialReference&&i){if(U(e))return;const n=DT(()=>e=AA(e));e=DH(async s=>{try{await RL(this.spatialReferenceWarningDelay,null,s)}catch{return}finally{e=null}aS.warn("#spatialReference","no spatial reference could be derived from the currently added map layers")}),this.handles.add(n,"spatial-reference-logger-task")}else this.handles.remove("spatial-reference-logger-task")},{sync:!0})])}destroy(){if(this.destroyed)return;this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=Tu(this.graphics),this.analyses=Tu(this.analyses),this.handles.remove("defaultsFromMap"),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),this.toolViewManager=Tu(this.toolViewManager),this.layerViewManager=Tu(this.layerViewManager),this.basemapView=Tu(this.basemapView),this.invalidate(),this._emitter.clear(),this.handles.removeAll();const e=this.map;this.map=null,e?.destroy()}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return aS.error("#toMap()","Not implemented on this instance of View"),null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new tCe({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:e=>this.getSpatialReferenceSupport(e),...this._defaultsFromMapSettings})}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get preconditionsReady(){var e;return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Lo.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this.typeSpecificPreconditionsReady||!this._validateSpatialReference(this.spatialReference)||!(this._currentSpatialReference||(e=this.defaultsFromMap)!=null&&e.ready))}set map(e){var t;e!==this._get("map")&&((t=e)!=null&&t.destroyed&&(aS.warn("#map","The provided map is already destroyed",{map:e}),e=null),Lo.isLoadable(e)&&e.load().catch(()=>{}),this.initialized&&(this.forceReadyCycle(),this._currentSpatialReference=null),this._set("map",e))}get spatialReference(){var e,t;let r=this._userSpatialReference||this._currentSpatialReference||this.getDefaultSpatialReference()||null;return r&&(e=this.defaultsFromMap)!=null&&(t=e.required)!=null&&t.heightModelInfo&&(r=r.clone(),r.vcsWkid=this.defaultsFromMap.vcsWkid,r.latestVcsWkid=this.defaultsFromMap.latestVcsWkid),r}set spatialReference(e){this._userSpatialReference=e,this._set("spatialReference",e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get initialExtent(){var e;return(e=this.defaultsFromMap)==null?void 0:e.extent}get cursor(){const e=this.toolViewManager?this.toolViewManager.cursor:null;return U(e)?e:this._cursor||"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}whenLayerView(e){return this.layerViewManager.whenLayerView(e)}getDefaultSpatialReference(){var e;return(e=this.defaultsFromMap)==null?void 0:e.spatialReference}getDefaultHeightModelInfo(){var e,t,r;return(e=(t=this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)!=null?t:(r=this.defaultsFromMap)==null?void 0:r.heightModelInfo)!=null?e:null}importLayerView(e){throw new Z("importLayerView() not implemented")}hasLayerViewModule(e){return!1}async validate(){}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{}}_validateSpatialReference(e){return U(this.getSpatialReferenceSupport({spatialReference:e}))}when(e,t){return this.isResolved()&&!this.ready&&aS.warn("#when()",'Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use watchUtils.whenOnce(view, "ready").then(...) instead.'),super.when(e,t)}forceReadyCycle(){this.ready&&(n0e(this,"preconditionsReady",()=>this._readyCycleForced=!1),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};ut.views=new Je,c([p()],ut.prototype,"_userSpatialReference",void 0),c([ze("toolViewManager.activeTool")],ut.prototype,"activeTool",void 0),c([p({readOnly:!0})],ut.prototype,"allLayerViews",void 0),c([p()],ut.prototype,"groundView",void 0),c([p()],ut.prototype,"animation",void 0),c([p()],ut.prototype,"basemapView",void 0),c([p({readOnly:!0})],ut.prototype,"_defaultsFromMapSettings",null),c([p()],ut.prototype,"defaultsFromMap",null),c([p()],ut.prototype,"fatalError",void 0),c([p({type:nt})],ut.prototype,"extent",void 0),c([p(WO(_m,"graphics"))],ut.prototype,"graphics",void 0),c([p(WO(LI,"analyses"))],ut.prototype,"analyses",void 0),c([p({readOnly:!0,type:c$})],ut.prototype,"heightModelInfo",null),c([p({readOnly:!0})],ut.prototype,"interacting",null),c([p({readOnly:!0})],ut.prototype,"navigating",void 0),c([p({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_currentSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],ut.prototype,"preconditionsReady",null),c([p({readOnly:!0})],ut.prototype,"typeSpecificPreconditionsReady",void 0),c([p({type:Je,readOnly:!0})],ut.prototype,"layerViews",void 0),c([p({type:ute})],ut.prototype,"magnifier",void 0),c([p({value:null,type:$X})],ut.prototype,"map",null),c([p()],ut.prototype,"padding",void 0),c([p({readOnly:!0})],ut.prototype,"ready",void 0),c([p({type:Fe})],ut.prototype,"spatialReference",null),c([p()],ut.prototype,"spatialReferenceWarningDelay",void 0),c([p()],ut.prototype,"stationary",null),c([p({readOnly:!0})],ut.prototype,"supportsGround",void 0),c([p({type:bs})],ut.prototype,"timeExtent",void 0),c([ze("toolViewManager.tools")],ut.prototype,"tools",void 0),c([p()],ut.prototype,"toolViewManager",void 0),c([p({readOnly:!0})],ut.prototype,"type",void 0),c([p({type:Number})],ut.prototype,"scale",void 0),c([p({readOnly:!0})],ut.prototype,"updating",void 0),c([p({readOnly:!0})],ut.prototype,"initialExtentRequired",void 0),c([p({readOnly:!0,type:nt})],ut.prototype,"initialExtent",null),c([p()],ut.prototype,"cursor",null),c([p({readOnly:!0})],ut.prototype,"input",void 0),c([p({type:yte,nonNullable:!0})],ut.prototype,"navigation",void 0),c([p()],ut.prototype,"layerViewManager",void 0),c([p()],ut.prototype,"analysisViewManager",void 0),c([p()],ut.prototype,"width",void 0),c([p()],ut.prototype,"height",void 0),c([p({readOnly:!0})],ut.prototype,"resizing",void 0),c([p({value:null,readOnly:!0})],ut.prototype,"size",null),c([p({readOnly:!0})],ut.prototype,"suspended",void 0),c([p({readOnly:!0})],ut.prototype,"viewEvents",void 0),c([p({readOnly:!0})],ut.prototype,"persistableViewModels",void 0),c([p()],ut.prototype,"_isValid",void 0),c([p()],ut.prototype,"_readyCycleForced",void 0),c([p()],ut.prototype,"_currentSpatialReference",void 0),ut=u3=c([N("esri.views.View")],ut);const rCe=ut;let Sd=class extends Z3{constructor(e){super(e),this.state="running",this.target=null}initialize(){this.addResolvingPromise(new Promise((e,t)=>this._dfd={resolve:e,reject:t}))}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._dfd.reject(new Z("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._dfd.resolve())}update(e,t){t||(t=hy(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};c([p({readOnly:!0})],Sd.prototype,"done",null),c([p({readOnly:!0,type:String})],Sd.prototype,"state",void 0),c([p()],Sd.prototype,"target",void 0),Sd=c([N("esri.views.ViewAnimation")],Sd),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Sd||(Sd={}));const tR=Sd;function qf(e,t,r,i){const n=3*e,s=3*(r-e)-n,o=1-n-s,a=3*t,l=3*(i-t)-a,u=1-a-l;function h(g){return((o*g+s)*g+n)*g}function d(g){return((u*g+l)*g+a)*g}function f(g){return(3*o*g+2*s)*g+n}function m(g,b){let w,_,x,I,S,T;for(x=g,T=0;T<8;T++){if(I=h(x)-g,Math.abs(I)<b)return x;if(S=f(x),Math.abs(S)<1e-6)break;x-=I/S}if(w=0,_=1,x=g,x<w)return w;if(x>_)return _;for(;w<_;){if(I=h(x),Math.abs(I-g)<b)return x;g>I?w=x:_=x,x=.5*(_-w)+w}return x}return function(g,b=1e-6){return d(m(g,b))}}const iCe=/^cubic-bezier\((.*)\)/,aa={};function nCe(e){let t=aa[e]||null;if(!t){const r=iCe.exec(e);if(r){const i=r[1].split(",").map(n=>parseFloat(n.trim()));i.length!==4||i.some(n=>isNaN(n))||(t=qf.apply(qf,i))}}return t}aa.ease=qf(.25,.1,.25,1),aa.linear=qf(0,0,1,1),aa.easeIn=aa["ease-in"]=qf(.42,0,1,1),aa.easeOut=aa["ease-out"]=qf(0,0,.58,1),aa.easeInOut=aa["ease-in-out"]=qf(.42,0,.58,1);function sCe(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function l8(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function oCe(e,t,r,i,n,s,o){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e}function u8(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5];let l=r*s-i*n;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*a-s*o)*l,e[5]=(i*o-r*a)*l,e):null}function aCe(e){return e[0]*e[3]-e[1]*e[2]}function Rte(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],h=r[1],d=r[2],f=r[3],m=r[4],g=r[5];return e[0]=i*u+s*h,e[1]=n*u+o*h,e[2]=i*d+s*f,e[3]=n*d+o*f,e[4]=i*m+s*g+a,e[5]=n*m+o*g+l,e}function z$(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=Math.sin(r),h=Math.cos(r);return e[0]=i*h+s*u,e[1]=n*h+o*u,e[2]=i*-u+s*h,e[3]=n*-u+o*h,e[4]=a,e[5]=l,e}function c8(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],h=r[1];return e[0]=i*u,e[1]=n*u,e[2]=s*h,e[3]=o*h,e[4]=a,e[5]=l,e}function Km(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=r[0],h=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=i*u+s*h+a,e[5]=n*u+o*h+l,e}function Lte(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=-r,e[3]=i,e[4]=0,e[5]=0,e}function Nte(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=t[1],e[4]=0,e[5]=0,e}function lCe(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}function uCe(e){return"mat2d("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+")"}function cCe(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+1)}function hCe(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e}function Dte(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e}function dCe(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e}function pCe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e}function fCe(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]}function mCe(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=t[0],u=t[1],h=t[2],d=t[3],f=t[4],m=t[5];return Math.abs(r-l)<=mt*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(i-u)<=mt*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(n-h)<=mt*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(s-d)<=mt*Math.max(1,Math.abs(s),Math.abs(d))&&Math.abs(o-f)<=mt*Math.max(1,Math.abs(o),Math.abs(f))&&Math.abs(a-m)<=mt*Math.max(1,Math.abs(a),Math.abs(m))}const yCe=Rte,gCe=Dte;Object.freeze({__proto__:null,copy:sCe,identity:l8,set:oCe,invert:u8,determinant:aCe,multiply:Rte,rotate:z$,scale:c8,translate:Km,fromRotation:Lte,fromScaling:Nte,fromTranslation:lCe,str:uCe,frob:cCe,add:hCe,subtract:Dte,multiplyScalar:dCe,multiplyScalarAndAdd:pCe,exactEquals:fCe,equals:mCe,mul:yCe,sub:gCe});function ep(){return[1,0,0,1,0,0]}function vCe(e){return[e[0],e[1],e[2],e[3],e[4],e[5]]}function bCe(e,t,r,i,n,s){return[e,t,r,i,n,s]}function wCe(e,t){return new Float64Array(e,t,6)}Object.freeze({__proto__:null,create:ep,clone:vCe,fromValues:bCe,createView:wCe});function tv(e,t){return e[0]=t[0],e[1]=t[1],e}function Ti(e,t,r){return e[0]=t,e[1]=r,e}function Fte(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function T_(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function jte(e,t,r){return e[0]=t[0]*r[0],e[1]=t[1]*r[1],e}function Vte(e,t,r){return e[0]=t[0]/r[0],e[1]=t[1]/r[1],e}function _Ce(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e}function xCe(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e}function SCe(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function MCe(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}function ICe(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e}function C2(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function TCe(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e}function k2(e,t){const r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function GI(e,t){const r=t[0]-e[0],i=t[1]-e[1];return r*r+i*i}function qI(e){const t=e[0],r=e[1];return Math.sqrt(t*t+r*r)}function Ute(e){const t=e[0],r=e[1];return t*t+r*r}function zte(e,t){return e[0]=-t[0],e[1]=-t[1],e}function $Ce(e,t){return e[0]=1/t[0],e[1]=1/t[1],e}function rR(e,t){const r=t[0],i=t[1];let n=r*r+i*i;return n>0&&(n=1/Math.sqrt(n),e[0]=t[0]*n,e[1]=t[1]*n),e}function Bte(e,t){return e[0]*t[0]+e[1]*t[1]}function Gte(e,t,r){const i=t[0]*r[1]-t[1]*r[0];return e[0]=e[1]=0,e[2]=i,e}function ECe(e,t,r,i){const n=t[0],s=t[1];return e[0]=n+i*(r[0]-n),e[1]=s+i*(r[1]-s),e}function ACe(e,t){t=t||1;const r=2*Ld()*Math.PI;return e[0]=Math.cos(r)*t,e[1]=Math.sin(r)*t,e}function CCe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n,e[1]=r[1]*i+r[3]*n,e}function xu(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[2]*n+r[4],e[1]=r[1]*i+r[3]*n+r[5],e}function kCe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[3]*n+r[6],e[1]=r[1]*i+r[4]*n+r[7],e}function OCe(e,t,r){const i=t[0],n=t[1];return e[0]=r[0]*i+r[4]*n+r[12],e[1]=r[1]*i+r[5]*n+r[13],e}function PCe(e,t,r,i){const n=t[0]-r[0],s=t[1]-r[1],o=Math.sin(i),a=Math.cos(i);return e[0]=n*a-s*o+r[0],e[1]=n*o+s*a+r[1],e}function RCe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];let o=r*r+i*i;o>0&&(o=1/Math.sqrt(o));let a=n*n+s*s;a>0&&(a=1/Math.sqrt(a));const l=(r*n+i*s)*o*a;return l>1?0:l<-1?Math.PI:Math.acos(l)}function LCe(e){return"vec2("+e[0]+", "+e[1]+")"}function NCe(e,t){return e[0]===t[0]&&e[1]===t[1]}function DCe(e,t){const r=e[0],i=e[1],n=t[0],s=t[1];return Math.abs(r-n)<=mt*Math.max(1,Math.abs(r),Math.abs(n))&&Math.abs(i-s)<=mt*Math.max(1,Math.abs(i),Math.abs(s))}function FCe(e,t,r,i,n){let s=t[0]-r[0],o=t[1]-r[1];const a=(i[0]*s+i[1]*o)*(n-1);return s=i[0]*a,o=i[1]*a,e[0]=t[0]+s,e[1]=t[1]+o,e}const jCe=qI,h8=T_,VCe=jte,UCe=Vte,zCe=k2,BCe=GI,GCe=Ute;Object.freeze({__proto__:null,copy:tv,set:Ti,add:Fte,subtract:T_,multiply:jte,divide:Vte,ceil:_Ce,floor:xCe,min:SCe,max:MCe,round:ICe,scale:C2,scaleAndAdd:TCe,distance:k2,squaredDistance:GI,length:qI,squaredLength:Ute,negate:zte,inverse:$Ce,normalize:rR,dot:Bte,cross:Gte,lerp:ECe,random:ACe,transformMat2:CCe,transformMat2d:xu,transformMat3:kCe,transformMat4:OCe,rotate:PCe,angle:RCe,str:LCe,exactEquals:NCe,equals:DCe,projectAndScale:FCe,len:jCe,sub:h8,mul:VCe,div:UCe,dist:zCe,sqrDist:BCe,sqrLen:GCe});function Vr(){return[0,0]}function qCe(e){return[e[0],e[1]]}function O2(e,t){return[e,t]}function HCe(e){const t=Vr(),r=Math.min(2,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function WCe(e,t){return new Float64Array(e,t,2)}function qte(){return Vr()}function Hte(){return O2(1,1)}function Wte(){return O2(1,0)}function Jte(){return O2(0,1)}const JCe=qte(),ZCe=Hte(),YCe=Wte(),KCe=Jte();Object.freeze({__proto__:null,create:Vr,clone:qCe,fromValues:O2,fromArray:HCe,createView:WCe,zeros:qte,ones:Hte,unitX:Wte,unitY:Jte,ZEROS:JCe,ONES:ZCe,UNIT_X:YCe,UNIT_Y:KCe});const Zte=39.37,XCe=180/Math.PI;function QCe(e,t,r){const i=iC(t[0]/ar.radius);return Ti(e,r?i:i-360*Math.floor((i+180)/360),iC(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/ar.radius))))}function eke(e,t){let r=t[1];return r>89.99999?r=89.99999:r<-89.99999&&(r=-89.99999),r=Math.sin(i_(r)),Ti(e,i_(t[0])*ar.radius,.5*ar.radius*Math.log((1+r)/(1-r)))}function Yte(e,t,r,i){return i&&r&&!i.equals(r)&&sh(i,r)&&i.isWebMercator?i.isWebMercator?eke(e,t):QCe(e,t):tv(e,t)}function HI(e){return e.wkid?e:e.spatialReference||Fe.WGS84}function P2(e,t){return t.type?Ti(e,t.x,t.y):tv(e,t)}function Kte(e){return vy(e)}function o0(e,t){return Math.max(e.width/t[0],e.height/t[1])*uke(e.spatialReference)}async function Jb(e,t,r,i){let n,s;if(!e||Array.isArray(e)&&!e.length)return null;if(Je.isCollection(e)&&(e=e.toArray()),Array.isArray(e)&&e.length&&typeof e[0]=="object"){const a=e.every(h=>"attributes"in h),l=e.some(h=>!h.geometry);let u=e;if(a&&l&&t&&t.allLayerViews){const h=new Map;for(const g of e){const b=g.layer,w=h.get(b)||[],_=g.attributes[b.objectIdField];_!=null&&w.push(_),h.set(b,w)}const d=[];h.forEach((g,b)=>{const w=t.allLayerViews.find(_=>_.layer.id===b.id);if("queryFeatures"in w){const _=b.createQuery();_.objectIds=g,_.returnGeometry=!0,d.push(w.queryFeatures(_))}});const f=await Promise.all(d),m=[];for(const g of f)if(g&&g.features&&g.features.length)for(const b of g.features)U(b.geometry)&&m.push(b.geometry);u=m}for(const h of u)i=await Jb(h,t,r,i);return i}if(Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number")n=new Ke(e);else if(e instanceof Xs)n=e;else if("geometry"in e){if(e.geometry)n=e.geometry;else if(e.layer){const a=e.layer,l=t.allLayerViews.find(u=>u.layer.id===a.id);if("queryFeatures"in l){const u=a.createQuery();u.objectIds=[e.attributes[a.objectIdField]],u.returnGeometry=!0;const h=await l.queryFeatures(u);n=hH(h,"features",0,"geometry")}}}if(ce(n)||(s=n.type==="point"?new nt({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference}):n.extent,!s))return null;const o=Vu(s,r);return ce(o)?null:i=i?i.union(o):o}function tke(e){if(e&&(!Array.isArray(e)||typeof e[0]!="number")&&(typeof e=="object"||Array.isArray(e)&&typeof e[0]=="object")){if("layer"in e&&e.layer&&e.layer.minScale&&e.layer.maxScale){const t=e.layer;return{min:t.minScale,max:t.maxScale}}if(Array.isArray(e)&&e.length&&e.every(t=>"layer"in t)){let t=0,r=0;for(const i of e){const n=i.layer;n&&n.minScale&&n.maxScale&&(t=n.minScale<t?n.minScale:t,r=n.maxScale>r?n.maxScale:r)}return t&&r?{min:t,max:r}:null}}}async function rke(e,t){if(!e||!t)return new oh({targetGeometry:new Ke,scale:0,rotation:0});let r=t.spatialReference;const{constraints:i,padding:n,viewpoint:s,size:o}=t,a=[n?o[0]-n.left-n.right:o[0],n?o[1]-n.top-n.bottom:o[1]];let l=null;e instanceof oh?l=e:e.viewpoint?l=e.viewpoint:e.target&&e.target.declaredClass==="esri.Viewpoint"&&(l=e.target);let u=null;l&&l.targetGeometry?u=l.targetGeometry:e instanceof nt?u=e:(e||e&&("center"in e||"extent"in e||"target"in e))&&(u=await Jb(e.center,t,r)||await Jb(e.extent,t,r)||await Jb(e.target,t,r)||await Jb(e,t,r)),!u&&s&&s.targetGeometry?u=s.targetGeometry:!u&&t.extent&&(u=t.extent);const h=HI(u);if(r||(r=HI(t.spatialReference||t.extent||u)),!sh(u,r)&&h&&!h.equals(r))return null;const d=P2(Vr(),u.center?u.center:u),f=new Ke(Yte(d,d,h,r),r);let m=null;if(l&&U(l.targetGeometry)&&l.targetGeometry.type==="point")m=l.scale;else if(e.hasOwnProperty("scale")&&e.scale)m=e.scale;else if(e.hasOwnProperty("zoom")&&e.zoom!==-1&&i&&i.effectiveLODs)m=i.zoomToScale(e.zoom);else if(Array.isArray(u)||u.type==="point"||u.type==="extent"&&u.width===0&&u.height===0){const _=Vu(t.extent,r);m=U(_)?o0(_,a):t.extent?o0(t.extent,a):s.scale}else m=sh(u.extent,r)?o0(Vu(u.extent,r),a):o0(u.extent,a);const g=tke(e);g&&(g.min&&g.min>m?m=g.min:g.max&&g.max<m&&(m=g.max));let b=0;l?b=l.rotation:e.hasOwnProperty("rotation")?b=e.rotation:s&&(b=s.rotation);let w=new oh({targetGeometry:f,scale:m,rotation:b});return i&&(w=i.fit(w),i.constrainByGeometry(w),i.rotationEnabled||(w.rotation=b)),w}function Nl(e,t){const r=e.targetGeometry,i=t.targetGeometry;return r.x=i.x,r.y=i.y,r.spatialReference=i.spatialReference,e.scale=t.scale,e.rotation=t.rotation,e}function ike(e,t,r){return r?Ti(e,.5*(t[0]-r.right+r.left),.5*(t[1]-r.bottom+r.top)):C2(e,t,.5)}const nke=function(){const e=Vr();return function(t,r,i){const n=r.targetGeometry;P2(e,n);const s=.5*s1(r);return t.xmin=e[0]-s*i[0],t.ymin=e[1]-s*i[1],t.xmax=e[0]+s*i[0],t.ymax=e[1]+s*i[1],t.spatialReference=n.spatialReference,t}}();function ske(e,t,r,i,n){return ere(e,t,r.center),e.scale=o0(r,i),n&&n.constraints&&n.constraints.constrain(e),e}function oke(e,t,r,i){return f8(e,t,r,i),u8(e,e)}const Xte=function(){const e=Vr();return function(t,r,i){return h8(t,cke(t,r),ike(e,r,i))}}(),ake=function(){const e=ep(),t=Vr();return function(r,i,n,s){const o=s1(i),a=d8(i);return Ti(t,o,o),Nte(e,t),z$(e,e,a),Km(e,e,Xte(t,n,s)),Km(e,e,[0,s.top-s.bottom]),Ti(r,e[4],e[5])}}();function s1(e){return e.scale*lke(e.targetGeometry)}function lke(e){return U(e)&&Ks(e.spatialReference)?1/(Kte(e.spatialReference)*Zte*Qte()):1}function d8(e){return i_(e.rotation)||0}function uke(e){return Ks(e)?Kte(e)*Zte*Qte():1}function cke(e,t){return C2(e,t,.5)}function Qte(){return 96}const p8=function(){const e=Vr(),t=Vr(),r=Vr();return function(i,n,s,o,a,l){return zte(e,n),C2(t,s,.5*l),Ti(r,1/o*l,-1/o*l),l8(i),Km(i,i,t),a&&z$(i,i,a),c8(i,i,r),Km(i,i,e),i}}(),f8=function(){const e=Vr();return function(t,r,i,n){const s=s1(r),o=d8(r);return P2(e,r.targetGeometry),p8(t,e,i,s,o,n)}}(),hke=function(){const e=Vr();return function(t,r,i,n){const s=s1(r);return P2(e,r.targetGeometry),p8(t,e,i,s,0,n)}}();function dke(e){if(e.isWrappable){const t=Ao(e);return t.valid[1]-t.valid[0]}return 0}function pke(e,t){return Math.round(dke(e)/t)}function fke(e,t){return rke(e,t)}const mit=function(){const e=Vr(),t=Vr(),r=[0,0,0];return function(i,n,s){T_(e,i,n),rR(e,e),T_(t,i,s),rR(t,t),Gte(r,e,t);let o=Math.acos(Bte(e,t)/(qI(e)*qI(t)))*XCe;return r[2]<0&&(o=-o),isNaN(o)&&(o=0),o}}(),mke=function(){const e=Vr();return function(t,r,i,n){const s=t.targetGeometry;return Nl(t,r),ake(e,r,i,n),s.x+=e[0],s.y+=e[1],t}}(),ere=function(){const e=Vr();return function(t,r,i){Nl(t,r);const n=t.targetGeometry,s=HI(i),o=HI(n);return P2(e,i),Yte(e,e,s,o),n.x=e[0],n.y=e[1],t}}(),yke=function(){const e=Vr();return function(t,r,i,n,s){s||(s="center"),h8(e,i,n),C2(e,e,.5);const o=e[0],a=e[1];switch(s){case"center":Ti(e,0,0);break;case"left":Ti(e,-o,0);break;case"top":Ti(e,0,a);break;case"right":Ti(e,o,0);break;case"bottom":Ti(e,0,-a);break;case"top-left":Ti(e,-o,a);break;case"bottom-left":Ti(e,-o,-a);break;case"top-right":Ti(e,o,a);break;case"bottom-right":Ti(e,o,-a)}return B$(t,r,e),t}}();function yit(e,t,r){return Nl(e,t),e.rotation+=r,e}function gke(e,t,r){return Nl(e,t),e.rotation=r,e}const vke=function(){const e=Vr();return function(t,r,i,n,s){return Nl(t,r),isNaN(i)||i===0||(rre(e,n,r,s),t.scale=r.scale*i,ire(e,e,t,s),B$(t,t,Ti(e,e[0]-n[0],n[1]-e[1]))),t}}();function Mz(e,t,r){return Nl(e,t),e.scale=r,e}const tre=function(){const e=Vr();return function(t,r,i,n,s,o){return Nl(t,r),isNaN(i)||i===0||(rre(e,s,r,o),t.scale=r.scale*i,t.rotation+=n,ire(e,e,t,o),B$(t,t,Ti(e,e[0]-s[0],s[1]-e[1]))),t}}(),git=function(){const e=Vr(),t=Vr();return function(r,i,n,s,o,a,l){return Xte(t,a,l),Fte(e,o,t),s?tre(r,i,n,s,e,a):vke(r,i,n,e,a)}}(),rre=function(){const e=ep();return function(t,r,i,n){return xu(t,r,oke(e,i,n,1))}}(),ire=function(){const e=ep();return function(t,r,i,n){return xu(t,r,f8(e,i,n,1))}}(),B$=function(){const e=Vr(),t=ep();return function(r,i,n){Nl(r,i);const s=s1(i),o=r.targetGeometry;return Lte(t,d8(i)),c8(t,t,O2(s,s)),xu(e,n,t),o.x+=e[0],o.y+=e[1],r}}();class bke{constructor(t,r,i,n){const s=t.targetGeometry,o=r.targetGeometry;n?typeof n=="string"&&(n=nCe(n)||aa.ease):n=aa.ease,this.easing=n,this.duration=i,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=t.scale,this.sRotation=t.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=r.scale,this.tRotation=r.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(t,r){const i=this.easing(r);let n,s,o,a;r>=1?(n=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(n=this.sCenterX+i*this.dCenterX,s=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),t.targetGeometry.x=n,t.targetGeometry.y=s,t.scale=a,t.rotation=o}}let Rc=class extends Ze{constructor(e){super(e),this.duration=200,this.transition=null,this.easing=aa.ease,this.view=null,this.viewpoint=null,this.viewpoint=new oh({targetGeometry:new Ke,scale:0,rotation:0}),this._updateTask=L0({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask.remove(),this._updateTask=null}animate(e,t,r){this.stop();const i=this.viewpoint;Nl(i,t),this.transition=new bke(this.viewpoint,e.target,r&&r.duration||this.duration,r&&r.easing||this.easing);const n=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this.transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(n,n),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;const r=new tR({target:e.clone()}),i=()=>{this.animation===r&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return r.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=r,r}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){const t=this.animation;if(t&&t.state!==tR.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime);else{const r=(performance.now()-this._startTime)/this.transition.duration,i=r>=1;this.transition.applyRatio(this.viewpoint,r),i&&this.animation.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([p()],Rc.prototype,"animation",void 0),c([p()],Rc.prototype,"duration",void 0),c([p()],Rc.prototype,"transition",void 0),c([p()],Rc.prototype,"easing",void 0),c([p()],Rc.prototype,"view",void 0),c([p()],Rc.prototype,"viewpoint",void 0),Rc=c([N("esri.views.2d.AnimationManager")],Rc);const wke=Rc;class _ke{constructor(t){this.view=t,this._frameTaskHandle=null,this._updateRequested=!1,this.stationary=!0,this.updateEnabled=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions},this.update=()=>{if(this._updateRequested=!1,!this.updateEnabled)return;const{basemapView:r,graphicsView:i,labelManager:n,layerViews:s,state:{id:o}}=this.view;r.baseLayerViews.forEach(this._updateLayerView,this),s.forEach(this._updateLayerView,this),r.referenceLayerViews.forEach(this._updateLayerView,this),U(n)&&(n.lastUpdateId!==o&&(n.viewChange(),n.lastUpdateId=o),n.updateRequested&&n.processUpdate(this._updateParameters)),U(i)&&(i.lastUpdateId!==o&&(i.viewChange(),i.lastUpdateId=o),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle.pause()}}destroy(){this.stop()}start(){this.stationary=this.view.stationary,this._updateParameters={state:this.view.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:this.view.renderingOptions},this._stationaryHandle=this.view.watch("stationary",t=>{this.stationary=t,this.requestFrame()}),this._frameTaskHandle=L0(this)}stop(){this._frameTaskHandle&&(this._stationaryHandle.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){const r=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0,t.moveStart()),i!==r.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=r.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews.forEach(this._updateLayerView,this)}}function Fi(){return Promise.all([ae(()=>import("./webgl.b14b1b39.js"),["assets/webgl.b14b1b39.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/ProgramCache.58c6e369.js","assets/ShaderCompiler.135c314c.js"]),ae(()=>import("./mapViewDeps.314142a8.js"),["assets/mapViewDeps.314142a8.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/GeometryUtils.d4e26b77.js","assets/VertexArrayObject.71920990.js","assets/ShaderCompiler.135c314c.js","assets/Container.09230578.js","assets/WGLContainer.8dd04ad0.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/ProgramCache.58c6e369.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/Matcher.1aab87b1.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/CircularArray.f8b13748.js","assets/requestImageUtils.9667d236.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/BaseGraphicContainer.b63918c0.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/vec3f32.9cc42d31.js","assets/GraphicContainer.a2a3804e.js"])])}const V1=()=>Fi().then(()=>ae(()=>import("./TileLayerView2D.70106858.js"),["assets/TileLayerView2D.70106858.js","assets/imageUtils.57ab2de2.js","assets/BitmapTileContainer.a6d68393.js","assets/Bitmap.ca16aed7.js","assets/Container.09230578.js","assets/Texture.6e496dca.js","assets/TileContainer.d5194a1c.js","assets/Utils.b4ec7012.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/RefreshableLayerView.86bbae4b.js","assets/drapedUtils.d5d87641.js"])),lS=()=>Fi().then(()=>ae(()=>import("./FeatureLayerView2D.2c926697.js"),["assets/FeatureLayerView2D.2c926697.js","assets/Container.09230578.js","assets/drapedUtils.d5d87641.js","assets/definitions.21e97413.js","assets/LayerView.1005310a.js","assets/schemaUtils.39ad90b3.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/MaterialKey.af77cdb0.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),Iz={"base-dynamic":()=>Fi().then(()=>ae(()=>import("./BaseDynamicLayerView2D.fe801f7a.js"),["assets/BaseDynamicLayerView2D.fe801f7a.js","assets/BitmapContainer.0dfe53c5.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/ExportStrategy.21e56c15.js","assets/Bitmap.ca16aed7.js","assets/RefreshableLayerView.86bbae4b.js"])),"base-tile":V1,"bing-maps":V1,csv:lS,"geo-rss":()=>Fi().then(()=>ae(()=>import("./GeoRSSLayerView2D.2dc41242.js"),["assets/GeoRSSLayerView2D.2dc41242.js","assets/LayerView.1005310a.js","assets/Container.09230578.js","assets/GraphicContainer.a2a3804e.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/VertexArrayObject.71920990.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/WGLContainer.8dd04ad0.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js"])),feature:lS,geojson:lS,graphics:()=>Fi().then(()=>ae(()=>import("./GraphicsLayerView2D.0753edbd.js"),["assets/GraphicsLayerView2D.0753edbd.js","assets/LayerView.1005310a.js","assets/Container.09230578.js","assets/GraphicContainer.a2a3804e.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/VertexArrayObject.71920990.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/WGLContainer.8dd04ad0.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js"])),group:()=>Fi().then(()=>ae(()=>import("./GroupLayerView2D.a9ead941.js"),["assets/GroupLayerView2D.a9ead941.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js"])),imagery:()=>Fi().then(()=>ae(()=>import("./ImageryLayerView2D.31f30be0.js"),["assets/ImageryLayerView2D.31f30be0.js","assets/AnimatedFlowView2D.3a6e7fd3.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/rasterProjectionHelper.7d40655e.js","assets/GraphicContainer.a2a3804e.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js","assets/BitmapContainer.0dfe53c5.js","assets/Bitmap.ca16aed7.js","assets/ExportStrategy.21e56c15.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),"imagery-tile":()=>Fi().then(()=>ae(()=>import("./ImageryTileLayerView2D.c0cca615.js"),["assets/ImageryTileLayerView2D.c0cca615.js","assets/AnimatedFlowView2D.3a6e7fd3.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/TileContainer.d5194a1c.js","assets/RawBlockCache.55f141c2.js","assets/rasterProjectionHelper.7d40655e.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),kml:()=>Fi().then(()=>ae(()=>import("./KMLLayerView2D.ddf88b5f.js"),["assets/KMLLayerView2D.ddf88b5f.js","assets/kmlUtils.b70082ed.js","assets/Bitmap.ca16aed7.js","assets/Container.09230578.js","assets/Texture.6e496dca.js","assets/BitmapContainer.0dfe53c5.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/GraphicContainer.a2a3804e.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js"])),"map-image":()=>Fi().then(()=>ae(()=>import("./MapImageLayerView2D.00d3e1ef.js"),["assets/MapImageLayerView2D.00d3e1ef.js","assets/BitmapContainer.0dfe53c5.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js","assets/ExportStrategy.21e56c15.js","assets/Bitmap.ca16aed7.js","assets/drapedUtils.d5d87641.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),"map-notes":()=>Fi().then(()=>ae(()=>import("./MapNotesLayerView2D.36c2fbb5.js"),["assets/MapNotesLayerView2D.36c2fbb5.js","assets/LayerView.1005310a.js","assets/Container.09230578.js","assets/GraphicContainer.a2a3804e.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/VertexArrayObject.71920990.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/WGLContainer.8dd04ad0.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js"])),"ogc-feature":()=>Fi().then(()=>ae(()=>import("./OGCFeatureLayerView2D.06a894e0.js"),["assets/OGCFeatureLayerView2D.06a894e0.js","assets/FeatureLayerView2D.2c926697.js","assets/Container.09230578.js","assets/drapedUtils.d5d87641.js","assets/definitions.21e97413.js","assets/LayerView.1005310a.js","assets/schemaUtils.39ad90b3.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/MaterialKey.af77cdb0.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),"open-street-map":V1,route:()=>Fi().then(()=>ae(()=>import("./RouteLayerView2D.c6ec0105.js"),["assets/RouteLayerView2D.c6ec0105.js","assets/LayerView.1005310a.js","assets/Container.09230578.js","assets/GraphicContainer.a2a3804e.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/BaseGraphicContainer.b63918c0.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/GeometryUtils.d4e26b77.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/VertexArrayObject.71920990.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/WGLContainer.8dd04ad0.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/Matcher.1aab87b1.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/vec3f32.9cc42d31.js"])),stream:()=>Fi().then(()=>ae(()=>import("./StreamLayerView2D.8405f5bf.js"),["assets/StreamLayerView2D.8405f5bf.js","assets/FeatureLayerView2D.2c926697.js","assets/Container.09230578.js","assets/drapedUtils.d5d87641.js","assets/definitions.21e97413.js","assets/LayerView.1005310a.js","assets/schemaUtils.39ad90b3.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/MaterialKey.af77cdb0.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),"subtype-group":()=>Fi().then(()=>ae(()=>import("./SubtypeGroupLayerView2D.509acdb6.js"),["assets/SubtypeGroupLayerView2D.509acdb6.js","assets/FeatureLayerView2D.2c926697.js","assets/Container.09230578.js","assets/drapedUtils.d5d87641.js","assets/definitions.21e97413.js","assets/LayerView.1005310a.js","assets/schemaUtils.39ad90b3.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/MaterialKey.af77cdb0.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/GeometryUtils.d4e26b77.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),tile:V1,"vector-tile":()=>Fi().then(()=>ae(()=>import("./VectorTileLayerView2D.7087e831.js"),["assets/VectorTileLayerView2D.7087e831.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/BidiEngine.aae60613.js","assets/CIMSymbolHelper.5838353f.js","assets/definitions.21e97413.js","assets/Utils.b4ec7012.js","assets/GeometryUtils.d4e26b77.js","assets/config.2a39d8a4.js","assets/TileContainer.d5194a1c.js","assets/Container.09230578.js","assets/WGLContainer.8dd04ad0.js","assets/ShaderCompiler.135c314c.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/StyleRepository.b62ca887.js","assets/LayerView.1005310a.js","assets/Bitmap.ca16aed7.js","assets/BitmapContainer.0dfe53c5.js"])),wcs:()=>Fi().then(()=>ae(()=>import("./ImageryTileLayerView2D.c0cca615.js"),["assets/ImageryTileLayerView2D.c0cca615.js","assets/AnimatedFlowView2D.3a6e7fd3.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/TileContainer.d5194a1c.js","assets/RawBlockCache.55f141c2.js","assets/rasterProjectionHelper.7d40655e.js","assets/util.e7e3776f.js","assets/popupUtils.8df4d9c3.js","assets/RefreshableLayerView.86bbae4b.js"])),"web-tile":V1,wfs:lS,wms:()=>Fi().then(()=>ae(()=>import("./WMSLayerView2D.dc6d3d8b.js"),["assets/WMSLayerView2D.dc6d3d8b.js","assets/BitmapContainer.0dfe53c5.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/Utils.b4ec7012.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/Container.09230578.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/ExportStrategy.21e56c15.js","assets/Bitmap.ca16aed7.js","assets/RefreshableLayerView.86bbae4b.js"])),wmts:()=>Fi().then(()=>ae(()=>import("./WMTSLayerView2D.83c60850.js"),["assets/WMTSLayerView2D.83c60850.js","assets/imageUtils.57ab2de2.js","assets/BitmapTileContainer.a6d68393.js","assets/Bitmap.ca16aed7.js","assets/Container.09230578.js","assets/Texture.6e496dca.js","assets/TileContainer.d5194a1c.js","assets/Utils.b4ec7012.js","assets/WGLContainer.8dd04ad0.js","assets/definitions.21e97413.js","assets/VertexArrayObject.71920990.js","assets/ShaderCompiler.135c314c.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/LayerView.1005310a.js","assets/RefreshableLayerView.86bbae4b.js"])),analysis:null,"base-elevation":null,"building-scene":null,elevation:null,"integrated-mesh":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function xke(e){const t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",r=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new Z(`${r}:view-not-supported`,`${t} is not supported in 2D`)}const Tz={hasLayerViewModule:e=>U(Iz[e.type]),importLayerView:e=>{const t=Iz[e.type];if(!U(t))throw xke(e);return t(e)}};function Ske(e,t){const{spatialReference:r}=t,i=[t.x,t.y];let n=Number.POSITIVE_INFINITY,s=0,o=0;const a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(const u of l)for(let h=0;h<u.length-1;h++){mfe(a,i,u,h);const d=k2(i,a);d<n&&(n=d,s=a[0],o=a[1])}return{coordinate:new Ke({x:s,y:o,spatialReference:r}),distance:n}}var iR;const Mke=Te.getLogger("esri.views.MapView");let Hf=iR=class extends Ze{constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){return ce(this.geometry)||!this.spatialReference?null:this.spatialReference.equals(this.geometry.spatialReference)?this.geometry:sh(this.geometry,this.spatialReference)?Vu(this.geometry,this.spatialReference):n8()?_te(this.geometry,this.spatialReference):(Mke.error("#constraints.geometry","unsupported coordinate system. The source geometry cannot be projected to the view's coordinate system. The projection engine cannot be loaded.",{geometry:this.geometry}),null)}constrain(e,t){if(ce(this.normalizedGeometry))return e;const r=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?ZT(this.normalizedGeometry,r):LW(this.normalizedGeometry,r))return e;const{coordinate:i}=Ske(this.normalizedGeometry,r);return i&&(e.targetGeometry=i),e}clone(){var e,t;return new iR({geometry:(e=this.geometry)==null?void 0:e.clone(),spatialReference:(t=this.spatialReference)==null?void 0:t.clone()})}};c([p({constructOnly:!0})],Hf.prototype,"geometry",void 0),c([p({readOnly:!0})],Hf.prototype,"normalizedGeometry",null),c([p({constructOnly:!0})],Hf.prototype,"spatialReference",void 0),Hf=iR=c([N("esri.views.2d.constraints.GeometryConstraint")],Hf);var nR;let Zb=nR=class extends Ze{constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new nR({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([p()],Zb.prototype,"enabled",void 0),c([p()],Zb.prototype,"rotationEnabled",void 0),Zb=nR=c([N("esri.views.2d.constraints.RotationConstraint")],Zb);const nre=Zb;var sR;let Is=sR=class extends Ze{constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:r,maxScale:i,minZoom:n,maxZoom:s}=this,o=-1,a=-1,l=!1,u=!1;if(r!==0&&i!==0&&r<i&&([r,i]=[i,r]),!t||!t.length)return this._set("effectiveMinScale",r),void this._set("effectiveMaxScale",i);t=t.map(h=>h.clone()),t.sort((h,d)=>d.scale-h.scale),t.forEach((h,d)=>h.level=d);for(const h of t)!l&&r>0&&r>=h.scale&&(o=h.level,l=!0),!u&&i>0&&i>=h.scale&&(a=e?e.level:-1,u=!0),e=h;n===-1&&(n=r===0?0:o),s===-1&&(s=i===0?t.length-1:a),n=Math.max(n,0),n=Math.min(n,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),n>s&&([n,s]=[s,n]),r=t[n].scale,i=t[s].scale,t.splice(0,n),t.splice(s-n+1,t.length),t.forEach((h,d)=>{this._lodByScale[h.scale]=h,this._scales[d]=h.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",n),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",r),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;const r=this.effectiveMinScale,i=this.effectiveMaxScale,n=e.targetGeometry,s=t&&t.targetGeometry,o=i!==0&&e.scale<i,a=r!==0&&e.scale>r;if(o||a){const l=a?r:i;if(s){const u=(l-t.scale)/(e.scale-t.scale);n.x=s.x+(n.x-s.x)*u,n.y=s.y+(n.y-s.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);const t=this.scaleToZoom(e.scale),r=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(r>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);const t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];const r=Math.round(e-.5),i=Math.round(e);return t[i]+(i-e)*(t[r]-t[i])}scaleToZoom(e){if(!this.effectiveLODs)return-1;const t=this._scales;let r,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let n=0;n<t.length-1;n++){if(r=t[n],i=t[n+1],i===e)return n+this.effectiveMinZoom+1;if(r>e&&i<e)return n+this.effectiveMinZoom+1-(e-i)/(r-i)}}snapToClosestScale(e){if(!this.effectiveLODs)return e;const t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;const r=Math.round(this.scaleToZoom(e));return this.zoomToScale(r-1)}clone(){return new sR({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,r)=>Math.abs(r-e)<=Math.abs(t-e)?r:t,this._scales[0])),this._lodByScale[e].scale}};c([p({readOnly:!0})],Is.prototype,"effectiveLODs",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMinZoom",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMaxZoom",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMinScale",void 0),c([p({readOnly:!0})],Is.prototype,"effectiveMaxScale",void 0),c([p()],Is.prototype,"lods",void 0),c([p()],Is.prototype,"minZoom",void 0),c([p()],Is.prototype,"maxZoom",void 0),c([p()],Is.prototype,"minScale",void 0),c([p()],Is.prototype,"maxScale",void 0),c([p()],Is.prototype,"snapToZoom",void 0),Is=sR=c([N("esri.views.2d.constraints.ZoomConstraint")],Is);const sre=Is,Ike={base:null,key:"type",typeMap:{extent:nt,polygon:_n}};let pi=class extends _h.EventedAccessor{constructor(){super(...arguments),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0}initialize(){this.watch(["_zoom","_rotation"],this.emit.bind(this,"update"),!0)}destroy(){this.view=null,this._set("_zoom",null),this._set("_rotation",null)}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get _defaultLODs(){var e,t,r;const i=(e=this.view)==null||(t=e.defaultsFromMap)==null?void 0:t.tileInfo,n=(r=this.view)==null?void 0:r.spatialReference;return i&&n&&i.spatialReference.equals(n)?i.lods:null}get _geometry(){return new Hf({geometry:this.geometry,spatialReference:this.view.spatialReference})}get _rotation(){return new nre({rotationEnabled:this.rotationEnabled})}get _zoom(){const e=this._get("_zoom"),t=this.lods||this._defaultLODs,r=this.minZoom,i=this.maxZoom,n=this.minScale,s=this.maxScale,o=this.snapToZoom;return e&&e.lods===t&&e.minZoom===r&&e.maxZoom===i&&e.minScale===n&&e.maxScale===s&&e.snapToZoom===o?e:new sre({lods:t,minZoom:r,maxZoom:i,minScale:n,maxScale:s,snapToZoom:o})}canZoomInTo(e){const t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){const t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),e}constrainByGeometry(e){return this._geometry.constrain(e)}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([p({readOnly:!0,aliasOf:"_zoom.effectiveLODs"})],pi.prototype,"effectiveLODs",void 0),c([p({readOnly:!0,aliasOf:"_zoom.effectiveMinScale"})],pi.prototype,"effectiveMinScale",void 0),c([p({readOnly:!0,aliasOf:"_zoom.effectiveMaxScale"})],pi.prototype,"effectiveMaxScale",void 0),c([p({readOnly:!0,aliasOf:"_zoom.effectiveMinZoom"})],pi.prototype,"effectiveMinZoom",void 0),c([p({readOnly:!0,aliasOf:"_zoom.effectiveMaxZoom"})],pi.prototype,"effectiveMaxZoom",void 0),c([p({types:Ike,value:null})],pi.prototype,"geometry",null),c([p({type:[wt]})],pi.prototype,"lods",void 0),c([p()],pi.prototype,"minScale",void 0),c([p()],pi.prototype,"maxScale",void 0),c([p()],pi.prototype,"minZoom",void 0),c([p()],pi.prototype,"maxZoom",void 0),c([p()],pi.prototype,"rotationEnabled",void 0),c([p()],pi.prototype,"snapToZoom",void 0),c([p()],pi.prototype,"view",void 0),c([p()],pi.prototype,"_defaultLODs",null),c([p({type:Hf})],pi.prototype,"_geometry",null),c([p({type:nre})],pi.prototype,"_rotation",null),c([p({readOnly:!0,type:sre})],pi.prototype,"_zoom",null),pi=c([N("esri.views.2d.MapViewConstraints")],pi);const ore=pi;function are(){const e=new Float32Array(6);return e[0]=1,e[3]=1,e}function Tke(e){const t=new Float32Array(6);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function $ke(e,t,r,i,n,s){const o=new Float32Array(6);return o[0]=e,o[1]=t,o[2]=r,o[3]=i,o[4]=n,o[5]=s,o}function Eke(e,t){return new Float32Array(e,t,6)}function lre(e,t,r,i){const n=t[i],s=t[i+1];e[i]=r[0]*n+r[2]*s+r[4],e[i+1]=r[1]*n+r[3]*s+r[5]}function Ake(e,t,r,i=0,n=0,s=2){const o=n||t.length/s;for(let a=i;a<o;a++)lre(e,t,r,a*s)}Object.freeze({__proto__:null,create:are,clone:Tke,fromValues:$ke,createView:Eke,transform:lre,transformMany:Ake});function Cke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10],e}function kke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function ure(e,t,r,i,n,s,o,a,l,u){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e[4]=s,e[5]=o,e[6]=a,e[7]=l,e[8]=u,e}function cre(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Oke(e,t){if(e===t){const r=t[1],i=t[2],n=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=i,e[7]=n}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Pke(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=h*o-a*u,f=-h*s+a*l,m=u*s-o*l;let g=r*d+i*f+n*m;return g?(g=1/g,e[0]=d*g,e[1]=(-h*i+n*u)*g,e[2]=(a*i-n*o)*g,e[3]=f*g,e[4]=(h*r-n*l)*g,e[5]=(-a*r+n*s)*g,e[6]=m*g,e[7]=(-u*r+i*l)*g,e[8]=(o*r-i*s)*g,e):null}function Rke(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8];return e[0]=o*h-a*u,e[1]=n*u-i*h,e[2]=i*a-n*o,e[3]=a*l-s*h,e[4]=r*h-n*l,e[5]=n*s-r*a,e[6]=s*u-o*l,e[7]=i*l-r*u,e[8]=r*o-i*s,e}function Lke(e){const t=e[0],r=e[1],i=e[2],n=e[3],s=e[4],o=e[5],a=e[6],l=e[7],u=e[8];return t*(u*s-o*l)+r*(-u*n+o*a)+i*(l*n-s*a)}function m8(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=r[0],m=r[1],g=r[2],b=r[3],w=r[4],_=r[5],x=r[6],I=r[7],S=r[8];return e[0]=f*i+m*o+g*u,e[1]=f*n+m*a+g*h,e[2]=f*s+m*l+g*d,e[3]=b*i+w*o+_*u,e[4]=b*n+w*a+_*h,e[5]=b*s+w*l+_*d,e[6]=x*i+I*o+S*u,e[7]=x*n+I*a+S*h,e[8]=x*s+I*l+S*d,e}function oR(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=r[0],m=r[1];return e[0]=i,e[1]=n,e[2]=s,e[3]=o,e[4]=a,e[5]=l,e[6]=f*i+m*o+u,e[7]=f*n+m*a+h,e[8]=f*s+m*l+d,e}function hre(e,t,r){const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5],u=t[6],h=t[7],d=t[8],f=Math.sin(r),m=Math.cos(r);return e[0]=m*i+f*o,e[1]=m*n+f*a,e[2]=m*s+f*l,e[3]=m*o-f*i,e[4]=m*a-f*n,e[5]=m*l-f*s,e[6]=u,e[7]=h,e[8]=d,e}function Nke(e,t,r){const i=r[0],n=r[1],s=r[2];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e[6]=s*t[6],e[7]=s*t[7],e[8]=s*t[8],e}function Dke(e,t,r){const i=r[0],n=r[1];return e[0]=i*t[0],e[1]=i*t[1],e[2]=i*t[2],e[3]=n*t[3],e[4]=n*t[4],e[5]=n*t[5],e}function Fke(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=t[0],e[7]=t[1],e[8]=1,e}function jke(e,t){const r=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=r,e[2]=0,e[3]=-r,e[4]=i,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Vke(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=t[1],e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function Uke(e,t){return e[0]=t[0],e[1]=t[1],e[2]=0,e[3]=t[2],e[4]=t[3],e[5]=0,e[6]=t[4],e[7]=t[5],e[8]=1,e}function zke(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=r+r,a=i+i,l=n+n,u=r*o,h=i*o,d=i*a,f=n*o,m=n*a,g=n*l,b=s*o,w=s*a,_=s*l;return e[0]=1-d-g,e[3]=h-_,e[6]=f+w,e[1]=h+_,e[4]=1-u-g,e[7]=m-b,e[2]=f-w,e[5]=m+b,e[8]=1-u-d,e}function Bke(e,t){const r=t[0],i=t[1],n=t[2],s=t[4],o=t[5],a=t[6],l=t[8],u=t[9],h=t[10],d=h*o-a*u,f=-h*s+a*l,m=u*s-o*l,g=r*d+i*f+n*m;if(!g)return null;const b=1/g;return e[0]=d*b,e[1]=(-h*i+n*u)*b,e[2]=(a*i-n*o)*b,e[3]=f*b,e[4]=(h*r-n*l)*b,e[5]=(-a*r+n*s)*b,e[6]=m*b,e[7]=(-u*r+i*l)*b,e[8]=(o*r-i*s)*b,e}function Gke(e,t){const r=t[0],i=t[1],n=t[2],s=t[3],o=t[4],a=t[5],l=t[6],u=t[7],h=t[8],d=t[9],f=t[10],m=t[11],g=t[12],b=t[13],w=t[14],_=t[15],x=r*a-i*o,I=r*l-n*o,S=r*u-s*o,T=i*l-n*a,$=i*u-s*a,E=n*u-s*l,C=h*b-d*g,O=h*w-f*g,R=h*_-m*g,D=d*w-f*b,F=d*_-m*b,z=f*_-m*w;let B=x*z-I*F+S*D+T*R-$*O+E*C;return B?(B=1/B,e[0]=(a*z-l*F+u*D)*B,e[1]=(l*R-o*z-u*O)*B,e[2]=(o*F-a*R+u*C)*B,e[3]=(n*F-i*z-s*D)*B,e[4]=(r*z-n*R+s*O)*B,e[5]=(i*R-r*F-s*C)*B,e[6]=(b*E-w*$+_*T)*B,e[7]=(w*S-g*E-_*I)*B,e[8]=(g*$-b*S+_*x)*B,e):null}function qke(e,t,r){return e[0]=2/t,e[1]=0,e[2]=0,e[3]=0,e[4]=-2/r,e[5]=0,e[6]=-1,e[7]=1,e[8]=1,e}function Hke(e){return"mat3("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+")"}function Wke(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2+e[3]**2+e[4]**2+e[5]**2+e[6]**2+e[7]**2+e[8]**2)}function Jke(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e[4]=t[4]+r[4],e[5]=t[5]+r[5],e[6]=t[6]+r[6],e[7]=t[7]+r[7],e[8]=t[8]+r[8],e}function dre(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e[3]=t[3]-r[3],e[4]=t[4]-r[4],e[5]=t[5]-r[5],e[6]=t[6]-r[6],e[7]=t[7]-r[7],e[8]=t[8]-r[8],e}function Zke(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*r,e[5]=t[5]*r,e[6]=t[6]*r,e[7]=t[7]*r,e[8]=t[8]*r,e}function Yke(e,t,r,i){return e[0]=t[0]+r[0]*i,e[1]=t[1]+r[1]*i,e[2]=t[2]+r[2]*i,e[3]=t[3]+r[3]*i,e[4]=t[4]+r[4]*i,e[5]=t[5]+r[5]*i,e[6]=t[6]+r[6]*i,e[7]=t[7]+r[7]*i,e[8]=t[8]+r[8]*i,e}function Kke(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]}function Xke(e,t){const r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8],d=t[0],f=t[1],m=t[2],g=t[3],b=t[4],w=t[5],_=t[6],x=t[7],I=t[8];return Math.abs(r-d)<=mt*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(i-f)<=mt*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(n-m)<=mt*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(s-g)<=mt*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(o-b)<=mt*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-w)<=mt*Math.max(1,Math.abs(a),Math.abs(w))&&Math.abs(l-_)<=mt*Math.max(1,Math.abs(l),Math.abs(_))&&Math.abs(u-x)<=mt*Math.max(1,Math.abs(u),Math.abs(x))&&Math.abs(h-I)<=mt*Math.max(1,Math.abs(h),Math.abs(I))}function Qke(e){const t=mt,r=e[0],i=e[1],n=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],h=e[8];return Math.abs(1-(r*r+s*s+l*l))<=t&&Math.abs(1-(i*i+o*o+u*u))<=t&&Math.abs(1-(n*n+a*a+h*h))<=t}const eOe=m8,tOe=dre;Object.freeze({__proto__:null,fromMat4:Cke,copy:kke,set:ure,identity:cre,transpose:Oke,invert:Pke,adjoint:Rke,determinant:Lke,multiply:m8,translate:oR,rotate:hre,scale:Nke,scaleByVec2:Dke,fromTranslation:Fke,fromRotation:jke,fromScaling:Vke,fromMat2d:Uke,fromQuat:zke,normalFromMat4Legacy:Bke,normalFromMat4:Gke,projection:qke,str:Hke,frob:Wke,add:Jke,subtract:dre,multiplyScalar:Zke,multiplyScalarAndAdd:Yke,exactEquals:Kke,equals:Xke,isOrthoNormal:Qke,mul:eOe,sub:tOe});function c3(){const e=new Float32Array(9);return e[0]=1,e[4]=1,e[8]=1,e}function rOe(e){const t=new Float32Array(9);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function iOe(e,t,r,i,n,s,o,a,l){const u=new Float32Array(9);return u[0]=e,u[1]=t,u[2]=r,u[3]=i,u[4]=n,u[5]=s,u[6]=o,u[7]=a,u[8]=l,u}function nOe(e,t){return new Float32Array(e,t,9)}Object.freeze({__proto__:null,create:c3,clone:rOe,fromValues:iOe,createView:nOe});function pre(){return new Float32Array(2)}function sOe(e){const t=new Float32Array(2);return t[0]=e[0],t[1]=e[1],t}function rv(e,t){const r=new Float32Array(2);return r[0]=e,r[1]=t,r}function oOe(e,t){return new Float32Array(e,t,2)}function fre(){return pre()}function mre(){return rv(1,1)}function yre(){return rv(1,0)}function gre(){return rv(0,1)}const aOe=fre(),lOe=mre(),uOe=yre(),cOe=gre();Object.freeze({__proto__:null,create:pre,clone:sOe,fromValues:rv,createView:oOe,zeros:fre,ones:mre,unitX:yre,unitY:gre,ZEROS:aOe,ONES:lOe,UNIT_X:uOe,UNIT_Y:cOe});function hOe(e){return e instanceof Float32Array&&e.length>=2}function dOe(e){return Array.isArray(e)&&e.length>=2}function N5(e){return hOe(e)||dOe(e)}var aR;const oc=[0,0];let kf=aR=class extends me{constructor(e){super(e),this._viewpoint2D={center:Vr(),rotation:0,scale:0,spatialReference:null},this.center=[0,0],this.extent=new nt,this.id=0,this.inverseTransform=ep(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=ep(),this.transformNoRotation=ep(),this.displayMat3=c3(),this.displayViewMat3=c3(),this.viewMat3=c3(),this.viewMat2d=are(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){const t=this._viewpoint2D,r=e.targetGeometry;t.center[0]=r.x,t.center[1]=r.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=r.spatialReference}this._update()}copy(e){const t=this.size,r=this.viewpoint;return r&&t?(this.viewpoint=Nl(r,e.viewpoint),this._set("size",tv(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new aR({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,r){return N5(t)?xu(e,t,this.inverseTransform):(oc[0]=t,oc[1]=r,xu(e,oc,this.inverseTransform))}toScreen(e,t,r){return N5(t)?xu(e,t,this.transform):(oc[0]=t,oc[1]=r,xu(e,oc,this.transform))}toScreenNoRotation(e,t,r){return N5(t)?xu(e,t,this.transformNoRotation):(oc[0]=t,oc[1]=r,xu(e,oc,this.transformNoRotation))}getScreenTransform(e,t){const{center:r}=this._viewpoint2D,i=this._get("pixelRatio")||1,n=this._get("size");return p8(e,r,n,t,0,i),e}_update(){const{center:e,spatialReference:t,scale:r,rotation:i}=this._viewpoint2D,n=this._get("pixelRatio")||1,s=this._get("size"),o=new oh({targetGeometry:new Ke(e[0],e[1],t),scale:r,rotation:i});if(this._set("viewpoint",o),!s||!t||!r)return;this.resolution=s1(o),this.rotation=i,this.scale=r,this.spatialReference=t,tv(this.center,e);const a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;ure(this.displayMat3,a,0,0,0,l,0,-1,1,1);const u=cre(this.viewMat3),h=rv(s[0]/2,s[1]/2),d=rv(-s[0]/2,-s[1]/2),f=i_(i);oR(u,u,h),hre(u,u,f),oR(u,u,d),m8(this.displayViewMat3,this.displayMat3,u);const m=l8(this.viewMat2d);return Km(m,m,h),z$(m,m,f),Km(m,m,d),nke(this.extent,o,s),f8(this.transform,o,s,n),u8(this.inverseTransform,this.transform),hke(this.transformNoRotation,o,s,n),this.worldScreenWidth=pke(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([p({readOnly:!0})],kf.prototype,"id",void 0),c([p({value:1,json:{write:!0}})],kf.prototype,"pixelRatio",null),c([p({json:{write:!0}})],kf.prototype,"size",null),c([p({type:oh,json:{write:!0}})],kf.prototype,"viewpoint",null),kf=aR=c([N("esri.views.2d.ViewState")],kf);const $z=kf;let Wc=class extends Ze{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}};c([p()],Wc.prototype,"left",void 0),c([p()],Wc.prototype,"top",void 0),c([p()],Wc.prototype,"right",void 0),c([p()],Wc.prototype,"bottom",void 0),Wc=c([N("esri.views.2d.PaddedViewState.Padding")],Wc);let Fg=class extends $z{constructor(...e){super(...e),this.paddedViewState=new $z,this._updateContent=(()=>{const t=Vr();return()=>{const r=this._get("size"),i=this._get("padding");if(!r||!i)return;const n=this.paddedViewState;Ti(t,i.left+i.right,i.top+i.bottom),T_(t,r,t),tv(n.size,t);const s=n.viewpoint;s&&(this.viewpoint=s)}})(),this.watch(["size","padding"],this._updateContent,!0),this.padding=new Wc,this.size=[0,0]}set padding(e){this._set("padding",e||new Wc)}set viewpoint(e){if(e){const t=e.clone();this.paddedViewState.viewpoint=e,mke(t,e,this._get("size"),this._get("padding"));const r=this._viewpoint2D,i=t.targetGeometry;r.center[0]=i.x,r.center[1]=i.y,r.rotation=t.rotation,r.scale=t.scale,r.spatialReference=i.spatialReference,this._update()}}};c([p()],Fg.prototype,"paddedViewState",void 0),c([p({type:Wc})],Fg.prototype,"padding",null),c([p()],Fg.prototype,"viewpoint",null),Fg=c([N("esri.views.2d.PaddedViewState")],Fg);const pOe=Fg;class fOe{constructor(t,r){this.item=t,this.controller=r,this.promise=null}}class vre{constructor(t){this._deferreds=new Map,this._controllers=new Map,this._processingItems=new Map,this._isPaused=!1,this._schedule=null,this._task=null,this.concurrency=1,t.concurrency&&(this.concurrency=t.concurrency),this._queue=new BP(t.peeker),this.process=t.process;const r=t.scheduler;t.priority&&U(r)&&(this._task=r.registerTask(t.priority,this))}destroy(){this.clear(),this._schedule&&(this._schedule.remove(),this._schedule=null),this._task&&(this._task.remove(),this._task=null)}get length(){return this._processingItems.size+this._queue.length}abort(t){const r=this._controllers.get(t);r&&r.abort()}clear(){this._queue.clear();const t=[];this._controllers.forEach(r=>t.push(r)),this._controllers.clear(),t.forEach(r=>r.abort()),this._processingItems.clear(),this._cancelNext()}forEach(t){this._deferreds.forEach((r,i)=>t(i))}get(t){const r=this._deferreds.get(t);return r?r.promise:void 0}isOngoing(t){return this._processingItems.has(t)}has(t){return this._deferreds.has(t)}pause(){this._isPaused||(this._isPaused=!0,this._cancelNext())}push(t,r){const i=this.get(t);if(i)return i;const n=new AbortController;let s=null;r&&(s=xa(r,()=>n.abort()));const o=()=>{const h=this._processingItems.get(t);h&&h.controller.abort(),a(),u.reject(Zr())},a=()=>{l.remove(),U(s)&&s.remove(),this._deferreds.delete(t),this._controllers.delete(t),this._queue.remove(t),this._processingItems.delete(t),this._scheduleNext()},l=UT(n.signal,o),u=ph();return this._deferreds.set(t,u),this._controllers.set(t,n),u.promise.then(a,a),this._queue.push(t),this._scheduleNext(),u.promise}last(){return this._queue.last()}peek(){return this._queue.peek()}popLast(){return this._queue.popLast()}reset(){const t=[];this._processingItems.forEach(r=>t.push(r)),this._processingItems.clear();for(const r of t)this._queue.push(r.item),r.controller.abort();this._scheduleNext()}resume(){this._isPaused&&(this._isPaused=!1,this._scheduleNext())}takeAll(){const t=[];for(;this._queue.length;)t.push(this._queue.pop());return this.clear(),t}get running(){return!this._isPaused&&this._queue.length>0&&this._processingItems.size<this.concurrency}runTask(t){for(;!t.done&&this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),t.madeProgress()}_scheduleNext(){this._task||this._isPaused||this._schedule||(this._schedule=s2(()=>{this._schedule=null,this._next()}))}_next(){for(;this._queue.length>0&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).resolve(r))}_processError(t,r){this._canProcessFulfillment(t)&&(this._scheduleNext(),this._deferreds.get(t.item).reject(r))}_canProcessFulfillment(t){return!!this._deferreds.get(t.item)&&this._processingItems.get(t.item)===t}_process(t){if(ce(t))return;let r;const i=new AbortController,n=new fOe(t,i);this._processingItems.set(t,n);try{r=this.process(t,i.signal)}catch(s){this._processError(n,s)}hy(r)?(n.promise=r,r.then(s=>this._processResult(n,s),s=>this._processError(n,s))):this._processResult(n,r)}get test(){return{update:t=>this.runTask(t)}}}function mOe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const D5=new Set,uS=[],By=new Map,Ez=[0,0];let Uh=class extends Ze{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t}=this;this._queue=new vre({concurrency:e,process:(r,i)=>{const n=this._keyToItem.get(r);return t(n,{signal:i})},peeker:r=>r.values().next().value})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e,t){const r=e.key.id+"-"+t;if(this.has(r))return this.get(r);const i=this._queue.push(r),n=()=>{this._keyToItem.delete(r),this.notifyChange("updating")};return this._keyToItem.set(r,e),i.then(n,n),this.notifyChange("updating"),i}reset(){this._queue.reset(),this.notifyChange("updating")}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(u=>{const h=this._keyToItem.get(u),d=this.tileInfoView.getTileScale(h.key);By.has(d)||(By.set(d,[]),r=Math.max(d,r),i=Math.min(d,i)),By.get(d).push(h.key),D5.add(d)});let n=this.state.scale;By.has(n)||(mOe(uS,D5),uS.sort((u,h)=>u-h),n=uS.reduce((u,h)=>Math.abs(h-n)<Math.abs(u-n)?h:u,uS[0])),n=Math.min(n,r),n=Math.max(n,i);const s=By.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((u,h)=>{const d=o.denormalizeCol(u.col,u.world),f=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-d)*(a-d)+(l-u.row)*(l-u.row))-Math.sqrt((a-f)*(a-f)+(l-h.row)*(l-h.row))}),D5.clear(),By.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Ez,o.key);const a=k2(Ez,r);a<i&&(i=a,n=o.key)}),n.id}};c([p({constructOnly:!0})],Uh.prototype,"concurrency",void 0),c([p({constructOnly:!0})],Uh.prototype,"process",void 0),c([p()],Uh.prototype,"state",void 0),c([p({constructOnly:!0})],Uh.prototype,"strategy",void 0),c([p({constructOnly:!0})],Uh.prototype,"tileInfoView",void 0),c([p({readOnly:!0})],Uh.prototype,"updating",null),Uh=c([N("esri.views.2d.tiling.PagedTileQueue")],Uh);class Os{constructor(t,r,i,n){this.set(t,r,i,n)}static getId(t,r,i,n){return typeof t=="object"?`${t.level}/${t.row}/${t.col}/${t.world}`:`${t}/${r}/${i}/${n}`}get key(){return this}get id(){return this.toString()}set id(t){this.set(t)}get hash(){const t=4095&this.row,r=4095&this.col,i=63&this.level;return(3&this.world)<<30|r<<22|t<<8|i}acquire(t,r,i,n){this.set(t,r,i,n)}contains(t){const r=t.level-this.level;return this.row===t.row>>r&&this.col===t.col>>r&&this.world===t.world}equals(t){return this.level===t.level&&this.row===t.row&&this.col===t.col&&this.world===t.world}clone(){return new Os(this)}release(){this.level=0,this.row=0,this.col=0,this.world=0}set(t,r,i,n){if(t==null)this.level=0,this.row=0,this.col=0,this.world=0;else if(typeof t=="object")this.level=t.level||0,this.row=t.row||0,this.col=t.col||0,this.world=t.world||0;else if(typeof t=="string"){const[s,o,a,l]=t.split("/");this.level=parseFloat(s),this.row=parseFloat(o),this.col=parseFloat(a),this.world=parseFloat(l)}else this.level=+t,this.row=+r,this.col=+i,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return this.level<=0?null:new Os(this.level-1,this.row>>1,this.col>>1,this.world)}getChildKeys(){const t=this.level+1,r=this.row<<1,i=this.col<<1,n=this.world;return[new Os(t,r,i,n),new Os(t,r,i+1,n),new Os(t,r+1,i,n),new Os(t,r+1,i+1,n)]}compareRowMajor(t){return this.row<t.row?-1:this.row>t.row?1:this.col<t.col?-1:this.col>t.col?1:0}}Os.pool=new vl(Os,null,null,25,50);function zh(e,t){return[e,t]}function jp(e,t,r){return e[0]=t,e[1]=r,e}function yOe(e,t,r,i,n){return e[0]=t,e[1]=r,e[2]=i,e[3]=n,e}const Ra=new Os("0/0/0/0");class y8{constructor(t,r,i,n,s,o,a,l,u,h,d,f){this.level=t,this.resolution=r,this.scale=i,this.origin=n,this.first=s,this.last=o,this.size=a,this.norm=l,this.worldStart=u,this.worldEnd=h,this.worldSize=d,this.wrap=f}static create(t,r,i=null){const n=Ao(t.spatialReference),s=r.origin||zh(t.origin.x,t.origin.y),o=zh(t.size[0]*r.resolution,t.size[1]*r.resolution),a=zh(-1/0,-1/0),l=zh(1/0,1/0),u=zh(1/0,1/0);U(i)&&(jp(a,Math.max(0,Math.floor((i.xmin-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymax)/o[1]))),jp(l,Math.max(0,Math.floor((i.xmax-s[0])/o[0])),Math.max(0,Math.floor((s[1]-i.ymin)/o[1]))),jp(u,l[0]-a[0]+1,l[1]-a[1]+1));const{cols:h,rows:d}=r;let f,m,g,b;return!i&&h&&d&&(jp(a,h[0],d[0]),jp(l,h[1],d[1]),jp(u,h[1]-h[0]+1,d[1]-d[0]+1)),t.isWrappable?(f=zh(Math.ceil(Math.round((n.valid[1]-n.valid[0])/r.resolution)/t.size[0]),u[1]),m=zh(Math.floor((n.origin[0]-s[0])/o[0]),a[1]),g=zh(f[0]+m[0]-1,l[1]),b=!0):(m=a,g=l,f=u,b=!1),new y8(r.level,r.resolution,r.scale,s,a,l,u,o,m,g,f,b)}normalizeCol(t){if(!this.wrap)return t;const r=this.worldSize[0];return t<0?r-1-Math.abs((t+1)%r):t%r}denormalizeCol(t,r){return this.wrap?this.worldSize[0]*r+t:t}getWorldForColumn(t){return this.wrap?Math.floor(t/this.worldSize[0]):0}getFirstColumnForWorld(t){return t*this.worldSize[0]+this.first[0]}getLastColumnForWorld(t){return t*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(t){return(t-this.origin[0])/this.norm[0]}getXForColumn(t){return this.origin[0]+t*this.norm[0]}getRowForY(t){return(this.origin[1]-t)/this.norm[1]}getYForRow(t){return this.origin[1]-t*this.norm[1]}getTileBounds(t,r,i=!1){Ra.set(r);const n=i?Ra.col:this.denormalizeCol(Ra.col,Ra.world),s=Ra.row;return yOe(t,this.getXForColumn(n),this.getYForRow(s+1),this.getXForColumn(n+1),this.getYForRow(s)),t}getTileCoords(t,r,i=!1){Ra.set(r);const n=i?Ra.col:this.denormalizeCol(Ra.col,Ra.world);return Array.isArray(t)?jp(t,this.getXForColumn(n),this.getYForRow(Ra.row)):(t.x=this.getXForColumn(n),t.y=this.getYForRow(Ra.row)),t}}class iv{constructor(){this.spans=[]}acquire(t){this.lodInfo=t}release(){this.lodInfo=null,this.spans.length=0}forEach(t,r){const{spans:i,lodInfo:n}=this,{level:s}=n;if(i.length!==0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++)t.call(r,s,o,n.normalizeCol(u),n.getWorldForColumn(u))}}iv.pool=new vl(iv);class F5{constructor(t,r,i){this.row=t,this.colFrom=r,this.colTo=i}}const kr=new Os("0/0/0/0");class g8{constructor(t,r,i,n,s,o,a,l){this.x=t,this.ymin=r,this.ymax=i,this.invM=n,this.leftAdjust=s,this.rightAdjust=o,this.leftBound=a,this.rightBound=l}static create(t,r){t[1]>r[1]&&([t,r]=[r,t]);const[i,n]=t,[s,o]=r,a=s-i,l=o-n,u=l!==0?a/l:0,h=(Math.ceil(n)-n)*u,d=(Math.floor(n)-n)*u;return new g8(i,Math.floor(n),Math.ceil(o),u,a<0?h:d,a<0?d:h,a<0?s:i,a<0?i:s)}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const so=[[0,0],[0,0],[0,0],[0,0]],gOe=1e-6;class vOe{constructor(t,r=null){this.tileInfo=t,this.fullExtent=r,this.scales=[],this._lodInfos=null,this._infoByScale={},this._infoByLevel={};const i=t.lods.slice();i.sort(function(s,o){return o.scale-s.scale});const n=this._lodInfos=i.map(s=>y8.create(t,s,r));i.forEach((s,o)=>{this._infoByLevel[s.level]=n[o],this._infoByScale[s.scale]=n[o],this.scales[o]=s.scale},this),this._wrap=t.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(t){return this._infoByLevel[typeof t=="number"?t:t.level]}getTileBounds(t,r,i=!1){kr.set(r);const n=this._infoByLevel[kr.level];return n?n.getTileBounds(t,kr,i):t}getTileCoords(t,r,i=!1){kr.set(r);const n=this._infoByLevel[kr.level];return n?n.getTileCoords(t,kr,i):t}getTileCoverage(t,r=192,i="closest"){const n=i==="closest"?this.getClosestInfoForScale(t.scale):this.getSmallestInfoForScale(t.scale),s=iv.pool.acquire(n),o=this._wrap;let a,l,u,h=1/0,d=-1/0;const f=s.spans;so[0][0]=so[0][1]=so[1][1]=so[3][0]=-r,so[1][0]=so[2][0]=t.size[0]+r,so[2][1]=so[3][1]=t.size[1]+r;for(const w of so)t.toMap(w,w),w[0]=n.getColumnForX(w[0]),w[1]=n.getRowForY(w[1]);const m=[];let g=3;for(let w=0;w<4;w++){if(so[w][1]===so[g][1]){g=w;continue}const _=g8.create(so[w],so[g]);h=Math.min(_.ymin,h),d=Math.max(_.ymax,d),m[_.ymin]===void 0&&(m[_.ymin]=[]),m[_.ymin].push(_),g=w}if(h==null||d==null||d-h>100)return null;let b=[];for(a=h;a<d;){m[a]!=null&&(b=b.concat(m[a])),l=1/0,u=-1/0;for(let w=b.length-1;w>=0;w--){const _=b[w];l=Math.min(l,_.getLeftCol()),u=Math.max(u,_.getRightCol())}if(l=Math.floor(l),u=Math.floor(u),a>=n.first[1]&&a<=n.last[1])if(o)if(n.size[0]<n.worldSize[0]){const w=Math.floor(u/n.worldSize[0]);for(let _=Math.floor(l/n.worldSize[0]);_<=w;_++)f.push(new F5(a,Math.max(n.getFirstColumnForWorld(_),l),Math.min(n.getLastColumnForWorld(_),u)))}else f.push(new F5(a,l,u));else l>n.last[0]||u<n.first[0]||(l=Math.max(l,n.first[0]),u=Math.min(u,n.last[0]),f.push(new F5(a,l,u)));a+=1;for(let w=b.length-1;w>=0;w--){const _=b[w];_.ymax>=a?_.incrRow():b.splice(w,1)}}return s}getTileParentId(t){kr.set(t);const r=this._infoByLevel[kr.level],i=this._lodInfos.indexOf(r)-1;return i<0?null:(this._getTileIdAtLOD(kr,this._lodInfos[i],kr),kr.id)}getTileResolution(t){const r=this._infoByLevel[typeof t=="object"?t.level:t];return r?r.resolution:-1}getTileScale(t){const r=this._infoByLevel[t.level];return r?r.scale:-1}intersects(t,r){kr.set(r);const i=this._infoByLevel[kr.level],n=t.lodInfo;if(n.resolution>i.resolution){this._getTileIdAtLOD(kr,n,kr);const o=n.denormalizeCol(kr.col,kr.world);for(const a of t.spans)if(a.row===kr.row&&a.colFrom<=o&&a.colTo>=o)return!0}if(n.resolution<i.resolution){const[o,a,l,u]=t.spans.reduce((b,w)=>(b[0]=Math.min(b[0],w.row),b[1]=Math.max(b[1],w.row),b[2]=Math.min(b[2],w.colFrom),b[3]=Math.max(b[3],w.colTo),b),[1/0,-1/0,1/0,-1/0]),h=i.denormalizeCol(kr.col,kr.world),d=n.getColumnForX(i.getXForColumn(h)),f=n.getRowForY(i.getYForRow(kr.row)),m=n.getColumnForX(i.getXForColumn(h+1))-1,g=n.getRowForY(i.getYForRow(kr.row+1))-1;return!(d>u||m<l||f>a||g<o)}const s=n.denormalizeCol(kr.col,kr.world);return t.spans.some(o=>o.row===kr.row&&o.colFrom<=s&&o.colTo>=s)}normalizeBounds(t,r,i){if(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],this._wrap){const n=Ao(this.tileInfo.spatialReference),s=-i*(n.valid[1]-n.valid[0]);t[0]+=s,t[2]+=s}return t}getSmallestInfoForScale(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t];if(t>r[0])return this._infoByScale[r[0]];for(let i=1;i<r.length-1;i++)if(t>r[i]+gOe)return this._infoByScale[r[i-1]];return this._infoByScale[r[r.length-1]]}getClosestInfoForScale(t){const r=this.scales;return this._infoByScale[t]||(t=r.reduce((i,n)=>Math.abs(n-t)<Math.abs(i-t)?n:i,r[0])),this._infoByScale[t]}scaleToLevel(t){const r=this.scales;if(this._infoByScale[t])return this._infoByScale[t].level;for(let i=r.length-1;i>=0;i--)if(t<r[i])return i===r.length-1?this._infoByScale[r[r.length-1]].level:this._infoByScale[r[i]].level+(r[i]-t)/(r[i]-r[i+1]);return this._infoByScale[r[0]].level}scaleToZoom(t){return this.tileInfo.scaleToZoom(t)}_getTileIdAtLOD(t,r,i){const n=this._infoByLevel[i.level];return t.set(i),r.resolution<n.resolution?null:(r.resolution===n.resolution||(t.level=r.level,t.col=Math.floor(i.col*n.resolution/r.resolution+.01),t.row=Math.floor(i.row*n.resolution/r.resolution+.01)),t)}}function bOe(e,t){return e.length=0,t.forEach(r=>e.push(r)),e}const j5=new Set,cS=[],Gy=new Map,Az=[0,0];let Lc=class extends Ze{constructor(e){super(e),this._keyToItem=new Map,this.concurrency=6,this.strategy="scale-first",this.tileInfoView=null}initialize(){const{concurrency:e,process:t,strategy:r}=this;this._queue=new vre({concurrency:e,process:(i,n)=>{const s=this._keyToItem.get(i);return t(s,{signal:n})},peeker:r==="scale-first"?i=>this._peekByScaleFirst(i):i=>this._peekByCenterFirst(i)})}destroy(){this.clear(),this._queue.destroy(),this._queue=null}get length(){return this._queue?this._queue.length:0}get onGoingCount(){return this._keyToItem.size}get updating(){return this.length>0||this.onGoingCount>0}abort(e){const t=typeof e=="string"?e:e.id;this._queue.abort(t)}clear(){this._queue.clear(),this._keyToItem.clear(),this.notifyChange("updating")}has(e){return typeof e=="string"?this._keyToItem.has(e):this._keyToItem.has(e.id)}isOngoing(e){const t=typeof e=="string"?e:e.id;return this.has(t)&&this._queue.isOngoing(t)}pause(){this._queue.pause()}push(e){const t=e.key.id;if(this._queue.has(t))return this._queue.get(t);const r=this._queue.push(t),i=()=>{this._keyToItem.delete(t),this.notifyChange("updating")};return this._keyToItem.set(t,e),r.then(i,i),this.notifyChange("updating"),r}reset(){this._queue.reset()}resume(){this._queue.resume()}_peekByScaleFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView;let r=Number.NEGATIVE_INFINITY,i=Number.POSITIVE_INFINITY;e.forEach(u=>{const h=this._keyToItem.get(u),d=this.tileInfoView.getTileScale(h.key);Gy.has(d)||(Gy.set(d,[]),r=Math.max(d,r),i=Math.min(d,i)),Gy.get(d).push(h.key),j5.add(d)});let n=this.state.scale;Gy.has(n)||(bOe(cS,j5),cS.sort((u,h)=>u-h),n=cS.reduce((u,h)=>Math.abs(h-n)<Math.abs(u-n)?h:u,cS[0])),n=Math.min(n,r),n=Math.max(n,i);const s=Gy.get(n),o=t.getClosestInfoForScale(n),a=o.getColumnForX(this.state.center[0]),l=o.getRowForY(this.state.center[1]);return s.sort((u,h)=>{const d=o.denormalizeCol(u.col,u.world),f=o.denormalizeCol(h.col,h.world);return Math.sqrt((a-d)*(a-d)+(l-u.row)*(l-u.row))-Math.sqrt((a-f)*(a-f)+(l-h.row)*(l-h.row))}),j5.clear(),Gy.clear(),s[0].id}_peekByCenterFirst(e){if(!this.state)return e.values().next().value;const t=this.tileInfoView,r=this.state.center;let i=Number.POSITIVE_INFINITY,n=null;return e.forEach(s=>{const o=this._keyToItem.get(s);t.getTileCoords(Az,o.key);const a=k2(Az,r);a<i&&(i=a,n=o.key)}),n.id}};c([p({constructOnly:!0})],Lc.prototype,"concurrency",void 0),c([p({constructOnly:!0})],Lc.prototype,"process",void 0),c([p()],Lc.prototype,"state",void 0),c([p({constructOnly:!0})],Lc.prototype,"strategy",void 0),c([p({constructOnly:!0})],Lc.prototype,"tileInfoView",void 0),c([p({readOnly:!0})],Lc.prototype,"updating",null),Lc=c([N("esri.views.2d.tiling.TileQueue")],Lc);const vit=Lc;class wOe{constructor(t,r,i){this.maxSize=t,this.tileInfoView=r,this.removedFunc=i,this._tilePerId=new Map,this._tileKeysPerLevel=[]}has(t){return this._tilePerId.has(t)}get(t){return this._tilePerId.get(t)}pop(t){const r=this._tilePerId.get(t);if(!r)return null;const i=r.key.level,n=this._tileKeysPerLevel[i];Cz(this._tilePerId,t);for(let s=0;s<n.length;s++)if(n[s].id===t){n.splice(s,1);break}return r.visible=!0,r}add(t){t.visible=!1;const r=t.key,i=r.id;if(this._tilePerId.has(i))return;this._tilePerId.set(i,t);const n=r.level;this._tileKeysPerLevel[n]||(this._tileKeysPerLevel[n]=[]),this._tileKeysPerLevel[n].push(r)}prune(t,r,i){let n=this._tilePerId.size;if(n<=this.maxSize)return;let s=this._tileKeysPerLevel.length-1;for(;n>this.maxSize&&s>=0;)s!==t&&(n=this._pruneAroundCenterTile(n,r,i,s)),s--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,r,i,t))}_pruneAroundCenterTile(t,r,i,n){const s=this._tileKeysPerLevel[n];if(!s||s.length===0)return t;const{size:o,origin:a}=this.tileInfoView.tileInfo,l=i*o[0],u=i*o[1],h=[0,0],d=[0,0];for(s.sort((f,m)=>(h[0]=a.x+l*(f.col+.5),h[1]=a.y-u*(f.row+.5),d[0]=a.x+l*(m.col+.5),d[1]=a.y-u*(m.row+.5),GI(h,r)-GI(d,r)));s.length>0;){const f=s.pop();if(this._removeTile(f.id),--t===this.maxSize)break}return t}_removeTile(t){const r=this._tilePerId.get(t);this.removedFunc&&this.removedFunc(r),Cz(this._tilePerId,t)}}function Cz(e,t){e.delete(t)}const Vp=new Os(0,0,0,0),Wo=new Map,qy=[],hS=[];class bit{constructor(t){this._previousScale=Number.POSITIVE_INFINITY,this.cachePolicy="keep",this.coveragePolicy="closest",this.resampling=!0,this.tileIndex=new Map,this.tiles=[],this.buffer=192,this.acquireTile=t.acquireTile,this.releaseTile=t.releaseTile,this.tileInfoView=t.tileInfoView,this.resampling=t.resampling==null||!!t.resampling,t.cachePolicy&&(this.cachePolicy=t.cachePolicy),t.coveragePolicy&&(this.coveragePolicy=t.coveragePolicy),t.buffer!=null&&(this.buffer=t.buffer),t.cacheSize&&(this._tileCache=new wOe(t.cacheSize,this.tileInfoView,r=>{this.releaseTile(r)}))}destroy(){this.tileIndex.clear()}update(t){const{resampling:r,tileIndex:i}=this,n=this.tileInfoView.getTileCoverage(t.state,this.buffer,this.coveragePolicy);if(hS.length=0,qy.length=0,Wo.clear(),!n)return;const{minScale:s,maxScale:o}=this.tileInfoView.tileInfo,{spans:a,lodInfo:l}=n,{level:u}=l,{scale:h,center:d,resolution:f}=t.state,m=!t.stationary&&h>this._previousScale;if(this._previousScale=h,this.tiles.length=0,!r&&(h>s||h<o))return this.tiles.length=0,Wo.clear(),i.forEach(_=>{this.releaseTile(_)}),i.clear(),hS.length=0,qy.length=0,Wo.clear(),iv.pool.release(n),!0;i.forEach(_=>_.visible=!0);let g=0,b=0;if(a.length>0)for(const{row:_,colFrom:x,colTo:I}of a)for(let S=x;S<=I;S++){g++;const T=Vp.set(u,_,l.normalizeCol(S),l.getWorldForColumn(S)).id;if(i.has(T)){const $=i.get(T);$.isReady?(Wo.set(T,$),b++):m||this._addParentTile(T,Wo)}else{let $;if(this._tileCache&&this._tileCache.has(T)){if($=this._tileCache.pop(T),this.tileIndex.set(T,$),$.isReady){Wo.set(T,$),b++;continue}}else $=this.acquireTile(Vp),this.tileIndex.set(T,$);m||this._addParentTile(T,Wo)}}const w=b===g;i.forEach((_,x)=>{if(Vp.set(x),Wo.has(x))return;const I=this.tileInfoView.intersects(n,Vp),S=this.cachePolicy==="purge"?Vp.level!==u:Vp.level>u;!I||!m&&w?!S&&I||qy.push(x):_.isReady?S&&this.cachePolicy==="purge"&&this._hasReadyAncestor(Vp,u)?qy.push(x):hS.push(x):S&&qy.push(x)});for(const _ of hS){const x=i.get(_);x&&x.isReady&&Wo.set(_,x)}for(const _ of qy){const x=i.get(_);this._tileCache?this._tileCache.add(x):this.releaseTile(x),i.delete(_)}return Wo.forEach(_=>this.tiles.push(_)),i.forEach(_=>{Wo.has(_.key.id)||(_.visible=!1)}),this._tileCache&&this._tileCache.prune(u,d,f),iv.pool.release(n),Wo.clear(),w}clear(t=!0){const{tileIndex:r}=this;t&&r.forEach(i=>{this.releaseTile(i)}),r.clear()}updateCacheSize(t){this._tileCache&&(this._tileCache.maxSize=t)}_addParentTile(t,r){let i=t,n=null;for(;i=this.tileInfoView.getTileParentId(i),i;)if(this.tileIndex.has(i)){if(n=this.tileIndex.get(i),n&&n.isReady){r.has(n.key.id)||r.set(n.key.id,n);break}}else if(this._tileCache&&this._tileCache.has(i)&&(n=this._tileCache.pop(i),this.tileIndex.set(i,n),n&&n.isReady)){r.has(n.key.id)||r.set(n.key.id,n);break}}_hasReadyAncestor(t,r){const i=Sl();this.tileInfoView.getTileBounds(i,t,!0);for(const n of this.tileIndex.values())if(n.isReady&&n.key.level>=r&&n.key.level<t.level){const s=Sl();if(this.tileInfoView.getTileBounds(s,n.key,!0),Nme(s,i))return!0}return!1}}var kz,Oz,Pz,bre={exports:{}};kz=bre,Oz=function(){function e(n,s,o,a,l){t(n,s,o||0,a||n.length-1,l||i)}function t(n,s,o,a,l){for(;a>o;){if(a-o>600){var u=a-o+1,h=s-o+1,d=Math.log(u),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(u-f)/u)*(h-u/2<0?-1:1);t(n,s,Math.max(o,Math.floor(s-h*f/u+m)),Math.min(a,Math.floor(s+(u-h)*f/u+m)),l)}var g=n[s],b=o,w=a;for(r(n,o,s),l(n[a],g)>0&&r(n,o,a);b<w;){for(r(n,b,w),b++,w--;l(n[b],g)<0;)b++;for(;l(n[w],g)>0;)w--}l(n[o],g)===0?r(n,o,w):r(n,++w,a),w<=s&&(o=w+1),s<=w&&(a=w-1)}}function r(n,s,o){var a=n[s];n[s]=n[o],n[o]=a}function i(n,s){return n<s?-1:n>s?1:0}return e},(Pz=Oz())!==void 0&&(kz.exports=Pz);const _Oe=bre.exports;function WI(e,t){if(!(this instanceof WI))return new WI(e,t);this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&(typeof t=="function"?this.toBBox=t:this._initFormat(t)),this.clear()}function xOe(e,t,r){if(!r)return t.indexOf(e);for(var i=0;i<t.length;i++)if(r(e,t[i]))return i;return-1}function Hy(e,t){Yb(e,0,e.children.length,t,e)}function Yb(e,t,r,i,n){n||(n=jg(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(var s,o=t;o<r;o++)s=e.children[o],Kb(n,e.leaf?i(s):s);return n}function Kb(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function Rz(e,t){return e.minX-t.minX}function Lz(e,t){return e.minY-t.minY}function V5(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function dS(e){return e.maxX-e.minX+(e.maxY-e.minY)}function SOe(e,t){return(Math.max(t.maxX,e.maxX)-Math.min(t.minX,e.minX))*(Math.max(t.maxY,e.maxY)-Math.min(t.minY,e.minY))}function MOe(e,t){var r=Math.max(e.minX,t.minX),i=Math.max(e.minY,t.minY),n=Math.min(e.maxX,t.maxX),s=Math.min(e.maxY,t.maxY);return Math.max(0,n-r)*Math.max(0,s-i)}function U5(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function pS(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function jg(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function Nz(e,t,r,i,n){for(var s,o=[t,r];o.length;)(r=o.pop())-(t=o.pop())<=i||(s=t+Math.ceil((r-t)/i/2)*i,_Oe(e,s,t,r,n),o.push(t,s,s,r))}WI.prototype={all:function(){return this._all(this.data,[])},search:function(e){var t=this.data,r=[],i=this.toBBox;if(!pS(e,t))return r;for(var n,s,o,a,l=[];t;){for(n=0,s=t.children.length;n<s;n++)o=t.children[n],pS(e,a=t.leaf?i(o):o)&&(t.leaf?r.push(o):U5(e,a)?this._all(o,r):l.push(o));t=l.pop()}return r},collides:function(e){var t=this.data,r=this.toBBox;if(!pS(e,t))return!1;for(var i,n,s,o,a=[];t;){for(i=0,n=t.children.length;i<n;i++)if(s=t.children[i],pS(e,o=t.leaf?r(s):s)){if(t.leaf||U5(e,o))return!0;a.push(s)}t=a.pop()}return!1},load:function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0,r=e.length;t<r;t++)this.insert(e[t]);return this}var i=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var n=this.data;this.data=i,i=n}this._insert(i,this.data.height-i.height-1,!0)}else this.data=i;return this},insert:function(e){return e&&this._insert(e,this.data.height-1),this},clear:function(){return this.data=jg([]),this},remove:function(e,t){if(!e)return this;for(var r,i,n,s,o=this.data,a=this.toBBox(e),l=[],u=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],r=u.pop(),s=!0),o.leaf&&(n=xOe(e,o.children,t))!==-1)return o.children.splice(n,1),l.push(o),this._condense(l),this;s||o.leaf||!U5(o,a)?i?(r++,o=i.children[r],s=!1):o=null:(l.push(o),u.push(r),r=0,i=o,o=o.children[0])}return this},toBBox:function(e){return e},compareMinX:Rz,compareMinY:Lz,toJSON:function(){return this.data},fromJSON:function(e){return this.data=e,this},_all:function(e,t){for(var r=[];e;)e.leaf?t.push.apply(t,e.children):r.push.apply(r,e.children),e=r.pop();return t},_build:function(e,t,r,i){var n,s=r-t+1,o=this._maxEntries;if(s<=o)return Hy(n=jg(e.slice(t,r+1)),this.toBBox),n;i||(i=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,i-1))),(n=jg([])).leaf=!1,n.height=i;var a,l,u,h,d=Math.ceil(s/o),f=d*Math.ceil(Math.sqrt(o));for(Nz(e,t,r,f,this.compareMinX),a=t;a<=r;a+=f)for(Nz(e,a,u=Math.min(a+f-1,r),d,this.compareMinY),l=a;l<=u;l+=d)h=Math.min(l+d-1,u),n.children.push(this._build(e,l,h,i-1));return Hy(n,this.toBBox),n},_chooseSubtree:function(e,t,r,i){for(var n,s,o,a,l,u,h,d;i.push(t),!t.leaf&&i.length-1!==r;){for(h=d=1/0,n=0,s=t.children.length;n<s;n++)l=V5(o=t.children[n]),(u=SOe(e,o)-l)<d?(d=u,h=l<h?l:h,a=o):u===d&&l<h&&(h=l,a=o);t=a||t.children[0]}return t},_insert:function(e,t,r){var i=this.toBBox,n=r?e:i(e),s=[],o=this._chooseSubtree(n,this.data,t,s);for(o.children.push(e),Kb(o,n);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(n,s,t)},_split:function(e,t){var r=e[t],i=r.children.length,n=this._minEntries;this._chooseSplitAxis(r,n,i);var s=this._chooseSplitIndex(r,n,i),o=jg(r.children.splice(s,r.children.length-s));o.height=r.height,o.leaf=r.leaf,Hy(r,this.toBBox),Hy(o,this.toBBox),t?e[t-1].children.push(o):this._splitRoot(r,o)},_splitRoot:function(e,t){this.data=jg([e,t]),this.data.height=e.height+1,this.data.leaf=!1,Hy(this.data,this.toBBox)},_chooseSplitIndex:function(e,t,r){var i,n,s,o,a,l,u,h;for(l=u=1/0,i=t;i<=r-t;i++)o=MOe(n=Yb(e,0,i,this.toBBox),s=Yb(e,i,r,this.toBBox)),a=V5(n)+V5(s),o<l?(l=o,h=i,u=a<u?a:u):o===l&&a<u&&(u=a,h=i);return h},_chooseSplitAxis:function(e,t,r){var i=e.leaf?this.compareMinX:Rz,n=e.leaf?this.compareMinY:Lz;this._allDistMargin(e,t,r,i)<this._allDistMargin(e,t,r,n)&&e.children.sort(i)},_allDistMargin:function(e,t,r,i){e.children.sort(i);var n,s,o=this.toBBox,a=Yb(e,0,t,o),l=Yb(e,r-t,r,o),u=dS(a)+dS(l);for(n=t;n<r-t;n++)s=e.children[n],Kb(a,e.leaf?o(s):s),u+=dS(a);for(n=r-t-1;n>=t;n--)s=e.children[n],Kb(l,e.leaf?o(s):s),u+=dS(l);return u},_adjustParentBBoxes:function(e,t,r){for(var i=r;i>=0;i--)Kb(t[i],e)},_condense:function(e){for(var t,r=e.length-1;r>=0;r--)e[r].children.length===0?r>0?(t=e[r-1].children).splice(t.indexOf(e[r]),1):this.clear():Hy(e[r],this.toBBox)},_initFormat:function(e){var t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this.toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}};class JI{constructor(t,r){this.key=new Os(0,0,0,0),this.bounds=Sl(),this.objectIds=new Set,this.key.set(r);const i=t.getLODInfoAt(this.key);this.tileInfoView=t,this.tileInfoView.getTileBounds(this.bounds,this.key,!0),this.resolution=i.resolution,this.scale=i.scale,this.level=i.level}get id(){return this.key.id}get extent(){return nt.fromBounds(this.bounds,this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createChildTiles(){const t=this.key.getChildKeys(),r=cs.acquire();for(let i=0;i<t.length;i++)r[i]=new JI(this.tileInfoView,t[i]);return r}getQuantizationParameters(){return PY.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}const Up={added:[],removed:[]},z5=new Set,IOe=new Os(0,0,0,0);class TOe extends _h{constructor(t){super(),this._tiles=new Map,this._index=WI(9,ge("esri-csp-restrictions")?r=>({minX:r.bounds[0],minY:r.bounds[1],maxX:r.bounds[2],maxY:r.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){const r={added:[],removed:[]};for(const i of t.added)if(!this.has(i)){const n=new JI(this.tileScheme,i);this._tiles.set(i,n),this._index.insert(n),r.added.push(n)}for(const i of t.removed)if(this.has(i)){const n=this.get(i);this._tiles.delete(i),this._index.remove(n),r.removed.push(n)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(r.added.length||r.removed.length)&&this.emit("update",r)}setViewState(t){const r=this.tileScheme.getTileCoverage(t,0);if(!r)return;const{spans:i,lodInfo:n}=r,{level:s}=n;if(i.length>0)for(const{row:o,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++){const h=IOe.set(s,o,n.normalizeCol(u),n.getWorldForColumn(u)).id;if(z5.add(h),!this.has(h)){const d=new JI(this.tileScheme,h);this._tiles.set(h,d),this._index.insert(d),this.tiles.push(d),Up.added.push(d)}}for(let o=this.tiles.length-1;o>=0;o--){const a=this.tiles[o];z5.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),Up.removed.push(a))}(Up.added.length||Up.removed.length)&&this.emit("update",Up),iv.pool.release(r),z5.clear(),Up.added.length=0,Up.removed.length=0}}const $Oe=e=>e.indexOf("Brush")!==-1;class wre{constructor(){this._names=new Map}begin(t){this._names.has(t)||(this._names.set(t,!1),$Oe(t)&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${t}.Start`))}end(t){this._names.has(t)&&!this._names.get(t)&&(this._names.set(t,!0),performance.mark(`Esri.${t}.End`))}record(t){this._names.has(t)||(this._names.set(t,!0),performance.mark(`Esri.${t}`))}}const Bh=Te.getLogger("esri.views.MapView");function EOe(e){return e&&e.declaredClass==="esri.Viewpoint"}const Dz=160;let Xt=class extends iAe(rCe){constructor(e){super(e),this._stationaryTimer=null,this.frameTask=new _ke(this),this.featuresTilingScheme=null,this.fullOpacity=1,this.graphicsView=null,this.initialExtent=null,this.map=null,this.labelManager=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.resizeAlign="center",this.supportsGround=!1,this.timeline=new wre,this.type="2d",this.constraints=new ore,this.padding={top:0,right:0,bottom:0,left:0};const t=this.handles,r=()=>this.notifyChange("updating");t.add([this.watch("viewpoint",()=>{this._lastStationaryEventTimestamp=performance.now(),this._flipStationary(Dz)},!0),this.on("resize",i=>this._resizeHandler(i)),this.watch("animationManager.animation",i=>{this.animation=i}),this.allLayerViews.on("change",()=>{r(),t.remove("map-view-base-layerViewsUpdating"),t.add(this.allLayerViews.map(i=>i.watch("updating",r)),"map-view-base-layerViewsUpdating")})],"map-view-base")}destroy(){this.destroyed||(this._set("preconditionsReady",!1),this._gotoTask=this.frameTask=null)}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1}}}set animation(e){const t=this._get("animation");if(e===t)return;if(t&&t.stop(),!e||e.isFulfilled())return void this._set("animation",null);this._set("animation",e),this.frameTask.animationInProgress=!0;const r=()=>{e===this._get("animation")&&(this._set("animation",null),this.frameTask.requestFrame()),this.frameTask.animationInProgress=!1};e.when(r,r)}get center(){if(!this.ready)return this._get("center");const{center:e,spatialReference:t}=this.state.paddedViewState;return new Ke({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this._normalizeInput(e))return void Bh.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!this.ready)return this._set("center",e),void this.notifyChange("initialExtentRequired");const t=this.viewpoint;ere(t,t,e),this.viewpoint=t}set constraints(e){const t=this._get("constraints");t&&(this.handles.remove("map-view-base-constraints"),t.destroy()),this._set("constraints",e),e&&(e.view=this,this.ready&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint)),this.handles.add(e.on("update",()=>{this.ready&&this.state&&(this.state.viewpoint=e.fit(this.state.paddedViewState.viewpoint))}),"map-view-base-constraints"))}get extent(){return this.ready?this.state.paddedViewState.extent.clone():this._get("extent")}set extent(e){if(e==null)return;const t=this._normalizeInput(e);if(!t)return void Bh.error("#center",`incompatible spatialReference ${JSON.stringify(e.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`);if(!t.width||!t.height)return void Bh.error("#extent","invalid extent size");if(!this.ready)return this._set("extent",t),this._set("center",null),this._set("viewpoint",null),this._set("scale",0),this._set("zoom",-1),void this.notifyChange("initialExtentRequired");const r=this.viewpoint;ske(r,r,t,this.size,{constraints:this.constraints}),this.viewpoint=r}get graphicsTileStore(){return new TOe(this.featuresTilingScheme)}get initialExtentRequired(){const e=this._normalizeInput(this.center),t=this._normalizeInput(this.viewpoint),r=this._normalizeInput(this.extent),{scale:i,constraints:n}=this;let s=this.zoom;return!this.get("map.initialViewProperties.viewpoint")&&!r&&(n.effectiveLODs||(s=-1),(!e||i===0&&s===-1)&&(!t||!U(t.targetGeometry)||t.targetGeometry.type!=="extent"&&!t.scale))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.state?this.state.resolution:0}get rotation(){return this.ready?this.state.rotation:this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);const t=this.viewpoint;gke(t,t,e),this.viewpoint=t}get scale(){return this.ready?this.state.scale:this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",-1);const r=this._get("extent");return r&&(this._set("extent",null),this._set("center",r.center)),void this.notifyChange("initialExtentRequired")}const t=this.viewpoint;Mz(t,t,e),this.viewpoint=t}get stationary(){return!(this.animation||this.navigating||this._get("resizing")||this._stationaryTimer)}get updating(){return!this.destroyed&&(this.get("layerViewManager.updating")===!0||this.get("labelManager.updating")===!0||this.get("graphicsView.updating")===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0))}get viewpoint(){if(!this.ready)return this._get("viewpoint");const e=this.state.paddedViewState;return e&&e.viewpoint.clone()}set viewpoint(e){if(e==null)return;const t=this._normalizeInput(e);if(!t)return void(!e.scale||isNaN(e.scale)?Bh.error("#viewpoint",`invalid scale value of ${e.scale}`):ce(e.targetGeometry)?Bh.error("#viewpoint","geometry not defined"):Bh.error("#viewpoint",`incompatible spatialReference ${JSON.stringify(e.targetGeometry.spatialReference)} with view's spatialReference ${JSON.stringify(this.spatialReference)}`));if(!this.ready)return this._set("viewpoint",t),this._set("extent",null),this._set("center",null),this._set("zoom",-1),this._set("scale",0),void this.notifyChange("initialExtentRequired");const r=new oh({targetGeometry:new Ke,scale:0,rotation:0});Nl(r,t),this.constraints.constrain(r,this.state.paddedViewState.viewpoint),this.state.viewpoint=r,this.frameTask.requestFrame(),this._set("viewpoint",r)}get zoom(){return this.ready?this.constraints.scaleToZoom(this.scale):this._get("zoom")}set zoom(e){if(e==null)return;if(!this.ready){this.notifyChange("initialExtentRequired"),this._set("zoom",e),this._set("scale",0);const r=this._get("extent");r&&(this._set("extent",null),this._set("center",r.center))}if(!this.constraints.effectiveLODs)return;const t=this.viewpoint;Mz(t,t,this.constraints.zoomToScale(e)),this.viewpoint=t,this._set("zoom",this.constraints.scaleToZoom(this.scale))}goTo(e,t){if(e)return this.animation&&(this.animation=null),this._createAnimation(),i0e(this,"ready",t&&t.signal).then(()=>{const r={animate:!0,...t},i=fke(e,this);return this.animation.update(i),this._gotoTask={},r.animate?this._gotoAnimated(i,r):this._gotoImmediate(i,r)});Bh.error("#goTo()","target cannot be null or undefined")}hitTest(e){return Promise.reject("Should be implemented by subclasses")}popupHitTest(e){return this.hitTest(e).then(t=>({...t,mapPoint:this.toMap(e)}))}toMap(e){if(!this.ready)return null;const t=[0,0],[r,i]=this.state.toMap(t,[e.x,e.y]),n=this.spatialReference;return new Ke({x:r,y:i,spatialReference:n})}toScreen(e){if(!this.ready)return null;const t=this._normalizeInput(e),r=[t.x,t.y];return this.state.toScreen(r,r),tn(r[0],r[1])}pixelSizeAt(){return this.ready?this.state.resolution:(Bh.error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}getDefaultSpatialReference(){var e,t,r;return this.map&&"initialViewProperties"in this.map&&((e=this.map)==null||(t=e.initialViewProperties)==null?void 0:t.spatialReference)||((r=this.defaultsFromMap)==null?void 0:r.spatialReference)||null}getSpatialReferenceSupport({layer:e}){return e||this._get("ready")||this._getDefaultViewpoint()!==null?{}:null}importLayerView(e){return Tz.importLayerView(e)}hasLayerViewModule(e){return Tz.hasLayerViewModule(e)}_createAnimation(){return this.animation&&!this.animation.done||(this.animation=new tR),this.animation}_cancellableGoTo(e,t,r){const i=()=>e===this._gotoTask,n=r.then(()=>{i()&&(this.animation=null)}).catch(o=>{throw i()&&(this.animation=null,t.done||(t.stop(),this.frameTask.animationInProgress=!1)),o}),s=new Promise(o=>o(n));return t.when().catch(()=>{i()&&s.cancel&&s.cancel()}),s}_gotoImmediate(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if($r(t),r!==this._gotoTask)throw new Z("view:goto-interrupted","Goto was interrupted");this.viewpoint=i.target=s,i.finish()});return this._cancellableGoTo(r,i,n)}_gotoAnimated(e,t){const r=this._gotoTask,i=this.animation,n=e.then(s=>{if($r(t),r!==this._gotoTask)throw new Z("view:goto-interrupted","Goto was interrupted");return i.update(s),this.animationManager.animate(i,this.viewpoint,t),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(r,i,n)}_resizeHandler(e){const t=this.state;if(!t)return;let r=this.state.paddedViewState.viewpoint;const i=this.state.paddedViewState.size.concat();t.size=[e.width,e.height],yke(r,r,i,this.state.paddedViewState.size,this.resizeAlign),r=this.constraints.constrain(r,null),this.state.viewpoint=r}_startup(){const e=this._getDefaultViewpoint();this.constraints.view=this,this.constraints.fit(e),this._set("animationManager",new wke({view:this})),this._set("state",new pOe({padding:this._get("padding"),size:this.size,viewpoint:e})),this._set("featuresTilingScheme",new vOe(Fs.create({spatialReference:this.spatialReference,size:512,numLODs:36}))),this._set("ready",!0),this.frameTask&&this.frameTask.start()}_teardown(){this.frameTask&&this.frameTask.stop(),this._set("ready",!1),this._stationaryTimer&&(clearTimeout(this._stationaryTimer),this._stationaryTimer=null);const{center:[e,t],spatialReference:r,rotation:i,scale:n}=this.state.paddedViewState,s=new Ke({x:e,y:t,spatialReference:r});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",i),this._set("scale",n),this._set("spatialReference",r),this.constraints.view=null,this.animationManager.destroy(),this._set("animationManager",null),this._set("state",null),this.animation=null}_flipStationary(e){return this._stationaryTimer!==null||(this._stationaryTimer=setTimeout(()=>{this._stationaryTimer=null;const t=performance.now()-this._lastStationaryEventTimestamp;t<Dz&&(this._stationaryTimer=this._flipStationary(t))},e)),this._stationaryTimer}_normalizeInput(e,t=this.spatialReference){const r=e&&e.targetGeometry||e;return t?r?t.equals(r.spatialReference)?e:sh(r,t)?EOe(e)?(e.targetGeometry=Vu(r,t),e):Vu(r,t):null:null:e}_getDefaultViewpoint(){const e=this.constraints,t={zoom:this._get("zoom"),scale:this._get("scale"),center:this._normalizeInput(this._get("center")),extent:this._normalizeInput(this._get("extent")),rotation:this._get("rotation"),viewpoint:this._normalizeInput(this._get("viewpoint")),spatialReference:this._userSpatialReference};e.effectiveLODs?t.zoom!==-1&&(t.scale=e.zoomToScale(t.zoom)):t.zoom=-1;let r=null,i=null,n=0;const s=t.viewpoint&&t.viewpoint.rotation,o=t.viewpoint&&t.viewpoint.targetGeometry;U(o)&&(o.type==="extent"?r=o:o.type==="point"&&(i=o,n=t.viewpoint.scale));const a=this._normalizeInput(this.get("map.initialViewProperties.viewpoint.targetGeometry.extent")),l=this._normalizeInput(this.initialExtent),u=t.extent||r||a||l,h=t.center||i||u&&u.center,d=this.get("map.initialViewProperties.viewpoint.scale"),f=t.scale||n||d||u&&o0(u,this.size),m=this.get("map.initialViewProperties.viewpoint.rotation"),g=t.rotation||s||m||0;return h&&f?new oh({targetGeometry:h,scale:f,rotation:g}):null}};c([p()],Xt.prototype,"_stationaryTimer",void 0),c([p()],Xt.prototype,"_defaultsFromMapSettings",null),c([p()],Xt.prototype,"animation",null),c([p({readOnly:!0})],Xt.prototype,"animationManager",void 0),c([p({value:null,type:Ke,dependsOn:["state.id","ready"]})],Xt.prototype,"center",null),c([p({type:ore})],Xt.prototype,"constraints",null),c([p({value:null,type:nt,dependsOn:["state.id","ready"]})],Xt.prototype,"extent",null),c([p({readOnly:!0})],Xt.prototype,"featuresTilingScheme",void 0),c([p()],Xt.prototype,"fullOpacity",void 0),c([p({readOnly:!0})],Xt.prototype,"graphicsTileStore",null),c([p()],Xt.prototype,"graphicsView",void 0),c([p({type:nt})],Xt.prototype,"initialExtent",void 0),c([p({dependsOn:["map.initialViewProperties?.viewpoint","constraints.effectiveLODs","spatialReference"]})],Xt.prototype,"initialExtentRequired",null),c([p()],Xt.prototype,"map",void 0),c([p()],Xt.prototype,"labelManager",void 0),c([p({value:{top:0,right:0,bottom:0,left:0},cast:e=>({top:0,right:0,bottom:0,left:0,...e})})],Xt.prototype,"padding",null),c([p({type:Object})],Xt.prototype,"renderingOptions",void 0),c([p()],Xt.prototype,"resizeAlign",void 0),c([p({readOnly:!0,dependsOn:["state.id"]})],Xt.prototype,"resolution",null),c([p({value:0,type:Number,dependsOn:["state.id","ready"]})],Xt.prototype,"rotation",null),c([p({value:0,type:Number,dependsOn:["state.id","ready"]})],Xt.prototype,"scale",null),c([p({type:Fe,dependsOn:["map.initialViewProperties?.spatialReference","defaultsFromMap.ready"]})],Xt.prototype,"spatialReference",void 0),c([p({readOnly:!0})],Xt.prototype,"state",void 0),c([p({dependsOn:["animation","navigating","resizing","_stationaryTimer"]})],Xt.prototype,"stationary",null),c([p({readOnly:!0})],Xt.prototype,"supportsGround",void 0),c([p({type:wre,readOnly:!0})],Xt.prototype,"timeline",void 0),c([p({readOnly:!0})],Xt.prototype,"type",void 0),c([p({readOnly:!0,dependsOn:["layerViewManager.updating","labelManager.updating","graphicsView?.updating"]})],Xt.prototype,"updating",null),c([p({value:null,type:oh,dependsOn:["state.id","ready"]})],Xt.prototype,"viewpoint",null),c([p({value:-1,dependsOn:["state.id"]})],Xt.prototype,"zoom",null),Xt=c([N("esri.views.MapViewBase")],Xt);const AOe=Xt;function v8(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}class Fz extends on{constructor(t,r){super(!0),this.view=t,this.registerIncoming("double-click",r,i=>this._handleDoubleClick(i,r))}_handleDoubleClick(t,r){v8(t.data,"primary")&&(t.stopPropagation(),r?this.view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this.view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}class COe extends on{constructor(t,r,i){super(!0),this.view=t,this.pointerType=r,this.registerIncoming("double-tap-drag",i,n=>this._handleDoubleTapDrag(n))}_handleDoubleTapDrag(t){const{data:r}=t,{pointerType:i}=r;if(i!==this.pointerType)return;t.stopPropagation();const{action:n,delta:s}=r,{view:o}=this,{mapViewNavigation:a}=o;switch(n){case"begin":{const{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;const l=1.015**s.y,u=this._startScale*l,h=u/this._currentScale;a.setViewpointImmediate(h),this._currentScale=u;break}case"end":{const{constraints:l}=o,{effectiveLODs:u,snapToZoom:h}=l;if(!h||!u)return void a.end();const d=l.snapScale(this._currentScale),f=(s.y>0?Math.max(d,l.snapToPreviousScale(this._startScale)):Math.min(d,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(f);break}}}}class G${constructor(t){this.callbacks=t,this.currentCount=0,this.callbacks.condition||(this.callbacks.condition=()=>!0)}handle(t){const r=t.data,i=r.pointers.size;switch(r.action){case"start":this.currentCount=i,this.emitStart(t);break;case"added":this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"update":this.emitUpdate(t);break;case"removed":this.startEvent&&this.emitEnd(this.previousEvent),this.currentCount=i,this.emitStart(t);break;case"end":this.emitEnd(t),this.currentCount=0}this.previousEvent=t}emitStart(t){this.startEvent=t,this.callbacks.condition(this.currentCount,t)&&this.callbacks.start(this.currentCount,t,this.startEvent)}emitUpdate(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.update(this.currentCount,t,this.startEvent)}emitEnd(t){this.callbacks.condition(this.currentCount,t)&&this.callbacks.end(this.currentCount,t,this.startEvent),this.startEvent=null}}class kOe extends on{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r,this.registerIncoming("drag",i,s=>this._handleDrag(s)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const n=this.view.mapViewNavigation;this.dragEventSeparator=new G$({start:(s,o)=>{n.pan.begin(this.view,o.data),o.stopPropagation()},update:(s,o)=>{n.pan.update(this.view,o.data),o.stopPropagation()},end:(s,o)=>{n.pan.end(this.view,o.data),o.stopPropagation()},condition:(s,o)=>s===1&&v8(o.data,this.pointerAction)})}_handleDrag(t){const r=this.view.mapViewNavigation;r.pinch.zoomMomentum||r.pinch.rotateMomentum?this.stopMomentumNavigation():this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}class OOe extends on{constructor(t,r,i){super(!0),this.view=t,this.pointerAction=r;const n=this.view.mapViewNavigation;this.dragEventSeparator=new G$({start:(s,o)=>{n.rotate.begin(this.view,o.data),o.stopPropagation()},update:(s,o)=>{n.rotate.update(this.view,o.data),o.stopPropagation()},end:(s,o)=>{n.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&v8(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this.dragEventSeparator.handle(s))}}function La(e){let t=e*e;return e<0&&(t*=-1),t}function POe(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function ROe(e,t,r){const i=r,n=e.state,s=e.device,o=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=La(n.axes[0]),i.translation[1]=La(n.axes[1]),i.translation[2]=La(n.buttons[7])-La(n.buttons[6]),i.heading=La(n.axes[2]),i.tilt=La(n.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*La(n.axes[0]),i.translation[1]=1.2*La(n.axes[1]),i.translation[2]=2*-La(n.axes[2]),i.heading=1.2*La(n.axes[5]),i.tilt=1.2*La(n.axes[3])),i.tilt*=o,eN(i.translation,i.translation,a),i}function LOe(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}class NOe extends on{constructor(t){super(!0),this.view=t,this.frameTask=null,this.watchHandles=new gi,this.currentDevice=null,this.transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this.handle=this.registerIncoming("gamepad",r=>this.handleEvent(r)),this.handle.pause()}onInstall(t){super.onInstall(t),this.watchHandles.add([It(this.view.navigation.gamepad,"enabled",r=>{r?(this.handle.resume(),this.frameTask||(this.frameTask=L0({update:i=>this.frameUpdate(i.deltaTime)}))):(this.handle.pause(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null))})])}onUninstall(){this.watchHandles.removeAll(),this.frameTask&&(this.frameTask.remove(),this.frameTask=null),super.onUninstall()}handleEvent(t){const r=this.view.navigation.gamepad.device;r&&t.data.device!==r||this.currentDevice&&this.currentDevice!==t.data.device||(t.data.action==="end"?(this.currentDevice=null,POe(this.transformation)):(this.currentDevice=t.data.device,ROe(t.data,this.view.navigation.gamepad,this.transformation)))}frameUpdate(t){const r=this.transformation;if(LOe(r))return;const i=this.view.viewpoint.clone(),n=this.view.navigation.gamepad.velocityFactor,s=FOe*n*t;B$(i,i,[r.translation[0]*s,-r.translation[1]*s]);const o=1+r.translation[2]*jOe*t,a=this.view.constraints.rotationEnabled?-r.heading*DOe*t:0,l=this.view.size,u=[l[0]/2,l[1]];tre(i,i,o,a,u,l);const h=this.view.constraints.constrain(i,this.view.viewpoint);this.view.viewpoint=h}}const DOe=.06,FOe=.7,jOe=6e-4;class VOe extends on{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyMap={[r.left]:"left",[r.right]:"right",[r.up]:"up",[r.down]:"down"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=this._keyMap[t.data.key];if(this._pressed=i!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),i){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class UOe extends on{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._pressed=!1,this._keyToDirection={[r.clockwiseOption1]:"clockwise",[r.clockwiseOption2]:"clockwise",[r.counterClockwiseOption1]:"counterClockwise",[r.counterClockwiseOption2]:"counterClockwise",[r.resetOption1]:"reset",[r.resetOption2]:"reset"},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),this.registerIncoming("key-up",i,n=>this._handleKeyUp(n)),this.registerIncoming("blur",i,()=>this._handleBlur())}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleBlur(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,r){const i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;const n=this._keyToDirection[t.data.key];if(this._pressed=n!=null,this._pressed){if(r)switch(this.view.mapViewNavigation.begin(),n){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}class zOe extends on{constructor(t,r,i){super(!0),this.view=t,this.keys=r,this._keysToZoomAction={},this.registerIncoming("key-down",i,n=>this._handleKeyDown(n)),r.zoomIn.forEach(n=>this._keysToZoomAction[n]=0),r.zoomOut.forEach(n=>this._keysToZoomAction[n]=1)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){const r=t.modifiers;if(r.size>0&&!r.has("Shift"))return;const{key:i}=t.data;if(!(i in this._keysToZoomAction))return;const n=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view;let o=null;switch(n){case 0:o=s.zoomIn();break;case 1:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),t.stopPropagation()}}const BOe=.6;class GOe extends on{constructor(t,r){super(!0),this.view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",r,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this.view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;const r=this.view.mapViewNavigation,{x:i,y:n,deltaY:s}=t.data,o=1/BOe**(1/60*s),a=r.zoom(o,[i,n]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,r.end()}))}}class qOe extends on{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation());const r=this.view.mapViewNavigation;this.dragEventSeparator=new G$({start:(i,n)=>{r.pinch.begin(this.view,n.data),n.stopPropagation()},update:(i,n)=>{r.pinch.update(this.view,n.data),n.stopPropagation()},end:(i,n)=>{r.pinch.end(this.view),n.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this.dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}function jz(e){const t=e.native;return t?{buttons:t.buttons.map(r=>r.pressed?r.value?r.value:1:0),axes:t.axes.map(r=>JOe(r,e.axisThreshold))}:{buttons:[],axes:[]}}function HOe(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let r=0;r<e.axes.length;r++)if(e.axes[r]!==t.axes[r])return!1;for(let r=0;r<e.buttons.length;r++)if(e.buttons[r]!==t.buttons[r])return!1;return!0}function WOe(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function JOe(e,t){const r=Math.abs(e);return r<t?0:Math.sign(e)*(r-t)/(1-t)}class ZOe{constructor(t,r){this.element=t,this.input=r,this._hasEventListeners=!1,this.onConnectGamepad=s=>{this.connectGamepad(s.gamepad)},this.onDisconnectGamepad=s=>{const o=s.gamepad,a=o.index,l=this.inputDevices[a];l&&(this.emitGamepadEvent(o,jz(l),!1),this.inputDevices.splice(a,1),this.latestUpdate.splice(a,1),this.input.gamepad.devices.remove(l),this.ensurePollingState())},this.frameTask=null,this.latestUpdate=new Array,this.inputDevices=new Array,this.callback=null;const i="getGamepads"in window.navigator,n=window.isSecureContext;this.supported=i&&n,this.supported&&(this.forEachGamepad(s=>this.connectGamepad(s)),window.addEventListener("gamepadconnected",this.onConnectGamepad),window.addEventListener("gamepaddisconnected",this.onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this.onConnectGamepad),window.removeEventListener("gamepaddisconnected",this.onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get eventsEnabled(){return this.supported&&this.inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this.callback=t}connectGamepad(t){const r=new i8(t);r.deviceType!=="unknown"&&(this.inputDevices[t.index]=r,this.input.gamepad.devices.add(r)),this.ensurePollingState()}ensurePollingState(){this.eventsEnabled?this.startPolling():this.stopPolling()}startPolling(){this.frameTask==null&&(this.frameTask=L0({update:()=>this.readGamepadState()}))}stopPolling(){this.frameTask!=null&&(this.frameTask.remove(),this.frameTask=null,this.latestUpdate=new Array)}readGamepadState(){const t=document.hasFocus(),r=this.element.contains(document.activeElement),i=this.input.gamepad.enabledFocusMode==="document"&&!t||this.input.gamepad.enabledFocusMode==="view"&&!r;this.forEachGamepad(n=>{const s=this.inputDevices[n.index];if(!s)return;const o=this.latestUpdate[n.index],a=jz(s),l=i||WOe(a);o&&(o.timestamp===n.timestamp||!o.active&&l||HOe(o.state,a))||this.emitGamepadEvent(n,a,!l)})}forEachGamepad(t){const r=window.navigator.getGamepads();for(let i=0;i<r.length;i++){const n=r[i];this.validate(n)&&t(n)}}emitGamepadEvent(t,r,i){const n=this.latestUpdate[t.index],s=n&&n.active;if(!s&&!i)return;const o=!s&&i?"start":s&&i?"update":"end";this.latestUpdate[t.index]={timestamp:t.timestamp,state:r,active:i},this.callback&&this.callback({device:this.inputDevices[t.index],state:r,action:o})}validate(t){if(!t||!t.connected)return!1;for(let r=0;r<t.axes.length;r++)if(isNaN(t.axes[r]))return!1;return!0}}const Vz=ge("trident"),Uz=ge("edge"),YOe=ge("chrome"),KOe=ge("ff"),XOe=ge("safari"),Wy={touchNone:"esri-view-surface--touch-none",touchPan:"esri-view-surface--touch-pan"};class q${constructor(t,r){this.input=r,this._active={},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=t,t.getAttribute("tabindex")||t.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new ZOe(t,this.input),this._gamepadSource.onEvent=i=>this._callback("gamepad",i)}destroy(){this._callback=null,this.activeEvents=null,this._activePointerCaptures.forEach(t=>{this._releasePointerCaptureSafe(t)}),this._gamepadSource&&(this._gamepadSource.destroy(),this._gamepadSource=null),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(t){this._browserTouchPanningEnabled=t,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(t){this._callback=t}set activeEvents(t){for(const r in this._active)if(!t||!t.has(r)){const i=this._active[r];this._element.removeEventListener(B5[r],i),delete this._active[r]}t&&t.forEach(r=>{if(!this._active[r]&&B5[r]){const i=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(B5[r],i),this._active[r]=i}}),this._gamepadSource.hasEventListeners=t&&t.has("gamepad")}setPointerCapture(t,r){r?(this._element.setPointerCapture(t.pointerId),this._activePointerCaptures.add(t.pointerId)):(this._releasePointerCaptureSafe(t.pointerId),this._activePointerCaptures.delete(t.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?Wy.touchNone:Wy.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?Wy.touchPan:Wy.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(Wy.touchNone),this._element.classList.remove(Wy.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_releasePointerCaptureSafe(t){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(t))return;this._element.releasePointerCapture(t)}catch{}}_updateNormalizedPointerLikeEvent(t,r){const i=fte(this._element,t);return q$.test.disableSubpixelCoordinates&&(i.x=Math.round(i.x),i.y=Math.round(i.y)),r.x=i.x,r.y=i.y,r}_handleKey(t,r){const i=k5e(r);i&&t==="key-up"&&this._keyDownState.delete(i);const n={native:r,key:i,repeat:i&&this._keyDownState.has(i)};i&&t==="key-down"&&this._keyDownState.add(n.key),this._callback(t,n)}_handlePointer(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(t,i)}_handlePointerPreventDefault(t,r){const i=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault(),this._callback(t,i)}_handleMouseWheel(t,r){let i=r.deltaY;switch(r.deltaMode){case 0:(Vz||Uz)&&(i=i/document.documentElement.clientHeight*600);break;case 1:i*=30;break;case 2:i*=900}Vz||Uz?i*=.7:YOe||XOe?i*=.6:KOe&&(i*=1.375);const n=100,s=Math.abs(i);s>n&&(i=i/s*200/(1+Math.exp(-.02*(s-n))));const o=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,deltaY:i});this._callback(t,o)}_handlePointerCaptureLost(t,r){this._activePointerCaptures.delete(r.pointerId),this._handleDefault(t,r)}_handleDefault(t,r){const i={native:r};r.preventDefault(),this._callback(t,i)}_preventAltKeyDefault(t){t.key==="Alt"&&t.preventDefault()}_preventMultiTouchPanning(t){t.touches.length>1&&t.preventDefault()}}q$.test={disableSubpixelCoordinates:!1};const B5={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};class QOe extends on{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}}function b8(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function ePe(e,t){const r=t.x-e.x,i=t.y-e.y;return Math.sqrt(r*r+i*i)}function tPe(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:tn()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){const[I,S]=e,[T,$]=[S.x-I.x,S.y-I.y];return t.radius=Math.sqrt(T*T+$*$)/2,t.center.x=(I.x+S.x)/2,t.center.y=(I.y+S.y)/2,t}let r=0,i=0;for(let I=0;I<e.length;I++)r+=e[I].x,i+=e[I].y;r/=e.length,i/=e.length;const n=e.map(I=>I.x-r),s=e.map(I=>I.y-i);let o=0,a=0,l=0,u=0,h=0,d=0,f=0;for(let I=0;I<n.length;I++){const S=n[I],T=s[I],$=S*S,E=T*T;o+=$,a+=E,l+=S*T,u+=$*S,h+=E*T,d+=S*E,f+=T*$}const m=.5*(u+d),g=.5*(h+f),b=o*a-l*l,w=(m*a-g*l)/b,_=(o*g-l*m)/b,x=tn(w+r,_+i);return{radius:Math.sqrt(w*w+_*_+(o+a)/e.length),center:x}}const ga={maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};class rPe extends on{constructor(t=ga.maximumDoubleClickDelay,r=ga.maximumDoubleClickDistance,i=ga.maximumDoubleTouchDelay,n=ga.maximumDoubleTouchDistance,s=n2){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("drag",this._handleDrag.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.doubleClickTimeout!=null&&(t.doubleClickTimeout.remove(),t.doubleClickTimeout=null)})}get hasPendingInputs(){return BT(this._pointerState,t=>t.doubleClickTimeout!=null)}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_handleImmediateClick(t){const r=t.data,i=this._pointerId(r),n=this._pointerState.get(i);if(n){const s=r.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;b8(n.event.data,r)>s?(this._clearDoubleClickTimeout(i,!0),this._startClick(t)):(this._clearDoubleClickTimeout(i,!1),this._doubleClick.emit(n.event.data,void 0,n.event.modifiers))}else this._startClick(t)}_startClick(t){const r=this._pointerId(t.data),i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;this._pointerState.set(r,{event:t,doubleClickTimeout:this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),i)}),this.refreshHasPendingInputs()}_handlePointerDrag(t){const r=this._pointerId(t.data.currentEvent);this._clearDoubleClickTimeout(r,!0)}_handleDrag(t){const r=this._pointerId(t.data.pointer);this._clearDoubleClickTimeout(r,!0)}_clearDoubleClickTimeout(t,r){const i=this._pointerState.get(t);i&&(i.doubleClickTimeout.remove(),i.doubleClickTimeout=null,r&&this._doubleClickTimeoutExceeded(t),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){const r=this._pointerState.get(t);this._click.emit(r.event.data,void 0,r.event.modifiers),r.doubleClickTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}}class iPe extends on{constructor(t=ga.maximumDoubleClickDelay,r=ga.maximumDoubleClickDistance,i=ga.maximumDoubleTouchDelay,n=ga.maximumDoubleTouchDistance,s=n2){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=tn(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new G$({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout!=null&&(t.doubleTapTimeout.remove(),t.doubleTapTimeout=null)})}get hasPendingInputs(){return BT(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){const r=this._pointerState.get(t);r&&(r.doubleTapTimeout.remove(),r.doubleTapTimeout=null,this._pointerState.delete(t),this.refreshHasPendingInputs())}_createDoubleTapDragData(t,r,i){const{button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}=i;return{action:t,delta:r,button:n,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:u}}_dragStart(t,r){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;const{data:i,modifiers:n}=r,{center:s}=i;this._dragStartCenter=s;const o=this._createDoubleTapDragData("begin",tn(0,0),i);this._doubleTapDrag.emit(o,void 0,n),r.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=tn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,r);this._doubleTapDrag.emit(o,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;const{data:r,modifiers:i}=t,{center:n}=r,s=tn(n.x-this._dragStartCenter.x,n.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,r);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){const{data:r}=t,i=this._pointerId(r),n=this._pointerState.get(i),{pointerType:s}=r.native;if(n){const o=s==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;this._clearPointerDown(i),b8(n.event.data,r)>o?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_pointerId(t){const{native:r}=t,{pointerId:i,button:n,pointerType:s}=r;return s==="mouse"?`${i}:${n}`:`${s}`}_storePointerDown(t){const{data:r}=t,{pointerType:i}=r.native,n=this._pointerId(r),s=i==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(n),s);this._pointerState.set(n,{event:t,doubleTapTimeout:o}),this.refreshHasPendingInputs()}}class nPe extends on{constructor(t){super(!1),this.navigationTouch=t,this.startStateModifiers=new Set,this.activePointerMap=new Map,this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this.handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this.handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this.handlePointerUpAndPointerLost.bind(this))}createPayload(t,r,i,n){return{action:t,pointerType:this.pointerType,button:this.mouseButton,buttons:r.buttons,timestamp:n,pointers:sPe(this.activePointerMap),pointer:r,angle:i.angle,radius:i.radius,center:i.center}}addPointer(t){const r=t.native.pointerId,i=fS(this.activePointerMap).angle,n={event:t,initialAngle:0,lastAngle:0};this.activePointerMap.set(r,n);const s=h3(n,_re(this.activePointerMap));n.initialAngle=s,n.lastAngle=s,this.updatePointerAngles(i)}updatePointer(t){if(t&&t.x==null&&t.y==null)return;const r=t.native.pointerId,i=this.activePointerMap.get(r);i?i.event=t:this.addPointer(t)}removePointer(t){const r=fS(this.activePointerMap).angle;this.activePointerMap.delete(t),this.updatePointerAngles(r)}updatePointerAngles(t){const r=fS(this.activePointerMap);this.activePointerMap.forEach(i=>{i.initialAngle=h3(i,r)-t,i.lastAngle=h3(i,r)-t})}emitEvent(t,r,i){const n=fS(this.activePointerMap);this.drag.emit(this.createPayload(t,r,n,i),void 0,this.startStateModifiers)}handlePointerUpAndPointerLost(t){const r=t.data.native.pointerId,i=t.timestamp;this.activePointerMap.get(r)&&(this.activePointerMap.size===1?(this.updatePointer(t.data),!this.isCurrentDragSuppressed&&this.emitEvent("end",t.data,i),this.isDragging=!1,this.isCurrentDragSuppressed=!1,this.removePointer(r)):(this.removePointer(r),this.emitEvent("removed",t.data,t.timestamp)))}handlePointerDrag(t){const r=t.data,i=r.currentEvent,n=t.timestamp;switch(r.action){case"start":case"update":this.isDragging?this.activePointerMap.has(i.native.pointerId)?(this.updatePointer(i),!this.isCurrentDragSuppressed&&this.emitEvent("update",i,n)):(this.addPointer(i),this.emitEvent("added",i,n),this.isCurrentDragSuppressed=this.isSuppressed):(this.updatePointer(i),this.pointerType=t.data.startEvent.pointerType,this.mouseButton=t.data.startEvent.button,this.startStateModifiers=t.modifiers,this.isDragging=!0,this.isCurrentDragSuppressed=this.isSuppressed,!this.isCurrentDragSuppressed&&this.emitEvent("start",i,n))}}get isSuppressed(){return this.navigationTouch&&!this.navigationTouch.browserTouchPanEnabled&&this.pointerType==="touch"&&this.activePointerMap.size===1}}function _re(e){const t=[];return e.forEach(r=>{t.push(tn(r.event.x,r.event.y))}),tPe(t)}function fS(e){const t=_re(e);let r=0;return e.forEach(i=>{let n=h3(i,t),s=n-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;n=i.lastAngle+s,i.lastAngle=n,r+=n-i.initialAngle}),r/=e.size||1,{angle:r,radius:t.radius,center:t.center}}function sPe(e){const t=new Map;return e.forEach((r,i)=>t.set(i,r.event)),t}function h3(e,t){const r=e.event,i=r.x-t.center.x,n=r.y-t.center.y;return Math.atan2(n,i)}var zz;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(zz||(zz={}));class oPe extends on{constructor(t=ga.maximumDoubleClickDelay,r=ga.maximumDoubleClickDistance,i=ga.maximumDoubleTouchDelay,n=ga.maximumDoubleTouchDistance,s=n2){super(!1),this.maximumDoubleClickDelay=t,this.maximumDoubleClickDistance=r,this.maximumDoubleTouchDelay=i,this.maximumDoubleTouchDistance=n,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",o=>{this._handlePointerLoss(o,"pointer-up")}),this.registerIncoming("pointer-capture-lost",o=>{this._handlePointerLoss(o,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",o=>{this._handlePointerLoss(o,"pointer-cancel")})}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=this._pointerId(r);if(!this._pointerState.has(i)){const n={downButton:r.native.button,immediateDoubleClick:null};this._pointerState.set(i,n),this.startCapturingPointer(r.native)}}_handlePointerLoss(t,r){const i=t.data,n=this._pointerId(i),s=this._pointerState.get(n);if(s&&r==="pointer-up"&&s.downButton===i.native.button){const o=s.immediateDoubleClick;if(o){o.timeoutHandle.remove();const a=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDistance:this.maximumDoubleClickDistance;b8(o,t.data)>a?this._startImmediateDoubleClick(t,s):(this._immediateDoubleClick.emit(t.data,void 0,o.modifiers),this._removeState(i))}else this._startImmediateDoubleClick(t,s)}}_startImmediateDoubleClick(t,r){const i=t.data.native.pointerType==="touch"?this.maximumDoubleTouchDelay:this.maximumDoubleClickDelay;r.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_pointerId(t){const r=t.native;return r.pointerType==="mouse"?`${r.pointerId}:${r.button}`:`${r.pointerType}`}_removeState(t){const r=this._pointerId(t);this._pointerState.delete(r),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}}const U1={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500};class aPe extends on{constructor(t=U1.maximumClickDelay,r=U1.movementUntilMouseDrag,i=U1.movementUntilPenDrag,n=U1.movementUntilTouchDrag,s=U1.holdDelay,o=n2){super(!1),this.maximumClickDelay=t,this.movementUntilMouseDrag=r,this.movementUntilPenDrag=i,this.movementUntilTouchDrag=n,this.holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout!=null&&(t.holdTimeout.remove(),t.holdTimeout=null)}),super.onUninstall()}_handlePointerDown(t){const r=t.data,i=r.native.pointerId;let n=null;this._pointerState.size===0&&(n=this._clock.setTimeout(()=>{const o=this._pointerState.get(i);if(o){if(!o.isDragging){const a=o.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this.holdDelay));const s={startEvent:r,previousEvent:r,startTimestamp:t.timestamp,isDragging:!1,downButton:r.native.button,holdTimeout:n,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(r.native),this._moveHandle.resume(),this._pointerState.size>1&&this.startDragging(t)}_createPointerDragData(t,r,i){return{action:t,startEvent:r.startEvent,previousEvent:r.previousEvent,currentEvent:i}}_handlePointerMove(t){const r=t.data,i=r.native.pointerId,n=this._pointerState.get(i);n&&(n.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",n,r),void 0,n.modifiers):ePe(r,n.startEvent)>this._getDragThreshold(r.native.pointerType)&&this.startDragging(t),n.previousEvent=r)}_getDragThreshold(t){switch(t){case"touch":return this.movementUntilTouchDrag;case"pen":return this.movementUntilPenDrag;default:return this.movementUntilMouseDrag}}startDragging(t){const r=t.data,i=r.native.pointerId;this._pointerState.forEach(n=>{n.holdTimeout!=null&&(n.holdTimeout.remove(),n.holdTimeout=null),n.isDragging||(n.modifiers=t.modifiers,n.isDragging=!0,i===n.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",n,r)):this._pointerDrag.emit(this._createPointerDragData("start",n,n.previousEvent),t.timestamp))})}_handlePointerLoss(t,r){const i=t.data,n=i.native.pointerId,s=this._pointerState.get(n);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,r==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):r==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this.maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(n),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}}const mS={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}};let d3=class extends Ze{constructor(){super(...arguments),this._handles=new gi}initialize(){this._handles.add([r0e(this.view,"ready",()=>this._disconnect()),cY(this.view,"ready",()=>this._connect())])}destroy(){this._handles&&(this._handles.removeAll(),this._handles=null),this._disconnect()}_disconnect(){this._inputManager&&(this.view.viewEvents.disconnect(),this._inputManager.destroy(),this._inputManager=null,this._source.destroy(),this._source=null)}_connect(){const e=this.view.surface,t=new q$(e,this.view.input),r=[new oPe,new aPe,new rPe,new nPe(this.view.navigation),new iPe],i=new Af({eventSource:t,recognizers:r});i.installHandlers("prevent-context-menu",[new QOe],Qd.INTERNAL),i.installHandlers("navigation",[new qOe(this.view),new NOe(this.view),new GOe(this.view),new Fz(this.view),new Fz(this.view,[mS.counter]),new kOe(this.view,"primary"),new VOe(this.view,mS.pan),new zOe(this.view,mS.zoom),new UOe(this.view,mS.rotate),new OOe(this.view,"secondary"),new COe(this.view,"touch")],Qd.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,It(this.view.navigation,"browserTouchPanEnabled",n=>{this._source.browserTouchPanningEnabled=!n})}get test(){return{inputManager:this._inputManager}}};c([p()],d3.prototype,"view",void 0),d3=c([N("esri.views.2d.input.MapViewInputManager")],d3);const lPe=d3;let uPe=0,Md=class extends Ze{constructor(){super(...arguments),this.color=new Le([0,255,255]),this.haloOpacity=1,this.fillOpacity=.25}get version(){return uPe++}};c([p({readOnly:!0})],Md.prototype,"version",null),c([p({type:Le})],Md.prototype,"color",void 0),c([p({type:Le})],Md.prototype,"haloColor",void 0),c([p()],Md.prototype,"haloOpacity",void 0),c([p()],Md.prototype,"fillOpacity",void 0),Md=c([N("esri.views.2d.support.HighlightOptions")],Md);const xre=Md;function cPe(e,t,r,i,n,s,o,a){let l;e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0}),e.width!=null&&e.height!=null?l=[e.width,e.height]:e.width==null&&e.height!=null?l=[e.height,e.height]:e.width!=null&&e.height==null?l=[e.width,e.width]:e.width==null&&e.height==null&&(l=null);const u=r[0]-(i.left+i.right),h=r[1]-(i.top+i.bottom);let d,f,m=e.area||{x:0,y:0,width:u,height:h};if(l){const g=u/h,b=l[0]/l[1];if(b>g){const w=m.width/b;m={x:m.x,y:Math.round(m.y+(m.height-w)/2),width:m.width,height:Math.round(w)}}else{const w=m.height*b;m={x:Math.round(m.x+(m.width-w)/2),y:m.y,width:Math.round(w),height:m.height}}}else l=[m.width,m.height];return l[0]>m.width?(d=Math.min(l[0]/m.width,t),f=l[0]/m.width/d):(d=1,f=l[0]/m.width),{resolutionScale:d,cropArea:{x:Math.round((m.x+i.left)*d),y:Math.round((m.y+i.top)*d),width:Math.round(m.width*d),height:Math.round(m.height*d)},outputScale:f,format:n,quality:s,children:o,rotation:a}}function wit(e,t,r,i){i.premultipliedAlpha&&gPe(e),r.width=e.width,r.height=e.height;const n=r.getContext("2d");n.putImageData(e,0,0),i.flipY&&yPe(n);const s=n.getImageData(0,0,e.width,e.height),o=hPe(r,t);return r.width=0,r.height=0,{dataUrl:o,data:s}}function hPe(e,t){const r=vPe[t.format],i=t.quality/100;return e.toDataURL(r,i)}function dPe(e,t){const r=mPe(e),i=wPe[r];return{format:r,quality:xl(t??i,0,100)}}function pPe(e,t){return t/Math.max(e[0],e[1])}function _it(e,t,r){if(!e||!t)throw new Error("Cannot construct image data without dimensions");if(ZI)try{return new ImageData(e,t)}catch{ZI=!1}return Sre(e,t,r)}function xit(e,t,r,i){if(!t||!r)throw new Error("Cannot construct image data without dimensions");if(ZI)try{return new ImageData(e,t,r)}catch{ZI=!1}const n=Sre(t,r,i);return n.data.set(e,0),n}function Sit(e,t,r,i=0,n=0,s=e.width-i,o=e.height-n,a=!1){const{data:l}=e,{width:u,height:h,data:d}=t,f=s/u,m=o/h,g=Math.ceil(f/2),b=Math.ceil(m/2),w=e.width;for(let _=0;_<h;_++)for(let x=0;x<u;x++){const I=4*(x+(a?h-_-1:_)*u);let S=0,T=0,$=0,E=0,C=0,O=0;const R=(_+.5)*m;for(let D=Math.floor(_*m);D<(_+1)*m;D++){const F=Math.abs(R-(D+.5))/b,z=(x+.5)*f,B=F*F;for(let y=Math.floor(x*f);y<(x+1)*f;y++){const M=Math.abs(z-(y+.5))/g,A=Math.sqrt(B+M*M);if(A>=1)continue;let P=2*A*A*A-3*A*A+1;const Y=4*(i+y+(n+D)*w);O+=P*l[Y+3],T+=P,!r&&l[Y+3]<255&&(P=P*l[Y+3]/255),$+=P*l[Y],E+=P*l[Y+1],C+=P*l[Y+2],S+=P}}d[I]=$/S,d[I+1]=E/S,d[I+2]=C/S,d[I+3]=O/T}return t}function Sre(e,t,r){return r||(r=fPe()),r.getContext("2d").createImageData(e,t)}let z1=null,ZI=!0;function fPe(){return z1||(z1=document.createElement("canvas"),z1.width=1,z1.height=1),z1}function mPe(e){switch(e){case"png":case"jpg":case"jpeg":return e;default:return bPe}}function yPe(e){e.save(),e.globalCompositeOperation="copy",e.scale(1,-1),e.translate(0,-e.canvas.height),e.drawImage(e.canvas,0,0),e.restore()}function gPe(e){const t=e.data,r=t.length;for(let i=0;i<r;i+=4){const n=t[i+3];if(n>0){const s=n/255;t[i+0]=t[i+0]/s,t[i+1]=t[i+1]/s,t[i+2]=t[i+2]/s}}}const vPe={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},Bz=98,bPe="png",wPe={png:100,jpg:Bz,jpeg:Bz};function Mit(e,t,r={}){if(!window.WebGLRenderingContext)return Gz(e,_Pe),null;const i=YI(e,t,r);return ce(i)&&Gz(e,xPe),i}function YI(e,t,r={}){const i=t===1?["webgl","experimental-webgl","webkit-3d","moz-webgl"]:["webgl2"];let n=null;for(const s of i){try{n=e.getContext(s,r)}catch{}if(n)break}return n}function Gz(e,t){const r=e.parentNode;r&&(r.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+t+"</div></div></td></tr></table>")}const _Pe='This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>',xPe=`It doesn't appear your computer can support WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>`;let G5;function SPe(){return G5||(G5=MPe()),G5}function MPe(){const e={available:!1,version:0,majorPerformanceCaveat:!1,maxTextureSize:0,supportsHighPrecisionFragment:!1,supportsVertexShaderSamplers:!1,supportsElementIndexUint:!1,supportsStandardDerivatives:!1,supportsInstancedArrays:!1,supportsTextureFloat:!1,supportsColorBufferFloat:!1};if(typeof WebGLRenderingContext===void 0)return e;const t=document.createElement("canvas");if(!t)return e;let r=YI(t,1,{failIfMajorPerformanceCaveat:!0});if(ce(r)&&(r=YI(t,1),U(r)&&(e.majorPerformanceCaveat=!0)),ce(r))return e;const i=r.getParameter(r.VERSION);if(!i)return e;const n=i.match(/^WebGL\s+([\d.]*)/);if(n){const s=parseFloat(n[1]);e.available=s>=.94;const o=r.getShaderPrecisionFormat(r.FRAGMENT_SHADER,r.HIGH_FLOAT);o&&(e.supportsHighPrecisionFragment=o.precision>0),e.supportsVertexShaderSamplers=r.getParameter(r.MAX_VERTEX_TEXTURE_IMAGE_UNITS)>0,e.supportsElementIndexUint=r.getExtension("OES_element_index_uint")!==null,e.supportsStandardDerivatives=r.getExtension("OES_standard_derivatives")!==null,e.supportsInstancedArrays=r.getExtension("ANGLE_instanced_arrays")!==null,e.supportsTextureFloat=r.getExtension("OES_texture_float")!==null,e.supportsColorBufferFloat=r.getExtension("WEBGL_color_buffer_float")!==null&&r.getExtension("EXT_float_blend")!==null}return e.maxTextureSize=r.getParameter(r.MAX_TEXTURE_SIZE),e.version=IPe()?2:1,e}function IPe(){if(typeof WebGL2RenderingContext===void 0)return!1;const e=document.createElement("canvas");if(!e)return!1;const t=YI(e,2);return!!U(t)}const TPe={checkMajorWebPerformanceCaveat:!0};function $Pe(e){e={...TPe,...e};const t=SPe();return t.available?e.checkMajorWebPerformanceCaveat&&t.majorPerformanceCaveat?new Z("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?t.supportsElementIndexUint?t.supportsStandardDerivatives?t.supportsInstancedArrays?null:new Z("webgl:instanced-arrays-required","WebGL support for instanced rendering is required but not supported."):new Z("webgl:standard-derivatives-required","WebGL support for standard derivatives is required but not supported."):new Z("webgl:element-index-uint-required","WebGL support for uint vertex indices is required but not supported."):new Z("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new Z("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new Z("webgl:required","WebGL is required but not supported.")}function EPe(e){return e&&"nodeType"in e}function APe(e){return e&&typeof e.render=="function"}const qz={component:"esri-component"};let Of=class extends Ze{constructor(){super(...arguments),this.widget=null}destroy(){this.widget&&this.widget.destroy(),this.node=null}get id(){return this.get("widget.id")||this.get("node.id")}set node(e){const t=this._get("node");e!==t&&(e&&e.classList.add(qz.component),t&&t.classList.remove(qz.component),this._set("node",e))}castNode(e){return e?typeof e=="string"||EPe(e)?(this._set("widget",null),M6(e)):(APe(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([p({dependsOn:[]})],Of.prototype,"id",null),c([p()],Of.prototype,"node",null),c([Ct("node")],Of.prototype,"castNode",null),c([p({readOnly:!0})],Of.prototype,"widget",void 0),Of=c([N("esri.views.ui.Component")],Of);const p3=Of,CPe={left:0,top:0,bottom:0,right:0},Mre={bottom:30,top:15,right:15,left:15},q5="manual",Hn={ui:"esri-ui",corner:"esri-ui-corner",innerContainer:"esri-ui-inner-container",manualContainer:"esri-ui-manual-container",cornerContainer:"esri-ui-corner-container",topLeft:"esri-ui-top-left",topRight:"esri-ui-top-right",bottomLeft:"esri-ui-bottom-left",bottomRight:"esri-ui-bottom-right"};function kPe(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function H5(e){const t=e,r=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(r===null||r===Object.prototype)&&("component"in t||"index"in t||"position"in t)?e:null}function W5(e,{top:t,bottom:r,left:i,right:n}){e.style.top=t,e.style.bottom=r,e.style.left=i,e.style.right=n}let Nc=class extends _h.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentToKey=new Map,this._handles=new gi,this.view=null,this._initContainers()}initialize(){this._handles.add([It(this,"view.padding, container",this._applyViewPadding.bind(this)),It(this,"padding",this._applyUIPadding.bind(this))])}destroy(){this.container=null;for(const e of this._components)e.destroy();this._components.length=0,this._handles.destroy(),this._componentToKey.clear()}set container(e){const t=this._get("container");e!==t&&(e&&(e.classList.add(Hn.ui),e.classList.add(K3e()),this._attachContainers(e)),t&&(t.classList.remove(Hn.ui),W5(t,{top:"",bottom:"",left:"",right:""}),PX(t)),this._set("container",e))}get height(){const e=this.get("view.height")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.top+t.bottom;return Math.max(e-r,0)}get padding(){return this._get("padding")}set padding(e){e?this._override("padding",e):this._clearOverride("padding")}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:{...Mre,...e}}get width(){const e=this.get("view.width")||0;if(e===0)return e;const t=this._getViewPadding(),r=t.left+t.right;return Math.max(e-r,0)}add(e,t){let r,i;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));const n=H5(e);n&&({index:r,position:t,component:e,key:i}=n),t&&typeof t=="object"&&({index:r,key:i,position:t}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,r,i)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));const r=this._find(e);if(r){const i=this._componentToKey;if(i.has(e)&&i.get(e)!==t)return;const n=this._components.indexOf(r);return r.node.parentNode&&r.node.parentNode.removeChild(r.node),this._componentToKey.delete(e),this._components.splice(n,1)[0]}}empty(e){return Array.isArray(e)?e.map(t=>this.empty(t)).reduce((t,r)=>t.concat(r)):(e=e||q5)===q5?Array.prototype.slice.call(this._manualContainer.children).filter(t=>!t.classList.contains(Hn.corner)).map(t=>this.remove(t)):this._isValidPosition(e)?Array.prototype.slice.call(this._cornerNameToContainerLookup[e].children).map(this.remove,this):null}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let r;const i=H5(e)||H5(t);if(i&&(r=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;const n=this.remove(e);n&&this.add(n,{position:t,index:r})}find(e){if(!e)return null;const t=this._findById(e);return t&&(t.widget||t.node)}getPosition(e){for(const t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,r,i){e instanceof p3||(e=new p3({node:e})),this._place({component:e,position:t,index:r}),this._components.push(e),i&&this._componentToKey.set(e,i)}_find(e){return e?e instanceof p3?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.get("view.padding")||CPe}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){const e=document.createElement("div");e.classList.add(Hn.innerContainer),e.classList.add(Hn.cornerContainer);const t=document.createElement("div");t.classList.add(Hn.innerContainer),t.classList.add(Hn.manualContainer);const r=document.createElement("div");r.classList.add(Hn.topLeft),r.classList.add(Hn.corner),e.appendChild(r);const i=document.createElement("div");i.classList.add(Hn.topRight),i.classList.add(Hn.corner),e.appendChild(i);const n=document.createElement("div");n.classList.add(Hn.bottomLeft),n.classList.add(Hn.corner),e.appendChild(n);const s=document.createElement("div");s.classList.add(Hn.bottomRight),s.classList.add(Hn.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;const o=jd();this._cornerNameToContainerLookup={"top-left":r,"top-right":i,"bottom-left":n,"bottom-right":s,"top-leading":o?i:r,"top-trailing":o?r:i,"bottom-leading":o?s:n,"bottom-trailing":o?n:s},this._positionNameToContainerLookup={manual:t,...this._cornerNameToContainerLookup}}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){const t=e.component,r=e.position||q5,i=e.index,n=this._positionNameToContainerLookup[r],s=i>-1;if(kPe(t.widget)&&t.widget.startup(),!s)return void n.appendChild(t.node);const o=Array.prototype.slice.call(n.children);if(i===0)return void(n.firstChild?CV(t.node,n.firstChild):n.appendChild(t.node));i>=o.length?n.appendChild(t.node):CV(t.node,o[i])}_applyViewPadding(){const e=this.container;e&&W5(e,this._toPxPosition(this._getViewPadding()))}_applyUIPadding(){const e=this._innerContainer;e&&W5(e,this._toPxPosition(this.padding))}_toPxPosition(e){return{top:this._toPxUnit(e.top),left:this._toPxUnit(e.left),right:this._toPxUnit(e.right),bottom:this._toPxUnit(e.bottom)}}_toPxUnit(e){return e===0?"0":e+"px"}_findByComponent(e){let t,r=null;return this._components.some(i=>(t=i===e,t&&(r=i),t)),r}_findById(e){let t,r=null;return this._components.some(i=>(t=i.id===e,t&&(r=i),t)),r}_findByNode(e){let t,r=null;return this._components.some(i=>(t=i.node===e,t&&(r=i),t)),r}};c([p()],Nc.prototype,"container",null),c([p()],Nc.prototype,"height",null),c([p({value:Mre})],Nc.prototype,"padding",null),c([Ct("padding")],Nc.prototype,"castPadding",null),c([p()],Nc.prototype,"view",void 0),c([p()],Nc.prototype,"width",null),Nc=c([N("esri.views.ui.UI")],Nc);const OPe=Nc;function Hz(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function PPe(e,t){return e.length!==t.length||e.some((r,i)=>r.text!==t[i].text)}function yS(e,t,r){!r||!t||e.find(i=>i.layerView===t&&i.text===r)||e.push({text:r,layerView:t})}function RPe(e){return e.type==="bing-maps"}const Gh=[];let Vg=class extends Z0{constructor(e){super(e),this.clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.handles.remove("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Je,this.view=null,this._allLayerViewsChange=t=>{this.handles.remove("suspension");const r=this.get("view.allLayerViews");r&&this.handles.add(r.map(i=>i.watch(["suspended","attributionVisible"],this._updateAttributionItems)),"suspension"),t&&t.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this._updateAttributionItems=()=>{const t=this.get("view.allLayerViews");Gh.length=0,t?(t.forEach(r=>{if(r.suspended||!r.get("layer.attributionVisible"))return;const i=r.layer;if(Hz(i,"user"))return void yS(Gh,r,i.copyright);if(i.hasAttributionData){if(this._fetchedAttributionData.has(r)){const s=this._fetchedAttributionData.get(r);return void(s?yS(Gh,r,this._getDynamicAttribution(s,this.view,i)):Hz(i)&&yS(Gh,r,i.copyright))}return void this._fetchAttributionData(r)}const n=i.get("portalItem.accessInformation");yS(Gh,r,n||i.copyright)}),PPe(this.items,Gh)&&(this.items.removeAll(),this.items.addMany(Gh)),Gh.length=0,this.notifyChange("state")):this.clear()},this.handles.add([yh(this,"view.allLayerViews","change",this._allLayerViewsChange,this._allLayerViewsChange,this.clear),hY(this,"view.stationary",()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.get("view.ready")?this._pendingAttributions.size>0?"loading":"ready":"disabled"}async _fetchAttributionData(e){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);const t=await HT(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){const r=t.ok?this._createContributionIndex(t.value,RPe(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,r)}this._updateAttributionItems()}_createContributionIndex(e,t){const r=e.contributors,i={};if(!r)return i;for(let n=0;n<r.length;n++){const s=r[n],o=s.coverageAreas;if(!o)return;for(const a of o){const l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),h=a.zoomMax-(t&&a.zoomMax?1:0),d={xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:Fe.WGS84},f={extent:Jd(d),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:n};for(let m=u;m<=h;m++)i[m]=i[m]||[],i[m].push(f)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,r){const{extent:i,scale:n}=t;let s=r.tileInfo.scaleToZoom(n);if(s=Math.min(e.maxKey,Math.round(s)),!i||s==null||s<=-1)return"";const o=e[s],a=Vu(i.center.clone().normalize(),t.spatialReference),l={};return o?o.filter(u=>{const h=!l[u.id]&&a&&ZT(u.extent,a);return h&&(l[u.id]=!0),h}).sort((u,h)=>h.score-u.score||u.objectId-h.objectId).map(u=>u.attribution).join(", "):""}};c([p({readOnly:!0,type:Je})],Vg.prototype,"items",void 0),c([p({readOnly:!0})],Vg.prototype,"state",null),c([p()],Vg.prototype,"view",void 0),Vg=c([N("esri.widgets.Attribution.AttributionViewModel")],Vg);const Ire=Vg,qh={base:"esri-attribution esri-widget",poweredBy:"esri-attribution__powered-by",sources:"esri-attribution__sources",open:"esri-attribution--open",sourcesOpen:"esri-attribution__sources--open",link:"esri-attribution__link",widgetIcon:"esri-icon-description",interactive:"esri-interactive"};let Xn=class extends Tn{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this.iconClass=qh.widgetIcon,this.itemDelimiter=" | ",this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Ire}initialize(){this.own(yh(this,"viewModel.items","change",()=>this.scheduleRender()))}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.indexOf(t.text)===-1&&e.push(t.text),e),[]).join(this.itemDelimiter)}render(){const e={[qh.open]:this._isOpen};return oe("div",{bind:this,class:this.classes(qh.base,e),onclick:this._toggleState,onkeydown:this._toggleState},this.renderSourcesNode(),this.renderPoweredBy())}renderPoweredBy(){return oe("div",{class:qh.poweredBy},"Powered by"," ",oe("a",{class:qh.link,href:"http://www.esri.com/",target:"_blank",rel:"noreferrer"},"Esri"))}renderSourcesNode(){const e=this._isOpen,t=this._isInteractive,r=t?0:-1,{attributionText:i}=this,n=t?"button":void 0,s={[qh.sourcesOpen]:e,[qh.interactive]:t};return oe("div",{afterCreate:this._afterSourcesNodeCreate,afterUpdate:this._afterSourcesNodeUpdate,bind:this,class:this.classes(qh.sources,s),innerHTML:i,role:n,tabIndex:r})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth}_afterSourcesNodeUpdate(e){let t=!1;const{clientHeight:r,clientWidth:i,scrollWidth:n}=e,s=n>=i,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(t=!0),this._isOpen){const a=r<this._prevSourceNodeHeight;this._prevSourceNodeHeight=r,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([p()],Xn.prototype,"_isOpen",void 0),c([p()],Xn.prototype,"_isInteractive",null),c([p()],Xn.prototype,"_attributionTextOverflowed",void 0),c([p()],Xn.prototype,"_prevSourceNodeHeight",void 0),c([p({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Xn.prototype,"attributionText",null),c([p()],Xn.prototype,"iconClass",void 0),c([p()],Xn.prototype,"itemDelimiter",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Xn.prototype,"label",void 0),c([p(),Vn("esri/widgets/Attribution/t9n/Attribution")],Xn.prototype,"messages",void 0),c([ze("viewModel.view")],Xn.prototype,"view",void 0),c([p({type:Ire})],Xn.prototype,"viewModel",void 0),c([bo()],Xn.prototype,"_toggleState",null),Xn=c([N("esri.widgets.Attribution")],Xn);const LPe=Xn,NPe="esri.widgets.CompassViewModel";let Pf=class extends ste(Ze){constructor(e){super(e),this._handles=new gi,this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._handles.add(It(this,"view",this._updateRotationWatcher))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get canShowNorth(){const e=this.get("view.spatialReference");return!(!e||!e.isWebMercator&&!e.isGeographic)}get state(){return this.get("view.ready")?this.canShowNorth?"compass":"rotation":"disabled"}reset(){if(!this.get("view.ready"))return;const e={};this.view.type==="2d"?e.rotation=0:e.heading=0,this.callGoTo({target:e})}_updateForRotation(e){e!=null&&(this.orientation={z:e})}_updateForCamera(e){if(!e)return;const t=-e.heading;this.orientation={x:0,y:0,z:t}}_updateRotationWatcher(e){this._handles.removeAll(),e&&(e.type==="2d"?this._handles.add(It(this,"view.rotation",this._updateForRotation)):this._handles.add(It(this,"view.camera",this._updateForCamera)))}};c([p({readOnly:!0})],Pf.prototype,"canShowNorth",null),c([p()],Pf.prototype,"orientation",void 0),c([p({readOnly:!0})],Pf.prototype,"state",null),c([p()],Pf.prototype,"view",void 0),Pf=c([N(NPe)],Pf);const Tre=Pf,Hh={base:"esri-compass esri-widget--button esri-widget",text:"esri-icon-font-fallback-text",icon:"esri-compass__icon",rotationIcon:"esri-icon-dial",northIcon:"esri-icon-compass",widgetIcon:"esri-icon-locate-circled",interactive:"esri-interactive",disabled:"esri-disabled"};let mu=class extends Tn{constructor(e,t){super(e,t),this.goToOverride=null,this.iconClass=Hh.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Tre}reset(){return this.viewModel.reset()}render(){const{orientation:e,state:t}=this.viewModel,r=t==="disabled",i=(t==="rotation"?"rotation":"compass")=="compass",n=r?-1:0,s={[Hh.disabled]:r,[Hh.interactive]:!r},o={[Hh.northIcon]:i,[Hh.rotationIcon]:!i},{messages:a}=this;return oe("div",{bind:this,class:this.classes(Hh.base,s),onclick:this._reset,onkeydown:this._reset,role:"button",tabIndex:n,"aria-label":a.reset,title:a.reset},oe("span",{"aria-hidden":"true",class:this.classes(Hh.icon,o),styles:this._toRotationTransform(e)}),oe("span",{class:Hh.text},a.reset))}_reset(){this.viewModel.reset()}_toRotationTransform(e){return{transform:`rotateZ(${e.z}deg)`}}};c([ze("viewModel.goToOverride")],mu.prototype,"goToOverride",void 0),c([p()],mu.prototype,"iconClass",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],mu.prototype,"label",void 0),c([p(),Vn("esri/widgets/Compass/t9n/Compass")],mu.prototype,"messages",void 0),c([ze("viewModel.view")],mu.prototype,"view",void 0),c([p({type:Tre})],mu.prototype,"viewModel",void 0),c([bo()],mu.prototype,"_reset",null),mu=c([N("esri.widgets.Compass")],mu);const DPe=mu;let Ug=class extends Ze{constructor(e){super(e),this._handles=new gi,this.navigationMode="pan",this.view=null}initialize(){this._handles.add(cY(this,"view.inputManager",this._setNavigationMode.bind(this)))}destroy(){this._handles.destroy(),this._handles=null,this.view=null}get state(){return this.get("view.ready")&&this.view.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){this.get("view.inputManager").primaryDragAction=this.navigationMode==="pan"?"pan":"rotate"}};c([p({readOnly:!0})],Ug.prototype,"state",null),c([p()],Ug.prototype,"navigationMode",void 0),c([p()],Ug.prototype,"view",void 0),Ug=c([N("esri.widgets.NavigationToggleViewModel")],Ug);const $re=Ug,Jo={base:"esri-navigation-toggle esri-widget",button:"esri-navigation-toggle__button esri-widget--button",activeButton:"esri-navigation-toggle__button--active",panButton:"esri-navigation-toggle__button--pan",rotateButton:"esri-navigation-toggle__button--rotate",isLayoutHorizontal:"esri-navigation-toggle--horizontal",rotationIcon:"esri-icon-rotate",panIcon:"esri-icon-pan",widgetIcon:"esri-icon-pan2",disabled:"esri-disabled"};let yu=class extends Tn{constructor(e,t){super(e,t),this.iconClass=Jo.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new $re}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}toggle(){return this.viewModel.toggle()}render(){const e=this.get("viewModel.state")==="disabled",t=this.get("viewModel.navigationMode")==="pan",r={[Jo.disabled]:e,[Jo.isLayoutHorizontal]:this.layout==="horizontal"},i={[Jo.activeButton]:t},n={[Jo.activeButton]:!t},s=e?-1:0,o=this.messages.toggle;return oe("div",{bind:this,class:this.classes(Jo.base,r),onclick:this._toggle,onkeydown:this._toggle,tabIndex:s,"aria-label":o,title:o},oe("div",{class:this.classes(Jo.button,Jo.panButton,i)},oe("span",{class:Jo.panIcon})),oe("div",{class:this.classes(Jo.button,Jo.rotateButton,n)},oe("span",{class:Jo.rotationIcon})))}_toggle(){this.toggle()}};c([p()],yu.prototype,"iconClass",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],yu.prototype,"label",void 0),c([p({value:"vertical"})],yu.prototype,"layout",null),c([p(),Vn("esri/widgets/NavigationToggle/t9n/NavigationToggle")],yu.prototype,"messages",void 0),c([ze("viewModel.view")],yu.prototype,"view",void 0),c([p({type:$re})],yu.prototype,"viewModel",void 0),c([bo()],yu.prototype,"_toggle",null),yu=c([N("esri.widgets.NavigationToggle")],yu);const FPe=yu,B1={button:"esri-widget--button esri-widget",disabled:"esri-disabled",interactive:"esri-interactive",iconText:"esri-icon-font-fallback-text",icon:"esri-icon"};let Id=class extends Tn{constructor(){super(...arguments),this.enabled=!0,this.iconClass="",this.title=""}render(){const e=this.enabled?0:-1,t={[B1.disabled]:!this.enabled,[B1.interactive]:this.enabled},r={[this.iconClass]:!!this.iconClass};return oe("div",{bind:this,class:this.classes(B1.button,t),onclick:this._triggerAction,onkeydown:this._triggerAction,role:"button",tabIndex:e,title:this.title},oe("span",{"aria-hidden":"true",role:"presentation",class:this.classes(B1.icon,r)}),oe("span",{class:B1.iconText},this.title))}_triggerAction(){this.action.call(this)}};c([p()],Id.prototype,"action",void 0),c([p()],Id.prototype,"enabled",void 0),c([p()],Id.prototype,"iconClass",void 0),c([p()],Id.prototype,"title",void 0),c([bo()],Id.prototype,"_triggerAction",null),Id=c([N("esri.widgets.IconButton")],Id);const Wz=Id;let zg=class extends Ze{get canZoomIn(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMaxScale");return t===0||e>t}get canZoomOut(){if(!this.get("view.ready"))return!1;const e=this.get("view.animation.target.scale")||this.get("view.scale"),t=this.get("view.constraints.effectiveMinScale");return t===0||e<t}};c([p({readOnly:!0})],zg.prototype,"canZoomIn",null),c([p({readOnly:!0})],zg.prototype,"canZoomOut",null),c([p()],zg.prototype,"view",void 0),zg=c([N("esri.widgets.Zoom.ZoomConditions2D")],zg);const jPe=zg;let Bg=class extends Ze{get canZoomIn(){return!!this.get("view.ready")}get canZoomOut(){return!!this.get("view.ready")}};c([p({readOnly:!0})],Bg.prototype,"canZoomIn",null),c([p({readOnly:!0})],Bg.prototype,"canZoomOut",null),c([p()],Bg.prototype,"view",void 0),Bg=c([N("esri.widgets.Zoom.ZoomConditions3D")],Bg);const VPe=Bg;let Td=class extends Ze{constructor(e){super(e),this.canZoomIn=!1,this.canZoomOut=!1}destroy(){this.view=null}get state(){return this.get("view.ready")?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new jPe({view:e}):e.type==="3d"&&(this._zoomConditions=new VPe({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():PA(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;const e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():PA(e.goTo({zoomFactor:.5}))}};c([p()],Td.prototype,"_zoomConditions",void 0),c([p({aliasOf:"_zoomConditions.canZoomIn",readOnly:!0})],Td.prototype,"canZoomIn",void 0),c([p({aliasOf:"_zoomConditions.canZoomOut",readOnly:!0})],Td.prototype,"canZoomOut",void 0),c([p({readOnly:!0})],Td.prototype,"state",null),c([p()],Td.prototype,"view",null),Td=c([N("esri.widgets.Zoom.ZoomViewModel")],Td);const Ere=Td,G1={base:"esri-zoom esri-widget",horizontalLayout:"esri-zoom--horizontal",zoomInIcon:"esri-icon-plus",zoomOutIcon:"esri-icon-minus",widgetIcon:"esri-icon-zoom-in-magnifying-glass"};let Dc=class extends Tn{constructor(e,t){super(e,t),this.iconClass=G1.widgetIcon,this.label=void 0,this.messages=null,this.view=null,this.viewModel=new Ere}initialize(){this._zoomInButton=new Wz({action:this.zoomIn.bind(this),iconClass:G1.zoomInIcon}),this._zoomOutButton=new Wz({action:this.zoomOut.bind(this),iconClass:G1.zoomOutIcon})}destroy(){this._zoomInButton.destroy(),this._zoomOutButton.destroy(),this._zoomInButton=null,this._zoomOutButton=null}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}render(){const e=this.viewModel,t={[G1.horizontalLayout]:this.layout==="horizontal"};return this._zoomInButton.enabled=e.state==="ready"&&e.canZoomIn,this._zoomOutButton.enabled=e.state==="ready"&&e.canZoomOut,this._zoomInButton.title=this.messages.zoomIn,this._zoomOutButton.title=this.messages.zoomOut,oe("div",{class:this.classes(G1.base,t)},this._zoomInButton.render(),this._zoomOutButton.render())}zoomIn(){return this.viewModel.zoomIn()}zoomOut(){return this.viewModel.zoomOut()}};c([p()],Dc.prototype,"iconClass",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Dc.prototype,"label",void 0),c([p({value:"vertical"})],Dc.prototype,"layout",null),c([p(),Vn("esri/widgets/Zoom/t9n/Zoom")],Dc.prototype,"messages",void 0),c([ze("viewModel.view")],Dc.prototype,"view",void 0),c([p({type:Ere})],Dc.prototype,"viewModel",void 0),Dc=c([N("esri.widgets.Zoom")],Dc);const UPe=Dc,Are="esri.views.ui.DefaultUI";function zPe(e){return e&&e.view!==void 0}Te.getLogger(Are);let f3=class extends OPe{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-leading","navigation-toggle":"top-leading",zoom:"top-leading"},this.components=[]}initialize(){this._handles.add([It(this,"components",this._componentsWatcher.bind(this)),It(this,"view",this._updateViewAwareWidgets.bind(this))])}_add(e,t,r,i){if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;e=this._createComponent(e)}super._add(e,t,r,i)}_removeComponents(e){e.forEach(t=>{const r=this._find(t);r&&(this.remove(r),r.destroy())})}_updateViewAwareWidgets(e){this.components.forEach(t=>{const r=this._find(t),i=r&&r.widget;zPe(i)&&(i.view=e)})}_componentsWatcher(e,t){this._removeComponents(t),this._addComponents(e),this._adjustPadding(e)}_adjustPadding(e){if(e.indexOf("attribution")===-1&&!this._isOverridden("padding")){const{top:t}=this.padding;this.padding=t}}_addComponents(e){this.initialized&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){const t=this._createWidget(e);if(t)return new p3({id:e,node:t})}_createWidget(e){return e==="attribution"?this._createAttribution():e==="compass"?this._createCompass():e==="navigation-toggle"?this._createNavigationToggle():e==="zoom"?this._createZoom():void 0}_createAttribution(){return new LPe({view:this.view})}_createCompass(){return new DPe({view:this.view})}_createNavigationToggle(){return new FPe({view:this.view})}_createZoom(){return new UPe({view:this.view})}};c([p()],f3.prototype,"components",void 0),f3=c([N(Are)],f3);const BPe=f3;let m3=class extends BPe{constructor(e){super(e),this.components=["attribution","zoom"]}};c([p()],m3.prototype,"components",void 0),m3=c([N("esri.views.ui.2d.DefaultUI2D")],m3);const Cre=m3;var lR;let y3=lR=class extends me{constructor(e){super(e),this.color=new Le([0,0,0,1])}clone(){return new lR(ie({color:this.color}))}};c([p({type:Le,json:{write:!0}})],y3.prototype,"color",void 0),y3=lR=c([N("esri.webmap.background.ColorBackground")],y3);const GPe=y3,qPe=Te.getLogger("esri.views.MapView");let kre,Ore,Pre,Rre,Lre,Nre;async function HPe(){const[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:r,MapViewNavigation:i,MagnifierView2D:n,Stage:s}]=await Promise.all([ae(()=>import("./webgl.b14b1b39.js"),["assets/webgl.b14b1b39.js","assets/VertexArrayObject.71920990.js","assets/Texture.6e496dca.js","assets/ProgramCache.58c6e369.js","assets/ShaderCompiler.135c314c.js"]),ae(()=>import("./mapViewDeps.314142a8.js"),["assets/mapViewDeps.314142a8.js","assets/CIMSymbolHelper.5838353f.js","assets/BidiEngine.aae60613.js","assets/definitions.21e97413.js","assets/Utils.b4ec7012.js","assets/Texture.6e496dca.js","assets/GeometryUtils.d4e26b77.js","assets/VertexArrayObject.71920990.js","assets/ShaderCompiler.135c314c.js","assets/Container.09230578.js","assets/WGLContainer.8dd04ad0.js","assets/config.2a39d8a4.js","assets/GeometryUtils.ea8c8742.js","assets/MaterialKey.af77cdb0.js","assets/earcut.f20dd8d8.js","assets/ProgramCache.58c6e369.js","assets/cimSymbolUtils.4c4e07be.js","assets/quantizationUtils.f741a05e.js","assets/devEnvironmentUtils.444b8fd1.js","assets/Matcher.1aab87b1.js","assets/visualVariablesUtils.e0f4aeba.js","assets/visualVariablesUtils.d3c0c7a7.js","assets/tileUtils.520a698f.js","assets/TileClipper.ca4ac5a2.js","assets/CircularArray.f8b13748.js","assets/requestImageUtils.9667d236.js","assets/FeatureSetReader.01e52ace.js","assets/centroid.b2d3288b.js","assets/BaseGraphicContainer.b63918c0.js","assets/projectionSupport.b008473c.js","assets/json.2d0d6862.js","assets/FeatureContainer.c6e6faf0.js","assets/TileContainer.d5194a1c.js","assets/schemaUtils.39ad90b3.js","assets/MD5.f9440c6b.js","assets/util.e7e3776f.js","assets/ComputedAttributeStorage.44e7cbda.js","assets/vec3f32.9cc42d31.js","assets/GraphicContainer.a2a3804e.js"])]);Ore=e,Pre=t,Rre=r,Lre=i,Nre=n,kre=s}let Yi=class extends zMe(eAe(AOe)){constructor(e){super(e),this._magnifierView=null,this._stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Kd({getCollections:()=>{var t,r;return[(t=this.basemapView)==null?void 0:t.baseLayerViews,this.layerViews,(r=this.basemapView)==null?void 0:r.referenceLayerViews]},getChildrenFunction:()=>null}),this.floors=new Je,this.graphicsView=null,this.highlightOptions=new xre,this.inputManager=new lPe({view:this}),this.mapViewNavigation=null,this.supersampleScreenshotsEnabled=!1,this.ui=new Cre,this.rendering=!1,O0e()}destroy(){this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get background(){return this.get("map.initialViewProperties.background")||null}set background(e){e===void 0?this._clearOverride("background"):this._override("background",e)}get resourceManager(){return this._stage.resourceManager}get textureManager(){return this._stage.painter.textureManager}get navigating(){return!(!this.mapViewNavigation||!this.mapViewNavigation.interacting)}toMap(e){if(uz(e)){const t=lz(this,e);return super.toMap(t)}return super.toMap(e)}async hitTest(e,t){const r=uz(e)?lz(this,e):e;if(!this.ready||isNaN(r.x)||isNaN(r.y))return{screenPoint:r,results:[]};let i=new Set,n=!1,s=null,o=null;t!=null&&t.include?Zz(t.include,Jz(this,h=>i.add(h),h=>{s||(s=new Set),s.add(h)},h=>i.add(h),()=>n=!0)):(n=!0,i=new Set(this.allLayerViews)),t!=null&&t.exclude&&Zz(t.exclude,Jz(this,h=>i.delete(h),h=>{o||(o=new Set),o.add(h)}));const a=this.allLayerViews.filter(h=>!h.suspended&&i.has(h)).reverse(),l=this.toMap(r);let u=(await Promise.all([n?this.graphicsView.hitTest(l):null,...a.map(h=>h.hitTest(l,r))])).filter(U).flat();return s&&(u=u.filter(h=>s.has(uR(h)))),o&&(u=u.filter(h=>!o.has(uR(h)))),{screenPoint:r,results:u.map(h=>({mapPoint:l,graphic:h}))}}takeScreenshot(e){e=e||{};const t=this.supersampleScreenshotsEnabled?Math.min(4,pPe(this.size,Math.min(4096,this._stage.context.parameters.maxTextureSize))):1;let r;e.layers?(r=[],e.layers.forEach(o=>{const a=this.allLayerViews.find(l=>l.layer.id===o.id);a&&"container"in a&&a.container&&r.push(a.container)})):r=this._stage.children;const{format:i,quality:n}=dPe(e.format,e.quality),s=cPe(e,t,this.size,this.padding,i,n,r,e.rotation);return this._stage.takeScreenshot(s)}on(e,t,r,i){return this.inputManager&&this.viewEvents.on(e,t,r,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}validate(){let e=$Pe({checkMajorWebPerformanceCaveat:!1});return ge("safari")&&ge("safari")<9&&(e=new Z("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ge("safari")})),U(e)?(qPe.warn("#validate()",e.message),Promise.reject(e)):HPe()}_startup(){this.timeline.begin("MapView Startup"),super._startup(),this.graphics.owner=this;const e={disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},t=new kre(this.surface,{canvas:this.renderCanvas,supersampleScreenshots:this.supersampleScreenshotsEnabled,contextOptions:e,renderingOptions:this.renderingOptions,timeline:this.timeline}),r=new Ore({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Pre(this.featuresTilingScheme)}),i=new Lre({view:this,animationManager:this.animationManager}),n=new Rre({view:this});this._magnifierView=new Nre,this._magnifierView.magnifier=this.magnifier,this._stage=t,this.frameTask.graphicsView=r,this._set("graphicsView",r),this._set("mapViewNavigation",i),this._set("labelManager",n),this.handles.add([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("post-render",()=>this._set("rendering",t.renderRequested)),t.on("will-render",()=>this._set("rendering",t.renderRequested)),t.on("webgl-error",o=>this.fatalError=o.error),It(this,"stationary",o=>t.stationary=o,!0),It(this,"state.id",()=>t.state=this.state,!0),It(this,"background",o=>{t.background=o,this._magnifierView.background=o},!0),It(this,"magnifier",o=>this._magnifierView.magnifier=o,!0),It(this,"renderingOptions",o=>t.renderingOptions=o,!0),It(this,"highlightOptions",()=>t.highlightOptions=this.highlightOptions,!0)],"map-view"),t.state=this.state,this._updateStageChildren();const s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(o=>o(this)),this.timeline.end("MapView Startup")}_teardown(){this.handles.remove("map-view"),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this._stage.destroy(),this.graphicsView.destroy(),this.mapViewNavigation.destroy(),this._stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,super._teardown()}_updateStageChildren(){this._stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this._stage.addChild(t.container)});const e=this.graphicsView;this._stage.addChild(e.container),this._stage.addChild(this._magnifierView)}};c([p({type:GPe})],Yi.prototype,"background",null),c([p()],Yi.prototype,"floors",void 0),c([p()],Yi.prototype,"graphicsView",void 0),c([p({type:xre})],Yi.prototype,"highlightOptions",void 0),c([p({readOnly:!0})],Yi.prototype,"inputManager",void 0),c([p({readOnly:!0})],Yi.prototype,"resourceManager",null),c([p({readOnly:!0})],Yi.prototype,"textureManager",null),c([p({readOnly:!0})],Yi.prototype,"mapViewNavigation",void 0),c([p({type:Boolean})],Yi.prototype,"navigating",null),c([p({type:Boolean,constructOnly:!0})],Yi.prototype,"supersampleScreenshotsEnabled",void 0),c([p({type:Cre})],Yi.prototype,"ui",void 0),c([p({readOnly:!0})],Yi.prototype,"rendering",void 0),c([p({constructOnly:!0})],Yi.prototype,"renderCanvas",void 0),c([p({constructOnly:!0})],Yi.prototype,"deactivatedWebGLExtensions",void 0),c([p({constructOnly:!0})],Yi.prototype,"debugWebGLExtensions",void 0),Yi=c([N("esri.views.MapView")],Yi);const WPe=Yi;function uR(e){const t=e.getObjectId();var r,i,n,s;return t?`${(r=(i=(n=e.layer)==null?void 0:n.uid)!=null?i:(s=e.sourceLayer)==null?void 0:s.uid)!=null?r:"MapView"}/${t}`:`"MapView/${e.uid}`}function Jz(e,t,r,i,n){return s=>{if(s instanceof xn){if(s.layer===e)n?.();else{const o=e.allLayerViews.find(a=>a.layer===s.layer);o&&i?.(o)}r(uR(s))}else{const o=e.allLayerViews.find(a=>a.layer===s);o&&t(o)}}}function Zz(e,t){if(e)if(AV(e))for(const r of e)if(AV(r))for(const i of r)t(i);else t(r);else t(e)}function w8(){return[0,0,0,0]}function JPe(e){return[e[0],e[1],e[2],e[3]]}function o1(e,t,r,i){return[e,t,r,i]}function ZPe(e){const t=w8(),r=Math.min(4,e.length);for(let i=0;i<r;++i)t[i]=e[i];return t}function YPe(e,t){return new Float64Array(e,t,4)}function Dre(){return w8()}function Fre(){return o1(1,1,1,1)}function jre(){return o1(1,0,0,0)}function Vre(){return o1(0,1,0,0)}function Ure(){return o1(0,0,1,0)}function zre(){return o1(0,0,0,1)}const KPe=Dre(),XPe=Fre(),QPe=jre(),eRe=Vre(),tRe=Ure(),rRe=zre();Object.freeze({__proto__:null,create:w8,clone:JPe,fromValues:o1,fromArray:ZPe,createView:YPe,zeros:Dre,ones:Fre,unitX:jre,unitY:Vre,unitZ:Ure,unitW:zre,ZEROS:KPe,ONES:XPe,UNIT_X:QPe,UNIT_Y:eRe,UNIT_Z:tRe,UNIT_W:rRe});class iRe{constructor(t){this.message=t}toString(){return`AssertException: ${this.message}`}}function Bre(e,t){if(!e){t=t||"assert";const r=new Error(t);throw r.stack&&console.log(r.stack),new iRe(t)}}class nRe{constructor(t){this.client=t,this._cancelled=!1,this.size=0,this.duration=0}}class sRe{constructor(t){this.typeWorkerQuota=t,this.tasks=new Array,this.numWorkers=0,this.statistics=new oRe}}class oRe{constructor(){this.requests=0,this.size=0,this.duration=0,this.speed=0}}class aRe{constructor(t,r,i,n){this._workerFunc=t,this._callbackFunc=r,this._maxTotalNumWorkers=i,this._totalNumWorkers=0,this._clients=n.map(s=>new sRe(s))}hasQuota(t){const r=this._clients[t];return!!r&&(this._totalNumWorkers<this._maxTotalNumWorkers||r.numWorkers+r.tasks.length<r.typeWorkerQuota)}push(t){const r=this._clients[t.client];r&&(this._totalNumWorkers<this._maxTotalNumWorkers?(r.numWorkers++,this._totalNumWorkers++,this._workerFunc(t,(i,n)=>this._taskCallback(i,n))):r.tasks.push(t))}cancel(t){this._taskFinished(t),t._cancelled=!0}destroy(){this._clients.length=0}_taskFinished(t){const r=this._clients[t.client];this._totalNumWorkers--,r.numWorkers--,r.statistics.requests++,r.statistics.size+=t.size||0,r.statistics.duration+=t.duration||0,r.statistics.speed=r.statistics.duration>0?r.statistics.size/r.statistics.duration:0,Bre(r.numWorkers>=0),this._next()}_next(){for(const t of this._clients)if(t&&t.numWorkers<t.typeWorkerQuota&&this._processQueue(t))return;for(const t of this._clients)if(t&&this._processQueue(t))return}_processQueue(t){for(;t.tasks.length>0;)if(this._workerFunc(t.tasks.shift(),(r,i)=>this._taskCallback(r,i)))return t.numWorkers++,this._totalNumWorkers++,!0;return!1}_taskCallback(t,r){t._cancelled||(this._callbackFunc(t,r),this._taskFinished(t))}getStatsForType(t){const r=this._clients[t];return r?{quota:r.typeWorkerQuota,workers:r.numWorkers,queueSize:r.tasks.length,requestStats:r.statistics}:null}get test(){const t=this;return{set workerFunc(r){t._workerFunc=r}}}}class lRe extends nRe{constructor(t,r,i,n,s){super(n),this.url=t,this.options=r,this.docType=i,this.key=s,this.result=null,this.status=1,this.request=null,this.abortController=null,this.resolvers=new Array,this.startTime=0}}let J5=class extends Ze{constructor(){super(...arguments),this.tasks=new Map,this.onLoadQueue=new Array,this.doneQueue=new Array,this.updating=!1}setup(e,t,r){this.loadQueue=new aRe((i,n)=>this.startLoading(i,n),(i,n)=>this.doneLoadingCallback(i,n),e,t),r&&(this.taskHandle=r.registerTask(Rt.STREAM_DATA_LOADER,this))}destroy(){this.taskHandle=LT(this.taskHandle),this.tasks.forEach(e=>{e.abortController&&e.abortController.abort()}),this.loadQueue.destroy(),this.loadQueue=null,this.onLoadQueue=null,this.doneQueue=null,this.tasks=null}hasDownloadSlots(e){return this.loadQueue.hasQuota(e)}request(e,t,r,i={}){const n=NH();n.__signal=U(i)?i.signal:null;const s=this.createOrUpdateTask(e,t,r,i,n);return xa(i,()=>this.cancelRequest(s,n)),n.promise}createTask(e,t,r,i,n,s){const o=new lRe(e,t,r,i,n);return this.updateTask(o,s),this.tasks.set(n,o),this.tasks.size===1&&this._set("updating",!0),this.loadQueue.push(o),o}cancelRequest(e,t){TL(e.resolvers,t),t.reject(Zr()),e.resolvers.length===0&&(e.status===2&&(e.status=4,this.loadQueue.cancel(e),e.abortController.abort(),e.request=null,e.abortController=null),e.status=4,this.tasks.delete(e.key),this.tasks.size===0&&this._set("updating",!1))}taskKey(e,t,r){return`${e}:${t}:${r}`}updateTask(e,t){e.resolvers.push(t)}createOrUpdateTask(e,t,r,i,n){const s=U(i)&&i.uid||e,o=this.taskKey(s,t,r),a=this.tasks.get(o);return a?(this.updateTask(a,n),a):this.createTask(e,i,t,r,o,n)}doneLoadingCallback(e,t){this.loadQueue&&(Bre(e.status===2),e.status=3,this.taskHandle?this.doneQueue.push({task:e,err:t}):this.doneLoading(e,t))}get running(){return this.doneQueue.length>0||this.onLoadQueue.length>0}runTask(e){for(;!e.done&&this.onLoadQueue.length>0;){const t=this.onLoadQueue.shift();$r(t.task.abortController),t.task.abortController=null,t.callback(t.task),e.madeProgress()}for(;!e.done&&this.doneQueue.length>0;){const t=this.doneQueue.shift();t.task.status!==3&&(t.err=t.err||Zr()),this.doneLoading(t.task,t.err),e.madeProgress()}}doneLoading(e,t){let r=e.result instanceof HTMLImageElement?0:e.resolvers.length;for(const i of e.resolvers)if(t)sn(t)?i.reject(t):i.reject(new Z("stream-data-loader:request-error",`Failed to request resource at '${e.url}'. ${t}`,{url:e.url,error:t}));else{--r;const n=r<=0?e.result:ie(e.result);i.resolve(n)}this.tasks.delete(e.key),this.tasks.size===0&&this._set("updating",!1)}startLoading(e,t){if(e.status===4)return!1;let r,i;switch(e.startTime=performance.now(),e.status=2,e.docType){case"binary":i="array-buffer",r=0;break;case"image":i="image";break;case"image+type":i="array-buffer";break;default:i="json"}e.abortController=new AbortController;const n=e.abortController.signal;e.request=Ee(e.url,{...e.options,responseType:i,timeout:r,signal:n});let s=()=>{};const o=l=>{e.duration=performance.now()-e.startTime,e.size=l instanceof ArrayBuffer?l.byteLength:e.size||0,e.result=l,this.taskHandle?this.onLoadQueue.push({callback:t,task:e}):(e.abortController=null,t(e))},a=l=>{e.status===2&&t(e,l),s()};return e.docType!=="image+type"?(e.request.then(l=>o(l.data),a),!0):(e.request.then(l=>{const u=l.data,h=uRe(u);if(i="image",e.size=u.byteLength,h==="unknown")return e.request=Ee(e.url,{responseType:i,timeout:r,signal:n}),void e.request.then(m=>o(m.data),a);const d=new Blob([u],{type:h}),f=window.URL.createObjectURL(d);s=()=>window.URL.revokeObjectURL(f),e.request=Ee(f,{responseType:i,timeout:r,signal:n}),e.request.then(m=>o(new cRe(m.data,h,s)),a)},a),!0)}get test(){return{loadQueue:this.loadQueue}}};function uRe(e){if(e.byteLength<2)return"unknown";const t=new Uint8Array(e,0,e.byteLength);return t[0]===137&&t[1]===80?"image/png":t[0]===71&&t[1]===73?"image/gif":t[0]===66&&t[1]===77?"image/bmp":t[0]===255&&t[1]===216?"image/jpeg":"unknown"}c([p({readOnly:!0})],J5.prototype,"updating",void 0),J5=c([N("esri.views.3d.support.StreamDataLoader")],J5);class cRe{constructor(t,r,i){this.image=t,this.type=r,this.release=i}get isOpaque(){return this.type==="image/jpeg"}}const hRe=12;class Fr{constructor(t){const r=Fr.checkUnsupported(t);if(U(r))throw r;const i=t;this.spatialReference=i.spatialReference,this._isWebMercator=this.spatialReference.isWebMercator,this._isGCS=s8(this.spatialReference)||Pv(this.spatialReference)||Rv(this.spatialReference),this.origin=[i.origin.x,i.origin.y],this.pixelSize=i.size[0],this.dpi=i.dpi;const n=i.lods.reduce(function(u,h,d){return h.level<u.min&&(u.min=h.level,u.minIndex=d),u.max=Math.max(u.max,h.level),u},{min:1/0,minIndex:0,max:-1/0}),s=i.lods[n.minIndex],o=2**s.level;let a=s.resolution*o,l=s.scale*o;this.levels=new Array(n.max+1);for(let u=0;u<this.levels.length;u++)this.levels[u]={resolution:a,scale:l,tileSize:[a*i.size[0],a*i.size[1]]},a/=2,l/=2}clone(){return new Fr(this.toTileInfo())}toTileInfo(){return new Fs({dpi:this.dpi,origin:{x:this.origin[0],y:this.origin[1],spatialReference:this.spatialReference},size:[this.pixelSize,this.pixelSize],spatialReference:this.spatialReference,lods:this.levels.map((t,r)=>({level:r,scale:t.scale,resolution:t.resolution}))})}getExtent(t,r,i,n){const s=this.levels[t],o=s.tileSize[0],a=s.tileSize[1];n[0]=this.origin[0]+i*o,n[2]=n[0]+o,n[3]=this.origin[1]-r*a,n[1]=n[3]-a}convertExtentToRadians(t,r){this._isWebMercator?(r[0]=x9(t[0]),r[1]=S9(t[1]),r[2]=x9(t[2]),r[3]=S9(t[3])):this._isGCS&&(r[0]=Yg(t[0]),r[1]=Yg(t[1]),r[2]=Yg(t[2]),r[3]=Yg(t[3]))}getExtentGeometry(t,r,i,n=new nt){return this.getExtent(t,r,i,Gl),n.spatialReference=this.spatialReference,n.xmin=Gl[0],n.ymin=Gl[1],n.xmax=Gl[2],n.ymax=Gl[3],n.zmin=void 0,n.zmax=void 0,n}ensureMaxLod(t){if(t==null)return!1;let r=!1;for(;this.levels.length<=t;){const i=this.levels[this.levels.length-1],n=i.resolution/2;this.levels.push({resolution:n,scale:i.scale/2,tileSize:[n*this.pixelSize,n*this.pixelSize]}),r=!0}return r}capMaxLod(t){this.levels.length>t+1&&(this.levels.length=t+1)}getMaxLod(){return this.levels.length-1}scaleAtLevel(t){return this.levels[0].scale/2**t}levelAtScale(t){const r=this.levels[0].scale;return t>=r?0:Math.log(r/t)*Math.LOG2E}resolutionAtLevel(t){return this.levels[0].resolution/2**t}compatibleWith(t){if(!(t instanceof Fr)){if(Fr.checkUnsupported(t))return!1;t=new Fr(t)}if(!t.spatialReference.equals(this.spatialReference)||t.pixelSize!==this.pixelSize)return!1;const r=Math.min(this.levels.length,t.levels.length)-1,i=this.levels[r].resolution;let n=.5*i;return!g4(t.origin[0],this.origin[0],n)||!g4(t.origin[1],this.origin[1],n)?!1:(n=.5*i/2**r/this.pixelSize*hRe,g4(i,t.levels[r].resolution,n))}rootTilesInExtent(t,r=null,i=1/0){const n=new Array,s=this.levels[0].tileSize;if(ce(t)||s[0]===0||s[1]===0)return n;Fr.computeRowColExtent(t,s,this.origin,Gl);let o=Gl[1],a=Gl[3],l=Gl[0],u=Gl[2];const h=u-l,d=a-o;if(h*d>i){const f=Math.floor(Math.sqrt(i));d>f&&(o=o+Math.floor(.5*d)-Math.floor(.5*f),a=o+f),h>f&&(l=l+Math.floor(.5*h)-Math.floor(.5*f),u=l+f)}for(let f=o;f<a;f++)for(let m=l;m<u;m++)n.push([0,f,m]);return U(r)&&(r[0]=this.origin[0]+l*s[0],r[1]=this.origin[1]-a*s[1],r[2]=this.origin[0]+u*s[0],r[3]=this.origin[1]-o*s[1]),n}static computeRowColExtent(t,r,i,n){const s=.001*(t[2]-t[0]+(t[3]-t[1]));n[0]=Math.max(0,Math.floor((t[0]+s-i[0])/r[0])),n[2]=Math.max(0,Math.ceil((t[2]-s-i[0])/r[0])),n[1]=Math.max(0,Math.floor((i[1]-t[3]+s)/r[1])),n[3]=Math.max(0,Math.ceil((i[1]-t[1]-s)/r[1]))}static isPowerOfTwo(t){const r=t.lods,i=r[0].resolution*2**r[0].level;return!r.some(function(n){return!hfe(n.resolution,i/2**n.level)})}static hasGapInLevels(t){const r=t.lods.map(function(i){return i.level});r.sort(function(i,n){return i-n});for(let i=1;i<r.length;i++)if(r[i]!==r[0]+i)return!0;return!1}static tileSizeSupported(t){const r=t.size[1];return r===t.size[0]&&(r&r-1)==0&&r>=128&&r<=512}static hasOriginPerLODs(t){const r=t.origin;return t.lods.some(i=>i.origin!=null&&(i.origin[0]!==r.x||i.origin[1]!==r.y))}static checkUnsupported(t){return ce(t)?new Z("tilingscheme:tile-info-missing","Tiling scheme must have tiling information"):t.lods.length<1?new Z("tilingscheme:generic","Tiling scheme must have at least one level"):Fr.isPowerOfTwo(t)?Fr.hasGapInLevels(t)?new Z("tilingscheme:gaps","Tiling scheme levels must not have gaps between min and max level"):Fr.tileSizeSupported(t)?Fr.hasOriginPerLODs(t)?new Z("tilingscheme:multiple-origin","Tiling scheme levels must not have their own origin"):null:new Z("tilingscheme:tile-size","Tiles must be square and size must be one of [128, 256, 512]"):new Z("tilingscheme:power-of-two","Tiling scheme must be power of two")}static fromExtent(t,r){const i=t[2]-t[0],n=t[3]-t[1],s=vy(r),o=1.2*Math.max(i,n),a=256,l=96,u=.0254,h=new Fr(new Fs({size:[a,a],origin:{x:t[0]-.5*(o-i),y:t[3]+.5*(o-n)},lods:[{level:0,resolution:o/a,scale:1/(a/l*u/(o*s))}],spatialReference:r}));return h.ensureMaxLod(20),h}static makeWebMercatorAuxiliarySphere(t){const r=new Fr(Fr.WebMercatorAuxiliarySphereTileInfo);return r.ensureMaxLod(t),r}static makeGCSWithTileSize(t,r=256,i=16){const n=256/r,s=new Fr(new Fs({size:[r,r],origin:{x:-180,y:90,spatialReference:t},spatialReference:t,lods:[{level:0,resolution:.703125*n,scale:295497598570834e-6*n}]}));return s.ensureMaxLod(i),s}get test(){return{isWebMercator:this._isWebMercator,isGCS:this._isGCS}}}Fr.WebMercatorAuxiliarySphereTileInfo=new Fs({size:[256,256],origin:{x:-20037508342787e-6,y:20037508342787e-6,spatialReference:Fe.WebMercator},spatialReference:Fe.WebMercator,lods:[{level:0,resolution:156543.03392800014,scale:591657527591555e-6}]}),Fr.WebMercatorAuxiliarySphere=Fr.makeWebMercatorAuxiliarySphere(19);const Gl=Sl(),Yz=64;sC(oC/10);const dRe=Sl();Fr.WebMercatorAuxiliarySphere.getExtent(0,0,0,dRe);Sl([-180,-90,180,90]);const Jy=to(),pRe=to(),ac=to(),lc=to();function fRe(e,t,r=0){const i=e.extent;if(ce(i))return!1;if(r===0)return Pme(i,t);const n=Math.min(i[2]-i[0],i[3]-i[1]);return Lme(i,t,r*n)}function gS(e,t,r,i){tI(Jy,r),Jy[i]=t[i];const n=dw(Jy,Jy,t),s=dw(pRe,e,t),o=rI(s,n),a=rI(n,n);let l;l=o<=0?t:a<=o?r:XW(Jy,t,eN(n,n,o/a));const u=dw(Jy,e,l);return Math.PI/2-Math.atan(u[2]/Math.sqrt(u[0]*u[0]+u[1]*u[1]))}function mRe(e,t,r){const i=e.extent;if(ce(i))return 0;ac[0]=i[0],ac[1]=i[1],ac[2]=r,lc[0]=i[2],lc[1]=i[3],lc[2]=r;let n=1/0,s=1/0;return t[0]<ac[0]?n=gS(t,ac,lc,0):t[0]>lc[0]&&(n=gS(t,lc,ac,0)),t[1]<ac[1]?s=gS(t,ac,lc,1):t[1]>lc[1]&&(s=gS(t,lc,ac,1)),Math.min(n,s)}function yRe(e,t,r){if(e.spatialReference.isGeographic&&!s8(e.spatialReference))return new Z("tilingscheme:local-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in local scenes");const i=Fr.checkUnsupported(e);return U(i)?i:gRe(e,r)||(t&&!e.spatialReference.equals(t)?new Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the local scene"):null)}function gRe(e,t){const r=e.lods,i=r[0].resolution*2**r[0].level,n=[i*e.size[0],i*e.size[1]],s=[e.origin.x,e.origin.y],o=Cme(t),a=Sl();Fr.computeRowColExtent(o,n,s,a);const l=(a[2]-a[0])*(a[3]-a[1]);if(l>Yz){const u=r[0].scale*2**r[0].level;let h=Math.max((o[3]-o[1])/e.size[1],(o[2]-o[0])/e.size[0])*u/i;const d=Math.floor(Math.log(h)/Math.log(10));return h=Math.ceil(h/10**d)*10**d,new Z("tilingscheme:too-many-root-tiles","Scale of level 0 of the tiling scheme (1:"+Math.floor(u).toLocaleString()+") is too large for the layer's extent. Suggested scale: 1:"+h.toLocaleString()+".",{level0Scale:u,suggestedLevel0Scale:h,requiredNumRootTiles:l,allowedNumRootTiles:Yz})}return null}const vRe=Object.freeze({__proto__:null,isInsideExtent:fRe,tiltToExtentEdge:mRe,checkIfTileInfoSupportedForViewSR:yRe});function bRe(){return!0}function wRe(){return 0}function _Re(e,t){const r=e.lods.length-1,i=e.spatialReference,n=s8(i)||Pv(i)||Rv(i);if(i.isWebMercator){if(!Fr.makeWebMercatorAuxiliarySphere(r).compatibleWith(e))return new Z("tilingscheme:incompatible-global-web-mercator","The tiling scheme is not compatible with the ArcGIS Online Web Mercator tiling scheme")}else{if(!n)return new Z("tilingscheme:global-unsupported-spatial-reference","The tiling scheme spatial reference is not supported in global scenes");if(!Fr.makeGCSWithTileSize(e.spatialReference,e.size[0],r).compatibleWith(e))return e.spatialReference.isWGS84?new Z("tilingscheme:incompatible-global-wgs84","The tiling scheme is not compatible with the ArcGIS Online WGS84 tiling scheme"):new Z("tilingscheme:incompatible-global","The tiling scheme is not compatible with the ArcGIS Online tiling scheme")}if(t&&!e.spatialReference.equals(t))return new Z("tilingscheme:spatial-reference-mismatch","The tiling scheme does not match the spatial reference of the global scene")}const xRe=Object.freeze({__proto__:null,isInsideExtent:bRe,tiltToExtentEdge:wRe,checkIfTileInfoSupportedForViewSR:_Re}),SRe={1:xRe,2:vRe};function Kz(e,t,r,i){return SRe[i].checkIfTileInfoSupportedForViewSR(e,r,t)}function MRe(e,t){return e!=null&&(t==null||(t===2?!e.isGeographic||e.isWGS84||e.wkid===4490:e.isWebMercator||e.isWGS84||e.wkid===4490||e.wkid===104971||e.wkid===104905||e.wkid===104903))}async function IRe(e,t={}){await $Re(e,t),$r(t)}async function TRe(e,t={}){const{basemap:r,view:i}=e;if(await r.load(t),$r(t),r.baseLayers.length===0)return;const n=r.baseLayers.getItemAt(0);if(!lSe(n))return;if(r.spatialReference){if(i.spatialReference.equals(r.spatialReference))return;Xz()}await n.load(t),$r(t);const s=(n.get("supportedSpatialReferences")||[n.get("tileInfo.spatialReference")]).filter(Boolean);s.length!==0&&s.every(o=>!i.spatialReference.equals(o))&&Xz()}function Xz(){throw new Z("basemap-compatibility:incompatible-spatial-reference","Basemap spatial reference is not compatible with the view")}async function $Re(e,t){const{basemap:r,view:i}=e;if(await r.load(t),r.baseLayers.length===0)return;const n=ERe(r.baseLayers.concat(r.referenceLayers));if(n.length)throw n[0];const s=r.baseLayers.getItemAt(0);try{await s.load(t)}catch(o){const a="basemap-compatibility:unknown-error",l="Unknown basemap compatibility error",{name:u=a,message:h=l,details:d}=o;throw new Z(u,h,d)}ARe(s,i)}function ERe(e){const t=["ArcGISTiledImageServiceLayer","ArcGISTiledMapServiceLayer","OpenStreetMap","VectorTileLayer","WebTiledLayer"];return e.toArray().filter(r=>t.indexOf(r.operationalLayerType)===-1).map(r=>new Z("basemap-compatibility:unsupported-basemap-layer-type","Unsupported basemap layer type ${operationalLayerType}",{layer:r,operationalLayerType:r.operationalLayerType||"unknown"}))}function ARe(e,t){const r=e.tileInfo;if(!r)return;const i=t.state.viewingMode;if(!i)return;if(!MRe(r.spatialReference,i))throw new Z(`basemapgalleryitem:spatial-reference-unsupported-${BI(i)}`,`Basemap spatial reference is unsupported in ${BI(i)} mode`);if(i===1){let s=Kz(r,e.fullExtent,null,1);if(s&&e.compatibleTileInfo256&&!Kz(e.compatibleTileInfo256,e.fullExtent,null,1)&&(s=null),s){const o=r.spatialReference.isWebMercator?"web-mercator":"wgs84";throw new Z(`basemapgalleryitem:tiling-scheme-unsupported-${o}-global`,"Basemap tiling scheme is unsupported in global mode",{error:s})}}else if(Fr.checkUnsupported(r))throw new Z("basemapgalleryitem:tiling-scheme-unsupported-local","Basemap tiling scheme is unsupported in local mode");const n=t.get("basemapTerrain.tilingScheme");if(n&&!n.compatibleWith(r)&&(!e.compatibleTileInfo256||!n.compatibleWith(e.compatibleTileInfo256)))throw new Z("basemapgalleryitem:tiling-scheme-incompatible","Basemap tiling scheme is incompatible with the view")}let $d=class extends Ze{constructor(e){super(e),this._handles=new gi,this.compatibilityFunction=null,this.error=null,this.state="loading",this.view=null}initialize(){this._handles.add(It(this,["basemap.loadStatus","compatibilityFunction","view.basemapTerrain?.tilingScheme","view.ready","view.spatialReference"],()=>this.refresh()))}destroy(){this._cancelCompatibilityCheck(),this._handles.destroy(),this._handles=null,this.basemap=null,this.compatibilityFunction=null,this.view=null}set basemap(e){const t=this._get("basemap");t&&t.cancelLoad(),e&&e.load().catch(()=>{}),this._set("basemap",e)}refresh(){this._cancelCompatibilityCheck(),this._set("state","loading");const e=this.get("basemap.loadStatus");if(e!=="loaded"&&e!=="failed")return;if(!this.compatibilityFunction)return void(e==="loaded"?(this._set("state","ready"),this._set("error",null)):(this._set("state","error"),this._set("error",this.basemap.loadError)));const t=new AbortController,{signal:r}=t;this.compatibilityFunction(this,{signal:r}).then(()=>{this._set("state","ready"),this._set("error",null)}).catch(i=>{sn(i)||(this._set("state","error"),this._set("error",i))}),this._lastCompatibilityCheckController=t}_cancelCompatibilityCheck(){this._lastCompatibilityCheckController&&(this._lastCompatibilityCheckController.abort(),this._lastCompatibilityCheckController=null)}};c([p()],$d.prototype,"basemap",null),c([p()],$d.prototype,"compatibilityFunction",void 0),c([p({readOnly:!0})],$d.prototype,"error",void 0),c([p({readOnly:!0})],$d.prototype,"state",void 0),c([p()],$d.prototype,"view",void 0),$d=c([N("esri.widgets.BasemapGallery.support.BasemapGalleryItem")],$d);const Gre=$d,qre=Je.ofType(Vm);let Xb=class extends Ze{constructor(e){super(e),this.basemaps=new qre}get state(){return"ready"}refresh(){}};c([p({type:qre})],Xb.prototype,"basemaps",void 0),c([p({readOnly:!0})],Xb.prototype,"state",null),Xb=c([N("esri.widgets.BasemapGallery.support.LocalBasemapsSource")],Xb);const Hre=Xb,Wre=Je.ofType(Vm),Jre="esri.widgets.BasemapGallery.support.PortalBasemapsSource",CRe=Te.getLogger(Jre);let Fc=class extends Lo.LoadableMixin(l2(Hre)){constructor(e){super(e),this._handles=new gi,this.basemaps=new Wre,this.filterFunction=null,this.portal=ms.getDefault(),this.query=null,this.updateBasemapsCallback=null}initialize(){this._handles.add([It(this,["filterFunction","loadStatus","portal.basemapGalleryGroupQuery","portal.user","query","updateBasemapsCallback"],()=>this.refresh())])}destroy(){this._handles.destroy(),this._handles=null,this.filterFunction=null,this.portal=null}get state(){return this.loadStatus==="not-loaded"?"not-loaded":this.loadStatus==="loading"||this._lastPortalBasemapFetchController?"loading":"ready"}load(e){return this.addResolvingPromise(this.portal.load(e)),this.notifyChange("state"),Promise.resolve(this)}async refresh(){if(this.state!=="ready")return;this._lastPortalBasemapFetchController&&(this._lastPortalBasemapFetchController.abort(),this._lastPortalBasemapFetchController=null);const e=this.portal,t=new AbortController;this._lastPortalBasemapFetchController=t,this.notifyChange("state");try{const r=await e.fetchBasemaps(this._toQueryString(this.query),t);this._updateBasemaps(r)}catch(r){if(sn(r))throw r;CRe.warn(new Z("basemap-source:fetch-basemaps-error","Could not fetch basemaps from portal.",{error:r})),this._updateBasemaps()}this._lastPortalBasemapFetchController=null,this.notifyChange("state")}_toQueryString(e){return e&&typeof e!="string"?Object.keys(e).map(t=>`${t}:${e[t]}`).join(" AND "):e}_updateBasemaps(e=[]){let t=this.filterFunction?e.filter(this.filterFunction):e;t=this.updateBasemapsCallback?this.updateBasemapsCallback(t):t,this.basemaps.removeAll(),this.basemaps.addMany(t)}};c([p({readOnly:!0,type:Wre})],Fc.prototype,"basemaps",void 0),c([p()],Fc.prototype,"filterFunction",void 0),c([p({type:ms})],Fc.prototype,"portal",void 0),c([p()],Fc.prototype,"query",void 0),c([p({readOnly:!0})],Fc.prototype,"state",null),c([p()],Fc.prototype,"updateBasemapsCallback",void 0),Fc=c([N(Jre)],Fc);const g3=Fc,Zre=Je.ofType(Gre);function kRe(e){return e&&e.declaredClass==="esri.portal.Portal"}function ORe(e){return e&&!(e instanceof g3)&&(!!e.portal||!!e.query)}function PRe(e){return e&&"basemaps"in e&&"state"in e&&"refresh"in e}let gu=class extends Lo{constructor(e){super(e),this._handles=new gi,this.activeBasemap=null,this.items=new Zre,this.source=new g3,this.view=null}initialize(){const e=()=>this._recreateItems();this._handles.add([sr(this,["compatibilityFunction","state"],()=>this._updateItems()),yh(this,"source.basemaps","change",e,e)])}destroy(){this._handles.destroy(),this._handles=null}get compatibilityFunction(){return this._get("compatibilityFunction")===void 0?this.get("view.type")==="3d"?IRe:TRe:this._get("compatibilityFunction")}set compatibilityFunction(e){this._set("compatibilityFunction",e)}castSource(e){return Array.isArray(e)||Je.isCollection(e)?new Hre({basemaps:e}):kRe(e)?new g3({portal:e}):ORe(e)?new g3(e):PRe(e)?e:null}get state(){return this.get("view.ready")&&this.source?"ready":"disabled"}basemapEquals(e,t){return ySe(e,t)}refresh(){this._recreateItems()}load(e){return this.addResolvingPromise(Lo.isLoadable(this.source)?this.source.load(e):Promise.resolve()),Promise.resolve(this)}_recreateItems(){const e=this.get("source.basemaps"),{view:t,compatibilityFunction:r}=this;this.items.removeAll().forEach(i=>i.destroy()),this.items.addMany(e.map(i=>new Gre({basemap:i,compatibilityFunction:r,view:t})))}_updateItems(){this.items.forEach(e=>{e.compatibilityFunction=this.compatibilityFunction,e.view=this.view})}};c([p({aliasOf:"view.map.basemap"})],gu.prototype,"activeBasemap",void 0),c([p()],gu.prototype,"compatibilityFunction",null),c([p({readOnly:!0,type:Zre})],gu.prototype,"items",void 0),c([p()],gu.prototype,"source",void 0),c([Ct("source")],gu.prototype,"castSource",null),c([p({readOnly:!0})],gu.prototype,"state",null),c([p()],gu.prototype,"view",void 0),gu=c([N("esri.widgets.BasemapGallery.BasemapGalleryViewModel")],gu);const RRe=gu,oo={base:"esri-basemap-gallery esri-widget esri-widget--panel-height-only",sourceLoading:"esri-basemap-gallery--source-loading",loader:"esri-basemap-gallery__loader",item:"esri-basemap-gallery__item",itemContainer:"esri-basemap-gallery__item-container",itemTitle:"esri-basemap-gallery__item-title",itemThumbnail:"esri-basemap-gallery__item-thumbnail",selectedItem:"esri-basemap-gallery__item--selected",itemLoading:"esri-basemap-gallery__item--loading",itemError:"esri-basemap-gallery__item--error",emptyMessage:"esri-widget__content--empty",widgetIcon:"esri-icon-basemap",disabled:"esri-disabled"};let Zo=class extends Tn{constructor(e,t){super(e,t),this._handles=new gi,this.activeBasemap=null,this.disabled=!1,this.headingLevel=2,this.iconClass=oo.widgetIcon,this.label=void 0,this.messages=null,this.source=null,this.view=null,this.viewModel=new RRe}initialize(){const e=this._handles;this.own([yh(this,"viewModel.items","change",t=>{const r="basemap-gallery-item-changes",{added:i,moved:n}=t;e.remove(r),e.add([...i,...n].map(s=>s.watch("state",()=>this.scheduleRender())),r),this.scheduleRender()}),e,FN(this,"source",()=>this.viewModel.load())])}render(){const e=this.get("source.state")==="loading",t=this.disabled||this.get("viewModel.state")==="disabled",r=this.get("viewModel.items").toArray().map(this._renderBasemapGalleryItem,this),i={[oo.sourceLoading]:e,[oo.disabled]:t},n=e?oe("div",{class:oo.loader,key:"esri-basemap-gallery__loader"}):null,s=e?null:r.length>0?oe("ul",{class:oo.itemContainer,key:"esri-basemap-gallery__item-container",role:"menu"},r):oe("div",{class:oo.emptyMessage,key:"esri-basemap-gallery__empty-message"},oe(R$,{level:this.headingLevel},this.messages.noBasemaps));return oe("div",{class:this.classes(oo.base,i)},n,s)}_handleClick(e){const t=e.currentTarget["data-item"];t.state==="ready"&&(this.activeBasemap=t.basemap)}_renderBasemapGalleryItem(e){const t=e.get("basemap.thumbnailUrl")||Zt("esri/themes/base/images/basemap-toggle-64.svg"),r=e.get("basemap.title"),i=e.get("basemap.portalItem.snippet"),n=e.get("error.message")||i||r,{viewModel:s}=this,o=!this.disabled&&s.state==="ready"&&e.state==="ready"?0:-1,a=s.basemapEquals(e.basemap,this.activeBasemap),l={[oo.selectedItem]:a,[oo.itemLoading]:e.state==="loading",[oo.itemError]:e.state==="error"};return oe("li",{"aria-selected":a.toString(),bind:this,class:this.classes(oo.item,l),"data-item":e,onkeydown:this._handleClick,onclick:this._handleClick,role:"menuitem",tabIndex:o,title:n},oe("img",{alt:"",class:oo.itemThumbnail,src:t}),oe("div",{class:oo.itemTitle},r))}};c([ze("viewModel.activeBasemap")],Zo.prototype,"activeBasemap",void 0),c([p()],Zo.prototype,"disabled",void 0),c([p()],Zo.prototype,"headingLevel",void 0),c([p()],Zo.prototype,"iconClass",void 0),c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],Zo.prototype,"label",void 0),c([p(),Vn("esri/widgets/BasemapGallery/t9n/BasemapGallery")],Zo.prototype,"messages",void 0),c([ze("viewModel.source")],Zo.prototype,"source",void 0),c([ze("viewModel.view")],Zo.prototype,"view",void 0),c([p()],Zo.prototype,"viewModel",void 0),c([bo()],Zo.prototype,"_handleClick",null),Zo=c([N("esri.widgets.BasemapGallery")],Zo);function Yre(e){if(!e)return null;if(e.isGeographic&&e.wkid){const t=$Ae[e.wkid];if(t)return t}if(e.wkt){const t=LRe(e.wkt);if(t)return t}return null}function LRe(e){const t=IAe.exec(e);if(!t||t.length!==2)return null;const r=t[1].split(",");if(!r||r.length<3)return null;const i=parseFloat(r[1]),n=parseFloat(r[2]);return isNaN(i)||isNaN(n)?null:{a:i,f:n===0?0:1/n}}function NRe(e){const t=Yre(e||Fe.WGS84);if(DRe(t))return t;const r=t.a*(1-t.f);return Object.assign(t,{b:r,eSq:1-(r/t.a)**2,radius:(2*t.a+r)/3,densificationRatio:1e4/((2*t.a+r)/3)})}function DRe(e){return"b"in e&&"eSq"in e&&"radius"in e}function Kre(e){return Yre(e)!==null}function FRe(e,t="meters"){if(!e)throw new Z("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(e.some(i=>!Kre(i.spatialReference)))throw new Z("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");const r=[];for(let i=0;i<e.length;i++){const n=e[i],{spatialReference:s}=n,o=n.type==="polyline"?n.paths:n.rings;let a=0;for(let l=0;l<o.length;l++){const u=o[l];let h=0;for(let d=1;d<u.length;d++){const f=u[d-1][0],m=u[d][0],g=u[d-1][1],b=u[d][1];if(g!==b||f!==m){const w={distance:null};jRe(w,[f,g],[m,b],s),h+=w.distance}}a+=h}a=yo(a,"meters",t),r.push(a)}return r}function jRe(e,t,r,i){const n=t[0]*Fp,s=t[1]*Fp,o=r[0]*Fp,a=r[1]*Fp,{a:l,b:u,f:h,radius:d}=NRe(i),f=o-n,m=Math.atan((1-h)*Math.tan(s)),g=Math.atan((1-h)*Math.tan(a)),b=Math.sin(m),w=Math.cos(m),_=Math.sin(g),x=Math.cos(g);let I,S,T,$,E,C,O,R,D,F,z=1e3,B=f;do{if(O=Math.sin(B),R=Math.cos(B),T=Math.sqrt(x*O*(x*O)+(w*_-b*x*R)*(w*_-b*x*R)),T===0)return e.distance=0,e.azimuth=void 0,e.reverseAzimuth=void 0,e;E=b*_+w*x*R,C=Math.atan2(T,E),D=w*x*O/T,S=1-D*D,$=E-2*b*_/S,isNaN($)&&($=0),F=h/16*S*(4+h*(4-3*S)),I=B,B=f+(1-F)*h*D*(C+F*T*($+F*E*(2*$*$-1)))}while(Math.abs(B-I)>1e-12&&--z>0);if(z===0){const Q=d,le=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-n))*Q,re=o-n,we=Math.sin(re)*Math.cos(a),_e=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(re),Ce=Math.atan2(we,_e);return e.azimuth=Ce/Fp,e.distance=le,e.reverseAzimuth=void 0,e}const y=S*(l*l-u*u)/(u*u),M=y/1024*(256+y*(y*(74-47*y)-128)),A=u*(1+y/16384*(4096+y*(y*(320-175*y)-768)))*(C-M*T*($+M/4*(E*(2*$*$-1)-M/6*$*(4*T*T-3)*(4*$*$-3)))),P=Math.atan2(x*Math.sin(B),w*_-b*x*Math.cos(B)),Y=Math.atan2(w*Math.sin(B),w*_*Math.cos(B)-b*x);return e.azimuth=P/Fp,e.distance=A,e.reverseAzimuth=Y/Fp,e}function VRe(e){const{wkid:t}=e;if(L[t]!=null)return L.values[L[t]];const{wkt:r}=e,i=r.lastIndexOf(",")+1,n=r.lastIndexOf("]]");return parseFloat(r.substring(i,n))}function Qz(e,t){return e&&e.indexOf(t)>-1}function eB(e,t){const{x:r,y:i}=e==="decimal-degrees"?Zg(t,!0):t;return[r,i]}function tB({state:{paddedViewState:e},spatialReference:t,width:r}){return t.isWrappable&&e.worldScreenWidth<r}let Gg=class extends Ze{constructor(e){super(e),this.scaleComputedFrom=tn(),this.view=null}get state(){return this.get("view.ready")&&this.get("view.type")==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t)return null;const r=this._getDistanceInKm(this.view,this.scaleComputedFrom);if(ce(r))return null;if(t==="metric")return this._getScaleBarProps(e,r,"metric");const i=r/1.609;return this._getScaleBarProps(e,i,"non-metric")}_getLocationUnit(){const e=this.get("view.spatialReference"),{isWebMercator:t,wkid:r,wkt:i}=e;return t||Qz(i,"WGS_1984_Web_Mercator")?"decimal-degrees":L[r]!=null||Qz(i,"PROJCS")?"linear-unit":"unknown"}_getDistanceInKm(e,t){const{state:r,spatialReference:i}=e,n=this._getLocationUnit();if(n==="linear-unit")return r.extent.width*VRe(i)/1e3;const[s,o]=this._getScaleMeasuringPoints(e,t),a=n==="decimal-degrees"||i.isGeographic&&!Kre(i)?Fe.WGS84:i,l=new Vi({paths:[[eB(n,s),eB(n,o)]],spatialReference:a}),u=uK(l,10);let h;try{[h]=FRe([u],"kilometers")}catch{return null}return h}_getScaleMeasuringPoints(e,t){const{width:r,height:i,position:n,spatialReference:s}=e;if(tB(e)){const{valid:u}=Ao(s);return[new Ke(u[0],0,s),new Ke(u[1],0,s)]}let o=t.y-n[1];o>i?o=i:o<0&&(o=0);const a=tn(0,o),l=tn(r,o);return[e.toMap(a),e.toMap(l)]}_getScaleBarProps(e,t,r){const{view:i}=this;let n=e*t/(tB(i)?i.state.paddedViewState.worldScreenWidth:i.width),s=r==="metric"?"km":"mi";n<.1&&(s==="mi"?(n*=5280,s="ft"):s==="km"&&(n*=1e3,s="m"));let o=0;for(;n>=1;)n/=10,o++;const a=this._getConstraints(n);if(!a)return null;const{min:l,max:u}=a,h=u/n>=n/l?l:u;return{length:e*(h/n),value:10**o*h,unit:s}}_getConstraints(e){return e>.5?{min:.5,max:1}:e>.3?{min:.3,max:.5}:e>.2?{min:.2,max:.3}:e>.15?{min:.15,max:.2}:e>=.1?{min:.15,max:.1}:void 0}};c([p()],Gg.prototype,"scaleComputedFrom",void 0),c([p({readOnly:!0})],Gg.prototype,"state",null),c([p()],Gg.prototype,"view",void 0),Gg=c([N("esri.widgets.Scalebar.ScaleBarViewModel")],Gg);const URe=Gg,Br={base:"esri-scale-bar esri-widget",labelContainer:"esri-scale-bar__label-container",rulerLabelContainer:"esri-scale-bar__label-container--ruler",lineLabelContainer:"esri-scale-bar__label-container--line",topLabelContainer:"esri-scale-bar__label-container--top",bottomLabelContainer:"esri-scale-bar__label-container--bottom",label:"esri-scale-bar__label",line:"esri-scale-bar__line",topLine:"esri-scale-bar__line--top",bottomLine:"esri-scale-bar__line--bottom",ruler:"esri-scale-bar__ruler",rulerBlock:"esri-scale-bar__ruler-block",barContainer:"esri-scale-bar__bar-container",rulerBarContainer:"esri-scale-bar__bar-container--ruler",lineBarContainer:"esri-scale-bar__bar-container--line",disabled:"esri-disabled"};function vS(e){return 2*e}let ql=class extends Tn{constructor(e,t){super(e,t),this.label=void 0,this.messages=null,this.unit="non-metric",this.view=null,this.viewModel=new URe}initialize(){this.own([hY(this,"view.stationary",()=>this.scheduleRender()),sr(this,["view.center","view.scale","view.zoom"],()=>{this.view.stationary&&this.scheduleRender()})])}set style(e){const t=this.unit==="dual"?"line":e;this._set("style",t)}castStyle(e){return e==="line"?e:"ruler"}castUnit(e){return e==="metric"||e==="dual"?e:"non-metric"}render(){const e=this.get("viewModel.state")==="disabled",t={[Br.disabled]:e};let r,i;if(!e){const{unit:n,style:s}=this,o=n==="metric"||n==="dual",a=50;if(n==="non-metric"||n==="dual"){const l=this.viewModel.getScaleBarProperties(a,"non-metric");l&&(i=s==="ruler"?this._renderRuler(l):this._renderLine(l,"bottom"))}if(o){const l=this.viewModel.getScaleBarProperties(a,"metric");l&&(r=s==="ruler"?this._renderRuler(l):this._renderLine(l,"top"))}}return oe("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Br.base,t)},r,i)}_renderRuler(e){const t=vS(Math.round(e.length)),{messages:r}=this,i=r[e.unit]||r.unknownUnit,n=`${vS(e.value)} ${i}`;return oe("div",{class:this.classes(Br.barContainer,Br.rulerBarContainer),key:"esri-scale-bar__ruler"},oe("div",{class:Br.ruler,styles:{width:`${t}px`}},oe("div",{class:Br.rulerBlock}),oe("div",{class:Br.rulerBlock}),oe("div",{class:Br.rulerBlock}),oe("div",{class:Br.rulerBlock})),oe("div",{class:this.classes(Br.labelContainer,Br.rulerLabelContainer)},oe("div",{class:Br.label},"0"),oe("div",{class:Br.label},n)))}_renderLine(e,t){const{messages:r}=this,i=r[e.unit]||r.unknownUnit,n=`${vS(e.value)} ${i}`,s={[Br.topLabelContainer]:t==="top",[Br.bottomLabelContainer]:t==="bottom"},o=oe("div",{class:this.classes(Br.labelContainer,Br.lineLabelContainer,s),key:"esri-scale-bar__label"},oe("div",{class:Br.label},n)),a={[Br.topLine]:t==="top",[Br.bottomLine]:t==="bottom"},l=vS(Math.round(e.length)),u=oe("div",{class:this.classes(Br.line,a),key:"esri-scale-bar__line",styles:{width:`${l}px`}});return oe("div",{class:this.classes(Br.barContainer,Br.lineBarContainer),key:"esri-scale-bar__line-container"},[u,o])}_handleRootCreateOrUpdate(e){const t=this.viewModel;if(!t)return;const r=e.getBoundingClientRect(),i=r.left+window.pageXOffset,n=r.top+window.pageYOffset,s=tn(i,n);(s.x!==t.scaleComputedFrom.x||s.y!==t.scaleComputedFrom.y)&&(t.scaleComputedFrom=s)}};c([p({aliasOf:{source:"messages.widgetLabel",overridable:!0}})],ql.prototype,"label",void 0),c([p(),Vn("esri/widgets/ScaleBar/t9n/ScaleBar")],ql.prototype,"messages",void 0),c([p()],ql.prototype,"style",null),c([Ct("style")],ql.prototype,"castStyle",null),c([p()],ql.prototype,"unit",void 0),c([Ct("unit")],ql.prototype,"castUnit",null),c([ze("viewModel.view")],ql.prototype,"view",void 0),c([p()],ql.prototype,"viewModel",void 0),ql=c([N("esri.widgets.ScaleBar")],ql);class Bt{wkid;latestWkid;wkt;constructor(t,r){typeof t=="string"?this.wkt=t:(this.wkid=t,this.latestWkid=r)}isEqual(t){return this.isWebMercator()&&t.isWebMercator()?!0:this.wkid===t.wkid&&this.wkt===t.wkt&&this.latestWkid===t.latestWkid}clone(){const t=new Bt("");return t.latestWkid=this.latestWkid,t.wkid=this.wkid,t.wkt=this.wkt,t}lean(){const t={};return this.wkt?t.wkt=this.wkt:(t.wkid=this.wkid,this.latestWkid&&(t.latestWkid=this.latestWkid)),t}isWebMercator(){const t=[900913,3587,54004,41001,102113,102100,3785];return!!(this.wkid&&t.includes(this.wkid)||this.latestWkid&&t.includes(this.latestWkid))}static latLongSR(){return new Bt(4326)}static fromConfig(t){if(t.wkt)return new Bt(t.wkt);if(t.wkid)return new Bt(t.wkid,t.latestWkid);throw new Error("Could not parse config spatial reference object")}static parseSR(t){return t?t instanceof Bt?t.clone():new Bt(t):Bt.latLongSR()}static fromESRI(t){if(t.wkt)return new Bt(t.wkt);{const r=t.toJSON().latestWkid,i=new Bt(t.wkid);return r&&(i.latestWkid=r),i}}toESRI(){return new Fe(this.lean())}static fromGeoJSON(t){const r=Bt.parseGeoJsonCrs(t);return r.substring(0,5)==="EPSG:"?new Bt(parseInt(r.slice(5))):new Bt(r)}static parseGeoJsonCrs(t){if(t){if(t.type==="name"){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=t.properties.name,n=i.match(r);if(n)return"EPSG:"+n[1];if(i.substring(0,7)!=="urn:ogc")return i}}else return"EPSG:4326";return console.error("Encountered unsupported GeoJSON CRS format. Defaulting to lat-long, resuling conversion is likely wrong",t),"EPSG:4326"}toGeoJSON(){const t={type:"name",properties:{name:""}};return this.wkt?t.properties.name=this.wkt:t.properties.name="urn:ogc:def:crs:EPSG::"+(this.latestWkid||this.wkid),t}}class $y{sr;id;constructor(t,r){this.id=t?t.toString():"",this.sr=Bt.parseSR(r)}get type(){return Vt.UNKNOWN}childIdGenerator(t){return`${this.id}-${t}`}toESRI(){throw new Error(`.toESRI not implemented on geometry type ${this.type}`)}toGeoJSON(){throw new Error(`.toGeoJSON not implemented on geometry type ${this.type}`)}invalid(){return this.type===Vt.NONE||this.type===Vt.UNKNOWN}geoJsonFactory(t,r){const i={type:t,coordinates:r};return this.sr&&(i.crs=this.sr.toGeoJSON()),i}}class a1 extends $y{constructor(){super("no_geometry")}get type(){return Vt.NONE}}class Ui extends $y{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=r.slice():this.rawArray=Ui.parseXY(r)}get type(){return Vt.POINT}get x(){return this.rawArray[0]}set x(t){this.rawArray[0]=t}get y(){return this.rawArray[1]}set y(t){this.rawArray[1]=t}toArray(){return this.rawArray.slice()}static parseXY(t){let r;if(Array.isArray(t)&&t.length===2)r=t;else{if(t instanceof Ui)return t.toArray();r=[t.x,t.y]}if(isNaN(r[0])||isNaN(r[1]))throw new Error("Unsupported point format detected. Supported formats are two element array of numbers, or object with x and y properties containing numbers");return[parseFloat(r[0]),parseFloat(r[1])]}static fromESRI(t,r){return new Ui(r,[t.x,t.y],Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new Ke({x:this.x,y:this.y,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Ui(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.POINT,this.toArray())}}class Vs extends $y{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=Vs.arrayDeepCopy(r):r instanceof Vs?this.rawArray=r.toArray():this.rawArray=Vs.parsePointSet(r)}get pointArray(){return this.rawArray.map((t,r)=>new Ui(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new Ui(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=Ui.parseXY(t)}get length(){return this.rawArray.length}toArray(){return Vs.arrayDeepCopy(this.rawArray)}static parsePointSet(t){if(Array.isArray(t)){if(t.length===0)throw new Error("no verticies provided");return t.map(r=>Ui.parseXY(r))}else throw new Error("Bad geometry input encountered")}static arrayDeepCopy(t){return t.map(r=>r.slice())}}class T0 extends Vs{constructor(t,r,i,n){super(t,r,i,n)}get type(){return Vt.MULTIPOINT}static fromESRI(t,r){return new T0(r,t.points,Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new xp({points:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new T0(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.MULTIPOINT,this.toArray())}}class tp extends Vs{constructor(t,r,i,n){if(super(t,r,i,n),this.rawArray.length<2)throw new Error("lines require at least two verticies")}get type(){return Vt.LINESTRING}static fromESRI(t,r){return new tp(r,t.paths[0],Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new Vi({paths:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new tp(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.LINESTRING,this.toArray())}}class nl extends $y{rawArray;constructor(t,r,i,n){if(super(t,r.sr||i),n)this.rawArray=nl.arrayDeepCopy(r);else if(r instanceof nl)this.rawArray=r.toArray();else if(r instanceof Vs)this.rawArray=[r.toArray()];else if(Array.isArray(r)){if(r.length===0)throw new Error("no lines provided");this.rawArray=r.map(s=>Vs.parsePointSet(s))}else throw new Error("invalid lines format for MulitLineString")}get lineArray(){return this.rawArray.map((t,r)=>new tp(this.childIdGenerator(r),t,this.sr,!0))}getAt(t){return new tp(this.childIdGenerator(t),this.rawArray[t],this.sr,!0)}updateAt(t,r){this.rawArray[r]=Vs.parsePointSet(t)}get length(){return this.rawArray.length}get type(){return Vt.MULTILINESTRING}toArray(){return nl.arrayDeepCopy(this.rawArray)}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new nl(r,t.paths,Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new Vi({paths:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new nl(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.MULTILINESTRING,this.toArray())}}class Im extends Vs{constructor(t,r,i,n){if(super(t,r,i,n),Im.closeRing(this.rawArray),this.length<4)throw new Error("Linear Ring must have at least 3 distinct vertices.")}get type(){return Vt.LINEARRING}updateAt(t,r){const i=this.length-1;r===0?super.updateAt(t,i):r===i&&super.updateAt(t,0),super.updateAt(t,r)}static closeRing(t){const r=t[0],i=t[t.length-1];(r[0]!==i[0]||r[1]!==i[1])&&t.push(r.slice())}static fromESRI(t,r){return new Im(r,t.rings[0],Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new _n({rings:[this.toArray()],spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Im(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.POLYGON,[this.toArray()])}}class Ln extends $y{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=Ln.arrayDeepCopy(r):this.rawArray=Ln.parsePolygon(r)}addLinearRings(t){t.forEach(r=>this.rawArray.push(r.toArray()))}get ringArray(){return this.rawArray.map((t,r)=>new Im(this.childIdGenerator(r),t,this.sr,!0))}get type(){return Vt.POLYGON}toArray(){return Ln.arrayDeepCopy(this.rawArray)}static parsePolygon(t){let r=[];if(t instanceof Ln)return t.toArray();if(t instanceof nl)r=t.toArray();else if(t instanceof Vs)r=[t.toArray()];else if(Array.isArray(t)){if(t.length===0)throw new Error("no rings provided");r=t.map(i=>Vs.parsePointSet(i))}else throw new Error("invalid input format for parsePolygon");return r.forEach(i=>Im.closeRing(i)),r}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.slice()))}static fromESRI(t,r){return new Ln(r,t.rings,Bt.fromESRI(t.spatialReference),!0)}toESRI(){return new _n({rings:this.toArray(),spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Ln(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.POLYGON,this.toArray())}}class Jc extends $y{rawArray;constructor(t,r,i,n){super(t,r.sr||i),n?this.rawArray=Jc.arrayDeepCopy(r):this.rawArray=Jc.parseMultiPolygon(r)}addPolygon(t){this.rawArray.push(t.toArray())}get polygonArray(){return this.rawArray.map((t,r)=>new Ln(this.childIdGenerator(r),t,this.sr,!0))}get type(){return Vt.MULTIPOLYGON}toArray(){return Jc.arrayDeepCopy(this.rawArray)}static parseMultiPolygon(t){if(t instanceof Jc)return t.toArray();if(t instanceof Ln)return[t.toArray()];if(t instanceof nl||t instanceof Vs)return[Ln.parsePolygon(t)];if(Array.isArray(t)){if(t.length===0)throw new Error("no polygons provided");return t.map(r=>Ln.parsePolygon(r))}else throw new Error("invalid input format for parseMultiPolygon")}static arrayDeepCopy(t){return t.map(r=>r.map(i=>i.map(n=>n.slice())))}static fromESRI(t,r){return new Jc(r,[t.rings],Bt.fromESRI(t.spatialReference),!0)}toESRI(){const t=[];return this.toArray().forEach(r=>{r.forEach(i=>t.push(i))}),new _n({rings:t,spatialReference:this.sr.toESRI()})}static fromGeoJSON(t,r){return new Jc(r,t.coordinates,Bt.fromGeoJSON(t.crs),!0)}toGeoJSON(){return this.geoJsonFactory(us.MULTIPOLYGON,this.toArray())}}class Ei extends $y{rawMin;rawMax;constructor(t,r,i,n){super(t,r.sr||n),this.rawMin=Ui.parseXY(r),this.rawMax=Ui.parseXY(i)}get type(){return Vt.EXTENT}get xmin(){return this.rawMin[0]}get ymin(){return this.rawMin[1]}get xmax(){return this.rawMax[0]}get ymax(){return this.rawMax[1]}center(){return new Ui(this.id+"_centerPoint",[(this.xmax-this.xmin)/2+this.xmin,(this.ymax-this.ymin)/2+this.ymin],this.sr,!0)}expand(t){return Ei.fromESRI(this.toESRI().expand(t),`${this.id}-expanded`)}clone(){return new Ei(this.id,this.rawMin,this.rawMax,this.sr)}toArray(){return[this.rawMin.slice(),this.rawMax.slice()]}toPolygonArray(){return[[this.rawMin.slice(),[this.xmin,this.ymax],this.rawMax.slice(),[this.xmax,this.ymin],this.rawMin.slice()]]}toPolygon(){return new Ln(this.id,this.toPolygonArray(),this.sr,!0)}static fromParams(t,r,i,n,s,o){return new Ei(t,[r,i],[n,s],o)}static fromConfig(t,r){return new Ei(t,[r.xmin,r.ymin],[r.xmax,r.ymax],Bt.fromConfig(r.spatialReference))}isEqual(t){return t?this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax:!1}static fromESRI(t,r){return Ei.fromParams(r,t.xmin,t.ymin,t.xmax,t.ymax,Bt.fromESRI(t.spatialReference))}toESRI(){return new nt({xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax,spatialReference:this.sr.toESRI()})}static fromArcServer(t,r){return Ei.fromESRI(nt.fromJSON(t),r)}static fromGeoJSON(t,r){if(t.coordinates.length!==5)throw new Error("Extent expected a four vertex polygon from GeoJSON");const i=t.coordinates[0].slice(),n=i.slice();return[1,2,3].forEach(s=>{[0,1].forEach(o=>{const a=t.coordinates[s];i[o]>a[o]&&(i[o]=a[o]),n[o]<a[o]&&(n[o]=a[o])})}),new Ei(r,i,n,Bt.fromGeoJSON(t.crs))}toGeoJSON(){return this.geoJsonFactory(us.POLYGON,this.toPolygonArray())}}class Xm{c;constructor(t){if(!t){this.c=[0,0,0,1];return}if(Array.isArray(t)){const r=t.length;if(r<3||r>4){console.error("Invalid colour value array passed to Colour class"),this.c=[0,0,0,1];return}this.c=t.map(i=>parseInt(i)),r===3&&this.c.push(1)}else if(typeof t=="string"){let r=t.substring(0,1)==="#"?t.substring(1):t;this.c=[0,2,4,6].map(i=>{const n=r.substring(i,i+2);return Xm.hexToInt(n)})}else this.c=[t.r,t.g,t.b,t.a??1];this.c.forEach((r,i)=>{r<0&&(console.error("Negative value passed to colour"),this.c[i]=0),r>255&&(console.error("Rotund value passed to colour"),this.c[i]=255)}),this.c[3]>1&&(this.c[3]=this.c[3]/255)}get rgba(){return this.c.slice()}get hex(){const t=this.rgba;return t[3]=t[3]*255,`#${t.map(r=>Xm.intToHex(r)).join("")}`}get r(){return this.c[0]}get g(){return this.c[1]}get b(){return this.c[2]}get a(){return this.c[3]}toESRI(){return new Le(this.rgba)}static hexToInt(t){return t.length===0?255:parseInt(t,16)}static intToHex(t){const r=t.toString(16);return r.length===1?`0${r}`:r}}class Zc{toOptions(){throw new Error(".toOptions called on BaseStyle. Likely was not implemented on subclass.")}toESRI(){throw new Error(".toESRI called on BaseStyle. Likely was not implemented on subclass.")}static convToPoints(t){if(!(typeof t>"u"))if(typeof t=="string"){let r;const i=t.length;if(i===0)return;const n=t.substring(i-2);return n==="px"?r=parseFloat(t.substring(0,i-2))*1.333333:n==="pt"?r=parseFloat(t.substring(0,i-2)):r=parseFloat(t),r}else return t}}class zd extends Zc{_height;_xOffset;_yOffset;_icon;_width;_size;_colour;_style;_outline;_path;_angle;constructor(t){if(t=t||{style:hc.CIRCLE},super(),this._style=t.style||hc.CIRCLE,t.style===hc.ICON){const r=t;this._icon=r.icon||"",this._height=Zc.convToPoints(r.height)||16.5,this._width=Zc.convToPoints(r.width)||16.5,this._size=0,this._colour=new Xm,this._outline=new Pu,this._path=""}else{const r=t;this._size=Zc.convToPoints(r.size)||12,this._colour=new Xm(r.colour??"#ffffff40"),this._outline=new Pu(r.outline),this._path=this._style===hc.PATH&&r.path||"",this._height=0,this._width=0,this._icon=""}this._xOffset=Zc.convToPoints(t.xOffset)||0,this._yOffset=Zc.convToPoints(t.yOffset)||0,this._angle=t.angle||0}get colour(){return this.propGrouse(!1),this._colour}get styleType(){return this._style}get width(){return this.propGrouse(!0),this._width}get height(){return this.propGrouse(!0),this._height}get size(){return this.propGrouse(!1),this._size}get xOffset(){return this._xOffset}get yOffset(){return this._yOffset}get angle(){return this._angle}get icon(){return this.propGrouse(!0),this._icon}get outline(){return this.propGrouse(!1),this._outline}get path(){return this.propGrouse(!1),this._path}propGrouse(t){this._style===hc.ICON!==t&&console.warn(`Accessed a point style property that is invalid for the style type ${this._style}`)}toOptions(){const t={style:this.styleType,yOffset:this.yOffset,xOffset:this.xOffset,angle:this.angle};return this._style===hc.ICON?{...t,icon:this.icon,width:this.width,height:this.height}:{...t,size:this.size,colour:this.colour.hex,path:this.path}}toESRI(){let t;return this.styleType===hc.ICON?zd.isImageUrl(this.icon)?(t=new Zd,t.url=this.icon,t.width=this.width,t.height=this.height,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new zu,t.color=new Le(this.colour.rgba),t.size=this.width,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle):(t=new zu,t.color=new Le(this.colour.rgba),t.size=this.size,t.xoffset=this.xOffset,t.yoffset=this.yOffset,t.angle=this.angle,t.path=this.path,t.style=this.styleType,t.outline=this.outline.toESRI()),t}static fromESRI(t){const r={xOffset:t.xoffset,yOffset:t.yoffset,angle:t.angle};if(t.type==="simple-marker"){const i=r;i.style=t.style,i.colour=t.color.toRgba(),i.size=t.size,i.path=t.path,i.outline=Pu.fromESRI(t.outline).toOptions()}else{const i=r;i.style=hc.ICON,i.width=t.width,i.height=t.height,i.icon=t.url}return new zd(r)}static fromArcServer(t){return zd.fromESRI(PN(t))}static isImageUrl(t){return!!t.match(/\.(jpeg|jpg|gif|png|swf|svg)$/)||!!t.match(/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+\=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9\!\$\&\'\,\(\)\*\+\,\;\=\-\.\_\~\:\@\/\?\%\s]*\s*$/i)}}class Pu extends Zc{_style;_width;_miter;_cap;_join;_colour;constructor(t){t=t||{},super(),this._style=t.style||Ts.SOLID;const r=Zc.convToPoints(t.width);this._width=typeof r>"u"||r<0?.75:r,this._colour=new Xm(t.colour),this._miter=t.miter??2,this._cap=t.cap||uH.ROUND,this._join=t.join||lH.ROUND}get styleType(){return this._style}get width(){return this._width}get colour(){return this._colour}get miter(){return this._miter}get cap(){return this._cap}get join(){return this._join}toOptions(){return{style:this.styleType,width:this.width,colour:this.colour.hex,miter:this.miter,cap:this.cap,join:this.join}}toESRI(){const t=new jo;return t.width=this.width,t.color=this.colour.toESRI(),t.style=this.styleType,t.cap=this.cap,t.miterLimit=this.miter,t.join=this.join,t}static fromESRI(t){const r={width:t.width,colour:t.color.toRgba(),style:t.style};return new Pu(r)}static fromArcServer(t){return Pu.fromESRI(PN(t))}}class $_ extends Zc{_outlineStyle;_fillColour;_fillStyle;constructor(t){super(),t=t||{},t.fill||(t.fill={}),this._fillColour=new Xm(t.fill.colour),this._fillStyle=t.fill.style||cH.SOLID,this._outlineStyle=new Pu(t.outline)}get fillColour(){return this._fillColour}get fillStyleType(){return this._fillStyle}get outline(){return this._outlineStyle}toOptions(){return{fill:{style:this.fillStyleType,colour:this.fillColour.hex},outline:this.outline.toOptions()}}toESRI(){const t=this.outline.toESRI(),r=new Le(this.fillColour.rgba),i=new Sp;return i.style=this.fillStyleType,i.color=r,i.outline=t,i}static fromESRI(t){const r={fill:{colour:t.color.toRgba(),style:t.style},outline:Pu.fromESRI(t.outline).toOptions()};return new $_(r)}static fromArcServer(t){return $_.fromESRI(PN(t))}}class zRe{Extent=Ei;Graphic=hh;LineString=tp;LineStyle=Pu;LinearRing=Im;MultiLineString=nl;MultiPoint=T0;MultiPolygon=Jc;Point=Ui;PointStyle=zd;Polygon=Ln;PolygonStyle=$_;SpatialReference=Bt;esriMapClickToRamp(t,r){return{mapPoint:Ui.fromESRI(t.mapPoint,r),screenX:t.x,screenY:t.y,button:t.button,clickTime:t.timestamp}}esriMapMouseToRamp(t){return{screenX:t.x,screenY:t.y,button:t.button,moveTime:t.timestamp}}geomRampToEsri(t){return t.toESRI()}geomEsriToRamp(t,r){switch(t.type){case"point":return Ui.fromESRI(t,r);case"polyline":{const i=t;return i.paths.length===1?tp.fromESRI(i,r):nl.fromESRI(i,r)}case"polygon":return Ln.fromESRI(t,r);case"extent":return Ei.fromESRI(t,r);case"multipoint":return T0.fromESRI(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomGeoJsonToRamp(t,r){switch(t.type){case us.POINT:return Ui.fromGeoJSON(t,r);case us.LINESTRING:return tp.fromGeoJSON(t,r);case us.POLYGON:return Ln.fromGeoJSON(t,r);case us.MULTIPOINT:return T0.fromGeoJSON(t,r);case us.MULTILINESTRING:return nl.fromGeoJSON(t,r);case us.MULTIPOLYGON:return Jc.fromGeoJSON(t,r);default:throw new Error(`Encountered unhandled geometry type ${t.type}`)}}geomRampToGeoJson(t){return t.toGeoJSON()}graphicRampToGeoJson(t){let r={};const i={type:"Feature",geometry:this.geomRampToGeoJson(t.geometry),properties:r};return Object.keys(t.attributes).forEach(n=>i.properties[n]=t.attributes[n]),i}graphicGeoJsonToRamp(t,r){if(t.type!=="Feature")throw new Error("Expected input parameter of graphicGeoJsonToRamp to be a GeoJson feature");const i=this.geomGeoJsonToRamp(t.geometry,r),n={};return Object.keys(t.properties.forEach(o=>n[o]=t.properties[o])),new hh(i,"",n)}graphicRampToEsri(t){let r={attributes:{},id:t.id};return r.geometry=this.geomRampToEsri(t.geometry),Object.keys(t.attributes).forEach(i=>r.attributes[i]=t.attributes[i]),t.style&&(r.symbol=this.styleRampToEsri(t.style)),new xn(r)}styleRampToEsri(t){return t.toESRI()}styleEsriToRamp(t){switch(t.type){case"picture-marker":case"simple-marker":return zd.fromESRI(t);case"simple-line":return Pu.fromESRI(t);case"simple-fill":return $_.fromESRI(t);default:return console.error(`Unsupported ESRI symbol type encountered: ${t.type}`),new zd}}serverGeomTypeToRampGeomType(t){if(!t)return Vt.NONE;switch(t){case"esriGeometryPolygon":return Vt.POLYGON;case"esriGeometryPolyline":return Vt.LINESTRING;case"esriGeometryPoint":return Vt.POINT;case"esriGeometryMultipoint":return Vt.MULTIPOINT;case"esriGeometryEnvelope":return Vt.EXTENT;default:return console.error(`Unrecognized server geometry type encountered: ${t}`),Vt.UNKNOWN}}clientGeomTypeToRampGeomType(t){if(!t)return Vt.NONE;switch(t){case"polygon":return Vt.POLYGON;case"polyline":return Vt.LINESTRING;case"point":return Vt.POINT;case"multipoint":return Vt.MULTIPOINT;default:return console.error(`Unrecognized client geometry type encountered: ${t}`),Vt.UNKNOWN}}isImageUrl(t){return zd.isImageUrl(t)}}class E_{layerIdx;name;children;uid;isRoot;constructor(t,r,i="",n=!0){this.layerIdx=t,this.name=i,this.isRoot=n,this.children=[],this.uid=r}findChildByUid(t){if(this.uid===t)return this;{let r;return this.children.some(i=>r=i.findChildByUid(t)),r}}findChildByIdx(t){if(this.layerIdx===t)return this;{let r;return this.children.some(i=>r=i.findChildByIdx(t)),r}}get isLogicalLayer(){return this.layerIdx>-1&&this.children.length===0}get isLayerRoot(){return this.isRoot}}class Xre{minScale;maxScale;constructor(t=0,r=0){this.minScale=t,this.maxScale=r}isOffScale(t){const r={offScale:!1,zoomIn:!1};return t<this.maxScale&&this.maxScale!==0?(r.offScale=!0,r.zoomIn=!1):t>this.minScale&&this.minScale!==0&&(r.offScale=!0,r.zoomIn=!0),r}}class BRe{sql;cache;extent;constructor(){this.sql={},this.extent=void 0,this.cache={}}sqlActiveFilters(t=[]){const r=this.sql,i=Object.keys(r).filter(n=>r[n]);return t.length===0?i:i.filter(n=>t.indexOf(n)===-1)}isActive(){return this.sqlActiveFilters().length>0}getCombinedSql(t=[]){const r=this.sqlActiveFilters(t),i=r.length;return i===0?"":i===1?this.sql[r[0]]:r.map(n=>`(${this.sql[n]})`).join(" AND ")}setSql(t,r){this.sql[t]=r,this.clearCacheSet(t)}getSql(t){return this.sql[t]||""}setExtent(t){t.isEqual(this.extent)||(this.extent=t,this.clearCacheSet(P3.EXTENT))}getCacheKey(t,r){return`_cache$${t.sort().join("$")}${r?"$"+P3.EXTENT:""}$`}getCache(t,r){const i=this.getCacheKey(t,r);return this.cache[i]}setCache(t,r,i){const n=this.getCacheKey(r,i);this.cache[n]=t}cacheActiveKeys(){const t=this.cache;return Object.keys(t).filter(r=>t[r])}clearAllCaches(){this.cache={}}clearCacheSet(t){this.cacheActiveKeys().forEach(r=>{r.indexOf(`$${t}$`)>-1&&delete this.cache[r]})}clearAll(){this.sql={},this.extent=void 0,this.clearAllCaches()}}class A_{id;sr;_defaultExtent;_fullExtent;_maximumExtent;constructor(t,r,i=void 0,n=void 0){this.id=t,this.sr=r.sr.clone(),this._defaultExtent=r.clone(),this._fullExtent=i?.clone(),this._maximumExtent=n?.clone(),i&&!i.sr.isEqual(this.sr)&&console.error(`Full extent provided in extent set has a mismatching spatial reference: ${i.sr}`),n&&!n.sr.isEqual(this.sr)&&console.error(`Maximum extent provided in extent set has a mismatching spatial reference: ${n.sr}`)}get defaultExtent(){return this._defaultExtent}set defaultExtent(t){this._defaultExtent=t.clone()}get fullExtent(){return this._fullExtent?this._fullExtent:this.defaultExtent}set fullExtent(t){this._fullExtent=t.clone()}get maximumExtent(){return this._maximumExtent?this._maximumExtent:this.fullExtent}set maximumExtent(t){this._maximumExtent=t.clone()}static fromConfig(t){return new A_(t.id,Ei.fromConfig(`${t.id}-extent-default`,t.default),t.full!==void 0?Ei.fromConfig(`${t.id}-extent-full`,t.full):void 0,t.maximum!==void 0?Ei.fromConfig(`${t.id}-extent-maximum`,t.maximum):void 0)}clone(){return new A_(this.id,this._defaultExtent,this._fullExtent,this._maximumExtent)}}class Mo{realPromise;resolveMe(){}rejectMe(){}getPromise(){return this.realPromise}constructor(){this.realPromise=new Promise((t,r)=>{this.resolveMe=t,this.rejectMe=r})}}var _8=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Iit(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function GRe(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),t}var qRe=function(t){return HRe(t)&&!WRe(t)};function HRe(e){return!!e&&typeof e=="object"}function WRe(e){var t=Object.prototype.toString.call(e);return t==="[object RegExp]"||t==="[object Date]"||YRe(e)}var JRe=typeof Symbol=="function"&&Symbol.for,ZRe=JRe?Symbol.for("react.element"):60103;function YRe(e){return e.$$typeof===ZRe}function KRe(e){return Array.isArray(e)?[]:{}}function C_(e,t){return t.clone!==!1&&t.isMergeableObject(e)?nv(KRe(e),e,t):e}function XRe(e,t,r){return e.concat(t).map(function(i){return C_(i,r)})}function QRe(e,t){if(!t.customMerge)return nv;var r=t.customMerge(e);return typeof r=="function"?r:nv}function eLe(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter(function(t){return e.propertyIsEnumerable(t)}):[]}function rB(e){return Object.keys(e).concat(eLe(e))}function Qre(e,t){try{return t in e}catch{return!1}}function tLe(e,t){return Qre(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))}function rLe(e,t,r){var i={};return r.isMergeableObject(e)&&rB(e).forEach(function(n){i[n]=C_(e[n],r)}),rB(t).forEach(function(n){tLe(e,n)||(Qre(e,n)&&r.isMergeableObject(t[n])?i[n]=QRe(n,r)(e[n],t[n],r):i[n]=C_(t[n],r))}),i}function nv(e,t,r){r=r||{},r.arrayMerge=r.arrayMerge||XRe,r.isMergeableObject=r.isMergeableObject||qRe,r.cloneUnlessOtherwiseSpecified=C_;var i=Array.isArray(t),n=Array.isArray(e),s=i===n;return s?i?r.arrayMerge(e,t,r):rLe(e,t,r):C_(t,r)}nv.all=function(t,r){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce(function(i,n){return nv(i,n,r)},{})};var iLe=nv,eie=iLe;class nLe{generateUUID(){let t=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{const i=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(r==="x"?i:i&3|8).toString(16)})}convertImageToCanvas(t,r=null,i=!0){r=r||window.document.createElement("canvas");const n=window.document.createElement("img");i&&(n.crossOrigin="anonymous");const s=new Promise((o,a)=>{n.addEventListener("load",()=>{r.width=n.width,r.height=n.height,r.getContext("2d").drawImage(n,0,0),o(r)}),n.addEventListener("error",l=>a(l))});return n.src=t,s}async convertImagetoDataURL(t,r="image/png"){return t.startsWith("data")?t:this.convertImageToCanvas(t).then(i=>i.toDataURL(r)).catch(i=>(console.error("Failed to load crossorigin image",t,i),t))}parseUrlIndex(t){const r={rootUrl:t,index:0},i=/\/(\d+)\/?$/,n=t.match(i);if(n){const s=n[1];r.index=isNaN(parseInt(s))?void 0:parseInt(s),r.rootUrl=t.substr(0,t.length-n[0].length)}else console.warn("Cannot extract layer index from url "+t);return r}}class KI{_url;_base;_query;_queryMap={};constructor(t){this._url=t,[this._base,this._query]=t.split("?").concat(""),this._queryMap=this._query.split("&").reduce((r,i)=>{const[n,s]=i.split("=");return r[n]=s,r},{})}get query(){return this._query}get base(){return this._base}get queryMap(){return this._queryMap}updateQuery(t){const r=eie.all([{},this.queryMap,t]);return`${this.base}${Object.entries(r).filter(([n,s])=>s!==void 0).map(([n,s],o)=>`${o===0?"?":""}${n}=${s}`).join("&")}`}}var x8={exports:{}};(function(e,t){(function(r,i){e.exports=i(),typeof window=="object"&&(r.Terraformer=i())})(_8,function(){var r={},i=6378137,n=57.29577951308232,s=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}},a={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}};function l(k){return Object.prototype.toString.call(k)==="[object Array]"}function u(){var k=Array.prototype.slice.apply(arguments);typeof console!==void 0&&console.warn&&console.warn.apply(console,k)}function h(k,q){for(var H in q)q.hasOwnProperty(H)&&(k[H]=q[H]);return k}function d(k){if(k.type)switch(k.type){case"Point":return[k.coordinates[0],k.coordinates[1],k.coordinates[0],k.coordinates[1]];case"MultiPoint":return g(k.coordinates);case"LineString":return g(k.coordinates);case"MultiLineString":return f(k.coordinates);case"Polygon":return f(k.coordinates);case"MultiPolygon":return m(k.coordinates);case"Feature":return k.geometry?d(k.geometry):null;case"FeatureCollection":return b(k);case"GeometryCollection":return w(k);default:throw new Error("Unknown type: "+k.type)}return null}function f(k){for(var q=null,H=null,ee=null,W=null,G=0;G<k.length;G++)for(var de=k[G],fe=0;fe<de.length;fe++){var Me=de[fe],Oe=Me[0],Ye=Me[1];(q===null||Oe<q)&&(q=Oe),(H===null||Oe>H)&&(H=Oe),(ee===null||Ye<ee)&&(ee=Ye),(W===null||Ye>W)&&(W=Ye)}return[q,ee,H,W]}function m(k){for(var q=null,H=null,ee=null,W=null,G=0;G<k.length;G++)for(var de=k[G],fe=0;fe<de.length;fe++)for(var Me=de[fe],Oe=0;Oe<Me.length;Oe++){var Ye=Me[Oe],Xe=Ye[0],ot=Ye[1];(q===null||Xe<q)&&(q=Xe),(H===null||Xe>H)&&(H=Xe),(ee===null||ot<ee)&&(ee=ot),(W===null||ot>W)&&(W=ot)}return[q,ee,H,W]}function g(k){for(var q=null,H=null,ee=null,W=null,G=0;G<k.length;G++){var de=k[G],fe=de[0],Me=de[1];(q===null||fe<q)&&(q=fe),(H===null||fe>H)&&(H=fe),(ee===null||Me<ee)&&(ee=Me),(W===null||Me>W)&&(W=Me)}return[q,ee,H,W]}function b(k){for(var q=[],H,ee=k.features.length-1;ee>=0;ee--)H=d(k.features[ee].geometry),q.push([H[0],H[1]]),q.push([H[2],H[3]]);return g(q)}function w(k){for(var q=[],H,ee=k.geometries.length-1;ee>=0;ee--)H=d(k.geometries[ee]),q.push([H[0],H[1]]),q.push([H[2],H[3]]);return g(q)}function _(k){var q=d(k);return{x:q[0],y:q[1],w:Math.abs(q[0]-q[2]),h:Math.abs(q[1]-q[3])}}function x(k){return k*n}function I(k){return k*s}function S(k,q){for(var H=0;H<k.length;H++)typeof k[H][0]=="number"&&(k[H]=q(k[H])),typeof k[H]=="object"&&(k[H]=S(k[H],q));return k}function T(k){var q=k[0],H=k[1];return[x(q/i)-Math.floor((x(q/i)+180)/360)*360,x(Math.PI/2-2*Math.atan(Math.exp(-1*H/i)))]}function $(k){var q=k[0],H=Math.max(Math.min(k[1],89.99999),-89.99999);return[I(q)*i,i/2*Math.log((1+Math.sin(I(H)))/(1-Math.sin(I(H))))]}function E(k,q,H){if(k.type==="Point")k.coordinates=q(k.coordinates);else if(k.type==="Feature")k.geometry=E(k.geometry,q,!0);else if(k.type==="FeatureCollection")for(var ee=0;ee<k.features.length;ee++)k.features[ee]=E(k.features[ee],q,!0);else if(k.type==="GeometryCollection")for(var W=0;W<k.geometries.length;W++)k.geometries[W]=E(k.geometries[W],q,!0);else k.coordinates=S(k.coordinates,q);return H||q===$&&(k.crs=o),q===T&&delete k.crs,k}function C(k){return E(k,$)}function O(k){return E(k,T)}function R(k,q){return k<q?-1:k>q?1:0}function D(k,q){return k[0]>q[0]?-1:k[0]<q[0]?1:k[1]>q[1]?-1:k[1]<q[1]?1:0}function F(k,q,H){return R((q[0]-k[0])*(H[1]-k[1])-(H[0]-k[0])*(q[1]-k[1]),0)}function z(k,q){var H=q[0]-k[0],ee=q[1]-k[1];return H*H+ee*ee}function B(k,q){var H=q;for(var ee in k){var W=F(q,H,k[ee]);(W===-1||W===0&&z(q,k[ee])>z(q,H))&&(H=k[ee])}return H}function y(k){if(k.length===0)return[];if(k.length===1)return k;for(var q=[k.sort(D)[0]],H=0;H<q.length;H++){var ee=B(k,q[H]);ee!==q[0]&&q.push(ee)}return q}function M(k){for(var q,H=0;H<k.length-3;H++){var ee=k[H],W=k[H+1],G=k[H+2],de=[W[0]-ee[0],W[1]-ee[1]],fe=G[0]*de[1]-G[1]*de[0]+de[0]*ee[1]-de[1]*ee[0];if(H===0)fe<0?q=!0:q=!1;else if(q&&fe>0||!q&&fe<0)return!1}return!0}function A(k,q){for(var H=!1,ee=-1,W=k.length,G=W-1;++ee<W;G=ee)(k[ee][1]<=q[1]&&q[1]<k[G][1]||k[G][1]<=q[1]&&q[1]<k[ee][1])&&q[0]<(k[G][0]-k[ee][0])*(q[1]-k[ee][1])/(k[G][1]-k[ee][1])+k[ee][0]&&(H=!H);return H}function P(k,q){if(k&&k.length){if(k.length===1)return A(k[0],q);if(A(k[0],q)){for(var H=1;H<k.length;H++)if(A(k[H],q))return!1;return!0}else return!1}else return!1}function Y(k,q,H,ee){var W=(ee[0]-H[0])*(k[1]-H[1])-(ee[1]-H[1])*(k[0]-H[0]),G=(q[0]-k[0])*(k[1]-H[1])-(q[1]-k[1])*(k[0]-H[0]),de=(ee[1]-H[1])*(q[0]-k[0])-(ee[0]-H[0])*(q[1]-k[1]);if(de!==0){var fe=W/de,Me=G/de;if(0<=fe&&fe<=1&&0<=Me&&Me<=1)return!0}return!1}function Q(k){return!isNaN(parseFloat(k))&&isFinite(k)}function le(k,q){if(Q(k[0][0])){if(Q(q[0][0])){for(var H=0;H<k.length-1;H++)for(var ee=0;ee<q.length-1;ee++)if(Y(k[H],k[H+1],q[ee],q[ee+1]))return!0}else for(var W=0;W<q.length;W++)if(le(k,q[W]))return!0}else for(var G=0;G<k.length;G++)if(le(k[G],q))return!0;return!1}function re(k){for(var q=[],H=0;H<k.length;H++){var ee=k[H].slice();we(ee[0],ee[ee.length-1])===!1&&ee.push(ee[0]),q.push(ee)}return q}function we(k,q){for(var H=0;H<k.length;H++)if(k[H]!==q[H])return!1;return!0}function _e(k,q){if(k.length!==q.length)return!1;for(var H=k.slice().sort(D),ee=q.slice().sort(D),W=0;W<H.length;W++){if(H[W].length!==ee[W].length)return!1;for(var G=0;G<H.length;G++)if(H[W][G]!==ee[W][G])return!1}return!0}var Ce=["length"];function Ne(k){if(k)switch(k.type){case"Point":return new ht(k);case"MultiPoint":return new st(k);case"LineString":return new pt(k);case"MultiLineString":return new Pt(k);case"Polygon":return new X(k);case"MultiPolygon":return new te(k);case"Feature":return new he(k);case"FeatureCollection":return new V(k);case"GeometryCollection":return new J(k);default:throw new Error("Unknown type: "+k.type)}}Ne.prototype.toMercator=function(){return C(this)},Ne.prototype.toGeographic=function(){return O(this)},Ne.prototype.envelope=function(){return _(this)},Ne.prototype.bbox=function(){return d(this)},Ne.prototype.convexHull=function(){var k=[],q,H;if(this.type==="Point")return null;if(this.type==="LineString"||this.type==="MultiPoint")if(this.coordinates&&this.coordinates.length>=3)k=this.coordinates;else return null;else if(this.type==="Polygon"||this.type==="MultiLineString")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)k=k.concat(this.coordinates[q]);if(k.length<3)return null}else return null;else if(this.type==="MultiPolygon")if(this.coordinates&&this.coordinates.length>0){for(q=0;q<this.coordinates.length;q++)for(H=0;H<this.coordinates[q].length;H++)k=k.concat(this.coordinates[q][H]);if(k.length<3)return null}else return null;else if(this.type==="Feature"){var ee=new Ne(this.geometry);return ee.convexHull()}return new X({type:"Polygon",coordinates:re([y(k)])})},Ne.prototype.toJSON=function(){var k={};for(var q in this)this.hasOwnProperty(q)&&Ce.indexOf(q)===-1&&(k[q]=this[q]);return k.bbox=d(this),k},Ne.prototype.contains=function(k){return new Ne(k).within(this)},Ne.prototype.within=function(k){var q,H,ee;if(k.type==="Feature"&&(k=k.geometry),k.type==="Point"&&this.type==="Point")return we(this.coordinates,k.coordinates);if(k.type==="MultiLineString"&&this.type==="Point")for(H=0;H<k.coordinates.length;H++){var W={type:"LineString",coordinates:k.coordinates[H]};if(this.within(W))return!0}if((k.type==="LineString"||k.type==="MultiPoint")&&this.type==="Point")for(H=0;H<k.coordinates.length;H++){if(this.coordinates.length!==k.coordinates[H].length)return!1;if(we(this.coordinates,k.coordinates[H]))return!0}if(k.type==="Polygon")if(this.type==="Polygon"){if(k.coordinates.length===this.coordinates.length){for(H=0;H<this.coordinates.length;H++)if(_e(this.coordinates[H],k.coordinates[H]))return!0}return this.coordinates.length&&P(k.coordinates,this.coordinates[0][0])?!le(re(this.coordinates),re(k.coordinates)):!1}else{if(this.type==="Point")return P(k.coordinates,this.coordinates);if(this.type==="LineString"||this.type==="MultiPoint"){if(!this.coordinates||this.coordinates.length===0)return!1;for(H=0;H<this.coordinates.length;H++)if(P(k.coordinates,this.coordinates[H])===!1)return!1;return!0}else if(this.type==="MultiLineString"){for(H=0;H<this.coordinates.length;H++){var G=new pt(this.coordinates[H]);if(G.within(k)===!1)return ee++,!1}return!0}else if(this.type==="MultiPolygon"){for(H=0;H<this.coordinates.length;H++){var de=new Ne({type:"Polygon",coordinates:this.coordinates[H]});if(de.within(k)===!1)return!1}return!0}}if(k.type==="MultiPolygon"){if(this.type==="Point"){if(k.coordinates.length){for(H=0;H<k.coordinates.length;H++)if(q=k.coordinates[H],P(q,this.coordinates)&&le([this.coordinates],k.coordinates)===!1)return!0}return!1}else if(this.type==="Polygon"){for(H=0;H<this.coordinates.length;H++)if(k.coordinates[H].length===this.coordinates.length){for(j=0;j<this.coordinates.length;j++)if(_e(this.coordinates[j],k.coordinates[H][j]))return!0}if(le(this.coordinates,k.coordinates)===!1&&k.coordinates.length){for(H=0;H<k.coordinates.length;H++)q=k.coordinates[H],P(q,this.coordinates[0][0])===!1?ee=!1:ee=!0;return ee}}else if(this.type==="LineString"||this.type==="MultiPoint")for(H=0;H<k.coordinates.length;H++){var fe={type:"Polygon",coordinates:k.coordinates[H]};return!!this.within(fe)}else if(this.type==="MultiLineString"){for(H=0;H<this.coordinates.length;H++){var Me=new pt(this.coordinates[H]);if(Me.within(k)===!1)return!1}return!0}else if(this.type==="MultiPolygon"){for(H=0;H<k.coordinates.length;H++){var Oe={type:"Polygon",coordinates:k.coordinates[H]};if(this.within(Oe)===!1)return!1}return!0}}return!1},Ne.prototype.intersects=function(k){k.type==="Feature"&&(k=k.geometry);var q=new Ne(k);if(this.within(k)||q.within(this))return!0;if(this.type!=="Point"&&this.type!=="MultiPoint"&&k.type!=="Point"&&k.type!=="MultiPoint")return le(this.coordinates,k.coordinates);if(this.type==="Feature"){var H=new Ne(this.geometry);return H.intersects(k)}return u("Type "+this.type+" to "+k.type+" intersection is not supported by intersects"),!1};function ht(k){var q=Array.prototype.slice.call(arguments);if(k&&k.type==="Point"&&k.coordinates)h(this,k);else if(k&&l(k))this.coordinates=k;else if(q.length>=2)this.coordinates=q;else throw"Terraformer: invalid input for Terraformer.Point";this.type="Point"}ht.prototype=new Ne,ht.prototype.constructor=ht;function st(k){if(k&&k.type==="MultiPoint"&&k.coordinates)h(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiPoint";this.type="MultiPoint"}st.prototype=new Ne,st.prototype.constructor=st,st.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates]);return this},st.prototype.addPoint=function(k){return this.coordinates.push(k),this},st.prototype.insertPoint=function(k,q){return this.coordinates.splice(q,0,k),this},st.prototype.removePoint=function(k){return typeof k=="number"?this.coordinates.splice(k,1):this.coordinates.splice(this.coordinates.indexOf(k),1),this},st.prototype.get=function(k){return new ht(this.coordinates[k])};function pt(k){if(k&&k.type==="LineString"&&k.coordinates)h(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.LineString";this.type="LineString"}pt.prototype=new Ne,pt.prototype.constructor=pt,pt.prototype.addVertex=function(k){return this.coordinates.push(k),this},pt.prototype.insertVertex=function(k,q){return this.coordinates.splice(q,0,k),this},pt.prototype.removeVertex=function(k){return this.coordinates.splice(k,1),this};function Pt(k){if(k&&k.type==="MultiLineString"&&k.coordinates)h(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiLineString";this.type="MultiLineString"}Pt.prototype=new Ne,Pt.prototype.constructor=Pt,Pt.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates])},Pt.prototype.get=function(k){return new pt(this.coordinates[k])};function X(k){if(k&&k.type==="Polygon"&&k.coordinates)h(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.Polygon";this.type="Polygon"}X.prototype=new Ne,X.prototype.constructor=X,X.prototype.addVertex=function(k){return this.insertVertex(k,this.coordinates[0].length-1),this},X.prototype.insertVertex=function(k,q){return this.coordinates[0].splice(q,0,k),this},X.prototype.removeVertex=function(k){return this.coordinates[0].splice(k,1),this},X.prototype.close=function(){this.coordinates=re(this.coordinates)},X.prototype.hasHoles=function(){return this.coordinates.length>1},X.prototype.holes=function(){if(holes=[],this.hasHoles())for(var k=1;k<this.coordinates.length;k++)holes.push(new X([this.coordinates[k]]));return holes};function te(k){if(k&&k.type==="MultiPolygon"&&k.coordinates)h(this,k);else if(l(k))this.coordinates=k;else throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.type="MultiPolygon"}te.prototype=new Ne,te.prototype.constructor=te,te.prototype.forEach=function(k){for(var q=0;q<this.coordinates.length;q++)k.apply(this,[this.coordinates[q],q,this.coordinates])},te.prototype.get=function(k){return new X(this.coordinates[k])},te.prototype.close=function(){var k=[];return this.forEach(function(q){k.push(re(q))}),this.coordinates=k,this};function he(k){if(k&&k.type==="Feature")h(this,k);else if(k&&k.type&&k.coordinates)this.geometry=k;else throw"Terraformer: invalid input for Terraformer.Feature";this.type="Feature"}he.prototype=new Ne,he.prototype.constructor=he;function V(k){if(k&&k.type==="FeatureCollection"&&k.features)h(this,k);else if(l(k))this.features=k;else throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.type="FeatureCollection"}V.prototype=new Ne,V.prototype.constructor=V,V.prototype.forEach=function(k){for(var q=0;q<this.features.length;q++)k.apply(this,[this.features[q],q,this.features])},V.prototype.get=function(k){var q;return this.forEach(function(H){H.id===k&&(q=H)}),new he(q)};function J(k){if(k&&k.type==="GeometryCollection"&&k.geometries)h(this,k);else if(l(k))this.geometries=k;else if(k.coordinates&&k.type)this.type="GeometryCollection",this.geometries=[k];else throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection"}J.prototype=new Ne,J.prototype.constructor=J,J.prototype.forEach=function(k){for(var q=0;q<this.geometries.length;q++)k.apply(this,[this.geometries[q],q,this.geometries])},J.prototype.get=function(k){return new Ne(this.geometries[k])};function ne(k,q,H){for(var ee=$(k),W=H||64,G={type:"Polygon",coordinates:[[]]},de=1;de<=W;de++){var fe=de*(360/W)*Math.PI/180;G.coordinates[0].push([ee[0]+q*Math.cos(fe),ee[1]+q*Math.sin(fe)])}return G.coordinates=re(G.coordinates),O(G)}function pe(k,q,H){var ee=H||64,W=q||250;if(!k||k.length<2||!W||!ee)throw new Error("Terraformer: missing parameter for Terraformer.Circle");h(this,new he({type:"Feature",geometry:ne(k,W,ee),properties:{radius:W,center:k,steps:ee}}))}return pe.prototype=new Ne,pe.prototype.constructor=pe,pe.prototype.recalculate=function(){return this.geometry=ne(this.properties.center,this.properties.radius,this.properties.steps),this},pe.prototype.center=function(k){return k&&(this.properties.center=k,this.recalculate()),this.properties.center},pe.prototype.radius=function(k){return k&&(this.properties.radius=k,this.recalculate()),this.properties.radius},pe.prototype.steps=function(k){return k&&(this.properties.steps=k,this.recalculate()),this.properties.steps},pe.prototype.toJSON=function(){var k=Ne.prototype.toJSON.call(this);return k},r.Primitive=Ne,r.Point=ht,r.MultiPoint=st,r.LineString=pt,r.MultiLineString=Pt,r.Polygon=X,r.MultiPolygon=te,r.Feature=he,r.FeatureCollection=V,r.GeometryCollection=J,r.Circle=pe,r.toMercator=C,r.toGeographic=O,r.Tools={},r.Tools.positionToMercator=$,r.Tools.positionToGeographic=T,r.Tools.applyConverter=E,r.Tools.toMercator=C,r.Tools.toGeographic=O,r.Tools.createCircle=ne,r.Tools.calculateBounds=d,r.Tools.calculateEnvelope=_,r.Tools.coordinatesContainPoint=A,r.Tools.polygonContainsPoint=P,r.Tools.arraysIntersectArrays=le,r.Tools.coordinatesContainPoint=A,r.Tools.coordinatesEqual=_e,r.Tools.convexHull=y,r.Tools.isConvex=M,r.MercatorCRS=o,r.GeographicCRS=a,r})})(x8);function sLe(e){e("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),e("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),e("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),e.WGS84=e["EPSG:4326"],e["EPSG:3785"]=e["EPSG:3857"],e.GOOGLE=e["EPSG:3857"],e["EPSG:900913"]=e["EPSG:3857"],e["EPSG:102113"]=e["EPSG:3857"]}var Qm=1,ey=2,oLe=4,cR=5,Pw=484813681109536e-20,Pe=Math.PI/2,aLe=.16666666666666666,lLe=.04722222222222222,uLe=.022156084656084655,Be=1e-10,rs=.017453292519943295,Bd=57.29577951308232,mr=Math.PI/4,hR=Math.PI*2,mi=3.14159265359,io={};io.greenwich=0;io.lisbon=-9.131906111111;io.paris=2.337229166667;io.bogota=-74.080916666667;io.madrid=-3.687938888889;io.rome=12.452333333333;io.bern=7.439583333333;io.jakarta=106.807719444444;io.ferro=-17.666666666667;io.brussels=4.367975;io.stockholm=18.058277777778;io.athens=23.7163375;io.oslo=10.722916666667;var cLe={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},iB=/[\s_\-\/\(\)]/g;function pp(e,t){if(e[t])return e[t];for(var r=Object.keys(e),i=t.toLowerCase().replace(iB,""),n=-1,s,o;++n<r.length;)if(s=r[n],o=s.toLowerCase().replace(iB,""),o===i)return e[s]}function dR(e){var t={},r=e.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var u=l.split("=");return u.push(!0),a[u[0].toLowerCase()]=u[1],a},{}),i,n,s,o={proj:"projName",datum:"datumCode",rf:function(a){t.rf=parseFloat(a)},lat_0:function(a){t.lat0=a*rs},lat_1:function(a){t.lat1=a*rs},lat_2:function(a){t.lat2=a*rs},lat_ts:function(a){t.lat_ts=a*rs},lon_0:function(a){t.long0=a*rs},lon_1:function(a){t.long1=a*rs},lon_2:function(a){t.long2=a*rs},alpha:function(a){t.alpha=parseFloat(a)*rs},lonc:function(a){t.longc=a*rs},x_0:function(a){t.x0=parseFloat(a)},y_0:function(a){t.y0=parseFloat(a)},k_0:function(a){t.k0=parseFloat(a)},k:function(a){t.k0=parseFloat(a)},a:function(a){t.a=parseFloat(a)},b:function(a){t.b=parseFloat(a)},r_a:function(){t.R_A=!0},zone:function(a){t.zone=parseInt(a,10)},south:function(){t.utmSouth=!0},towgs84:function(a){t.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){t.to_meter=parseFloat(a)},units:function(a){t.units=a;var l=pp(cLe,a);l&&(t.to_meter=l.to_meter)},from_greenwich:function(a){t.from_greenwich=a*rs},pm:function(a){var l=pp(io,a);t.from_greenwich=(l||parseFloat(a))*rs},nadgrids:function(a){a==="@null"?t.datumCode="none":t.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(t.axis=a)}};for(i in r)n=r[i],i in o?(s=o[i],typeof s=="function"?s(n):t[s]=n):t[i]=n;return typeof t.datumCode=="string"&&t.datumCode!=="WGS84"&&(t.datumCode=t.datumCode.toLowerCase()),t}var k_=1,tie=2,rie=3,XI=4,iie=5,S8=-1,hLe=/\s/,dLe=/[A-Za-z]/,pLe=/[A-Za-z84_]/,H$=/[,\]]/,nie=/[\d\.E\-\+]/;function Ih(e){if(typeof e!="string")throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=k_}Ih.prototype.readCharicter=function(){var e=this.text[this.place++];if(this.state!==XI)for(;hLe.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case k_:return this.neutral(e);case tie:return this.keyword(e);case XI:return this.quoted(e);case iie:return this.afterquote(e);case rie:return this.number(e);case S8:return}};Ih.prototype.afterquote=function(e){if(e==='"'){this.word+='"',this.state=XI;return}if(H$.test(e)){this.word=this.word.trim(),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in afterquote yet, index '+this.place)};Ih.prototype.afterItem=function(e){if(e===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=k_;return}if(e==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=k_,this.currentObject=this.stack.pop(),this.currentObject||(this.state=S8);return}};Ih.prototype.number=function(e){if(nie.test(e)){this.word+=e;return}if(H$.test(e)){this.word=parseFloat(this.word),this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in number yet, index '+this.place)};Ih.prototype.quoted=function(e){if(e==='"'){this.state=iie;return}this.word+=e};Ih.prototype.keyword=function(e){if(pLe.test(e)){this.word+=e;return}if(e==="["){var t=[];t.push(this.word),this.level++,this.root===null?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,this.state=k_;return}if(H$.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in keyword yet, index '+this.place)};Ih.prototype.neutral=function(e){if(dLe.test(e)){this.word=e,this.state=tie;return}if(e==='"'){this.word="",this.state=XI;return}if(nie.test(e)){this.word=e,this.state=rie;return}if(H$.test(e)){this.afterItem(e);return}throw new Error(`havn't handled "`+e+'" in neutral yet, index '+this.place)};Ih.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===S8)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function fLe(e){var t=new Ih(e);return t.output()}function nB(e,t,r){Array.isArray(t)&&(r.unshift(t),t=null);var i=t?{}:e,n=r.reduce(function(s,o){return a0(o,s),s},i);t&&(e[t]=n)}function a0(e,t){if(!Array.isArray(e)){t[e]=!0;return}var r=e.shift();if(r==="PARAMETER"&&(r=e.shift()),e.length===1){if(Array.isArray(e[0])){t[r]={},a0(e[0],t[r]);return}t[r]=e[0];return}if(!e.length){t[r]=!0;return}if(r==="TOWGS84"){t[r]=e;return}if(r==="AXIS"){r in t||(t[r]=[]),t[r].push(e);return}Array.isArray(r)||(t[r]={});var i;switch(r){case"UNIT":case"PRIMEM":case"VERT_DATUM":t[r]={name:e[0].toLowerCase(),convert:e[1]},e.length===3&&a0(e[2],t[r]);return;case"SPHEROID":case"ELLIPSOID":t[r]={name:e[0],a:e[1],rf:e[2]},e.length===4&&a0(e[3],t[r]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":e[0]=["name",e[0]],nB(t,r,e);return;default:for(i=-1;++i<e.length;)if(!Array.isArray(e[i]))return a0(e,t[r]);return nB(t,r,e)}}var mLe=.017453292519943295;function yLe(e,t){var r=t[0],i=t[1];!(r in e)&&i in e&&(e[r]=e[i],t.length===3&&(e[r]=t[2](e[r])))}function uc(e){return e*mLe}function gLe(e){if(e.type==="GEOGCS"?e.projName="longlat":e.type==="LOCAL_CS"?(e.projName="identity",e.local=!0):typeof e.PROJECTION=="object"?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.AXIS){for(var t="",r=0,i=e.AXIS.length;r<i;++r){var n=[e.AXIS[r][0].toLowerCase(),e.AXIS[r][1].toLowerCase()];n[0].indexOf("north")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="north"?t+="n":n[0].indexOf("south")!==-1||(n[0]==="y"||n[0]==="lat")&&n[1]==="south"?t+="s":n[0].indexOf("east")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="east"?t+="e":(n[0].indexOf("west")!==-1||(n[0]==="x"||n[0]==="lon")&&n[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(e.axis=t)}e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),e.units==="metre"&&(e.units="meter"),e.UNIT.convert&&(e.type==="GEOGCS"?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var s=e.GEOGCS;e.type==="GEOGCS"&&(s=e),s&&(s.DATUM?e.datumCode=s.DATUM.name.toLowerCase():e.datumCode=s.name.toLowerCase(),e.datumCode.slice(0,2)==="d_"&&(e.datumCode=e.datumCode.slice(2)),(e.datumCode==="new_zealand_geodetic_datum_1949"||e.datumCode==="new_zealand_1949")&&(e.datumCode="nzgd49"),(e.datumCode==="wgs_1984"||e.datumCode==="world_geodetic_system_1984")&&(e.PROJECTION==="Mercator_Auxiliary_Sphere"&&(e.sphere=!0),e.datumCode="wgs84"),e.datumCode.slice(-6)==="_ferro"&&(e.datumCode=e.datumCode.slice(0,-6)),e.datumCode.slice(-8)==="_jakarta"&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(e.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),e.ellps.toLowerCase().slice(0,13)==="international"&&(e.ellps="intl"),e.a=s.DATUM.SPHEROID.a,e.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(e.datum_params=s.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),e.datumCode==="ch1903+"&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a);function o(u){var h=e.to_meter||1;return u*h}var a=function(u){return yLe(e,u)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",uc],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",uc],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",uc],["lat0","latitude_of_origin",uc],["lat0","standard_parallel_1",uc],["lat1","standard_parallel_1",uc],["lat2","standard_parallel_2",uc],["azimuth","Azimuth"],["alpha","azimuth",uc],["srsCode","name"]];l.forEach(a),!e.long0&&e.longc&&(e.projName==="Albers_Conic_Equal_Area"||e.projName==="Lambert_Azimuthal_Equal_Area")&&(e.long0=e.longc),!e.lat_ts&&e.lat1&&(e.projName==="Stereographic_South_Pole"||e.projName==="Polar Stereographic (variant B)")&&(e.lat0=uc(e.lat1>0?90:-90),e.lat_ts=e.lat1)}function sie(e){var t=fLe(e),r=t.shift(),i=t.shift();t.unshift(["name",i]),t.unshift(["type",r]);var n={};return a0(t,n),gLe(n),n}function is(e){var t=this;if(arguments.length===2){var r=arguments[1];typeof r=="string"?r.charAt(0)==="+"?is[e]=dR(arguments[1]):is[e]=sie(arguments[1]):is[e]=r}else if(arguments.length===1){if(Array.isArray(e))return e.map(function(i){Array.isArray(i)?is.apply(t,i):is(i)});if(typeof e=="string"){if(e in is)return is[e]}else"EPSG"in e?is["EPSG:"+e.EPSG]=e:"ESRI"in e?is["ESRI:"+e.ESRI]=e:"IAU2000"in e?is["IAU2000:"+e.IAU2000]=e:console.log(e);return}}sLe(is);function vLe(e){return typeof e=="string"}function bLe(e){return e in is}var wLe=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function _Le(e){return wLe.some(function(t){return e.indexOf(t)>-1})}var xLe=["3857","900913","3785","102113"];function SLe(e){var t=pp(e,"authority");if(!!t){var r=pp(t,"epsg");return r&&xLe.indexOf(r)>-1}}function MLe(e){var t=pp(e,"extension");if(!!t)return pp(t,"proj4")}function ILe(e){return e[0]==="+"}function TLe(e){if(vLe(e)){if(bLe(e))return is[e];if(_Le(e)){var t=sie(e);if(SLe(t))return is["EPSG:3857"];var r=MLe(t);return r?dR(r):t}if(ILe(e))return dR(e)}else return e}function sB(e,t){e=e||{};var r,i;if(!t)return e;for(i in t)r=t[i],r!==void 0&&(e[i]=r);return e}function qu(e,t,r){var i=e*t;return r/Math.sqrt(1-i*i)}function R2(e){return e<0?-1:1}function We(e){return Math.abs(e)<=mi?e:e-R2(e)*hR}function fl(e,t,r){var i=e*r,n=.5*e;return i=Math.pow((1-i)/(1+i),n),Math.tan(.5*(Pe-t))/i}function O_(e,t){for(var r=.5*e,i,n,s=Pe-2*Math.atan(t),o=0;o<=15;o++)if(i=e*Math.sin(s),n=Pe-2*Math.atan(t*Math.pow((1-i)/(1+i),r))-s,s+=n,Math.abs(n)<=1e-10)return s;return-9999}function $Le(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=qu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function ELe(e){var t=e.x,r=e.y;if(r*Bd>90&&r*Bd<-90&&t*Bd>180&&t*Bd<-180)return null;var i,n;if(Math.abs(Math.abs(r)-Pe)<=Be)return null;if(this.sphere)i=this.x0+this.a*this.k0*We(t-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(mr+.5*r));else{var s=Math.sin(r),o=fl(this.e,r,s);i=this.x0+this.a*this.k0*We(t-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return e.x=i,e.y=n,e}function ALe(e){var t=e.x-this.x0,r=e.y-this.y0,i,n;if(this.sphere)n=Pe-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(n=O_(this.e,s),n===-9999)return null}return i=We(this.long0+t/(this.a*this.k0)),e.x=i,e.y=n,e}var CLe=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"],kLe={init:$Le,forward:ELe,inverse:ALe,names:CLe};function OLe(){}function oB(e){return e}var PLe=["longlat","identity"],RLe={init:OLe,forward:oB,inverse:oB,names:PLe},LLe=[kLe,RLe],v3={},QI=[];function oie(e,t){var r=QI.length;return e.names?(QI[r]=e,e.names.forEach(function(i){v3[i.toLowerCase()]=r}),this):(console.log(t),!0)}function NLe(e){if(!e)return!1;var t=e.toLowerCase();if(typeof v3[t]<"u"&&QI[v3[t]])return QI[v3[t]]}function DLe(){LLe.forEach(oie)}var FLe={start:DLe,add:oie,get:NLe},$t={};$t.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};$t.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};$t.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};$t.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};$t.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};$t.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};$t.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};$t.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};$t.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};$t.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};$t.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};$t.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};$t.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};$t.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};$t.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};$t.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};$t.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};$t.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};$t.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};$t.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};$t.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};$t.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};$t.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};$t.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};$t.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};$t.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};$t.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};$t.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};$t.hough={a:6378270,rf:297,ellipseName:"Hough"};$t.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};$t.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};$t.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};$t.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};$t.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};$t.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};$t.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};$t.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};$t.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};$t.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};$t.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};$t.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var jLe=$t.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};$t.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function VLe(e,t,r,i){var n=e*e,s=t*t,o=(n-s)/n,a=0;i?(e*=1-o*(aLe+o*(lLe+o*uLe)),n=e*e,o=0):a=Math.sqrt(o);var l=(n-s)/s;return{es:o,e:a,ep2:l}}function ULe(e,t,r,i,n){if(!e){var s=pp($t,i);s||(s=jLe),e=s.a,t=s.b,r=s.rf}return r&&!t&&(t=(1-1/r)*e),(r===0||Math.abs(e-t)<Be)&&(n=!0,t=e),{a:e,b:t,rf:r,sphere:n}}var an={};an.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};an.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};an.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};an.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};an.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};an.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};an.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};an.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"};an.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};an.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};an.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};an.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};an.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};an.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};an.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};an.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};an.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function zLe(e,t,r,i,n,s){var o={};return e===void 0||e==="none"?o.datum_type=cR:o.datum_type=oLe,t&&(o.datum_params=t.map(parseFloat),(o.datum_params[0]!==0||o.datum_params[1]!==0||o.datum_params[2]!==0)&&(o.datum_type=Qm),o.datum_params.length>3&&(o.datum_params[3]!==0||o.datum_params[4]!==0||o.datum_params[5]!==0||o.datum_params[6]!==0)&&(o.datum_type=ey,o.datum_params[3]*=Pw,o.datum_params[4]*=Pw,o.datum_params[5]*=Pw,o.datum_params[6]=o.datum_params[6]/1e6+1)),o.a=r,o.b=i,o.es=n,o.ep2=s,o}function Ru(e,t){if(!(this instanceof Ru))return new Ru(e);t=t||function(l){if(l)throw l};var r=TLe(e);if(typeof r!="object"){t(e);return}var i=Ru.projections.get(r.projName);if(!i){t(e);return}if(r.datumCode&&r.datumCode!=="none"){var n=pp(an,r.datumCode);n&&(r.datum_params=n.towgs84?n.towgs84.split(","):null,r.ellps=n.ellipse,r.datumName=n.datumName?n.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84";var s=ULe(r.a,r.b,r.rf,r.ellps,r.sphere),o=VLe(s.a,s.b,s.rf,r.R_A),a=r.datum||zLe(r.datumCode,r.datum_params,s.a,s.b,o.es,o.ep2);sB(this,r),sB(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=a,this.init(),t(null,this)}Ru.projections=FLe;Ru.projections.start();function BLe(e,t){return e.datum_type!==t.datum_type||e.a!==t.a||Math.abs(e.es-t.es)>5e-11?!1:e.datum_type===Qm?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type===ey?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6]:!0}function aie(e,t,r){var i=e.x,n=e.y,s=e.z?e.z:0,o,a,l,u;if(n<-Pe&&n>-1.001*Pe)n=-Pe;else if(n>Pe&&n<1.001*Pe)n=Pe;else{if(n<-Pe)return{x:-1/0,y:-1/0,z:e.z};if(n>Pe)return{x:1/0,y:1/0,z:e.z}}return i>Math.PI&&(i-=2*Math.PI),a=Math.sin(n),u=Math.cos(n),l=a*a,o=r/Math.sqrt(1-t*l),{x:(o+s)*u*Math.cos(i),y:(o+s)*u*Math.sin(i),z:(o*(1-t)+s)*a}}function lie(e,t,r,i){var n=1e-12,s=n*n,o=30,a,l,u,h,d,f,m,g,b,w,_,x,I,S=e.x,T=e.y,$=e.z?e.z:0,E,C,O;if(a=Math.sqrt(S*S+T*T),l=Math.sqrt(S*S+T*T+$*$),a/r<n){if(E=0,l/r<n)return C=Pe,O=-i,{x:e.x,y:e.y,z:e.z}}else E=Math.atan2(T,S);u=$/l,h=a/l,d=1/Math.sqrt(1-t*(2-t)*h*h),g=h*(1-t)*d,b=u*d,I=0;do I++,m=r/Math.sqrt(1-t*b*b),O=a*g+$*b-m*(1-t*b*b),f=t*m/(m+O),d=1/Math.sqrt(1-f*(2-f)*h*h),w=h*(1-f)*d,_=u*d,x=_*g-w*b,g=w,b=_;while(x*x>s&&I<o);return C=Math.atan(_/Math.abs(w)),{x:E,y:C,z:O}}function GLe(e,t,r){if(t===Qm)return{x:e.x+r[0],y:e.y+r[1],z:e.z+r[2]};if(t===ey){var i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6];return{x:u*(e.x-l*e.y+a*e.z)+i,y:u*(l*e.x+e.y-o*e.z)+n,z:u*(-a*e.x+o*e.y+e.z)+s}}}function qLe(e,t,r){if(t===Qm)return{x:e.x-r[0],y:e.y-r[1],z:e.z-r[2]};if(t===ey){var i=r[0],n=r[1],s=r[2],o=r[3],a=r[4],l=r[5],u=r[6],h=(e.x-i)/u,d=(e.y-n)/u,f=(e.z-s)/u;return{x:h+l*d-a*f,y:-l*h+d+o*f,z:a*h-o*d+f}}}function bS(e){return e===Qm||e===ey}function HLe(e,t,r){return BLe(e,t)||e.datum_type===cR||t.datum_type===cR||e.es===t.es&&e.a===t.a&&!bS(e.datum_type)&&!bS(t.datum_type)?r:(r=aie(r,e.es,e.a),bS(e.datum_type)&&(r=GLe(r,e.datum_type,e.datum_params)),bS(t.datum_type)&&(r=qLe(r,t.datum_type,t.datum_params)),lie(r,t.es,t.a,t.b))}function aB(e,t,r){var i=r.x,n=r.y,s=r.z||0,o,a,l,u={};for(l=0;l<3;l++)if(!(t&&l===2&&r.z===void 0))switch(l===0?(o=i,a="x"):l===1?(o=n,a="y"):(o=s,a="z"),e.axis[l]){case"e":u[a]=o;break;case"w":u[a]=-o;break;case"n":u[a]=o;break;case"s":u[a]=-o;break;case"u":r[a]!==void 0&&(u.z=o);break;case"d":r[a]!==void 0&&(u.z=-o);break;default:return null}return u}function uie(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t}function WLe(e){lB(e.x),lB(e.y)}function lB(e){if(typeof Number.isFinite=="function"){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if(typeof e!="number"||e!==e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function JLe(e,t){return(e.datum.datum_type===Qm||e.datum.datum_type===ey)&&t.datumCode!=="WGS84"||(t.datum.datum_type===Qm||t.datum.datum_type===ey)&&e.datumCode!=="WGS84"}function eT(e,t,r){var i;return Array.isArray(r)&&(r=uie(r)),WLe(r),e.datum&&t.datum&&JLe(e,t)&&(i=new Ru("WGS84"),r=eT(e,i,r),e=i),e.axis!=="enu"&&(r=aB(e,!1,r)),e.projName==="longlat"?r={x:r.x*rs,y:r.y*rs,z:r.z||0}:(e.to_meter&&(r={x:r.x*e.to_meter,y:r.y*e.to_meter,z:r.z||0}),r=e.inverse(r)),e.from_greenwich&&(r.x+=e.from_greenwich),r=HLe(e.datum,t.datum,r),t.from_greenwich&&(r={x:r.x-t.from_greenwich,y:r.y,z:r.z||0}),t.projName==="longlat"?r={x:r.x*Bd,y:r.y*Bd,z:r.z||0}:(r=t.forward(r),t.to_meter&&(r={x:r.x/t.to_meter,y:r.y/t.to_meter,z:r.z||0})),t.axis!=="enu"?aB(t,!0,r):r}var uB=Ru("WGS84");function Z5(e,t,r){var i,n,s;return Array.isArray(r)?(i=eT(e,t,r)||{x:NaN,y:NaN},r.length>2?typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"?typeof i.z=="number"?[i.x,i.y,i.z].concat(r.splice(3)):[i.x,i.y,r[2]].concat(r.splice(3)):[i.x,i.y].concat(r.splice(2)):[i.x,i.y]):(n=eT(e,t,r),s=Object.keys(r),s.length===2||s.forEach(function(o){if(typeof e.name<"u"&&e.name==="geocent"||typeof t.name<"u"&&t.name==="geocent"){if(o==="x"||o==="y"||o==="z")return}else if(o==="x"||o==="y")return;n[o]=r[o]}),n)}function cB(e){return e instanceof Ru?e:e.oProj?e.oProj:Ru(e)}function Pr(e,t,r){e=cB(e);var i=!1,n;return typeof t>"u"?(t=e,e=uB,i=!0):(typeof t.x<"u"||Array.isArray(t))&&(r=t,t=e,e=uB,i=!0),t=cB(t),r?Z5(e,t,r):(n={forward:function(s){return Z5(e,t,s)},inverse:function(s){return Z5(t,e,s)}},i&&(n.oProj=t),n)}var hB=6,cie="AJSAJS",hie="AFAFAF",l0=65,$s=73,oa=79,Qb=86,ew=90,ZLe={forward:die,inverse:YLe,toPoint:pie};function die(e,t){return t=t||5,QLe(KLe({lat:e[1],lon:e[0]}),t)}function YLe(e){var t=M8(mie(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat,t.lon,t.lat]:[t.left,t.bottom,t.right,t.top]}function pie(e){var t=M8(mie(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function Y5(e){return e*(Math.PI/180)}function dB(e){return 180*(e/Math.PI)}function KLe(e){var t=e.lat,r=e.lon,i=6378137,n=.00669438,s=.9996,o,a,l,u,h,d,f,m=Y5(t),g=Y5(r),b,w;w=Math.floor((r+180)/6)+1,r===180&&(w=60),t>=56&&t<64&&r>=3&&r<12&&(w=32),t>=72&&t<84&&(r>=0&&r<9?w=31:r>=9&&r<21?w=33:r>=21&&r<33?w=35:r>=33&&r<42&&(w=37)),o=(w-1)*6-180+3,b=Y5(o),a=n/(1-n),l=i/Math.sqrt(1-n*Math.sin(m)*Math.sin(m)),u=Math.tan(m)*Math.tan(m),h=a*Math.cos(m)*Math.cos(m),d=Math.cos(m)*(g-b),f=i*((1-n/4-3*n*n/64-5*n*n*n/256)*m-(3*n/8+3*n*n/32+45*n*n*n/1024)*Math.sin(2*m)+(15*n*n/256+45*n*n*n/1024)*Math.sin(4*m)-35*n*n*n/3072*Math.sin(6*m));var _=s*l*(d+(1-u+h)*d*d*d/6+(5-18*u+u*u+72*h-58*a)*d*d*d*d*d/120)+5e5,x=s*(f+l*Math.tan(m)*(d*d/2+(5-u+9*h+4*h*h)*d*d*d*d/24+(61-58*u+u*u+600*h-330*a)*d*d*d*d*d*d/720));return t<0&&(x+=1e7),{northing:Math.round(x),easting:Math.round(_),zoneNumber:w,zoneLetter:XLe(t)}}function M8(e){var t=e.northing,r=e.easting,i=e.zoneLetter,n=e.zoneNumber;if(n<0||n>60)return null;var s=.9996,o=6378137,a=.00669438,l,u=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),h,d,f,m,g,b,w,_,x,I=r-5e5,S=t;i<"N"&&(S-=1e7),w=(n-1)*6-180+3,l=a/(1-a),b=S/s,_=b/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),x=_+(3*u/2-27*u*u*u/32)*Math.sin(2*_)+(21*u*u/16-55*u*u*u*u/32)*Math.sin(4*_)+151*u*u*u/96*Math.sin(6*_),h=o/Math.sqrt(1-a*Math.sin(x)*Math.sin(x)),d=Math.tan(x)*Math.tan(x),f=l*Math.cos(x)*Math.cos(x),m=o*(1-a)/Math.pow(1-a*Math.sin(x)*Math.sin(x),1.5),g=I/(h*s);var T=x-h*Math.tan(x)/m*(g*g/2-(5+3*d+10*f-4*f*f-9*l)*g*g*g*g/24+(61+90*d+298*f+45*d*d-252*l-3*f*f)*g*g*g*g*g*g/720);T=dB(T);var $=(g-(1+2*d+f)*g*g*g/6+(5-2*f+28*d-3*f*f+8*l+24*d*d)*g*g*g*g*g/120)/Math.cos(x);$=w+dB($);var E;if(e.accuracy){var C=M8({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});E={top:C.lat,right:C.lon,bottom:T,left:$}}else E={lat:T,lon:$};return E}function XLe(e){var t="Z";return 84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C"),t}function QLe(e,t){var r="00000"+e.easting,i="00000"+e.northing;return e.zoneNumber+e.zoneLetter+eNe(e.easting,e.northing,e.zoneNumber)+r.substr(r.length-5,t)+i.substr(i.length-5,t)}function eNe(e,t,r){var i=fie(r),n=Math.floor(e/1e5),s=Math.floor(t/1e5)%20;return tNe(n,s,i)}function fie(e){var t=e%hB;return t===0&&(t=hB),t}function tNe(e,t,r){var i=r-1,n=cie.charCodeAt(i),s=hie.charCodeAt(i),o=n+e-1,a=s+t,l=!1;o>ew&&(o=o-ew+l0-1,l=!0),(o===$s||n<$s&&o>$s||(o>$s||n<$s)&&l)&&o++,(o===oa||n<oa&&o>oa||(o>oa||n<oa)&&l)&&(o++,o===$s&&o++),o>ew&&(o=o-ew+l0-1),a>Qb?(a=a-Qb+l0-1,l=!0):l=!1,(a===$s||s<$s&&a>$s||(a>$s||s<$s)&&l)&&a++,(a===oa||s<oa&&a>oa||(a>oa||s<oa)&&l)&&(a++,a===$s&&a++),a>Qb&&(a=a-Qb+l0-1);var u=String.fromCharCode(o)+String.fromCharCode(a);return u}function mie(e){if(e&&e.length===0)throw"MGRSPoint coverting from nothing";for(var t=e.length,r=null,i="",n,s=0;!/[A-Z]/.test(n=e.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+e;i+=n,s++}var o=parseInt(i,10);if(s===0||s+3>t)throw"MGRSPoint bad conversion from: "+e;var a=e.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+e;r=e.substring(s,s+=2);for(var l=fie(o),u=rNe(r.charAt(0),l),h=iNe(r.charAt(1),l);h<nNe(a);)h+=2e6;var d=t-s;if(d%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+e;var f=d/2,m=0,g=0,b,w,_,x,I;return f>0&&(b=1e5/Math.pow(10,f),w=e.substring(s,s+f),m=parseFloat(w)*b,_=e.substring(s+f),g=parseFloat(_)*b),x=m+u,I=g+h,{easting:x,northing:I,zoneLetter:a,zoneNumber:o,accuracy:b}}function rNe(e,t){for(var r=cie.charCodeAt(t-1),i=1e5,n=!1;r!==e.charCodeAt(0);){if(r++,r===$s&&r++,r===oa&&r++,r>ew){if(n)throw"Bad character: "+e;r=l0,n=!0}i+=1e5}return i}function iNe(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;for(var r=hie.charCodeAt(t-1),i=0,n=!1;r!==e.charCodeAt(0);){if(r++,r===$s&&r++,r===oa&&r++,r>Qb){if(n)throw"Bad character: "+e;r=l0,n=!0}i+=1e5}return i}function nNe(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function sv(e,t,r){if(!(this instanceof sv))return new sv(e,t,r);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if(typeof e=="object")this.x=e.x,this.y=e.y,this.z=e.z||0;else if(typeof e=="string"&&typeof t>"u"){var i=e.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=e,this.y=t,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}sv.fromMGRS=function(e){return new sv(pie(e))};sv.prototype.toMGRS=function(e){return die([this.x,this.y],e)};var sNe=1,oNe=.25,pB=.046875,fB=.01953125,mB=.01068115234375,aNe=.75,lNe=.46875,uNe=.013020833333333334,cNe=.007120768229166667,hNe=.3645833333333333,dNe=.005696614583333333,pNe=.3076171875;function yie(e){var t=[];t[0]=sNe-e*(oNe+e*(pB+e*(fB+e*mB))),t[1]=e*(aNe-e*(pB+e*(fB+e*mB)));var r=e*e;return t[2]=r*(lNe-e*(uNe+e*cNe)),r*=e,t[3]=r*(hNe-e*dNe),t[4]=r*e*pNe,t}function W$(e,t,r,i){return r*=t,t*=t,i[0]*e-r*(i[1]+t*(i[2]+t*(i[3]+t*i[4])))}var fNe=20;function gie(e,t,r){for(var i=1/(1-t),n=e,s=fNe;s;--s){var o=Math.sin(n),a=1-t*o*o;if(a=(W$(n,o,Math.cos(n),r)-e)*(a*Math.sqrt(a))*i,n-=a,Math.abs(a)<Be)return n}return n}function mNe(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=yie(this.es),this.ml0=W$(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function yNe(e){var t=e.x,r=e.y,i=We(t-this.long0),n,s,o,a=Math.sin(r),l=Math.cos(r);if(this.es){var h=l*i,d=Math.pow(h,2),f=this.ep2*Math.pow(l,2),m=Math.pow(f,2),g=Math.abs(l)>Be?Math.tan(r):0,b=Math.pow(g,2),w=Math.pow(b,2);n=1-this.es*Math.pow(a,2),h=h/Math.sqrt(n);var _=W$(r,a,l,this.en);s=this.a*(this.k0*h*(1+d/6*(1-b+f+d/20*(5-18*b+w+14*f-58*b*f+d/42*(61+179*w-w*b-479*b)))))+this.x0,o=this.a*(this.k0*(_-this.ml0+a*i*h/2*(1+d/12*(5-b+9*f+4*m+d/30*(61+w-58*b+270*f-330*b*f+d/56*(1385+543*w-w*b-3111*b))))))+this.y0}else{var u=l*Math.sin(i);if(Math.abs(Math.abs(u)-1)<Be)return 93;if(s=.5*this.a*this.k0*Math.log((1+u)/(1-u))+this.x0,o=l*Math.cos(i)/Math.sqrt(1-Math.pow(u,2)),u=Math.abs(o),u>=1){if(u-1>Be)return 93;o=0}else o=Math.acos(o);r<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return e.x=s,e.y=o,e}function gNe(e){var t,r,i,n,s=(e.x-this.x0)*(1/this.a),o=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+o/this.k0,r=gie(t,this.es,this.en),Math.abs(r)<Pe){var d=Math.sin(r),f=Math.cos(r),m=Math.abs(f)>Be?Math.tan(r):0,g=this.ep2*Math.pow(f,2),b=Math.pow(g,2),w=Math.pow(m,2),_=Math.pow(w,2);t=1-this.es*Math.pow(d,2);var x=s*Math.sqrt(t)/this.k0,I=Math.pow(x,2);t=t*m,i=r-t*I/(1-this.es)*.5*(1-I/12*(5+3*w-9*g*w+g-4*b-I/30*(61+90*w-252*g*w+45*_+46*g-I/56*(1385+3633*w+4095*_+1574*_*w)))),n=We(this.long0+x*(1-I/6*(1+2*w+g-I/20*(5+28*w+24*_+8*g*w+6*g-I/42*(61+662*w+1320*_+720*_*w))))/f)}else i=Pe*R2(o),n=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),u=this.lat0+o/this.k0,h=Math.cos(u);t=Math.sqrt((1-Math.pow(h,2))/(1+Math.pow(l,2))),i=Math.asin(t),o<0&&(i=-i),l===0&&h===0?n=0:n=We(Math.atan2(l,h)+this.long0)}return e.x=n,e.y=i,e}var vNe=["Transverse_Mercator","Transverse Mercator","tmerc"],bNe={init:mNe,forward:yNe,inverse:gNe,names:vNe};function vie(e){var t=Math.exp(e);return t=(t-1/t)/2,t}function I8(e,t){e=Math.abs(e),t=Math.abs(t);var r=Math.max(e,t),i=Math.min(e,t)/(r||1);return r*Math.sqrt(1+Math.pow(i,2))}function wNe(e){var t=1+e,r=t-1;return r===0?e:e*Math.log(t)/r}function _Ne(e){var t=Math.abs(e);return t=wNe(t*(1+t/(I8(1,t)+1))),e<0?-t:t}function T8(e,t){for(var r=2*Math.cos(2*t),i=e.length-1,n=e[i],s=0,o;--i>=0;)o=-s+r*n+e[i],s=n,n=o;return t+o*Math.sin(2*t)}function xNe(e,t){for(var r=2*Math.cos(t),i=e.length-1,n=e[i],s=0,o;--i>=0;)o=-s+r*n+e[i],s=n,n=o;return Math.sin(t)*o}function SNe(e){var t=Math.exp(e);return t=(t+1/t)/2,t}function bie(e,t,r){for(var i=Math.sin(t),n=Math.cos(t),s=vie(r),o=SNe(r),a=2*n*o,l=-2*i*s,u=e.length-1,h=e[u],d=0,f=0,m=0,g,b;--u>=0;)g=f,b=d,f=h,d=m,h=-g+a*f-l*d+e[u],m=-b+l*f+a*d;return a=i*o,l=n*s,[a*h-l*m,a*m+l*h]}function MNe(){if(this.es===void 0||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),r=t;this.cgb[0]=t*(2+t*(-2/3+t*(-2+t*(116/45+t*(26/45+t*(-2854/675)))))),this.cbg[0]=t*(-2+t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))),r=r*t,this.cgb[1]=r*(7/3+t*(-8/5+t*(-227/45+t*(2704/315+t*(2323/945))))),this.cbg[1]=r*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),r=r*t,this.cgb[2]=r*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=r*(-26/15+t*(34/21+t*(8/5+t*(-12686/2835)))),r=r*t,this.cgb[3]=r*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=r*(1237/630+t*(-12/5+t*(-24832/14175))),r=r*t,this.cgb[4]=r*(4174/315+t*(-144838/6237)),this.cbg[4]=r*(-734/315+t*(109598/31185)),r=r*t,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+r*(1/4+r*(1/64+r/256))),this.utg[0]=t*(-.5+t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=r*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=r*(13/48+t*(-3/5+t*(557/1440+t*(281/630+t*(-1983433/1935360))))),r=r*t,this.utg[2]=r*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=r*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),r=r*t,this.utg[3]=r*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=r*(49561/161280+t*(-179/168+t*(6601661/7257600))),r=r*t,this.utg[4]=r*(-4583/161280+t*(108847/3991680)),this.gtu[4]=r*(34729/80640+t*(-3418889/1995840)),r=r*t,this.utg[5]=r*(-20648693/638668800),this.gtu[5]=r*(212378941/319334400);var i=T8(this.cbg,this.lat0);this.Zb=-this.Qn*(i+xNe(this.gtu,2*i))}function INe(e){var t=We(e.x-this.long0),r=e.y;r=T8(this.cbg,r);var i=Math.sin(r),n=Math.cos(r),s=Math.sin(t),o=Math.cos(t);r=Math.atan2(i,o*n),t=Math.atan2(s*n,I8(i,n*o)),t=_Ne(Math.tan(t));var a=bie(this.gtu,2*r,2*t);r=r+a[0],t=t+a[1];var l,u;return Math.abs(t)<=2.623395162778?(l=this.a*(this.Qn*t)+this.x0,u=this.a*(this.Qn*r+this.Zb)+this.y0):(l=1/0,u=1/0),e.x=l,e.y=u,e}function TNe(e){var t=(e.x-this.x0)*(1/this.a),r=(e.y-this.y0)*(1/this.a);r=(r-this.Zb)/this.Qn,t=t/this.Qn;var i,n;if(Math.abs(t)<=2.623395162778){var s=bie(this.utg,2*r,2*t);r=r+s[0],t=t+s[1],t=Math.atan(vie(t));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(t),u=Math.cos(t);r=Math.atan2(o*u,I8(l,u*a)),t=Math.atan2(l,u*a),i=We(t+this.long0),n=T8(this.cgb,r)}else i=1/0,n=1/0;return e.x=i,e.y=n,e}var $Ne=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"],b3={init:MNe,forward:INe,inverse:TNe,names:$Ne};function ENe(e,t){if(e===void 0){if(e=Math.floor((We(t)+Math.PI)*30/Math.PI)+1,e<0)return 0;if(e>60)return 60}return e}var ANe="etmerc";function CNe(){var e=ENe(this.zone,this.long0);if(e===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*rs,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,b3.init.apply(this),this.forward=b3.forward,this.inverse=b3.inverse}var kNe=["Universal Transverse Mercator System","utm"],ONe={init:CNe,names:kNe,dependsOn:ANe};function $8(e,t){return Math.pow((1-e)/(1+e),t)}var PNe=20;function RNe(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+mr)/(Math.pow(Math.tan(.5*this.lat0+mr),this.C)*$8(this.e*e,this.ratexp))}function LNe(e){var t=e.x,r=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+mr),this.C)*$8(this.e*Math.sin(r),this.ratexp))-Pe,e.x=this.C*t,e}function NNe(e){for(var t=1e-14,r=e.x/this.C,i=e.y,n=Math.pow(Math.tan(.5*i+mr)/this.K,1/this.C),s=PNe;s>0&&(i=2*Math.atan(n*$8(this.e*Math.sin(e.y),-.5*this.e))-Pe,!(Math.abs(i-e.y)<t));--s)e.y=i;return s?(e.x=r,e.y=i,e):null}var DNe=["gauss"],E8={init:RNe,forward:LNe,inverse:NNe,names:DNe};function FNe(){E8.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function jNe(e){var t,r,i,n;return e.x=We(e.x-this.long0),E8.forward.apply(this,[e]),t=Math.sin(e.y),r=Math.cos(e.y),i=Math.cos(e.x),n=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*r*i),e.x=n*r*Math.sin(e.x),e.y=n*(this.cosc0*t-this.sinc0*r*i),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function VNe(e){var t,r,i,n,s;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,s=Math.sqrt(e.x*e.x+e.y*e.y)){var o=2*Math.atan2(s,this.R2);t=Math.sin(o),r=Math.cos(o),n=Math.asin(r*this.sinc0+e.y*t*this.cosc0/s),i=Math.atan2(e.x*t,s*this.cosc0*r-e.y*this.sinc0*t)}else n=this.phic0,i=0;return e.x=i,e.y=n,E8.inverse.apply(this,[e]),e.x=We(e.x+this.long0),e}var UNe=["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"],zNe={init:FNe,forward:jNe,inverse:VNe,names:UNe};function BNe(e,t,r){return t*=r,Math.tan(.5*(Pe+e))*Math.pow((1-t)/(1+t),.5*r)}function GNe(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Be&&(this.k0=.5*(1+R2(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=Be&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=Be&&(this.k0=.5*this.cons*qu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/fl(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=qu(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-Pe,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function qNe(e){var t=e.x,r=e.y,i=Math.sin(r),n=Math.cos(r),s,o,a,l,u,h,d=We(t-this.long0);return Math.abs(Math.abs(t-this.long0)-Math.PI)<=Be&&Math.abs(r+this.lat0)<=Be?(e.x=NaN,e.y=NaN,e):this.sphere?(s=2*this.k0/(1+this.sinlat0*i+this.coslat0*n*Math.cos(d)),e.x=this.a*s*n*Math.sin(d)+this.x0,e.y=this.a*s*(this.coslat0*i-this.sinlat0*n*Math.cos(d))+this.y0,e):(o=2*Math.atan(this.ssfn_(r,i,this.e))-Pe,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=Be?(u=fl(this.e,r*this.con,this.con*i),h=2*this.a*this.k0*u/this.cons,e.x=this.x0+h*Math.sin(t-this.long0),e.y=this.y0-this.con*h*Math.cos(t-this.long0),e):(Math.abs(this.sinlat0)<Be?(s=2*this.a*this.k0/(1+l*Math.cos(d)),e.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(d))),e.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(d))+this.y0),e.x=s*l*Math.sin(d)+this.x0,e))}function HNe(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,o=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return t=this.long0,r=this.lat0,o<=Be?(e.x=t,e.y=r,e):(r=Math.asin(Math.cos(a)*this.sinlat0+e.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<Be?this.lat0>0?t=We(this.long0+Math.atan2(e.x,-1*e.y)):t=We(this.long0+Math.atan2(e.x,e.y)):t=We(this.long0+Math.atan2(e.x*Math.sin(a),o*this.coslat0*Math.cos(a)-e.y*this.sinlat0*Math.sin(a))),e.x=t,e.y=r,e)}else if(Math.abs(this.coslat0)<=Be){if(o<=Be)return r=this.lat0,t=this.long0,e.x=t,e.y=r,e;e.x*=this.con,e.y*=this.con,i=o*this.cons/(2*this.a*this.k0),r=this.con*O_(this.e,i),t=this.con*We(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else n=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,o<=Be?s=this.X0:(s=Math.asin(Math.cos(n)*this.sinX0+e.y*Math.sin(n)*this.cosX0/o),t=We(this.long0+Math.atan2(e.x*Math.sin(n),o*this.cosX0*Math.cos(n)-e.y*this.sinX0*Math.sin(n)))),r=-1*O_(this.e,Math.tan(.5*(Pe+s)));return e.x=t,e.y=r,e}var WNe=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],JNe={init:GNe,forward:qNe,inverse:HNe,names:WNe,ssfn_:BNe};function ZNe(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),r=this.a,i=this.rf,n=1/i,s=2*n-Math.pow(n,2),o=this.e=Math.sqrt(s);this.R=this.k0*r*Math.sqrt(1-s)/(1-s*Math.pow(t,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+e/2)),u=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*l+this.alpha*o/2*u}function YNe(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),i=-this.alpha*(t+r)+this.K,n=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(e.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(n)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(n)-Math.sin(this.b0)*Math.cos(n)*Math.cos(s));return e.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,e.x=this.R*o+this.x0,e}function KNe(e){for(var t=e.x-this.x0,r=e.y-this.y0,i=t/this.R,n=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(n)+Math.sin(this.b0)*Math.cos(n)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(n))),a=this.lambda0+o/this.alpha,l=0,u=s,h=-1e3,d=0;Math.abs(u-h)>1e-7;){if(++d>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),h=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=a,e.y=u,e}var XNe=["somerc"],QNe={init:ZNe,forward:YNe,inverse:KNe,names:XNe};function e6e(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),r=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-r*r);var i=fl(this.e,this.lat0,e),n=this.bl/t*Math.sqrt((1-this.es)/(1-r*r));n*n<1&&(n=1);var s,o;if(!isNaN(this.longc))this.lat0>=0?s=n+Math.sqrt(n*n-1):s=n-Math.sqrt(n*n-1),this.el=s*Math.pow(i,this.bl),o=.5*(s-1/s),this.gamma0=Math.asin(Math.sin(this.alpha)/n),this.long0=this.longc-Math.asin(o*Math.tan(this.gamma0))/this.bl;else{var a=fl(this.e,this.lat1,Math.sin(this.lat1)),l=fl(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(n+Math.sqrt(n*n-1))*Math.pow(i,this.bl):this.el=(n-Math.sqrt(n*n-1))*Math.pow(i,this.bl);var u=Math.pow(a,this.bl),h=Math.pow(l,this.bl);s=this.el/u,o=.5*(s-1/s);var d=(this.el*this.el-h*u)/(this.el*this.el+h*u),f=(h-u)/(h+u),m=We(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(d*Math.tan(.5*this.bl*m)/f)/this.bl,this.long0=We(this.long0);var g=We(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*g)/o),this.alpha=Math.asin(n*Math.sin(this.gamma0))}this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(n*n-1),Math.cos(this.alpha))}function t6e(e){var t=e.x,r=e.y,i=We(t-this.long0),n,s,o;if(Math.abs(Math.abs(r)-Pe)<=Be)r>0?o=-1:o=1,s=this.al/this.bl*Math.log(Math.tan(mr+o*this.gamma0*.5)),n=-1*o*Pe*this.al/this.bl;else{var a=fl(this.e,r,Math.sin(r)),l=this.el/Math.pow(a,this.bl),u=.5*(l-1/l),h=.5*(l+1/l),d=Math.sin(this.bl*i),f=(u*Math.sin(this.gamma0)-d*Math.cos(this.gamma0))/h;Math.abs(Math.abs(f)-1)<=Be?s=Number.POSITIVE_INFINITY:s=.5*this.al*Math.log((1-f)/(1+f))/this.bl,Math.abs(Math.cos(this.bl*i))<=Be?n=this.al*this.bl*i:n=this.al*Math.atan2(u*Math.cos(this.gamma0)+d*Math.sin(this.gamma0),Math.cos(this.bl*i))/this.bl}return this.no_rot?(e.x=this.x0+n,e.y=this.y0+s):(n-=this.uc,e.x=this.x0+s*Math.cos(this.alpha)+n*Math.sin(this.alpha),e.y=this.y0+n*Math.cos(this.alpha)-s*Math.sin(this.alpha)),e}function r6e(e){var t,r;this.no_rot?(r=e.y-this.y0,t=e.x-this.x0):(r=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var i=Math.exp(-1*this.bl*r/this.al),n=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.bl*t/this.al),a=(o*Math.cos(this.gamma0)+n*Math.sin(this.gamma0))/s,l=Math.pow(this.el/Math.sqrt((1+a)/(1-a)),1/this.bl);return Math.abs(a-1)<Be?(e.x=this.long0,e.y=Pe):Math.abs(a+1)<Be?(e.x=this.long0,e.y=-1*Pe):(e.y=O_(this.e,l),e.x=We(this.long0-Math.atan2(n*Math.cos(this.gamma0)-o*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e}var i6e=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"],n6e={init:e6e,forward:t6e,inverse:r6e,names:i6e};function s6e(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<Be)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),r=Math.cos(this.lat1),i=qu(this.e,t,r),n=fl(this.e,this.lat1,t),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=qu(this.e,s,o),l=fl(this.e,this.lat2,s),u=fl(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>Be?this.ns=Math.log(i/a)/Math.log(n/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=i/(this.ns*Math.pow(n,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function o6e(e){var t=e.x,r=e.y;Math.abs(2*Math.abs(r)-Math.PI)<=Be&&(r=R2(r)*(Pe-2*Be));var i=Math.abs(Math.abs(r)-Pe),n,s;if(i>Be)n=fl(this.e,r,Math.sin(r)),s=this.a*this.f0*Math.pow(n,this.ns);else{if(i=r*this.ns,i<=0)return null;s=0}var o=this.ns*We(t-this.long0);return e.x=this.k0*(s*Math.sin(o))+this.x0,e.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,e}function a6e(e){var t,r,i,n,s,o=(e.x-this.x0)/this.k0,a=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(o*o+a*a),r=1):(t=-Math.sqrt(o*o+a*a),r=-1);var l=0;if(t!==0&&(l=Math.atan2(r*o,r*a)),t!==0||this.ns>0){if(r=1/this.ns,i=Math.pow(t/(this.a*this.f0),r),n=O_(this.e,i),n===-9999)return null}else n=-Pe;return s=We(l/this.ns+this.long0),e.x=s,e.y=n,e}var l6e=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"],u6e={init:s6e,forward:o6e,inverse:a6e,names:l6e};function c6e(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function h6e(e){var t,r,i,n,s,o,a,l=e.x,u=e.y,h=We(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),i=-h*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),s=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(n)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),e.y=a*Math.cos(o)/1,e.x=a*Math.sin(o)/1,this.czech||(e.y*=-1,e.x*=-1),e}function d6e(e){var t,r,i,n,s,o,a,l,u=e.x;e.x=e.y,e.y=u,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),s=Math.atan2(e.y,e.x),n=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(n)),r=Math.asin(Math.cos(i)*Math.sin(n)/Math.cos(t)),e.x=this.long0-r/this.alfa,a=t,l=0;var h=0;do e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(l=1),a=e.y,h+=1;while(l===0&&h<15);return h>=15?null:e}var p6e=["Krovak","krovak"],f6e={init:c6e,forward:h6e,inverse:d6e,names:p6e};function ds(e,t,r,i,n){return e*n-t*Math.sin(2*n)+r*Math.sin(4*n)-i*Math.sin(6*n)}function L2(e){return 1-.25*e*(1+e/16*(3+1.25*e))}function N2(e){return .375*e*(1+.25*e*(1+.46875*e))}function D2(e){return .05859375*e*e*(1+.75*e)}function F2(e){return e*e*e*(35/3072)}function ov(e,t,r){var i=t*r;return e/Math.sqrt(1-i*i)}function l1(e){return Math.abs(e)<Pe?e:e-R2(e)*Math.PI}function tT(e,t,r,i,n){var s,o;s=e/t;for(var a=0;a<15;a++)if(o=(e-(t*s-r*Math.sin(2*s)+i*Math.sin(4*s)-n*Math.sin(6*s)))/(t-2*r*Math.cos(2*s)+4*i*Math.cos(4*s)-6*n*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function m6e(){this.sphere||(this.e0=L2(this.es),this.e1=N2(this.es),this.e2=D2(this.es),this.e3=F2(this.es),this.ml0=this.a*ds(this.e0,this.e1,this.e2,this.e3,this.lat0))}function y6e(e){var t,r,i=e.x,n=e.y;if(i=We(i-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(n)*Math.sin(i)),r=this.a*(Math.atan2(Math.tan(n),Math.cos(i))-this.lat0);else{var s=Math.sin(n),o=Math.cos(n),a=ov(this.a,this.e,s),l=Math.tan(n)*Math.tan(n),u=i*Math.cos(n),h=u*u,d=this.es*o*o/(1-this.es),f=this.a*ds(this.e0,this.e1,this.e2,this.e3,n);t=a*u*(1-h*l*(1/6-(8-l+8*d)*h/120)),r=f-this.ml0+a*s/o*h*(.5+(5-l+6*d)*h/24)}return e.x=t+this.x0,e.y=r+this.y0,e}function g6e(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n;if(this.sphere){var s=r+this.lat0;i=Math.asin(Math.sin(s)*Math.cos(t)),n=Math.atan2(Math.tan(t),Math.cos(s))}else{var o=this.ml0/this.a+r,a=tT(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-Pe)<=Be)return e.x=this.long0,e.y=Pe,r<0&&(e.y*=-1),e;var l=ov(this.a,this.e,Math.sin(a)),u=l*l*l/this.a/this.a*(1-this.es),h=Math.pow(Math.tan(a),2),d=t*this.a/l,f=d*d;i=a-l*Math.tan(a)/u*d*d*(.5-(1+3*h)*d*d/24),n=d*(1-f*(h/3+(1+3*h)*h*f/15))/Math.cos(a)}return e.x=We(n+this.long0),e.y=l1(i),e}var v6e=["Cassini","Cassini_Soldner","cass"],b6e={init:m6e,forward:y6e,inverse:g6e,names:v6e};function rp(e,t){var r;return e>1e-7?(r=e*t,(1-e*e)*(t/(1-r*r)-.5/e*Math.log((1-r)/(1+r)))):2*t}var w6e=1,_6e=2,x6e=3,S6e=4;function M6e(){var e=Math.abs(this.lat0);if(Math.abs(e-Pe)<Be?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<Be?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var t;switch(this.qp=rp(this.e,1),this.mmf=.5/(1-this.es),this.apa=P6e(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=rp(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function I6e(e){var t,r,i,n,s,o,a,l,u,h,d=e.x,f=e.y;if(d=We(d-this.long0),this.sphere){if(s=Math.sin(f),h=Math.cos(f),i=Math.cos(d),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(r=this.mode===this.EQUIT?1+h*i:1+this.sinph0*s+this.cosph0*h*i,r<=Be)return null;r=Math.sqrt(2/r),t=r*h*Math.sin(d),r*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*h*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(f+this.phi0)<Be)return null;r=mr-f*.5,r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)),t=r*Math.sin(d),r*=i}}else{switch(a=0,l=0,u=0,i=Math.cos(d),n=Math.sin(d),s=Math.sin(f),o=rp(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:u=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:u=1+l*i;break;case this.N_POLE:u=Pe+f,o=this.qp-o;break;case this.S_POLE:u=f-Pe,o=this.qp+o;break}if(Math.abs(u)<Be)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),this.mode===this.OBLIQ?r=this.ymf*u*(this.cosb1*a-this.sinb1*l*i):r=(u=Math.sqrt(2/(1+l*i)))*a*this.ymf,t=this.xmf*u*l*n;break;case this.N_POLE:case this.S_POLE:o>=0?(t=(u=Math.sqrt(o))*n,r=i*(this.mode===this.S_POLE?u:-u)):t=r=0;break}}return e.x=this.a*t+this.x0,e.y=this.a*r+this.y0,e}function T6e(e){e.x-=this.x0,e.y-=this.y0;var t=e.x/this.a,r=e.y/this.a,i,n,s,o,a,l,u;if(this.sphere){var h=0,d,f=0;if(d=Math.sqrt(t*t+r*r),n=d*.5,n>1)return null;switch(n=2*Math.asin(n),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(f=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(d)<=Be?0:Math.asin(r*f/d),t*=f,r=h*d;break;case this.OBLIQ:n=Math.abs(d)<=Be?this.phi0:Math.asin(h*this.sinph0+r*f*this.cosph0/d),t*=f*this.cosph0,r=(h-Math.sin(n)*this.sinph0)*d;break;case this.N_POLE:r=-r,n=Pe-n;break;case this.S_POLE:n-=Pe;break}i=r===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(t,r)}else{if(u=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t/=this.dd,r*=this.dd,l=Math.sqrt(t*t+r*r),l<Be)return e.x=0,e.y=this.phi0,e;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),t*=o=Math.sin(o),this.mode===this.OBLIQ?(u=s*this.sinb1+r*o*this.cosb1/l,a=this.qp*u,r=l*this.cosb1*s-r*this.sinb1*o):(u=r*o/l,a=this.qp*u,r=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),a=t*t+r*r,!a)return e.x=0,e.y=this.phi0,e;u=1-a/this.qp,this.mode===this.S_POLE&&(u=-u)}i=Math.atan2(t,r),n=R6e(Math.asin(u),this.apa)}return e.x=We(this.long0+i),e.y=n,e}var $6e=.3333333333333333,E6e=.17222222222222222,A6e=.10257936507936508,C6e=.06388888888888888,k6e=.0664021164021164,O6e=.016415012942191543;function P6e(e){var t,r=[];return r[0]=e*$6e,t=e*e,r[0]+=t*E6e,r[1]=t*C6e,t*=e,r[0]+=t*A6e,r[1]+=t*k6e,r[2]=t*O6e,r}function R6e(e,t){var r=e+e;return e+t[0]*Math.sin(r)+t[1]*Math.sin(r+r)+t[2]*Math.sin(r+r+r)}var L6e=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],N6e={init:M6e,forward:I6e,inverse:T6e,names:L6e,S_POLE:w6e,N_POLE:_6e,EQUIT:x6e,OBLIQ:S6e};function fp(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)}function D6e(){Math.abs(this.lat1+this.lat2)<Be||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=qu(this.e3,this.sin_po,this.cos_po),this.qs1=rp(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=qu(this.e3,this.sin_po,this.cos_po),this.qs2=rp(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=rp(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>Be?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function F6e(e){var t=e.x,r=e.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var i=rp(this.e3,this.sin_phi,this.cos_phi),n=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*We(t-this.long0),o=n*Math.sin(s)+this.x0,a=this.rh-n*Math.cos(s)+this.y0;return e.x=o,e.y=a,e}function j6e(e){var t,r,i,n,s,o;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),i=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),i=-1),n=0,t!==0&&(n=Math.atan2(i*e.x,i*e.y)),i=t*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(r=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,r)),s=We(n/this.ns0+this.long0),e.x=s,e.y=o,e}function V6e(e,t){var r,i,n,s,o,a=fp(.5*t);if(e<Be)return a;for(var l=e*e,u=1;u<=25;u++)if(r=Math.sin(a),i=Math.cos(a),n=e*r,s=1-n*n,o=.5*s*s/i*(t/(1-l)-r/s+.5/e*Math.log((1-n)/(1+n))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var U6e=["Albers_Conic_Equal_Area","Albers","aea"],z6e={init:D6e,forward:F6e,inverse:j6e,names:U6e,phi1z:V6e};function B6e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function G6e(e){var t,r,i,n,s,o,a,l,u=e.x,h=e.y;return i=We(u-this.long0),t=Math.sin(h),r=Math.cos(h),n=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*n,s=1,o>0||Math.abs(o)<=Be?(a=this.x0+this.a*s*r*Math.sin(i)/o,l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)/o):(a=this.x0+this.infinity_dist*r*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*r*n)),e.x=a,e.y=l,e}function q6e(e){var t,r,i,n,s,o;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(n=Math.atan2(t,this.rc),r=Math.sin(n),i=Math.cos(n),o=fp(i*this.sin_p14+e.y*r*this.cos_p14/t),s=Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r),s=We(this.long0+s)):(o=this.phic0,s=0),e.x=s,e.y=o,e}var H6e=["gnom"],W6e={init:B6e,forward:G6e,inverse:q6e,names:H6e};function J6e(e,t){var r=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-r)<1e-6)return t<0?-1*Pe:Pe;for(var i=Math.asin(.5*t),n,s,o,a,l=0;l<30;l++)if(s=Math.sin(i),o=Math.cos(i),a=e*s,n=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-s/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),i+=n,Math.abs(n)<=1e-10)return i;return NaN}function Z6e(){this.sphere||(this.k0=qu(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function Y6e(e){var t=e.x,r=e.y,i,n,s=We(t-this.long0);if(this.sphere)i=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=rp(this.e,Math.sin(r));i=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return e.x=i,e.y=n,e}function K6e(e){e.x-=this.x0,e.y-=this.y0;var t,r;return this.sphere?(t=We(this.long0+e.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(r=J6e(this.e,2*e.y*this.k0/this.a),t=We(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=r,e}var X6e=["cea"],Q6e={init:Z6e,forward:Y6e,inverse:K6e,names:X6e};function e8e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function t8e(e){var t=e.x,r=e.y,i=We(t-this.long0),n=l1(r-this.lat0);return e.x=this.x0+this.a*i*this.rc,e.y=this.y0+this.a*n,e}function r8e(e){var t=e.x,r=e.y;return e.x=We(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=l1(this.lat0+(r-this.y0)/this.a),e}var i8e=["Equirectangular","Equidistant_Cylindrical","eqc"],n8e={init:e8e,forward:t8e,inverse:r8e,names:i8e},yB=20;function s8e(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=L2(this.es),this.e1=N2(this.es),this.e2=D2(this.es),this.e3=F2(this.es),this.ml0=this.a*ds(this.e0,this.e1,this.e2,this.e3,this.lat0)}function o8e(e){var t=e.x,r=e.y,i,n,s,o=We(t-this.long0);if(s=o*Math.sin(r),this.sphere)Math.abs(r)<=Be?(i=this.a*o,n=-1*this.a*this.lat0):(i=this.a*Math.sin(s)/Math.tan(r),n=this.a*(l1(r-this.lat0)+(1-Math.cos(s))/Math.tan(r)));else if(Math.abs(r)<=Be)i=this.a*o,n=-1*this.ml0;else{var a=ov(this.a,this.e,Math.sin(r))/Math.tan(r);i=a*Math.sin(s),n=this.a*ds(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*(1-Math.cos(s))}return e.x=i+this.x0,e.y=n+this.y0,e}function a8e(e){var t,r,i,n,s,o,a,l,u;if(i=e.x-this.x0,n=e.y-this.y0,this.sphere)if(Math.abs(n+this.a*this.lat0)<=Be)t=We(i/this.a+this.long0),r=0;else{o=this.lat0+n/this.a,a=i*i/this.a/this.a+o*o,l=o;var h;for(s=yB;s;--s)if(h=Math.tan(l),u=-1*(o*(l*h+1)-l-.5*(l*l+a)*h)/((l-o)/h-1),l+=u,Math.abs(u)<=Be){r=l;break}t=We(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(n+this.ml0)<=Be)r=0,t=We(this.long0+i/this.a);else{o=(this.ml0+n)/this.a,a=i*i/this.a/this.a+o*o,l=o;var d,f,m,g,b;for(s=yB;s;--s)if(b=this.e*Math.sin(l),d=Math.sqrt(1-b*b)*Math.tan(l),f=this.a*ds(this.e0,this.e1,this.e2,this.e3,l),m=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=f/this.a,u=(o*(d*g+1)-g-.5*d*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*d)+(o-g)*(d*m-2/Math.sin(2*l))-m),l-=u,Math.abs(u)<=Be){r=l;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),t=We(this.long0+Math.asin(i*d/this.a)/Math.sin(r))}return e.x=t,e.y=r,e}var l8e=["Polyconic","poly"],u8e={init:s8e,forward:o8e,inverse:a8e,names:l8e};function c8e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function h8e(e){var t,r=e.x,i=e.y,n=i-this.lat0,s=r-this.long0,o=n/Pw*1e-5,a=s,l=1,u=0;for(t=1;t<=10;t++)l=l*o,u=u+this.A[t]*l;var h=u,d=a,f=1,m=0,g,b,w=0,_=0;for(t=1;t<=6;t++)g=f*h-m*d,b=m*h+f*d,f=g,m=b,w=w+this.B_re[t]*f-this.B_im[t]*m,_=_+this.B_im[t]*f+this.B_re[t]*m;return e.x=_*this.a+this.x0,e.y=w*this.a+this.y0,e}function d8e(e){var t,r=e.x,i=e.y,n=r-this.x0,s=i-this.y0,o=s/this.a,a=n/this.a,l=1,u=0,h,d,f=0,m=0;for(t=1;t<=6;t++)h=l*o-u*a,d=u*o+l*a,l=h,u=d,f=f+this.C_re[t]*l-this.C_im[t]*u,m=m+this.C_im[t]*l+this.C_re[t]*u;for(var g=0;g<this.iterations;g++){var b=f,w=m,_,x,I=o,S=a;for(t=2;t<=6;t++)_=b*f-w*m,x=w*f+b*m,b=_,w=x,I=I+(t-1)*(this.B_re[t]*b-this.B_im[t]*w),S=S+(t-1)*(this.B_im[t]*b+this.B_re[t]*w);b=1,w=0;var T=this.B_re[1],$=this.B_im[1];for(t=2;t<=6;t++)_=b*f-w*m,x=w*f+b*m,b=_,w=x,T=T+t*(this.B_re[t]*b-this.B_im[t]*w),$=$+t*(this.B_im[t]*b+this.B_re[t]*w);var E=T*T+$*$;f=(I*T+S*$)/E,m=(S*T-I*$)/E}var C=f,O=m,R=1,D=0;for(t=1;t<=9;t++)R=R*C,D=D+this.D[t]*R;var F=this.lat0+D*Pw*1e5,z=this.long0+O;return e.x=z,e.y=F,e}var p8e=["New_Zealand_Map_Grid","nzmg"],f8e={init:c8e,forward:h8e,inverse:d8e,names:p8e};function m8e(){}function y8e(e){var t=e.x,r=e.y,i=We(t-this.long0),n=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return e.x=n,e.y=s,e}function g8e(e){e.x-=this.x0,e.y-=this.y0;var t=We(this.long0+e.x/this.a),r=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=r,e}var v8e=["Miller_Cylindrical","mill"],b8e={init:m8e,forward:y8e,inverse:g8e,names:v8e},w8e=20;function _8e(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=yie(this.es)}function x8e(e){var t,r,i=e.x,n=e.y;if(i=We(i-this.long0),this.sphere){if(!this.m)n=this.n!==1?Math.asin(this.n*Math.sin(n)):n;else for(var s=this.n*Math.sin(n),o=w8e;o;--o){var a=(this.m*n+Math.sin(n)-s)/(this.m+Math.cos(n));if(n-=a,Math.abs(a)<Be)break}t=this.a*this.C_x*i*(this.m+Math.cos(n)),r=this.a*this.C_y*n}else{var l=Math.sin(n),u=Math.cos(n);r=this.a*W$(n,l,u,this.en),t=this.a*i*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=r,e}function S8e(e){var t,r,i,n;return e.x-=this.x0,i=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,i=i/(this.C_x*(this.m+Math.cos(t))),this.m?t=fp((this.m*t+Math.sin(t))/this.n):this.n!==1&&(t=fp(Math.sin(t)/this.n)),i=We(i+this.long0),t=l1(t)):(t=gie(e.y/this.a,this.es,this.en),n=Math.abs(t),n<Pe?(n=Math.sin(t),r=this.long0+e.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(t)),i=We(r)):n-Be<Pe&&(i=this.long0)),e.x=i,e.y=t,e}var M8e=["Sinusoidal","sinu"],I8e={init:_8e,forward:x8e,inverse:S8e,names:M8e};function T8e(){}function $8e(e){for(var t=e.x,r=e.y,i=We(t-this.long0),n=r,s=Math.PI*Math.sin(r);;){var o=-(n+Math.sin(n)-s)/(1+Math.cos(n));if(n+=o,Math.abs(o)<Be)break}n/=2,Math.PI/2-Math.abs(r)<Be&&(i=0);var a=.900316316158*this.a*i*Math.cos(n)+this.x0,l=1.4142135623731*this.a*Math.sin(n)+this.y0;return e.x=a,e.y=l,e}function E8e(e){var t,r;e.x-=this.x0,e.y-=this.y0,r=e.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),t=Math.asin(r);var i=We(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),r=(2*t+Math.sin(2*t))/Math.PI,Math.abs(r)>1&&(r=1);var n=Math.asin(r);return e.x=i,e.y=n,e}var A8e=["Mollweide","moll"],C8e={init:T8e,forward:$8e,inverse:E8e,names:A8e};function k8e(){Math.abs(this.lat1+this.lat2)<Be||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=L2(this.es),this.e1=N2(this.es),this.e2=D2(this.es),this.e3=F2(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=qu(this.e,this.sinphi,this.cosphi),this.ml1=ds(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<Be?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=qu(this.e,this.sinphi,this.cosphi),this.ml2=ds(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ds(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function O8e(e){var t=e.x,r=e.y,i;if(this.sphere)i=this.a*(this.g-r);else{var n=ds(this.e0,this.e1,this.e2,this.e3,r);i=this.a*(this.g-n)}var s=this.ns*We(t-this.long0),o=this.x0+i*Math.sin(s),a=this.y0+this.rh-i*Math.cos(s);return e.x=o,e.y=a,e}function P8e(e){e.x-=this.x0,e.y=this.rh-e.y+this.y0;var t,r,i,n;this.ns>=0?(r=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(r=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var s=0;if(r!==0&&(s=Math.atan2(t*e.x,t*e.y)),this.sphere)return n=We(this.long0+s/this.ns),i=l1(this.g-r/this.a),e.x=n,e.y=i,e;var o=this.g-r/this.a;return i=tT(o,this.e0,this.e1,this.e2,this.e3),n=We(this.long0+s/this.ns),e.x=n,e.y=i,e}var R8e=["Equidistant_Conic","eqdc"],L8e={init:k8e,forward:O8e,inverse:P8e,names:R8e};function N8e(){this.R=this.a}function D8e(e){var t=e.x,r=e.y,i=We(t-this.long0),n,s;Math.abs(r)<=Be&&(n=this.x0+this.R*i,s=this.y0);var o=fp(2*Math.abs(r/Math.PI));(Math.abs(i)<=Be||Math.abs(Math.abs(r)-Pe)<=Be)&&(n=this.x0,r>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/i-i/Math.PI),l=a*a,u=Math.sin(o),h=Math.cos(o),d=h/(u+h-1),f=d*d,m=d*(2/u-1),g=m*m,b=Math.PI*this.R*(a*(d-g)+Math.sqrt(l*(d-g)*(d-g)-(g+l)*(f-g)))/(g+l);i<0&&(b=-b),n=this.x0+b;var w=l+d;return b=Math.PI*this.R*(m*w-a*Math.sqrt((g+l)*(l+1)-w*w))/(g+l),r>=0?s=this.y0+b:s=this.y0-b,e.x=n,e.y=s,e}function F8e(e){var t,r,i,n,s,o,a,l,u,h,d,f,m;return e.x-=this.x0,e.y-=this.y0,d=Math.PI*this.R,i=e.x/d,n=e.y/d,s=i*i+n*n,o=-Math.abs(n)*(1+s),a=o-2*n*n+i*i,l=-2*o+1+2*n*n+s*s,m=n*n/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,u=(o-a*a/3/l)/l,h=2*Math.sqrt(-u/3),d=3*m/u/h,Math.abs(d)>1&&(d>=0?d=1:d=-1),f=Math.acos(d)/3,e.y>=0?r=(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI:r=-(-h*Math.cos(f+Math.PI/3)-a/3/l)*Math.PI,Math.abs(i)<Be?t=this.long0:t=We(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-n*n)+s*s))/2/i),e.x=t,e.y=r,e}var j8e=["Van_der_Grinten_I","VanDerGrinten","vandg"],V8e={init:N8e,forward:D8e,inverse:F8e,names:j8e};function U8e(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function z8e(e){var t=e.x,r=e.y,i=Math.sin(e.y),n=Math.cos(e.y),s=We(t-this.long0),o,a,l,u,h,d,f,m,g,b,w,_,x,I,S,T,$,E,C,O,R,D,F;return this.sphere?Math.abs(this.sin_p12-1)<=Be?(e.x=this.x0+this.a*(Pe-r)*Math.sin(s),e.y=this.y0-this.a*(Pe-r)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Be?(e.x=this.x0+this.a*(Pe+r)*Math.sin(s),e.y=this.y0+this.a*(Pe+r)*Math.cos(s),e):(E=this.sin_p12*i+this.cos_p12*n*Math.cos(s),T=Math.acos(E),$=T/Math.sin(T),e.x=this.x0+this.a*$*n*Math.sin(s),e.y=this.y0+this.a*$*(this.cos_p12*i-this.sin_p12*n*Math.cos(s)),e):(o=L2(this.es),a=N2(this.es),l=D2(this.es),u=F2(this.es),Math.abs(this.sin_p12-1)<=Be?(h=this.a*ds(o,a,l,u,Pe),d=this.a*ds(o,a,l,u,r),e.x=this.x0+(h-d)*Math.sin(s),e.y=this.y0-(h-d)*Math.cos(s),e):Math.abs(this.sin_p12+1)<=Be?(h=this.a*ds(o,a,l,u,Pe),d=this.a*ds(o,a,l,u,r),e.x=this.x0+(h+d)*Math.sin(s),e.y=this.y0+(h+d)*Math.cos(s),e):(f=i/n,m=ov(this.a,this.e,this.sin_p12),g=ov(this.a,this.e,i),b=Math.atan((1-this.es)*f+this.es*m*this.sin_p12/(g*n)),w=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(b)-this.sin_p12*Math.cos(s)),w===0?C=Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):Math.abs(Math.abs(w)-Math.PI)<=Be?C=-Math.asin(this.cos_p12*Math.sin(b)-this.sin_p12*Math.cos(b)):C=Math.asin(Math.sin(s)*Math.cos(b)/Math.sin(w)),_=this.e*this.sin_p12/Math.sqrt(1-this.es),x=this.e*this.cos_p12*Math.cos(w)/Math.sqrt(1-this.es),I=_*x,S=x*x,O=C*C,R=O*C,D=R*C,F=D*C,T=m*C*(1-O*S*(1-S)/6+R/8*I*(1-2*S)+D/120*(S*(4-7*S)-3*_*_*(1-7*S))-F/48*I),e.x=this.x0+T*Math.sin(w),e.y=this.y0+T*Math.cos(w),e))}function B8e(e){e.x-=this.x0,e.y-=this.y0;var t,r,i,n,s,o,a,l,u,h,d,f,m,g,b,w,_,x,I,S,T,$,E;return this.sphere?(t=Math.sqrt(e.x*e.x+e.y*e.y),t>2*Pe*this.a?void 0:(r=t/this.a,i=Math.sin(r),n=Math.cos(r),s=this.long0,Math.abs(t)<=Be?o=this.lat0:(o=fp(n*this.sin_p12+e.y*i*this.cos_p12/t),a=Math.abs(this.lat0)-Pe,Math.abs(a)<=Be?this.lat0>=0?s=We(this.long0+Math.atan2(e.x,-e.y)):s=We(this.long0-Math.atan2(-e.x,e.y)):s=We(this.long0+Math.atan2(e.x*i,t*this.cos_p12*n-e.y*this.sin_p12*i))),e.x=s,e.y=o,e)):(l=L2(this.es),u=N2(this.es),h=D2(this.es),d=F2(this.es),Math.abs(this.sin_p12-1)<=Be?(f=this.a*ds(l,u,h,d,Pe),t=Math.sqrt(e.x*e.x+e.y*e.y),m=f-t,o=tT(m/this.a,l,u,h,d),s=We(this.long0+Math.atan2(e.x,-1*e.y)),e.x=s,e.y=o,e):Math.abs(this.sin_p12+1)<=Be?(f=this.a*ds(l,u,h,d,Pe),t=Math.sqrt(e.x*e.x+e.y*e.y),m=t-f,o=tT(m/this.a,l,u,h,d),s=We(this.long0+Math.atan2(e.x,e.y)),e.x=s,e.y=o,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),w=Math.atan2(e.x,e.y),g=ov(this.a,this.e,this.sin_p12),_=Math.cos(w),x=this.e*this.cos_p12*_,I=-x*x/(1-this.es),S=3*this.es*(1-I)*this.sin_p12*this.cos_p12*_/(1-this.es),T=t/g,$=T-I*(1+I)*Math.pow(T,3)/6-S*(1+3*I)*Math.pow(T,4)/24,E=1-I*$*$/2-T*$*$*$/6,b=Math.asin(this.sin_p12*Math.cos($)+this.cos_p12*Math.sin($)*_),s=We(this.long0+Math.asin(Math.sin(w)*Math.sin($)/Math.cos(b))),o=Math.atan((1-this.es*E*this.sin_p12/Math.sin(b))*Math.tan(b)/(1-this.es)),e.x=s,e.y=o,e))}var G8e=["Azimuthal_Equidistant","aeqd"],q8e={init:U8e,forward:z8e,inverse:B8e,names:G8e};function H8e(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function W8e(e){var t,r,i,n,s,o,a,l,u=e.x,h=e.y;return i=We(u-this.long0),t=Math.sin(h),r=Math.cos(h),n=Math.cos(i),o=this.sin_p14*t+this.cos_p14*r*n,s=1,(o>0||Math.abs(o)<=Be)&&(a=this.a*s*r*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*t-this.sin_p14*r*n)),e.x=a,e.y=l,e}function J8e(e){var t,r,i,n,s,o,a;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),r=fp(t/this.a),i=Math.sin(r),n=Math.cos(r),o=this.long0,Math.abs(t)<=Be?(a=this.lat0,e.x=o,e.y=a,e):(a=fp(n*this.sin_p14+e.y*i*this.cos_p14/t),s=Math.abs(this.lat0)-Pe,Math.abs(s)<=Be?(this.lat0>=0?o=We(this.long0+Math.atan2(e.x,-e.y)):o=We(this.long0-Math.atan2(-e.x,e.y)),e.x=o,e.y=a,e):(o=We(this.long0+Math.atan2(e.x*i,t*this.cos_p14*n-e.y*this.sin_p14*i)),e.x=o,e.y=a,e))}var Z8e=["ortho"],Y8e={init:H8e,forward:W8e,inverse:J8e,names:Z8e},Wr={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},cr={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function K8e(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=Pe-mr/2?this.face=Wr.TOP:this.lat0<=-(Pe-mr/2)?this.face=Wr.BOTTOM:Math.abs(this.long0)<=mr?this.face=Wr.FRONT:Math.abs(this.long0)<=Pe+mr?this.face=this.long0>0?Wr.RIGHT:Wr.LEFT:this.face=Wr.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function X8e(e){var t={x:0,y:0},r,i,n,s,o,a,l={value:0};if(e.x-=this.long0,this.es!==0?r=Math.atan(this.one_minus_f_squared*Math.tan(e.y)):r=e.y,i=e.x,this.face===Wr.TOP)s=Pe-r,i>=mr&&i<=Pe+mr?(l.value=cr.AREA_0,n=i-Pe):i>Pe+mr||i<=-(Pe+mr)?(l.value=cr.AREA_1,n=i>0?i-mi:i+mi):i>-(Pe+mr)&&i<=-mr?(l.value=cr.AREA_2,n=i+Pe):(l.value=cr.AREA_3,n=i);else if(this.face===Wr.BOTTOM)s=Pe+r,i>=mr&&i<=Pe+mr?(l.value=cr.AREA_0,n=-i+Pe):i<mr&&i>=-mr?(l.value=cr.AREA_1,n=-i):i<-mr&&i>=-(Pe+mr)?(l.value=cr.AREA_2,n=-i-Pe):(l.value=cr.AREA_3,n=i>0?-i+mi:-i-mi);else{var u,h,d,f,m,g,b;this.face===Wr.RIGHT?i=$0(i,+Pe):this.face===Wr.BACK?i=$0(i,+mi):this.face===Wr.LEFT&&(i=$0(i,-Pe)),f=Math.sin(r),m=Math.cos(r),g=Math.sin(i),b=Math.cos(i),u=m*b,h=m*g,d=f,this.face===Wr.FRONT?(s=Math.acos(u),n=wS(s,d,h,l)):this.face===Wr.RIGHT?(s=Math.acos(h),n=wS(s,d,-u,l)):this.face===Wr.BACK?(s=Math.acos(-u),n=wS(s,d,-h,l)):this.face===Wr.LEFT?(s=Math.acos(-h),n=wS(s,d,u,l)):(s=n=0,l.value=cr.AREA_0)}return a=Math.atan(12/mi*(n+Math.acos(Math.sin(n)*Math.cos(mr))-Pe)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===cr.AREA_1?a+=Pe:l.value===cr.AREA_2?a+=mi:l.value===cr.AREA_3&&(a+=1.5*mi),t.x=o*Math.cos(a),t.y=o*Math.sin(a),t.x=t.x*this.a+this.x0,t.y=t.y*this.a+this.y0,e.x=t.x,e.y=t.y,e}function Q8e(e){var t={lam:0,phi:0},r,i,n,s,o,a,l,u,h,d={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,i=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),r=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?d.value=cr.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(d.value=cr.AREA_1,r-=Pe):e.x<0&&-e.x>=Math.abs(e.y)?(d.value=cr.AREA_2,r=r<0?r+mi:r-mi):(d.value=cr.AREA_3,r+=Pe),h=mi/12*Math.tan(r),o=Math.sin(h)/(Math.cos(h)-1/Math.sqrt(2)),a=Math.atan(o),n=Math.cos(r),s=Math.tan(i),l=1-n*n*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===Wr.TOP)u=Math.acos(l),t.phi=Pe-u,d.value===cr.AREA_0?t.lam=a+Pe:d.value===cr.AREA_1?t.lam=a<0?a+mi:a-mi:d.value===cr.AREA_2?t.lam=a-Pe:t.lam=a;else if(this.face===Wr.BOTTOM)u=Math.acos(l),t.phi=u-Pe,d.value===cr.AREA_0?t.lam=-a+Pe:d.value===cr.AREA_1?t.lam=-a:d.value===cr.AREA_2?t.lam=-a-Pe:t.lam=a<0?-a-mi:-a+mi;else{var f,m,g;f=l,h=f*f,h>=1?g=0:g=Math.sqrt(1-h)*Math.sin(a),h+=g*g,h>=1?m=0:m=Math.sqrt(1-h),d.value===cr.AREA_1?(h=m,m=-g,g=h):d.value===cr.AREA_2?(m=-m,g=-g):d.value===cr.AREA_3&&(h=m,m=g,g=-h),this.face===Wr.RIGHT?(h=f,f=-m,m=h):this.face===Wr.BACK?(f=-f,m=-m):this.face===Wr.LEFT&&(h=f,f=m,m=-h),t.phi=Math.acos(-g)-Pe,t.lam=Math.atan2(m,f),this.face===Wr.RIGHT?t.lam=$0(t.lam,-Pe):this.face===Wr.BACK?t.lam=$0(t.lam,-mi):this.face===Wr.LEFT&&(t.lam=$0(t.lam,+Pe))}if(this.es!==0){var b,w,_;b=t.phi<0?1:0,w=Math.tan(t.phi),_=this.b/Math.sqrt(w*w+this.one_minus_f_squared),t.phi=Math.atan(Math.sqrt(this.a*this.a-_*_)/(this.one_minus_f*_)),b&&(t.phi=-t.phi)}return t.lam+=this.long0,e.x=t.lam,e.y=t.phi,e}function wS(e,t,r,i){var n;return e<Be?(i.value=cr.AREA_0,n=0):(n=Math.atan2(t,r),Math.abs(n)<=mr?i.value=cr.AREA_0:n>mr&&n<=Pe+mr?(i.value=cr.AREA_1,n-=Pe):n>Pe+mr||n<=-(Pe+mr)?(i.value=cr.AREA_2,n=n>=0?n-mi:n+mi):(i.value=cr.AREA_3,n+=Pe)),n}function $0(e,t){var r=e+t;return r<-mi?r+=hR:r>+mi&&(r-=hR),r}var eDe=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"],tDe={init:K8e,forward:X8e,inverse:Q8e,names:eDe},pR=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],tw=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],wie=.8487,_ie=1.3523,xie=Bd/5,rDe=1/xie,u0=18,rT=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},iDe=function(e,t){return e[1]+t*(2*e[2]+t*3*e[3])};function nDe(e,t,r,i){for(var n=t;i;--i){var s=e(n);if(n-=s,Math.abs(s)<r)break}return n}function sDe(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function oDe(e){var t=We(e.x-this.long0),r=Math.abs(e.y),i=Math.floor(r*xie);i<0?i=0:i>=u0&&(i=u0-1),r=Bd*(r-rDe*i);var n={x:rT(pR[i],r)*t,y:rT(tw[i],r)};return e.y<0&&(n.y=-n.y),n.x=n.x*this.a*wie+this.x0,n.y=n.y*this.a*_ie+this.y0,n}function aDe(e){var t={x:(e.x-this.x0)/(this.a*wie),y:Math.abs(e.y-this.y0)/(this.a*_ie)};if(t.y>=1)t.x/=pR[u0][0],t.y=e.y<0?-Pe:Pe;else{var r=Math.floor(t.y*u0);for(r<0?r=0:r>=u0&&(r=u0-1);;)if(tw[r][0]>t.y)--r;else if(tw[r+1][0]<=t.y)++r;else break;var i=tw[r],n=5*(t.y-i[0])/(tw[r+1][0]-i[0]);n=nDe(function(s){return(rT(i,s)-t.y)/iDe(i,s)},n,Be,100),t.x/=rT(pR[r],n),t.y=(5*r+n)*rs,e.y<0&&(t.y=-t.y)}return t.x=We(t.x+this.long0),t}var lDe=["Robinson","robin"],uDe={init:sDe,forward:oDe,inverse:aDe,names:lDe};function cDe(){this.name="geocent"}function hDe(e){var t=aie(e,this.es,this.a);return t}function dDe(e){var t=lie(e,this.es,this.a,this.b);return t}var pDe=["Geocentric","geocentric","geocent","Geocent"],fDe={init:cDe,forward:hDe,inverse:dDe,names:pDe};function mDe(e){e.Proj.projections.add(bNe),e.Proj.projections.add(b3),e.Proj.projections.add(ONe),e.Proj.projections.add(zNe),e.Proj.projections.add(JNe),e.Proj.projections.add(QNe),e.Proj.projections.add(n6e),e.Proj.projections.add(u6e),e.Proj.projections.add(f6e),e.Proj.projections.add(b6e),e.Proj.projections.add(N6e),e.Proj.projections.add(z6e),e.Proj.projections.add(W6e),e.Proj.projections.add(Q6e),e.Proj.projections.add(n8e),e.Proj.projections.add(u8e),e.Proj.projections.add(f8e),e.Proj.projections.add(b8e),e.Proj.projections.add(I8e),e.Proj.projections.add(C8e),e.Proj.projections.add(L8e),e.Proj.projections.add(V8e),e.Proj.projections.add(q8e),e.Proj.projections.add(Y8e),e.Proj.projections.add(tDe),e.Proj.projections.add(uDe),e.Proj.projections.add(fDe)}Pr.defaultDatum="WGS84";Pr.Proj=Ru;Pr.WGS84=new Pr.Proj("WGS84");Pr.Point=sv;Pr.toPoint=uie;Pr.defs=is;Pr.transform=eT;Pr.mgrs=ZLe;Pr.version='{"major":"4","minor":"0","patch":"0-alpha","timestamp":"Thu Jun 16 15:55:17 2022 -0400","hash":"c25ad4fcbec607b751da23743d1223a1eb20e0f7"}';mDe(Pr);const gB="EPSG:4326";class yDe{espgWorker;constructor(){this.espgWorker=this.defaultEpsgLookup,Pr.defs("EPSG:3978","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Pr.defs("EPSG:3979","+proj=lcc +lat_1=49 +lat_2=77 +lat_0=49 +lon_0=-95 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Pr.defs("EPSG:54004","+proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs"),Pr.defs("EPSG:102100",Pr.defs("EPSG:3857")),Pr.defs("EPSG:102187","+proj=tmerc +lat_0=0 +lon_0=-114 +k=0.9999 +x_0=0 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),Pr.defs("EPSG:102190","+proj=aea +lat_1=50 +lat_2=58.5 +lat_0=45 +lon_0=-126 +x_0=1000000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs");let t=1;for(;t<=60;){const r=t<10?`0${t}`:t;Pr.defs(`EPSG:326${r}`,`+proj=utm +zone=${t} +ellps=WGS84 +datum=WGS84 +units=m +no_defs`),t++}}defaultEpsgLookup(t){const r=/urn:ogc:def:crs:EPSG::(\d+)/,i=/EPSG:(\d+)/,n=String(t).match(r)||String(t).match(i)||[];if(n.length<2)throw new Error("Invalid code provided.");return new Promise((s,o)=>{const a=(window.location.protocol==="https:"?"https:":"http:")+`//epsg.io/${n[1]}.proj4`;Ee(a,{responseType:"text"}).then(h=>{h.data?s(h.data):o()},h=>{o(h)})})}epsgLookup(t){return this.espgWorker(t)}setEpsgLookup(t){this.espgWorker=t}normalizeProj(t){if(typeof t=="object"){if(t.wkid)return"EPSG:"+t.wkid;if(t.wkt)return t.wkt}else{if(typeof t=="number")return"EPSG:"+t;if(typeof t=="string")return t}throw new Error("Bad argument type, please provide a string, integer or SpatialReference object.")}async checkProj(t){let r,i="";if(t.wkt)return!0;try{r=this.normalizeProj(t)}catch{return!1}t.latestWkid&&(i=this.normalizeProj(t.latestWkid));const n=(l,u)=>{l!==u&&Pr.defs(u,Pr.defs(l))};if(Pr.defs(r))return!0;if(i&&Pr.defs(i))return n(i,r),!0;const s=async l=>{const u=await this.epsgLookup(l);return u===null||u===""?!1:(Pr.defs(l,u),!0)};return await(i?s(i):Promise.resolve(!1))?(n(i,r),!0):s(r)}async checkProjBomber(t){if(t.length>0){const r=t.pop();if(await this.checkProj(r))return this.checkProjBomber(t);throw console.error("Unable to parse or locate projection information for this item:",r),new Error("Could not find projection information, see console for details")}}async projectGeoJson(t,r,i){let n=this.normalizeProj(r),s=this.normalizeProj(i);if(!n&&t.crs&&t.crs.type==="name"&&(n=Bt.parseGeoJsonCrs(t.crs)),n||(n=gB),s||(s=gB),s===n)return t;await this.checkProjBomber([n,s]);const o=Pr(n,s).forward;return x8.exports.Tools.applyConverter(t,o)}async projectGeometry(t,r){if(r.type===Vt.EXTENT)return this.projectExtent(t,r);await this.checkProjBomber([t,r.sr]);const i=r.toGeoJSON(),n=await this.projectGeoJson(i,this.normalizeProj(r.sr),this.normalizeProj(t)),s=R0.geom.geomGeoJsonToRamp(n,r.id);return s.sr=Bt.parseSR(t),s}async projectExtent(t,r){const i=(b,w,_)=>{if(_===0)return[b,w];const x=[(b[0]+w[0])/2,(b[1]+w[1])/2];if(_===1)return[b,x,w];if(_>1){const I=i(b,x,_-1),S=i(x,w,_-1);return I.concat(S.slice(1))}return[[]]},n=r.toPolygonArray().pop()||[];let s=[];[0,1,2,3].map(b=>i(n[b],n[b+1],3).slice(1)).forEach(b=>s=s.concat(b));const o=new Ln("warpy",[s],r.sr,!0),a=await this.projectGeometry(t,o),l=a.toArray().pop()||[],u=l.map(b=>b[0]),h=l.map(b=>b[1]),d=Math.min.apply(null,u),f=Math.max.apply(null,u),m=Math.min.apply(null,h),g=Math.max.apply(null,h);return Ei.fromParams(r.id+"_projected",d,m,f,g,a.sr)}}class gDe{DEFAULT_MERCATOR="DEFAULT_ESRI_World_AuxMerc_3857";DEFAULT_LAMBERT="DEFAULT_NRCAN_Lambert_3978";proj;geom;sharedUtils;constructor(){this.proj=new yDe,this.geom=new zRe,this.sharedUtils=new nLe}defaultTileSchemas(){return[this.DEFAULT_LAMBERT,this.DEFAULT_MERCATOR]}defaultLODs(t){const r=i=>i.map(n=>({level:n[0],resolution:n[1],scale:n[2]}));if(t===this.DEFAULT_LAMBERT)return r([[0,38364.660062653464,145e6],[1,22489.62831258996,85e6],[2,13229.193125052918,5e7],[3,7937.5158750317505,3e7],[4,4630.2175937685215,175e5],[5,2645.8386250105837,1e7],[6,1587.5031750063501,6e6],[7,926.0435187537042,35e5],[8,529.1677250021168,2e6],[9,317.50063500127004,12e5],[10,185.20870375074085,7e5],[11,111.12522225044451,42e4],[12,66.1459656252646,25e4],[13,38.36466006265346,145e3],[14,22.48962831258996,85e3],[15,13.229193125052918,5e4],[16,7.9375158750317505,3e4],[17,4.6302175937685215,17500]]);if(t===this.DEFAULT_MERCATOR)return r([[0,19567.87924099992,73957190948944e-6],[1,9783.93962049996,36978595474472e-6],[2,4891.96981024998,18489297737236e-6],[3,2445.98490512499,9244648868618e-6],[4,1222.992452562495,4622324434309e-6],[5,611.4962262813797,2311162217155e-6],[6,305.74811314055756,1155581108577e-6],[7,152.87405657041106,577790.554289],[8,76.43702828507324,288895.277144],[9,38.21851414253662,144447.638572],[10,19.10925707126831,72223.819286],[11,9.554628535634155,36111.909643],[12,4.77731426794937,18055.954822],[13,2.388657133974685,9027.977411],[14,1.1943285668550503,4513.988705],[15,.5971642835598172,2256.994353],[16,.29858214164761665,1128.497176],[17,.14929107082380833,564.248588],[18,.07464553541190416,282.124294],[19,.03732276770595208,141.062147],[20,.01866138385297604,70.5310735]]);throw new Error(`Unknown tile schema key passed to LOD defaulter ${t}`)}}class Gi{$iApi;get $vApp(){return this.$iApi.$vApp}get $element(){return this.$iApi.$element}constructor(t){this.$iApi=t}}function vDe(e){return typeof e=="function"&&e.render&&typeof e.render=="function"}function bDe(e){const t=["data","props","propsData","computed","methods","watch","template","render","components","model"];return typeof e=="object"&&!e.functional&&t.some(r=>e[r]!==void 0)}function wDe(e){return typeof e=="object"&&e.default!==void 0}var Sie={exports:{}};function A8(){}A8.prototype={on:function(e,t,r){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:r}),this},once:function(e,t,r){var i=this;function n(){i.off(e,n),t.apply(r,arguments)}return n._=t,this.on(e,n,r)},emit:function(e){var t=[].slice.call(arguments,1),r=((this.e||(this.e={}))[e]||[]).slice(),i=0,n=r.length;for(i;i<n;i++)r[i].fn.apply(r[i].ctx,t);return this},off:function(e,t){var r=this.e||(this.e={}),i=r[e],n=[];if(i&&t)for(var s=0,o=i.length;s<o;s++)i[s].fn!==t&&i[s].fn._!==t&&n.push(i[s]);return n.length?r[e]=n:delete r[e],this}};Sie.exports=A8;var _De=Sie.exports.TinyEmitter=A8;class xDe{items={};order=[];temporary=[]}class Tit{id;options;componentId;constructor(t){const r={options:{},...t};({id:this.id,options:this.options}=r)}}function Bn(e,t){const r=Object.create(null),i=e.split(",");for(let n=0;n<i.length;n++)r[i[n]]=!0;return t?n=>!!r[n.toLowerCase()]:n=>!!r[n]}const Lu={[1]:"TEXT",[2]:"CLASS",[4]:"STYLE",[8]:"PROPS",[16]:"FULL_PROPS",[32]:"HYDRATE_EVENTS",[64]:"STABLE_FRAGMENT",[128]:"KEYED_FRAGMENT",[256]:"UNKEYED_FRAGMENT",[512]:"NEED_PATCH",[1024]:"DYNAMIC_SLOTS",[2048]:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},SDe={[1]:"STABLE",[2]:"DYNAMIC",[3]:"FORWARDED"},MDe="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt",IDe=Bn(MDe),vB=2;function TDe(e,t=0,r=e.length){let i=e.split(/(\r?\n)/);const n=i.filter((a,l)=>l%2===1);i=i.filter((a,l)=>l%2===0);let s=0;const o=[];for(let a=0;a<i.length;a++)if(s+=i[a].length+(n[a]&&n[a].length||0),s>=t){for(let l=a-vB;l<=a+vB||r>s;l++){if(l<0||l>=i.length)continue;const u=l+1;o.push(`${u}${" ".repeat(Math.max(3-String(u).length,0))}|  ${i[l]}`);const h=i[l].length,d=n[l]&&n[l].length||0;if(l===a){const f=t-(s-(h+d)),m=Math.max(1,r>s?h-f:r-t);o.push("   |  "+" ".repeat(f)+"^".repeat(m))}else if(l>a){if(r>s){const f=Math.max(Math.min(r-s,h),1);o.push("   |  "+"^".repeat(f))}s+=h+d}}break}return o.join(`
`)}const $De="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",EDe=Bn($De);function Mie(e){return!!e||e===""}function $p(e){if(Ge(e)){const t={};for(let r=0;r<e.length;r++){const i=e[r],n=Tt(i)?Iie(i):$p(i);if(n)for(const s in n)t[s]=n[s]}return t}else{if(Tt(e))return e;if(pr(e))return e}}const ADe=/;(?![^(]*\))/g,CDe=/:(.+)/;function Iie(e){const t={};return e.split(ADe).forEach(r=>{if(r){const i=r.split(CDe);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function zn(e){let t="";if(Tt(e))t=e;else if(Ge(e))for(let r=0;r<e.length;r++){const i=zn(e[r]);i&&(t+=i+" ")}else if(pr(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function Tie(e){if(!e)return null;let{class:t,style:r}=e;return t&&!Tt(t)&&(e.class=zn(t)),r&&(e.style=$p(r)),e}const kDe="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",ODe="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistanceLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",PDe="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",$ie=Bn(kDe),Eie=Bn(ODe),RDe=Bn(PDe);function LDe(e,t){if(e.length!==t.length)return!1;let r=!0;for(let i=0;r&&i<e.length;i++)r=mp(e[i],t[i]);return r}function mp(e,t){if(e===t)return!0;let r=bB(e),i=bB(t);if(r||i)return r&&i?e.getTime()===t.getTime():!1;if(r=Ge(e),i=Ge(t),r||i)return r&&i?LDe(e,t):!1;if(r=pr(e),i=pr(t),r||i){if(!r||!i)return!1;const n=Object.keys(e).length,s=Object.keys(t).length;if(n!==s)return!1;for(const o in e){const a=e.hasOwnProperty(o),l=t.hasOwnProperty(o);if(a&&!l||!a&&l||!mp(e[o],t[o]))return!1}}return String(e)===String(t)}function J$(e,t){return e.findIndex(r=>mp(r,t))}const jr=e=>Tt(e)?e:e==null?"":Ge(e)||pr(e)&&(e.toString===Cie||!ft(e.toString))?JSON.stringify(e,Aie,2):String(e),Aie=(e,t)=>t&&t.__v_isRef?Aie(e,t.value):Tm(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[i,n])=>(r[`${i} =>`]=n,r),{})}:Ey(t)?{[`Set(${t.size})`]:[...t.values()]}:pr(t)&&!Ge(t)&&!kie(t)?String(t):t,Gt=Object.freeze({}),E0=Object.freeze([]),bn=()=>{},Rw=()=>!1,NDe=/^on[^a-z]/,gh=e=>NDe.test(e),iT=e=>e.startsWith("onUpdate:"),Wt=Object.assign,C8=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},DDe=Object.prototype.hasOwnProperty,zt=(e,t)=>DDe.call(e,t),Ge=Array.isArray,Tm=e=>Y$(e)==="[object Map]",Ey=e=>Y$(e)==="[object Set]",bB=e=>e instanceof Date,ft=e=>typeof e=="function",Tt=e=>typeof e=="string",u1=e=>typeof e=="symbol",pr=e=>e!==null&&typeof e=="object",Z$=e=>pr(e)&&ft(e.then)&&ft(e.catch),Cie=Object.prototype.toString,Y$=e=>Cie.call(e),k8=e=>Y$(e).slice(8,-1),kie=e=>Y$(e)==="[object Object]",O8=e=>Tt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,$m=Bn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Oie=Bn("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),K$=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},FDe=/-(\w)/g,In=K$(e=>e.replace(FDe,(t,r)=>r?r.toUpperCase():"")),jDe=/\B([A-Z])/g,ko=K$(e=>e.replace(jDe,"-$1").toLowerCase()),Tl=K$(e=>e.charAt(0).toUpperCase()+e.slice(1)),rl=K$(e=>e?`on${Tl(e)}`:""),P_=(e,t)=>!Object.is(e,t),Pd=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},nT=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},yp=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let wB;const Pie=()=>wB||(wB=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Rie(e,...t){console.warn(`[Vue warn] ${e}`,...t)}let la;class X${constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&la&&(this.parent=la,this.index=(la.scopes||(la.scopes=[])).push(this)-1)}run(t){if(this.active)try{return la=this,t()}finally{la=this.parent}else Rie("cannot run an inactive effect scope.")}on(){la=this}off(){la=this.parent}stop(t){if(this.active){let r,i;for(r=0,i=this.effects.length;r<i;r++)this.effects[r].stop();for(r=0,i=this.cleanups.length;r<i;r++)this.cleanups[r]();if(this.scopes)for(r=0,i=this.scopes.length;r<i;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.active=!1}}}function Lie(e){return new X$(e)}function Nie(e,t=la){t&&t.active&&t.effects.push(e)}function Die(){return la}function Fie(e){la?la.cleanups.push(e):Rie("onScopeDispose() is called when there is no active effect scope to be associated with.")}const P8=e=>{const t=new Set(e);return t.w=0,t.n=0,t},jie=e=>(e.w&gp)>0,Vie=e=>(e.n&gp)>0,VDe=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=gp},UDe=e=>{const{deps:t}=e;if(t.length){let r=0;for(let i=0;i<t.length;i++){const n=t[i];jie(n)&&!Vie(n)?n.delete(e):t[r++]=n,n.w&=~gp,n.n&=~gp}t.length=r}},fR=new WeakMap;let rw=0,gp=1;const mR=30;let Ps;const Em=Symbol("iterate"),yR=Symbol("Map key iterate");class c1{constructor(t,r=null,i){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Nie(this,i)}run(){if(!this.active)return this.fn();let t=Ps,r=ip;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Ps,Ps=this,ip=!0,gp=1<<++rw,rw<=mR?VDe(this):_B(this),this.fn()}finally{rw<=mR&&UDe(this),gp=1<<--rw,Ps=this.parent,ip=r,this.parent=void 0}}stop(){this.active&&(_B(this),this.onStop&&this.onStop(),this.active=!1)}}function _B(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}function Uie(e,t){e.effect&&(e=e.effect.fn);const r=new c1(e);t&&(Wt(r,t),t.scope&&Nie(r,t.scope)),(!t||!t.lazy)&&r.run();const i=r.run.bind(r);return i.effect=r,i}function zie(e){e.effect.stop()}let ip=!0;const Bie=[];function Ay(){Bie.push(ip),ip=!1}function Cy(){const e=Bie.pop();ip=e===void 0?!0:e}function Do(e,t,r){if(ip&&Ps){let i=fR.get(e);i||fR.set(e,i=new Map);let n=i.get(r);n||i.set(r,n=P8()),Gie(n,{effect:Ps,target:e,type:t,key:r})}}function Gie(e,t){let r=!1;rw<=mR?Vie(e)||(e.n|=gp,r=!jie(e)):r=!e.has(Ps),r&&(e.add(Ps),Ps.deps.push(e),Ps.onTrack&&Ps.onTrack(Object.assign({effect:Ps},t)))}function vh(e,t,r,i,n,s){const o=fR.get(e);if(!o)return;let a=[];if(t==="clear")a=[...o.values()];else if(r==="length"&&Ge(e))o.forEach((u,h)=>{(h==="length"||h>=i)&&a.push(u)});else switch(r!==void 0&&a.push(o.get(r)),t){case"add":Ge(e)?O8(r)&&a.push(o.get("length")):(a.push(o.get(Em)),Tm(e)&&a.push(o.get(yR)));break;case"delete":Ge(e)||(a.push(o.get(Em)),Tm(e)&&a.push(o.get(yR)));break;case"set":Tm(e)&&a.push(o.get(Em));break}const l={target:e,type:t,key:r,newValue:i,oldValue:n,oldTarget:s};if(a.length===1)a[0]&&gR(a[0],l);else{const u=[];for(const h of a)h&&u.push(...h);gR(P8(u),l)}}function gR(e,t){for(const r of Ge(e)?e:[...e])(r!==Ps||r.allowRecurse)&&(r.onTrigger&&r.onTrigger(Wt({effect:r},t)),r.scheduler?r.scheduler():r.run())}const zDe=Bn("__proto__,__v_isRef,__isVue"),qie=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(u1)),BDe=Q$(),GDe=Q$(!1,!0),qDe=Q$(!0),HDe=Q$(!0,!0),xB=WDe();function WDe(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const i=it(this);for(let s=0,o=this.length;s<o;s++)Do(i,"get",s+"");const n=i[t](...r);return n===-1||n===!1?i[t](...r.map(it)):n}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){Ay();const i=it(this)[t].apply(this,r);return Cy(),i}}),e}function Q$(e=!1,t=!1){return function(i,n,s){if(n==="__v_isReactive")return!e;if(n==="__v_isReadonly")return e;if(n==="__v_isShallow")return t;if(n==="__v_raw"&&s===(e?t?Qie:Xie:t?Kie:Yie).get(i))return i;const o=Ge(i);if(!e&&o&&zt(xB,n))return Reflect.get(xB,n,s);const a=Reflect.get(i,n,s);return(u1(n)?qie.has(n):zDe(n))||(e||Do(i,"get",n),t)?a:vr(a)?!o||!O8(n)?a.value:a:pr(a)?e?rE(a):eo(a):a}}const JDe=Hie(),ZDe=Hie(!0);function Hie(e=!1){return function(r,i,n,s){let o=r[i];if(bh(o)&&vr(o)&&!vr(n))return!1;if(!e&&!bh(n)&&(nE(n)||(n=it(n),o=it(o)),!Ge(r)&&vr(o)&&!vr(n)))return o.value=n,!0;const a=Ge(r)&&O8(i)?Number(i)<r.length:zt(r,i),l=Reflect.set(r,i,n,s);return r===it(s)&&(a?P_(n,o)&&vh(r,"set",i,n,o):vh(r,"add",i,n)),l}}function YDe(e,t){const r=zt(e,t),i=e[t],n=Reflect.deleteProperty(e,t);return n&&r&&vh(e,"delete",t,void 0,i),n}function KDe(e,t){const r=Reflect.has(e,t);return(!u1(t)||!qie.has(t))&&Do(e,"has",t),r}function XDe(e){return Do(e,"iterate",Ge(e)?"length":Em),Reflect.ownKeys(e)}const Wie={get:BDe,set:JDe,deleteProperty:YDe,has:KDe,ownKeys:XDe},Jie={get:qDe,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},QDe=Wt({},Wie,{get:GDe,set:ZDe}),eFe=Wt({},Jie,{get:HDe}),R8=e=>e,eE=e=>Reflect.getPrototypeOf(e);function _S(e,t,r=!1,i=!1){e=e.__v_raw;const n=it(e),s=it(t);t!==s&&!r&&Do(n,"get",t),!r&&Do(n,"get",s);const{has:o}=eE(n),a=i?R8:r?N8:R_;if(o.call(n,t))return a(e.get(t));if(o.call(n,s))return a(e.get(s));e!==n&&e.get(t)}function xS(e,t=!1){const r=this.__v_raw,i=it(r),n=it(e);return e!==n&&!t&&Do(i,"has",e),!t&&Do(i,"has",n),e===n?r.has(e):r.has(e)||r.has(n)}function SS(e,t=!1){return e=e.__v_raw,!t&&Do(it(e),"iterate",Em),Reflect.get(e,"size",e)}function SB(e){e=it(e);const t=it(this);return eE(t).has.call(t,e)||(t.add(e),vh(t,"add",e,e)),this}function MB(e,t){t=it(t);const r=it(this),{has:i,get:n}=eE(r);let s=i.call(r,e);s?Zie(r,i,e):(e=it(e),s=i.call(r,e));const o=n.call(r,e);return r.set(e,t),s?P_(t,o)&&vh(r,"set",e,t,o):vh(r,"add",e,t),this}function IB(e){const t=it(this),{has:r,get:i}=eE(t);let n=r.call(t,e);n?Zie(t,r,e):(e=it(e),n=r.call(t,e));const s=i?i.call(t,e):void 0,o=t.delete(e);return n&&vh(t,"delete",e,void 0,s),o}function TB(){const e=it(this),t=e.size!==0,r=Tm(e)?new Map(e):new Set(e),i=e.clear();return t&&vh(e,"clear",void 0,void 0,r),i}function MS(e,t){return function(i,n){const s=this,o=s.__v_raw,a=it(o),l=t?R8:e?N8:R_;return!e&&Do(a,"iterate",Em),o.forEach((u,h)=>i.call(n,l(u),l(h),s))}}function IS(e,t,r){return function(...i){const n=this.__v_raw,s=it(n),o=Tm(s),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,u=n[e](...i),h=r?R8:t?N8:R_;return!t&&Do(s,"iterate",l?yR:Em),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:a?[h(d[0]),h(d[1])]:h(d),done:f}},[Symbol.iterator](){return this}}}}function Wh(e){return function(...t){{const r=t[0]?`on key "${t[0]}" `:"";console.warn(`${Tl(e)} operation ${r}failed: target is readonly.`,it(this))}return e==="delete"?!1:this}}function tFe(){const e={get(s){return _S(this,s)},get size(){return SS(this)},has:xS,add:SB,set:MB,delete:IB,clear:TB,forEach:MS(!1,!1)},t={get(s){return _S(this,s,!1,!0)},get size(){return SS(this)},has:xS,add:SB,set:MB,delete:IB,clear:TB,forEach:MS(!1,!0)},r={get(s){return _S(this,s,!0)},get size(){return SS(this,!0)},has(s){return xS.call(this,s,!0)},add:Wh("add"),set:Wh("set"),delete:Wh("delete"),clear:Wh("clear"),forEach:MS(!0,!1)},i={get(s){return _S(this,s,!0,!0)},get size(){return SS(this,!0)},has(s){return xS.call(this,s,!0)},add:Wh("add"),set:Wh("set"),delete:Wh("delete"),clear:Wh("clear"),forEach:MS(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{e[s]=IS(s,!1,!1),r[s]=IS(s,!0,!1),t[s]=IS(s,!1,!0),i[s]=IS(s,!0,!0)}),[e,r,t,i]}const[rFe,iFe,nFe,sFe]=tFe();function tE(e,t){const r=t?e?sFe:nFe:e?iFe:rFe;return(i,n,s)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?i:Reflect.get(zt(r,n)&&n in i?r:i,n,s)}const oFe={get:tE(!1,!1)},aFe={get:tE(!1,!0)},lFe={get:tE(!0,!1)},uFe={get:tE(!0,!0)};function Zie(e,t,r){const i=it(r);if(i!==r&&t.call(e,i)){const n=k8(e);console.warn(`Reactive ${n} contains both the raw and reactive versions of the same object${n==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Yie=new WeakMap,Kie=new WeakMap,Xie=new WeakMap,Qie=new WeakMap;function cFe(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function hFe(e){return e.__v_skip||!Object.isExtensible(e)?0:cFe(k8(e))}function eo(e){return bh(e)?e:iE(e,!1,Wie,oFe,Yie)}function L8(e){return iE(e,!1,QDe,aFe,Kie)}function rE(e){return iE(e,!0,Jie,lFe,Xie)}function Gd(e){return iE(e,!0,eFe,uFe,Qie)}function iE(e,t,r,i,n){if(!pr(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const s=n.get(e);if(s)return s;const o=hFe(e);if(o===0)return e;const a=new Proxy(e,o===2?i:r);return n.set(e,a),a}function ml(e){return bh(e)?ml(e.__v_raw):!!(e&&e.__v_isReactive)}function bh(e){return!!(e&&e.__v_isReadonly)}function nE(e){return!!(e&&e.__v_isShallow)}function av(e){return ml(e)||bh(e)}function it(e){const t=e&&e.__v_raw;return t?it(t):e}function Gn(e){return nT(e,"__v_skip",!0),e}const R_=e=>pr(e)?eo(e):e,N8=e=>pr(e)?rE(e):e;function D8(e){ip&&Ps&&(e=it(e),Gie(e.dep||(e.dep=P8()),{target:e,type:"get",key:"value"}))}function sE(e,t){e=it(e),e.dep&&gR(e.dep,{target:e,type:"set",key:"value",newValue:t})}function vr(e){return!!(e&&e.__v_isRef===!0)}function Xi(e){return tne(e,!1)}function ene(e){return tne(e,!0)}function tne(e,t){return vr(e)?e:new dFe(e,t)}class dFe{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:it(t),this._value=r?t:R_(t)}get value(){return D8(this),this._value}set value(t){t=this.__v_isShallow?t:it(t),P_(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:R_(t),sE(this,t))}}function rne(e){sE(e,e.value)}function L_(e){return vr(e)?e.value:e}const pFe={get:(e,t,r)=>L_(Reflect.get(e,t,r)),set:(e,t,r,i)=>{const n=e[t];return vr(n)&&!vr(r)?(n.value=r,!0):Reflect.set(e,t,r,i)}};function oE(e){return ml(e)?e:new Proxy(e,pFe)}class fFe{constructor(t){this.dep=void 0,this.__v_isRef=!0;const{get:r,set:i}=t(()=>D8(this),()=>sE(this));this._get=r,this._set=i}get value(){return this._get()}set value(t){this._set(t)}}function ine(e){return new fFe(e)}function nne(e){av(e)||console.warn("toRefs() expects a reactive object but received a plain one.");const t=Ge(e)?new Array(e.length):{};for(const r in e)t[r]=F8(e,r);return t}class mFe{constructor(t,r,i){this._object=t,this._key=r,this._defaultValue=i,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function F8(e,t,r){const i=e[t];return vr(i)?i:new mFe(e,t,r)}class yFe{constructor(t,r,i,n){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new c1(t,()=>{this._dirty||(this._dirty=!0,sE(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!n,this.__v_isReadonly=i}get value(){const t=it(this);return D8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function gFe(e,t,r=!1){let i,n;const s=ft(e);s?(i=e,n=()=>{console.warn("Write operation failed: computed value is readonly")}):(i=e.get,n=e.set);const o=new yFe(i,n,s||!n,r);return t&&!r&&(o.effect.onTrack=t.onTrack,o.effect.onTrigger=t.onTrigger),o}Promise.resolve();const Am=[];function Lw(e){Am.push(e)}function Nw(){Am.pop()}function xe(e,...t){Ay();const r=Am.length?Am[Am.length-1].component:null,i=r&&r.appContext.config.warnHandler,n=vFe();if(i)yl(i,r,11,[e+t.join(""),r&&r.proxy,n.map(({vnode:s})=>`at <${gE(r,s.type)}>`).join(`
`),n]);else{const s=[`[Vue warn]: ${e}`,...t];n.length&&s.push(`
`,...bFe(n)),console.warn(...s)}Cy()}function vFe(){let e=Am[Am.length-1];if(!e)return[];const t=[];for(;e;){const r=t[0];r&&r.vnode===e?r.recurseCount++:t.push({vnode:e,recurseCount:0});const i=e.component&&e.component.parent;e=i&&i.vnode}return t}function bFe(e){const t=[];return e.forEach((r,i)=>{t.push(...i===0?[]:[`
`],...wFe(r))}),t}function wFe({vnode:e,recurseCount:t}){const r=t>0?`... (${t} recursive calls)`:"",i=e.component?e.component.parent==null:!1,n=` at <${gE(e.component,e.type,i)}`,s=">"+r;return e.props?[n,..._Fe(e.props),s]:[n+s]}function _Fe(e){const t=[],r=Object.keys(e);return r.slice(0,3).forEach(i=>{t.push(...sne(i,e[i]))}),r.length>3&&t.push(" ..."),t}function sne(e,t,r){return Tt(t)?(t=JSON.stringify(t),r?t:[`${e}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?r?t:[`${e}=${t}`]:vr(t)?(t=sne(e,it(t.value),!0),r?t:[`${e}=Ref<`,t,">"]):ft(t)?[`${e}=fn${t.name?`<${t.name}>`:""}`]:(t=it(t),r?t:[`${e}=`,t])}const j8={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function yl(e,t,r,i){let n;try{n=i?e(...i):e()}catch(s){Ep(s,t,r)}return n}function Bs(e,t,r,i){if(ft(e)){const s=yl(e,t,r,i);return s&&Z$(s)&&s.catch(o=>{Ep(o,t,r)}),s}const n=[];for(let s=0;s<e.length;s++)n.push(Bs(e[s],t,r,i));return n}function Ep(e,t,r,i=!0){const n=t?t.vnode:null;if(t){let s=t.parent;const o=t.proxy,a=j8[r];for(;s;){const u=s.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,o,a)===!1)return}s=s.parent}const l=t.appContext.config.errorHandler;if(l){yl(l,null,10,[e,o,a]);return}}xFe(e,r,n,i)}function xFe(e,t,r,i=!0){{const n=j8[t];if(r&&Lw(r),xe(`Unhandled error${n?` during execution of ${n}`:""}`),r&&Nw(),i)throw e;console.error(e)}}let sT=!1,vR=!1;const So=[];let Xc=0;const Dw=[];let qg=null,Rf=0;const Fw=[];let jc=null,Lf=0;const one=Promise.resolve();let V8=null,bR=null;const SFe=100;function j2(e){const t=V8||one;return e?t.then(this?e.bind(this):e):t}function MFe(e){let t=Xc+1,r=So.length;for(;t<r;){const i=t+r>>>1;N_(So[i])<e?t=i+1:r=i}return t}function aE(e){(!So.length||!So.includes(e,sT&&e.allowRecurse?Xc+1:Xc))&&e!==bR&&(e.id==null?So.push(e):So.splice(MFe(e.id),0,e),ane())}function ane(){!sT&&!vR&&(vR=!0,V8=one.then(une))}function IFe(e){const t=So.indexOf(e);t>Xc&&So.splice(t,1)}function lne(e,t,r,i){Ge(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?i+1:i))&&r.push(e),ane()}function TFe(e){lne(e,qg,Dw,Rf)}function V2(e){lne(e,jc,Fw,Lf)}function U8(e,t=null){if(Dw.length){for(bR=t,qg=[...new Set(Dw)],Dw.length=0,e=e||new Map,Rf=0;Rf<qg.length;Rf++)z8(e,qg[Rf])||qg[Rf]();qg=null,Rf=0,bR=null,U8(e,t)}}function oT(e){if(Fw.length){const t=[...new Set(Fw)];if(Fw.length=0,jc){jc.push(...t);return}for(jc=t,e=e||new Map,jc.sort((r,i)=>N_(r)-N_(i)),Lf=0;Lf<jc.length;Lf++)z8(e,jc[Lf])||jc[Lf]();jc=null,Lf=0}}const N_=e=>e.id==null?1/0:e.id;function une(e){vR=!1,sT=!0,e=e||new Map,U8(e),So.sort((r,i)=>N_(r)-N_(i));const t=r=>z8(e,r);try{for(Xc=0;Xc<So.length;Xc++){const r=So[Xc];if(r&&r.active!==!1){if(t(r))continue;yl(r,null,14)}}}finally{Xc=0,So.length=0,oT(e),sT=!1,V8=null,(So.length||Dw.length||Fw.length)&&une(e)}}function z8(e,t){if(!e.has(t))e.set(t,1);else{const r=e.get(t);if(r>SFe){const i=t.ownerInstance,n=i&&V_(i.type);return xe(`Maximum recursive updates exceeded${n?` in component <${n}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else e.set(t,r+1)}}let np=!1;const Hg=new Set;Pie().__VUE_HMR_RUNTIME__={createRecord:K5(cne),rerender:K5(AFe),reload:K5(CFe)};const ty=new Map;function $Fe(e){const t=e.type.__hmrId;let r=ty.get(t);r||(cne(t,e.type),r=ty.get(t)),r.instances.add(e)}function EFe(e){ty.get(e.type.__hmrId).instances.delete(e)}function cne(e,t){return ty.has(e)?!1:(ty.set(e,{initialDef:jw(t),instances:new Set}),!0)}function jw(e){return Yne(e)?e.__vccOpts:e}function AFe(e,t){const r=ty.get(e);!r||(r.initialDef.render=t,[...r.instances].forEach(i=>{t&&(i.render=t,jw(i.type).render=t),i.renderCache=[],np=!0,i.update(),np=!1}))}function CFe(e,t){const r=ty.get(e);if(!r)return;t=jw(t),$B(r.initialDef,t);const i=[...r.instances];for(const n of i){const s=jw(n.type);Hg.has(s)||(s!==r.initialDef&&$B(s,t),Hg.add(s)),n.appContext.optionsCache.delete(n.type),n.ceReload?(Hg.add(s),n.ceReload(t.styles),Hg.delete(s)):n.parent?(aE(n.parent.update),n.parent.type.__asyncLoader&&n.parent.ceReload&&n.parent.ceReload(t.styles)):n.appContext.reload?n.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}V2(()=>{for(const n of i)Hg.delete(jw(n.type))})}function $B(e,t){Wt(e,t);for(const r in e)r!=="__file"&&!(r in t)&&delete e[r]}function K5(e){return(t,r)=>{try{return e(t,r)}catch(i){console.error(i),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Qc,iw=[],wR=!1;function U2(e,...t){Qc?Qc.emit(e,...t):wR||iw.push({event:e,args:t})}function lE(e,t){var r,i;Qc=e,Qc?(Qc.enabled=!0,iw.forEach(({event:n,args:s})=>Qc.emit(n,...s)),iw=[]):typeof window<"u"&&window.HTMLElement&&!(!((i=(r=window.navigator)===null||r===void 0?void 0:r.userAgent)===null||i===void 0)&&i.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(s=>{lE(s,t)}),setTimeout(()=>{Qc||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,wR=!0,iw=[])},3e3)):(wR=!0,iw=[])}function kFe(e,t){U2("app:init",e,t,{Fragment:hr,Text:Hu,Comment:Ri,Static:ah})}function OFe(e){U2("app:unmount",e)}const _R=B8("component:added"),hne=B8("component:updated"),PFe=B8("component:removed");function B8(e){return t=>{U2(e,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const RFe=dne("perf:start"),LFe=dne("perf:end");function dne(e){return(t,r,i)=>{U2(e,t.appContext.app,t.uid,t,r,i)}}function NFe(e,t,r){U2("component:emit",e.appContext.app,e,t,r)}function DFe(e,t,...r){const i=e.vnode.props||Gt;{const{emitsOptions:h,propsOptions:[d]}=e;if(h)if(!(t in h))(!d||!(rl(t)in d))&&xe(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${rl(t)}" prop.`);else{const f=h[t];ft(f)&&(f(...r)||xe(`Invalid event arguments: event validation failed for event "${t}".`))}}let n=r;const s=t.startsWith("update:"),o=s&&t.slice(7);if(o&&o in i){const h=`${o==="modelValue"?"model":o}Modifiers`,{number:d,trim:f}=i[h]||Gt;f?n=r.map(m=>m.trim()):d&&(n=r.map(yp))}NFe(e,t,n);{const h=t.toLowerCase();h!==t&&i[rl(h)]&&xe(`Event "${h}" is emitted in component ${gE(e,e.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${ko(t)}" instead of "${t}".`)}let a,l=i[a=rl(t)]||i[a=rl(In(t))];!l&&s&&(l=i[a=rl(ko(t))]),l&&Bs(l,e,6,n);const u=i[a+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,Bs(u,e,6,n)}}function pne(e,t,r=!1){const i=t.emitsCache,n=i.get(e);if(n!==void 0)return n;const s=e.emits;let o={},a=!1;if(!ft(e)){const l=u=>{const h=pne(u,t,!0);h&&(a=!0,Wt(o,h))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!s&&!a?(i.set(e,null),null):(Ge(s)?s.forEach(l=>o[l]=null):Wt(o,s),i.set(e,o),o)}function G8(e,t){return!e||!gh(t)?!1:(t=t.slice(2).replace(/Once$/,""),zt(e,t[0].toLowerCase()+t.slice(1))||zt(e,ko(t))||zt(e,t))}let Dn=null,uE=null;function D_(e){const t=Dn;return Dn=e,uE=e&&e.type.__scopeId||null,t}function Th(e){uE=e}function $h(){uE=null}const fne=e=>Pi;function Pi(e,t=Dn,r){if(!t||e._n)return e;const i=(...n)=>{i._d&&hT(-1);const s=D_(t),o=e(...n);return D_(s),i._d&&hT(1),hne(t),o};return i._n=!0,i._c=!0,i._d=!0,i}let xR=!1;function aT(){xR=!0}function w3(e){const{type:t,vnode:r,proxy:i,withProxy:n,props:s,propsOptions:[o],slots:a,attrs:l,emit:u,render:h,renderCache:d,data:f,setupState:m,ctx:g,inheritAttrs:b}=e;let w,_;const x=D_(e);xR=!1;try{if(r.shapeFlag&4){const T=n||i;w=Rs(h.call(T,T,d,s,m,f,g)),_=l}else{const T=t;l===s&&aT(),w=Rs(T.length>1?T(s,{get attrs(){return aT(),l},slots:a,emit:u}):T(s,null)),_=t.props?l:jFe(l)}}catch(T){Uw.length=0,Ep(T,e,1),w=Mt(Ri)}let I=w,S;if(w.patchFlag>0&&w.patchFlag&2048&&([I,S]=FFe(w)),_&&b!==!1){const T=Object.keys(_),{shapeFlag:$}=I;if(T.length){if($&7)o&&T.some(iT)&&(_=VFe(_,o)),I=El(I,_);else if(!xR&&I.type!==Ri){const E=Object.keys(l),C=[],O=[];for(let R=0,D=E.length;R<D;R++){const F=E[R];gh(F)?iT(F)||C.push(F[2].toLowerCase()+F.slice(3)):O.push(F)}O.length&&xe(`Extraneous non-props attributes (${O.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),C.length&&xe(`Extraneous non-emits event listeners (${C.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return r.dirs&&(EB(I)||xe("Runtime directive used on component with non-element root node. The directives will not function as intended."),I.dirs=I.dirs?I.dirs.concat(r.dirs):r.dirs),r.transition&&(EB(I)||xe("Component inside <Transition> renders non-element root node that cannot be animated."),I.transition=r.transition),S?S(I):w=I,D_(x),w}const FFe=e=>{const t=e.children,r=e.dynamicChildren,i=q8(t);if(!i)return[e,void 0];const n=t.indexOf(i),s=r?r.indexOf(i):-1,o=a=>{t[n]=a,r&&(s>-1?r[s]=a:a.patchFlag>0&&(e.dynamicChildren=[...r,a]))};return[Rs(i),o]};function q8(e){let t;for(let r=0;r<e.length;r++){const i=e[r];if($l(i)){if(i.type!==Ri||i.children==="v-if"){if(t)return;t=i}}else return}return t}const jFe=e=>{let t;for(const r in e)(r==="class"||r==="style"||gh(r))&&((t||(t={}))[r]=e[r]);return t},VFe=(e,t)=>{const r={};for(const i in e)(!iT(i)||!(i.slice(9)in t))&&(r[i]=e[i]);return r},EB=e=>e.shapeFlag&7||e.type===Ri;function UFe(e,t,r){const{props:i,children:n,component:s}=e,{props:o,children:a,patchFlag:l}=t,u=s.emitsOptions;if((n||a)&&np||t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return i?AB(i,o,u):!!o;if(l&8){const h=t.dynamicProps;for(let d=0;d<h.length;d++){const f=h[d];if(o[f]!==i[f]&&!G8(u,f))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?AB(i,o,u):!0:!!o;return!1}function AB(e,t,r){const i=Object.keys(t);if(i.length!==Object.keys(e).length)return!0;for(let n=0;n<i.length;n++){const s=i[n];if(t[s]!==e[s]&&!G8(r,s))return!0}return!1}function H8({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const zFe=e=>e.__isSuspense,BFe={name:"Suspense",__isSuspense:!0,process(e,t,r,i,n,s,o,a,l,u){e==null?GFe(t,r,i,n,s,o,a,l,u):qFe(e,t,r,i,n,o,a,l,u)},hydrate:HFe,create:W8,normalize:WFe},mne=BFe;function F_(e,t){const r=e.props&&e.props[t];ft(r)&&r()}function GFe(e,t,r,i,n,s,o,a,l){const{p:u,o:{createElement:h}}=l,d=h("div"),f=e.suspense=W8(e,n,i,t,d,r,s,o,a,l);u(null,f.pendingBranch=e.ssContent,d,null,i,f,s,o),f.deps>0?(F_(e,"onPending"),F_(e,"onFallback"),u(null,e.ssFallback,t,r,i,null,s,o),A0(f,e.ssFallback)):f.resolve()}function qFe(e,t,r,i,n,s,o,a,{p:l,um:u,o:{createElement:h}}){const d=t.suspense=e.suspense;d.vnode=t,t.el=e.el;const f=t.ssContent,m=t.ssFallback,{activeBranch:g,pendingBranch:b,isInFallback:w,isHydrating:_}=d;if(b)d.pendingBranch=f,$u(f,b)?(l(b,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0?d.resolve():w&&(l(g,m,r,i,n,null,s,o,a),A0(d,m))):(d.pendingId++,_?(d.isHydrating=!1,d.activeBranch=b):u(b,n,d),d.deps=0,d.effects.length=0,d.hiddenContainer=h("div"),w?(l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0?d.resolve():(l(g,m,r,i,n,null,s,o,a),A0(d,m))):g&&$u(f,g)?(l(g,f,r,i,n,d,s,o,a),d.resolve(!0)):(l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0&&d.resolve()));else if(g&&$u(f,g))l(g,f,r,i,n,d,s,o,a),A0(d,f);else if(F_(t,"onPending"),d.pendingBranch=f,d.pendingId++,l(null,f,d.hiddenContainer,null,n,d,s,o,a),d.deps<=0)d.resolve();else{const{timeout:x,pendingId:I}=d;x>0?setTimeout(()=>{d.pendingId===I&&d.fallback(m)},x):x===0&&d.fallback(m)}}let CB=!1;function W8(e,t,r,i,n,s,o,a,l,u,h=!1){CB||(CB=!0,console[console.info?"info":"log"]("<Suspense> is an experimental feature and its API will likely change."));const{p:d,m:f,um:m,n:g,o:{parentNode:b,remove:w}}=u,_=yp(e.props&&e.props.timeout),x={vnode:e,parent:t,parentComponent:r,isSVG:o,container:i,hiddenContainer:n,anchor:s,deps:0,pendingId:0,timeout:typeof _=="number"?_:-1,activeBranch:null,pendingBranch:null,isInFallback:!0,isHydrating:h,isUnmounted:!1,effects:[],resolve(I=!1){{if(!I&&!x.pendingBranch)throw new Error("suspense.resolve() is called without a pending branch.");if(x.isUnmounted)throw new Error("suspense.resolve() is called on an already unmounted suspense boundary.")}const{vnode:S,activeBranch:T,pendingBranch:$,pendingId:E,effects:C,parentComponent:O,container:R}=x;if(x.isHydrating)x.isHydrating=!1;else if(!I){const z=T&&$.transition&&$.transition.mode==="out-in";z&&(T.transition.afterLeave=()=>{E===x.pendingId&&f($,R,B,0)});let{anchor:B}=x;T&&(B=g(T),m(T,O,x,!0)),z||f($,R,B,0)}A0(x,$),x.pendingBranch=null,x.isInFallback=!1;let D=x.parent,F=!1;for(;D;){if(D.pendingBranch){D.effects.push(...C),F=!0;break}D=D.parent}F||V2(C),x.effects=[],F_(S,"onResolve")},fallback(I){if(!x.pendingBranch)return;const{vnode:S,activeBranch:T,parentComponent:$,container:E,isSVG:C}=x;F_(S,"onFallback");const O=g(T),R=()=>{!x.isInFallback||(d(null,I,E,O,$,null,C,a,l),A0(x,I))},D=I.transition&&I.transition.mode==="out-in";D&&(T.transition.afterLeave=R),x.isInFallback=!0,m(T,$,null,!0),D||R()},move(I,S,T){x.activeBranch&&f(x.activeBranch,I,S,T),x.container=I},next(){return x.activeBranch&&g(x.activeBranch)},registerDep(I,S){const T=!!x.pendingBranch;T&&x.deps++;const $=I.vnode.el;I.asyncDep.catch(E=>{Ep(E,I,0)}).then(E=>{if(I.isUnmounted||x.isUnmounted||x.pendingId!==I.suspenseId)return;I.asyncResolved=!0;const{vnode:C}=I;Lw(C),kR(I,E,!1),$&&(C.el=$);const O=!$&&I.subTree.el;S(I,C,b($||I.subTree.el),$?null:g(I.subTree),x,o,l),O&&w(O),H8(I,C.el),Nw(),T&&--x.deps===0&&x.resolve()})},unmount(I,S){x.isUnmounted=!0,x.activeBranch&&m(x.activeBranch,r,I,S),x.pendingBranch&&m(x.pendingBranch,r,I,S)}};return x}function HFe(e,t,r,i,n,s,o,a,l){const u=t.suspense=W8(t,i,r,e.parentNode,document.createElement("div"),null,n,s,o,a,!0),h=l(e,u.pendingBranch=t.ssContent,r,u,s,o);return u.deps===0&&u.resolve(),h}function WFe(e){const{shapeFlag:t,children:r}=e,i=t&32;e.ssContent=kB(i?r.default:r),e.ssFallback=i?kB(r.fallback):Mt(Ri)}function kB(e){let t;if(ft(e)){const r=lv&&e._c;r&&(e._d=!1,De()),e=e(),r&&(e._d=!0,t=Nu,Dne())}if(Ge(e)){const r=q8(e);r||xe("<Suspense> slots expect a single root node."),e=r}return e=Rs(e),t&&!e.dynamicChildren&&(e.dynamicChildren=t.filter(r=>r!==e)),e}function yne(e,t){t&&t.pendingBranch?Ge(e)?t.effects.push(...e):t.effects.push(e):V2(e)}function A0(e,t){e.activeBranch=t;const{vnode:r,parentComponent:i}=e,n=r.el=t.el;i&&i.subTree===r&&(i.vnode.el=n,H8(i,n))}function J8(e,t){if(!Ci)xe("provide() can only be used inside setup().");else{let r=Ci.provides;const i=Ci.parent&&Ci.parent.provides;i===r&&(r=Ci.provides=Object.create(i)),r[e]=t}}function Cm(e,t,r=!1){const i=Ci||Dn;if(i){const n=i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides;if(n&&e in n)return n[e];if(arguments.length>1)return r&&ft(t)?t.call(i.proxy):t;xe(`injection "${String(e)}" not found.`)}else xe("inject() can only be used inside setup() or functional components.")}function gne(e,t){return z2(e,null,t)}function Z8(e,t){return z2(e,null,Object.assign(t||{},{flush:"post"}))}function vne(e,t){return z2(e,null,Object.assign(t||{},{flush:"sync"}))}const OB={};function Gs(e,t,r){return ft(t)||xe("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),z2(e,t,r)}function z2(e,t,{immediate:r,deep:i,flush:n,onTrack:s,onTrigger:o}=Gt){t||(r!==void 0&&xe('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),i!==void 0&&xe('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const a=x=>{xe("Invalid watch source: ",x,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=Ci;let u,h=!1,d=!1;if(vr(e)?(u=()=>e.value,h=nE(e)):ml(e)?(u=()=>e,i=!0):Ge(e)?(d=!0,h=e.some(ml),u=()=>e.map(x=>{if(vr(x))return x.value;if(ml(x))return cm(x);if(ft(x))return yl(x,l,2);a(x)})):ft(e)?t?u=()=>yl(e,l,2):u=()=>{if(!(l&&l.isUnmounted))return f&&f(),Bs(e,l,3,[m])}:(u=bn,a(e)),t&&i){const x=u;u=()=>cm(x())}let f,m=x=>{f=_.onStop=()=>{yl(x,l,4)}};if(cv)return m=bn,t?r&&Bs(t,l,3,[u(),d?[]:void 0,m]):u(),bn;let g=d?[]:OB;const b=()=>{if(!!_.active)if(t){const x=_.run();(i||h||(d?x.some((I,S)=>P_(I,g[S])):P_(x,g)))&&(f&&f(),Bs(t,l,3,[x,g===OB?void 0:g,m]),g=x)}else _.run()};b.allowRecurse=!!t;let w;n==="sync"?w=b:n==="post"?w=()=>mn(b,l&&l.suspense):w=()=>{!l||l.isMounted?TFe(b):b()};const _=new c1(u,w);return _.onTrack=s,_.onTrigger=o,t?r?b():g=_.run():n==="post"?mn(_.run.bind(_),l&&l.suspense):_.run(),()=>{_.stop(),l&&l.scope&&C8(l.scope.effects,_)}}function JFe(e,t,r){const i=this.proxy,n=Tt(e)?e.includes(".")?bne(i,e):()=>i[e]:e.bind(i,i);let s;ft(t)?s=t:(s=t.handler,r=t);const o=Ci;bp(this);const a=z2(n,s.bind(i),r);return o?bp(o):sp(),a}function bne(e,t){const r=t.split(".");return()=>{let i=e;for(let n=0;n<r.length&&i;n++)i=i[r[n]];return i}}function cm(e,t){if(!pr(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),vr(e))cm(e.value,t);else if(Ge(e))for(let r=0;r<e.length;r++)cm(e[r],t);else if(Ey(e)||Tm(e))e.forEach(r=>{cm(r,t)});else if(kie(e))for(const r in e)cm(e[r],t);return e}function cE(){const e={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Xu(()=>{e.isMounted=!0}),q2(()=>{e.isUnmounting=!0}),e}const Yo=[Function,Array],ZFe={name:"BaseTransition",props:{mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Yo,onEnter:Yo,onAfterEnter:Yo,onEnterCancelled:Yo,onBeforeLeave:Yo,onLeave:Yo,onAfterLeave:Yo,onLeaveCancelled:Yo,onBeforeAppear:Yo,onAppear:Yo,onAfterAppear:Yo,onAppearCancelled:Yo},setup(e,{slots:t}){const r=ys(),i=cE();let n;return()=>{const s=t.default&&B2(t.default(),!0);if(!s||!s.length)return;s.length>1&&xe("<transition> can only be used on a single element or component. Use <transition-group> for lists.");const o=it(e),{mode:a}=o;a&&a!=="in-out"&&a!=="out-in"&&a!=="default"&&xe(`invalid <transition> mode: ${a}`);const l=s[0];if(i.isLeaving)return X5(l);const u=PB(l);if(!u)return X5(l);const h=ry(u,o,i,r);vp(u,h);const d=r.subTree,f=d&&PB(d);let m=!1;const{getTransitionKey:g}=u.type;if(g){const b=g();n===void 0?n=b:b!==n&&(n=b,m=!0)}if(f&&f.type!==Ri&&(!$u(u,f)||m)){const b=ry(f,o,i,r);if(vp(f,b),a==="out-in")return i.isLeaving=!0,b.afterLeave=()=>{i.isLeaving=!1,r.update()},X5(l);a==="in-out"&&u.type!==Ri&&(b.delayLeave=(w,_,x)=>{const I=wne(i,f);I[String(f.key)]=f,w._leaveCb=()=>{_(),w._leaveCb=void 0,delete h.delayedLeave},h.delayedLeave=x})}return l}}},hE=ZFe;function wne(e,t){const{leavingVNodes:r}=e;let i=r.get(t.type);return i||(i=Object.create(null),r.set(t.type,i)),i}function ry(e,t,r,i){const{appear:n,mode:s,persisted:o=!1,onBeforeEnter:a,onEnter:l,onAfterEnter:u,onEnterCancelled:h,onBeforeLeave:d,onLeave:f,onAfterLeave:m,onLeaveCancelled:g,onBeforeAppear:b,onAppear:w,onAfterAppear:_,onAppearCancelled:x}=t,I=String(e.key),S=wne(r,e),T=(E,C)=>{E&&Bs(E,i,9,C)},$={mode:s,persisted:o,beforeEnter(E){let C=a;if(!r.isMounted)if(n)C=b||a;else return;E._leaveCb&&E._leaveCb(!0);const O=S[I];O&&$u(e,O)&&O.el._leaveCb&&O.el._leaveCb(),T(C,[E])},enter(E){let C=l,O=u,R=h;if(!r.isMounted)if(n)C=w||l,O=_||u,R=x||h;else return;let D=!1;const F=E._enterCb=z=>{D||(D=!0,z?T(R,[E]):T(O,[E]),$.delayedLeave&&$.delayedLeave(),E._enterCb=void 0)};C?(C(E,F),C.length<=1&&F()):F()},leave(E,C){const O=String(e.key);if(E._enterCb&&E._enterCb(!0),r.isUnmounting)return C();T(d,[E]);let R=!1;const D=E._leaveCb=F=>{R||(R=!0,C(),F?T(g,[E]):T(m,[E]),E._leaveCb=void 0,S[O]===e&&delete S[O])};S[O]=e,f?(f(E,D),f.length<=1&&D()):D()},clone(E){return ry(E,t,r,i)}};return $}function X5(e){if(h1(e))return e=El(e),e.children=null,e}function PB(e){return h1(e)?e.children?e.children[0]:void 0:e}function vp(e,t){e.shapeFlag&6&&e.component?vp(e.component.subTree,t):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function B2(e,t=!1){let r=[],i=0;for(let n=0;n<e.length;n++){const s=e[n];s.type===hr?(s.patchFlag&128&&i++,r=r.concat(B2(s.children,t))):(t||s.type!==Ri)&&r.push(s)}if(i>1)for(let n=0;n<r.length;n++)r[n].patchFlag=-2;return r}function tr(e){return ft(e)?{setup:e,name:e.name}:e}const j_=e=>!!e.type.__asyncLoader;function dE(e){ft(e)&&(e={loader:e});const{loader:t,loadingComponent:r,errorComponent:i,delay:n=200,timeout:s,suspensible:o=!0,onError:a}=e;let l=null,u,h=0;const d=()=>(h++,l=null,f()),f=()=>{let m;return l||(m=l=t().catch(g=>{if(g=g instanceof Error?g:new Error(String(g)),a)return new Promise((b,w)=>{a(g,()=>b(d()),()=>w(g),h+1)});throw g}).then(g=>{if(m!==l&&l)return l;if(g||xe("Async component loader resolved to undefined. If you are using retry(), make sure to return its return value."),g&&(g.__esModule||g[Symbol.toStringTag]==="Module")&&(g=g.default),g&&!pr(g)&&!ft(g))throw new Error(`Invalid async component load result: ${g}`);return u=g,g}))};return tr({name:"AsyncComponentWrapper",__asyncLoader:f,get __asyncResolved(){return u},setup(){const m=Ci;if(u)return()=>Q5(u,m);const g=x=>{l=null,Ep(x,m,13,!i)};if(o&&m.suspense||cv)return f().then(x=>()=>Q5(x,m)).catch(x=>(g(x),()=>i?Mt(i,{error:x}):null));const b=Xi(!1),w=Xi(),_=Xi(!!n);return n&&setTimeout(()=>{_.value=!1},n),s!=null&&setTimeout(()=>{if(!b.value&&!w.value){const x=new Error(`Async component timed out after ${s}ms.`);g(x),w.value=x}},s),f().then(()=>{b.value=!0,m.parent&&h1(m.parent.vnode)&&aE(m.parent.update)}).catch(x=>{g(x),w.value=x}),()=>{if(b.value&&u)return Q5(u,m);if(w.value&&i)return Mt(i,{error:w.value});if(r&&!_.value)return Mt(r)}}})}function Q5(e,{vnode:{ref:t,props:r,children:i}}){const n=Mt(e,r,i);return n.ref=t,n}const h1=e=>e.type.__isKeepAlive,YFe={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(e,{slots:t}){const r=ys(),i=r.ctx;if(!i.renderer)return t.default;const n=new Map,s=new Set;let o=null;r.__v_cache=n;const a=r.suspense,{renderer:{p:l,m:u,um:h,o:{createElement:d}}}=i,f=d("div");i.activate=(x,I,S,T,$)=>{const E=x.component;u(x,I,S,0,a),l(E.vnode,x,I,S,E,a,T,x.slotScopeIds,$),mn(()=>{E.isDeactivated=!1,E.a&&Pd(E.a);const C=x.props&&x.props.onVnodeMounted;C&&Es(C,E.parent,x)},a),_R(E)},i.deactivate=x=>{const I=x.component;u(x,f,null,1,a),mn(()=>{I.da&&Pd(I.da);const S=x.props&&x.props.onVnodeUnmounted;S&&Es(S,I.parent,x),I.isDeactivated=!0},a),_R(I)};function m(x){eA(x),h(x,r,a,!0)}function g(x){n.forEach((I,S)=>{const T=V_(I.type);T&&(!x||!x(T))&&b(S)})}function b(x){const I=n.get(x);!o||I.type!==o.type?m(I):o&&eA(o),n.delete(x),s.delete(x)}Gs(()=>[e.include,e.exclude],([x,I])=>{x&&g(S=>nw(x,S)),I&&g(S=>!nw(I,S))},{flush:"post",deep:!0});let w=null;const _=()=>{w!=null&&n.set(w,tA(r.subTree))};return Xu(_),G2(_),q2(()=>{n.forEach(x=>{const{subTree:I,suspense:S}=r,T=tA(I);if(x.type===T.type){eA(T);const $=T.component.da;$&&mn($,S);return}m(x)})}),()=>{if(w=null,!t.default)return null;const x=t.default(),I=x[0];if(x.length>1)return xe("KeepAlive should contain exactly one component child."),o=null,x;if(!$l(I)||!(I.shapeFlag&4)&&!(I.shapeFlag&128))return o=null,I;let S=tA(I);const T=S.type,$=V_(j_(S)?S.type.__asyncResolved||{}:T),{include:E,exclude:C,max:O}=e;if(E&&(!$||!nw(E,$))||C&&$&&nw(C,$))return o=S,I;const R=S.key==null?T:S.key,D=n.get(R);return S.el&&(S=El(S),I.shapeFlag&128&&(I.ssContent=S)),w=R,D?(S.el=D.el,S.component=D.component,S.transition&&vp(S,S.transition),S.shapeFlag|=512,s.delete(R),s.add(R)):(s.add(R),O&&s.size>parseInt(O,10)&&b(s.values().next().value)),S.shapeFlag|=256,o=S,I}}},_ne=YFe;function nw(e,t){return Ge(e)?e.some(r=>nw(r,t)):Tt(e)?e.split(",").includes(t):e.test?e.test(t):!1}function Y8(e,t){xne(e,"a",t)}function K8(e,t){xne(e,"da",t)}function xne(e,t,r=Ci){const i=e.__wdc||(e.__wdc=()=>{let n=r;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(pE(t,i,r),r){let n=r.parent;for(;n&&n.parent;)h1(n.parent.vnode)&&KFe(i,t,r,n),n=n.parent}}function KFe(e,t,r,i){const n=pE(t,e,i,!0);ky(()=>{C8(i[t],n)},r)}function eA(e){let t=e.shapeFlag;t&256&&(t-=256),t&512&&(t-=512),e.shapeFlag=t}function tA(e){return e.shapeFlag&128?e.ssContent:e}function pE(e,t,r=Ci,i=!1){if(r){const n=r[e]||(r[e]=[]),s=t.__weh||(t.__weh=(...o)=>{if(r.isUnmounted)return;Ay(),bp(r);const a=Bs(t,r,e,o);return sp(),Cy(),a});return i?n.unshift(s):n.push(s),s}else{const n=rl(j8[e].replace(/ hook$/,""));xe(`${n} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Eh=e=>(t,r=Ci)=>(!cv||e==="sp")&&pE(e,t,r),X8=Eh("bm"),Xu=Eh("m"),Q8=Eh("bu"),G2=Eh("u"),q2=Eh("bum"),ky=Eh("um"),eD=Eh("sp"),tD=Eh("rtg"),rD=Eh("rtc");function iD(e,t=Ci){pE("ec",e,t)}function XFe(){const e=Object.create(null);return(t,r)=>{e[r]?xe(`${t} property "${r}" is already defined in ${e[r]}.`):e[r]=t}}let SR=!0;function QFe(e){const t=Mne(e),r=e.proxy,i=e.ctx;SR=!1,t.beforeCreate&&RB(t.beforeCreate,e,"bc");const{data:n,computed:s,methods:o,watch:a,provide:l,inject:u,created:h,beforeMount:d,mounted:f,beforeUpdate:m,updated:g,activated:b,deactivated:w,beforeDestroy:_,beforeUnmount:x,destroyed:I,unmounted:S,render:T,renderTracked:$,renderTriggered:E,errorCaptured:C,serverPrefetch:O,expose:R,inheritAttrs:D,components:F,directives:z,filters:B}=t,y=XFe();{const[A]=e.propsOptions;if(A)for(const P in A)y("Props",P)}if(u&&e9e(u,i,y,e.appContext.config.unwrapInjectedRef),o)for(const A in o){const P=o[A];ft(P)?(Object.defineProperty(i,A,{value:P.bind(r),configurable:!0,enumerable:!0,writable:!0}),y("Methods",A)):xe(`Method "${A}" has type "${typeof P}" in the component definition. Did you reference the function correctly?`)}if(n){ft(n)||xe("The data option must be a function. Plain object usage is no longer supported.");const A=n.call(r,r);if(Z$(A)&&xe("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!pr(A))xe("data() should return an object.");else{e.data=eo(A);for(const P in A)y("Data",P),P[0]!=="$"&&P[0]!=="_"&&Object.defineProperty(i,P,{configurable:!0,enumerable:!0,get:()=>A[P],set:bn})}}if(SR=!0,s)for(const A in s){const P=s[A],Y=ft(P)?P.bind(r,r):ft(P.get)?P.get.bind(r,r):bn;Y===bn&&xe(`Computed property "${A}" has no getter.`);const Q=!ft(P)&&ft(P.set)?P.set.bind(r):()=>{xe(`Write operation failed: computed property "${A}" is readonly.`)},le=sl({get:Y,set:Q});Object.defineProperty(i,A,{enumerable:!0,configurable:!0,get:()=>le.value,set:re=>le.value=re}),y("Computed",A)}if(a)for(const A in a)Sne(a[A],i,r,A);if(l){const A=ft(l)?l.call(r):l;Reflect.ownKeys(A).forEach(P=>{J8(P,A[P])})}h&&RB(h,e,"c");function M(A,P){Ge(P)?P.forEach(Y=>A(Y.bind(r))):P&&A(P.bind(r))}if(M(X8,d),M(Xu,f),M(Q8,m),M(G2,g),M(Y8,b),M(K8,w),M(iD,C),M(rD,$),M(tD,E),M(q2,x),M(ky,S),M(eD,O),Ge(R))if(R.length){const A=e.exposed||(e.exposed={});R.forEach(P=>{Object.defineProperty(A,P,{get:()=>r[P],set:Y=>r[P]=Y})})}else e.exposed||(e.exposed={});T&&e.render===bn&&(e.render=T),D!=null&&(e.inheritAttrs=D),F&&(e.components=F),z&&(e.directives=z)}function e9e(e,t,r=bn,i=!1){Ge(e)&&(e=MR(e));for(const n in e){const s=e[n];let o;pr(s)?"default"in s?o=Cm(s.from||n,s.default,!0):o=Cm(s.from||n):o=Cm(s),vr(o)?i?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>o.value,set:a=>o.value=a}):(xe(`injected property "${n}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[n]=o):t[n]=o,r("Inject",n)}}function RB(e,t,r){Bs(Ge(e)?e.map(i=>i.bind(t.proxy)):e.bind(t.proxy),t,r)}function Sne(e,t,r,i){const n=i.includes(".")?bne(r,i):()=>r[i];if(Tt(e)){const s=t[e];ft(s)?Gs(n,s):xe(`Invalid watch handler specified by key "${e}"`,s)}else if(ft(e))Gs(n,e.bind(r));else if(pr(e))if(Ge(e))e.forEach(s=>Sne(s,t,r,i));else{const s=ft(e.handler)?e.handler.bind(r):t[e.handler];ft(s)?Gs(n,s,e):xe(`Invalid watch handler specified by key "${e.handler}"`,s)}else xe(`Invalid watch option: "${i}"`,e)}function Mne(e){const t=e.type,{mixins:r,extends:i}=t,{mixins:n,optionsCache:s,config:{optionMergeStrategies:o}}=e.appContext,a=s.get(t);let l;return a?l=a:!n.length&&!r&&!i?l=t:(l={},n.length&&n.forEach(u=>lT(l,u,o,!0)),lT(l,t,o)),s.set(t,l),l}function lT(e,t,r,i=!1){const{mixins:n,extends:s}=t;s&&lT(e,s,r,!0),n&&n.forEach(o=>lT(e,o,r,!0));for(const o in t)if(i&&o==="expose")xe('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const a=t9e[o]||r&&r[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const t9e={data:LB,props:Nf,emits:Nf,methods:Nf,computed:Nf,beforeCreate:Qn,created:Qn,beforeMount:Qn,mounted:Qn,beforeUpdate:Qn,updated:Qn,beforeDestroy:Qn,beforeUnmount:Qn,destroyed:Qn,unmounted:Qn,activated:Qn,deactivated:Qn,errorCaptured:Qn,serverPrefetch:Qn,components:Nf,directives:Nf,watch:i9e,provide:LB,inject:r9e};function LB(e,t){return t?e?function(){return Wt(ft(e)?e.call(this,this):e,ft(t)?t.call(this,this):t)}:t:e}function r9e(e,t){return Nf(MR(e),MR(t))}function MR(e){if(Ge(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Qn(e,t){return e?[...new Set([].concat(e,t))]:t}function Nf(e,t){return e?Wt(Wt(Object.create(null),e),t):t}function i9e(e,t){if(!e)return t;if(!t)return e;const r=Wt(Object.create(null),e);for(const i in t)r[i]=Qn(e[i],t[i]);return r}function n9e(e,t,r,i=!1){const n={},s={};nT(s,fE,1),e.propsDefaults=Object.create(null),Ine(e,t,n,s);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);$ne(t||{},n,e),r?e.props=i?n:L8(n):e.type.props?e.props=n:e.props=s,e.attrs=s}function s9e(e,t,r,i){const{props:n,attrs:s,vnode:{patchFlag:o}}=e,a=it(n),[l]=e.propsOptions;let u=!1;if(!(e.type.__hmrId||e.parent&&e.parent.type.__hmrId)&&(i||o>0)&&!(o&16)){if(o&8){const h=e.vnode.dynamicProps;for(let d=0;d<h.length;d++){let f=h[d];const m=t[f];if(l)if(zt(s,f))m!==s[f]&&(s[f]=m,u=!0);else{const g=In(f);n[g]=IR(l,a,g,m,e,!1)}else m!==s[f]&&(s[f]=m,u=!0)}}}else{Ine(e,t,n,s)&&(u=!0);let h;for(const d in a)(!t||!zt(t,d)&&((h=ko(d))===d||!zt(t,h)))&&(l?r&&(r[d]!==void 0||r[h]!==void 0)&&(n[d]=IR(l,a,d,void 0,e,!0)):delete n[d]);if(s!==a)for(const d in s)(!t||!zt(t,d)&&!0)&&(delete s[d],u=!0)}u&&vh(e,"set","$attrs"),$ne(t||{},n,e)}function Ine(e,t,r,i){const[n,s]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if($m(l))continue;const u=t[l];let h;n&&zt(n,h=In(l))?!s||!s.includes(h)?r[h]=u:(a||(a={}))[h]=u:G8(e.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(s){const l=it(r),u=a||Gt;for(let h=0;h<s.length;h++){const d=s[h];r[d]=IR(n,l,d,u[d],e,!zt(u,d))}}return o}function IR(e,t,r,i,n,s){const o=e[r];if(o!=null){const a=zt(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&ft(l)){const{propsDefaults:u}=n;r in u?i=u[r]:(bp(n),i=u[r]=l.call(null,t),sp())}else i=l}o[0]&&(s&&!a?i=!1:o[1]&&(i===""||i===ko(r))&&(i=!0))}return i}function Tne(e,t,r=!1){const i=t.propsCache,n=i.get(e);if(n)return n;const s=e.props,o={},a=[];let l=!1;if(!ft(e)){const h=d=>{l=!0;const[f,m]=Tne(d,t,!0);Wt(o,f),m&&a.push(...m)};!r&&t.mixins.length&&t.mixins.forEach(h),e.extends&&h(e.extends),e.mixins&&e.mixins.forEach(h)}if(!s&&!l)return i.set(e,E0),E0;if(Ge(s))for(let h=0;h<s.length;h++){Tt(s[h])||xe("props must be strings when using array syntax.",s[h]);const d=In(s[h]);NB(d)&&(o[d]=Gt)}else if(s){pr(s)||xe("invalid props options",s);for(const h in s){const d=In(h);if(NB(d)){const f=s[h],m=o[d]=Ge(f)||ft(f)?{type:f}:f;if(m){const g=FB(Boolean,m.type),b=FB(String,m.type);m[0]=g>-1,m[1]=b<0||g<b,(g>-1||zt(m,"default"))&&a.push(d)}}}}const u=[o,a];return i.set(e,u),u}function NB(e){return e[0]!=="$"?!0:(xe(`Invalid prop name: "${e}" is a reserved property.`),!1)}function TR(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function DB(e,t){return TR(e)===TR(t)}function FB(e,t){return Ge(t)?t.findIndex(r=>DB(r,e)):ft(t)&&DB(t,e)?0:-1}function $ne(e,t,r){const i=it(t),n=r.propsOptions[0];for(const s in n){let o=n[s];o!=null&&o9e(s,i[s],o,!zt(e,s)&&!zt(e,ko(s)))}}function o9e(e,t,r,i){const{type:n,required:s,validator:o}=r;if(s&&i){xe('Missing required prop: "'+e+'"');return}if(!(t==null&&!r.required)){if(n!=null&&n!==!0){let a=!1;const l=Ge(n)?n:[n],u=[];for(let h=0;h<l.length&&!a;h++){const{valid:d,expectedType:f}=l9e(t,l[h]);u.push(f||""),a=d}if(!a){xe(u9e(e,t,u));return}}o&&!o(t)&&xe('Invalid prop: custom validator check failed for prop "'+e+'".')}}const a9e=Bn("String,Number,Boolean,Function,Symbol,BigInt");function l9e(e,t){let r;const i=TR(t);if(a9e(i)){const n=typeof e;r=n===i.toLowerCase(),!r&&n==="object"&&(r=e instanceof t)}else i==="Object"?r=pr(e):i==="Array"?r=Ge(e):i==="null"?r=e===null:r=e instanceof t;return{valid:r,expectedType:i}}function u9e(e,t,r){let i=`Invalid prop: type check failed for prop "${e}". Expected ${r.map(Tl).join(" | ")}`;const n=r[0],s=k8(t),o=jB(t,n),a=jB(t,s);return r.length===1&&VB(n)&&!c9e(n,s)&&(i+=` with value ${o}`),i+=`, got ${s} `,VB(s)&&(i+=`with value ${a}.`),i}function jB(e,t){return t==="String"?`"${e}"`:t==="Number"?`${Number(e)}`:`${e}`}function VB(e){return["string","number","boolean"].some(r=>e.toLowerCase()===r)}function c9e(...e){return e.some(t=>t.toLowerCase()==="boolean")}const Ene=e=>e[0]==="_"||e==="$stable",nD=e=>Ge(e)?e.map(Rs):[Rs(e)],h9e=(e,t,r)=>{const i=Pi((...n)=>(Ci&&xe(`Slot "${e}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),nD(t(...n))),r);return i._c=!1,i},Ane=(e,t,r)=>{const i=e._ctx;for(const n in e){if(Ene(n))continue;const s=e[n];if(ft(s))t[n]=h9e(n,s,i);else if(s!=null){xe(`Non-function value encountered for slot "${n}". Prefer function slots for better performance.`);const o=nD(s);t[n]=()=>o}}},Cne=(e,t)=>{h1(e.vnode)||xe("Non-function value encountered for default slot. Prefer function slots for better performance.");const r=nD(t);e.slots.default=()=>r},d9e=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=it(t),nT(t,"_",r)):Ane(t,e.slots={})}else e.slots={},t&&Cne(e,t);nT(e.slots,fE,1)},p9e=(e,t,r)=>{const{vnode:i,slots:n}=e;let s=!0,o=Gt;if(i.shapeFlag&32){const a=t._;a?np?Wt(n,t):r&&a===1?s=!1:(Wt(n,t),!r&&a===1&&delete n._):(s=!t.$stable,Ane(t,n)),o=t}else t&&(Cne(e,t),o={default:1});if(s)for(const a in n)!Ene(a)&&!(a in o)&&delete n[a]};function kne(e){Oie(e)&&xe("Do not use built-in directive ids as custom directive id: "+e)}function xr(e,t){const r=Dn;if(r===null)return xe("withDirectives can only be used inside render functions."),e;const i=r.proxy,n=e.dirs||(e.dirs=[]);for(let s=0;s<t.length;s++){let[o,a,l,u=Gt]=t[s];ft(o)&&(o={mounted:o,updated:o}),o.deep&&cm(a),n.push({dir:o,instance:i,value:a,oldValue:void 0,arg:l,modifiers:u})}return e}function wu(e,t,r,i){const n=e.dirs,s=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];s&&(a.oldValue=s[o].value);let l=a.dir[i];l&&(Ay(),Bs(l,r,8,[e.el,a,e,t]),Cy())}}function One(){return{app:null,config:{isNativeTag:Rw,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let f9e=0;function m9e(e,t){return function(i,n=null){n!=null&&!pr(n)&&(xe("root props passed to app.mount() must be an object."),n=null);const s=One(),o=new Set;let a=!1;const l=s.app={_uid:f9e++,_component:i,_props:n,_container:null,_context:s,_instance:null,version:dT,get config(){return s.config},set config(u){xe("app.config cannot be replaced. Modify individual options instead.")},use(u,...h){return o.has(u)?xe("Plugin has already been applied to target app."):u&&ft(u.install)?(o.add(u),u.install(l,...h)):ft(u)?(o.add(u),u(l,...h)):xe('A plugin must either be a function or an object with an "install" function.'),l},mixin(u){return s.mixins.includes(u)?xe("Mixin has already been applied to target app"+(u.name?`: ${u.name}`:"")):s.mixins.push(u),l},component(u,h){return CR(u,s.config),h?(s.components[u]&&xe(`Component "${u}" has already been registered in target app.`),s.components[u]=h,l):s.components[u]},directive(u,h){return kne(u),h?(s.directives[u]&&xe(`Directive "${u}" has already been registered in target app.`),s.directives[u]=h,l):s.directives[u]},mount(u,h,d){if(a)xe("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{const f=Mt(i,n);return f.appContext=s,s.reload=()=>{e(El(f),u,d)},h&&t?t(f,u):e(f,u,d),a=!0,l._container=u,u.__vue_app__=l,l._instance=f.component,kFe(l,dT),pD(f.component)||f.component.proxy}},unmount(){a?(e(null,l._container),l._instance=null,OFe(l),delete l._container.__vue_app__):xe("Cannot unmount an app that is not mounted.")},provide(u,h){return u in s.provides&&xe(`App already provides property with key "${String(u)}". It will be overwritten with the new value.`),s.provides[u]=h,l}};return l}}function uT(e,t,r,i,n=!1){if(Ge(e)){e.forEach((f,m)=>uT(f,t&&(Ge(t)?t[m]:t),r,i,n));return}if(j_(i)&&!n)return;const s=i.shapeFlag&4?pD(i.component)||i.component.proxy:i.el,o=n?null:s,{i:a,r:l}=e;if(!a){xe("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const u=t&&t.r,h=a.refs===Gt?a.refs={}:a.refs,d=a.setupState;if(u!=null&&u!==l&&(Tt(u)?(h[u]=null,zt(d,u)&&(d[u]=null)):vr(u)&&(u.value=null)),ft(l))yl(l,a,12,[o,h]);else{const f=Tt(l),m=vr(l);if(f||m){const g=()=>{if(e.f){const b=f?h[l]:l.value;n?Ge(b)&&C8(b,s):Ge(b)?b.includes(s)||b.push(s):f?h[l]=[s]:(l.value=[s],e.k&&(h[e.k]=l.value))}else f?(h[l]=o,zt(d,l)&&(d[l]=o)):vr(l)?(l.value=o,e.k&&(h[e.k]=o)):xe("Invalid template ref type:",l,`(${typeof l})`)};o?(g.id=-1,mn(g,r)):g()}else xe("Invalid template ref type:",l,`(${typeof l})`)}}let Jh=!1;const TS=e=>/svg/.test(e.namespaceURI)&&e.tagName!=="foreignObject",$S=e=>e.nodeType===8;function y9e(e){const{mt:t,p:r,o:{patchProp:i,nextSibling:n,parentNode:s,remove:o,insert:a,createComment:l}}=e,u=(w,_)=>{if(!_.hasChildNodes()){xe("Attempting to hydrate existing markup but container is empty. Performing full mount instead."),r(null,w,_),oT();return}Jh=!1,h(_.firstChild,w,null,null,null),oT(),Jh&&console.error("Hydration completed but contains mismatches.")},h=(w,_,x,I,S,T=!1)=>{const $=$S(w)&&w.data==="[",E=()=>g(w,_,x,I,S,$),{type:C,ref:O,shapeFlag:R}=_,D=w.nodeType;_.el=w;let F=null;switch(C){case Hu:D!==3?F=E():(w.data!==_.children&&(Jh=!0,xe(`Hydration text mismatch:
- Client: ${JSON.stringify(w.data)}
- Server: ${JSON.stringify(_.children)}`),w.data=_.children),F=n(w));break;case Ri:D!==8||$?F=E():F=n(w);break;case ah:if(D!==1)F=E();else{F=w;const z=!_.children.length;for(let B=0;B<_.staticCount;B++)z&&(_.children+=F.outerHTML),B===_.staticCount-1&&(_.anchor=F),F=n(F);return F}break;case hr:$?F=m(w,_,x,I,S,T):F=E();break;default:if(R&1)D!==1||_.type.toLowerCase()!==w.tagName.toLowerCase()?F=E():F=d(w,_,x,I,S,T);else if(R&6){_.slotScopeIds=S;const z=s(w);if(t(_,z,null,x,I,TS(z),T),F=$?b(w):n(w),j_(_)){let B;$?(B=Mt(hr),B.anchor=F?F.previousSibling:z.lastChild):B=w.nodeType===3?lh(""):Mt("div"),B.el=w,_.component.subTree=B}}else R&64?D!==8?F=E():F=_.type.hydrate(w,_,x,I,S,T,e,f):R&128?F=_.type.hydrate(w,_,x,I,TS(s(w)),S,T,e,h):xe("Invalid HostVNode type:",C,`(${typeof C})`)}return O!=null&&uT(O,null,I,_),F},d=(w,_,x,I,S,T)=>{T=T||!!_.dynamicChildren;const{type:$,props:E,patchFlag:C,shapeFlag:O,dirs:R}=_,D=$==="input"&&R||$==="option";{if(R&&wu(_,null,x,"created"),E)if(D||!T||C&48)for(const z in E)(D&&z.endsWith("value")||gh(z)&&!$m(z))&&i(w,z,null,E[z],!1,void 0,x);else E.onClick&&i(w,"onClick",null,E.onClick,!1,void 0,x);let F;if((F=E&&E.onVnodeBeforeMount)&&Es(F,x,_),R&&wu(_,null,x,"beforeMount"),((F=E&&E.onVnodeMounted)||R)&&yne(()=>{F&&Es(F,x,_),R&&wu(_,null,x,"mounted")},I),O&16&&!(E&&(E.innerHTML||E.textContent))){let z=f(w.firstChild,_,w,x,I,S,T),B=!1;for(;z;){Jh=!0,B||(xe(`Hydration children mismatch in <${_.type}>: server rendered element contains more child nodes than client vdom.`),B=!0);const y=z;z=z.nextSibling,o(y)}}else O&8&&w.textContent!==_.children&&(Jh=!0,xe(`Hydration text content mismatch in <${_.type}>:
- Client: ${w.textContent}
- Server: ${_.children}`),w.textContent=_.children)}return w.nextSibling},f=(w,_,x,I,S,T,$)=>{$=$||!!_.dynamicChildren;const E=_.children,C=E.length;let O=!1;for(let R=0;R<C;R++){const D=$?E[R]:E[R]=Rs(E[R]);if(w)w=h(w,D,I,S,T,$);else{if(D.type===Hu&&!D.children)continue;Jh=!0,O||(xe(`Hydration children mismatch in <${x.tagName.toLowerCase()}>: server rendered element contains fewer child nodes than client vdom.`),O=!0),r(null,D,x,null,I,S,TS(x),T)}}return w},m=(w,_,x,I,S,T)=>{const{slotScopeIds:$}=_;$&&(S=S?S.concat($):$);const E=s(w),C=f(n(w),_,E,x,I,S,T);return C&&$S(C)&&C.data==="]"?n(_.anchor=C):(Jh=!0,a(_.anchor=l("]"),E,C),C)},g=(w,_,x,I,S,T)=>{if(Jh=!0,xe(`Hydration node mismatch:
- Client vnode:`,_.type,`
- Server rendered DOM:`,w,w.nodeType===3?"(text)":$S(w)&&w.data==="["?"(start of fragment)":""),_.el=null,T){const C=b(w);for(;;){const O=n(w);if(O&&O!==C)o(O);else break}}const $=n(w),E=s(w);return o(w),r(null,_,E,$,x,I,TS(E),S),$},b=w=>{let _=0;for(;w;)if(w=n(w),w&&$S(w)&&(w.data==="["&&_++,w.data==="]")){if(_===0)return n(w);_--}return w};return[u,h]}let Wf,Rd;function Vc(e,t){e.appContext.config.performance&&Pne()&&Rd.mark(`vue-${t}-${e.uid}`),RFe(e,t,Wf?Rd.now():Date.now())}function Uc(e,t){if(e.appContext.config.performance&&Pne()){const r=`vue-${t}-${e.uid}`,i=r+":end";Rd.mark(i),Rd.measure(`<${gE(e,e.type)}> ${t}`,r,i),Rd.clearMarks(r),Rd.clearMarks(i)}LFe(e,t,Wf?Rd.now():Date.now())}function Pne(){return Wf!==void 0||(typeof window<"u"&&window.performance?(Wf=!0,Rd=window.performance):Wf=!1),Wf}function g9e(){const e=[];if(e.length){const t=e.length>1;console.warn(`Feature flag${t?"s":""} ${e.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const mn=yne;function sD(e){return Rne(e)}function oD(e){return Rne(e,y9e)}function Rne(e,t){g9e();const r=Pie();r.__VUE__=!0,lE(r.__VUE_DEVTOOLS_GLOBAL_HOOK__,r);const{insert:i,remove:n,patchProp:s,createElement:o,createText:a,createComment:l,setText:u,setElementText:h,parentNode:d,nextSibling:f,setScopeId:m=bn,cloneNode:g,insertStaticContent:b}=e,w=(V,J,ne,pe=null,k=null,q=null,H=!1,ee=null,W=np?!1:!!J.dynamicChildren)=>{if(V===J)return;V&&!$u(V,J)&&(pe=pt(V),_e(V,k,q,!0),V=null),J.patchFlag===-2&&(W=!1,J.dynamicChildren=null);const{type:G,ref:de,shapeFlag:fe}=J;switch(G){case Hu:_(V,J,ne,pe);break;case Ri:x(V,J,ne,pe);break;case ah:V==null?I(J,ne,pe,H):S(V,J,ne,H);break;case hr:B(V,J,ne,pe,k,q,H,ee,W);break;default:fe&1?E(V,J,ne,pe,k,q,H,ee,W):fe&6?y(V,J,ne,pe,k,q,H,ee,W):fe&64||fe&128?G.process(V,J,ne,pe,k,q,H,ee,W,X):xe("Invalid VNode type:",G,`(${typeof G})`)}de!=null&&k&&uT(de,V&&V.ref,q,J||V,!J)},_=(V,J,ne,pe)=>{if(V==null)i(J.el=a(J.children),ne,pe);else{const k=J.el=V.el;J.children!==V.children&&u(k,J.children)}},x=(V,J,ne,pe)=>{V==null?i(J.el=l(J.children||""),ne,pe):J.el=V.el},I=(V,J,ne,pe)=>{[V.el,V.anchor]=b(V.children,J,ne,pe,V.el,V.anchor)},S=(V,J,ne,pe)=>{if(J.children!==V.children){const k=f(V.anchor);$(V),[J.el,J.anchor]=b(J.children,ne,k,pe)}else J.el=V.el,J.anchor=V.anchor},T=({el:V,anchor:J},ne,pe)=>{let k;for(;V&&V!==J;)k=f(V),i(V,ne,pe),V=k;i(J,ne,pe)},$=({el:V,anchor:J})=>{let ne;for(;V&&V!==J;)ne=f(V),n(V),V=ne;n(J)},E=(V,J,ne,pe,k,q,H,ee,W)=>{H=H||J.type==="svg",V==null?C(J,ne,pe,k,q,H,ee,W):D(V,J,k,q,H,ee,W)},C=(V,J,ne,pe,k,q,H,ee)=>{let W,G;const{type:de,props:fe,shapeFlag:Me,transition:Oe,patchFlag:Ye,dirs:Xe}=V;{if(W=V.el=o(V.type,q,fe&&fe.is,fe),Me&8?h(W,V.children):Me&16&&R(V.children,W,null,pe,k,q&&de!=="foreignObject",H,ee),Xe&&wu(V,null,pe,"created"),fe){for(const Jt in fe)Jt!=="value"&&!$m(Jt)&&s(W,Jt,null,fe[Jt],q,V.children,pe,k,st);"value"in fe&&s(W,"value",null,fe.value),(G=fe.onVnodeBeforeMount)&&Es(G,pe,V)}O(W,V,V.scopeId,H,pe)}Object.defineProperty(W,"__vnode",{value:V,enumerable:!1}),Object.defineProperty(W,"__vueParentComponent",{value:pe,enumerable:!1}),Xe&&wu(V,null,pe,"beforeMount");const ot=(!k||k&&!k.pendingBranch)&&Oe&&!Oe.persisted;ot&&Oe.beforeEnter(W),i(W,J,ne),((G=fe&&fe.onVnodeMounted)||ot||Xe)&&mn(()=>{G&&Es(G,pe,V),ot&&Oe.enter(W),Xe&&wu(V,null,pe,"mounted")},k)},O=(V,J,ne,pe,k)=>{if(ne&&m(V,ne),pe)for(let q=0;q<pe.length;q++)m(V,pe[q]);if(k){let q=k.subTree;if(q.patchFlag>0&&q.patchFlag&2048&&(q=q8(q.children)||q),J===q){const H=k.vnode;O(V,H,H.scopeId,H.slotScopeIds,k.parent)}}},R=(V,J,ne,pe,k,q,H,ee,W=0)=>{for(let G=W;G<V.length;G++){const de=V[G]=ee?Cd(V[G]):Rs(V[G]);w(null,de,J,ne,pe,k,q,H,ee)}},D=(V,J,ne,pe,k,q,H)=>{const ee=J.el=V.el;let{patchFlag:W,dynamicChildren:G,dirs:de}=J;W|=V.patchFlag&16;const fe=V.props||Gt,Me=J.props||Gt;let Oe;ne&&zp(ne,!1),(Oe=Me.onVnodeBeforeUpdate)&&Es(Oe,ne,J,V),de&&wu(J,V,ne,"beforeUpdate"),ne&&zp(ne,!0),np&&(W=0,H=!1,G=null);const Ye=k&&J.type!=="foreignObject";if(G?(F(V.dynamicChildren,G,ee,ne,pe,Ye,q),ne&&ne.type.__hmrId&&Vw(V,J)):H||Q(V,J,ee,null,ne,pe,Ye,q,!1),W>0){if(W&16)z(ee,J,fe,Me,ne,pe,k);else if(W&2&&fe.class!==Me.class&&s(ee,"class",null,Me.class,k),W&4&&s(ee,"style",fe.style,Me.style,k),W&8){const Xe=J.dynamicProps;for(let ot=0;ot<Xe.length;ot++){const Jt=Xe[ot],qn=fe[Jt],Vl=Me[Jt];(Vl!==qn||Jt==="value")&&s(ee,Jt,qn,Vl,k,V.children,ne,pe,st)}}W&1&&V.children!==J.children&&h(ee,J.children)}else!H&&G==null&&z(ee,J,fe,Me,ne,pe,k);((Oe=Me.onVnodeUpdated)||de)&&mn(()=>{Oe&&Es(Oe,ne,J,V),de&&wu(J,V,ne,"updated")},pe)},F=(V,J,ne,pe,k,q,H)=>{for(let ee=0;ee<J.length;ee++){const W=V[ee],G=J[ee],de=W.el&&(W.type===hr||!$u(W,G)||W.shapeFlag&70)?d(W.el):ne;w(W,G,de,null,pe,k,q,H,!0)}},z=(V,J,ne,pe,k,q,H)=>{if(ne!==pe){for(const ee in pe){if($m(ee))continue;const W=pe[ee],G=ne[ee];W!==G&&ee!=="value"&&s(V,ee,G,W,H,J.children,k,q,st)}if(ne!==Gt)for(const ee in ne)!$m(ee)&&!(ee in pe)&&s(V,ee,ne[ee],null,H,J.children,k,q,st);"value"in pe&&s(V,"value",ne.value,pe.value)}},B=(V,J,ne,pe,k,q,H,ee,W)=>{const G=J.el=V?V.el:a(""),de=J.anchor=V?V.anchor:a("");let{patchFlag:fe,dynamicChildren:Me,slotScopeIds:Oe}=J;np&&(fe=0,W=!1,Me=null),Oe&&(ee=ee?ee.concat(Oe):Oe),V==null?(i(G,ne,pe),i(de,ne,pe),R(J.children,ne,de,k,q,H,ee,W)):fe>0&&fe&64&&Me&&V.dynamicChildren?(F(V.dynamicChildren,Me,ne,k,q,H,ee),k&&k.type.__hmrId?Vw(V,J):(J.key!=null||k&&J===k.subTree)&&Vw(V,J,!0)):Q(V,J,ne,de,k,q,H,ee,W)},y=(V,J,ne,pe,k,q,H,ee,W)=>{J.slotScopeIds=ee,V==null?J.shapeFlag&512?k.ctx.activate(J,ne,pe,H,W):M(J,ne,pe,k,q,H,W):A(V,J,W)},M=(V,J,ne,pe,k,q,H)=>{const ee=V.component=qne(V,pe,k);if(ee.type.__hmrId&&$Fe(ee),Lw(V),Vc(ee,"mount"),h1(V)&&(ee.ctx.renderer=X),Vc(ee,"init"),Wne(ee),Uc(ee,"init"),ee.asyncDep){if(k&&k.registerDep(ee,P),!V.el){const W=ee.subTree=Mt(Ri);x(null,W,J,ne)}return}P(ee,V,J,ne,k,q,H),Nw(),Uc(ee,"mount")},A=(V,J,ne)=>{const pe=J.component=V.component;if(UFe(V,J,ne))if(pe.asyncDep&&!pe.asyncResolved){Lw(J),Y(pe,J,ne),Nw();return}else pe.next=J,IFe(pe.update),pe.update();else J.component=V.component,J.el=V.el,pe.vnode=J},P=(V,J,ne,pe,k,q,H)=>{const ee=()=>{if(V.isMounted){let{next:de,bu:fe,u:Me,parent:Oe,vnode:Ye}=V,Xe=de,ot;Lw(de||V.vnode),zp(V,!1),de?(de.el=Ye.el,Y(V,de,H)):de=Ye,fe&&Pd(fe),(ot=de.props&&de.props.onVnodeBeforeUpdate)&&Es(ot,Oe,de,Ye),zp(V,!0),Vc(V,"render");const Jt=w3(V);Uc(V,"render");const qn=V.subTree;V.subTree=Jt,Vc(V,"patch"),w(qn,Jt,d(qn.el),pt(qn),V,k,q),Uc(V,"patch"),de.el=Jt.el,Xe===null&&H8(V,Jt.el),Me&&mn(Me,k),(ot=de.props&&de.props.onVnodeUpdated)&&mn(()=>Es(ot,Oe,de,Ye),k),hne(V),Nw()}else{let de;const{el:fe,props:Me}=J,{bm:Oe,m:Ye,parent:Xe}=V,ot=j_(J);if(zp(V,!1),Oe&&Pd(Oe),!ot&&(de=Me&&Me.onVnodeBeforeMount)&&Es(de,Xe,J),zp(V,!0),fe&&he){const Jt=()=>{Vc(V,"render"),V.subTree=w3(V),Uc(V,"render"),Vc(V,"hydrate"),he(fe,V.subTree,V,k,null),Uc(V,"hydrate")};ot?J.type.__asyncLoader().then(()=>!V.isUnmounted&&Jt()):Jt()}else{Vc(V,"render");const Jt=V.subTree=w3(V);Uc(V,"render"),Vc(V,"patch"),w(null,Jt,ne,pe,V,k,q),Uc(V,"patch"),J.el=Jt.el}if(Ye&&mn(Ye,k),!ot&&(de=Me&&Me.onVnodeMounted)){const Jt=J;mn(()=>Es(de,Xe,Jt),k)}J.shapeFlag&256&&V.a&&mn(V.a,k),V.isMounted=!0,_R(V),J=ne=pe=null}},W=V.effect=new c1(ee,()=>aE(V.update),V.scope),G=V.update=W.run.bind(W);G.id=V.uid,zp(V,!0),W.onTrack=V.rtc?de=>Pd(V.rtc,de):void 0,W.onTrigger=V.rtg?de=>Pd(V.rtg,de):void 0,G.ownerInstance=V,G()},Y=(V,J,ne)=>{J.component=V;const pe=V.vnode.props;V.vnode=J,V.next=null,s9e(V,J.props,pe,ne),p9e(V,J.children,ne),Ay(),U8(void 0,V.update),Cy()},Q=(V,J,ne,pe,k,q,H,ee,W=!1)=>{const G=V&&V.children,de=V?V.shapeFlag:0,fe=J.children,{patchFlag:Me,shapeFlag:Oe}=J;if(Me>0){if(Me&128){re(G,fe,ne,pe,k,q,H,ee,W);return}else if(Me&256){le(G,fe,ne,pe,k,q,H,ee,W);return}}Oe&8?(de&16&&st(G,k,q),fe!==G&&h(ne,fe)):de&16?Oe&16?re(G,fe,ne,pe,k,q,H,ee,W):st(G,k,q,!0):(de&8&&h(ne,""),Oe&16&&R(fe,ne,pe,k,q,H,ee,W))},le=(V,J,ne,pe,k,q,H,ee,W)=>{V=V||E0,J=J||E0;const G=V.length,de=J.length,fe=Math.min(G,de);let Me;for(Me=0;Me<fe;Me++){const Oe=J[Me]=W?Cd(J[Me]):Rs(J[Me]);w(V[Me],Oe,ne,null,k,q,H,ee,W)}G>de?st(V,k,q,!0,!1,fe):R(J,ne,pe,k,q,H,ee,W,fe)},re=(V,J,ne,pe,k,q,H,ee,W)=>{let G=0;const de=J.length;let fe=V.length-1,Me=de-1;for(;G<=fe&&G<=Me;){const Oe=V[G],Ye=J[G]=W?Cd(J[G]):Rs(J[G]);if($u(Oe,Ye))w(Oe,Ye,ne,null,k,q,H,ee,W);else break;G++}for(;G<=fe&&G<=Me;){const Oe=V[fe],Ye=J[Me]=W?Cd(J[Me]):Rs(J[Me]);if($u(Oe,Ye))w(Oe,Ye,ne,null,k,q,H,ee,W);else break;fe--,Me--}if(G>fe){if(G<=Me){const Oe=Me+1,Ye=Oe<de?J[Oe].el:pe;for(;G<=Me;)w(null,J[G]=W?Cd(J[G]):Rs(J[G]),ne,Ye,k,q,H,ee,W),G++}}else if(G>Me)for(;G<=fe;)_e(V[G],k,q,!0),G++;else{const Oe=G,Ye=G,Xe=new Map;for(G=Ye;G<=Me;G++){const yt=J[G]=W?Cd(J[G]):Rs(J[G]);yt.key!=null&&(Xe.has(yt.key)&&xe("Duplicate keys found during update:",JSON.stringify(yt.key),"Make sure keys are unique."),Xe.set(yt.key,G))}let ot,Jt=0;const qn=Me-Ye+1;let Vl=!1,be=0;const He=new Array(qn);for(G=0;G<qn;G++)He[G]=0;for(G=Oe;G<=fe;G++){const yt=V[G];if(Jt>=qn){_e(yt,k,q,!0);continue}let bt;if(yt.key!=null)bt=Xe.get(yt.key);else for(ot=Ye;ot<=Me;ot++)if(He[ot-Ye]===0&&$u(yt,J[ot])){bt=ot;break}bt===void 0?_e(yt,k,q,!0):(He[bt-Ye]=G+1,bt>=be?be=bt:Vl=!0,w(yt,J[bt],ne,null,k,q,H,ee,W),Jt++)}const dt=Vl?v9e(He):E0;for(ot=dt.length-1,G=qn-1;G>=0;G--){const yt=Ye+G,bt=J[yt],vi=yt+1<de?J[yt+1].el:pe;He[G]===0?w(null,bt,ne,vi,k,q,H,ee,W):Vl&&(ot<0||G!==dt[ot]?we(bt,ne,vi,2):ot--)}}},we=(V,J,ne,pe,k=null)=>{const{el:q,type:H,transition:ee,children:W,shapeFlag:G}=V;if(G&6){we(V.component.subTree,J,ne,pe);return}if(G&128){V.suspense.move(J,ne,pe);return}if(G&64){H.move(V,J,ne,X);return}if(H===hr){i(q,J,ne);for(let fe=0;fe<W.length;fe++)we(W[fe],J,ne,pe);i(V.anchor,J,ne);return}if(H===ah){T(V,J,ne);return}if(pe!==2&&G&1&&ee)if(pe===0)ee.beforeEnter(q),i(q,J,ne),mn(()=>ee.enter(q),k);else{const{leave:fe,delayLeave:Me,afterLeave:Oe}=ee,Ye=()=>i(q,J,ne),Xe=()=>{fe(q,()=>{Ye(),Oe&&Oe()})};Me?Me(q,Ye,Xe):Xe()}else i(q,J,ne)},_e=(V,J,ne,pe=!1,k=!1)=>{const{type:q,props:H,ref:ee,children:W,dynamicChildren:G,shapeFlag:de,patchFlag:fe,dirs:Me}=V;if(ee!=null&&uT(ee,null,ne,V,!0),de&256){J.ctx.deactivate(V);return}const Oe=de&1&&Me,Ye=!j_(V);let Xe;if(Ye&&(Xe=H&&H.onVnodeBeforeUnmount)&&Es(Xe,J,V),de&6)ht(V.component,ne,pe);else{if(de&128){V.suspense.unmount(ne,pe);return}Oe&&wu(V,null,J,"beforeUnmount"),de&64?V.type.remove(V,J,ne,k,X,pe):G&&(q!==hr||fe>0&&fe&64)?st(G,J,ne,!1,!0):(q===hr&&fe&384||!k&&de&16)&&st(W,J,ne),pe&&Ce(V)}(Ye&&(Xe=H&&H.onVnodeUnmounted)||Oe)&&mn(()=>{Xe&&Es(Xe,J,V),Oe&&wu(V,null,J,"unmounted")},ne)},Ce=V=>{const{type:J,el:ne,anchor:pe,transition:k}=V;if(J===hr){Ne(ne,pe);return}if(J===ah){$(V);return}const q=()=>{n(ne),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(V.shapeFlag&1&&k&&!k.persisted){const{leave:H,delayLeave:ee}=k,W=()=>H(ne,q);ee?ee(V.el,q,W):W()}else q()},Ne=(V,J)=>{let ne;for(;V!==J;)ne=f(V),n(V),V=ne;n(J)},ht=(V,J,ne)=>{V.type.__hmrId&&EFe(V);const{bum:pe,scope:k,update:q,subTree:H,um:ee}=V;pe&&Pd(pe),k.stop(),q&&(q.active=!1,_e(H,V,J,ne)),ee&&mn(ee,J),mn(()=>{V.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&V.asyncDep&&!V.asyncResolved&&V.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve()),PFe(V)},st=(V,J,ne,pe=!1,k=!1,q=0)=>{for(let H=q;H<V.length;H++)_e(V[H],J,ne,pe,k)},pt=V=>V.shapeFlag&6?pt(V.component.subTree):V.shapeFlag&128?V.suspense.next():f(V.anchor||V.el),Pt=(V,J,ne)=>{V==null?J._vnode&&_e(J._vnode,null,null,!0):w(J._vnode||null,V,J,null,null,null,ne),oT(),J._vnode=V},X={p:w,um:_e,m:we,r:Ce,mt:M,mc:R,pc:Q,pbc:F,n:pt,o:e};let te,he;return t&&([te,he]=t(X)),{render:Pt,hydrate:te,createApp:m9e(Pt,te)}}function zp({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function Vw(e,t,r=!1){const i=e.children,n=t.children;if(Ge(i)&&Ge(n))for(let s=0;s<i.length;s++){const o=i[s];let a=n[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[s]=Cd(n[s]),a.el=o.el),r||Vw(o,a)),a.type===Ri&&!a.el&&(a.el=o.el)}}function v9e(e){const t=e.slice(),r=[0];let i,n,s,o,a;const l=e.length;for(i=0;i<l;i++){const u=e[i];if(u!==0){if(n=r[r.length-1],e[n]<u){t[i]=n,r.push(i);continue}for(s=0,o=r.length-1;s<o;)a=s+o>>1,e[r[a]]<u?s=a+1:o=a;u<e[r[s]]&&(s>0&&(t[i]=r[s-1]),r[s]=i)}}for(s=r.length,o=r[s-1];s-- >0;)r[s]=o,o=t[o];return r}const b9e=e=>e.__isTeleport,C0=e=>e&&(e.disabled||e.disabled===""),UB=e=>typeof SVGElement<"u"&&e instanceof SVGElement,$R=(e,t)=>{const r=e&&e.to;if(Tt(r))if(t){const i=t(r);return i||xe(`Failed to locate Teleport target with selector "${r}". Note the target element must exist before the component is mounted - i.e. the target cannot be rendered by the component itself, and ideally should be outside of the entire Vue component tree.`),i}else return xe("Current renderer does not support string target for Teleports. (missing querySelector renderer option)"),null;else return!r&&!C0(e)&&xe(`Invalid Teleport target: ${r}`),r},w9e={__isTeleport:!0,process(e,t,r,i,n,s,o,a,l,u){const{mc:h,pc:d,pbc:f,o:{insert:m,querySelector:g,createText:b,createComment:w}}=u,_=C0(t.props);let{shapeFlag:x,children:I,dynamicChildren:S}=t;if(np&&(l=!1,S=null),e==null){const T=t.el=w("teleport start"),$=t.anchor=w("teleport end");m(T,r,i),m($,r,i);const E=t.target=$R(t.props,g),C=t.targetAnchor=b("");E?(m(C,E),o=o||UB(E)):_||xe("Invalid Teleport target on mount:",E,`(${typeof E})`);const O=(R,D)=>{x&16&&h(I,R,D,n,s,o,a,l)};_?O(r,$):E&&O(E,C)}else{t.el=e.el;const T=t.anchor=e.anchor,$=t.target=e.target,E=t.targetAnchor=e.targetAnchor,C=C0(e.props),O=C?r:$,R=C?T:E;if(o=o||UB($),S?(f(e.dynamicChildren,S,O,n,s,o,a),Vw(e,t,!0)):l||d(e,t,O,R,n,s,o,a,!1),_)C||ES(t,r,T,u,1);else if((t.props&&t.props.to)!==(e.props&&e.props.to)){const D=t.target=$R(t.props,g);D?ES(t,D,null,u,0):xe("Invalid Teleport target on update:",$,`(${typeof $})`)}else C&&ES(t,$,E,u,1)}},remove(e,t,r,i,{um:n,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:u,targetAnchor:h,target:d,props:f}=e;if(d&&s(h),(o||!C0(f))&&(s(u),a&16))for(let m=0;m<l.length;m++){const g=l[m];n(g,t,r,!0,!!g.dynamicChildren)}},move:ES,hydrate:_9e};function ES(e,t,r,{o:{insert:i},m:n},s=2){s===0&&i(e.targetAnchor,t,r);const{el:o,anchor:a,shapeFlag:l,children:u,props:h}=e,d=s===2;if(d&&i(o,t,r),(!d||C0(h))&&l&16)for(let f=0;f<u.length;f++)n(u[f],t,r,2);d&&i(a,t,r)}function _9e(e,t,r,i,n,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},u){const h=t.target=$R(t.props,l);if(h){const d=h._lpa||h.firstChild;t.shapeFlag&16&&(C0(t.props)?(t.anchor=u(o(e),t,a(e),r,i,n,s),t.targetAnchor=d):(t.anchor=o(e),t.targetAnchor=u(d,t,h,r,i,n,s)),h._lpa=t.targetAnchor&&o(t.targetAnchor))}return t.anchor&&o(t.anchor)}const Lne=w9e,cT="components",x9e="directives";function or(e,t){return lD(cT,e,!0,t)||e}const Nne=Symbol();function aD(e){return Tt(e)?lD(cT,e,!1)||e:e||Nne}function Er(e){return lD(x9e,e)}function lD(e,t,r=!0,i=!1){const n=Dn||Ci;if(n){const s=n.type;if(e===cT){const a=V_(s);if(a&&(a===t||a===In(t)||a===Tl(In(t))))return s}const o=zB(n[e]||s[e],t)||zB(n.appContext[e],t);if(!o&&i)return s;if(r&&!o){const a=e===cT?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";xe(`Failed to resolve ${e.slice(0,-1)}: ${t}${a}`)}return o}else xe(`resolve${Tl(e.slice(0,-1))} can only be used in render() or setup().`)}function zB(e,t){return e&&(e[t]||e[In(t)]||e[Tl(In(t))])}const hr=Symbol("Fragment"),Hu=Symbol("Text"),Ri=Symbol("Comment"),ah=Symbol("Static"),Uw=[];let Nu=null;function De(e=!1){Uw.push(Nu=e?null:[])}function Dne(){Uw.pop(),Nu=Uw[Uw.length-1]||null}let lv=1;function hT(e){lv+=e}function Fne(e){return e.dynamicChildren=lv>0?Nu||E0:null,Dne(),lv>0&&Nu&&Nu.push(e),e}function et(e,t,r,i,n,s){return Fne(ke(e,t,r,i,n,s,!0))}function zi(e,t,r,i,n){return Fne(Mt(e,t,r,i,n,!0))}function $l(e){return e?e.__v_isVNode===!0:!1}function $u(e,t){return t.shapeFlag&6&&Hg.has(t.type)?!1:e.type===t.type&&e.key===t.key}let ER;function jne(e){ER=e}const S9e=(...e)=>M9e(...ER?ER(e,Dn):e),fE="__vInternal",Vne=({key:e})=>e??null,_3=({ref:e,ref_key:t,ref_for:r})=>e!=null?Tt(e)||vr(e)||ft(e)?{i:Dn,r:e,k:t,f:!!r}:e:null;function ke(e,t=null,r=null,i=0,n=null,s=e===hr?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Vne(t),ref:t&&_3(t),scopeId:uE,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:n,dynamicChildren:null,appContext:null};return a?(hD(l,r),s&128&&e.normalize(l)):r&&(l.shapeFlag|=Tt(r)?8:16),l.key!==l.key&&xe("VNode created with invalid key (NaN). VNode type:",l.type),lv>0&&!o&&Nu&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Nu.push(l),l}const Mt=S9e;function M9e(e,t=null,r=null,i=0,n=null,s=!1){if((!e||e===Nne)&&(e||xe(`Invalid vnode type when creating vnode: ${e}.`),e=Ri),$l(e)){const a=El(e,t,!0);return r&&hD(a,r),a}if(Yne(e)&&(e=e.__vccOpts),t){t=uD(t);let{class:a,style:l}=t;a&&!Tt(a)&&(t.class=zn(a)),pr(l)&&(av(l)&&!Ge(l)&&(l=Wt({},l)),t.style=$p(l))}const o=Tt(e)?1:zFe(e)?128:b9e(e)?64:pr(e)?4:ft(e)?2:0;return o&4&&av(e)&&(e=it(e),xe("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,e)),ke(e,t,r,i,n,o,s,!0)}function uD(e){return e?av(e)||fE in e?Wt({},e):e:null}function El(e,t,r=!1){const{props:i,ref:n,patchFlag:s,children:o}=e,a=t?mE(i||{},t):i;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:a,key:a&&Vne(a),ref:t&&t.ref?r&&n?Ge(n)?n.concat(_3(t)):[n,_3(t)]:_3(t):n,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s===-1&&Ge(o)?o.map(Une):o,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==hr?s===-1?16:s|16:s,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&El(e.ssContent),ssFallback:e.ssFallback&&El(e.ssFallback),el:e.el,anchor:e.anchor}}function Une(e){const t=El(e);return Ge(e.children)&&(t.children=e.children.map(Une)),t}function lh(e=" ",t=0){return Mt(Hu,null,e,t)}function cD(e,t){const r=Mt(ah,null,e);return r.staticCount=t,r}function Yt(e="",t=!1){return t?(De(),zi(Ri,null,e)):Mt(Ri,null,e)}function Rs(e){return e==null||typeof e=="boolean"?Mt(Ri):Ge(e)?Mt(hr,null,e.slice()):typeof e=="object"?Cd(e):Mt(Hu,null,String(e))}function Cd(e){return e.el===null||e.memo?e:El(e)}function hD(e,t){let r=0;const{shapeFlag:i}=e;if(t==null)t=null;else if(Ge(t))r=16;else if(typeof t=="object")if(i&65){const n=t.default;n&&(n._c&&(n._d=!1),hD(e,n()),n._c&&(n._d=!0));return}else{r=32;const n=t._;!n&&!(fE in t)?t._ctx=Dn:n===3&&Dn&&(Dn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ft(t)?(t={default:t,_ctx:Dn},r=32):(t=String(t),i&64?(r=16,t=[lh(t)]):r=8);e.children=t,e.shapeFlag|=r}function mE(...e){const t={};for(let r=0;r<e.length;r++){const i=e[r];for(const n in i)if(n==="class")t.class!==i.class&&(t.class=zn([t.class,i.class]));else if(n==="style")t.style=$p([t.style,i.style]);else if(gh(n)){const s=t[n],o=i[n];o&&s!==o&&!(Ge(s)&&s.includes(o))&&(t[n]=s?[].concat(s,o):o)}else n!==""&&(t[n]=i[n])}return t}function Es(e,t,r,i=null){Bs(e,t,7,[r,i])}function Oy(e,t,r,i){let n;const s=r&&r[i];if(Ge(e)||Tt(e)){n=new Array(e.length);for(let o=0,a=e.length;o<a;o++)n[o]=t(e[o],o,void 0,s&&s[o])}else if(typeof e=="number"){if(!Number.isInteger(e))return xe(`The v-for range expect an integer value but got ${e}.`),[];n=new Array(e);for(let o=0;o<e;o++)n[o]=t(o+1,o,void 0,s&&s[o])}else if(pr(e))if(e[Symbol.iterator])n=Array.from(e,(o,a)=>t(o,a,void 0,s&&s[a]));else{const o=Object.keys(e);n=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const u=o[a];n[a]=t(e[u],u,a,s&&s[a])}}else n=[];return r&&(r[i]=n),n}function zne(e,t){for(let r=0;r<t.length;r++){const i=t[r];if(Ge(i))for(let n=0;n<i.length;n++)e[i[n].name]=i[n].fn;else i&&(e[i.name]=i.fn)}return e}function cl(e,t,r={},i,n){if(Dn.isCE)return Mt("slot",t==="default"?null:{name:t},i&&i());let s=e[t];s&&s.length>1&&(xe("SSR-optimized slot function detected in a non-SSR-optimized render function. You need to mark this component with $dynamic-slots in the parent template."),s=()=>[]),s&&s._c&&(s._d=!1),De();const o=s&&Bne(s(r)),a=zi(hr,{key:r.key||`_${t}`},o||(i?i():[]),o&&e._===1?64:-2);return!n&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Bne(e){return e.some(t=>$l(t)?!(t.type===Ri||t.type===hr&&!Bne(t.children)):!0)?e:null}function Gne(e){const t={};if(!pr(e))return xe("v-on with no argument expects an object value."),t;for(const r in e)t[rl(r)]=e[r];return t}const AR=e=>e?Hne(e)?pD(e)||e.proxy:AR(e.parent):null,uv=Wt(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>Gd(e.props),$attrs:e=>Gd(e.attrs),$slots:e=>Gd(e.slots),$refs:e=>Gd(e.refs),$parent:e=>AR(e.parent),$root:e=>AR(e.root),$emit:e=>e.emit,$options:e=>Mne(e),$forceUpdate:e=>()=>aE(e.update),$nextTick:e=>j2.bind(e.proxy),$watch:e=>JFe.bind(e)}),zw={get({_:e},t){const{ctx:r,setupState:i,data:n,props:s,accessCache:o,type:a,appContext:l}=e;if(t==="__isVue")return!0;if(i!==Gt&&i.__isScriptSetup&&zt(i,t))return i[t];let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return n[t];case 4:return r[t];case 3:return s[t]}else{if(i!==Gt&&zt(i,t))return o[t]=1,i[t];if(n!==Gt&&zt(n,t))return o[t]=2,n[t];if((u=e.propsOptions[0])&&zt(u,t))return o[t]=3,s[t];if(r!==Gt&&zt(r,t))return o[t]=4,r[t];SR&&(o[t]=0)}}const h=uv[t];let d,f;if(h)return t==="$attrs"&&(Do(e,"get",t),aT()),h(e);if((d=a.__cssModules)&&(d=d[t]))return d;if(r!==Gt&&zt(r,t))return o[t]=4,r[t];if(f=l.config.globalProperties,zt(f,t))return f[t];Dn&&(!Tt(t)||t.indexOf("__v")!==0)&&(n!==Gt&&(t[0]==="$"||t[0]==="_")&&zt(n,t)?xe(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):e===Dn&&xe(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:e},t,r){const{data:i,setupState:n,ctx:s}=e;return n!==Gt&&zt(n,t)?(n[t]=r,!0):i!==Gt&&zt(i,t)?(i[t]=r,!0):zt(e.props,t)?(xe(`Attempting to mutate prop "${t}". Props are readonly.`,e),!1):t[0]==="$"&&t.slice(1)in e?(xe(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`,e),!1):(t in e.appContext.config.globalProperties?Object.defineProperty(s,t,{enumerable:!0,configurable:!0,value:r}):s[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:i,appContext:n,propsOptions:s}},o){let a;return!!r[o]||e!==Gt&&zt(e,o)||t!==Gt&&zt(t,o)||(a=s[0])&&zt(a,o)||zt(i,o)||zt(uv,o)||zt(n.config.globalProperties,o)},defineProperty(e,t,r){return r.get!=null?this.set(e,t,r.get(),null):r.value!=null&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};zw.ownKeys=e=>(xe("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(e));const I9e=Wt({},zw,{get(e,t){if(t!==Symbol.unscopables)return zw.get(e,t,e)},has(e,t){const r=t[0]!=="_"&&!IDe(t);return!r&&zw.has(e,t)&&xe(`Property ${JSON.stringify(t)} should not start with _ which is a reserved prefix for Vue internals.`),r}});function T9e(e){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>e}),Object.keys(uv).forEach(r=>{Object.defineProperty(t,r,{configurable:!0,enumerable:!1,get:()=>uv[r](e),set:bn})}),t}function $9e(e){const{ctx:t,propsOptions:[r]}=e;r&&Object.keys(r).forEach(i=>{Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>e.props[i],set:bn})})}function E9e(e){const{ctx:t,setupState:r}=e;Object.keys(it(r)).forEach(i=>{if(!r.__isScriptSetup){if(i[0]==="$"||i[0]==="_"){xe(`setup() return property ${JSON.stringify(i)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r[i],set:bn})}})}const A9e=One();let C9e=0;function qne(e,t,r){const i=e.type,n=(t?t.appContext:e.appContext)||A9e,s={uid:C9e++,vnode:e,type:i,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,scope:new X$(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Tne(i,n),emitsOptions:pne(i,n),emit:null,emitted:null,propsDefaults:Gt,inheritAttrs:i.inheritAttrs,ctx:Gt,data:Gt,props:Gt,attrs:Gt,slots:Gt,refs:Gt,setupState:Gt,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx=T9e(s),s.root=t?t.root:s,s.emit=DFe.bind(null,s),e.ce&&e.ce(s),s}let Ci=null;const ys=()=>Ci||Dn,bp=e=>{Ci=e,e.scope.on()},sp=()=>{Ci&&Ci.scope.off(),Ci=null},k9e=Bn("slot,component");function CR(e,t){const r=t.isNativeTag||Rw;(k9e(e)||r(e))&&xe("Do not use built-in or reserved HTML elements as component id: "+e)}function Hne(e){return e.vnode.shapeFlag&4}let cv=!1;function Wne(e,t=!1){cv=t;const{props:r,children:i}=e.vnode,n=Hne(e);n9e(e,r,n,t),d9e(e,i);const s=n?O9e(e,t):void 0;return cv=!1,s}function O9e(e,t){const r=e.type;{if(r.name&&CR(r.name,e.appContext.config),r.components){const n=Object.keys(r.components);for(let s=0;s<n.length;s++)CR(n[s],e.appContext.config)}if(r.directives){const n=Object.keys(r.directives);for(let s=0;s<n.length;s++)kne(n[s])}r.compilerOptions&&yE()&&xe('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}e.accessCache=Object.create(null),e.proxy=Gn(new Proxy(e.ctx,zw)),$9e(e);const{setup:i}=r;if(i){const n=e.setupContext=i.length>1?Zne(e):null;bp(e),Ay();const s=yl(i,e,0,[Gd(e.props),n]);if(Cy(),sp(),Z$(s)){if(s.then(sp,sp),t)return s.then(o=>{kR(e,o,t)}).catch(o=>{Ep(o,e,0)});e.asyncDep=s}else kR(e,s,t)}else Jne(e,t)}function kR(e,t,r){ft(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:pr(t)?($l(t)&&xe("setup() should not return VNodes directly - return a render function instead."),e.devtoolsRawSetupState=t,e.setupState=oE(t),E9e(e)):t!==void 0&&xe(`setup() should return an object. Received: ${t===null?"null":typeof t}`),Jne(e,r)}let Bw,OR;function dD(e){Bw=e,OR=t=>{t.render._rc&&(t.withProxy=new Proxy(t.ctx,I9e))}}const yE=()=>!Bw;function Jne(e,t,r){const i=e.type;if(!e.render){if(!t&&Bw&&!i.render){const n=i.template;if(n){Vc(e,"compile");const{isCustomElement:s,compilerOptions:o}=e.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Wt(Wt({isCustomElement:s,delimiters:a},o),l);i.render=Bw(n,u),Uc(e,"compile")}}e.render=i.render||bn,OR&&OR(e)}bp(e),Ay(),QFe(e),Cy(),sp(),!i.render&&e.render===bn&&!t&&(!Bw&&i.template?xe('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):xe("Component is missing template or render function."))}function P9e(e){return new Proxy(e.attrs,{get(t,r){return aT(),Do(e,"get","$attrs"),t[r]},set(){return xe("setupContext.attrs is readonly."),!1},deleteProperty(){return xe("setupContext.attrs is readonly."),!1}})}function Zne(e){const t=i=>{e.exposed&&xe("expose() should be called only once per setup()."),e.exposed=i||{}};let r;return Object.freeze({get attrs(){return r||(r=P9e(e))},get slots(){return Gd(e.slots)},get emit(){return(i,...n)=>e.emit(i,...n)},expose:t})}function pD(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(oE(Gn(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in uv)return uv[r](e)}}))}const R9e=/(?:^|[-_])(\w)/g,L9e=e=>e.replace(R9e,t=>t.toUpperCase()).replace(/[-_]/g,"");function V_(e){return ft(e)&&e.displayName||e.name}function gE(e,t,r=!1){let i=V_(t);if(!i&&t.__file){const n=t.__file.match(/([^/\\]+)\.\w+$/);n&&(i=n[1])}if(!i&&e&&e.parent){const n=s=>{for(const o in s)if(s[o]===t)return o};i=n(e.components||e.parent.type.components)||n(e.appContext.components)}return i?L9e(i):r?"App":"Anonymous"}function Yne(e){return ft(e)&&"__vccOpts"in e}const sl=(e,t)=>gFe(e,t,cv),vE=e=>xe(`${e}() is a compiler-hint helper that is only usable inside <script setup> of a single file component. Its arguments should be compiled away and passing it at runtime has no effect.`);function Kne(){return vE("defineProps"),null}function Xne(){return vE("defineEmits"),null}function Qne(e){vE("defineExpose")}function ese(e,t){return vE("withDefaults"),null}function tse(){return ise().slots}function rse(){return ise().attrs}function ise(){const e=ys();return e||xe("useContext() called without active instance."),e.setupContext||(e.setupContext=Zne(e))}function nse(e,t){const r=Ge(e)?e.reduce((i,n)=>(i[n]={},i),{}):e;for(const i in t){const n=r[i];n?Ge(n)||ft(n)?r[i]={type:n,default:t[i]}:n.default=t[i]:n===null?r[i]={default:t[i]}:xe(`props default key "${i}" has no corresponding declaration.`)}return r}function sse(e,t){const r={};for(const i in e)t.includes(i)||Object.defineProperty(r,i,{enumerable:!0,get:()=>e[i]});return r}function ose(e){const t=ys();t||xe("withAsyncContext called without active current instance. This is likely a bug.");let r=e();return sp(),Z$(r)&&(r=r.catch(i=>{throw bp(t),i})),[r,()=>bp(t)]}function qs(e,t,r){const i=arguments.length;return i===2?pr(t)&&!Ge(t)?$l(t)?Mt(e,null,[t]):Mt(e,t):Mt(e,null,t):(i>3?r=Array.prototype.slice.call(arguments,2):i===3&&$l(r)&&(r=[r]),Mt(e,t,r))}const fD=Symbol("ssrContext"),ase=()=>{{const e=Cm(fD);return e||xe("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),e}};function rA(e){return!!(e&&e.__v_isShallow)}function mD(){if(typeof window>"u")return;const e={style:"color:#3ba776"},t={style:"color:#0b1bc9"},r={style:"color:#b62e24"},i={style:"color:#9d288c"},n={header(d){return pr(d)?d.__isVue?["div",e,"VueInstance"]:vr(d)?["div",{},["span",e,h(d)],"<",a(d.value),">"]:ml(d)?["div",{},["span",e,rA(d)?"ShallowReactive":"Reactive"],"<",a(d),`>${bh(d)?" (readonly)":""}`]:bh(d)?["div",{},["span",e,rA(d)?"ShallowReadonly":"Readonly"],"<",a(d),">"]:null:null},hasBody(d){return d&&d.__isVue},body(d){if(d&&d.__isVue)return["div",{},...s(d.$)]}};function s(d){const f=[];d.type.props&&d.props&&f.push(o("props",it(d.props))),d.setupState!==Gt&&f.push(o("setup",d.setupState)),d.data!==Gt&&f.push(o("data",it(d.data)));const m=l(d,"computed");m&&f.push(o("computed",m));const g=l(d,"inject");return g&&f.push(o("injected",g)),f.push(["div",{},["span",{style:i.style+";opacity:0.66"},"$ (internal): "],["object",{object:d}]]),f}function o(d,f){return f=Wt({},f),Object.keys(f).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},d],["div",{style:"padding-left:1.25em"},...Object.keys(f).map(m=>["div",{},["span",i,m+": "],a(f[m],!1)])]]:["span",{}]}function a(d,f=!0){return typeof d=="number"?["span",t,d]:typeof d=="string"?["span",r,JSON.stringify(d)]:typeof d=="boolean"?["span",i,d]:pr(d)?["object",{object:f?it(d):d}]:["span",r,String(d)]}function l(d,f){const m=d.type;if(ft(m))return;const g={};for(const b in d.ctx)u(m,b,f)&&(g[b]=d.ctx[b]);return g}function u(d,f,m){const g=d[m];if(Ge(g)&&g.includes(f)||pr(g)&&f in g||d.extends&&u(d.extends,f,m)||d.mixins&&d.mixins.some(b=>u(b,f,m)))return!0}function h(d){return rA(d)?"ShallowRef":d.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(n):window.devtoolsFormatters=[n]}function lse(e,t,r,i){const n=r[i];if(n&&yD(n,e))return n;const s=t();return s.memo=e.slice(),r[i]=s}function yD(e,t){const r=e.memo;if(r.length!=t.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==t[i])return!1;return lv>0&&Nu&&Nu.push(e),!0}const dT="3.2.31",N9e={createComponentInstance:qne,setupComponent:Wne,renderComponentRoot:w3,setCurrentRenderingInstance:D_,isVNode:$l,normalizeVNode:Rs},use=N9e,cse=null,hse=null,D9e="http://www.w3.org/2000/svg",Jf=typeof document<"u"?document:null,BB=Jf&&Jf.createElement("template"),F9e={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,i)=>{const n=t?Jf.createElementNS(D9e,e):Jf.createElement(e,r?{is:r}:void 0);return e==="select"&&i&&i.multiple!=null&&n.setAttribute("multiple",i.multiple),n},createText:e=>Jf.createTextNode(e),createComment:e=>Jf.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Jf.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,i,n,s){const o=r?r.previousSibling:t.lastChild;if(n&&(n===s||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),r),!(n===s||!(n=n.nextSibling)););else{BB.innerHTML=i?`<svg>${e}</svg>`:e;const a=BB.content;if(i){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,r)}return[o?o.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function j9e(e,t,r){const i=e._vtc;i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function V9e(e,t,r){const i=e.style,n=Tt(r);if(r&&!n){for(const s in r)PR(i,s,r[s]);if(t&&!Tt(t))for(const s in t)r[s]==null&&PR(i,s,"")}else{const s=i.display;n?t!==r&&(i.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(i.display=s)}}const GB=/\s*!important$/;function PR(e,t,r){if(Ge(r))r.forEach(i=>PR(e,t,i));else if(t.startsWith("--"))e.setProperty(t,r);else{const i=U9e(e,t);GB.test(r)?e.setProperty(ko(i),r.replace(GB,""),"important"):e[i]=r}}const qB=["Webkit","Moz","ms"],iA={};function U9e(e,t){const r=iA[t];if(r)return r;let i=In(t);if(i!=="filter"&&i in e)return iA[t]=i;i=Tl(i);for(let n=0;n<qB.length;n++){const s=qB[n]+i;if(s in e)return iA[t]=s}return t}const HB="http://www.w3.org/1999/xlink";function z9e(e,t,r,i,n){if(i&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(HB,t.slice(6,t.length)):e.setAttributeNS(HB,t,r);else{const s=EDe(t);r==null||s&&!Mie(r)?e.removeAttribute(t):e.setAttribute(t,s?"":r)}}function B9e(e,t,r,i,n,s,o){if(t==="innerHTML"||t==="textContent"){i&&o(i,n,s),e[t]=r??"";return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const a=r??"";(e.value!==a||e.tagName==="OPTION")&&(e.value=a),r==null&&e.removeAttribute(t);return}if(r===""||r==null){const a=typeof e[t];if(a==="boolean"){e[t]=Mie(r);return}else if(r==null&&a==="string"){e[t]="",e.removeAttribute(t);return}else if(a==="number"){try{e[t]=0}catch{}e.removeAttribute(t);return}}try{e[t]=r}catch(a){xe(`Failed setting prop "${t}" on <${e.tagName.toLowerCase()}>: value ${r} is invalid.`,a)}}let pT=Date.now,dse=!1;if(typeof window<"u"){pT()>document.createEvent("Event").timeStamp&&(pT=()=>performance.now());const e=navigator.userAgent.match(/firefox\/(\d+)/i);dse=!!(e&&Number(e[1])<=53)}let RR=0;const G9e=Promise.resolve(),q9e=()=>{RR=0},H9e=()=>RR||(G9e.then(q9e),RR=pT());function eh(e,t,r,i){e.addEventListener(t,r,i)}function W9e(e,t,r,i){e.removeEventListener(t,r,i)}function J9e(e,t,r,i,n=null){const s=e._vei||(e._vei={}),o=s[t];if(i&&o)o.value=i;else{const[a,l]=Z9e(t);if(i){const u=s[t]=Y9e(i,n);eh(e,a,u,l)}else o&&(W9e(e,a,o,l),s[t]=void 0)}}const WB=/(?:Once|Passive|Capture)$/;function Z9e(e){let t;if(WB.test(e)){t={};let r;for(;r=e.match(WB);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[ko(e.slice(2)),t]}function Y9e(e,t){const r=i=>{const n=i.timeStamp||pT();(dse||n>=r.attached-1)&&Bs(K9e(i,r.value),t,5,[i])};return r.value=e,r.attached=H9e(),r}function K9e(e,t){if(Ge(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(i=>n=>!n._stopped&&i&&i(n))}else return t}const JB=/^on[a-z]/,X9e=(e,t,r,i,n=!1,s,o,a,l)=>{t==="class"?j9e(e,i,n):t==="style"?V9e(e,r,i):gh(t)?iT(t)||J9e(e,t,r,i,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):Q9e(e,t,i,n))?B9e(e,t,i,s,o,a,l):(t==="true-value"?e._trueValue=i:t==="false-value"&&(e._falseValue=i),z9e(e,t,i,n))};function Q9e(e,t,r,i){return i?!!(t==="innerHTML"||t==="textContent"||t in e&&JB.test(t)&&ft(r)):t==="spellcheck"||t==="draggable"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||JB.test(t)&&Tt(r)?!1:t in e}function gD(e,t){const r=tr(e);class i extends H2{constructor(s){super(r,s,t)}}return i.def=r,i}const pse=e=>gD(e,wD),e7e=typeof HTMLElement<"u"?HTMLElement:class{};class H2 extends e7e{constructor(t,r={},i){super(),this._def=t,this._props=r,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&i?i(this._createVNode(),this.shadowRoot):(this.shadowRoot&&xe("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}))}connectedCallback(){this._connected=!0,this._instance||this._resolveDef()}disconnectedCallback(){this._connected=!1,j2(()=>{this._connected||(uh(null,this.shadowRoot),this._instance=null)})}_resolveDef(){if(this._resolved)return;this._resolved=!0;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);new MutationObserver(i=>{for(const n of i)this._setAttr(n.attributeName)}).observe(this,{attributes:!0});const t=i=>{const{props:n,styles:s}=i,o=!Ge(n),a=n?o?Object.keys(n):n:[];let l;if(o)for(const u in this._props){const h=n[u];(h===Number||h&&h.type===Number)&&(this._props[u]=yp(this._props[u]),(l||(l=Object.create(null)))[u]=!0)}this._numberProps=l;for(const u of Object.keys(this))u[0]!=="_"&&this._setProp(u,this[u],!0,!1);for(const u of a.map(In))Object.defineProperty(this,u,{get(){return this._getProp(u)},set(h){this._setProp(u,h)}});this._applyStyles(s),this._update()},r=this._def.__asyncLoader;r?r().then(t):t(this._def)}_setAttr(t){let r=this.getAttribute(t);this._numberProps&&this._numberProps[t]&&(r=yp(r)),this._setProp(In(t),r,!1)}_getProp(t){return this._props[t]}_setProp(t,r,i=!0,n=!0){r!==this._props[t]&&(this._props[t]=r,n&&this._instance&&this._update(),i&&(r===!0?this.setAttribute(ko(t),""):typeof r=="string"||typeof r=="number"?this.setAttribute(ko(t),r+""):r||this.removeAttribute(ko(t))))}_update(){uh(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Mt(this._def,Wt({},this._props));return this._instance||(t.ce=r=>{this._instance=r,r.isCE=!0,r.ceReload=n=>{this._styles&&(this._styles.forEach(s=>this.shadowRoot.removeChild(s)),this._styles.length=0),this._applyStyles(n),this._def.__asyncLoader||(this._instance=null,this._update())},r.emit=(n,...s)=>{this.dispatchEvent(new CustomEvent(n,{detail:s}))};let i=this;for(;i=i&&(i.parentNode||i.host);)if(i instanceof H2){r.parent=i._instance;break}}),t}_applyStyles(t){t&&t.forEach(r=>{const i=document.createElement("style");i.textContent=r,this.shadowRoot.appendChild(i),(this._styles||(this._styles=[])).push(i)})}}function fse(e="$style"){{const t=ys();if(!t)return xe("useCssModule must be called inside setup()"),Gt;const r=t.type.__cssModules;if(!r)return xe("Current instance does not have CSS modules injected."),Gt;const i=r[e];return i||(xe(`Current instance does not have CSS module named "${e}".`),Gt)}}function mse(e){const t=ys();if(!t){xe("useCssVars is called without current active component instance.");return}const r=()=>LR(t.subTree,e(t.proxy));Z8(r),Xu(()=>{const i=new MutationObserver(r);i.observe(t.subTree.el.parentNode,{childList:!0}),ky(()=>i.disconnect())})}function LR(e,t){if(e.shapeFlag&128){const r=e.suspense;e=r.activeBranch,r.pendingBranch&&!r.isHydrating&&r.effects.push(()=>{LR(r.activeBranch,t)})}for(;e.component;)e=e.component.subTree;if(e.shapeFlag&1&&e.el)ZB(e.el,t);else if(e.type===hr)e.children.forEach(r=>LR(r,t));else if(e.type===ah){let{el:r,anchor:i}=e;for(;r&&(ZB(r,t),r!==i);)r=r.nextSibling}}function ZB(e,t){if(e.nodeType===1){const r=e.style;for(const i in t)r.setProperty(`--${i}`,t[i])}}const Zh="transition",q1="animation",W2=(e,{slots:t})=>qs(hE,gse(e),t);W2.displayName="Transition";const yse={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},t7e=W2.props=Wt({},hE.props,yse),Bp=(e,t=[])=>{Ge(e)?e.forEach(r=>r(...t)):e&&e(...t)},YB=e=>e?Ge(e)?e.some(t=>t.length>1):e.length>1:!1;function gse(e){const t={};for(const F in e)F in yse||(t[F]=e[F]);if(e.css===!1)return t;const{name:r="v",type:i,duration:n,enterFromClass:s=`${r}-enter-from`,enterActiveClass:o=`${r}-enter-active`,enterToClass:a=`${r}-enter-to`,appearFromClass:l=s,appearActiveClass:u=o,appearToClass:h=a,leaveFromClass:d=`${r}-leave-from`,leaveActiveClass:f=`${r}-leave-active`,leaveToClass:m=`${r}-leave-to`}=e,g=r7e(n),b=g&&g[0],w=g&&g[1],{onBeforeEnter:_,onEnter:x,onEnterCancelled:I,onLeave:S,onLeaveCancelled:T,onBeforeAppear:$=_,onAppear:E=x,onAppearCancelled:C=I}=t,O=(F,z,B)=>{Df(F,z?h:a),Df(F,z?u:o),B&&B()},R=(F,z)=>{Df(F,m),Df(F,f),z&&z()},D=F=>(z,B)=>{const y=F?E:x,M=()=>O(z,F,B);Bp(y,[z,M]),KB(()=>{Df(z,F?l:s),zc(z,F?h:a),YB(y)||XB(z,i,b,M)})};return Wt(t,{onBeforeEnter(F){Bp(_,[F]),zc(F,s),zc(F,o)},onBeforeAppear(F){Bp($,[F]),zc(F,l),zc(F,u)},onEnter:D(!1),onAppear:D(!0),onLeave(F,z){const B=()=>R(F,z);zc(F,d),bse(),zc(F,f),KB(()=>{Df(F,d),zc(F,m),YB(S)||XB(F,i,w,B)}),Bp(S,[F,B])},onEnterCancelled(F){O(F,!1),Bp(I,[F])},onAppearCancelled(F){O(F,!0),Bp(C,[F])},onLeaveCancelled(F){R(F),Bp(T,[F])}})}function r7e(e){if(e==null)return null;if(pr(e))return[nA(e.enter),nA(e.leave)];{const t=nA(e);return[t,t]}}function nA(e){const t=yp(e);return i7e(t),t}function i7e(e){typeof e!="number"?xe(`<transition> explicit duration is not a valid number - got ${JSON.stringify(e)}.`):isNaN(e)&&xe("<transition> explicit duration is NaN - the duration expression might be incorrect.")}function zc(e,t){t.split(/\s+/).forEach(r=>r&&e.classList.add(r)),(e._vtc||(e._vtc=new Set)).add(t)}function Df(e,t){t.split(/\s+/).forEach(i=>i&&e.classList.remove(i));const{_vtc:r}=e;r&&(r.delete(t),r.size||(e._vtc=void 0))}function KB(e){requestAnimationFrame(()=>{requestAnimationFrame(e)})}let n7e=0;function XB(e,t,r,i){const n=e._endId=++n7e,s=()=>{n===e._endId&&i()};if(r)return setTimeout(s,r);const{type:o,timeout:a,propCount:l}=vse(e,t);if(!o)return i();const u=o+"end";let h=0;const d=()=>{e.removeEventListener(u,f),s()},f=m=>{m.target===e&&++h>=l&&d()};setTimeout(()=>{h<l&&d()},a+1),e.addEventListener(u,f)}function vse(e,t){const r=window.getComputedStyle(e),i=g=>(r[g]||"").split(", "),n=i(Zh+"Delay"),s=i(Zh+"Duration"),o=QB(n,s),a=i(q1+"Delay"),l=i(q1+"Duration"),u=QB(a,l);let h=null,d=0,f=0;t===Zh?o>0&&(h=Zh,d=o,f=s.length):t===q1?u>0&&(h=q1,d=u,f=l.length):(d=Math.max(o,u),h=d>0?o>u?Zh:q1:null,f=h?h===Zh?s.length:l.length:0);const m=h===Zh&&/\b(transform|all)(,|$)/.test(r[Zh+"Property"]);return{type:h,timeout:d,propCount:f,hasTransform:m}}function QB(e,t){for(;e.length<t.length;)e=e.concat(e);return Math.max(...t.map((r,i)=>eG(r)+eG(e[i])))}function eG(e){return Number(e.slice(0,-1).replace(",","."))*1e3}function bse(){return document.body.offsetHeight}const wse=new WeakMap,_se=new WeakMap,s7e={name:"TransitionGroup",props:Wt({},t7e,{tag:String,moveClass:String}),setup(e,{slots:t}){const r=ys(),i=cE();let n,s;return G2(()=>{if(!n.length)return;const o=e.moveClass||`${e.name||"v"}-move`;if(!u7e(n[0].el,r.vnode.el,o))return;n.forEach(o7e),n.forEach(a7e);const a=n.filter(l7e);bse(),a.forEach(l=>{const u=l.el,h=u.style;zc(u,o),h.transform=h.webkitTransform=h.transitionDuration="";const d=u._moveCb=f=>{f&&f.target!==u||(!f||/transform$/.test(f.propertyName))&&(u.removeEventListener("transitionend",d),u._moveCb=null,Df(u,o))};u.addEventListener("transitionend",d)})}),()=>{const o=it(e),a=gse(o);let l=o.tag||hr;n=s,s=t.default?B2(t.default()):[];for(let u=0;u<s.length;u++){const h=s[u];h.key!=null?vp(h,ry(h,a,i,r)):xe("<TransitionGroup> children must be keyed.")}if(n)for(let u=0;u<n.length;u++){const h=n[u];vp(h,ry(h,a,i,r)),wse.set(h,h.el.getBoundingClientRect())}return Mt(l,null,s)}}},vD=s7e;function o7e(e){const t=e.el;t._moveCb&&t._moveCb(),t._enterCb&&t._enterCb()}function a7e(e){_se.set(e,e.el.getBoundingClientRect())}function l7e(e){const t=wse.get(e),r=_se.get(e),i=t.left-r.left,n=t.top-r.top;if(i||n){const s=e.el.style;return s.transform=s.webkitTransform=`translate(${i}px,${n}px)`,s.transitionDuration="0s",e}}function u7e(e,t,r){const i=e.cloneNode();e._vtc&&e._vtc.forEach(o=>{o.split(/\s+/).forEach(a=>a&&i.classList.remove(a))}),r.split(/\s+/).forEach(o=>o&&i.classList.add(o)),i.style.display="none";const n=t.nodeType===1?t:t.parentNode;n.appendChild(i);const{hasTransform:s}=vse(i);return n.removeChild(i),s}const wp=e=>{const t=e.props["onUpdate:modelValue"];return Ge(t)?r=>Pd(t,r):t};function c7e(e){e.target.composing=!0}function tG(e){const t=e.target;t.composing&&(t.composing=!1,h7e(t,"input"))}function h7e(e,t){const r=document.createEvent("HTMLEvents");r.initEvent(t,!0,!0),e.dispatchEvent(r)}const U_={created(e,{modifiers:{lazy:t,trim:r,number:i}},n){e._assign=wp(n);const s=i||n.props&&n.props.type==="number";eh(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;r?a=a.trim():s&&(a=yp(a)),e._assign(a)}),r&&eh(e,"change",()=>{e.value=e.value.trim()}),t||(eh(e,"compositionstart",c7e),eh(e,"compositionend",tG),eh(e,"change",tG))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:i,number:n}},s){if(e._assign=wp(s),e.composing||document.activeElement===e&&(r||i&&e.value.trim()===t||(n||e.type==="number")&&yp(e.value)===t))return;const o=t??"";e.value!==o&&(e.value=o)}},bE={deep:!0,created(e,t,r){e._assign=wp(r),eh(e,"change",()=>{const i=e._modelValue,n=hv(e),s=e.checked,o=e._assign;if(Ge(i)){const a=J$(i,n),l=a!==-1;if(s&&!l)o(i.concat(n));else if(!s&&l){const u=[...i];u.splice(a,1),o(u)}}else if(Ey(i)){const a=new Set(i);s?a.add(n):a.delete(n),o(a)}else o(xse(e,s))})},mounted:rG,beforeUpdate(e,t,r){e._assign=wp(r),rG(e,t,r)}};function rG(e,{value:t,oldValue:r},i){e._modelValue=t,Ge(t)?e.checked=J$(t,i.props.value)>-1:Ey(t)?e.checked=t.has(i.props.value):t!==r&&(e.checked=mp(t,xse(e,!0)))}const wE={created(e,{value:t},r){e.checked=mp(t,r.props.value),e._assign=wp(r),eh(e,"change",()=>{e._assign(hv(e))})},beforeUpdate(e,{value:t,oldValue:r},i){e._assign=wp(i),t!==r&&(e.checked=mp(t,i.props.value))}},bD={deep:!0,created(e,{value:t,modifiers:{number:r}},i){const n=Ey(t);eh(e,"change",()=>{const s=Array.prototype.filter.call(e.options,o=>o.selected).map(o=>r?yp(hv(o)):hv(o));e._assign(e.multiple?n?new Set(s):s:s[0])}),e._assign=wp(i)},mounted(e,{value:t}){iG(e,t)},beforeUpdate(e,t,r){e._assign=wp(r)},updated(e,{value:t}){iG(e,t)}};function iG(e,t){const r=e.multiple;if(r&&!Ge(t)&&!Ey(t)){xe(`<select multiple v-model> expects an Array or Set value for its binding, but got ${Object.prototype.toString.call(t).slice(8,-1)}.`);return}for(let i=0,n=e.options.length;i<n;i++){const s=e.options[i],o=hv(s);if(r)Ge(t)?s.selected=J$(t,o)>-1:s.selected=t.has(o);else if(mp(hv(s),t)){e.selectedIndex!==i&&(e.selectedIndex=i);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}function hv(e){return"_value"in e?e._value:e.value}function xse(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const Sse={created(e,t,r){AS(e,t,r,null,"created")},mounted(e,t,r){AS(e,t,r,null,"mounted")},beforeUpdate(e,t,r,i){AS(e,t,r,i,"beforeUpdate")},updated(e,t,r,i){AS(e,t,r,i,"updated")}};function AS(e,t,r,i,n){let s;switch(e.tagName){case"SELECT":s=bD;break;case"TEXTAREA":s=U_;break;default:switch(r.props&&r.props.type){case"checkbox":s=bE;break;case"radio":s=wE;break;default:s=U_}}const o=s[n];o&&o(e,t,r,i)}function d7e(){U_.getSSRProps=({value:e})=>({value:e}),wE.getSSRProps=({value:e},t)=>{if(t.props&&mp(t.props.value,e))return{checked:!0}},bE.getSSRProps=({value:e},t)=>{if(Ge(e)){if(t.props&&J$(e,t.props.value)>-1)return{checked:!0}}else if(Ey(e)){if(t.props&&e.has(t.props.value))return{checked:!0}}else if(e)return{checked:!0}}}const p7e=["ctrl","shift","alt","meta"],f7e={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>p7e.some(r=>e[`${r}Key`]&&!t.includes(r))},_E=(e,t)=>(r,...i)=>{for(let n=0;n<t.length;n++){const s=f7e[t[n]];if(s&&s(r,t))return}return e(r,...i)},m7e={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Mse=(e,t)=>r=>{if(!("key"in r))return;const i=ko(r.key);if(t.some(n=>n===i||m7e[n]===i))return e(r)},xE={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):H1(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:i}){!t!=!r&&(i?t?(i.beforeEnter(e),H1(e,!0),i.enter(e)):i.leave(e,()=>{H1(e,!1)}):H1(e,t))},beforeUnmount(e,{value:t}){H1(e,t)}};function H1(e,t){e.style.display=t?e._vod:"none"}function y7e(){xE.getSSRProps=({value:e})=>{if(!e)return{style:{display:"none"}}}}const Ise=Wt({patchProp:X9e},F9e);let Gw,nG=!1;function Tse(){return Gw||(Gw=sD(Ise))}function $se(){return Gw=nG?Gw:oD(Ise),nG=!0,Gw}const uh=(...e)=>{Tse().render(...e)},wD=(...e)=>{$se().hydrate(...e)},SE=(...e)=>{const t=Tse().createApp(...e);Ase(t),Cse(t);const{mount:r}=t;return t.mount=i=>{const n=kse(i);if(!n)return;const s=t._component;!ft(s)&&!s.render&&!s.template&&(s.template=n.innerHTML),n.innerHTML="";const o=r(n,!1,n instanceof SVGElement);return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t},Ese=(...e)=>{const t=$se().createApp(...e);Ase(t),Cse(t);const{mount:r}=t;return t.mount=i=>{const n=kse(i);if(n)return r(n,!0,n instanceof SVGElement)},t};function Ase(e){Object.defineProperty(e.config,"isNativeTag",{value:t=>$ie(t)||Eie(t),writable:!1})}function Cse(e){if(yE()){const t=e.config.isCustomElement;Object.defineProperty(e.config,"isCustomElement",{get(){return t},set(){xe("The `isCustomElement` config option is deprecated. Use `compilerOptions.isCustomElement` instead.")}});const r=e.config.compilerOptions,i='The `compilerOptions` config option is only respected when using a build of Vue.js that includes the runtime compiler (aka "full build"). Since you are using the runtime-only build, `compilerOptions` must be passed to `@vue/compiler-dom` in the build setup instead.\n- For vue-loader: pass it via vue-loader\'s `compilerOptions` loader option.\n- For vue-cli: see https://cli.vuejs.org/guide/webpack.html#modifying-options-of-a-loader\n- For vite: pass it via @vitejs/plugin-vue options. See https://github.com/vitejs/vite/tree/main/packages/plugin-vue#example-for-passing-options-to-vuecompiler-dom';Object.defineProperty(e.config,"compilerOptions",{get(){return xe(i),r},set(){xe(i)}})}}function kse(e){if(Tt(e)){const t=document.querySelector(e);return t||xe(`Failed to mount app: mount target selector "${e}" returned null.`),t}return window.ShadowRoot&&e instanceof window.ShadowRoot&&e.mode==="closed"&&xe('mounting on a ShadowRoot with `{mode: "closed"}` may lead to unpredictable bugs'),e}let sG=!1;const Ose=()=>{sG||(sG=!0,d7e(),y7e())};var g7e=Object.freeze(Object.defineProperty({__proto__:null,Transition:W2,TransitionGroup:vD,VueElement:H2,createApp:SE,createSSRApp:Ese,defineCustomElement:gD,defineSSRCustomElement:pse,hydrate:wD,initDirectivesForSSR:Ose,render:uh,useCssModule:fse,useCssVars:mse,vModelCheckbox:bE,vModelDynamic:Sse,vModelRadio:wE,vModelSelect:bD,vModelText:U_,vShow:xE,withKeys:Mse,withModifiers:_E,EffectScope:X$,ReactiveEffect:c1,customRef:ine,effect:Uie,effectScope:Lie,getCurrentScope:Die,isProxy:av,isReactive:ml,isReadonly:bh,isRef:vr,isShallow:nE,markRaw:Gn,onScopeDispose:Fie,proxyRefs:oE,reactive:eo,readonly:rE,ref:Xi,shallowReactive:L8,shallowReadonly:Gd,shallowRef:ene,stop:zie,toRaw:it,toRef:F8,toRefs:nne,triggerRef:rne,unref:L_,camelize:In,capitalize:Tl,normalizeClass:zn,normalizeProps:Tie,normalizeStyle:$p,toDisplayString:jr,toHandlerKey:rl,BaseTransition:hE,Comment:Ri,Fragment:hr,KeepAlive:_ne,Static:ah,Suspense:mne,Teleport:Lne,Text:Hu,callWithAsyncErrorHandling:Bs,callWithErrorHandling:yl,cloneVNode:El,compatUtils:hse,computed:sl,createBlock:zi,createCommentVNode:Yt,createElementBlock:et,createElementVNode:ke,createHydrationRenderer:oD,createPropsRestProxy:sse,createRenderer:sD,createSlots:zne,createStaticVNode:cD,createTextVNode:lh,createVNode:Mt,defineAsyncComponent:dE,defineComponent:tr,defineEmits:Xne,defineExpose:Qne,defineProps:Kne,get devtools(){return Qc},getCurrentInstance:ys,getTransitionRawChildren:B2,guardReactiveProps:uD,h:qs,handleError:Ep,initCustomFormatter:mD,inject:Cm,isMemoSame:yD,isRuntimeOnly:yE,isVNode:$l,mergeDefaults:nse,mergeProps:mE,nextTick:j2,onActivated:Y8,onBeforeMount:X8,onBeforeUnmount:q2,onBeforeUpdate:Q8,onDeactivated:K8,onErrorCaptured:iD,onMounted:Xu,onRenderTracked:rD,onRenderTriggered:tD,onServerPrefetch:eD,onUnmounted:ky,onUpdated:G2,openBlock:De,popScopeId:$h,provide:J8,pushScopeId:Th,queuePostFlushCb:V2,registerRuntimeCompiler:dD,renderList:Oy,renderSlot:cl,resolveComponent:or,resolveDirective:Er,resolveDynamicComponent:aD,resolveFilter:cse,resolveTransitionHooks:ry,setBlockTracking:hT,setDevtoolsHook:lE,setTransitionHooks:vp,ssrContextKey:fD,ssrUtils:use,toHandlers:Gne,transformVNodeArgs:jne,useAttrs:rse,useSSRContext:ase,useSlots:tse,useTransitionState:cE,version:dT,warn:xe,watch:Gs,watchEffect:gne,watchPostEffect:Z8,watchSyncEffect:vne,withAsyncContext:ose,withCtx:Pi,withDefaults:ese,withDirectives:xr,withMemo:lse,withScopeId:fne},Symbol.toStringTag,{value:"Module"}));function _D(e){throw e}function Pse(e){console.warn(`[Vue warn] ${e.message}`)}function _r(e,t,r,i){const n=(r||v7e)[e]+(i||""),s=new SyntaxError(String(n));return s.code=e,s.loc=t,s}const v7e={[0]:"Illegal comment.",[1]:"CDATA section is allowed only in XML context.",[2]:"Duplicate attribute.",[3]:"End tag cannot have attributes.",[4]:"Illegal '/' in tags.",[5]:"Unexpected EOF in tag.",[6]:"Unexpected EOF in CDATA section.",[7]:"Unexpected EOF in comment.",[8]:"Unexpected EOF in script.",[9]:"Unexpected EOF in tag.",[10]:"Incorrectly closed comment.",[11]:"Incorrectly opened comment.",[12]:"Illegal tag name. Use '&lt;' to print '<'.",[13]:"Attribute value was expected.",[14]:"End tag name was expected.",[15]:"Whitespace was expected.",[16]:"Unexpected '<!--' in comment.",[17]:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,[18]:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",[19]:"Attribute name cannot start with '='.",[21]:"'<?' is allowed only in XML context.",[20]:"Unexpected null character.",[22]:"Illegal '/' in tags.",[23]:"Invalid end tag.",[24]:"Element is missing end tag.",[25]:"Interpolation end sign was not found.",[27]:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",[26]:"Legal directive name was expected.",[28]:"v-if/v-else-if is missing expression.",[29]:"v-if/else branches must use unique keys.",[30]:"v-else/v-else-if has no adjacent v-if or v-else-if.",[31]:"v-for is missing expression.",[32]:"v-for has invalid expression.",[33]:"<template v-for> key should be placed on the <template> tag.",[34]:"v-bind is missing expression.",[35]:"v-on is missing expression.",[36]:"Unexpected custom directive on <slot> outlet.",[37]:"Mixed v-slot usage on both the component and nested <template>.When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",[38]:"Duplicate slot names found. ",[39]:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",[40]:"v-slot can only be used on components or <template> tags.",[41]:"v-model is missing expression.",[42]:"v-model value must be a valid JavaScript member expression.",[43]:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",[44]:"Error parsing JavaScript expression: ",[45]:"<KeepAlive> expects exactly one child component.",[46]:'"prefixIdentifiers" option is not supported in this build of compiler.',[47]:"ES module mode is not supported in this build of compiler.",[48]:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',[49]:'"scopeId" option is only supported in module mode.',[50]:""},z_=Symbol("Fragment"),qw=Symbol("Teleport"),xD=Symbol("Suspense"),fT=Symbol("KeepAlive"),Rse=Symbol("BaseTransition"),iy=Symbol("openBlock"),Lse=Symbol("createBlock"),Nse=Symbol("createElementBlock"),SD=Symbol("createVNode"),MD=Symbol("createElementVNode"),J2=Symbol("createCommentVNode"),ID=Symbol("createTextVNode"),Dse=Symbol("createStaticVNode"),TD=Symbol("resolveComponent"),mT=Symbol("resolveDynamicComponent"),$D=Symbol("resolveDirective"),ED=Symbol("resolveFilter"),AD=Symbol("withDirectives"),CD=Symbol("renderList"),Fse=Symbol("renderSlot"),jse=Symbol("createSlots"),ME=Symbol("toDisplayString"),yT=Symbol("mergeProps"),kD=Symbol("normalizeClass"),OD=Symbol("normalizeStyle"),B_=Symbol("normalizeProps"),Z2=Symbol("guardReactiveProps"),PD=Symbol("toHandlers"),NR=Symbol("camelize"),b7e=Symbol("capitalize"),DR=Symbol("toHandlerKey"),gT=Symbol("setBlockTracking"),w7e=Symbol("pushScopeId"),_7e=Symbol("popScopeId"),RD=Symbol("withCtx"),x7e=Symbol("unref"),S7e=Symbol("isRef"),LD=Symbol("withMemo"),Vse=Symbol("isMemoSame"),_p={[z_]:"Fragment",[qw]:"Teleport",[xD]:"Suspense",[fT]:"KeepAlive",[Rse]:"BaseTransition",[iy]:"openBlock",[Lse]:"createBlock",[Nse]:"createElementBlock",[SD]:"createVNode",[MD]:"createElementVNode",[J2]:"createCommentVNode",[ID]:"createTextVNode",[Dse]:"createStaticVNode",[TD]:"resolveComponent",[mT]:"resolveDynamicComponent",[$D]:"resolveDirective",[ED]:"resolveFilter",[AD]:"withDirectives",[CD]:"renderList",[Fse]:"renderSlot",[jse]:"createSlots",[ME]:"toDisplayString",[yT]:"mergeProps",[kD]:"normalizeClass",[OD]:"normalizeStyle",[B_]:"normalizeProps",[Z2]:"guardReactiveProps",[PD]:"toHandlers",[NR]:"camelize",[b7e]:"capitalize",[DR]:"toHandlerKey",[gT]:"setBlockTracking",[w7e]:"pushScopeId",[_7e]:"popScopeId",[RD]:"withCtx",[x7e]:"unref",[S7e]:"isRef",[LD]:"withMemo",[Vse]:"isMemoSame"};function M7e(e){Object.getOwnPropertySymbols(e).forEach(t=>{_p[t]=e[t]})}const Vo={source:"",start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0}};function I7e(e,t=Vo){return{type:0,children:e,helpers:[],components:[],directives:[],hoists:[],imports:[],cached:0,temps:0,codegenNode:void 0,loc:t}}function G_(e,t,r,i,n,s,o,a=!1,l=!1,u=!1,h=Vo){return e&&(a?(e.helper(iy),e.helper(mv(e.inSSR,u))):e.helper(fv(e.inSSR,u)),o&&e.helper(AD)),{type:13,tag:t,props:r,children:i,patchFlag:n,dynamicProps:s,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:h}}function Y2(e,t=Vo){return{type:17,loc:t,elements:e}}function va(e,t=Vo){return{type:15,loc:t,properties:e}}function yi(e,t){return{type:16,loc:Vo,key:Tt(e)?Ft(e,!0):e,value:t}}function Ft(e,t=!1,r=Vo,i=0){return{type:4,loc:r,content:e,isStatic:t,constType:t?3:i}}function Du(e,t=Vo){return{type:8,loc:t,children:e}}function Ai(e,t=[],r=Vo){return{type:14,loc:r,callee:e,arguments:t}}function dv(e,t=void 0,r=!1,i=!1,n=Vo){return{type:18,params:e,returns:t,newline:r,isSlot:i,loc:n}}function FR(e,t,r,i=!0){return{type:19,test:e,consequent:t,alternate:r,newline:i,loc:Vo}}function T7e(e,t,r=!1){return{type:20,index:e,value:t,isVNode:r,loc:Vo}}function $7e(e){return{type:21,body:e,loc:Vo}}const Us=e=>e.type===4&&e.isStatic,hm=(e,t)=>e===t||e===ko(t);function Use(e){if(hm(e,"Teleport"))return qw;if(hm(e,"Suspense"))return xD;if(hm(e,"KeepAlive"))return fT;if(hm(e,"BaseTransition"))return Rse}const E7e=/^\d|[^\$\w]/,ND=e=>!E7e.test(e),A7e=/[A-Za-z_$\xA0-\uFFFF]/,C7e=/[\.\?\w$\xA0-\uFFFF]/,k7e=/\s+[.[]\s*|\s*[.[]\s+/g,O7e=e=>{e=e.trim().replace(k7e,o=>o.trim());let t=0,r=[],i=0,n=0,s=null;for(let o=0;o<e.length;o++){const a=e.charAt(o);switch(t){case 0:if(a==="[")r.push(t),t=1,i++;else if(a==="(")r.push(t),t=2,n++;else if(!(o===0?A7e:C7e).test(a))return!1;break;case 1:a==="'"||a==='"'||a==="`"?(r.push(t),t=3,s=a):a==="["?i++:a==="]"&&(--i||(t=r.pop()));break;case 2:if(a==="'"||a==='"'||a==="`")r.push(t),t=3,s=a;else if(a==="(")n++;else if(a===")"){if(o===e.length-1)return!1;--n||(t=r.pop())}break;case 3:a===s&&(t=r.pop(),s=null);break}}return!i&&!n},zse=O7e;function Bse(e,t,r){const n={source:e.source.slice(t,t+r),start:vT(e.start,e.source,t),end:e.end};return r!=null&&(n.end=vT(e.start,e.source,t+r)),n}function vT(e,t,r=t.length){return bT(Wt({},e),t,r)}function bT(e,t,r=t.length){let i=0,n=-1;for(let s=0;s<r;s++)t.charCodeAt(s)===10&&(i++,n=s);return e.offset+=r,e.line+=i,e.column=n===-1?e.column+r:r-n,e}function oG(e,t){if(!e)throw new Error(t||"unexpected compiler condition")}function fa(e,t,r=!1){for(let i=0;i<e.props.length;i++){const n=e.props[i];if(n.type===7&&(r||n.exp)&&(Tt(t)?n.name===t:t.test(n.name)))return n}}function pv(e,t,r=!1,i=!1){for(let n=0;n<e.props.length;n++){const s=e.props[n];if(s.type===6){if(r)continue;if(s.name===t&&(s.value||i))return s}else if(s.name==="bind"&&(s.exp||i)&&dm(s.arg,t))return s}}function dm(e,t){return!!(e&&Us(e)&&e.content===t)}function P7e(e){return e.props.some(t=>t.type===7&&t.name==="bind"&&(!t.arg||t.arg.type!==4||!t.arg.isStatic))}function sA(e){return e.type===5||e.type===2}function R7e(e){return e.type===7&&e.name==="slot"}function wT(e){return e.type===1&&e.tagType===3}function _T(e){return e.type===1&&e.tagType===2}function fv(e,t){return e||t?SD:MD}function mv(e,t){return e||t?Lse:Nse}const L7e=new Set([B_,Z2]);function Gse(e,t=[]){if(e&&!Tt(e)&&e.type===14){const r=e.callee;if(!Tt(r)&&L7e.has(r))return Gse(e.arguments[0],t.concat(e))}return[e,t]}function xT(e,t,r){let i,n=e.type===13?e.props:e.arguments[2],s=[],o;if(n&&!Tt(n)&&n.type===14){const a=Gse(n);n=a[0],s=a[1],o=s[s.length-1]}if(n==null||Tt(n))i=va([t]);else if(n.type===14){const a=n.arguments[0];!Tt(a)&&a.type===15?a.properties.unshift(t):n.callee===PD?i=Ai(r.helper(yT),[va([t]),n]):n.arguments.unshift(va([t])),!i&&(i=n)}else if(n.type===15){let a=!1;if(t.key.type===4){const l=t.key.content;a=n.properties.some(u=>u.key.type===4&&u.key.content===l)}a||n.properties.unshift(t),i=n}else i=Ai(r.helper(yT),[va([t]),n]),o&&o.callee===Z2&&(o=s[s.length-2]);e.type===13?o?o.arguments[0]=i:e.props=i:o?o.arguments[0]=i:e.arguments[2]=i}function q_(e,t){return`_${t}_${e.replace(/[^\w]/g,(r,i)=>r==="-"?"_":e.charCodeAt(i).toString())}`}function N7e(e){return e.type===14&&e.callee===LD?e.arguments[1].returns:e}function DD(e,{helper:t,removeHelper:r,inSSR:i}){e.isBlock||(e.isBlock=!0,r(fv(i,e.isComponent)),t(iy),t(mv(i,e.isComponent)))}const D7e={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:e=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${e}.sync\` should be changed to \`v-model:${e}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_PROP:{message:".prop modifier for v-bind has been removed and no longer necessary. Vue 3 will automatically set a binding as DOM property when appropriate."},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTER:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function jR(e,t){const r=t.options?t.options.compatConfig:t.compatConfig,i=r&&r[e];return e==="MODE"?i||3:i}function op(e,t){const r=jR("MODE",t),i=jR(e,t);return r===3?i===!0:i!==!1}function ny(e,t,r,...i){const n=op(e,t);return n&&IE(e,t,r,...i),n}function IE(e,t,r,...i){if(jR(e,t)==="suppress-warning")return;const{message:s,link:o}=D7e[e],a=`(deprecation ${e}) ${typeof s=="function"?s(...i):s}${o?`
  Details: ${o}`:""}`,l=new SyntaxError(a);l.code=e,r&&(l.loc=r),t.onWarn(l)}const F7e=/&(gt|lt|amp|apos|quot);/g,j7e={gt:">",lt:"<",amp:"&",apos:"'",quot:'"'},aG={delimiters:["{{","}}"],getNamespace:()=>0,getTextMode:()=>0,isVoidTag:Rw,isPreTag:Rw,isCustomElement:Rw,decodeEntities:e=>e.replace(F7e,(t,r)=>j7e[r]),onError:_D,onWarn:Pse,comments:!0};function V7e(e,t={}){const r=U7e(e,t),i=Oo(r);return I7e(FD(r,0,[]),Fo(r,i))}function U7e(e,t){const r=Wt({},aG);let i;for(i in t)r[i]=t[i]===void 0?aG[i]:t[i];return{options:r,column:1,line:1,offset:0,originalSource:e,source:e,inPre:!1,inVPre:!1,onWarn:r.onWarn}}function FD(e,t,r){const i=TE(r),n=i?i.ns:0,s=[];for(;!Y7e(e,t,r);){const a=e.source;let l;if(t===0||t===1){if(!e.inVPre&&Fn(a,e.options.delimiters[0]))l=J7e(e,t);else if(t===0&&a[0]==="<")if(a.length===1)gr(e,5,1);else if(a[1]==="!")Fn(a,"<!--")?l=B7e(e):Fn(a,"<!DOCTYPE")?l=W1(e):Fn(a,"<![CDATA[")?n!==0?l=z7e(e,r):(gr(e,1),l=W1(e)):(gr(e,11),l=W1(e));else if(a[1]==="/")if(a.length===2)gr(e,5,2);else if(a[2]===">"){gr(e,14,2),Bi(e,3);continue}else if(/[a-z]/i.test(a[2])){gr(e,23),VR(e,1,i);continue}else gr(e,12,2),l=W1(e);else/[a-z]/i.test(a[1])?(l=G7e(e,r),op("COMPILER_NATIVE_TEMPLATE",e)&&l&&l.tag==="template"&&!l.props.some(u=>u.type===7&&qse(u.name))&&(IE("COMPILER_NATIVE_TEMPLATE",e,l.loc),l=l.children)):a[1]==="?"?(gr(e,21,1),l=W1(e)):gr(e,12,1)}if(l||(l=Z7e(e,t)),Ge(l))for(let u=0;u<l.length;u++)lG(s,l[u]);else lG(s,l)}let o=!1;if(t!==2&&t!==1){const a=e.options.whitespace!=="preserve";for(let l=0;l<s.length;l++){const u=s[l];if(!e.inPre&&u.type===2)if(/[^\t\r\n\f ]/.test(u.content))a&&(u.content=u.content.replace(/[\t\r\n\f ]+/g," "));else{const h=s[l-1],d=s[l+1];!h||!d||a&&(h.type===3||d.type===3||h.type===1&&d.type===1&&/[\r\n]/.test(u.content))?(o=!0,s[l]=null):u.content=" "}else u.type===3&&!e.options.comments&&(o=!0,s[l]=null)}if(e.inPre&&i&&e.options.isPreTag(i.tag)){const l=s[0];l&&l.type===2&&(l.content=l.content.replace(/^\r?\n/,""))}}return o?s.filter(Boolean):s}function lG(e,t){if(t.type===2){const r=TE(e);if(r&&r.type===2&&r.loc.end.offset===t.loc.start.offset){r.content+=t.content,r.loc.end=t.loc.end,r.loc.source+=t.loc.source;return}}e.push(t)}function z7e(e,t){Bi(e,9);const r=FD(e,3,t);return e.source.length===0?gr(e,6):Bi(e,3),r}function B7e(e){const t=Oo(e);let r;const i=/--(\!)?>/.exec(e.source);if(!i)r=e.source.slice(4),Bi(e,e.source.length),gr(e,7);else{i.index<=3&&gr(e,0),i[1]&&gr(e,10),r=e.source.slice(4,i.index);const n=e.source.slice(0,i.index);let s=1,o=0;for(;(o=n.indexOf("<!--",s))!==-1;)Bi(e,o-s+1),o+4<n.length&&gr(e,16),s=o+1;Bi(e,i.index+i[0].length-s+1)}return{type:3,content:r,loc:Fo(e,t)}}function W1(e){const t=Oo(e),r=e.source[1]==="?"?1:2;let i;const n=e.source.indexOf(">");return n===-1?(i=e.source.slice(r),Bi(e,e.source.length)):(i=e.source.slice(r,n),Bi(e,n+1)),{type:3,content:i,loc:Fo(e,t)}}function G7e(e,t){const r=e.inPre,i=e.inVPre,n=TE(t),s=VR(e,0,n),o=e.inPre&&!r,a=e.inVPre&&!i;if(s.isSelfClosing||e.options.isVoidTag(s.tag))return o&&(e.inPre=!1),a&&(e.inVPre=!1),s;t.push(s);const l=e.options.getTextMode(s,n),u=FD(e,l,t);t.pop();{const h=s.props.find(d=>d.type===6&&d.name==="inline-template");if(h&&ny("COMPILER_INLINE_TEMPLATE",e,h.loc)){const d=Fo(e,s.loc.end);h.value={type:2,content:d.source,loc:d}}}if(s.children=u,UR(e.source,s.tag))VR(e,1,n);else if(gr(e,24,0,s.loc.start),e.source.length===0&&s.tag.toLowerCase()==="script"){const h=u[0];h&&Fn(h.loc.source,"<!--")&&gr(e,8)}return s.loc=Fo(e,s.loc.start),o&&(e.inPre=!1),a&&(e.inVPre=!1),s}const qse=Bn("if,else,else-if,for,slot");function VR(e,t,r){const i=Oo(e),n=/^<\/?([a-z][^\t\r\n\f />]*)/i.exec(e.source),s=n[1],o=e.options.getNamespace(s,r);Bi(e,n[0].length),H_(e);const a=Oo(e),l=e.source;e.options.isPreTag(s)&&(e.inPre=!0);let u=uG(e,t);t===0&&!e.inVPre&&u.some(f=>f.type===7&&f.name==="pre")&&(e.inVPre=!0,Wt(e,a),e.source=l,u=uG(e,t).filter(f=>f.name!=="v-pre"));let h=!1;if(e.source.length===0?gr(e,9):(h=Fn(e.source,"/>"),t===1&&h&&gr(e,4),Bi(e,h?2:1)),t===1)return;if(op("COMPILER_V_IF_V_FOR_PRECEDENCE",e)){let f=!1,m=!1;for(let g=0;g<u.length;g++){const b=u[g];if(b.type===7&&(b.name==="if"?f=!0:b.name==="for"&&(m=!0)),f&&m){IE("COMPILER_V_IF_V_FOR_PRECEDENCE",e,Fo(e,i));break}}}let d=0;return e.inVPre||(s==="slot"?d=2:s==="template"?u.some(f=>f.type===7&&qse(f.name))&&(d=3):q7e(s,u,e)&&(d=1)),{type:1,ns:o,tag:s,tagType:d,props:u,isSelfClosing:h,children:[],loc:Fo(e,i),codegenNode:void 0}}function q7e(e,t,r){const i=r.options;if(i.isCustomElement(e))return!1;if(e==="component"||/^[A-Z]/.test(e)||Use(e)||i.isBuiltInComponent&&i.isBuiltInComponent(e)||i.isNativeTag&&!i.isNativeTag(e))return!0;for(let n=0;n<t.length;n++){const s=t[n];if(s.type===6){if(s.name==="is"&&s.value){if(s.value.content.startsWith("vue:"))return!0;if(ny("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}else{if(s.name==="is")return!0;if(s.name==="bind"&&dm(s.arg,"is")&&!0&&ny("COMPILER_IS_ON_ELEMENT",r,s.loc))return!0}}}function uG(e,t){const r=[],i=new Set;for(;e.source.length>0&&!Fn(e.source,">")&&!Fn(e.source,"/>");){if(Fn(e.source,"/")){gr(e,22),Bi(e,1),H_(e);continue}t===1&&gr(e,3);const n=H7e(e,i);n.type===6&&n.value&&n.name==="class"&&(n.value.content=n.value.content.replace(/\s+/g," ").trim()),t===0&&r.push(n),/^[^\t\r\n\f />]/.test(e.source)&&gr(e,15),H_(e)}return r}function H7e(e,t){const r=Oo(e),n=/^[^\t\r\n\f />][^\t\r\n\f />=]*/.exec(e.source)[0];t.has(n)&&gr(e,2),t.add(n),n[0]==="="&&gr(e,19);{const a=/["'<]/g;let l;for(;l=a.exec(n);)gr(e,17,l.index)}Bi(e,n.length);let s;/^[\t\r\n\f ]*=/.test(e.source)&&(H_(e),Bi(e,1),H_(e),s=W7e(e),s||gr(e,13));const o=Fo(e,r);if(!e.inVPre&&/^(v-[A-Za-z0-9-]|:|\.|@|#)/.test(n)){const a=/(?:^v-([a-z0-9-]+))?(?:(?::|^\.|^@|^#)(\[[^\]]+\]|[^\.]+))?(.+)?$/i.exec(n);let l=Fn(n,"."),u=a[1]||(l||Fn(n,":")?"bind":Fn(n,"@")?"on":"slot"),h;if(a[2]){const f=u==="slot",m=n.lastIndexOf(a[2]),g=Fo(e,cG(e,r,m),cG(e,r,m+a[2].length+(f&&a[3]||"").length));let b=a[2],w=!0;b.startsWith("[")?(w=!1,b.endsWith("]")?b=b.slice(1,b.length-1):(gr(e,27),b=b.slice(1))):f&&(b+=a[3]||""),h={type:4,content:b,isStatic:w,constType:w?3:0,loc:g}}if(s&&s.isQuoted){const f=s.loc;f.start.offset++,f.start.column++,f.end=vT(f.start,s.content),f.source=f.source.slice(1,-1)}const d=a[3]?a[3].slice(1).split("."):[];return l&&d.push("prop"),u==="bind"&&h&&(d.includes("sync")&&ny("COMPILER_V_BIND_SYNC",e,o,h.loc.source)&&(u="model",d.splice(d.indexOf("sync"),1)),d.includes("prop")&&ny("COMPILER_V_BIND_PROP",e,o)),{type:7,name:u,exp:s&&{type:4,content:s.content,isStatic:!1,constType:0,loc:s.loc},arg:h,modifiers:d,loc:o}}return!e.inVPre&&Fn(n,"v-")&&gr(e,26),{type:6,name:n,value:s&&{type:2,content:s.content,loc:s.loc},loc:o}}function W7e(e){const t=Oo(e);let r;const i=e.source[0],n=i==='"'||i==="'";if(n){Bi(e,1);const s=e.source.indexOf(i);s===-1?r=Hw(e,e.source.length,4):(r=Hw(e,s,4),Bi(e,1))}else{const s=/^[^\t\r\n\f >]+/.exec(e.source);if(!s)return;const o=/["'<=`]/g;let a;for(;a=o.exec(s[0]);)gr(e,18,a.index);r=Hw(e,s[0].length,4)}return{content:r,isQuoted:n,loc:Fo(e,t)}}function J7e(e,t){const[r,i]=e.options.delimiters,n=e.source.indexOf(i,r.length);if(n===-1){gr(e,25);return}const s=Oo(e);Bi(e,r.length);const o=Oo(e),a=Oo(e),l=n-r.length,u=e.source.slice(0,l),h=Hw(e,l,t),d=h.trim(),f=h.indexOf(d);f>0&&bT(o,u,f);const m=l-(h.length-d.length-f);return bT(a,u,m),Bi(e,i.length),{type:5,content:{type:4,isStatic:!1,constType:0,content:d,loc:Fo(e,o,a)},loc:Fo(e,s)}}function Z7e(e,t){const r=t===3?["]]>"]:["<",e.options.delimiters[0]];let i=e.source.length;for(let o=0;o<r.length;o++){const a=e.source.indexOf(r[o],1);a!==-1&&i>a&&(i=a)}const n=Oo(e),s=Hw(e,i,t);return{type:2,content:s,loc:Fo(e,n)}}function Hw(e,t,r){const i=e.source.slice(0,t);return Bi(e,t),r===2||r===3||!i.includes("&")?i:e.options.decodeEntities(i,r===4)}function Oo(e){const{column:t,line:r,offset:i}=e;return{column:t,line:r,offset:i}}function Fo(e,t,r){return r=r||Oo(e),{start:t,end:r,source:e.originalSource.slice(t.offset,r.offset)}}function TE(e){return e[e.length-1]}function Fn(e,t){return e.startsWith(t)}function Bi(e,t){const{source:r}=e;bT(e,r,t),e.source=r.slice(t)}function H_(e){const t=/^[\t\r\n\f ]+/.exec(e.source);t&&Bi(e,t[0].length)}function cG(e,t,r){return vT(t,e.originalSource.slice(t.offset,r),r)}function gr(e,t,r,i=Oo(e)){r&&(i.offset+=r,i.column+=r),e.options.onError(_r(t,{start:i,end:i,source:""}))}function Y7e(e,t,r){const i=e.source;switch(t){case 0:if(Fn(i,"</")){for(let n=r.length-1;n>=0;--n)if(UR(i,r[n].tag))return!0}break;case 1:case 2:{const n=TE(r);if(n&&UR(i,n.tag))return!0;break}case 3:if(Fn(i,"]]>"))return!0;break}return!i}function UR(e,t){return Fn(e,"</")&&e.slice(2,2+t.length).toLowerCase()===t.toLowerCase()&&/[\t\r\n\f />]/.test(e[2+t.length]||">")}function K7e(e,t){x3(e,t,Hse(e,e.children[0]))}function Hse(e,t){const{children:r}=e;return r.length===1&&t.type===1&&!_T(t)}function x3(e,t,r=!1){const{children:i}=e,n=i.length;let s=0;for(let o=0;o<i.length;o++){const a=i[o];if(a.type===1&&a.tagType===0){const l=r?0:ba(a,t);if(l>0){if(l>=2){a.codegenNode.patchFlag=-1+" /* HOISTED */",a.codegenNode=t.hoist(a.codegenNode),s++;continue}}else{const u=a.codegenNode;if(u.type===13){const h=Yse(u);if((!h||h===512||h===1)&&Jse(a,t)>=2){const d=Zse(a);d&&(u.props=t.hoist(d))}u.dynamicProps&&(u.dynamicProps=t.hoist(u.dynamicProps))}}}else a.type===12&&ba(a.content,t)>=2&&(a.codegenNode=t.hoist(a.codegenNode),s++);if(a.type===1){const l=a.tagType===1;l&&t.scopes.vSlot++,x3(a,t),l&&t.scopes.vSlot--}else if(a.type===11)x3(a,t,a.children.length===1);else if(a.type===9)for(let l=0;l<a.branches.length;l++)x3(a.branches[l],t,a.branches[l].children.length===1)}s&&t.transformHoist&&t.transformHoist(i,t,e),s&&s===n&&e.type===1&&e.tagType===0&&e.codegenNode&&e.codegenNode.type===13&&Ge(e.codegenNode.children)&&(e.codegenNode.children=t.hoist(Y2(e.codegenNode.children)))}function ba(e,t){const{constantCache:r}=t;switch(e.type){case 1:if(e.tagType!==0)return 0;const i=r.get(e);if(i!==void 0)return i;const n=e.codegenNode;if(n.type!==13||n.isBlock&&e.tag!=="svg"&&e.tag!=="foreignObject")return 0;if(Yse(n))return r.set(e,0),0;{let a=3;const l=Jse(e,t);if(l===0)return r.set(e,0),0;l<a&&(a=l);for(let u=0;u<e.children.length;u++){const h=ba(e.children[u],t);if(h===0)return r.set(e,0),0;h<a&&(a=h)}if(a>1)for(let u=0;u<e.props.length;u++){const h=e.props[u];if(h.type===7&&h.name==="bind"&&h.exp){const d=ba(h.exp,t);if(d===0)return r.set(e,0),0;d<a&&(a=d)}}return n.isBlock&&(t.removeHelper(iy),t.removeHelper(mv(t.inSSR,n.isComponent)),n.isBlock=!1,t.helper(fv(t.inSSR,n.isComponent))),r.set(e,a),a}case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return ba(e.content,t);case 4:return e.constType;case 8:let o=3;for(let a=0;a<e.children.length;a++){const l=e.children[a];if(Tt(l)||u1(l))continue;const u=ba(l,t);if(u===0)return 0;u<o&&(o=u)}return o;default:return 0}}const X7e=new Set([kD,OD,B_,Z2]);function Wse(e,t){if(e.type===14&&!Tt(e.callee)&&X7e.has(e.callee)){const r=e.arguments[0];if(r.type===4)return ba(r,t);if(r.type===14)return Wse(r,t)}return 0}function Jse(e,t){let r=3;const i=Zse(e);if(i&&i.type===15){const{properties:n}=i;for(let s=0;s<n.length;s++){const{key:o,value:a}=n[s],l=ba(o,t);if(l===0)return l;l<r&&(r=l);let u;if(a.type===4?u=ba(a,t):a.type===14?u=Wse(a,t):u=0,u===0)return u;u<r&&(r=u)}}return r}function Zse(e){const t=e.codegenNode;if(t.type===13)return t.props}function Yse(e){const t=e.patchFlag;return t?parseInt(t,10):void 0}function Q7e(e,{filename:t="",prefixIdentifiers:r=!1,hoistStatic:i=!1,cacheHandlers:n=!1,nodeTransforms:s=[],directiveTransforms:o={},transformHoist:a=null,isBuiltInComponent:l=bn,isCustomElement:u=bn,expressionPlugins:h=[],scopeId:d=null,slotted:f=!0,ssr:m=!1,inSSR:g=!1,ssrCssVars:b="",bindingMetadata:w=Gt,inline:_=!1,isTS:x=!1,onError:I=_D,onWarn:S=Pse,compatConfig:T}){const $=t.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),E={selfName:$&&Tl(In($[1])),prefixIdentifiers:r,hoistStatic:i,cacheHandlers:n,nodeTransforms:s,directiveTransforms:o,transformHoist:a,isBuiltInComponent:l,isCustomElement:u,expressionPlugins:h,scopeId:d,slotted:f,ssr:m,inSSR:g,ssrCssVars:b,bindingMetadata:w,inline:_,isTS:x,onError:I,onWarn:S,compatConfig:T,root:e,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],constantCache:new Map,temps:0,cached:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,currentNode:e,childIndex:0,inVOnce:!1,helper(C){const O=E.helpers.get(C)||0;return E.helpers.set(C,O+1),C},removeHelper(C){const O=E.helpers.get(C);if(O){const R=O-1;R?E.helpers.set(C,R):E.helpers.delete(C)}},helperString(C){return`_${_p[E.helper(C)]}`},replaceNode(C){{if(!E.currentNode)throw new Error("Node being replaced is already removed.");if(!E.parent)throw new Error("Cannot replace root node.")}E.parent.children[E.childIndex]=E.currentNode=C},removeNode(C){if(!E.parent)throw new Error("Cannot remove root node.");const O=E.parent.children,R=C?O.indexOf(C):E.currentNode?E.childIndex:-1;if(R<0)throw new Error("node being removed is not a child of current parent");!C||C===E.currentNode?(E.currentNode=null,E.onNodeRemoved()):E.childIndex>R&&(E.childIndex--,E.onNodeRemoved()),E.parent.children.splice(R,1)},onNodeRemoved:()=>{},addIdentifiers(C){},removeIdentifiers(C){},hoist(C){Tt(C)&&(C=Ft(C)),E.hoists.push(C);const O=Ft(`_hoisted_${E.hoists.length}`,!1,C.loc,2);return O.hoisted=C,O},cache(C,O=!1){return T7e(E.cached++,C,O)}};return E.filters=new Set,E}function eje(e,t){const r=Q7e(e,t);$E(e,r),t.hoistStatic&&K7e(e,r),t.ssr||tje(e,r),e.helpers=[...r.helpers.keys()],e.components=[...r.components],e.directives=[...r.directives],e.imports=r.imports,e.hoists=r.hoists,e.temps=r.temps,e.cached=r.cached,e.filters=[...r.filters]}function tje(e,t){const{helper:r}=t,{children:i}=e;if(i.length===1){const n=i[0];if(Hse(e,n)&&n.codegenNode){const s=n.codegenNode;s.type===13&&DD(s,t),e.codegenNode=s}else e.codegenNode=n}else if(i.length>1){let n=64,s=Lu[64];i.filter(o=>o.type!==3).length===1&&(n|=2048,s+=`, ${Lu[2048]}`),e.codegenNode=G_(t,r(z_),void 0,e.children,n+` /* ${s} */`,void 0,void 0,!0,void 0,!1)}}function rje(e,t){let r=0;const i=()=>{r--};for(;r<e.children.length;r++){const n=e.children[r];Tt(n)||(t.parent=e,t.childIndex=r,t.onNodeRemoved=i,$E(n,t))}}function $E(e,t){t.currentNode=e;const{nodeTransforms:r}=t,i=[];for(let s=0;s<r.length;s++){const o=r[s](e,t);if(o&&(Ge(o)?i.push(...o):i.push(o)),t.currentNode)e=t.currentNode;else return}switch(e.type){case 3:t.ssr||t.helper(J2);break;case 5:t.ssr||t.helper(ME);break;case 9:for(let s=0;s<e.branches.length;s++)$E(e.branches[s],t);break;case 10:case 11:case 1:case 0:rje(e,t);break}t.currentNode=e;let n=i.length;for(;n--;)i[n]()}function Kse(e,t){const r=Tt(e)?i=>i===e:i=>e.test(i);return(i,n)=>{if(i.type===1){const{props:s}=i;if(i.tagType===3&&s.some(R7e))return;const o=[];for(let a=0;a<s.length;a++){const l=s[a];if(l.type===7&&r(l.name)){s.splice(a,1),a--;const u=t(i,l,n);u&&o.push(u)}}return o}}}const EE="/*#__PURE__*/";function ije(e,{mode:t="function",prefixIdentifiers:r=t==="module",sourceMap:i=!1,filename:n="template.vue.html",scopeId:s=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:h=!1,isTS:d=!1,inSSR:f=!1}){const m={mode:t,prefixIdentifiers:r,sourceMap:i,filename:n,scopeId:s,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:h,isTS:d,inSSR:f,source:e.loc.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(b){return`_${_p[b]}`},push(b,w){m.code+=b},indent(){g(++m.indentLevel)},deindent(b=!1){b?--m.indentLevel:g(--m.indentLevel)},newline(){g(m.indentLevel)}};function g(b){m.push(`
`+"  ".repeat(b))}return m}function nje(e,t={}){const r=ije(e,t);t.onContextCreated&&t.onContextCreated(r);const{mode:i,push:n,prefixIdentifiers:s,indent:o,deindent:a,newline:l,scopeId:u,ssr:h}=r,d=e.helpers.length>0,f=!s&&i!=="module";sje(e,r);const g=h?"ssrRender":"render",w=(h?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(n(`function ${g}(${w}) {`),o(),f&&(n("with (_ctx) {"),o(),d&&(n(`const { ${e.helpers.map(_=>`${_p[_]}: _${_p[_]}`).join(", ")} } = _Vue`),n(`
`),l())),e.components.length&&(oA(e.components,"component",r),(e.directives.length||e.temps>0)&&l()),e.directives.length&&(oA(e.directives,"directive",r),e.temps>0&&l()),e.filters&&e.filters.length&&(l(),oA(e.filters,"filter",r),l()),e.temps>0){n("let ");for(let _=0;_<e.temps;_++)n(`${_>0?", ":""}_temp${_}`)}return(e.components.length||e.directives.length||e.temps)&&(n(`
`),l()),h||n("return "),e.codegenNode?Un(e.codegenNode,r):n("null"),f&&(a(),n("}")),a(),n("}"),{ast:e,code:r.code,preamble:"",map:r.map?r.map.toJSON():void 0}}function sje(e,t){const{ssr:r,prefixIdentifiers:i,push:n,newline:s,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=t,u=a,h=d=>`${_p[d]}: _${_p[d]}`;if(e.helpers.length>0&&(n(`const _Vue = ${u}
`),e.hoists.length)){const d=[SD,MD,J2,ID,Dse].filter(f=>e.helpers.includes(f)).map(h).join(", ");n(`const { ${d} } = _Vue
`)}oje(e.hoists,t),s(),n("return ")}function oA(e,t,{helper:r,push:i,newline:n,isTS:s}){const o=r(t==="filter"?ED:t==="component"?TD:$D);for(let a=0;a<e.length;a++){let l=e[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),i(`const ${q_(l,t)} = ${o}(${JSON.stringify(l)}${u?", true":""})${s?"!":""}`),a<e.length-1&&n()}}function oje(e,t){if(!e.length)return;t.pure=!0;const{push:r,newline:i,helper:n,scopeId:s,mode:o}=t;i();for(let a=0;a<e.length;a++){const l=e[a];l&&(r(`const _hoisted_${a+1} = `),Un(l,t),i())}t.pure=!1}function aje(e){return Tt(e)||e.type===4||e.type===2||e.type===5||e.type===8}function jD(e,t){const r=e.length>3||e.some(i=>Ge(i)||!aje(i));t.push("["),r&&t.indent(),K2(e,t,r),r&&t.deindent(),t.push("]")}function K2(e,t,r=!1,i=!0){const{push:n,newline:s}=t;for(let o=0;o<e.length;o++){const a=e[o];Tt(a)?n(a):Ge(a)?jD(a,t):Un(a,t),o<e.length-1&&(r?(i&&n(","),s()):i&&n(", "))}}function Un(e,t){if(Tt(e)){t.push(e);return}if(u1(e)){t.push(t.helper(e));return}switch(e.type){case 1:case 9:case 11:oG(e.codegenNode!=null,"Codegen node is missing for element/if/for node. Apply appropriate transforms first."),Un(e.codegenNode,t);break;case 2:lje(e,t);break;case 4:Xse(e,t);break;case 5:uje(e,t);break;case 12:Un(e.codegenNode,t);break;case 8:Qse(e,t);break;case 3:hje(e,t);break;case 13:dje(e,t);break;case 14:fje(e,t);break;case 15:mje(e,t);break;case 17:yje(e,t);break;case 18:gje(e,t);break;case 19:vje(e,t);break;case 20:bje(e,t);break;case 21:K2(e.body,t,!0,!1);break;case 22:break;case 23:break;case 24:break;case 25:break;case 26:break;case 10:break;default:return oG(!1,`unhandled codegen node type: ${e.type}`),e}}function lje(e,t){t.push(JSON.stringify(e.content),e)}function Xse(e,t){const{content:r,isStatic:i}=e;t.push(i?JSON.stringify(r):r,e)}function uje(e,t){const{push:r,helper:i,pure:n}=t;n&&r(EE),r(`${i(ME)}(`),Un(e.content,t),r(")")}function Qse(e,t){for(let r=0;r<e.children.length;r++){const i=e.children[r];Tt(i)?t.push(i):Un(i,t)}}function cje(e,t){const{push:r}=t;if(e.type===8)r("["),Qse(e,t),r("]");else if(e.isStatic){const i=ND(e.content)?e.content:JSON.stringify(e.content);r(i,e)}else r(`[${e.content}]`,e)}function hje(e,t){const{push:r,helper:i,pure:n}=t;n&&r(EE),r(`${i(J2)}(${JSON.stringify(e.content)})`,e)}function dje(e,t){const{push:r,helper:i,pure:n}=t,{tag:s,props:o,children:a,patchFlag:l,dynamicProps:u,directives:h,isBlock:d,disableTracking:f,isComponent:m}=e;h&&r(i(AD)+"("),d&&r(`(${i(iy)}(${f?"true":""}), `),n&&r(EE);const g=d?mv(t.inSSR,m):fv(t.inSSR,m);r(i(g)+"(",e),K2(pje([s,o,a,l,u]),t),r(")"),d&&r(")"),h&&(r(", "),Un(h,t),r(")"))}function pje(e){let t=e.length;for(;t--&&e[t]==null;);return e.slice(0,t+1).map(r=>r||"null")}function fje(e,t){const{push:r,helper:i,pure:n}=t,s=Tt(e.callee)?e.callee:i(e.callee);n&&r(EE),r(s+"(",e),K2(e.arguments,t),r(")")}function mje(e,t){const{push:r,indent:i,deindent:n,newline:s}=t,{properties:o}=e;if(!o.length){r("{}",e);return}const a=o.length>1||o.some(l=>l.value.type!==4);r(a?"{":"{ "),a&&i();for(let l=0;l<o.length;l++){const{key:u,value:h}=o[l];cje(u,t),r(": "),Un(h,t),l<o.length-1&&(r(","),s())}a&&n(),r(a?"}":" }")}function yje(e,t){jD(e.elements,t)}function gje(e,t){const{push:r,indent:i,deindent:n}=t,{params:s,returns:o,body:a,newline:l,isSlot:u}=e;u&&r(`_${_p[RD]}(`),r("(",e),Ge(s)?K2(s,t):s&&Un(s,t),r(") => "),(l||a)&&(r("{"),i()),o?(l&&r("return "),Ge(o)?jD(o,t):Un(o,t)):a&&Un(a,t),(l||a)&&(n(),r("}")),u&&(e.isNonScopedSlot&&r(", undefined, true"),r(")"))}function vje(e,t){const{test:r,consequent:i,alternate:n,newline:s}=e,{push:o,indent:a,deindent:l,newline:u}=t;if(r.type===4){const d=!ND(r.content);d&&o("("),Xse(r,t),d&&o(")")}else o("("),Un(r,t),o(")");s&&a(),t.indentLevel++,s||o(" "),o("? "),Un(i,t),t.indentLevel--,s&&u(),s||o(" "),o(": ");const h=n.type===19;h||t.indentLevel++,Un(n,t),h||t.indentLevel--,s&&l(!0)}function bje(e,t){const{push:r,helper:i,indent:n,deindent:s,newline:o}=t;r(`_cache[${e.index}] || (`),e.isVNode&&(n(),r(`${i(gT)}(-1),`),o()),r(`_cache[${e.index}] = `),Un(e.value,t),e.isVNode&&(r(","),o(),r(`${i(gT)}(1),`),o(),r(`_cache[${e.index}]`),s()),r(")")}const wje=new RegExp("\\b"+"do,if,for,let,new,try,var,case,else,with,await,break,catch,class,const,super,throw,while,yield,delete,export,import,return,switch,default,extends,finally,continue,debugger,function,arguments,typeof,void".split(",").join("\\b|\\b")+"\\b"),_je=/'(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`/g;function pm(e,t,r=!1,i=!1){const n=e.content;if(!!n.trim())try{new Function(i?` ${n} `:`return ${r?`(${n}) => {}`:`(${n})`}`)}catch(s){let o=s.message;const a=n.replace(_je,"").match(wje);a&&(o=`avoid using JavaScript keyword as property name: "${a[0]}"`),t.onError(_r(44,e.loc,void 0,o))}}const xje=(e,t)=>{if(e.type===5)e.content=aA(e.content,t);else if(e.type===1)for(let r=0;r<e.props.length;r++){const i=e.props[r];if(i.type===7&&i.name!=="for"){const n=i.exp,s=i.arg;n&&n.type===4&&!(i.name==="on"&&s)&&(i.exp=aA(n,t,i.name==="slot")),s&&s.type===4&&!s.isStatic&&(i.arg=aA(s,t))}}};function aA(e,t,r=!1,i=!1,n=Object.create(t.identifiers)){return pm(e,t,r,i),e}const Sje=Kse(/^(if|else|else-if)$/,(e,t,r)=>Mje(e,t,r,(i,n,s)=>{const o=r.parent.children;let a=o.indexOf(i),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(s)i.codegenNode=dG(n,l,r);else{const u=Tje(i.codegenNode);u.alternate=dG(n,l+i.branches.length-1,r)}}}));function Mje(e,t,r,i){if(t.name!=="else"&&(!t.exp||!t.exp.content.trim())){const n=t.exp?t.exp.loc:e.loc;r.onError(_r(28,t.loc)),t.exp=Ft("true",!1,n)}if(t.exp&&pm(t.exp,r),t.name==="if"){const n=hG(e,t),s={type:9,loc:e.loc,branches:[n]};if(r.replaceNode(s),i)return i(s,n,!0)}else{const n=r.parent.children,s=[];let o=n.indexOf(e);for(;o-->=-1;){const a=n[o];if(a&&a.type===3){r.removeNode(a),s.unshift(a);continue}if(a&&a.type===2&&!a.content.trim().length){r.removeNode(a);continue}if(a&&a.type===9){t.name==="else-if"&&a.branches[a.branches.length-1].condition===void 0&&r.onError(_r(30,e.loc)),r.removeNode();const l=hG(e,t);s.length&&!(r.parent&&r.parent.type===1&&hm(r.parent.tag,"transition"))&&(l.children=[...s,...l.children]);{const h=l.userKey;h&&a.branches.forEach(({userKey:d})=>{Ije(d,h)&&r.onError(_r(29,l.userKey.loc))})}a.branches.push(l);const u=i&&i(a,l,!1);$E(l,r),u&&u(),r.currentNode=null}else r.onError(_r(30,e.loc));break}}}function hG(e,t){return{type:10,loc:e.loc,condition:t.name==="else"?void 0:t.exp,children:e.tagType===3&&!fa(e,"for")?e.children:[e],userKey:pv(e,"key")}}function dG(e,t,r){return e.condition?FR(e.condition,pG(e,t,r),Ai(r.helper(J2),['"v-if"',"true"])):pG(e,t,r)}function pG(e,t,r){const{helper:i}=r,n=yi("key",Ft(`${t}`,!1,Vo,2)),{children:s}=e,o=s[0];if(s.length!==1||o.type!==1)if(s.length===1&&o.type===11){const l=o.codegenNode;return xT(l,n,r),l}else{let l=64,u=Lu[64];return s.filter(h=>h.type!==3).length===1&&(l|=2048,u+=`, ${Lu[2048]}`),G_(r,i(z_),va([n]),s,l+` /* ${u} */`,void 0,void 0,!0,!1,!1,e.loc)}else{const l=o.codegenNode,u=N7e(l);return u.type===13&&DD(u,r),xT(u,n,r),l}}function Ije(e,t){if(!e||e.type!==t.type)return!1;if(e.type===6){if(e.value.content!==t.value.content)return!1}else{const r=e.exp,i=t.exp;if(r.type!==i.type||r.type!==4||r.isStatic!==i.isStatic||r.content!==i.content)return!1}return!0}function Tje(e){for(;;)if(e.type===19)if(e.alternate.type===19)e=e.alternate;else return e;else e.type===20&&(e=e.value)}const $je=Kse("for",(e,t,r)=>{const{helper:i,removeHelper:n}=r;return Eje(e,t,r,s=>{const o=Ai(i(CD),[s.source]),a=wT(e),l=fa(e,"memo"),u=pv(e,"key"),h=u&&(u.type===6?Ft(u.value.content,!0):u.exp),d=u?yi("key",h):null,f=s.source.type===4&&s.source.constType>0,m=f?64:u?128:256;return s.codegenNode=G_(r,i(z_),void 0,o,m+` /* ${Lu[m]} */`,void 0,void 0,!0,!f,!1,e.loc),()=>{let g;const{children:b}=s;a&&e.children.some(x=>{if(x.type===1){const I=pv(x,"key");if(I)return r.onError(_r(33,I.loc)),!0}});const w=b.length!==1||b[0].type!==1,_=_T(e)?e:a&&e.children.length===1&&_T(e.children[0])?e.children[0]:null;if(_?(g=_.codegenNode,a&&d&&xT(g,d,r)):w?g=G_(r,i(z_),d?va([d]):void 0,e.children,64+` /* ${Lu[64]} */`,void 0,void 0,!0,void 0,!1):(g=b[0].codegenNode,a&&d&&xT(g,d,r),g.isBlock!==!f&&(g.isBlock?(n(iy),n(mv(r.inSSR,g.isComponent))):n(fv(r.inSSR,g.isComponent))),g.isBlock=!f,g.isBlock?(i(iy),i(mv(r.inSSR,g.isComponent))):i(fv(r.inSSR,g.isComponent))),l){const x=dv(zR(s.parseResult,[Ft("_cached")]));x.body=$7e([Du(["const _memo = (",l.exp,")"]),Du(["if (_cached",...h?[" && _cached.key === ",h]:[],` && ${r.helperString(Vse)}(_cached, _memo)) return _cached`]),Du(["const _item = ",g]),Ft("_item.memo = _memo"),Ft("return _item")]),o.arguments.push(x,Ft("_cache"),Ft(String(r.cached++)))}else o.arguments.push(dv(zR(s.parseResult),g,!0))}})});function Eje(e,t,r,i){if(!t.exp){r.onError(_r(31,t.loc));return}const n=eoe(t.exp,r);if(!n){r.onError(_r(32,t.loc));return}const{addIdentifiers:s,removeIdentifiers:o,scopes:a}=r,{source:l,value:u,key:h,index:d}=n,f={type:11,loc:t.loc,source:l,valueAlias:u,keyAlias:h,objectIndexAlias:d,parseResult:n,children:wT(e)?e.children:[e]};r.replaceNode(f),a.vFor++;const m=i&&i(f);return()=>{a.vFor--,m&&m()}}const Aje=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,fG=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Cje=/^\(|\)$/g;function eoe(e,t){const r=e.loc,i=e.content,n=i.match(Aje);if(!n)return;const[,s,o]=n,a={source:CS(r,o.trim(),i.indexOf(o,s.length)),value:void 0,key:void 0,index:void 0};pm(a.source,t);let l=s.trim().replace(Cje,"").trim();const u=s.indexOf(l),h=l.match(fG);if(h){l=l.replace(fG,"").trim();const d=h[1].trim();let f;if(d&&(f=i.indexOf(d,u+l.length),a.key=CS(r,d,f),pm(a.key,t,!0)),h[2]){const m=h[2].trim();m&&(a.index=CS(r,m,i.indexOf(m,a.key?f+d.length:u+l.length)),pm(a.index,t,!0))}}return l&&(a.value=CS(r,l,u),pm(a.value,t,!0)),a}function CS(e,t,r){return Ft(t,!1,Bse(e,r,t.length))}function zR({value:e,key:t,index:r},i=[]){return kje([e,t,r,...i])}function kje(e){let t=e.length;for(;t--&&!e[t];);return e.slice(0,t+1).map((r,i)=>r||Ft("_".repeat(i+1),!1))}const mG=Ft("undefined",!1),Oje=(e,t)=>{if(e.type===1&&(e.tagType===1||e.tagType===3)){const r=fa(e,"slot");if(r)return r.exp,t.scopes.vSlot++,()=>{t.scopes.vSlot--}}},Pje=(e,t,r)=>dv(e,t,!1,!0,t.length?t[0].loc:r);function Rje(e,t,r=Pje){t.helper(RD);const{children:i,loc:n}=e,s=[],o=[];let a=t.scopes.vSlot>0||t.scopes.vFor>0;const l=fa(e,"slot",!0);if(l){const{arg:b,exp:w}=l;b&&!Us(b)&&(a=!0),s.push(yi(b||Ft("default",!0),r(w,i,n)))}let u=!1,h=!1;const d=[],f=new Set;for(let b=0;b<i.length;b++){const w=i[b];let _;if(!wT(w)||!(_=fa(w,"slot",!0))){w.type!==3&&d.push(w);continue}if(l){t.onError(_r(37,_.loc));break}u=!0;const{children:x,loc:I}=w,{arg:S=Ft("default",!0),exp:T,loc:$}=_;let E;Us(S)?E=S?S.content:"default":a=!0;const C=r(T,x,I);let O,R,D;if(O=fa(w,"if"))a=!0,o.push(FR(O.exp,kS(S,C),mG));else if(R=fa(w,/^else(-if)?$/,!0)){let F=b,z;for(;F--&&(z=i[F],z.type===3););if(z&&wT(z)&&fa(z,"if")){i.splice(b,1),b--;let B=o[o.length-1];for(;B.alternate.type===19;)B=B.alternate;B.alternate=R.exp?FR(R.exp,kS(S,C),mG):kS(S,C)}else t.onError(_r(30,R.loc))}else if(D=fa(w,"for")){a=!0;const F=D.parseResult||eoe(D.exp,t);F?o.push(Ai(t.helper(CD),[F.source,dv(zR(F),kS(S,C),!0)])):t.onError(_r(32,D.loc))}else{if(E){if(f.has(E)){t.onError(_r(38,$));continue}f.add(E),E==="default"&&(h=!0)}s.push(yi(S,C))}}if(!l){const b=(w,_)=>{const x=r(w,_,n);return t.compatConfig&&(x.isNonScopedSlot=!0),yi("default",x)};u?d.length&&d.some(w=>toe(w))&&(h?t.onError(_r(39,d[0].loc)):s.push(b(void 0,d))):s.push(b(void 0,i))}const m=a?2:S3(e.children)?3:1;let g=va(s.concat(yi("_",Ft(m+` /* ${SDe[m]} */`,!1))),n);return o.length&&(g=Ai(t.helper(jse),[g,Y2(o)])),{slots:g,hasDynamicSlots:a}}function kS(e,t){return va([yi("name",e),yi("fn",t)])}function S3(e){for(let t=0;t<e.length;t++){const r=e[t];switch(r.type){case 1:if(r.tagType===2||S3(r.children))return!0;break;case 9:if(S3(r.branches))return!0;break;case 10:case 11:if(S3(r.children))return!0;break}}return!1}function toe(e){return e.type!==2&&e.type!==12?!0:e.type===2?!!e.content.trim():toe(e.content)}const roe=new WeakMap,Lje=(e,t)=>function(){if(e=t.currentNode,!(e.type===1&&(e.tagType===0||e.tagType===1)))return;const{tag:i,props:n}=e,s=e.tagType===1;let o=s?Nje(e,t):`"${i}"`;const a=pr(o)&&o.callee===mT;let l,u,h,d=0,f,m,g,b=a||o===qw||o===xD||!s&&(i==="svg"||i==="foreignObject");if(n.length>0){const w=ioe(e,t);l=w.props,d=w.patchFlag,m=w.dynamicPropNames;const _=w.directives;g=_&&_.length?Y2(_.map(x=>Fje(x,t))):void 0,w.shouldUseBlock&&(b=!0)}if(e.children.length>0)if(o===fT&&(b=!0,d|=1024,e.children.length>1&&t.onError(_r(45,{start:e.children[0].loc.start,end:e.children[e.children.length-1].loc.end,source:""}))),s&&o!==qw&&o!==fT){const{slots:_,hasDynamicSlots:x}=Rje(e,t);u=_,x&&(d|=1024)}else if(e.children.length===1&&o!==qw){const _=e.children[0],x=_.type,I=x===5||x===8;I&&ba(_,t)===0&&(d|=1),I||x===2?u=_:u=e.children}else u=e.children;if(d!==0){if(d<0)h=d+` /* ${Lu[d]} */`;else{const w=Object.keys(Lu).map(Number).filter(_=>_>0&&d&_).map(_=>Lu[_]).join(", ");h=d+` /* ${w} */`}m&&m.length&&(f=jje(m))}e.codegenNode=G_(t,o,l,u,h,f,g,!!b,!1,s,e.loc)};function Nje(e,t,r=!1){let{tag:i}=e;const n=BR(i),s=pv(e,"is");if(s)if(n||op("COMPILER_IS_ON_ELEMENT",t)){const l=s.type===6?s.value&&Ft(s.value.content,!0):s.exp;if(l)return Ai(t.helper(mT),[l])}else s.type===6&&s.value.content.startsWith("vue:")&&(i=s.value.content.slice(4));const o=!n&&fa(e,"is");if(o&&o.exp)return Ai(t.helper(mT),[o.exp]);const a=Use(i)||t.isBuiltInComponent(i);return a?(r||t.helper(a),a):(t.helper(TD),t.components.add(i),q_(i,"component"))}function ioe(e,t,r=e.props,i=!1){const{tag:n,loc:s,children:o}=e,a=e.tagType===1;let l=[];const u=[],h=[],d=o.length>0;let f=!1,m=0,g=!1,b=!1,w=!1,_=!1,x=!1,I=!1;const S=[],T=({key:E,value:C})=>{if(Us(E)){const O=E.content,R=gh(O);if(!a&&R&&O.toLowerCase()!=="onclick"&&O!=="onUpdate:modelValue"&&!$m(O)&&(_=!0),R&&$m(O)&&(I=!0),C.type===20||(C.type===4||C.type===8)&&ba(C,t)>0)return;O==="ref"?g=!0:O==="class"?b=!0:O==="style"?w=!0:O!=="key"&&!S.includes(O)&&S.push(O),a&&(O==="class"||O==="style")&&!S.includes(O)&&S.push(O)}else x=!0};for(let E=0;E<r.length;E++){const C=r[E];if(C.type===6){const{loc:O,name:R,value:D}=C;let F=!0;if(R==="ref"&&(g=!0,t.scopes.vFor>0&&l.push(yi(Ft("ref_for",!0),Ft("true")))),R==="is"&&(BR(n)||D&&D.content.startsWith("vue:")||op("COMPILER_IS_ON_ELEMENT",t)))continue;l.push(yi(Ft(R,!0,Bse(O,0,R.length)),Ft(D?D.content:"",F,D?D.loc:O)))}else{const{name:O,arg:R,exp:D,loc:F}=C,z=O==="bind",B=O==="on";if(O==="slot"){a||t.onError(_r(40,F));continue}if(O==="once"||O==="memo"||O==="is"||z&&dm(R,"is")&&(BR(n)||op("COMPILER_IS_ON_ELEMENT",t))||B&&i)continue;if((z&&dm(R,"key")||B&&d&&dm(R,"vue:before-update"))&&(f=!0),z&&dm(R,"ref")&&t.scopes.vFor>0&&l.push(yi(Ft("ref_for",!0),Ft("true"))),!R&&(z||B)){if(x=!0,D)if(l.length&&(u.push(va(lA(l),s)),l=[]),z){if(u.some(A=>A.type===15?A.properties.some(({key:P})=>P.type!==4||!P.isStatic?!0:P.content!=="class"&&P.content!=="style"&&!gh(P.content)):!0)&&ny("COMPILER_V_BIND_OBJECT_ORDER",t,F),op("COMPILER_V_BIND_OBJECT_ORDER",t)){u.unshift(D);continue}u.push(D)}else u.push({type:14,loc:F,callee:t.helper(PD),arguments:[D]});else t.onError(_r(z?34:35,F));continue}const y=t.directiveTransforms[O];if(y){const{props:M,needRuntime:A}=y(C,e,t);!i&&M.forEach(T),l.push(...M),A&&(h.push(C),u1(A)&&roe.set(C,A))}else Oie(O)||(h.push(C),d&&(f=!0))}}let $;if(u.length?(l.length&&u.push(va(lA(l),s)),u.length>1?$=Ai(t.helper(yT),u,s):$=u[0]):l.length&&($=va(lA(l),s)),x?m|=16:(b&&!a&&(m|=2),w&&!a&&(m|=4),S.length&&(m|=8),_&&(m|=32)),!f&&(m===0||m===32)&&(g||I||h.length>0)&&(m|=512),!t.inSSR&&$)switch($.type){case 15:let E=-1,C=-1,O=!1;for(let F=0;F<$.properties.length;F++){const z=$.properties[F].key;Us(z)?z.content==="class"?E=F:z.content==="style"&&(C=F):z.isHandlerKey||(O=!0)}const R=$.properties[E],D=$.properties[C];O?$=Ai(t.helper(B_),[$]):(R&&!Us(R.value)&&(R.value=Ai(t.helper(kD),[R.value])),D&&!Us(D.value)&&(w||D.value.type===17)&&(D.value=Ai(t.helper(OD),[D.value])));break;case 14:break;default:$=Ai(t.helper(B_),[Ai(t.helper(Z2),[$])]);break}return{props:$,directives:h,patchFlag:m,dynamicPropNames:S,shouldUseBlock:f}}function lA(e){const t=new Map,r=[];for(let i=0;i<e.length;i++){const n=e[i];if(n.key.type===8||!n.key.isStatic){r.push(n);continue}const s=n.key.content,o=t.get(s);o?(s==="style"||s==="class"||gh(s))&&Dje(o,n):(t.set(s,n),r.push(n))}return r}function Dje(e,t){e.value.type===17?e.value.elements.push(t.value):e.value=Y2([e.value,t.value],e.loc)}function Fje(e,t){const r=[],i=roe.get(e);i?r.push(t.helperString(i)):(t.helper($D),t.directives.add(e.name),r.push(q_(e.name,"directive")));const{loc:n}=e;if(e.exp&&r.push(e.exp),e.arg&&(e.exp||r.push("void 0"),r.push(e.arg)),Object.keys(e.modifiers).length){e.arg||(e.exp||r.push("void 0"),r.push("void 0"));const s=Ft("true",!1,n);r.push(va(e.modifiers.map(o=>yi(o,s)),n))}return Y2(r,e.loc)}function jje(e){let t="[";for(let r=0,i=e.length;r<i;r++)t+=JSON.stringify(e[r]),r<i-1&&(t+=", ");return t+"]"}function BR(e){return e==="component"||e==="Component"}Object.freeze({});Object.freeze([]);const Vje=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Uje=/-(\w)/g,yG=Vje(e=>e.replace(Uje,(t,r)=>r?r.toUpperCase():"")),zje=(e,t)=>{if(_T(e)){const{children:r,loc:i}=e,{slotName:n,slotProps:s}=Bje(e,t),o=[t.prefixIdentifiers?"_ctx.$slots":"$slots",n,"{}","undefined","true"];let a=2;s&&(o[2]=s,a=3),r.length&&(o[3]=dv([],r,!1,!1,i),a=4),t.scopeId&&!t.slotted&&(a=5),o.splice(a),e.codegenNode=Ai(t.helper(Fse),o,i)}};function Bje(e,t){let r='"default"',i;const n=[];for(let s=0;s<e.props.length;s++){const o=e.props[s];o.type===6?o.value&&(o.name==="name"?r=JSON.stringify(o.value.content):(o.name=yG(o.name),n.push(o))):o.name==="bind"&&dm(o.arg,"name")?o.exp&&(r=o.exp):(o.name==="bind"&&o.arg&&Us(o.arg)&&(o.arg.content=yG(o.arg.content)),n.push(o))}if(n.length>0){const{props:s,directives:o}=ioe(e,t,n);i=s,o.length&&t.onError(_r(36,o[0].loc))}return{slotName:r,slotProps:i}}const Gje=/^\s*([\w$_]+|(async\s*)?\([^)]*?\))\s*=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,noe=(e,t,r,i)=>{const{loc:n,modifiers:s,arg:o}=e;!e.exp&&!s.length&&r.onError(_r(35,n));let a;if(o.type===4)if(o.isStatic){let d=o.content;d.startsWith("vue:")&&(d=`vnode-${d.slice(4)}`),a=Ft(rl(In(d)),!0,o.loc)}else a=Du([`${r.helperString(DR)}(`,o,")"]);else a=o,a.children.unshift(`${r.helperString(DR)}(`),a.children.push(")");let l=e.exp;l&&!l.content.trim()&&(l=void 0);let u=r.cacheHandlers&&!l&&!r.inVOnce;if(l){const d=zse(l.content),f=!(d||Gje.test(l.content)),m=l.content.includes(";");pm(l,r,!1,m),(f||u&&d)&&(l=Du([`${f?"$event":"(...args)"} => ${m?"{":"("}`,l,m?"}":")"]))}let h={props:[yi(a,l||Ft("() => {}",!1,n))]};return i&&(h=i(h)),u&&(h.props[0].value=r.cache(h.props[0].value)),h.props.forEach(d=>d.key.isHandlerKey=!0),h},qje=(e,t,r)=>{const{exp:i,modifiers:n,loc:s}=e,o=e.arg;return o.type!==4?(o.children.unshift("("),o.children.push(') || ""')):o.isStatic||(o.content=`${o.content} || ""`),n.includes("camel")&&(o.type===4?o.isStatic?o.content=In(o.content):o.content=`${r.helperString(NR)}(${o.content})`:(o.children.unshift(`${r.helperString(NR)}(`),o.children.push(")"))),r.inSSR||(n.includes("prop")&&gG(o,"."),n.includes("attr")&&gG(o,"^")),!i||i.type===4&&!i.content.trim()?(r.onError(_r(34,s)),{props:[yi(o,Ft("",!0,s))]}):{props:[yi(o,i)]}},gG=(e,t)=>{e.type===4?e.isStatic?e.content=t+e.content:e.content=`\`${t}\${${e.content}}\``:(e.children.unshift(`'${t}' + (`),e.children.push(")"))},Hje=(e,t)=>{if(e.type===0||e.type===1||e.type===11||e.type===10)return()=>{const r=e.children;let i,n=!1;for(let s=0;s<r.length;s++){const o=r[s];if(sA(o)){n=!0;for(let a=s+1;a<r.length;a++){const l=r[a];if(sA(l))i||(i=r[s]={type:8,loc:o.loc,children:[o]}),i.children.push(" + ",l),r.splice(a,1),a--;else{i=void 0;break}}}}if(!(!n||r.length===1&&(e.type===0||e.type===1&&e.tagType===0&&!e.props.find(s=>s.type===7&&!t.directiveTransforms[s.name])&&e.tag!=="template")))for(let s=0;s<r.length;s++){const o=r[s];if(sA(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!t.ssr&&ba(o,t)===0&&a.push(1+` /* ${Lu[1]} */`),r[s]={type:12,content:o,loc:o.loc,codegenNode:Ai(t.helper(ID),a)}}}}},vG=new WeakSet,Wje=(e,t)=>{if(e.type===1&&fa(e,"once",!0))return vG.has(e)||t.inVOnce?void 0:(vG.add(e),t.inVOnce=!0,t.helper(gT),()=>{t.inVOnce=!1;const r=t.currentNode;r.codegenNode&&(r.codegenNode=t.cache(r.codegenNode,!0))})},soe=(e,t,r)=>{const{exp:i,arg:n}=e;if(!i)return r.onError(_r(41,e.loc)),uA();const s=i.loc.source,o=i.type===4?i.content:s;r.bindingMetadata[s];const a=!1;if(!o.trim()||!zse(o)&&!a)return r.onError(_r(42,i.loc)),uA();const l=n||Ft("modelValue",!0),u=n?Us(n)?`onUpdate:${n.content}`:Du(['"onUpdate:" + ',n]):"onUpdate:modelValue";let h;const d=r.isTS?"($event: any)":"$event";h=Du([`${d} => ((`,i,") = $event)"]);const f=[yi(l,e.exp),yi(u,h)];if(e.modifiers.length&&t.tagType===1){const m=e.modifiers.map(b=>(ND(b)?b:JSON.stringify(b))+": true").join(", "),g=n?Us(n)?`${n.content}Modifiers`:Du([n,' + "Modifiers"']):"modelModifiers";f.push(yi(g,Ft(`{ ${m} }`,!1,e.loc,2)))}return uA(f)};function uA(e=[]){return{props:e}}const Jje=/[\w).+\-_$\]]/,Zje=(e,t)=>{!op("COMPILER_FILTER",t)||(e.type===5&&ST(e.content,t),e.type===1&&e.props.forEach(r=>{r.type===7&&r.name!=="for"&&r.exp&&ST(r.exp,t)}))};function ST(e,t){if(e.type===4)bG(e,t);else for(let r=0;r<e.children.length;r++){const i=e.children[r];typeof i=="object"&&(i.type===4?bG(i,t):i.type===8?ST(e,t):i.type===5&&ST(i.content,t))}}function bG(e,t){const r=e.content;let i=!1,n=!1,s=!1,o=!1,a=0,l=0,u=0,h=0,d,f,m,g,b=[];for(m=0;m<r.length;m++)if(f=d,d=r.charCodeAt(m),i)d===39&&f!==92&&(i=!1);else if(n)d===34&&f!==92&&(n=!1);else if(s)d===96&&f!==92&&(s=!1);else if(o)d===47&&f!==92&&(o=!1);else if(d===124&&r.charCodeAt(m+1)!==124&&r.charCodeAt(m-1)!==124&&!a&&!l&&!u)g===void 0?(h=m+1,g=r.slice(0,m).trim()):w();else{switch(d){case 34:n=!0;break;case 39:i=!0;break;case 96:s=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(d===47){let _=m-1,x;for(;_>=0&&(x=r.charAt(_),x===" ");_--);(!x||!Jje.test(x))&&(o=!0)}}g===void 0?g=r.slice(0,m).trim():h!==0&&w();function w(){b.push(r.slice(h,m).trim()),h=m+1}if(b.length){for(IE("COMPILER_FILTER",t,e.loc),m=0;m<b.length;m++)g=Yje(g,b[m],t);e.content=g}}function Yje(e,t,r){r.helper(ED);const i=t.indexOf("(");if(i<0)return r.filters.add(t),`${q_(t,"filter")}(${e})`;{const n=t.slice(0,i),s=t.slice(i+1);return r.filters.add(n),`${q_(n,"filter")}(${e}${s!==")"?","+s:s}`}}const wG=new WeakSet,Kje=(e,t)=>{if(e.type===1){const r=fa(e,"memo");return!r||wG.has(e)?void 0:(wG.add(e),()=>{const i=e.codegenNode||t.currentNode.codegenNode;i&&i.type===13&&(e.tagType!==1&&DD(i,t),e.codegenNode=Ai(t.helper(LD),[r.exp,dv(void 0,i),"_cache",String(t.cached++)]))})}};function Xje(e){return[[Wje,Sje,Kje,$je,Zje,xje,zje,Lje,Oje,Hje],{on:noe,bind:qje,model:soe}]}function Qje(e,t={}){const r=t.onError||_D,i=t.mode==="module";t.prefixIdentifiers===!0?r(_r(46)):i&&r(_r(47));const n=!1;t.cacheHandlers&&r(_r(48)),t.scopeId&&!i&&r(_r(49));const s=Tt(e)?V7e(e,t):e,[o,a]=Xje();return eje(s,Wt({},t,{prefixIdentifiers:n,nodeTransforms:[...o,...t.nodeTransforms||[]],directiveTransforms:Wt({},a,t.directiveTransforms||{})})),nje(s,Wt({},t,{prefixIdentifiers:n}))}const eVe=()=>({props:[]}),ooe=Symbol("vModelRadio"),aoe=Symbol("vModelCheckbox"),loe=Symbol("vModelText"),uoe=Symbol("vModelSelect"),GR=Symbol("vModelDynamic"),coe=Symbol("vOnModifiersGuard"),hoe=Symbol("vOnKeysGuard"),doe=Symbol("vShow"),VD=Symbol("Transition"),poe=Symbol("TransitionGroup");M7e({[ooe]:"vModelRadio",[aoe]:"vModelCheckbox",[loe]:"vModelText",[uoe]:"vModelSelect",[GR]:"vModelDynamic",[coe]:"withModifiers",[hoe]:"withKeys",[doe]:"vShow",[VD]:"Transition",[poe]:"TransitionGroup"});let Zy;function tVe(e,t=!1){return Zy||(Zy=document.createElement("div")),t?(Zy.innerHTML=`<div foo="${e.replace(/"/g,"&quot;")}">`,Zy.children[0].getAttribute("foo")):(Zy.innerHTML=e,Zy.textContent)}const rVe=Bn("style,iframe,script,noscript",!0),iVe={isVoidTag:RDe,isNativeTag:e=>$ie(e)||Eie(e),isPreTag:e=>e==="pre",decodeEntities:tVe,isBuiltInComponent:e=>{if(hm(e,"Transition"))return VD;if(hm(e,"TransitionGroup"))return poe},getNamespace(e,t){let r=t?t.ns:0;if(t&&r===2)if(t.tag==="annotation-xml"){if(e==="svg")return 1;t.props.some(i=>i.type===6&&i.name==="encoding"&&i.value!=null&&(i.value.content==="text/html"||i.value.content==="application/xhtml+xml"))&&(r=0)}else/^m(?:[ions]|text)$/.test(t.tag)&&e!=="mglyph"&&e!=="malignmark"&&(r=0);else t&&r===1&&(t.tag==="foreignObject"||t.tag==="desc"||t.tag==="title")&&(r=0);if(r===0){if(e==="svg")return 1;if(e==="math")return 2}return r},getTextMode({tag:e,ns:t}){if(t===0){if(e==="textarea"||e==="title")return 1;if(rVe(e))return 2}return 0}},nVe=e=>{e.type===1&&e.props.forEach((t,r)=>{t.type===6&&t.name==="style"&&t.value&&(e.props[r]={type:7,name:"bind",arg:Ft("style",!0,t.loc),exp:sVe(t.value.content,t.loc),modifiers:[],loc:t.loc})})},sVe=(e,t)=>{const r=Iie(e);return Ft(JSON.stringify(r),!1,t,3)};function hl(e,t){return _r(e,t,oVe)}const oVe={[50]:"v-html is missing expression.",[51]:"v-html will override element children.",[52]:"v-text is missing expression.",[53]:"v-text will override element children.",[54]:"v-model can only be used on <input>, <textarea> and <select> elements.",[55]:"v-model argument is not supported on plain elements.",[56]:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",[57]:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",[58]:"v-show is missing expression.",[59]:"<Transition> expects exactly one child element or component.",[60]:"Tags with side effect (<script> and <style>) are ignored in client component templates."},aVe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(hl(50,n)),t.children.length&&(r.onError(hl(51,n)),t.children.length=0),{props:[yi(Ft("innerHTML",!0,n),i||Ft("",!0))]}},lVe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(hl(52,n)),t.children.length&&(r.onError(hl(53,n)),t.children.length=0),{props:[yi(Ft("textContent",!0),i?Ai(r.helperString(ME),[i],n):Ft("",!0))]}},uVe=(e,t,r)=>{const i=soe(e,t,r);if(!i.props.length||t.tagType===1)return i;e.arg&&r.onError(hl(55,e.arg.loc));function n(){const a=pv(t,"value");a&&r.onError(hl(57,a.loc))}const{tag:s}=t,o=r.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||o){let a=loe,l=!1;if(s==="input"||o){const u=pv(t,"type");if(u){if(u.type===7)a=GR;else if(u.value)switch(u.value.content){case"radio":a=ooe;break;case"checkbox":a=aoe;break;case"file":l=!0,r.onError(hl(56,e.loc));break;default:n();break}}else P7e(t)?a=GR:n()}else s==="select"?a=uoe:n();l||(i.needRuntime=r.helper(a))}else r.onError(hl(54,e.loc));return i.props=i.props.filter(a=>!(a.key.type===4&&a.key.content==="modelValue")),i},cVe=Bn("passive,once,capture"),hVe=Bn("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),dVe=Bn("left,right"),foe=Bn("onkeyup,onkeydown,onkeypress",!0),pVe=(e,t,r,i)=>{const n=[],s=[],o=[];for(let a=0;a<t.length;a++){const l=t[a];l==="native"&&ny("COMPILER_V_ON_NATIVE",r,i)||cVe(l)?o.push(l):dVe(l)?Us(e)?foe(e.content)?n.push(l):s.push(l):(n.push(l),s.push(l)):hVe(l)?s.push(l):n.push(l)}return{keyModifiers:n,nonKeyModifiers:s,eventOptionModifiers:o}},_G=(e,t)=>Us(e)&&e.content.toLowerCase()==="onclick"?Ft(t,!0):e.type!==4?Du(["(",e,`) === "onClick" ? "${t}" : (`,e,")"]):e,fVe=(e,t,r)=>noe(e,t,r,i=>{const{modifiers:n}=e;if(!n.length)return i;let{key:s,value:o}=i.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=pVe(s,n,r,e.loc);if(l.includes("right")&&(s=_G(s,"onContextmenu")),l.includes("middle")&&(s=_G(s,"onMouseup")),l.length&&(o=Ai(r.helper(coe),[o,JSON.stringify(l)])),a.length&&(!Us(s)||foe(s.content))&&(o=Ai(r.helper(hoe),[o,JSON.stringify(a)])),u.length){const h=u.map(Tl).join("");s=Us(s)?Ft(`${s.content}${h}`,!0):Du(["(",s,`) + "${h}"`])}return{props:[yi(s,o)]}}),mVe=(e,t,r)=>{const{exp:i,loc:n}=e;return i||r.onError(hl(58,n)),{props:[],needRuntime:r.helper(doe)}},yVe=(e,t)=>{if(e.type===1&&e.tagType===1&&t.isBuiltInComponent(e.tag)===VD)return()=>{e.children.length&&moe(e)&&t.onError(hl(59,{start:e.children[0].loc.start,end:e.children[e.children.length-1].loc.end,source:""}))}};function moe(e){const t=e.children=e.children.filter(i=>i.type!==3&&!(i.type===2&&!i.content.trim())),r=t[0];return t.length!==1||r.type===11||r.type===9&&r.branches.some(moe)}const gVe=(e,t)=>{e.type===1&&e.tagType===0&&(e.tag==="script"||e.tag==="style")&&(t.onError(hl(60,e.loc)),t.removeNode())},vVe=[nVe,yVe],bVe={cloak:eVe,html:aVe,text:lVe,model:uVe,on:fVe,show:mVe};function wVe(e,t={}){return Qje(e,Wt({},iVe,t,{nodeTransforms:[gVe,...vVe,...t.nodeTransforms||[]],directiveTransforms:Wt({},bVe,t.directiveTransforms||{}),transformHoist:null}))}function _Ve(){mD()}_Ve();const xG=Object.create(null);function yoe(e,t){if(!Tt(e))if(e.nodeType)e=e.innerHTML;else return xe("invalid template option: ",e),bn;const r=e,i=xG[r];if(i)return i;if(e[0]==="#"){const a=document.querySelector(e);a||xe(`Template element not found or is empty: ${e}`),e=a?a.innerHTML:""}const{code:n}=wVe(e,Wt({hoistStatic:!0,onError:s,onWarn:a=>s(a,!0)},t));function s(a,l=!1){const u=l?a.message:`Template compilation error: ${a.message}`,h=a.loc&&TDe(e,a.loc.start.offset,a.loc.end.offset);xe(h?`${u}
${h}`:u)}const o=new Function("Vue",n)(g7e);return o._rc=!0,xG[r]=o}dD(yoe);var $it=Object.freeze(Object.defineProperty({__proto__:null,compile:yoe,EffectScope:X$,ReactiveEffect:c1,customRef:ine,effect:Uie,effectScope:Lie,getCurrentScope:Die,isProxy:av,isReactive:ml,isReadonly:bh,isRef:vr,isShallow:nE,markRaw:Gn,onScopeDispose:Fie,proxyRefs:oE,reactive:eo,readonly:rE,ref:Xi,shallowReactive:L8,shallowReadonly:Gd,shallowRef:ene,stop:zie,toRaw:it,toRef:F8,toRefs:nne,triggerRef:rne,unref:L_,camelize:In,capitalize:Tl,normalizeClass:zn,normalizeProps:Tie,normalizeStyle:$p,toDisplayString:jr,toHandlerKey:rl,BaseTransition:hE,Comment:Ri,Fragment:hr,KeepAlive:_ne,Static:ah,Suspense:mne,Teleport:Lne,Text:Hu,callWithAsyncErrorHandling:Bs,callWithErrorHandling:yl,cloneVNode:El,compatUtils:hse,computed:sl,createBlock:zi,createCommentVNode:Yt,createElementBlock:et,createElementVNode:ke,createHydrationRenderer:oD,createPropsRestProxy:sse,createRenderer:sD,createSlots:zne,createStaticVNode:cD,createTextVNode:lh,createVNode:Mt,defineAsyncComponent:dE,defineComponent:tr,defineEmits:Xne,defineExpose:Qne,defineProps:Kne,get devtools(){return Qc},getCurrentInstance:ys,getTransitionRawChildren:B2,guardReactiveProps:uD,h:qs,handleError:Ep,initCustomFormatter:mD,inject:Cm,isMemoSame:yD,isRuntimeOnly:yE,isVNode:$l,mergeDefaults:nse,mergeProps:mE,nextTick:j2,onActivated:Y8,onBeforeMount:X8,onBeforeUnmount:q2,onBeforeUpdate:Q8,onDeactivated:K8,onErrorCaptured:iD,onMounted:Xu,onRenderTracked:rD,onRenderTriggered:tD,onServerPrefetch:eD,onUnmounted:ky,onUpdated:G2,openBlock:De,popScopeId:$h,provide:J8,pushScopeId:Th,queuePostFlushCb:V2,registerRuntimeCompiler:dD,renderList:Oy,renderSlot:cl,resolveComponent:or,resolveDirective:Er,resolveDynamicComponent:aD,resolveFilter:cse,resolveTransitionHooks:ry,setBlockTracking:hT,setDevtoolsHook:lE,setTransitionHooks:vp,ssrContextKey:fD,ssrUtils:use,toHandlers:Gne,transformVNodeArgs:jne,useAttrs:rse,useSSRContext:ase,useSlots:tse,useTransitionState:cE,version:dT,warn:xe,watch:Gs,watchEffect:gne,watchPostEffect:Z8,watchSyncEffect:vne,withAsyncContext:ose,withCtx:Pi,withDefaults:ese,withDirectives:xr,withMemo:lse,withScopeId:fne,Transition:W2,TransitionGroup:vD,VueElement:H2,createApp:SE,createSSRApp:Ese,defineCustomElement:gD,defineSSRCustomElement:pse,hydrate:wD,initDirectivesForSSR:Ose,render:uh,useCssModule:fse,useCssVars:mse,vModelCheckbox:bE,vModelDynamic:Sse,vModelRadio:wE,vModelSelect:bD,vModelText:U_,vShow:xE,withKeys:Mse,withModifiers:_E},Symbol.toStringTag,{value:"Module"}));function X2(e){return!!e&&typeof e=="object"}function SG(e){return typeof e=="number"||/^\d+$/.test(e)}function xVe(e,t){return X2(e)&&t in e}function AE(e){return e?Array.isArray(e)?e.map(function(t){return String(t)}):typeof e=="object"?Object.keys(e):typeof e=="string"?e.match(/[-$\w]+/g)||[]:[]:[]}function SVe(e,t){var r=e,i=AE(t);return i.every(function(n){var s=X2(r)&&r.hasOwnProperty(n);return r=s?r[n]:void 0,s}),r}function MVe(e,t,r,i){i===void 0&&(i=!1);var n=AE(t);return n.reduce(function(s,o,a){if(!s)return!1;if(Array.isArray(s)&&SG(o)&&(o=parseInt(o)),a===n.length-1)return s[o]=r,!0;if(!X2(s[o])||!(o in s))if(i)s[o]=SG(n[a+1])?[]:{};else return!1;return s[o]},e)}function IVe(e,t){var r=AE(t);if(X2(e)){for(;r.length;){var i=r.shift();if(xVe(e,i))e=e[i];else return!1}return!0}return!1}function TVe(e){return JSON.parse(JSON.stringify(e))}var qd={mapping:"standard",strict:!0,cache:!0,deep:1},$Ve={camel:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return e.shift()+e.map(function(r){return r.replace(/\w/,function(i){return i.toUpperCase()})}).join("")},snake:function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];return(e=this).camel.apply(e,t).replace(/([a-z])([A-Z])/g,function(i,n,s){return n+"_"+s}).toLowerCase()},const:function(){for(var e,t=[],r=arguments.length;r--;)t[r]=arguments[r];return(e=this).snake.apply(e,t).toUpperCase()}},EVe={state:"state",getters:"getters",actions:"_actions",mutations:"_mutations"},MG={standard:function(t,r,i){switch(t){case"mutations":return i.const("set",r);case"actions":return i.camel("set",r)}return r},simple:function(t,r,i){return t==="actions"?i.camel("set",r):r}},cA;function yv(e,t){if(t.match(/!$/))return t.substr(0,t.length-1);var r=cA;if(!r){if(r=MG[qd.mapping],!r)throw new Error("[Vuex Pathify] Unknown mapping '"+qd.mapping+`' in options
    - Choose one of '`+Object.keys(MG).join("', '")+`'
    - Or, supply a custom function
`);cA=r}return cA(e,t,$Ve)}function qR(e,t){var r=t.replace(/[/@!]+/g,"."),i=t.split("@"),n=i[0],s=i[1],o,a;if(n.indexOf("/")>-1){var l=n.split("/");a=l.pop(),o=l.join("/")}else a=n;if(o&&!e._modulesNamespaceMap[o+"/"])throw new Error("[Vuex Pathify] Unknown module '"+o+"' via path '"+t+"'");return{absPath:r,module:o,target:n,name:a.replace("!",""),isDynamic:t.indexOf(":")>-1,get:function(u){var h=e[EVe[u]],d=yv(u,a),f=o?o+"/"+d:d;return{exists:u==="state"?IVe(h,f):f in h,member:h,trgPath:f,trgName:d,objPath:s}}}}function goe(e,t,r,i,n,s){var o="[Vuex Pathify] Unable to map path '"+e+"':";if(e.indexOf("!")>-1)o+=`
    - Did not find `+r+" or "+n+" named '"+t.name+"' on "+(t.module?"module '"+t.module+"'":"root store");else{var a=i?r+" '"+i.trgName+"' or ":"",l=n+" '"+s.trgName+"'";o+=`
    - Did not find `+a+l+" on "+(t.module?"module '"+t.module+"'":"store")+`
    - Use direct syntax '`+t.target.replace(/(@|$)/,"!$1")+"' (if member exists) to target directly"}return o}var MT=function(t,r,i){this.expr=t,this.path=r,this.value=i};MT.prototype.update=function(t){var r=MVe(t,this.path,this.value,qd.deep>1);return r?Array.isArray(t)?[].concat(t):Object.assign({},t):(console.error("[Vuex Pathify] Unable to create sub-property for path '"+this.expr+`':
    - Set option 'deep' to 2 to allow it`),t)};function AVe(e,t){var r=qR(e,t),i=r.get("actions");if(i.exists)return function(s){var o=i.objPath?new MT(t,i.objPath,s):s;return e.dispatch(i.trgPath,o)};var n=r.get("mutations");return n.exists||r.isDynamic?function(s){if(r.isDynamic){var o=voe(t,this);n=qR(e,o).get("mutations")}var a=n.objPath?new MT(t,n.objPath,s):s;return e.commit(n.trgPath,a)}:(console.error(goe(t,r,"action",i,"mutation",n)),function(s){})}function CVe(e,t,r){var i=qR(e,t),n;if(!r&&(n=i.get("getters"),n.exists))return function(){var o=n.member[n.trgPath];return n.objPath?IG(t,o,n.objPath):o};var s=i.get("state");return s.exists||i.isDynamic?function(){var o=i.isDynamic?voe(i.absPath,this):i.absPath;return IG(t,e.state,o)}:(console.error(goe(t,i,"getter",n,"state",s)),function(){})}function IG(e,t,r){return SVe(t,r)}function voe(e,t){return e.replace(/:(\w+)/g,function(i,n){return n in t||console.error('Error resolving dynamic store path: The property "'+n+'" does not exist on the scope',t),t[n]})}function kVe(e){e.set=function(t,r){var i=AVe(e,t);if(typeof i<"u")return i(r)},e.get=function(t){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var n=CVe(e,t);if(typeof n<"u"){var s=n();return typeof s=="function"?s.apply(void 0,r):s}},e.copy=function(t){for(var r=[],i=arguments.length-1;i-- >0;)r[i]=arguments[i+1];var n=e.get.apply(e,[t].concat(r));return X2(n)?TVe(n):n}}function OS(e){return yv(e,"value")}function OVe(){console.log(`
  [Vuex Pathify] Options:

  Mapping (`+qd.mapping+`)
-------------------------------
  path       : value
  state      : `+OS("state")+`
  getters    : `+OS("getters")+`
  actions    : `+OS("actions")+`
  mutations  : `+OS("mutations")+`

  Settings
-------------------------------
  strict     : `+qd.strict+`
  cache      : `+qd.cache+`
  deep       : `+qd.deep+`

`)}function PVe(e){kVe(e)}var RVe={options:qd,plugin:PVe,debug:OVe};function UD(e){return AE(typeof e=="function"?e():e)}function LVe(e){return UD(e).reduce(function(t,r){var i=yv("getters",r);return t[i]=function(n){return n[r]},t},{})}function NVe(e){return UD(e).reduce(function(t,r){var i=yv("mutations",r);return t[i]=function(n,s){n[r]=s instanceof MT?s.update(n[r]):s},t},{})}function DVe(e){return UD(e).reduce(function(t,r){var i=yv("actions",r),n=yv("mutations",r);return t[i]=function(s,o){var a=s.commit;a(n,o)},t},{})}var gs={getters:LVe,mutations:NVe,actions:DVe},HR=(e=>(e.ADD_TEMP_BUTTON="addTempButton",e.REMOVE_BUTTON="removeButton",e))(HR||{});const FVe={visible(e){return e.order.map(t=>t.map(r=>e.items[typeof r=="string"?r:r.id]).filter(r=>{if(typeof r=="string"||r.componentId)return!0})).filter(t=>t.length>0)}},jVe={addTempButton(e,t){e.state.temporary.find(r=>r===t)||e.commit("ADD_TEMP_BUTTON",t)},removeButton(e,t){e.commit("REMOVE_BUTTON",t)}},VVe={ADD_TEMP_BUTTON(e,t){e.temporary.push(t)},REMOVE_BUTTON(e,t){let r=e.temporary.indexOf(t);r!==-1&&e.temporary.splice(r,1),t in e.items&&delete e.items[t],e.order.forEach(i=>{let n=i.indexOf(t);n!==-1&&i.splice(n,1)})}};function Eit(){const e=new xDe;return{namespaced:!0,state:e,getters:{...FVe},actions:{...jVe},mutations:{...VVe,...gs.mutations(["items","order","temporary","tempButtonDict"])}}}class UVe{legendConfig=void 0;children=[];headerControls=[]}class boe{_uid;_id;_name;_type;_controls;_disabledControls;_children=[];_parent=void 0;_loadPromise;_hidden;_itemConfig;constructor(t){this._loadPromise=new Mo,this._id=t.layerId,this._name=t.name??"",this._type=t.type??gn.Entry,this._controls=t.controls?.slice(),this._disabledControls=t.disabledControls?.slice(),this._hidden=t.hidden??!1,this._itemConfig=t,this._uid=R0.sharedUtils.generateUUID()}get id(){return this._id}get uid(){return this._uid}get name(){return this._name}get type(){return this._type}get hidden(){return this._hidden}get parent(){return this._parent}get children(){return this._children}set children(t){this._children=t}get loadPromise(){return this._loadPromise.getPromise()}remove(){}reload(){}controlAvailable(t){return this._disabledControls?.includes(t)?!1:this._controls?.includes(t)}}class M3 extends boe{_layer;_layerParentId;_layerIdx;_symbologyExpanded;_toggleSymbology;constructor(t,r=void 0){super(t),this._parent=r,this._type=gn.Placeholder,this._layerParentId=t.layerParentId,this._layerIdx=t.entryIndex,this._symbologyExpanded=t.symbologyExpanded||!1,this._toggleSymbology=t.layerLegendConfigs!==void 0?t.layerLegendConfigs[t.layerId]?.toggleSymbology??!0:!0,t.layer!==void 0?this.loadLayer(t.layer):this.errorCheck()}get layerUID(){return this._layer?.uid}get layerParentId(){return this._layerParentId}get entryIndex(){return this._layerIdx}get visibility(){return this._layer?.visibility}get layer(){return this._layer}get layerTree(){return this._layer?.getLayerTree()}get legend(){return this._layer?.legend}get symbologyExpanded(){return this._symbologyExpanded}get toggleSymbology(){return this._toggleSymbology}reload(){this._type=gn.Placeholder,this._loadPromise=new Mo,this._layer===void 0&&this.errorCheck()}errorCheck(){setTimeout(()=>{this._layer===void 0&&this._type===gn.Placeholder&&this.setErrorType()},2e4)}remove(){this.toggleVisibility(!1,!0)}setErrorType(){this._type=gn.Error,this._loadPromise.rejectMe()}loadLayer(t){this._layer=t,this._layer.isLayerLoaded().then(()=>{if(this._layer?.layerType===yr.MAPIMAGE&&!this._layerIdx)this._type=gn.Error,console.error(`MapImageLayer has no entryIndex defined - ${this._itemConfig.layerId} (${this._itemConfig.name})`),this._loadPromise.rejectMe();else{this._type=gn.Entry,this._id=t.id,this._layerIdx=t.layerIdx===-1?void 0:t.layerIdx,this._layerParentId=t.isSublayer?t.parentLayer.id:void 0;let r=[];t.supportsFeatures||r.push(fi.Datatable),t.extent===void 0&&r.push(fi.BoundaryZoom),r.forEach(i=>{let n=this._controls?.indexOf(i)??-1;n!==-1&&this._controls?.splice(n,1)}),this.checkVisibilityRules(),t.visibility||this.setChildSymbologyVisibility(void 0,!1),this._loadPromise.resolveMe()}})}toggleSymbologyExpand(t=void 0){return this._symbologyExpanded=t??!this._symbologyExpanded,this._symbologyExpanded}setChildSymbologyVisibility(t,r){this._layer?.legend.some(i=>((t===void 0||i.uid===t)&&(i.visibility=r,i.lastVisbility=r),t!==void 0&&i.uid===t))}checkVisibilityRules(){!this._layer||(this._parent!==void 0&&!this._parent.visibility&&this.controlAvailable(fi.Visibility)?this._layer.visibility=!1:this._parent?.type===gn.Set&&this._parent.children.some(r=>r.visibility&&r!==this)&&(this._layer.visibility=!1))}toggleVisibility(t=void 0,r=!0,i=!1){if(i||this.controlAvailable(fi.Visibility)){if(this.visibility===t||!this._layer)return;this._layer.visibility=t??!this.visibility;const n=!this._layer.legend.some(s=>s.lastVisbility);this._layer.legend.forEach(s=>{n&&(s.lastVisbility=!0),s.visibility=this.visibility?s.lastVisbility:!1}),this._parent instanceof Po&&r&&this._parent.checkVisibility(this)}}setOpacity(t){this._layer&&(this._layer.opacity=t)}toggleIdentify(t){this._layer&&(this._layer.identify=t)}controlAvailable(t){return super.controlAvailable(t)??this.layer?.controlAvailable(t)??!1}}class Po extends boe{_expanded;_visibility;_lastVisible;_visibleEntries=[];constructor(t,r=void 0){super(t),this._parent=r,this._type=gn.Placeholder,this._controls=t.controls?.slice()??[fi.Visibility],this._disabledControls=t.disabledControls?.slice()??[],this._expanded=t.expanded||!0,this._visibility=t.visibility||!0,t.layer!==void 0?t.layer.isLayerLoaded().then(()=>{const i=n=>n.map(s=>s.isSublayer?{layer:s,layerId:s.id,name:s.name,entryIndex:s.layerIdx===-1?void 0:s.layerIdx}:{name:s.name,children:i(s.sublayers)});t.children=i(t.layer.sublayers),this._initGroupProperties(t)}):this._initGroupProperties(t)}_initGroupProperties(t){t.exclusiveVisibility!==void 0?this._type=t.exclusiveVisibility?gn.Set:gn.Group:this._type=gn.Group,(this._type===gn.Set?t.exclusiveVisibility:t.children).filter(i=>!i.hidden).forEach(i=>{i.layerLegendConfigs=t.layerLegendConfigs,i.exclusiveVisibility!==void 0||i.children!==void 0?this._children.push(new Po(i,this)):(i.entryIndex!==void 0&&(i.layerParentId=i.layerId,i.layerId=`${i.layerId}-${i.entryIndex}`),this._children.push(new M3(i,this)))}),this._loadPromise.resolveMe()}checkVisibilityRules(){!this._visibility||(this._parent!==void 0&&!this._parent.visibility?this.toggleVisibility(!1,!1):this._parent?.type===gn.Set&&this._parent.children.some(r=>r.visibility&&r!==this)&&this.toggleVisibility(!1,!1))}get visibility(){return this._visibility}get expanded(){return this._expanded}set lastVisible(t){this._lastVisible=t}toggleExpanded(t=void 0){t!==void 0?this._expanded=t:this._expanded=!this._expanded}checkVisibility(t){this._type===gn.Group?this._children.some(r=>r.visibility)?(this._visibility=!0,this._visibleEntries=this._children.filter(r=>r.visibility)):this._children.every(r=>!r.visibility)&&(this._visibility=!1,this._visibleEntries=[]):t.visibility?(this.children.forEach(r=>{r.visibility&&r.id!==t.id&&r.toggleVisibility(!1,!1)}),this._lastVisible=t,this._visibility=!0):(this._lastVisible=t,this._visibility=!1),this.parent instanceof Po&&this.parent.checkVisibility(this)}toggleVisibility(t=void 0,r=!0){const i=this._visibility;this._visibility=t??!this._visibility,i!==this._visibility&&(this._type===gn.Group?this._visibility?this._visibleEntries.length>0?this._visibleEntries.forEach(n=>n.toggleVisibility(this._visibility,!1)):this._children.forEach(n=>n.toggleVisibility(this._visibility,!1)):this._children.forEach(n=>n.toggleVisibility(this._visibility,!1)):this._visibility?this._lastVisible!==void 0?this._lastVisible.toggleVisibility(!0):this._children[0].toggleVisibility(!0):(this._lastVisible=this._children.find(n=>n.visibility),this._lastVisible?.toggleVisibility(!1)),this._parent instanceof Po&&r&&this._parent.checkVisibility(this))}}var gn=(e=>(e.Group="LegendGroup",e.Set="VisibilitySet",e.Entry="LegendEntry",e.Info="InfoSection",e.Placeholder="Placeholder",e.Error="Error",e))(gn||{});const WR=function(e,t){if(t(e))return e;{let r;return e.children.some(i=>(r=WR(i,t),r!==void 0)),r}},zVe={getChildById:e=>t=>WR(e,r=>r.id===t),getChildByUid:e=>t=>WR(e,r=>r.uid===t),getAllExpanded:(e,t)=>e.children.every(r=>!(r instanceof Po)||_oe(r,t)),getAllVisibility:(e,t)=>e.children.every(r=>woe(r,t))},BVe={ADD_ITEM:(e,t)=>{e.children=[...e.children,t]},REMOVE_LAYER_ENTRY:(e,t)=>{const r=i=>(i=i.filter(n=>(n instanceof M3&&n.layerUID===t&&n.remove(),n instanceof Po||n.layerUID!==t)),i.filter(n=>n instanceof Po).forEach(n=>{n.children=r(n.children)}),i=i.filter(n=>n instanceof M3||n.children.length!==0),i);e.children=r(e.children)},RELOAD_LAYER_ENTRY:(e,t)=>{const r=i=>(i.filter(n=>n instanceof M3&&n.layerUID===t).forEach(n=>{n.reload()}),i.filter(n=>n instanceof Po).forEach(n=>{n.children=r(n.children)}),i);e.children=r(e.children)}},GVe={expandGroups:e=>{e.state.children.forEach(t=>{sw(t,{expand:!0})})},collapseGroups:e=>{e.state.children.forEach(t=>{sw(t,{expand:!1})})},showAll:e=>{e.state.children.forEach(t=>{sw(t,{visibility:!0})})},hideAll:e=>{e.state.children.forEach(t=>{sw(t,{visibility:!1})})},addItem:(e,t)=>{e.commit("ADD_ITEM",t)},removeLayerEntry:(e,t)=>{e.commit("REMOVE_LAYER_ENTRY",t)},reloadLayerEntry:(e,t)=>{e.commit("RELOAD_LAYER_ENTRY",t)}};function woe(e,t){return e.children&&e.children.length>0&&e.children.forEach(r=>{if(!woe(r,t))return!1}),!e.visibility&&!(e.parent instanceof Po&&e.parent.visibility)?!1:e.visibility===t}function _oe(e,t){return e.children&&e.children.length>0&&e.children.forEach(r=>{if(!_oe(r,t))return!1}),!(e instanceof Po&&e.expanded===t)}function sw(e,t){const r=t.visibility,i=t.expand;r!==void 0&&(e.parent instanceof Po&&e.parent.visibility===r||e.toggleVisibility(r)),i!==void 0&&e instanceof Po&&e.toggleExpanded(i),e.children&&e.children.length>0&&e.children.forEach(n=>{sw(n,t)})}var JR=(e=>(e.children="legend/children",e.headerControls="legend/headerControls",e.getChildById="legend/getChildById",e.expandGroups="legend/expandGroups",e.collapseGroups="legend/collapseGroups",e.showAll="legend/showAll",e.hideAll="legend/hideAll",e.addItem="legend/addItem!",e.removeLayerEntry="legend/removeLayerEntry",e.reloadLayerEntry="legend/reloadLayerEntry",e))(JR||{});function Ait(){const e=new UVe;return{namespaced:!0,state:e,getters:{...zVe},actions:{...GVe,...gs.actions(e)},mutations:{...BVe,...gs.mutations(e)}}}class qVe{grids={};panel=null;currentUid=null}var xoe=(e=>(e.addGrid="addGrid",e.removeGrid="removeGrid",e))(xoe||{});const HVe={get:e=>t=>e.grids[t]},WVe={addGrid(e,t){e.commit("ADD_GRID",t)},removeGrid(e,t){e.commit("REMOVE_GRID",t)}},JVe={ADD_GRID(e,t){e.grids={...e.grids,[t.uid]:t}},REMOVE_GRID(e,t){e.grids[t]!==void 0&&delete e.grids[t]}};var ZR=(e=>(e.grids="grid/grids",e.currentUid="grid/currentUid",e))(ZR||{});function Cit(){const e=new qVe;return{namespaced:!0,state:e,getters:{...HVe},actions:{...WVe},mutations:{...JVe,...gs.mutations(["grids","currentUid"])}}}function k0(e,t,r,i){var n,s=!1,o=0;function a(){n&&clearTimeout(n)}function l(){a(),s=!0}typeof t!="boolean"&&(i=r,r=t,t=void 0);function u(){for(var h=arguments.length,d=new Array(h),f=0;f<h;f++)d[f]=arguments[f];var m=this,g=Date.now()-o;if(s)return;function b(){o=Date.now(),r.apply(m,d)}function w(){n=void 0}i&&!n&&b(),a(),i===void 0&&g>e?b():t!==!0&&(n=setTimeout(i?w:b,i===void 0?e-g:e))}return u.cancel=l,u}function YR(e,t,r){return r===void 0?k0(e,t,!1):k0(e,r,t!==!1)}class ZVe{attribution;scale;cursorCoords;constructor(t,r,i){this.attribution=t,this.scale=r,this.cursorCoords=i}}const YVe={},KVe={setAttribution:(e,t)=>{e.commit("SET_ATTRIBUTION",t)},setCursorCoords:(e,t)=>{e.commit("SET_CURSOR_COORDS",t)},setScale:(e,t)=>{e.commit("SET_SCALE",t)},toggleScale:(e,t)=>{e.commit("TOGGLE_SCALE",t)}},XVe={SET_ATTRIBUTION:(e,t)=>{e.attribution=t},SET_CURSOR_COORDS:(e,t)=>{e.cursorCoords=t},SET_SCALE:(e,t)=>{e.scale=t},TOGGLE_SCALE:(e,t)=>{t!==void 0?e.scale.isImperialScale=t:e.scale.isImperialScale=!e.scale.isImperialScale}};var Cs=(e=>(e.attribution="mapcaption/attribution",e.setAttribution="mapcaption/setAttribution!",e.cursorCoords="mapcaption/cursorCoords",e.setCursorCoords="mapcaption/setCursorCoords!",e.scale="mapcaption/scale",e.setScale="mapcaption/setScale!",e.toggleScale="mapcaption/toggleScale!",e))(Cs||{});function QVe(){const e=new ZVe({text:{},logo:{}},{},{});return{namespaced:!0,state:e,getters:{...YVe},actions:{...KVe,...gs.actions(e)},mutations:{...XVe,...gs.mutations(e)}}}class eUe{config;activeBasemapConfig;registeredConfigs;registeredLangs;constructor(t){this.config=t,this.registeredConfigs={},this.registeredLangs={}}}class tUe{layers;layerConfigs;constructor(t,r){this.layers=t,this.layerConfigs=r}}const TG=(e,t)=>{let r=[...e];for(;r.length>0;){const i=r.shift();if(t(i))return i;i&&r.push(...i.sublayers)}},rUe={getLayerByUid:e=>t=>TG(e.layers,r=>r?.uid===t),getLayerById:e=>t=>TG(e.layers,r=>r?.id===t)},iUe={addLayerConfigs:(e,t)=>{!Array.isArray(t)||t.forEach(r=>{e.commit("ADD_LAYER_CONFIG",r)})},reorderLayer:(e,{layer:t,index:r})=>{e.commit("REORDER_LAYER",{layer:t,index:r})},addLayers:(e,t)=>{!Array.isArray(t)||t.forEach(r=>{e.commit("ADD_LAYER",r)})},removeLayer:(e,t)=>{e.commit("REMOVE_LAYER",t)},removeLayerConfig:(e,t)=>{e.commit("REMOVE_LAYER_CONFIG",t)}},nUe={ADD_LAYER_CONFIG:(e,t)=>{e.layerConfigs=[...e.layerConfigs,t]},ADD_LAYER:(e,t)=>{e.layers=[...e.layers,t]},REORDER_LAYER:(e,{layer:t,index:r=e.layers.length})=>{const i=e.layers.findIndex(n=>n.uid===t.uid);i!==-1&&i!==r&&(e.layers.splice(i,1),e.layers.splice(r,0,t),e.layers=[...e.layers])},REMOVE_LAYER:(e,t)=>{const r=e.layers.filter(i=>i.id!==t.id||i.uid!==t.uid);e.layers=r},REMOVE_LAYER_CONFIG:(e,t)=>{const r=e.layerConfigs.filter(i=>i.id!==t);e.layerConfigs=r}};var ks=(e=>(e.getLayerByUid="layer/getLayerByUid",e.getLayerById="layer/getLayerById",e.layers="layer/layers",e.reorderLayer="layer/reorderLayer!",e.addLayers="layer/addLayers!",e.removeLayer="layer/removeLayer!",e.layerConfigs="layer/layerConfigs",e.addLayerConfigs="layer/addLayerConfigs!",e.removeLayerConfig="layer/removeLayerConfig!",e))(ks||{});function sUe(){const e=new tUe([],[]);return{namespaced:!0,state:e,getters:{...rUe},actions:{...iUe,...gs.actions(e)},mutations:{...nUe,...gs.mutations(e)}}}const oUe={getRegisteredConfigs:e=>e.registeredConfigs,getRegisteredLangs:e=>e.registeredLangs,getActiveConfig:e=>t=>{if(e.registeredConfigs[t]===void 0)throw new Error("Unsupported language or no registered config exists for requested language");return e.registeredConfigs[t]},getMapConfig:e=>e.config.map,getActiveBasemapConfig:e=>e.activeBasemapConfig,getFixtureConfig:e=>t=>e.config.fixtures[t]},aUe={newConfig:function(e,t){e.commit("SET_CONFIG",t),console.log("new config adding layers",t.layers),this.set(ks.addLayerConfigs,t.layers)},registerConfig:function(e,t){const r=t.configLangs,i=t.config,n=t.allLangs;n!==void 0&&n.length>0&&n.forEach(s=>{e.state.registeredConfigs[s]=i,e.state.registeredLangs[s]=Object.keys(e.state.registeredConfigs)[0]}),r!==void 0&&r.length>0&&r.forEach(s=>{e.state.registeredConfigs[s]=i,e.state.registeredLangs[s]=s})},updateConfig:function(e,t){const r={fixtures:{...e.state.config.fixtures,...t}},i={...e.state.config,...r};e.dispatch("registerConfig",i),e.commit("SET_CONFIG",i)},setActiveBasemap:function(e,t){e.state.activeBasemapConfig=t}},lUe={};var ls=(e=>(e.newConfig="config/newConfig!",e.registerConfig="config/registerConfig!",e.updateConfig="config/updateConfig!",e.setActiveBasemap="config/setActiveBasemap!",e.getRegisteredConfigs="config/getRegisteredConfigs",e.getRegisteredLangs="config/getRegisteredLangs",e.getActiveConfig="config/getActiveConfig",e.getMapConfig="config/getMapConfig",e.getActiveBasemapConfig="config/getActiveBasemapConfig",e.getFixtureConfig="config/getFixtureConfig",e))(ls||{});function uUe(){const e=new eUe({config:{map:{lods:[],extent:{xmin:0,xmax:0,ymin:0,ymax:0,spatialReference:{}},basemaps:[],initialBasemapId:""},layers:[]}});return{namespaced:!0,state:e,getters:{...oUe},actions:{...aUe,...gs.actions(e)},mutations:{...lUe,...gs.mutations(e)}}}class kit{id;template;componentId;constructor(t){const r={...typeof t=="string"?{id:t,template:""}:t};({template:this.template,id:this.id}=r)}}class cUe{payload=[];templates={};defaultTemplates={}}const hUe={},dUe={setPayload(e,t){e.commit("SET_PAYLOAD",t)},removeLayer(e,t){e.commit("REMOVE_LAYER",t)}},pUe={SET_PAYLOAD(e,t){e.payload=t},REMOVE_LAYER(e,t){const r=e.payload.findIndex(i=>i.uid===t.uid);r!==-1&&e.payload.splice(r,1)}};var Soe=(e=>(e.payload="details/payload",e.templates="details/templates",e.defaultTemplates="details/defaultTemplates",e.setPayload="details/setPayload!",e.removeLayer="details/removeLayer!",e))(Soe||{});function Oit(){const e=new cUe;return{namespaced:!0,state:e,getters:{...hUe},actions:{...dUe},mutations:{...pUe,...gs.mutations(e)}}}var vt=(e=>(e.COMPONENT="ramp/component",e.CONFIG_CHANGE="config/configchanged",e.DETAILS_CLOSED="details/closed",e.DETAILS_OPEN="details/open",e.FILTER_CHANGE="filter/change",e.FIXTURE_ADDED="fixture/added",e.FIXTURE_REMOVED="fixture/removed",e.GRID_TOGGLE="grid/toggle",e.HELP_TOGGLE="help/toggle",e.LAYER_DRAWSTATECHANGE="layer/drawstatechange",e.LAYER_OPACITYCHANGE="layer/opacitychange",e.LAYER_REGISTERED="layer/registered",e.LAYER_RELOAD_END="layer/reloadend",e.LAYER_RELOAD_START="layer/reloadstart",e.LAYER_REMOVE="layer/remove",e.LAYER_STATECHANGE="layer/statechange",e.LAYER_VISIBILITYCHANGE="layer/visibilitychange",e.MAP_BASEMAPCHANGE="map/basemapchanged",e.MAP_BLUR="map/blur",e.MAP_CLICK="map/click",e.MAP_CREATED="map/created",e.MAP_DESTROYED="map/destroyed",e.MAP_DOUBLECLICK="map/doubleclick",e.MAP_EXTENTCHANGE="map/extentchanged",e.MAP_GRAPHICHIT="map/graphichit",e.MAP_IDENTIFY="map/identify",e.MAP_KEYDOWN="map/keydown",e.MAP_KEYUP="map/keyup",e.MAP_MOUSEDOWN="map/mousedown",e.MAP_MOUSEMOVE="map/mousemove",e.MAP_MOUSEMOVE_END="map/mousemoveend",e.MAP_MOUSEMOVE_START="map/mousemovestart",e.MAP_REFRESH_END="map/refreshend",e.MAP_REFRESH_START="map/refreshstart",e.MAP_REORDER="map/reorder",e.MAP_RESIZED="map/resized",e.MAP_SCALECHANGE="map/scalechanged",e.MAP_START="map/start",e.METADATA_OPEN="metadata/open",e.PANEL_CLOSED="panel/closed",e.PANEL_OPENED="panel/opened",e.REORDER_OPEN="reorder/open",e.SETTINGS_TOGGLE="settings/toggle",e.USER_LAYER_ADDED="user/layeradded",e.WIZARD_OPEN="wizard/open",e))(vt||{});class fUe{eventName;handlerName;handlerFunc;constructor(t,r,i){this.eventName=t,this.handlerName=r,this.handlerFunc=i}}class mUe extends Gi{_eventBus;_eventRegister;_nameRegister;_funCounter;constructor(t){super(t),this._eventBus=new _De,this._eventRegister=[],this._funCounter=1,this._nameRegister=Object.values(vt).filter(r=>typeof r=="string"&&r.indexOf("/")>-1)}findHandler(t){return this._eventRegister.find(r=>r.handlerName===t)}handlerNamer(t){return this._funCounter++,t.replace(/\//g,"_")+this._funCounter.toString()}registerEventName(t){(Array.isArray(t)?t:[t]).forEach(i=>{this._nameRegister.indexOf(i)===-1&&this._nameRegister.push(i)})}eventNames(){return this._nameRegister.slice()}on(t,r,i=""){if(this.findHandler(i))throw new Error("Duplicate handler name registration: "+i);i||(i=this.handlerNamer(t));const n=new fUe(t,i,r);return this._eventRegister.push(n),this._eventBus.on(t,r),i}off(t){const r=this.findHandler(t);r&&(this._eventRegister.splice(this._eventRegister.indexOf(r),1),this._eventBus.off(r.eventName,r.handlerFunc))}offAll(t=""){this.activeHandlers(t).forEach(i=>this.off(i))}emit(t,...r){this._eventBus.emit(t,...r)}once(t,r,i=""){i||(i=this.handlerNamer(t));const n=(...s)=>{r(...s),this.off(i)};return this.on(t,n,i)}activeHandlers(t=""){return t===""?this._eventRegister.map(r=>r.handlerName):this._eventRegister.filter(r=>r.eventName===t).map(r=>r.handlerName)}addDefaultEvents(t){return(!Array.isArray(t)||t.length===0)&&(t=["appbar_adds_panel_button","appbar_removes_panel_button","ramp_map_click_runs_identify","ramp_map_keydown","ramp_map_keyup","ramp_map_blur","ramp_identify_opens_details","ramp_settings_toggles_panel","opens_feature_details","toggles_help_panel","toggles_grid_panel","opens_wizard_panel","opens_layer_reorder_panel","opens_metadata_panel","updates_legend_layer_register","updates_legend_wizard_added","updates_legend_layer_reload","updates_map_caption_attribution_basemap","updates_map_caption_attribution_config","updates_map_caption_attribution_map_created","updates_map_caption_scale","checks_maptip_mouse_move","checks_maptip_extent_change","show_default_maptip","updates_map_caption_coords","legend_removes_layer_entry","legend_reloads_layer_entry","grid_removes_layer_grid","details_removes_layer"]),t.map(r=>this.defaultHandlerFactory(r))}defaultHandlerFactory(t){let r;switch(t){case"appbar_adds_panel_button":r=i=>{this.$iApi.fixture.get("appbar")&&!this.$iApi.$vApp.$store.get("appbar/order").flat().find(n=>n===i.id)&&this.$iApi.$vApp.$store.dispatch(`appbar/${HR.ADD_TEMP_BUTTON}`,i.id)},this.on("panel/opened",r,t);break;case"appbar_removes_panel_button":r=i=>{this.$iApi.fixture.get("appbar")&&!this.$iApi.$vApp.$store.get("appbar/order").flat().find(n=>n===i.id)&&this.$iApi.$vApp.$store.dispatch(`appbar/${HR.REMOVE_BUTTON}`,i.id)},this.on("panel/closed",r,t);break;case"ramp_map_click_runs_identify":r=i=>{i.button===0&&this.$iApi.geo.map.runIdentify(i)},this.on("map/click",r,t);break;case"ramp_identify_opens_details":r=i=>{const n=this.$iApi.fixture.get("details");n&&n.openDetails(i.results)},this.on("map/identify",r,t);break;case"ramp_settings_toggles_panel":r=i=>{const n=this.$iApi.fixture.get("settings");n&&n.toggleSettings(i)},this.$iApi.event.on("settings/toggle",r,t);break;case"opens_feature_details":r=i=>{const n=this.$iApi.fixture.get("details");n&&n.openFeature(i)},this.$iApi.event.on("details/open",r,t);break;case"toggles_help_panel":r=i=>{const n=this.$iApi.fixture.get("help");n&&n.toggleHelp(i)},this.$iApi.event.on("help/toggle",r,t);break;case"toggles_grid_panel":r=(i,n)=>{const s=this.$iApi.fixture.get("grid");s&&s.toggleGrid(i,n)},this.$iApi.event.on("grid/toggle",r,t);break;case"opens_wizard_panel":r=()=>{const i=this.$iApi.fixture.get("wizard");i&&i.openWizard()},this.$iApi.event.on("wizard/open",r,t);break;case"opens_layer_reorder_panel":r=()=>{const i=this.$iApi.fixture.get("layer-reorder");i&&i.openLayerReorder()},this.$iApi.event.on("reorder/open",r,t);break;case"opens_metadata_panel":r=i=>{const n=this.$iApi.fixture.get("metadata");n&&n.toggleMetadata(i)},this.$iApi.event.on("metadata/open",r,t);break;case"updates_legend_layer_register":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(i)},this.$iApi.event.on("layer/registered",r,t);break;case"updates_legend_wizard_added":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.generateLegend(i)},this.$iApi.event.on("user/layeradded",r,t);break;case"updates_legend_layer_reload":r=i=>{const n=this.$iApi.fixture.get("legend");n&&n.updateLegend(i)},this.$iApi.event.on("layer/reloadend",r,t);break;case"ramp_map_keydown":r=i=>{this.$iApi.geo.map.mapKeyDown(i)},this.$iApi.event.on("map/keydown",r,t);break;case"ramp_map_keyup":r=i=>{this.$iApi.geo.map.mapKeyUp(i)},this.$iApi.event.on("map/keyup",r,t);break;case"ramp_map_blur":r=i=>{this.$iApi.geo.map.stopKeyPan()},this.$iApi.event.on("map/blur",r,t);break;case"updates_map_caption_attribution_basemap":r=()=>{this.$iApi.geo.map.caption.updateAttribution(this.$iApi.$vApp.$store.get(ls.getActiveBasemapConfig)?.attribution)},this.$iApi.event.on("map/basemapchanged",r,t);break;case"updates_map_caption_attribution_config":r=i=>{let n=i.map.basemaps.find(s=>s.id===this.$iApi.geo.map.getCurrentBasemapId());this.$iApi.geo.map.caption.updateAttribution(n?.attribution)},this.$iApi.event.on("config/configchanged",r,t);break;case"updates_map_caption_attribution_map_created":r=()=>{this.$iApi.geo.map.caption.updateAttribution(this.$iApi.$vApp.$store.get(ls.getActiveBasemapConfig)?.attribution)},this.$iApi.event.on("map/created",r,t);break;case"updates_map_caption_scale":this.$iApi.event.on("map/scalechanged",YR(300,()=>this.$iApi.geo.map.caption.updateScale()),t);break;case"checks_maptip_mouse_move":r=i=>{this.$iApi.geo.map.maptip.checkAtCoord({screenX:i.screenX,screenY:i.screenY})},this.$iApi.event.on("map/mousemove",k0(200,i=>r(i)),t);break;case"checks_maptip_extent_change":r=()=>{if(this.$iApi.geo.map.keysActive){let i=this.$iApi.geo.map.mapPointToScreenPoint(this.$iApi.geo.map.getExtent().center());this.$iApi.geo.map.maptip.checkAtCoord(i)}else this.$iApi.geo.map.maptip.clear()},this.$iApi.event.on("map/extentchanged",k0(50,!0,()=>r()),t);break;case"show_default_maptip":r=i=>{this.$iApi.geo.map.maptip.generateDefaultMaptip(i)},this.$iApi.event.on("map/graphichit",r,t);break;case"updates_map_caption_coords":this.$iApi.event.on("map/mousemove",k0(200,i=>{this.$iApi.$vApp.$store.get(Cs.cursorCoords)?.disabled||this.$iApi.geo.map.caption.formatPoint(this.$iApi.geo.map.screenPointToMapPoint(i)).then(s=>{this.$iApi.$vApp.$store.set(Cs.setCursorCoords,{formattedString:s})})}),t);break;case"legend_removes_layer_entry":r=i=>{this.$iApi.fixture.get("legend")&&(this.$iApi.$vApp.$store.dispatch(JR.removeLayerEntry,i.uid),this.$iApi.updateAlert(this.$vApp.$t("legend.alert.layerRemoved",{name:i.name})))},this.$iApi.event.on("layer/remove",r,t);break;case"legend_reloads_layer_entry":r=i=>{this.$iApi.fixture.get("legend")&&this.$iApi.$vApp.$store.dispatch(JR.reloadLayerEntry,i.uid)},this.$iApi.event.on("layer/reloadstart",r,t);break;case"grid_removes_layer_grid":r=i=>{if(this.$iApi.fixture.get("grid")){this.$vApp.$store.dispatch(`grid/${xoe.removeGrid}`,i.uid);const n=this.$vApp.$store.get(ZR.currentUid);if(i.uid===n){const s=this.$iApi.panel.get("grid");s.isOpen&&this.$iApi.panel.close(s),this.$vApp.$store.set(ZR.currentUid,null)}}},this.$iApi.event.on("layer/remove",r,t);break;case"details_removes_layer":r=i=>{this.$iApi.fixture.get("details")&&this.$iApi.$vApp.$store.set(Soe.removeLayer,i)},this.$iApi.event.on("layer/remove",r,t);break;default:return console.error(`Unrecognized default event handler name encountered: ${t}`),`ERROR_NOT_REGISTERED__${t}`}return t}}/*!
  * @intlify/shared v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const sy=typeof window<"u";let Io,oy;{const e=sy&&window.performance;e&&e.mark&&e.measure&&e.clearMarks&&e.clearMeasures&&(Io=t=>e.mark(t),oy=(t,r,i)=>{e.measure(t,r,i),e.clearMarks(r),e.clearMarks(i)})}const yUe=/\{([0-9a-zA-Z]+)\}/g;function CE(e,...t){return t.length===1&&nn(t[0])&&(t=t[0]),(!t||!t.hasOwnProperty)&&(t={}),e.replace(yUe,(r,i)=>t.hasOwnProperty(i)?t[i]:"")}const gUe=typeof Symbol=="function"&&typeof Symbol.toStringTag=="symbol",Ah=e=>gUe?Symbol(e):e,vUe=(e,t,r)=>bUe({l:e,k:t,s:r}),bUe=e=>JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),Qi=e=>typeof e=="number"&&isFinite(e),wUe=e=>zD(e)==="[object Date]",gv=e=>zD(e)==="[object RegExp]",kE=e=>Ot(e)&&Object.keys(e).length===0;function Ns(e,t){typeof console<"u"&&(console.warn("[intlify] "+e),t&&console.warn(t.stack))}const rn=Object.assign;let $G;const c0=()=>$G||($G=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function EG(e){return e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const _Ue=Object.prototype.hasOwnProperty;function Moe(e,t){return _Ue.call(e,t)}const oi=Array.isArray,en=e=>typeof e=="function",qe=e=>typeof e=="string",dr=e=>typeof e=="boolean",nn=e=>e!==null&&typeof e=="object",Ioe=Object.prototype.toString,zD=e=>Ioe.call(e),Ot=e=>zD(e)==="[object Object]",xUe=e=>e==null?"":oi(e)||Ot(e)&&e.toString===Ioe?JSON.stringify(e,null,2):String(e),AG=2;function SUe(e,t=0,r=e.length){const i=e.split(/\r?\n/);let n=0;const s=[];for(let o=0;o<i.length;o++)if(n+=i[o].length+1,n>=t){for(let a=o-AG;a<=o+AG||r>n;a++){if(a<0||a>=i.length)continue;const l=a+1;s.push(`${l}${" ".repeat(3-String(l).length)}|  ${i[a]}`);const u=i[a].length;if(a===o){const h=t-(n-u)+1,d=Math.max(1,r>n?u-h:r-t);s.push("   |  "+" ".repeat(h)+"^".repeat(d))}else if(a>o){if(r>n){const h=Math.max(Math.min(r-n,u),1);s.push("   |  "+"^".repeat(h))}n+=u+1}}break}return s.join(`
`)}function BD(){const e=new Map;return{events:e,on(r,i){const n=e.get(r);n&&n.push(i)||e.set(r,[i])},off(r,i){const n=e.get(r);n&&n.splice(n.indexOf(i)>>>0,1)},emit(r,i){(e.get(r)||[]).slice().map(n=>n(i)),(e.get("*")||[]).slice().map(n=>n(r,i))}}}/*!
  * @intlify/message-resolver v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const MUe=Object.prototype.hasOwnProperty;function IUe(e,t){return MUe.call(e,t)}const I3=e=>e!==null&&typeof e=="object",Ap=[];Ap[0]={w:[0],i:[3,0],["["]:[4],o:[7]};Ap[1]={w:[1],["."]:[2],["["]:[4],o:[7]};Ap[2]={w:[2],i:[3,0],["0"]:[3,0]};Ap[3]={i:[3,0],["0"]:[3,0],w:[1,1],["."]:[2,1],["["]:[4,1],o:[7,1]};Ap[4]={["'"]:[5,0],['"']:[6,0],["["]:[4,2],["]"]:[1,3],o:8,l:[4,0]};Ap[5]={["'"]:[4,0],o:8,l:[5,0]};Ap[6]={['"']:[4,0],o:8,l:[6,0]};const TUe=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function $Ue(e){return TUe.test(e)}function EUe(e){const t=e.charCodeAt(0),r=e.charCodeAt(e.length-1);return t===r&&(t===34||t===39)?e.slice(1,-1):e}function AUe(e){if(e==null)return"o";switch(e.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return e;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function CUe(e){const t=e.trim();return e.charAt(0)==="0"&&isNaN(parseInt(e))?!1:$Ue(t)?EUe(t):"*"+t}function kUe(e){const t=[];let r=-1,i=0,n=0,s,o,a,l,u,h,d;const f=[];f[0]=()=>{o===void 0?o=a:o+=a},f[1]=()=>{o!==void 0&&(t.push(o),o=void 0)},f[2]=()=>{f[0](),n++},f[3]=()=>{if(n>0)n--,i=4,f[0]();else{if(n=0,o===void 0||(o=CUe(o),o===!1))return!1;f[1]()}};function m(){const g=e[r+1];if(i===5&&g==="'"||i===6&&g==='"')return r++,a="\\"+g,f[0](),!0}for(;i!==null;)if(r++,s=e[r],!(s==="\\"&&m())){if(l=AUe(s),d=Ap[i],u=d[l]||d.l||8,u===8||(i=u[0],u[1]!==void 0&&(h=f[u[1]],h&&(a=s,h()===!1))))return;if(i===7)return t}}const CG=new Map;function IT(e,t){if(!I3(e))return null;let r=CG.get(t);if(r||(r=kUe(t),r&&CG.set(t,r)),!r)return null;const i=r.length;let n=e,s=0;for(;s<i;){const o=n[r[s]];if(o===void 0)return null;n=o,s++}return n}function KR(e){if(!I3(e))return e;for(const t in e)if(!!IUe(e,t))if(!t.includes("."))I3(e[t])&&KR(e[t]);else{const r=t.split("."),i=r.length-1;let n=e;for(let s=0;s<i;s++)r[s]in n||(n[r[s]]={}),n=n[r[s]];n[r[i]]=e[t],delete e[t],I3(n[r[i]])&&KR(n[r[i]])}return e}/*!
  * @intlify/runtime v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const OUe=e=>e,PUe=e=>"",RUe="text",LUe=e=>e.length===0?"":e.join(""),NUe=xUe;function kG(e,t){return e=Math.abs(e),t===2?e?e>1?1:0:1:e?Math.min(e,2):0}function DUe(e){const t=Qi(e.pluralIndex)?e.pluralIndex:-1;return e.named&&(Qi(e.named.count)||Qi(e.named.n))?Qi(e.named.count)?e.named.count:Qi(e.named.n)?e.named.n:t:t}function FUe(e,t){t.count||(t.count=e),t.n||(t.n=e)}function jUe(e={}){const t=e.locale,r=DUe(e),i=nn(e.pluralRules)&&qe(t)&&en(e.pluralRules[t])?e.pluralRules[t]:kG,n=nn(e.pluralRules)&&qe(t)&&en(e.pluralRules[t])?kG:void 0,s=w=>w[i(r,w.length,n)],o=e.list||[],a=w=>o[w],l=e.named||{};Qi(e.pluralIndex)&&FUe(r,l);const u=w=>l[w];function h(w){const _=en(e.messages)?e.messages(w):nn(e.messages)?e.messages[w]:!1;return _||(e.parent?e.parent.message(w):PUe)}const d=w=>e.modifiers?e.modifiers[w]:OUe,f=Ot(e.processor)&&en(e.processor.normalize)?e.processor.normalize:LUe,m=Ot(e.processor)&&en(e.processor.interpolate)?e.processor.interpolate:NUe,g=Ot(e.processor)&&qe(e.processor.type)?e.processor.type:RUe,b={list:a,named:u,plural:s,linked:(w,_)=>{const x=h(w)(b);return qe(_)?d(_)(x):x},message:h,type:g,interpolate:m,normalize:f};return b}/*!
  * @intlify/message-compiler v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const VUe={[0]:"Expected token: '{0}'",[1]:"Invalid token in placeholder: '{0}'",[2]:"Unterminated single quote in placeholder",[3]:"Unknown escape sequence: \\{0}",[4]:"Invalid unicode escape sequence: {0}",[5]:"Unbalanced closing brace",[6]:"Unterminated closing brace",[7]:"Empty placeholder",[8]:"Not allowed nest placeholder",[9]:"Invalid linked format",[10]:"Plural must have messages",[11]:"Unexpected empty linked modifier",[12]:"Unexpected empty linked key",[13]:"Unexpected lexical analysis in token: '{0}'"};function OE(e,t,r={}){const{domain:i,messages:n,args:s}=r,o=CE((n||VUe)[e]||"",...s||[]),a=new SyntaxError(String(o));return a.code=e,t&&(a.location=t),a.domain=i,a}function UUe(e){throw e}function zUe(e,t,r){return{line:e,column:t,offset:r}}function XR(e,t,r){const i={start:e,end:t};return r!=null&&(i.source=r),i}const cc=" ",BUe="\r",ts=`
`,GUe=String.fromCharCode(8232),qUe=String.fromCharCode(8233);function HUe(e){const t=e;let r=0,i=1,n=1,s=0;const o=E=>t[E]===BUe&&t[E+1]===ts,a=E=>t[E]===ts,l=E=>t[E]===qUe,u=E=>t[E]===GUe,h=E=>o(E)||a(E)||l(E)||u(E),d=()=>r,f=()=>i,m=()=>n,g=()=>s,b=E=>o(E)||l(E)||u(E)?ts:t[E],w=()=>b(r),_=()=>b(r+s);function x(){return s=0,h(r)&&(i++,n=0),o(r)&&r++,r++,n++,t[r]}function I(){return o(r+s)&&s++,s++,t[r+s]}function S(){r=0,i=1,n=1,s=0}function T(E=0){s=E}function $(){const E=r+s;for(;E!==r;)x();s=0}return{index:d,line:f,column:m,peekOffset:g,charAt:b,currentChar:w,currentPeek:_,next:x,peek:I,reset:S,resetPeek:T,skipToPeek:$}}const Yh=void 0,OG="'",WUe="tokenizer";function JUe(e,t={}){const r=t.location!==!1,i=HUe(e),n=()=>i.index(),s=()=>zUe(i.line(),i.column(),i.index()),o=s(),a=n(),l={currentType:14,offset:a,startLoc:o,endLoc:o,lastType:14,lastOffset:a,lastStartLoc:o,lastEndLoc:o,braceNest:0,inLinked:!1,text:""},u=()=>l,{onError:h}=t;function d(X,te,he,...V){const J=u();if(te.column+=he,te.offset+=he,h){const ne=XR(J.startLoc,te),pe=OE(X,ne,{domain:WUe,args:V});h(pe)}}function f(X,te,he){X.endLoc=s(),X.currentType=te;const V={type:te};return r&&(V.loc=XR(X.startLoc,X.endLoc)),he!=null&&(V.value=he),V}const m=X=>f(X,14);function g(X,te){return X.currentChar()===te?(X.next(),te):(d(0,s(),0,te),"")}function b(X){let te="";for(;X.currentPeek()===cc||X.currentPeek()===ts;)te+=X.currentPeek(),X.peek();return te}function w(X){const te=b(X);return X.skipToPeek(),te}function _(X){if(X===Yh)return!1;const te=X.charCodeAt(0);return te>=97&&te<=122||te>=65&&te<=90||te===95}function x(X){if(X===Yh)return!1;const te=X.charCodeAt(0);return te>=48&&te<=57}function I(X,te){const{currentType:he}=te;if(he!==2)return!1;b(X);const V=_(X.currentPeek());return X.resetPeek(),V}function S(X,te){const{currentType:he}=te;if(he!==2)return!1;b(X);const V=X.currentPeek()==="-"?X.peek():X.currentPeek(),J=x(V);return X.resetPeek(),J}function T(X,te){const{currentType:he}=te;if(he!==2)return!1;b(X);const V=X.currentPeek()===OG;return X.resetPeek(),V}function $(X,te){const{currentType:he}=te;if(he!==8)return!1;b(X);const V=X.currentPeek()===".";return X.resetPeek(),V}function E(X,te){const{currentType:he}=te;if(he!==9)return!1;b(X);const V=_(X.currentPeek());return X.resetPeek(),V}function C(X,te){const{currentType:he}=te;if(!(he===8||he===12))return!1;b(X);const V=X.currentPeek()===":";return X.resetPeek(),V}function O(X,te){const{currentType:he}=te;if(he!==10)return!1;const V=()=>{const ne=X.currentPeek();return ne==="{"?_(X.peek()):ne==="@"||ne==="%"||ne==="|"||ne===":"||ne==="."||ne===cc||!ne?!1:ne===ts?(X.peek(),V()):_(ne)},J=V();return X.resetPeek(),J}function R(X){b(X);const te=X.currentPeek()==="|";return X.resetPeek(),te}function D(X,te=!0){const he=(J=!1,ne="",pe=!1)=>{const k=X.currentPeek();return k==="{"?ne==="%"?!1:J:k==="@"||!k?ne==="%"?!0:J:k==="%"?(X.peek(),he(J,"%",!0)):k==="|"?ne==="%"||pe?!0:!(ne===cc||ne===ts):k===cc?(X.peek(),he(!0,cc,pe)):k===ts?(X.peek(),he(!0,ts,pe)):!0},V=he();return te&&X.resetPeek(),V}function F(X,te){const he=X.currentChar();return he===Yh?Yh:te(he)?(X.next(),he):null}function z(X){return F(X,he=>{const V=he.charCodeAt(0);return V>=97&&V<=122||V>=65&&V<=90||V>=48&&V<=57||V===95||V===36})}function B(X){return F(X,he=>{const V=he.charCodeAt(0);return V>=48&&V<=57})}function y(X){return F(X,he=>{const V=he.charCodeAt(0);return V>=48&&V<=57||V>=65&&V<=70||V>=97&&V<=102})}function M(X){let te="",he="";for(;te=B(X);)he+=te;return he}function A(X){let te="";for(;;){const he=X.currentChar();if(he==="{"||he==="}"||he==="@"||he==="|"||!he)break;if(he==="%")if(D(X))te+=he,X.next();else break;else if(he===cc||he===ts)if(D(X))te+=he,X.next();else{if(R(X))break;te+=he,X.next()}else te+=he,X.next()}return te}function P(X){w(X);let te="",he="";for(;te=z(X);)he+=te;return X.currentChar()===Yh&&d(6,s(),0),he}function Y(X){w(X);let te="";return X.currentChar()==="-"?(X.next(),te+=`-${M(X)}`):te+=M(X),X.currentChar()===Yh&&d(6,s(),0),te}function Q(X){w(X),g(X,"'");let te="",he="";const V=ne=>ne!==OG&&ne!==ts;for(;te=F(X,V);)te==="\\"?he+=le(X):he+=te;const J=X.currentChar();return J===ts||J===Yh?(d(2,s(),0),J===ts&&(X.next(),g(X,"'")),he):(g(X,"'"),he)}function le(X){const te=X.currentChar();switch(te){case"\\":case"'":return X.next(),`\\${te}`;case"u":return re(X,te,4);case"U":return re(X,te,6);default:return d(3,s(),0,te),""}}function re(X,te,he){g(X,te);let V="";for(let J=0;J<he;J++){const ne=y(X);if(!ne){d(4,s(),0,`\\${te}${V}${X.currentChar()}`);break}V+=ne}return`\\${te}${V}`}function we(X){w(X);let te="",he="";const V=J=>J!=="{"&&J!=="}"&&J!==cc&&J!==ts;for(;te=F(X,V);)he+=te;return he}function _e(X){let te="",he="";for(;te=z(X);)he+=te;return he}function Ce(X){const te=(he=!1,V)=>{const J=X.currentChar();return J==="{"||J==="%"||J==="@"||J==="|"||!J||J===cc?V:J===ts?(V+=J,X.next(),te(he,V)):(V+=J,X.next(),te(!0,V))};return te(!1,"")}function Ne(X){w(X);const te=g(X,"|");return w(X),te}function ht(X,te){let he=null;switch(X.currentChar()){case"{":return te.braceNest>=1&&d(8,s(),0),X.next(),he=f(te,2,"{"),w(X),te.braceNest++,he;case"}":return te.braceNest>0&&te.currentType===2&&d(7,s(),0),X.next(),he=f(te,3,"}"),te.braceNest--,te.braceNest>0&&w(X),te.inLinked&&te.braceNest===0&&(te.inLinked=!1),he;case"@":return te.braceNest>0&&d(6,s(),0),he=st(X,te)||m(te),te.braceNest=0,he;default:let J=!0,ne=!0,pe=!0;if(R(X))return te.braceNest>0&&d(6,s(),0),he=f(te,1,Ne(X)),te.braceNest=0,te.inLinked=!1,he;if(te.braceNest>0&&(te.currentType===5||te.currentType===6||te.currentType===7))return d(6,s(),0),te.braceNest=0,pt(X,te);if(J=I(X,te))return he=f(te,5,P(X)),w(X),he;if(ne=S(X,te))return he=f(te,6,Y(X)),w(X),he;if(pe=T(X,te))return he=f(te,7,Q(X)),w(X),he;if(!J&&!ne&&!pe)return he=f(te,13,we(X)),d(1,s(),0,he.value),w(X),he;break}return he}function st(X,te){const{currentType:he}=te;let V=null;const J=X.currentChar();switch((he===8||he===9||he===12||he===10)&&(J===ts||J===cc)&&d(9,s(),0),J){case"@":return X.next(),V=f(te,8,"@"),te.inLinked=!0,V;case".":return w(X),X.next(),f(te,9,".");case":":return w(X),X.next(),f(te,10,":");default:return R(X)?(V=f(te,1,Ne(X)),te.braceNest=0,te.inLinked=!1,V):$(X,te)||C(X,te)?(w(X),st(X,te)):E(X,te)?(w(X),f(te,12,_e(X))):O(X,te)?(w(X),J==="{"?ht(X,te)||V:f(te,11,Ce(X))):(he===8&&d(9,s(),0),te.braceNest=0,te.inLinked=!1,pt(X,te))}}function pt(X,te){let he={type:14};if(te.braceNest>0)return ht(X,te)||m(te);if(te.inLinked)return st(X,te)||m(te);const V=X.currentChar();switch(V){case"{":return ht(X,te)||m(te);case"}":return d(5,s(),0),X.next(),f(te,3,"}");case"@":return st(X,te)||m(te);default:if(R(X))return he=f(te,1,Ne(X)),te.braceNest=0,te.inLinked=!1,he;if(D(X))return f(te,0,A(X));if(V==="%")return X.next(),f(te,4,"%");break}return he}function Pt(){const{currentType:X,offset:te,startLoc:he,endLoc:V}=l;return l.lastType=X,l.lastOffset=te,l.lastStartLoc=he,l.lastEndLoc=V,l.offset=n(),l.startLoc=s(),i.currentChar()===Yh?f(l,14):pt(i,l)}return{nextToken:Pt,currentOffset:n,currentPosition:s,context:u}}const ZUe="parser",YUe=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function KUe(e,t,r){switch(e){case"\\\\":return"\\";case"\\'":return"'";default:{const i=parseInt(t||r,16);return i<=55295||i>=57344?String.fromCodePoint(i):"\uFFFD"}}}function XUe(e={}){const t=e.location!==!1,{onError:r}=e;function i(_,x,I,S,...T){const $=_.currentPosition();if($.offset+=S,$.column+=S,r){const E=XR(I,$),C=OE(x,E,{domain:ZUe,args:T});r(C)}}function n(_,x,I){const S={type:_,start:x,end:x};return t&&(S.loc={start:I,end:I}),S}function s(_,x,I,S){_.end=x,S&&(_.type=S),t&&_.loc&&(_.loc.end=I)}function o(_,x){const I=_.context(),S=n(3,I.offset,I.startLoc);return S.value=x,s(S,_.currentOffset(),_.currentPosition()),S}function a(_,x){const I=_.context(),{lastOffset:S,lastStartLoc:T}=I,$=n(5,S,T);return $.index=parseInt(x,10),_.nextToken(),s($,_.currentOffset(),_.currentPosition()),$}function l(_,x){const I=_.context(),{lastOffset:S,lastStartLoc:T}=I,$=n(4,S,T);return $.key=x,_.nextToken(),s($,_.currentOffset(),_.currentPosition()),$}function u(_,x){const I=_.context(),{lastOffset:S,lastStartLoc:T}=I,$=n(9,S,T);return $.value=x.replace(YUe,KUe),_.nextToken(),s($,_.currentOffset(),_.currentPosition()),$}function h(_){const x=_.nextToken(),I=_.context(),{lastOffset:S,lastStartLoc:T}=I,$=n(8,S,T);return x.type!==12?(i(_,11,I.lastStartLoc,0),$.value="",s($,S,T),{nextConsumeToken:x,node:$}):(x.value==null&&i(_,13,I.lastStartLoc,0,Hl(x)),$.value=x.value||"",s($,_.currentOffset(),_.currentPosition()),{node:$})}function d(_,x){const I=_.context(),S=n(7,I.offset,I.startLoc);return S.value=x,s(S,_.currentOffset(),_.currentPosition()),S}function f(_){const x=_.context(),I=n(6,x.offset,x.startLoc);let S=_.nextToken();if(S.type===9){const T=h(_);I.modifier=T.node,S=T.nextConsumeToken||_.nextToken()}switch(S.type!==10&&i(_,13,x.lastStartLoc,0,Hl(S)),S=_.nextToken(),S.type===2&&(S=_.nextToken()),S.type){case 11:S.value==null&&i(_,13,x.lastStartLoc,0,Hl(S)),I.key=d(_,S.value||"");break;case 5:S.value==null&&i(_,13,x.lastStartLoc,0,Hl(S)),I.key=l(_,S.value||"");break;case 6:S.value==null&&i(_,13,x.lastStartLoc,0,Hl(S)),I.key=a(_,S.value||"");break;case 7:S.value==null&&i(_,13,x.lastStartLoc,0,Hl(S)),I.key=u(_,S.value||"");break;default:i(_,12,x.lastStartLoc,0);const T=_.context(),$=n(7,T.offset,T.startLoc);return $.value="",s($,T.offset,T.startLoc),I.key=$,s(I,T.offset,T.startLoc),{nextConsumeToken:S,node:I}}return s(I,_.currentOffset(),_.currentPosition()),{node:I}}function m(_){const x=_.context(),I=x.currentType===1?_.currentOffset():x.offset,S=x.currentType===1?x.endLoc:x.startLoc,T=n(2,I,S);T.items=[];let $=null;do{const O=$||_.nextToken();switch($=null,O.type){case 0:O.value==null&&i(_,13,x.lastStartLoc,0,Hl(O)),T.items.push(o(_,O.value||""));break;case 6:O.value==null&&i(_,13,x.lastStartLoc,0,Hl(O)),T.items.push(a(_,O.value||""));break;case 5:O.value==null&&i(_,13,x.lastStartLoc,0,Hl(O)),T.items.push(l(_,O.value||""));break;case 7:O.value==null&&i(_,13,x.lastStartLoc,0,Hl(O)),T.items.push(u(_,O.value||""));break;case 8:const R=f(_);T.items.push(R.node),$=R.nextConsumeToken||null;break}}while(x.currentType!==14&&x.currentType!==1);const E=x.currentType===1?x.lastOffset:_.currentOffset(),C=x.currentType===1?x.lastEndLoc:_.currentPosition();return s(T,E,C),T}function g(_,x,I,S){const T=_.context();let $=S.items.length===0;const E=n(1,x,I);E.cases=[],E.cases.push(S);do{const C=m(_);$||($=C.items.length===0),E.cases.push(C)}while(T.currentType!==14);return $&&i(_,10,I,0),s(E,_.currentOffset(),_.currentPosition()),E}function b(_){const x=_.context(),{offset:I,startLoc:S}=x,T=m(_);return x.currentType===14?T:g(_,I,S,T)}function w(_){const x=JUe(_,rn({},e)),I=x.context(),S=n(0,I.offset,I.startLoc);return t&&S.loc&&(S.loc.source=_),S.body=b(x),I.currentType!==14&&i(x,13,I.lastStartLoc,0,_[I.offset]||""),s(S,x.currentOffset(),x.currentPosition()),S}return{parse:w}}function Hl(e){if(e.type===14)return"EOF";const t=(e.value||"").replace(/\r?\n/gu,"\\n");return t.length>10?t.slice(0,9)+"\u2026":t}function QUe(e,t={}){const r={ast:e,helpers:new Set};return{context:()=>r,helper:s=>(r.helpers.add(s),s)}}function PG(e,t){for(let r=0;r<e.length;r++)GD(e[r],t)}function GD(e,t){switch(e.type){case 1:PG(e.cases,t),t.helper("plural");break;case 2:PG(e.items,t);break;case 6:GD(e.key,t),t.helper("linked");break;case 5:t.helper("interpolate"),t.helper("list");break;case 4:t.helper("interpolate"),t.helper("named");break}}function eze(e,t={}){const r=QUe(e);r.helper("normalize"),e.body&&GD(e.body,r);const i=r.context();e.helpers=Array.from(i.helpers)}function tze(e,t){const{sourceMap:r,filename:i,breakLineCode:n,needIndent:s}=t,o={source:e.loc.source,filename:i,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:n,needIndent:s,indentLevel:0},a=()=>o;function l(b,w){o.code+=b}function u(b,w=!0){const _=w?n:"";l(s?_+"  ".repeat(b):_)}function h(b=!0){const w=++o.indentLevel;b&&u(w)}function d(b=!0){const w=--o.indentLevel;b&&u(w)}function f(){u(o.indentLevel)}return{context:a,push:l,indent:h,deindent:d,newline:f,helper:b=>`_${b}`,needIndent:()=>o.needIndent}}function rze(e,t){const{helper:r}=e;e.push(`${r("linked")}(`),vv(e,t.key),t.modifier&&(e.push(", "),vv(e,t.modifier)),e.push(")")}function ize(e,t){const{helper:r,needIndent:i}=e;e.push(`${r("normalize")}([`),e.indent(i());const n=t.items.length;for(let s=0;s<n&&(vv(e,t.items[s]),s!==n-1);s++)e.push(", ");e.deindent(i()),e.push("])")}function nze(e,t){const{helper:r,needIndent:i}=e;if(t.cases.length>1){e.push(`${r("plural")}([`),e.indent(i());const n=t.cases.length;for(let s=0;s<n&&(vv(e,t.cases[s]),s!==n-1);s++)e.push(", ");e.deindent(i()),e.push("])")}}function sze(e,t){t.body?vv(e,t.body):e.push("null")}function vv(e,t){const{helper:r}=e;switch(t.type){case 0:sze(e,t);break;case 1:nze(e,t);break;case 2:ize(e,t);break;case 6:rze(e,t);break;case 8:e.push(JSON.stringify(t.value),t);break;case 7:e.push(JSON.stringify(t.value),t);break;case 5:e.push(`${r("interpolate")}(${r("list")}(${t.index}))`,t);break;case 4:e.push(`${r("interpolate")}(${r("named")}(${JSON.stringify(t.key)}))`,t);break;case 9:e.push(JSON.stringify(t.value),t);break;case 3:e.push(JSON.stringify(t.value),t);break;default:throw new Error(`unhandled codegen node type: ${t.type}`)}}const oze=(e,t={})=>{const r=qe(t.mode)?t.mode:"normal",i=qe(t.filename)?t.filename:"message.intl",n=!!t.sourceMap,s=t.breakLineCode!=null?t.breakLineCode:r==="arrow"?";":`
`,o=t.needIndent?t.needIndent:r!=="arrow",a=e.helpers||[],l=tze(e,{mode:r,filename:i,sourceMap:n,breakLineCode:s,needIndent:o});l.push(r==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),a.length>0&&(l.push(`const { ${a.map(d=>`${d}: _${d}`).join(", ")} } = ctx`),l.newline()),l.push("return "),vv(l,e),l.deindent(o),l.push("}");const{code:u,map:h}=l.context();return{ast:e,code:u,map:h?h.toJSON():void 0}};function aze(e,t={}){const r=rn({},t),n=XUe(r).parse(e);return eze(n,r),oze(n,r)}/*!
  * @intlify/devtools-if v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Toe={I18nInit:"i18n:init",FunctionTranslate:"function:translate"};/*!
  * @intlify/core-base v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */let W_=null;function lze(e){W_=e}function uze(e,t,r){W_&&W_.emit(Toe.I18nInit,{timestamp:Date.now(),i18n:e,version:t,meta:r})}const cze=hze(Toe.FunctionTranslate);function hze(e){return t=>W_&&W_.emit(e,t)}const dze={[0]:"Not found '{key}' key in '{locale}' locale messages.",[1]:"Fall back to translate '{key}' key with '{target}' locale.",[2]:"Cannot format a number value due to not supported Intl.NumberFormat.",[3]:"Fall back to number format '{key}' key with '{target}' locale.",[4]:"Cannot format a date value due to not supported Intl.DateTimeFormat.",[5]:"Fall back to datetime format '{key}' key with '{target}' locale."};function bv(e,...t){return CE(dze[e],...t)}const pze="9.1.9",PE=-1,TT="";function fze(){return{upper:e=>qe(e)?e.toUpperCase():e,lower:e=>qe(e)?e.toLowerCase():e,capitalize:e=>qe(e)?`${e.charAt(0).toLocaleUpperCase()}${e.substr(1)}`:e}}let $oe;function mze(e){$oe=e}let Eoe=null;const RG=e=>{Eoe=e},yze=()=>Eoe;let LG=0;function gze(e={}){const t=qe(e.version)?e.version:pze,r=qe(e.locale)?e.locale:"en-US",i=oi(e.fallbackLocale)||Ot(e.fallbackLocale)||qe(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:r,n=Ot(e.messages)?e.messages:{[r]:{}},s=Ot(e.datetimeFormats)?e.datetimeFormats:{[r]:{}},o=Ot(e.numberFormats)?e.numberFormats:{[r]:{}},a=rn({},e.modifiers||{},fze()),l=e.pluralRules||{},u=en(e.missing)?e.missing:null,h=dr(e.missingWarn)||gv(e.missingWarn)?e.missingWarn:!0,d=dr(e.fallbackWarn)||gv(e.fallbackWarn)?e.fallbackWarn:!0,f=!!e.fallbackFormat,m=!!e.unresolving,g=en(e.postTranslation)?e.postTranslation:null,b=Ot(e.processor)?e.processor:null,w=dr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_=!!e.escapeParameter,x=en(e.messageCompiler)?e.messageCompiler:$oe,I=en(e.onWarn)?e.onWarn:Ns,S=e,T=nn(S.__datetimeFormatters)?S.__datetimeFormatters:new Map,$=nn(S.__numberFormatters)?S.__numberFormatters:new Map,E=nn(S.__meta)?S.__meta:{};LG++;const C={version:t,cid:LG,locale:r,fallbackLocale:i,messages:n,datetimeFormats:s,numberFormats:o,modifiers:a,pluralRules:l,missing:u,missingWarn:h,fallbackWarn:d,fallbackFormat:f,unresolving:m,postTranslation:g,processor:b,warnHtmlMessage:w,escapeParameter:_,messageCompiler:x,onWarn:I,__datetimeFormatters:T,__numberFormatters:$,__meta:E};return C.__v_emitter=S.__v_emitter!=null?S.__v_emitter:void 0,uze(C,t,E),C}function RE(e,t){return e instanceof RegExp?e.test(t):e}function Aoe(e,t){return e instanceof RegExp?e.test(t):e}function qD(e,t,r,i,n){const{missing:s,onWarn:o}=e;{const a=e.__v_emitter;a&&a.emit("missing",{locale:r,key:t,type:n,groupId:`${n}:${t}`})}if(s!==null){const a=s(e,r,t,n);return qe(a)?a:t}else return Aoe(i,t)&&o(bv(0,{key:t,locale:r})),t}function Q2(e,t,r){const i=e;i.__localeChainCache||(i.__localeChainCache=new Map);let n=i.__localeChainCache.get(r);if(!n){n=[];let s=[r];for(;oi(s);)s=NG(n,s,t);const o=oi(t)?t:Ot(t)?t.default?t.default:null:t;s=qe(o)?[o]:o,oi(s)&&NG(n,s,!1),i.__localeChainCache.set(r,n)}return n}function NG(e,t,r){let i=!0;for(let n=0;n<t.length&&dr(i);n++){const s=t[n];qe(s)&&(i=vze(e,t[n],r))}return i}function vze(e,t,r){let i;const n=t.split("-");do{const s=n.join("-");i=bze(e,s,r),n.splice(-1,1)}while(n.length&&i===!0);return i}function bze(e,t,r){let i=!1;if(!e.includes(t)&&(i=!0,t)){i=t[t.length-1]!=="!";const n=t.replace(/!/g,"");e.push(n),(oi(r)||Ot(r))&&r[n]&&(i=r[n])}return i}function J1(e,t,r){const i=e;i.__localeChainCache=new Map,Q2(e,r,t)}const wze=/<\/?[\w\s="/.':;#-\/]+>/,_ze="Detected HTML in '{source}' message. Recommend not using HTML messages to avoid XSS.";function xze(e,t){(dr(t.warnHtmlMessage)?t.warnHtmlMessage:!0)&&wze.test(e)&&Ns(CE(_ze,{source:e}))}const Sze=e=>e;let DG=Object.create(null);function Mze(e,t={}){{xze(e,t);const i=(t.onCacheKey||Sze)(e),n=DG[i];if(n)return n;let s=!1;const o=t.onError||UUe;t.onError=u=>{s=!0,o(u)};const{code:a}=aze(e,t),l=new Function(`return ${a}`)();return s?l:DG[i]=l}}function h0(e){return OE(e,null,{messages:Ize})}const Ize={[14]:"Invalid arguments",[15]:"The date provided is an invalid Date object.Make sure your Date represents a valid date.",[16]:"The argument provided is not a valid ISO date string"},FG=()=>"",Su=e=>en(e);function jG(e,...t){const{fallbackFormat:r,postTranslation:i,unresolving:n,fallbackLocale:s,messages:o}=e,[a,l]=QR(...t),u=dr(l.missingWarn)?l.missingWarn:e.missingWarn,h=dr(l.fallbackWarn)?l.fallbackWarn:e.fallbackWarn,d=dr(l.escapeParameter)?l.escapeParameter:e.escapeParameter,f=!!l.resolvedMessage,m=qe(l.default)||dr(l.default)?dr(l.default)?a:l.default:r?a:"",g=r||m!=="",b=qe(l.locale)?l.locale:e.locale;d&&Tze(l);let[w,_,x]=f?[a,b,o[b]||{}]:$ze(e,a,b,s,h,u),I=a;if(!f&&!(qe(w)||Su(w))&&g&&(w=m,I=w),!f&&(!(qe(w)||Su(w))||!qe(_)))return n?PE:a;if(qe(w)&&e.messageCompiler==null)return Ns(`The message format compilation is not supported in this build. Because message compiler isn't included. You need to pre-compilation all message format. So translate function return '${a}'.`),a;let S=!1;const T=()=>{S=!0},$=Su(w)?w:Coe(e,a,_,w,I,T);if(S)return w;const E=Cze(e,_,x,l),C=jUe(E),O=Eze(e,$,C),R=i?i(O):O;{const D={timestamp:Date.now(),key:qe(a)?a:Su(w)?w.key:"",locale:_||(Su(w)?w.locale:""),format:qe(w)?w:Su(w)?w.source:"",message:R};D.meta=rn({},e.__meta,yze()||{}),cze(D)}return R}function Tze(e){oi(e.list)?e.list=e.list.map(t=>qe(t)?EG(t):t):nn(e.named)&&Object.keys(e.named).forEach(t=>{qe(e.named[t])&&(e.named[t]=EG(e.named[t]))})}function $ze(e,t,r,i,n,s){const{messages:o,onWarn:a}=e,l=Q2(e,i,r);let u={},h,d=null,f=r,m=null;const g="translate";for(let b=0;b<l.length;b++){if(h=m=l[b],r!==h&&RE(n,t)&&a(bv(1,{key:t,target:h})),r!==h){const S=e.__v_emitter;S&&S.emit("fallback",{type:g,key:t,from:f,to:m,groupId:`${g}:${t}`})}u=o[h]||{};let w=null,_,x;if(sy&&(w=window.performance.now(),_="intlify-message-resolve-start",x="intlify-message-resolve-end",Io&&Io(_)),(d=IT(u,t))===null&&(d=u[t]),sy){const S=window.performance.now(),T=e.__v_emitter;T&&w&&d&&T.emit("message-resolve",{type:"message-resolve",key:t,message:d,time:S-w,groupId:`${g}:${t}`}),_&&x&&Io&&oy&&(Io(x),oy("intlify message resolve",_,x))}if(qe(d)||en(d))break;const I=qD(e,t,h,s,g);I!==t&&(d=I),f=m}return[d,h,u]}function Coe(e,t,r,i,n,s){const{messageCompiler:o,warnHtmlMessage:a}=e;if(Su(i)){const f=i;return f.locale=f.locale||r,f.key=f.key||t,f}let l=null,u,h;sy&&(l=window.performance.now(),u="intlify-message-compilation-start",h="intlify-message-compilation-end",Io&&Io(u));const d=o(i,Aze(e,r,n,i,a,s));if(sy){const f=window.performance.now(),m=e.__v_emitter;m&&l&&m.emit("message-compilation",{type:"message-compilation",message:i,time:f-l,groupId:`translate:${t}`}),u&&h&&Io&&oy&&(Io(h),oy("intlify message compilation",u,h))}return d.locale=r,d.key=t,d.source=i,d}function Eze(e,t,r){let i=null,n,s;sy&&(i=window.performance.now(),n="intlify-message-evaluation-start",s="intlify-message-evaluation-end",Io&&Io(n));const o=t(r);if(sy){const a=window.performance.now(),l=e.__v_emitter;l&&i&&l.emit("message-evaluation",{type:"message-evaluation",value:o,time:a-i,groupId:`translate:${t.key}`}),n&&s&&Io&&oy&&(Io(s),oy("intlify message evaluation",n,s))}return o}function QR(...e){const[t,r,i]=e,n={};if(!qe(t)&&!Qi(t)&&!Su(t))throw h0(14);const s=Qi(t)?String(t):(Su(t),t);return Qi(r)?n.plural=r:qe(r)?n.default=r:Ot(r)&&!kE(r)?n.named=r:oi(r)&&(n.list=r),Qi(i)?n.plural=i:qe(i)?n.default=i:Ot(i)&&rn(n,i),[s,n]}function Aze(e,t,r,i,n,s){return{warnHtmlMessage:n,onError:o=>{s&&s(o);{const a=`Message compilation error: ${o.message}`,l=o.location&&SUe(i,o.location.start.offset,o.location.end.offset),u=e.__v_emitter;u&&u.emit("compile-error",{message:i,error:o.message,start:o.location&&o.location.start.offset,end:o.location&&o.location.end.offset,groupId:`translate:${r}`}),console.error(l?`${a}
${l}`:a)}},onCacheKey:o=>vUe(t,r,o)}}function Cze(e,t,r,i){const{modifiers:n,pluralRules:s}=e,a={locale:t,modifiers:n,pluralRules:s,messages:l=>{const u=IT(r,l);if(qe(u)){let h=!1;const f=Coe(e,l,t,u,l,()=>{h=!0});return h?FG:f}else return Su(u)?u:FG}};return e.processor&&(a.processor=e.processor),i.list&&(a.list=i.list),i.named&&(a.named=i.named),Qi(i.plural)&&(a.pluralIndex=i.plural),a}const VG=typeof Intl<"u",koe={dateTimeFormat:VG&&typeof Intl.DateTimeFormat<"u",numberFormat:VG&&typeof Intl.NumberFormat<"u"};function UG(e,...t){const{datetimeFormats:r,unresolving:i,fallbackLocale:n,onWarn:s}=e,{__datetimeFormatters:o}=e;if(!koe.dateTimeFormat)return s(bv(4)),TT;const[a,l,u,h]=eL(...t),d=dr(u.missingWarn)?u.missingWarn:e.missingWarn,f=dr(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,m=!!u.part,g=qe(u.locale)?u.locale:e.locale,b=Q2(e,n,g);if(!qe(a)||a==="")return new Intl.DateTimeFormat(g).format(l);let w={},_,x=null,I=g,S=null;const T="datetime format";for(let C=0;C<b.length;C++){if(_=S=b[C],g!==_&&RE(f,a)&&s(bv(5,{key:a,target:_})),g!==_){const O=e.__v_emitter;O&&O.emit("fallback",{type:T,key:a,from:I,to:S,groupId:`${T}:${a}`})}if(w=r[_]||{},x=w[a],Ot(x))break;qD(e,a,_,d,T),I=S}if(!Ot(x)||!qe(_))return i?PE:a;let $=`${_}__${a}`;kE(h)||($=`${$}__${JSON.stringify(h)}`);let E=o.get($);return E||(E=new Intl.DateTimeFormat(_,rn({},x,h)),o.set($,E)),m?E.formatToParts(l):E.format(l)}function eL(...e){const[t,r,i,n]=e;let s={},o={},a;if(qe(t)){if(!/\d{4}-\d{2}-\d{2}(T.*)?/.test(t))throw h0(16);a=new Date(t);try{a.toISOString()}catch{throw h0(16)}}else if(wUe(t)){if(isNaN(t.getTime()))throw h0(15);a=t}else if(Qi(t))a=t;else throw h0(14);return qe(r)?s.key=r:Ot(r)&&(s=r),qe(i)?s.locale=i:Ot(i)&&(o=i),Ot(n)&&(o=n),[s.key||"",a,s,o]}function zG(e,t,r){const i=e;for(const n in r){const s=`${t}__${n}`;!i.__datetimeFormatters.has(s)||i.__datetimeFormatters.delete(s)}}function BG(e,...t){const{numberFormats:r,unresolving:i,fallbackLocale:n,onWarn:s}=e,{__numberFormatters:o}=e;if(!koe.numberFormat)return s(bv(2)),TT;const[a,l,u,h]=tL(...t),d=dr(u.missingWarn)?u.missingWarn:e.missingWarn,f=dr(u.fallbackWarn)?u.fallbackWarn:e.fallbackWarn,m=!!u.part,g=qe(u.locale)?u.locale:e.locale,b=Q2(e,n,g);if(!qe(a)||a==="")return new Intl.NumberFormat(g).format(l);let w={},_,x=null,I=g,S=null;const T="number format";for(let C=0;C<b.length;C++){if(_=S=b[C],g!==_&&RE(f,a)&&s(bv(3,{key:a,target:_})),g!==_){const O=e.__v_emitter;O&&O.emit("fallback",{type:T,key:a,from:I,to:S,groupId:`${T}:${a}`})}if(w=r[_]||{},x=w[a],Ot(x))break;qD(e,a,_,d,T),I=S}if(!Ot(x)||!qe(_))return i?PE:a;let $=`${_}__${a}`;kE(h)||($=`${$}__${JSON.stringify(h)}`);let E=o.get($);return E||(E=new Intl.NumberFormat(_,rn({},x,h)),o.set($,E)),m?E.formatToParts(l):E.format(l)}function tL(...e){const[t,r,i,n]=e;let s={},o={};if(!Qi(t))throw h0(14);const a=t;return qe(r)?s.key=r:Ot(r)&&(s=r),qe(i)?s.locale=i:Ot(i)&&(o=i),Ot(n)&&(o=n),[s.key||"",a,s,o]}function GG(e,t,r){const i=e;for(const n in r){const s=`${t}__${n}`;!i.__numberFormatters.has(s)||i.__numberFormatters.delete(s)}}typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(c0().__INTLIFY_PROD_DEVTOOLS__=!1);function kze(){return Ooe().__VUE_DEVTOOLS_GLOBAL_HOOK__}function Ooe(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const Oze=typeof Proxy=="function",Pze="devtools-plugin:setup",Rze="plugin:settings:set";let Yy,rL;function Lze(){var e;return Yy!==void 0||(typeof window<"u"&&window.performance?(Yy=!0,rL=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Yy=!0,rL=global.perf_hooks.performance):Yy=!1),Yy}function Nze(){return Lze()?rL.now():Date.now()}class Dze{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const i={};if(t.settings)for(const o in t.settings){const a=t.settings[o];i[o]=a.defaultValue}const n=`__vue-devtools-plugin-settings__${t.id}`;let s=Object.assign({},i);try{const o=localStorage.getItem(n),a=JSON.parse(o);Object.assign(s,a)}catch{}this.fallbacks={getSettings(){return s},setSettings(o){try{localStorage.setItem(n,JSON.stringify(o))}catch{}s=o},now(){return Nze()}},r&&r.on(Rze,(o,a)=>{o===this.plugin.id&&this.fallbacks.setSettings(a)}),this.proxiedOn=new Proxy({},{get:(o,a)=>this.target?this.target.on[a]:(...l)=>{this.onQueue.push({method:a,args:l})}}),this.proxiedTarget=new Proxy({},{get:(o,a)=>this.target?this.target[a]:a==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(a)?(...l)=>(this.targetQueue.push({method:a,args:l,resolve:()=>{}}),this.fallbacks[a](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:a,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function Poe(e,t){const r=e,i=Ooe(),n=kze(),s=Oze&&r.enableEarlyProxy;if(n&&(i.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!s))n.emit(Pze,e,t);else{const o=s?new Dze(r,n):null;(i.__VUE_DEVTOOLS_PLUGINS__=i.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:o}),o&&t(o.proxiedTarget)}}/*!
  * @intlify/vue-devtools v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const hA={["vue-devtools-plugin-vue-i18n"]:"Vue I18n devtools",["vue-i18n-resource-inspector"]:"I18n Resources",["vue-i18n-timeline"]:"Vue I18n"},Fze={["vue-i18n-resource-inspector"]:"Search for scopes ..."},jze={["vue-i18n-timeline"]:16764185};/*!
  * vue-i18n v9.1.9
  * (c) 2021 kazuya kawaguchi
  * Released under the MIT License.
  */const Vze="9.1.9";function Uze(){let e=!1;typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(e=!0,c0().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(e=!0,c0().__VUE_I18N_LEGACY_API__=!0),typeof __VUE_I18N_PROD_DEVTOOLS__!="boolean"&&(e=!0,c0().__VUE_I18N_PROD_DEVTOOLS__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(c0().__INTLIFY_PROD_DEVTOOLS__=!1),e=!0,e&&console.warn("You are running the esm-bundler build of vue-i18n. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle.")}const zze={[6]:"Fall back to {type} '{key}' with root locale.",[7]:"Not supported 'preserve'.",[8]:"Not supported 'formatter'.",[9]:"Not supported 'preserveDirectiveContent'.",[10]:"Not supported 'getChoiceIndex'.",[11]:"Component name legacy compatible: '{name}' -> 'i18n'",[12]:"Not found parent scope. use the global scope."};function ol(e,...t){return CE(zze[e],...t)}function wn(e,...t){return OE(e,null,{messages:Bze,args:t})}const Bze={[14]:"Unexpected return type in composer",[15]:"Invalid argument",[16]:"Must be called at the top of a `setup` function",[17]:"Need to install with `app.use` function",[22]:"Unexpected error",[18]:"Not available in legacy mode",[19]:"Required in value: {0}",[20]:"Invalid value",[21]:"Cannot setup vue-devtools plugin"},dA="__INTLIFY_META__",iL=Ah("__transrateVNode"),nL=Ah("__datetimeParts"),sL=Ah("__numberParts"),ay=Ah("__enableEmitter"),J_=Ah("__disableEmitter"),Roe=Ah("__setPluralRules");Ah("__intlifyMeta");const Loe=Ah("__injectWithOption");let qG=0;function HG(e){return(t,r,i,n)=>e(r,i,ys()||void 0,n)}function HD(e,t){const{messages:r,__i18n:i}=t,n=Ot(r)?r:oi(i)?{}:{[e]:{}};if(oi(i)&&i.forEach(({locale:s,resource:o})=>{s?(n[s]=n[s]||{},$T(o,n[s])):$T(o,n)}),t.flatJson)for(const s in n)Moe(n,s)&&KR(n[s]);return n}const PS=e=>!nn(e)||oi(e);function $T(e,t){if(PS(e)||PS(t))throw wn(20);for(const r in e)Moe(e,r)&&(PS(e[r])||PS(t[r])?t[r]=e[r]:$T(e[r],t[r]))}const Gze=()=>{const e=ys();return e&&e.type[dA]?{[dA]:e.type[dA]}:null};function WD(e={}){const{__root:t}=e,r=t===void 0;let i=dr(e.inheritLocale)?e.inheritLocale:!0;const n=Xi(t&&i?t.locale.value:qe(e.locale)?e.locale:"en-US"),s=Xi(t&&i?t.fallbackLocale.value:qe(e.fallbackLocale)||oi(e.fallbackLocale)||Ot(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:n.value),o=Xi(HD(n.value,e)),a=Xi(Ot(e.datetimeFormats)?e.datetimeFormats:{[n.value]:{}}),l=Xi(Ot(e.numberFormats)?e.numberFormats:{[n.value]:{}});let u=t?t.missingWarn:dr(e.missingWarn)||gv(e.missingWarn)?e.missingWarn:!0,h=t?t.fallbackWarn:dr(e.fallbackWarn)||gv(e.fallbackWarn)?e.fallbackWarn:!0,d=t?t.fallbackRoot:dr(e.fallbackRoot)?e.fallbackRoot:!0,f=!!e.fallbackFormat,m=en(e.missing)?e.missing:null,g=en(e.missing)?HG(e.missing):null,b=en(e.postTranslation)?e.postTranslation:null,w=dr(e.warnHtmlMessage)?e.warnHtmlMessage:!0,_=!!e.escapeParameter;const x=t?t.modifiers:Ot(e.modifiers)?e.modifiers:{};let I=e.pluralRules||t&&t.pluralRules,S;function T(){return gze({version:Vze,locale:n.value,fallbackLocale:s.value,messages:o.value,datetimeFormats:a.value,numberFormats:l.value,modifiers:x,pluralRules:I,missing:g===null?void 0:g,missingWarn:u,fallbackWarn:h,fallbackFormat:f,unresolving:!0,postTranslation:b===null?void 0:b,warnHtmlMessage:w,escapeParameter:_,__datetimeFormatters:Ot(S)?S.__datetimeFormatters:void 0,__numberFormatters:Ot(S)?S.__numberFormatters:void 0,__v_emitter:Ot(S)?S.__v_emitter:void 0,__meta:{framework:"vue"}})}S=T(),J1(S,n.value,s.value);function $(){return[n.value,s.value,o.value,a.value,l.value]}const E=sl({get:()=>n.value,set:W=>{n.value=W,S.locale=n.value}}),C=sl({get:()=>s.value,set:W=>{s.value=W,S.fallbackLocale=s.value,J1(S,n.value,W)}}),O=sl(()=>o.value),R=sl(()=>a.value),D=sl(()=>l.value);function F(){return en(b)?b:null}function z(W){b=W,S.postTranslation=W}function B(){return m}function y(W){W!==null&&(g=HG(W)),m=W,S.missing=g}function M(W,G){return W!=="translate"||!G.resolvedMessage}function A(W,G,de,fe,Me,Oe){$();let Ye;try{RG(Gze()),Ye=W(S)}finally{RG(null)}if(Qi(Ye)&&Ye===PE){const[Xe,ot]=G();if(t&&qe(Xe)&&M(de,ot)){d&&(RE(h,Xe)||Aoe(u,Xe))&&Ns(ol(6,{key:Xe,type:de}));{const{__v_emitter:Jt}=S;Jt&&d&&Jt.emit("fallback",{type:de,key:Xe,to:"global",groupId:`${de}:${Xe}`})}}return t&&d?fe(t):Me(Xe)}else{if(Oe(Ye))return Ye;throw wn(14)}}function P(...W){return A(G=>jG(G,...W),()=>QR(...W),"translate",G=>G.t(...W),G=>G,G=>qe(G))}function Y(...W){const[G,de,fe]=W;if(fe&&!nn(fe))throw wn(15);return P(G,de,rn({resolvedMessage:!0},fe||{}))}function Q(...W){return A(G=>UG(G,...W),()=>eL(...W),"datetime format",G=>G.d(...W),()=>TT,G=>qe(G))}function le(...W){return A(G=>BG(G,...W),()=>tL(...W),"number format",G=>G.n(...W),()=>TT,G=>qe(G))}function re(W){return W.map(G=>qe(G)?Mt(Hu,null,G,0):G)}const _e={normalize:re,interpolate:W=>W,type:"vnode"};function Ce(...W){return A(G=>{let de;const fe=G;try{fe.processor=_e,de=jG(fe,...W)}finally{fe.processor=null}return de},()=>QR(...W),"translate",G=>G[iL](...W),G=>[Mt(Hu,null,G,0)],G=>oi(G))}function Ne(...W){return A(G=>BG(G,...W),()=>tL(...W),"number format",G=>G[sL](...W),()=>[],G=>qe(G)||oi(G))}function ht(...W){return A(G=>UG(G,...W),()=>eL(...W),"datetime format",G=>G[nL](...W),()=>[],G=>qe(G)||oi(G))}function st(W){I=W,S.pluralRules=I}function pt(W,G){const de=qe(G)?G:n.value,fe=te(de);return IT(fe,W)!==null}function Pt(W){let G=null;const de=Q2(S,s.value,n.value);for(let fe=0;fe<de.length;fe++){const Me=o.value[de[fe]]||{},Oe=IT(Me,W);if(Oe!=null){G=Oe;break}}return G}function X(W){const G=Pt(W);return G??(t?t.tm(W)||{}:{})}function te(W){return o.value[W]||{}}function he(W,G){o.value[W]=G,S.messages=o.value}function V(W,G){o.value[W]=o.value[W]||{},$T(G,o.value[W]),S.messages=o.value}function J(W){return a.value[W]||{}}function ne(W,G){a.value[W]=G,S.datetimeFormats=a.value,zG(S,W,G)}function pe(W,G){a.value[W]=rn(a.value[W]||{},G),S.datetimeFormats=a.value,zG(S,W,G)}function k(W){return l.value[W]||{}}function q(W,G){l.value[W]=G,S.numberFormats=l.value,GG(S,W,G)}function H(W,G){l.value[W]=rn(l.value[W]||{},G),S.numberFormats=l.value,GG(S,W,G)}qG++,t&&(Gs(t.locale,W=>{i&&(n.value=W,S.locale=W,J1(S,n.value,s.value))}),Gs(t.fallbackLocale,W=>{i&&(s.value=W,S.fallbackLocale=W,J1(S,n.value,s.value))}));const ee={id:qG,locale:E,fallbackLocale:C,get inheritLocale(){return i},set inheritLocale(W){i=W,W&&t&&(n.value=t.locale.value,s.value=t.fallbackLocale.value,J1(S,n.value,s.value))},get availableLocales(){return Object.keys(o.value).sort()},messages:O,datetimeFormats:R,numberFormats:D,get modifiers(){return x},get pluralRules(){return I||{}},get isGlobal(){return r},get missingWarn(){return u},set missingWarn(W){u=W,S.missingWarn=u},get fallbackWarn(){return h},set fallbackWarn(W){h=W,S.fallbackWarn=h},get fallbackRoot(){return d},set fallbackRoot(W){d=W},get fallbackFormat(){return f},set fallbackFormat(W){f=W,S.fallbackFormat=f},get warnHtmlMessage(){return w},set warnHtmlMessage(W){w=W,S.warnHtmlMessage=W},get escapeParameter(){return _},set escapeParameter(W){_=W,S.escapeParameter=W},t:P,rt:Y,d:Q,n:le,te:pt,tm:X,getLocaleMessage:te,setLocaleMessage:he,mergeLocaleMessage:V,getDateTimeFormat:J,setDateTimeFormat:ne,mergeDateTimeFormat:pe,getNumberFormat:k,setNumberFormat:q,mergeNumberFormat:H,getPostTranslationHandler:F,setPostTranslationHandler:z,getMissingHandler:B,setMissingHandler:y,[iL]:Ce,[sL]:Ne,[nL]:ht,[Roe]:st,[Loe]:e.__injectWithOption};return ee[ay]=W=>{S.__v_emitter=W},ee[J_]=()=>{S.__v_emitter=void 0},ee}function qze(e){const t=qe(e.locale)?e.locale:"en-US",r=qe(e.fallbackLocale)||oi(e.fallbackLocale)||Ot(e.fallbackLocale)||e.fallbackLocale===!1?e.fallbackLocale:t,i=en(e.missing)?e.missing:void 0,n=dr(e.silentTranslationWarn)||gv(e.silentTranslationWarn)?!e.silentTranslationWarn:!0,s=dr(e.silentFallbackWarn)||gv(e.silentFallbackWarn)?!e.silentFallbackWarn:!0,o=dr(e.fallbackRoot)?e.fallbackRoot:!0,a=!!e.formatFallbackMessages,l=Ot(e.modifiers)?e.modifiers:{},u=e.pluralizationRules,h=en(e.postTranslation)?e.postTranslation:void 0,d=qe(e.warnHtmlInMessage)?e.warnHtmlInMessage!=="off":!0,f=!!e.escapeParameterHtml,m=dr(e.sync)?e.sync:!0;e.formatter&&Ns(ol(8)),e.preserveDirectiveContent&&Ns(ol(9));let g=e.messages;if(Ot(e.sharedMessages)){const T=e.sharedMessages;g=Object.keys(T).reduce((E,C)=>{const O=E[C]||(E[C]={});return rn(O,T[C]),E},g||{})}const{__i18n:b,__root:w,__injectWithOption:_}=e,x=e.datetimeFormats,I=e.numberFormats,S=e.flatJson;return{locale:t,fallbackLocale:r,messages:g,flatJson:S,datetimeFormats:x,numberFormats:I,missing:i,missingWarn:n,fallbackWarn:s,fallbackRoot:o,fallbackFormat:a,modifiers:l,pluralRules:u,postTranslation:h,warnHtmlMessage:d,escapeParameter:f,inheritLocale:m,__i18n:b,__root:w,__injectWithOption:_}}function oL(e={}){const t=WD(qze(e)),r={id:t.id,get locale(){return t.locale.value},set locale(i){t.locale.value=i},get fallbackLocale(){return t.fallbackLocale.value},set fallbackLocale(i){t.fallbackLocale.value=i},get messages(){return t.messages.value},get datetimeFormats(){return t.datetimeFormats.value},get numberFormats(){return t.numberFormats.value},get availableLocales(){return t.availableLocales},get formatter(){return Ns(ol(8)),{interpolate(){return[]}}},set formatter(i){Ns(ol(8))},get missing(){return t.getMissingHandler()},set missing(i){t.setMissingHandler(i)},get silentTranslationWarn(){return dr(t.missingWarn)?!t.missingWarn:t.missingWarn},set silentTranslationWarn(i){t.missingWarn=dr(i)?!i:i},get silentFallbackWarn(){return dr(t.fallbackWarn)?!t.fallbackWarn:t.fallbackWarn},set silentFallbackWarn(i){t.fallbackWarn=dr(i)?!i:i},get modifiers(){return t.modifiers},get formatFallbackMessages(){return t.fallbackFormat},set formatFallbackMessages(i){t.fallbackFormat=i},get postTranslation(){return t.getPostTranslationHandler()},set postTranslation(i){t.setPostTranslationHandler(i)},get sync(){return t.inheritLocale},set sync(i){t.inheritLocale=i},get warnHtmlInMessage(){return t.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(i){t.warnHtmlMessage=i!=="off"},get escapeParameterHtml(){return t.escapeParameter},set escapeParameterHtml(i){t.escapeParameter=i},get preserveDirectiveContent(){return Ns(ol(9)),!0},set preserveDirectiveContent(i){Ns(ol(9))},get pluralizationRules(){return t.pluralRules||{}},__composer:t,t(...i){const[n,s,o]=i,a={};let l=null,u=null;if(!qe(n))throw wn(15);const h=n;return qe(s)?a.locale=s:oi(s)?l=s:Ot(s)&&(u=s),oi(o)?l=o:Ot(o)&&(u=o),t.t(h,l||u||{},a)},rt(...i){return t.rt(...i)},tc(...i){const[n,s,o]=i,a={plural:1};let l=null,u=null;if(!qe(n))throw wn(15);const h=n;return qe(s)?a.locale=s:Qi(s)?a.plural=s:oi(s)?l=s:Ot(s)&&(u=s),qe(o)?a.locale=o:oi(o)?l=o:Ot(o)&&(u=o),t.t(h,l||u||{},a)},te(i,n){return t.te(i,n)},tm(i){return t.tm(i)},getLocaleMessage(i){return t.getLocaleMessage(i)},setLocaleMessage(i,n){t.setLocaleMessage(i,n)},mergeLocaleMessage(i,n){t.mergeLocaleMessage(i,n)},d(...i){return t.d(...i)},getDateTimeFormat(i){return t.getDateTimeFormat(i)},setDateTimeFormat(i,n){t.setDateTimeFormat(i,n)},mergeDateTimeFormat(i,n){t.mergeDateTimeFormat(i,n)},n(...i){return t.n(...i)},getNumberFormat(i){return t.getNumberFormat(i)},setNumberFormat(i,n){t.setNumberFormat(i,n)},mergeNumberFormat(i,n){t.mergeNumberFormat(i,n)},getChoiceIndex(i,n){return Ns(ol(10)),-1},__onComponentInstanceCreated(i){const{componentInstanceCreatedListener:n}=e;n&&n(i,r)}};return r.__enableEmitter=i=>{const n=t;n[ay]&&n[ay](i)},r.__disableEmitter=()=>{const i=t;i[J_]&&i[J_]()},r}const JD={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:e=>e==="parent"||e==="global",default:"parent"},i18n:{type:Object}},pA={name:"i18n-t",props:rn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:e=>Qi(e)||!isNaN(e)}},JD),setup(e,t){const{slots:r,attrs:i}=t,n=e.i18n||YD({useScope:e.scope,__useComponent:!0}),s=Object.keys(r).filter(o=>o!=="_");return()=>{const o={};e.locale&&(o.locale=e.locale),e.plural!==void 0&&(o.plural=qe(e.plural)?+e.plural:e.plural);const a=Hze(t,s),l=n[iL](e.keypath,a,o),u=rn({},i);return qe(e.tag)||nn(e.tag)?qs(e.tag,u,l):qs(hr,u,l)}}};function Hze({slots:e},t){return t.length===1&&t[0]==="default"?e.default?e.default():[]:t.reduce((r,i)=>{const n=e[i];return n&&(r[i]=n()),r},{})}function Noe(e,t,r,i){const{slots:n,attrs:s}=t;return()=>{const o={part:!0};let a={};e.locale&&(o.locale=e.locale),qe(e.format)?o.key=e.format:nn(e.format)&&(qe(e.format.key)&&(o.key=e.format.key),a=Object.keys(e.format).reduce((d,f)=>r.includes(f)?rn({},d,{[f]:e.format[f]}):d,{}));const l=i(e.value,o,a);let u=[o.key];oi(l)?u=l.map((d,f)=>{const m=n[d.type];return m?m({[d.type]:d.value,index:f,parts:l}):[d.value]}):qe(l)&&(u=[l]);const h=rn({},s);return qe(e.tag)||nn(e.tag)?qs(e.tag,h,u):qs(hr,h,u)}}const Wze=["localeMatcher","style","unit","unitDisplay","currency","currencyDisplay","useGrouping","numberingSystem","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","notation","formatMatcher"],WG={name:"i18n-n",props:rn({value:{type:Number,required:!0},format:{type:[String,Object]}},JD),setup(e,t){const r=e.i18n||YD({useScope:"parent",__useComponent:!0});return Noe(e,t,Wze,(...i)=>r[sL](...i))}},Jze=["dateStyle","timeStyle","fractionalSecondDigits","calendar","dayPeriod","numberingSystem","localeMatcher","timeZone","hour12","hourCycle","formatMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName"],JG={name:"i18n-d",props:rn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},JD),setup(e,t){const r=e.i18n||YD({useScope:"parent",__useComponent:!0});return Noe(e,t,Jze,(...i)=>r[nL](...i))}};function Zze(e,t){const r=e;if(e.mode==="composition")return r.__getInstance(t)||e.global;{const i=r.__getInstance(t);return i!=null?i.__composer:e.global.__composer}}function Yze(e){const t=(r,{instance:i,value:n,modifiers:s})=>{if(!i||!i.$)throw wn(22);const o=Zze(e,i.$);s.preserve&&Ns(ol(7));const a=Kze(n);r.textContent=o.t(...Xze(a))};return{beforeMount:t,beforeUpdate:t}}function Kze(e){if(qe(e))return{path:e};if(Ot(e)){if(!("path"in e))throw wn(19,"path");return e}else throw wn(20)}function Xze(e){const{path:t,locale:r,args:i,choice:n,plural:s}=e,o={},a=i||{};return qe(r)&&(o.locale=r),Qi(n)&&(o.plural=n),Qi(s)&&(o.plural=s),[t,a,o]}function Qze(e,t,...r){const i=Ot(r[0])?r[0]:{},n=!!i.useI18nComponentName,s=dr(i.globalInstall)?i.globalInstall:!0;s&&n&&Ns(ol(11,{name:pA.name})),s&&(e.component(n?"i18n":pA.name,pA),e.component(WG.name,WG),e.component(JG.name,JG)),e.directive("t",Yze(t))}const Doe="vue-i18n: composer properties";let aL;async function eBe(e,t){return new Promise((r,i)=>{try{Poe({id:"vue-devtools-plugin-vue-i18n",label:hA["vue-devtools-plugin-vue-i18n"],packageName:"vue-i18n",homepage:"https://vue-i18n.intlify.dev",logo:"https://vue-i18n.intlify.dev/vue-i18n-devtools-logo.png",componentStateTypes:[Doe],app:e},n=>{aL=n,n.on.visitComponentTree(({componentInstance:s,treeNode:o})=>{tBe(s,o,t)}),n.on.inspectComponent(({componentInstance:s,instanceData:o})=>{s.vnode.el.__VUE_I18N__&&o&&(t.mode==="legacy"?s.vnode.el.__VUE_I18N__!==t.global.__composer&&ZG(o,s.vnode.el.__VUE_I18N__):ZG(o,s.vnode.el.__VUE_I18N__))}),n.addInspector({id:"vue-i18n-resource-inspector",label:hA["vue-i18n-resource-inspector"],icon:"language",treeFilterPlaceholder:Fze["vue-i18n-resource-inspector"]}),n.on.getInspectorTree(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&oBe(s,t)}),n.on.getInspectorState(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&aBe(s,t)}),n.on.editInspectorState(s=>{s.app===e&&s.inspectorId==="vue-i18n-resource-inspector"&&uBe(s,t)}),n.addTimelineLayer({id:"vue-i18n-timeline",label:hA["vue-i18n-timeline"],color:jze["vue-i18n-timeline"]}),r(!0)})}catch(n){console.error(n),i(!1)}})}function tBe(e,t,r){const i=r.mode==="composition"?r.global:r.global.__composer;if(e&&e.vnode.el.__VUE_I18N__&&e.vnode.el.__VUE_I18N__!==i){const s={label:`i18n (${e.type.name||e.type.displayName||e.type.__file} Scope)`,textColor:0,backgroundColor:16764185};t.tags.push(s)}}function ZG(e,t){const r=Doe;e.state.push({type:r,key:"locale",editable:!0,value:t.locale.value}),e.state.push({type:r,key:"availableLocales",editable:!1,value:t.availableLocales}),e.state.push({type:r,key:"fallbackLocale",editable:!0,value:t.fallbackLocale.value}),e.state.push({type:r,key:"inheritLocale",editable:!0,value:t.inheritLocale}),e.state.push({type:r,key:"messages",editable:!1,value:ZD(t.messages.value)}),e.state.push({type:r,key:"datetimeFormats",editable:!1,value:t.datetimeFormats.value}),e.state.push({type:r,key:"numberFormats",editable:!1,value:t.numberFormats.value})}function ZD(e){const t={};return Object.keys(e).forEach(r=>{const i=e[r];en(i)&&"source"in i?t[r]=sBe(i):nn(i)?t[r]=ZD(i):t[r]=i}),t}const rBe={"<":"&lt;",">":"&gt;",'"':"&quot;","&":"&amp;"};function iBe(e){return e.replace(/[<>"&]/g,nBe)}function nBe(e){return rBe[e]||e}function sBe(e){const t=e.source?`("${iBe(e.source)}")`:"(?)";return{_custom:{type:"function",display:`<span>\u0192</span> ${t}`}}}function oBe(e,t){e.rootNodes.push({id:"global",label:"Global Scope"});const r=t.mode==="composition"?t.global:t.global.__composer;for(const[i,n]of t.__instances){const s=t.mode==="composition"?n:n.__composer;if(r===s)continue;const o=i.type.name||i.type.displayName||i.type.__file;e.rootNodes.push({id:s.id.toString(),label:`${o} Scope`})}}function Foe(e,t){if(e==="global")return t.mode==="composition"?t.global:t.global.__composer;{const r=Array.from(t.__instances.values()).find(i=>i.id.toString()===e);return r?t.mode==="composition"?r:r.__composer:null}}function aBe(e,t){const r=Foe(e.nodeId,t);r&&(e.state=lBe(r))}function lBe(e){const t={},r="Locale related info",i=[{type:r,key:"locale",editable:!0,value:e.locale.value},{type:r,key:"fallbackLocale",editable:!0,value:e.fallbackLocale.value},{type:r,key:"availableLocales",editable:!1,value:e.availableLocales},{type:r,key:"inheritLocale",editable:!0,value:e.inheritLocale}];t[r]=i;const n="Locale messages info",s=[{type:n,key:"messages",editable:!1,value:ZD(e.messages.value)}];t[n]=s;const o="Datetime formats info",a=[{type:o,key:"datetimeFormats",editable:!1,value:e.datetimeFormats.value}];t[o]=a;const l="Datetime formats info",u=[{type:l,key:"numberFormats",editable:!1,value:e.numberFormats.value}];return t[l]=u,t}function Z_(e,t){if(aL){let r;t&&"groupId"in t&&(r=t.groupId,delete t.groupId),aL.addTimelineEvent({layerId:"vue-i18n-timeline",event:{title:e,groupId:r,time:Date.now(),meta:{},data:t||{},logType:e==="compile-error"?"error":e==="fallback"||e==="missing"?"warning":"default"}})}}function uBe(e,t){const r=Foe(e.nodeId,t);if(r){const[i]=e.path;i==="locale"&&qe(e.state.value)?r.locale.value=e.state.value:i==="fallbackLocale"&&(qe(e.state.value)||oi(e.state.value)||nn(e.state.value))?r.fallbackLocale.value=e.state.value:i==="inheritLocale"&&dr(e.state.value)&&(r.inheritLocale=e.state.value)}}function cBe(e,t,r){return{beforeCreate(){const i=ys();if(!i)throw wn(22);const n=this.$options;if(n.i18n){const s=n.i18n;n.__i18n&&(s.__i18n=n.__i18n),s.__root=t,this===this.$root?this.$i18n=YG(e,s):(s.__injectWithOption=!0,this.$i18n=oL(s))}else n.__i18n?this===this.$root?this.$i18n=YG(e,n):this.$i18n=oL({__i18n:n.__i18n,__injectWithOption:!0,__root:t}):this.$i18n=e;e.__onComponentInstanceCreated(this.$i18n),r.__setInstance(i,this.$i18n),this.$t=(...s)=>this.$i18n.t(...s),this.$rt=(...s)=>this.$i18n.rt(...s),this.$tc=(...s)=>this.$i18n.tc(...s),this.$te=(s,o)=>this.$i18n.te(s,o),this.$d=(...s)=>this.$i18n.d(...s),this.$n=(...s)=>this.$i18n.n(...s),this.$tm=s=>this.$i18n.tm(s)},mounted(){{this.$el.__VUE_I18N__=this.$i18n.__composer;const i=this.__v_emitter=BD(),n=this.$i18n;n.__enableEmitter&&n.__enableEmitter(i),i.on("*",Z_)}},beforeUnmount(){const i=ys();if(!i)throw wn(22);{this.__v_emitter&&(this.__v_emitter.off("*",Z_),delete this.__v_emitter);const n=this.$i18n;n.__disableEmitter&&n.__disableEmitter(),delete this.$el.__VUE_I18N__}delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,r.__deleteInstance(i),delete this.$i18n}}}function YG(e,t){e.locale=t.locale||e.locale,e.fallbackLocale=t.fallbackLocale||e.fallbackLocale,e.missing=t.missing||e.missing,e.silentTranslationWarn=t.silentTranslationWarn||e.silentFallbackWarn,e.silentFallbackWarn=t.silentFallbackWarn||e.silentFallbackWarn,e.formatFallbackMessages=t.formatFallbackMessages||e.formatFallbackMessages,e.postTranslation=t.postTranslation||e.postTranslation,e.warnHtmlInMessage=t.warnHtmlInMessage||e.warnHtmlInMessage,e.escapeParameterHtml=t.escapeParameterHtml||e.escapeParameterHtml,e.sync=t.sync||e.sync,e.__composer[Roe](t.pluralizationRules||e.pluralizationRules);const r=HD(e.locale,{messages:t.messages,__i18n:t.__i18n});return Object.keys(r).forEach(i=>e.mergeLocaleMessage(i,r[i])),t.datetimeFormats&&Object.keys(t.datetimeFormats).forEach(i=>e.mergeDateTimeFormat(i,t.datetimeFormats[i])),t.numberFormats&&Object.keys(t.numberFormats).forEach(i=>e.mergeNumberFormat(i,t.numberFormats[i])),e}function hBe(e={}){const t=__VUE_I18N_LEGACY_API__&&dr(e.legacy)?e.legacy:__VUE_I18N_LEGACY_API__,r=!!e.globalInjection,i=new Map,n=__VUE_I18N_LEGACY_API__&&t?oL(e):WD(e),s=Ah("vue-i18n"),o={get mode(){return __VUE_I18N_LEGACY_API__&&t?"legacy":"composition"},async install(a,...l){a.__VUE_I18N__=o,a.__VUE_I18N_SYMBOL__=s,a.provide(a.__VUE_I18N_SYMBOL__,o),!t&&r&&yBe(a,o.global),__VUE_I18N_FULL_INSTALL__&&Qze(a,o,...l),__VUE_I18N_LEGACY_API__&&t&&a.mixin(cBe(n,n.__composer,o));{if(!await eBe(a,o))throw wn(21);const h=BD();if(t){const d=n;d.__enableEmitter&&d.__enableEmitter(h)}else{const d=n;d[ay]&&d[ay](h)}h.on("*",Z_)}},get global(){return n},__instances:i,__getInstance(a){return i.get(a)||null},__setInstance(a,l){i.set(a,l)},__deleteInstance(a){i.delete(a)}};return o}function YD(e={}){const t=ys();if(t==null)throw wn(16);if(!t.appContext.app.__VUE_I18N_SYMBOL__)throw wn(17);const r=Cm(t.appContext.app.__VUE_I18N_SYMBOL__);if(!r)throw wn(22);const i=r.mode==="composition"?r.global:r.global.__composer,n=kE(e)?"__i18n"in t.type?"local":"global":e.useScope?e.useScope:"local";if(n==="global"){let a=nn(e.messages)?e.messages:{};"__i18nGlobal"in t.type&&(a=HD(i.locale.value,{messages:a,__i18n:t.type.__i18nGlobal}));const l=Object.keys(a);if(l.length&&l.forEach(u=>{i.mergeLocaleMessage(u,a[u])}),nn(e.datetimeFormats)){const u=Object.keys(e.datetimeFormats);u.length&&u.forEach(h=>{i.mergeDateTimeFormat(h,e.datetimeFormats[h])})}if(nn(e.numberFormats)){const u=Object.keys(e.numberFormats);u.length&&u.forEach(h=>{i.mergeNumberFormat(h,e.numberFormats[h])})}return i}if(n==="parent"){let a=dBe(r,t,e.__useComponent);return a==null&&(Ns(ol(12)),a=i),a}if(r.mode==="legacy")throw wn(18);const s=r;let o=s.__getInstance(t);if(o==null){const a=t.type,l=rn({},e);a.__i18n&&(l.__i18n=a.__i18n),i&&(l.__root=i),o=WD(l),pBe(s,t,o),s.__setInstance(t,o)}return o}function dBe(e,t,r=!1){let i=null;const n=t.root;let s=t.parent;for(;s!=null;){const o=e;if(e.mode==="composition")i=o.__getInstance(s);else{const a=o.__getInstance(s);a!=null&&(i=a.__composer),r&&i&&!i[Loe]&&(i=null)}if(i!=null||n===s)break;s=s.parent}return i}function pBe(e,t,r){let i=null;Xu(()=>{if(t.vnode.el){t.vnode.el.__VUE_I18N__=r,i=BD();const n=r;n[ay]&&n[ay](i),i.on("*",Z_)}},t),ky(()=>{if(t.vnode.el&&t.vnode.el.__VUE_I18N__){i&&i.off("*",Z_);const n=r;n[J_]&&n[J_](),delete t.vnode.el.__VUE_I18N__}e.__deleteInstance(t)},t)}const fBe=["locale","fallbackLocale","availableLocales"],mBe=["t","rt","d","n","tm"];function yBe(e,t){const r=Object.create(null);fBe.forEach(i=>{const n=Object.getOwnPropertyDescriptor(t,i);if(!n)throw wn(22);const s=vr(n.value)?{get(){return n.value.value},set(o){n.value.value=o}}:{get(){return n.get&&n.get()}};Object.defineProperty(r,i,s)}),e.config.globalProperties.$i18n=r,mBe.forEach(i=>{const n=Object.getOwnPropertyDescriptor(t,i);if(!n||!n.value)throw wn(22);Object.defineProperty(e.config.globalProperties,`$${i}`,n)})}mze(Mze);Uze();{const e=c0();e.__INTLIFY__=!0,lze(e.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}var gBe={en:{"lang-code":"en","lang-dir":"ltr","lang-en":"English","lang-fr":"anglais","lang-native":"English","ramp.about":"About RAMP","keyboardInstructions.title":"Keyboard Instructions","keyboardInstructions.open":"Open keyboard instructions","keyboardInstructions.app":`\\"Use 'Tab' to navigate between sections of the application.\\"`,"keyboardInstructions.lists":`\\"Use the arrow keys to move between items in lists. With a list item selected you can press 'Space' or 'Enter' to click the item. You can also navigate within the list item using 'Tab'.\\"`,"keyboardInstructions.map":'[en] \\"When the map is selected',"keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Toggle between imperial and metric map scale","map.coordinates.east":"E","map.coordinates.west":"W","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Change Language","map.language.short":"EN-CA","map.language.en":"English","map.language.fr":"Fran\xE7ais","map.language.curr":"current","map.export":"export map","notifications.title":"Notifications","notifications.empty":"No new notifications.","notifications.controls.dismiss":"Dismiss","notifications.controls.expand":"Expand","notifications.controls.collapse":"Collapse","notifications.controls.clearAll":"Clear All","panels.access":"Access the panel","panels.controls.close":"Close","panels.controls.pin":"Pin","panels.controls.unpin":"Unpin","panels.controls.back":"Back","panels.controls.optionsMenu":"More","panels.controls.minimize":"Minimize","panels.controls.expand":"Expand","panels.controls.collapse":"Collapse","panels.alert.open":"{name} panel opened","panels.alert.close":"{name} panel closed","panels.alert.minimize":"{name} panel minimized"},fr:{"lang-code":"fr","lang-dir":"ltr","lang-en":"French","lang-fr":"fran\xE7ais","lang-native":"Fran\xE7ais","ramp.about":"[fr] Au sujet de la PCAR","keyboardInstructions.title":"Instructions clavier","keyboardInstructions.open":"Instructions clavier ouvert","keyboardInstructions.app":'\\"Utilisez la touche Tab pour vous d\xE9placer entre les sections de l\u2019application.\\"',"keyboardInstructions.lists":'[fr] \\"Lorsqu\u2019un \xE9l\xE9ment de la liste est s\xE9lectionn\xE9',"keyboardInstructions.map":"[fr] 1","keyboardInstructions.OK":"OK","map.toggleScaleUnits":"Basculer entre les \xE9chelles m\xE9triques et imp\xE9riales pour la carte","map.coordinates.east":"E","map.coordinates.west":"O","map.coordinates.north":"N","map.coordinates.south":"S","map.changeLanguage":"Changer de langue","map.language.short":"FR-CA","map.language.en":"English","map.language.fr":"Fran\xE7ais","map.language.curr":"actuel","map.export":"exporter la carte","notifications.title":"Notifications","notifications.empty":"Aucune nouvelle notification.","notifications.controls.dismiss":"Rejeter","notifications.controls.expand":"D\xE9velopper","notifications.controls.collapse":"R\xE9duire","notifications.controls.clearAll":"Effacer tout","panels.access":"[fr] Acc\xE9der au panneau","panels.controls.close":"Fermer","panels.controls.pin":"\xC9pingler","panels.controls.unpin":"D\xE9s\xE9pingler","panels.controls.back":"Retour","panels.controls.optionsMenu":"Plus","panels.controls.minimize":"R\xE9duire","panels.controls.expand":"D\xE9velopper","panels.controls.collapse":"R\xE9duire","panels.alert.open":"[fr] Panneau de {name} ouvert","panels.alert.close":"[fr] Panneau de {name} ferm\xE9","panels.alert.minimize":"[fr] Panneau de {name} minimis\xE9"}};const KG="en",vBe={en:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}},fr:{number:{style:"decimal",useGrouping:!1,maximumFractionDigits:20}}};function bBe(){return hBe({locale:document.documentElement.getAttribute("lang")||KG,fallbackLocale:KG,globalInjection:!0,messages:gBe,numberFormats:vBe})}var joe={exports:{}};/*!
* screenfull
* v5.0.2 - 2020-02-13
* (c) Sindre Sorhus; MIT License
*/(function(e){(function(){var t=typeof window<"u"&&typeof window.document<"u"?window.document:{},r=e.exports,i=function(){for(var o,a=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],l=0,u=a.length,h={};l<u;l++)if(o=a[l],o&&o[1]in t){for(l=0;l<o.length;l++)h[a[0][l]]=o[l];return h}return!1}(),n={change:i.fullscreenchange,error:i.fullscreenerror},s={request:function(o){return new Promise(function(a,l){var u=function(){this.off("change",u),a()}.bind(this);this.on("change",u),o=o||t.documentElement;var h=o[i.requestFullscreen]();h instanceof Promise&&h.then(u).catch(l)}.bind(this))},exit:function(){return new Promise(function(o,a){if(!this.isFullscreen){o();return}var l=function(){this.off("change",l),o()}.bind(this);this.on("change",l);var u=t[i.exitFullscreen]();u instanceof Promise&&u.then(l).catch(a)}.bind(this))},toggle:function(o){return this.isFullscreen?this.exit():this.request(o)},onchange:function(o){this.on("change",o)},onerror:function(o){this.on("error",o)},on:function(o,a){var l=n[o];l&&t.addEventListener(l,a,!1)},off:function(o,a){var l=n[o];l&&t.removeEventListener(l,a,!1)},raw:i};if(!i){r?e.exports={isEnabled:!1}:window.screenfull={isEnabled:!1};return}Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(t[i.fullscreenElement])}},element:{enumerable:!0,get:function(){return t[i.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(t[i.fullscreenEnabled])}}}),r?e.exports=s:window.screenfull=s})()})(joe);var Wl=joe.exports,wBe={install(e,t){e.mixin({beforeCreate(){const r=this.$options;r.iApi?this.$iApi=r.iApi:r.parent&&r.parent.$iApi&&(this.$iApi=r.parent.$iApi)}})}},_Be={install(e,t){e.mixin({methods:{get(r){return r in this.$store.getters?sl(()=>this.$store.getters[r]):sl(()=>{try{return this.$store.get(r)}catch(n){console.error(`vuex pathify error: ${n}`);return}})},call(r){return i=>sl(this.$store.dispatch(r,i))}}})}};function ly(e,t){return e.then(function(r){return[null,r]}).catch(function(r){return t&&Object.assign(r,t),[r,void 0]})}class xBe{maptipInstance=void 0;maptipPoint=void 0;content=""}const SBe={},MBe={setMaptipInstance:(e,t)=>{e.commit("SET_MAPTIP_INSTANCE",t)},setMaptipPoint:(e,t)=>{e.commit("SET_MAPTIP_Point",t)},setMaptipContent:(e,t)=>{e.commit("SET_MAPTIP_CONTENT",t)}},IBe={SET_MAPTIP_INSTANCE:(e,t)=>{e.maptipInstance=t},SET_MAPTIP_POINT:(e,t)=>{e.maptipPoint=t},SET_MAPTIP_CONTENT:(e,t)=>{e.content=t}};var il=(e=>(e.maptipPoint="maptip/maptipPoint",e.maptipInstance="maptip/maptipInstance",e.content="maptip/content",e.setMaptipPoint="maptip/setMaptipPoint!",e.setMaptipContent="maptip/setMaptipContent!",e.setMaptipInstance="maptip/setMaptipInstance!",e))(il||{});function TBe(){const e=new xBe;return{namespaced:!0,state:e,getters:{...SBe},actions:{...MBe,...gs.actions(e)},mutations:{...IBe,...gs.mutations(e)}}}var Ar=(e,t)=>{const r=e.__vccOpts||e;for(const[i,n]of t)r[i]=n;return r};const $Be=tr({name:"EsriMapV",data(){return{mapConfig:this.get(ls.getMapConfig),layers:this.get(ks.layers),layerConfigs:this.get(ks.layerConfigs),maptipPoint:this.get(il.maptipPoint),maptipInstance:this.get(il.maptipInstance),maptipContent:this.get(il.content),map:Xi(),watchers:[]}},created(){console.log(this.layers,this.mapConfig),this.watchers.push(this.$watch("mapConfig",this.onMapConfigChange,{immediate:!0})),this.watchers.push(this.$watch("layerConfigs",this.onLayerConfigArrayChange,{immediate:!0})),this.watchers.push(this.$watch("maptipPoint",e=>{if(this.maptipPoint){let t,r;const i=this.$iApi.geo.map.getPixelWidth()/2,n=0,s=this.$iApi.geo.map.mapPointToScreenPoint(this.maptipPoint);t=s.screenX-i,r=n-s.screenY,this.maptipInstance.setProps({offset:[t,r]}),this.maptipContent&&this.maptipContent!==""&&this.maptipInstance.show()}else this.maptipInstance.hide()})),this.watchers.push(this.$watch("maptipContent",e=>{this.maptipContent&&this.maptipContent!==""&&this.maptipPoint?(this.maptipInstance.setContent(this.maptipContent),this.maptipInstance.show()):this.maptipInstance.hide()}))},beforeUnmount(){this.watchers.forEach(e=>e())},methods:{async onLayerConfigArrayChange(e,t){if(console.log("Saw layer config change",t,e,!!this.map),!this.map||!e)return;(await Promise.all(e.filter(i=>!t||!t.includes(i)).map(i=>new Promise(async n=>{const s=this.$iApi.geo.layer.createLayer(i),[o]=await ly(s.initiate());o?console.error(o):this.map.addLayer(s),n(s)})))).filter(Boolean).forEach((i,n)=>{i?.isLayerLoaded().then(()=>{i?.isValidState&&this.$iApi.geo.map.reorder(i,t?t.length+n:n)})})},onMapConfigChange(e){if(console.log("new map config change: ",e,this.mapConfig),!e)return;const t=this.$el;this.$iApi.geo.map.createMap(e,t),this.map=this.$iApi.geo.map,t._tippy.hide(0),this.$iApi.$vApp.$store.set(il.setMaptipInstance,t._tippy),this.onLayerConfigArrayChange(this.layerConfigs.value,[])}}}),EBe={name:"esriMap",class:"h-full"};function ABe(e,t,r,i,n,s){const o=Er("tippy");return xr((De(),et("div",EBe,null,512)),[[o,{allowHTML:!0,zIndex:5,theme:"ramp4",trigger:"manual",appendTo:"parent",arrow:!1,delay:200,duration:[200,200]}]])}var CBe=Ar($Be,[["render",ABe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/map/esri-map.vue"]]),Voe={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0},KD={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},kBe=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],ET={CSS:{},springs:{}};function Au(e,t,r){return Math.min(Math.max(e,t),r)}function Ww(e,t){return e.indexOf(t)>-1}function fA(e,t){return e.apply(null,t)}var at={arr:function(e){return Array.isArray(e)},obj:function(e){return Ww(Object.prototype.toString.call(e),"Object")},pth:function(e){return at.obj(e)&&e.hasOwnProperty("totalLength")},svg:function(e){return e instanceof SVGElement},inp:function(e){return e instanceof HTMLInputElement},dom:function(e){return e.nodeType||at.svg(e)},str:function(e){return typeof e=="string"},fnc:function(e){return typeof e=="function"},und:function(e){return typeof e>"u"},nil:function(e){return at.und(e)||e===null},hex:function(e){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(e)},rgb:function(e){return/^rgb/.test(e)},hsl:function(e){return/^hsl/.test(e)},col:function(e){return at.hex(e)||at.rgb(e)||at.hsl(e)},key:function(e){return!Voe.hasOwnProperty(e)&&!KD.hasOwnProperty(e)&&e!=="targets"&&e!=="keyframes"}};function Uoe(e){var t=/\(([^)]+)\)/.exec(e);return t?t[1].split(",").map(function(r){return parseFloat(r)}):[]}function zoe(e,t){var r=Uoe(e),i=Au(at.und(r[0])?1:r[0],.1,100),n=Au(at.und(r[1])?100:r[1],.1,100),s=Au(at.und(r[2])?10:r[2],.1,100),o=Au(at.und(r[3])?0:r[3],.1,100),a=Math.sqrt(n/i),l=s/(2*Math.sqrt(n*i)),u=l<1?a*Math.sqrt(1-l*l):0,h=1,d=l<1?(l*a+-o)/u:-o+a;function f(g){var b=t?t*g/1e3:g;return l<1?b=Math.exp(-b*l*a)*(h*Math.cos(u*b)+d*Math.sin(u*b)):b=(h+d*b)*Math.exp(-b*a),g===0||g===1?g:1-b}function m(){var g=ET.springs[e];if(g)return g;for(var b=1/6,w=0,_=0;;)if(w+=b,f(w)===1){if(_++,_>=16)break}else _=0;var x=w*b*1e3;return ET.springs[e]=x,x}return t?f:m}function OBe(e){return e===void 0&&(e=10),function(t){return Math.ceil(Au(t,1e-6,1)*e)*(1/e)}}var PBe=function(){var e=11,t=1/(e-1);function r(h,d){return 1-3*d+3*h}function i(h,d){return 3*d-6*h}function n(h){return 3*h}function s(h,d,f){return((r(d,f)*h+i(d,f))*h+n(d))*h}function o(h,d,f){return 3*r(d,f)*h*h+2*i(d,f)*h+n(d)}function a(h,d,f,m,g){var b,w,_=0;do w=d+(f-d)/2,b=s(w,m,g)-h,b>0?f=w:d=w;while(Math.abs(b)>1e-7&&++_<10);return w}function l(h,d,f,m){for(var g=0;g<4;++g){var b=o(d,f,m);if(b===0)return d;var w=s(d,f,m)-h;d-=w/b}return d}function u(h,d,f,m){if(!(0<=h&&h<=1&&0<=f&&f<=1))return;var g=new Float32Array(e);if(h!==d||f!==m)for(var b=0;b<e;++b)g[b]=s(b*t,h,f);function w(_){for(var x=0,I=1,S=e-1;I!==S&&g[I]<=_;++I)x+=t;--I;var T=(_-g[I])/(g[I+1]-g[I]),$=x+T*t,E=o($,h,f);return E>=.001?l(_,$,h,f):E===0?$:a(_,x,x+t,h,f)}return function(_){return h===d&&f===m||_===0||_===1?_:s(w(_),d,m)}}return u}(),Boe=function(){var e={linear:function(){return function(i){return i}}},t={Sine:function(){return function(i){return 1-Math.cos(i*Math.PI/2)}},Circ:function(){return function(i){return 1-Math.sqrt(1-i*i)}},Back:function(){return function(i){return i*i*(3*i-2)}},Bounce:function(){return function(i){for(var n,s=4;i<((n=Math.pow(2,--s))-1)/11;);return 1/Math.pow(4,3-s)-7.5625*Math.pow((n*3-2)/22-i,2)}},Elastic:function(i,n){i===void 0&&(i=1),n===void 0&&(n=.5);var s=Au(i,1,10),o=Au(n,.1,2);return function(a){return a===0||a===1?a:-s*Math.pow(2,10*(a-1))*Math.sin((a-1-o/(Math.PI*2)*Math.asin(1/s))*(Math.PI*2)/o)}}},r=["Quad","Cubic","Quart","Quint","Expo"];return r.forEach(function(i,n){t[i]=function(){return function(s){return Math.pow(s,n+2)}}}),Object.keys(t).forEach(function(i){var n=t[i];e["easeIn"+i]=n,e["easeOut"+i]=function(s,o){return function(a){return 1-n(s,o)(1-a)}},e["easeInOut"+i]=function(s,o){return function(a){return a<.5?n(s,o)(a*2)/2:1-n(s,o)(a*-2+2)/2}},e["easeOutIn"+i]=function(s,o){return function(a){return a<.5?(1-n(s,o)(1-a*2))/2:(n(s,o)(a*2-1)+1)/2}}}),e}();function XD(e,t){if(at.fnc(e))return e;var r=e.split("(")[0],i=Boe[r],n=Uoe(e);switch(r){case"spring":return zoe(e,t);case"cubicBezier":return fA(PBe,n);case"steps":return fA(OBe,n);default:return fA(i,n)}}function Goe(e){try{var t=document.querySelectorAll(e);return t}catch{return}}function LE(e,t){for(var r=e.length,i=arguments.length>=2?arguments[1]:void 0,n=[],s=0;s<r;s++)if(s in e){var o=e[s];t.call(i,o,s,e)&&n.push(o)}return n}function NE(e){return e.reduce(function(t,r){return t.concat(at.arr(r)?NE(r):r)},[])}function XG(e){return at.arr(e)?e:(at.str(e)&&(e=Goe(e)||e),e instanceof NodeList||e instanceof HTMLCollection?[].slice.call(e):[e])}function QD(e,t){return e.some(function(r){return r===t})}function eF(e){var t={};for(var r in e)t[r]=e[r];return t}function lL(e,t){var r=eF(e);for(var i in e)r[i]=t.hasOwnProperty(i)?t[i]:e[i];return r}function DE(e,t){var r=eF(e);for(var i in t)r[i]=at.und(e[i])?t[i]:e[i];return r}function RBe(e){var t=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(e);return t?"rgba("+t[1]+",1)":e}function LBe(e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,r=e.replace(t,function(a,l,u,h){return l+l+u+u+h+h}),i=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r),n=parseInt(i[1],16),s=parseInt(i[2],16),o=parseInt(i[3],16);return"rgba("+n+","+s+","+o+",1)"}function NBe(e){var t=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(e)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(e),r=parseInt(t[1],10)/360,i=parseInt(t[2],10)/100,n=parseInt(t[3],10)/100,s=t[4]||1;function o(f,m,g){return g<0&&(g+=1),g>1&&(g-=1),g<1/6?f+(m-f)*6*g:g<1/2?m:g<2/3?f+(m-f)*(2/3-g)*6:f}var a,l,u;if(i==0)a=l=u=n;else{var h=n<.5?n*(1+i):n+i-n*i,d=2*n-h;a=o(d,h,r+1/3),l=o(d,h,r),u=o(d,h,r-1/3)}return"rgba("+a*255+","+l*255+","+u*255+","+s+")"}function DBe(e){if(at.rgb(e))return RBe(e);if(at.hex(e))return LBe(e);if(at.hsl(e))return NBe(e)}function ch(e){var t=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(e);if(t)return t[1]}function FBe(e){if(Ww(e,"translate")||e==="perspective")return"px";if(Ww(e,"rotate")||Ww(e,"skew"))return"deg"}function uL(e,t){return at.fnc(e)?e(t.target,t.id,t.total):e}function Cu(e,t){return e.getAttribute(t)}function tF(e,t,r){var i=ch(t);if(QD([r,"deg","rad","turn"],i))return t;var n=ET.CSS[t+r];if(!at.und(n))return n;var s=100,o=document.createElement(e.tagName),a=e.parentNode&&e.parentNode!==document?e.parentNode:document.body;a.appendChild(o),o.style.position="absolute",o.style.width=s+r;var l=s/o.offsetWidth;a.removeChild(o);var u=l*parseFloat(t);return ET.CSS[t+r]=u,u}function qoe(e,t,r){if(t in e.style){var i=t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),n=e.style[t]||getComputedStyle(e).getPropertyValue(i)||"0";return r?tF(e,n,r):n}}function rF(e,t){if(at.dom(e)&&!at.inp(e)&&(!at.nil(Cu(e,t))||at.svg(e)&&e[t]))return"attribute";if(at.dom(e)&&QD(kBe,t))return"transform";if(at.dom(e)&&t!=="transform"&&qoe(e,t))return"css";if(e[t]!=null)return"object"}function Hoe(e){if(!!at.dom(e)){for(var t=e.style.transform||"",r=/(\w+)\(([^)]*)\)/g,i=new Map,n;n=r.exec(t);)i.set(n[1],n[2]);return i}}function jBe(e,t,r,i){var n=Ww(t,"scale")?1:0+FBe(t),s=Hoe(e).get(t)||n;return r&&(r.transforms.list.set(t,s),r.transforms.last=t),i?tF(e,s,i):s}function iF(e,t,r,i){switch(rF(e,t)){case"transform":return jBe(e,t,i,r);case"css":return qoe(e,t,r);case"attribute":return Cu(e,t);default:return e[t]||0}}function nF(e,t){var r=/^(\*=|\+=|-=)/.exec(e);if(!r)return e;var i=ch(e)||0,n=parseFloat(t),s=parseFloat(e.replace(r[0],""));switch(r[0][0]){case"+":return n+s+i;case"-":return n-s+i;case"*":return n*s+i}}function Woe(e,t){if(at.col(e))return DBe(e);if(/\s/g.test(e))return e;var r=ch(e),i=r?e.substr(0,e.length-r.length):e;return t?i+t:i}function sF(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function VBe(e){return Math.PI*2*Cu(e,"r")}function UBe(e){return Cu(e,"width")*2+Cu(e,"height")*2}function zBe(e){return sF({x:Cu(e,"x1"),y:Cu(e,"y1")},{x:Cu(e,"x2"),y:Cu(e,"y2")})}function Joe(e){for(var t=e.points,r=0,i,n=0;n<t.numberOfItems;n++){var s=t.getItem(n);n>0&&(r+=sF(i,s)),i=s}return r}function BBe(e){var t=e.points;return Joe(e)+sF(t.getItem(t.numberOfItems-1),t.getItem(0))}function Zoe(e){if(e.getTotalLength)return e.getTotalLength();switch(e.tagName.toLowerCase()){case"circle":return VBe(e);case"rect":return UBe(e);case"line":return zBe(e);case"polyline":return Joe(e);case"polygon":return BBe(e)}}function GBe(e){var t=Zoe(e);return e.setAttribute("stroke-dasharray",t),t}function qBe(e){for(var t=e.parentNode;at.svg(t)&&at.svg(t.parentNode);)t=t.parentNode;return t}function Yoe(e,t){var r=t||{},i=r.el||qBe(e),n=i.getBoundingClientRect(),s=Cu(i,"viewBox"),o=n.width,a=n.height,l=r.viewBox||(s?s.split(" "):[0,0,o,a]);return{el:i,viewBox:l,x:l[0]/1,y:l[1]/1,w:o,h:a,vW:l[2],vH:l[3]}}function HBe(e,t){var r=at.str(e)?Goe(e)[0]:e,i=t||100;return function(n){return{property:n,el:r,svg:Yoe(r),totalLength:Zoe(r)*(i/100)}}}function WBe(e,t,r){function i(h){h===void 0&&(h=0);var d=t+h>=1?t+h:0;return e.el.getPointAtLength(d)}var n=Yoe(e.el,e.svg),s=i(),o=i(-1),a=i(1),l=r?1:n.w/n.vW,u=r?1:n.h/n.vH;switch(e.property){case"x":return(s.x-n.x)*l;case"y":return(s.y-n.y)*u;case"angle":return Math.atan2(a.y-o.y,a.x-o.x)*180/Math.PI}}function QG(e,t){var r=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,i=Woe(at.pth(e)?e.totalLength:e,t)+"";return{original:i,numbers:i.match(r)?i.match(r).map(Number):[0],strings:at.str(e)||t?i.split(r):[]}}function oF(e){var t=e?NE(at.arr(e)?e.map(XG):XG(e)):[];return LE(t,function(r,i,n){return n.indexOf(r)===i})}function Koe(e){var t=oF(e);return t.map(function(r,i){return{target:r,id:i,total:t.length,transforms:{list:Hoe(r)}}})}function JBe(e,t){var r=eF(t);if(/^spring/.test(r.easing)&&(r.duration=zoe(r.easing)),at.arr(e)){var i=e.length,n=i===2&&!at.obj(e[0]);n?e={value:e}:at.fnc(t.duration)||(r.duration=t.duration/i)}var s=at.arr(e)?e:[e];return s.map(function(o,a){var l=at.obj(o)&&!at.pth(o)?o:{value:o};return at.und(l.delay)&&(l.delay=a?0:t.delay),at.und(l.endDelay)&&(l.endDelay=a===s.length-1?t.endDelay:0),l}).map(function(o){return DE(o,r)})}function ZBe(e){for(var t=LE(NE(e.map(function(s){return Object.keys(s)})),function(s){return at.key(s)}).reduce(function(s,o){return s.indexOf(o)<0&&s.push(o),s},[]),r={},i=function(s){var o=t[s];r[o]=e.map(function(a){var l={};for(var u in a)at.key(u)?u==o&&(l.value=a[u]):l[u]=a[u];return l})},n=0;n<t.length;n++)i(n);return r}function YBe(e,t){var r=[],i=t.keyframes;i&&(t=DE(ZBe(i),t));for(var n in t)at.key(n)&&r.push({name:n,tweens:JBe(t[n],e)});return r}function KBe(e,t){var r={};for(var i in e){var n=uL(e[i],t);at.arr(n)&&(n=n.map(function(s){return uL(s,t)}),n.length===1&&(n=n[0])),r[i]=n}return r.duration=parseFloat(r.duration),r.delay=parseFloat(r.delay),r}function XBe(e,t){var r;return e.tweens.map(function(i){var n=KBe(i,t),s=n.value,o=at.arr(s)?s[1]:s,a=ch(o),l=iF(t.target,e.name,a,t),u=r?r.to.original:l,h=at.arr(s)?s[0]:u,d=ch(h)||ch(l),f=a||d;return at.und(o)&&(o=u),n.from=QG(h,f),n.to=QG(nF(o,h),f),n.start=r?r.end:0,n.end=n.start+n.delay+n.duration+n.endDelay,n.easing=XD(n.easing,n.duration),n.isPath=at.pth(s),n.isPathTargetInsideSVG=n.isPath&&at.svg(t.target),n.isColor=at.col(n.from.original),n.isColor&&(n.round=1),r=n,n})}var Xoe={css:function(e,t,r){return e.style[t]=r},attribute:function(e,t,r){return e.setAttribute(t,r)},object:function(e,t,r){return e[t]=r},transform:function(e,t,r,i,n){if(i.list.set(t,r),t===i.last||n){var s="";i.list.forEach(function(o,a){s+=a+"("+o+") "}),e.style.transform=s}}};function Qoe(e,t){var r=Koe(e);r.forEach(function(i){for(var n in t){var s=uL(t[n],i),o=i.target,a=ch(s),l=iF(o,n,a,i),u=a||ch(l),h=nF(Woe(s,u),l),d=rF(o,n);Xoe[d](o,n,h,i.transforms,!0)}})}function QBe(e,t){var r=rF(e.target,t.name);if(r){var i=XBe(t,e),n=i[i.length-1];return{type:r,property:t.name,animatable:e,tweens:i,duration:n.end,delay:i[0].delay,endDelay:n.endDelay}}}function eGe(e,t){return LE(NE(e.map(function(r){return t.map(function(i){return QBe(r,i)})})),function(r){return!at.und(r)})}function eae(e,t){var r=e.length,i=function(s){return s.timelineOffset?s.timelineOffset:0},n={};return n.duration=r?Math.max.apply(Math,e.map(function(s){return i(s)+s.duration})):t.duration,n.delay=r?Math.min.apply(Math,e.map(function(s){return i(s)+s.delay})):t.delay,n.endDelay=r?n.duration-Math.max.apply(Math,e.map(function(s){return i(s)+s.duration-s.endDelay})):t.endDelay,n}var eq=0;function tGe(e){var t=lL(Voe,e),r=lL(KD,e),i=YBe(r,e),n=Koe(e.targets),s=eGe(n,i),o=eae(s,r),a=eq;return eq++,DE(t,{id:a,children:[],animatables:n,animations:s,duration:o.duration,delay:o.delay,endDelay:o.endDelay})}var al=[],tae=function(){var e;function t(){!e&&(!tq()||!Yr.suspendWhenDocumentHidden)&&al.length>0&&(e=requestAnimationFrame(r))}function r(n){for(var s=al.length,o=0;o<s;){var a=al[o];a.paused?(al.splice(o,1),s--):(a.tick(n),o++)}e=o>0?requestAnimationFrame(r):void 0}function i(){!Yr.suspendWhenDocumentHidden||(tq()?e=cancelAnimationFrame(e):(al.forEach(function(n){return n._onDocumentVisibility()}),tae()))}return typeof document<"u"&&document.addEventListener("visibilitychange",i),t}();function tq(){return!!document&&document.hidden}function Yr(e){e===void 0&&(e={});var t=0,r=0,i=0,n,s=0,o=null;function a(x){var I=window.Promise&&new Promise(function(S){return o=S});return x.finished=I,I}var l=tGe(e);a(l);function u(){var x=l.direction;x!=="alternate"&&(l.direction=x!=="normal"?"normal":"reverse"),l.reversed=!l.reversed,n.forEach(function(I){return I.reversed=l.reversed})}function h(x){return l.reversed?l.duration-x:x}function d(){t=0,r=h(l.currentTime)*(1/Yr.speed)}function f(x,I){I&&I.seek(x-I.timelineOffset)}function m(x){if(l.reversePlayback)for(var S=s;S--;)f(x,n[S]);else for(var I=0;I<s;I++)f(x,n[I])}function g(x){for(var I=0,S=l.animations,T=S.length;I<T;){var $=S[I],E=$.animatable,C=$.tweens,O=C.length-1,R=C[O];O&&(R=LE(C,function(Ne){return x<Ne.end})[0]||R);for(var D=Au(x-R.start-R.delay,0,R.duration)/R.duration,F=isNaN(D)?1:R.easing(D),z=R.to.strings,B=R.round,y=[],M=R.to.numbers.length,A=void 0,P=0;P<M;P++){var Y=void 0,Q=R.to.numbers[P],le=R.from.numbers[P]||0;R.isPath?Y=WBe(R.value,F*Q,R.isPathTargetInsideSVG):Y=le+F*(Q-le),B&&(R.isColor&&P>2||(Y=Math.round(Y*B)/B)),y.push(Y)}var re=z.length;if(!re)A=y[0];else{A=z[0];for(var we=0;we<re;we++){z[we];var _e=z[we+1],Ce=y[we];isNaN(Ce)||(_e?A+=Ce+_e:A+=Ce+" ")}}Xoe[$.type](E.target,$.property,A,E.transforms),$.currentValue=A,I++}}function b(x){l[x]&&!l.passThrough&&l[x](l)}function w(){l.remaining&&l.remaining!==!0&&l.remaining--}function _(x){var I=l.duration,S=l.delay,T=I-l.endDelay,$=h(x);l.progress=Au($/I*100,0,100),l.reversePlayback=$<l.currentTime,n&&m($),!l.began&&l.currentTime>0&&(l.began=!0,b("begin")),!l.loopBegan&&l.currentTime>0&&(l.loopBegan=!0,b("loopBegin")),$<=S&&l.currentTime!==0&&g(0),($>=T&&l.currentTime!==I||!I)&&g(I),$>S&&$<T?(l.changeBegan||(l.changeBegan=!0,l.changeCompleted=!1,b("changeBegin")),b("change"),g($)):l.changeBegan&&(l.changeCompleted=!0,l.changeBegan=!1,b("changeComplete")),l.currentTime=Au($,0,I),l.began&&b("update"),x>=I&&(r=0,w(),l.remaining?(t=i,b("loopComplete"),l.loopBegan=!1,l.direction==="alternate"&&u()):(l.paused=!0,l.completed||(l.completed=!0,b("loopComplete"),b("complete"),!l.passThrough&&"Promise"in window&&(o(),a(l)))))}return l.reset=function(){var x=l.direction;l.passThrough=!1,l.currentTime=0,l.progress=0,l.paused=!0,l.began=!1,l.loopBegan=!1,l.changeBegan=!1,l.completed=!1,l.changeCompleted=!1,l.reversePlayback=!1,l.reversed=x==="reverse",l.remaining=l.loop,n=l.children,s=n.length;for(var I=s;I--;)l.children[I].reset();(l.reversed&&l.loop!==!0||x==="alternate"&&l.loop===1)&&l.remaining++,g(l.reversed?l.duration:0)},l._onDocumentVisibility=d,l.set=function(x,I){return Qoe(x,I),l},l.tick=function(x){i=x,t||(t=i),_((i+(r-t))*Yr.speed)},l.seek=function(x){_(h(x))},l.pause=function(){l.paused=!0,d()},l.play=function(){!l.paused||(l.completed&&l.reset(),l.paused=!1,al.push(l),d(),tae())},l.reverse=function(){u(),l.completed=!l.reversed,d()},l.restart=function(){l.reset(),l.play()},l.remove=function(x){var I=oF(x);rae(I,l)},l.reset(),l.autoplay&&l.play(),l}function rq(e,t){for(var r=t.length;r--;)QD(e,t[r].animatable.target)&&t.splice(r,1)}function rae(e,t){var r=t.animations,i=t.children;rq(e,r);for(var n=i.length;n--;){var s=i[n],o=s.animations;rq(e,o),!o.length&&!s.children.length&&i.splice(n,1)}!r.length&&!i.length&&t.pause()}function rGe(e){for(var t=oF(e),r=al.length;r--;){var i=al[r];rae(t,i)}}function iGe(e,t){t===void 0&&(t={});var r=t.direction||"normal",i=t.easing?XD(t.easing):null,n=t.grid,s=t.axis,o=t.from||0,a=o==="first",l=o==="center",u=o==="last",h=at.arr(e),d=parseFloat(h?e[0]:e),f=h?parseFloat(e[1]):0,m=ch(h?e[1]:e)||0,g=t.start||0+(h?d:0),b=[],w=0;return function(_,x,I){if(a&&(o=0),l&&(o=(I-1)/2),u&&(o=I-1),!b.length){for(var S=0;S<I;S++){if(!n)b.push(Math.abs(o-S));else{var T=l?(n[0]-1)/2:o%n[0],$=l?(n[1]-1)/2:Math.floor(o/n[0]),E=S%n[0],C=Math.floor(S/n[0]),O=T-E,R=$-C,D=Math.sqrt(O*O+R*R);s==="x"&&(D=-O),s==="y"&&(D=-R),b.push(D)}w=Math.max.apply(Math,b)}i&&(b=b.map(function(z){return i(z/w)*w})),r==="reverse"&&(b=b.map(function(z){return s?z<0?z*-1:-z:Math.abs(w-z)}))}var F=h?(f-d)/w:d;return g+F*(Math.round(b[x]*100)/100)+m}}function nGe(e){e===void 0&&(e={});var t=Yr(e);return t.duration=0,t.add=function(r,i){var n=al.indexOf(t),s=t.children;n>-1&&al.splice(n,1);function o(f){f.passThrough=!0}for(var a=0;a<s.length;a++)o(s[a]);var l=DE(r,lL(KD,e));l.targets=l.targets||e.targets;var u=t.duration;l.autoplay=!1,l.direction=t.direction,l.timelineOffset=at.und(i)?u:nF(i,u),o(t),t.seek(l.timelineOffset);var h=Yr(l);o(h),s.push(h);var d=eae(s,e);return t.delay=d.delay,t.endDelay=d.endDelay,t.duration=d.duration,t.seek(0),t.reset(),t.autoplay&&t.play(),t},t}Yr.version="3.2.1";Yr.speed=1;Yr.suspendWhenDocumentHidden=!0;Yr.running=al;Yr.remove=rGe;Yr.get=iF;Yr.set=Qoe;Yr.convertPx=tF;Yr.path=HBe;Yr.setDashoffset=GBe;Yr.stagger=iGe;Yr.timeline=nGe;Yr.easing=XD;Yr.penner=Boe;Yr.random=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};const sGe=tr({name:"PanelContainerV",props:{panel:{type:Object,required:!0}},data(){return{skipTransition:!1}},methods:{enter(e,t){this.animateTransition(e,t,[0,1])},beforeLeave(e){e.classList.contains("screen-spinner")||(this.skipTransition=this.panel.isScreenLoaded(this.panel.route.screen),this.$el.querySelectorAll("[focus-item").forEach(t=>t.classList.remove("default-focus-style")))},leave(e,t){this.animateTransition(e,t,[1,0])},animateTransition(e,t,r){if(this.skipTransition)return t();Yr({targets:e,opacity:{value:r,duration:400,easing:"cubicBezier(.5, .05, .1, .3)"},complete:t})}}}),oGe=["data-cy"];function aGe(e,t,r,i,n,s){const o=Er("focus-container");return De(),et("div",{class:zn(["shadow-tm bg-white h-full xs:mr-0 sm:mr-12 last:mr-0 pointer-events-auto min-w-0 shrink-0",e.panel.expanded?"flex-grow max-w-full":""]),style:$p(e.panel.style),"data-cy":e.panel.id},[Yt(" this renders a panel screen which is currently in view "),Yt(" only perform transition on screen components that are not loaded yet; if already loaded, switch right away "),Mt(W2,{onBeforeLeave:e.beforeLeave,onLeave:e.leave,onEnter:e.enter},{default:Pi(()=>[xr((De(),zi(aD(e.panel.route.screen),mE(e.panel.route.props,{panel:e.panel}),null,16,["panel"])),[[o]])]),_:1},8,["onBeforeLeave","onLeave","onEnter"])],14,oGe)}var lGe=Ar(sGe,[["render",aGe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-container.vue"]]);const uGe=tr({name:"PanelStackV",components:{"panel-container":lGe},data(){return{visible:this.get("panel/getVisible")}},mounted(){new ResizeObserver(t=>{this.$store.set("panel/mobileView",!this.$root?.$el.classList.contains("sm")),this.$store.set("panel/stackWidth",t[0].contentRect.width)}).observe(this.$el)},methods:{enter(e,t){this.animateTransition(e,t,[[6,0],[0,1]])},leave(e,t){const[r,i]=[e.children[0].getBoundingClientRect(),e.parentElement.getBoundingClientRect()];e.style.width=`${r.width}px`,e.style.height=`${r.height}px`,e.style.left=`${r.left-i.left}px`,e.style.position="absolute",this.animateTransition(e,t,[[0,-6],[1,0]])},animateTransition(e,t,r){Yr({targets:e,duration:300,translateY:{value:r[0],easing:"cubicBezier(.5, .05, .1, .3)"},opacity:{value:r[1],duration:250,easing:"cubicBezier(.5, .05, .1, .3)"},complete:t})}}});function cGe(e,t,r,i,n,s){const o=or("panel-container");return De(),zi(vD,{onEnter:e.enter,onLeave:e.leave,name:"panel-container",tag:"div"},{default:Pi(()=>[Yt(" TODO: pass a corresponding fixture instance to the panel component as it can be useful "),(De(!0),et(hr,null,Oy(e.visible(e.$iApi.screenSize),a=>(De(),zi(o,{key:`${a.id}`,panel:a},null,8,["panel"]))),128))]),_:1},8,["onEnter","onLeave"])}var hGe=Ar(uGe,[["render",cGe],["__scopeId","data-v-7118f2dc"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-stack.vue"]]),Ia="top",Al="bottom",Cl="right",Ta="left",FE="auto",ex=[Ia,Al,Cl,Ta],wv="start",aF="end",dGe="clippingParents",iae="viewport",Z1="popper",pGe="reference",iq=ex.reduce(function(e,t){return e.concat([t+"-"+wv,t+"-"+aF])},[]),nae=[].concat(ex,[FE]).reduce(function(e,t){return e.concat([t,t+"-"+wv,t+"-"+aF])},[]),fGe="beforeRead",mGe="read",yGe="afterRead",gGe="beforeMain",vGe="main",bGe="afterMain",wGe="beforeWrite",_Ge="write",xGe="afterWrite",cL=[fGe,mGe,yGe,gGe,vGe,bGe,wGe,_Ge,xGe];function Wu(e){return e?(e.nodeName||"").toLowerCase():null}function Dl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Y_(e){var t=Dl(e).Element;return e instanceof t||e instanceof Element}function Hs(e){var t=Dl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function sae(e){if(typeof ShadowRoot>"u")return!1;var t=Dl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function SGe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!Hs(s)||!Wu(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function MGe(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!Hs(n)||!Wu(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var IGe={name:"applyStyles",enabled:!0,phase:"write",fn:SGe,effect:MGe,requires:["computeStyles"]};function gl(e){return e.split("-")[0]}var Kh=Math.round;function _v(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,n=1;return Hs(e)&&t&&(i=r.width/e.offsetWidth||1,n=r.height/e.offsetHeight||1),{width:Kh(r.width/i),height:Kh(r.height/n),top:Kh(r.top/n),right:Kh(r.right/i),bottom:Kh(r.bottom/n),left:Kh(r.left/i),x:Kh(r.left/i),y:Kh(r.top/n)}}function lF(e){var t=_v(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function oae(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&sae(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function kl(e){return Dl(e).getComputedStyle(e)}function TGe(e){return["table","td","th"].indexOf(Wu(e))>=0}function Cp(e){return((Y_(e)?e.ownerDocument:e.document)||window.document).documentElement}function jE(e){return Wu(e)==="html"?e:e.assignedSlot||e.parentNode||(sae(e)?e.host:null)||Cp(e)}function nq(e){return!Hs(e)||kl(e).position==="fixed"?null:e.offsetParent}function $Ge(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&Hs(e)){var i=kl(e);if(i.position==="fixed")return null}for(var n=jE(e);Hs(n)&&["html","body"].indexOf(Wu(n))<0;){var s=kl(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function tx(e){for(var t=Dl(e),r=nq(e);r&&TGe(r)&&kl(r).position==="static";)r=nq(r);return r&&(Wu(r)==="html"||Wu(r)==="body"&&kl(r).position==="static")?t:r||$Ge(e)||t}function uF(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}var ap=Math.max,K_=Math.min,RS=Math.round;function T3(e,t,r){return ap(e,K_(t,r))}function aae(){return{top:0,right:0,bottom:0,left:0}}function lae(e){return Object.assign({},aae(),e)}function uae(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var EGe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,lae(typeof t!="number"?t:uae(t,ex))};function AGe(e){var t,r=e.state,i=e.name,n=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=gl(r.placement),l=uF(a),u=[Ta,Cl].indexOf(a)>=0,h=u?"height":"width";if(!(!s||!o)){var d=EGe(n.padding,r),f=lF(s),m=l==="y"?Ia:Ta,g=l==="y"?Al:Cl,b=r.rects.reference[h]+r.rects.reference[l]-o[l]-r.rects.popper[h],w=o[l]-r.rects.reference[l],_=tx(s),x=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,I=b/2-w/2,S=d[m],T=x-f[h]-d[g],$=x/2-f[h]/2+I,E=T3(S,$,T),C=l;r.modifiersData[i]=(t={},t[C]=E,t.centerOffset=E-$,t)}}function CGe(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;if(n!=null&&!(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n))){if(Hs(n)||console.error(['Popper: "arrow" element must be an HTMLElement (not an SVGElement).',"To use an SVG arrow, wrap it in an HTMLElement that will be used as","the arrow."].join(" ")),!oae(t.elements.popper,n)){console.error(['Popper: "arrow" modifier\'s `element` must be a child of the popper',"element."].join(" "));return}t.elements.arrow=n}}var kGe={name:"arrow",enabled:!0,phase:"main",fn:AGe,effect:CGe,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},OGe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function PGe(e){var t=e.x,r=e.y,i=window,n=i.devicePixelRatio||1;return{x:RS(RS(t*n)/n)||0,y:RS(RS(r*n)/n)||0}}function sq(e){var t,r=e.popper,i=e.popperRect,n=e.placement,s=e.offsets,o=e.position,a=e.gpuAcceleration,l=e.adaptive,u=e.roundOffsets,h=u===!0?PGe(s):typeof u=="function"?u(s):s,d=h.x,f=d===void 0?0:d,m=h.y,g=m===void 0?0:m,b=s.hasOwnProperty("x"),w=s.hasOwnProperty("y"),_=Ta,x=Ia,I=window;if(l){var S=tx(r),T="clientHeight",$="clientWidth";S===Dl(r)&&(S=Cp(r),kl(S).position!=="static"&&(T="scrollHeight",$="scrollWidth")),S=S,n===Ia&&(x=Al,g-=S[T]-i.height,g*=a?1:-1),n===Ta&&(_=Cl,f-=S[$]-i.width,f*=a?1:-1)}var E=Object.assign({position:o},l&&OGe);if(a){var C;return Object.assign({},E,(C={},C[x]=w?"0":"",C[_]=b?"0":"",C.transform=(I.devicePixelRatio||1)<2?"translate("+f+"px, "+g+"px)":"translate3d("+f+"px, "+g+"px, 0)",C))}return Object.assign({},E,(t={},t[x]=w?g+"px":"",t[_]=b?f+"px":"",t.transform="",t))}function RGe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a;{var u=kl(t.elements.popper).transitionProperty||"";o&&["transform","top","right","bottom","left"].some(function(d){return u.indexOf(d)>=0})&&console.warn(["Popper: Detected CSS transitions on at least one of the following",'CSS properties: "transform", "top", "right", "bottom", "left".',`

`,'Disable the "computeStyles" modifier\'s `adaptive` option to allow',"for smooth transitions, or remove these properties from the CSS","transition declaration on the popper element if only transitioning","opacity or background-color for example.",`

`,"We recommend using the popper element as a wrapper around an inner","element that can have any CSS property transitioned for animations."].join(" "))}var h={placement:gl(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,sq(Object.assign({},h,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,sq(Object.assign({},h,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var LGe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:RGe,data:{}},LS={passive:!0};function NGe(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=Dl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(h){h.addEventListener("scroll",r.update,LS)}),a&&l.addEventListener("resize",r.update,LS),function(){s&&u.forEach(function(h){h.removeEventListener("scroll",r.update,LS)}),a&&l.removeEventListener("resize",r.update,LS)}}var DGe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:NGe,data:{}},FGe={left:"right",right:"left",bottom:"top",top:"bottom"};function $3(e){return e.replace(/left|right|bottom|top/g,function(t){return FGe[t]})}var jGe={start:"end",end:"start"};function oq(e){return e.replace(/start|end/g,function(t){return jGe[t]})}function cF(e){var t=Dl(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function hF(e){return _v(Cp(e)).left+cF(e).scrollLeft}function VGe(e){var t=Dl(e),r=Cp(e),i=t.visualViewport,n=r.clientWidth,s=r.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+hF(e),y:a}}function UGe(e){var t,r=Cp(e),i=cF(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=ap(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=ap(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+hF(e),l=-i.scrollTop;return kl(n||r).direction==="rtl"&&(a+=ap(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function dF(e){var t=kl(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function cae(e){return["html","body","#document"].indexOf(Wu(e))>=0?e.ownerDocument.body:Hs(e)&&dF(e)?e:cae(jE(e))}function Jw(e,t){var r;t===void 0&&(t=[]);var i=cae(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),s=Dl(i),o=n?[s].concat(s.visualViewport||[],dF(i)?i:[]):i,a=t.concat(o);return n?a:a.concat(Jw(jE(o)))}function hL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function zGe(e){var t=_v(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function aq(e,t){return t===iae?hL(VGe(e)):Hs(t)?zGe(t):hL(UGe(Cp(e)))}function BGe(e){var t=Jw(jE(e)),r=["absolute","fixed"].indexOf(kl(e).position)>=0,i=r&&Hs(e)?tx(e):e;return Y_(i)?t.filter(function(n){return Y_(n)&&oae(n,i)&&Wu(n)!=="body"}):[]}function GGe(e,t,r){var i=t==="clippingParents"?BGe(e):[].concat(t),n=[].concat(i,[r]),s=n[0],o=n.reduce(function(a,l){var u=aq(e,l);return a.top=ap(u.top,a.top),a.right=K_(u.right,a.right),a.bottom=K_(u.bottom,a.bottom),a.left=ap(u.left,a.left),a},aq(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function X_(e){return e.split("-")[1]}function hae(e){var t=e.reference,r=e.element,i=e.placement,n=i?gl(i):null,s=i?X_(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(n){case Ia:l={x:o,y:t.y-r.height};break;case Al:l={x:o,y:t.y+t.height};break;case Cl:l={x:t.x+t.width,y:a};break;case Ta:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?uF(n):null;if(u!=null){var h=u==="y"?"height":"width";switch(s){case wv:l[u]=l[u]-(t[h]/2-r[h]/2);break;case aF:l[u]=l[u]+(t[h]/2-r[h]/2);break}}return l}function Q_(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,s=r.boundary,o=s===void 0?dGe:s,a=r.rootBoundary,l=a===void 0?iae:a,u=r.elementContext,h=u===void 0?Z1:u,d=r.altBoundary,f=d===void 0?!1:d,m=r.padding,g=m===void 0?0:m,b=lae(typeof g!="number"?g:uae(g,ex)),w=h===Z1?pGe:Z1,_=e.elements.reference,x=e.rects.popper,I=e.elements[f?w:h],S=GGe(Y_(I)?I:I.contextElement||Cp(e.elements.popper),o,l),T=_v(_),$=hae({reference:T,element:x,strategy:"absolute",placement:n}),E=hL(Object.assign({},x,$)),C=h===Z1?E:T,O={top:S.top-C.top+b.top,bottom:C.bottom-S.bottom+b.bottom,left:S.left-C.left+b.left,right:C.right-S.right+b.right},R=e.modifiersData.offset;if(h===Z1&&R){var D=R[n];Object.keys(O).forEach(function(F){var z=[Cl,Al].indexOf(F)>=0?1:-1,B=[Ia,Al].indexOf(F)>=0?"y":"x";O[F]+=D[B]*z})}return O}function qGe(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?nae:l,h=X_(i),d=h?a?iq:iq.filter(function(g){return X_(g)===h}):ex,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d,console.error(["Popper: The `allowedAutoPlacements` option did not allow any","placements. Ensure the `placement` option matches the variation","of the allowed placements.",'For example, "auto" cannot be used to allow "bottom-start".','Use "auto-start" instead.'].join(" ")));var m=f.reduce(function(g,b){return g[b]=Q_(e,{placement:b,boundary:n,rootBoundary:s,padding:o})[gl(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function HGe(e){if(gl(e)===FE)return[];var t=$3(e);return[oq(e),t,oq(t)]}function WGe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,h=r.boundary,d=r.rootBoundary,f=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,w=t.options.placement,_=gl(w),x=_===w,I=l||(x||!g?[$3(w)]:HGe(w)),S=[w].concat(I).reduce(function(_e,Ce){return _e.concat(gl(Ce)===FE?qGe(t,{placement:Ce,boundary:h,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ce)},[]),T=t.rects.reference,$=t.rects.popper,E=new Map,C=!0,O=S[0],R=0;R<S.length;R++){var D=S[R],F=gl(D),z=X_(D)===wv,B=[Ia,Al].indexOf(F)>=0,y=B?"width":"height",M=Q_(t,{placement:D,boundary:h,rootBoundary:d,altBoundary:f,padding:u}),A=B?z?Cl:Ta:z?Al:Ia;T[y]>$[y]&&(A=$3(A));var P=$3(A),Y=[];if(s&&Y.push(M[F]<=0),a&&Y.push(M[A]<=0,M[P]<=0),Y.every(function(_e){return _e})){O=D,C=!1;break}E.set(D,Y)}if(C)for(var Q=g?3:1,le=function(Ce){var Ne=S.find(function(ht){var st=E.get(ht);if(st)return st.slice(0,Ce).every(function(pt){return pt})});if(Ne)return O=Ne,"break"},re=Q;re>0;re--){var we=le(re);if(we==="break")break}t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}}var JGe={name:"flip",enabled:!0,phase:"main",fn:WGe,requiresIfExists:["offset"],data:{_skip:!1}};function lq(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function uq(e){return[Ia,Cl,Al,Ta].some(function(t){return e[t]>=0})}function ZGe(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=Q_(t,{elementContext:"reference"}),a=Q_(t,{altBoundary:!0}),l=lq(o,i),u=lq(a,n,s),h=uq(l),d=uq(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}var YGe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:ZGe};function KGe(e,t,r){var i=gl(e),n=[Ta,Ia].indexOf(i)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Ta,Cl].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function XGe(e){var t=e.state,r=e.options,i=e.name,n=r.offset,s=n===void 0?[0,0]:n,o=nae.reduce(function(h,d){return h[d]=KGe(d,t.rects,s),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}var QGe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:XGe};function eqe(e){var t=e.state,r=e.name;t.modifiersData[r]=hae({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var tqe={name:"popperOffsets",enabled:!0,phase:"read",fn:eqe,data:{}};function rqe(e){return e==="x"?"y":"x"}function iqe(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,h=r.altBoundary,d=r.padding,f=r.tether,m=f===void 0?!0:f,g=r.tetherOffset,b=g===void 0?0:g,w=Q_(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:h}),_=gl(t.placement),x=X_(t.placement),I=!x,S=uF(_),T=rqe(S),$=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,O=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,R={x:0,y:0};if(!!$){if(s||a){var D=S==="y"?Ia:Ta,F=S==="y"?Al:Cl,z=S==="y"?"height":"width",B=$[S],y=$[S]+w[D],M=$[S]-w[F],A=m?-C[z]/2:0,P=x===wv?E[z]:C[z],Y=x===wv?-C[z]:-E[z],Q=t.elements.arrow,le=m&&Q?lF(Q):{width:0,height:0},re=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:aae(),we=re[D],_e=re[F],Ce=T3(0,E[z],le[z]),Ne=I?E[z]/2-A-Ce-we-O:P-Ce-we-O,ht=I?-E[z]/2+A+Ce+_e+O:Y+Ce+_e+O,st=t.elements.arrow&&tx(t.elements.arrow),pt=st?S==="y"?st.clientTop||0:st.clientLeft||0:0,Pt=t.modifiersData.offset?t.modifiersData.offset[t.placement][S]:0,X=$[S]+Ne-Pt-pt,te=$[S]+ht-Pt;if(s){var he=T3(m?K_(y,X):y,B,m?ap(M,te):M);$[S]=he,R[S]=he-B}if(a){var V=S==="x"?Ia:Ta,J=S==="x"?Al:Cl,ne=$[T],pe=ne+w[V],k=ne-w[J],q=T3(m?K_(pe,X):pe,ne,m?ap(k,te):k);$[T]=q,R[T]=q-ne}}t.modifiersData[i]=R}}var nqe={name:"preventOverflow",enabled:!0,phase:"main",fn:iqe,requiresIfExists:["offset"]};function sqe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function oqe(e){return e===Dl(e)||!Hs(e)?cF(e):sqe(e)}function aqe(e){var t=e.getBoundingClientRect(),r=t.width/e.offsetWidth||1,i=t.height/e.offsetHeight||1;return r!==1||i!==1}function lqe(e,t,r){r===void 0&&(r=!1);var i=Hs(t),n=Hs(t)&&aqe(t),s=Cp(t),o=_v(e,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((Wu(t)!=="body"||dF(s))&&(a=oqe(t)),Hs(t)?(l=_v(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=hF(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function uqe(e){var t=new Map,r=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&n(l)}}),i.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),i}function cqe(e){var t=uqe(e);return cL.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function hqe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function Xh(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return[].concat(r).reduce(function(n,s){return n.replace(/%s/,s)},e)}var Gp='Popper: modifier "%s" provided an invalid %s property, expected %s but got %s',dqe='Popper: modifier "%s" requires "%s", but "%s" modifier is not available',pqe=["name","enabled","phase","fn","effect","requires","options"];function fqe(e){e.forEach(function(t){Object.keys(t).forEach(function(r){switch(r){case"name":typeof t.name!="string"&&console.error(Xh(Gp,String(t.name),'"name"','"string"','"'+String(t.name)+'"'));break;case"enabled":typeof t.enabled!="boolean"&&console.error(Xh(Gp,t.name,'"enabled"','"boolean"','"'+String(t.enabled)+'"'));case"phase":cL.indexOf(t.phase)<0&&console.error(Xh(Gp,t.name,'"phase"',"either "+cL.join(", "),'"'+String(t.phase)+'"'));break;case"fn":typeof t.fn!="function"&&console.error(Xh(Gp,t.name,'"fn"','"function"','"'+String(t.fn)+'"'));break;case"effect":typeof t.effect!="function"&&console.error(Xh(Gp,t.name,'"effect"','"function"','"'+String(t.fn)+'"'));break;case"requires":Array.isArray(t.requires)||console.error(Xh(Gp,t.name,'"requires"','"array"','"'+String(t.requires)+'"'));break;case"requiresIfExists":Array.isArray(t.requiresIfExists)||console.error(Xh(Gp,t.name,'"requiresIfExists"','"array"','"'+String(t.requiresIfExists)+'"'));break;case"options":case"data":break;default:console.error('PopperJS: an invalid property has been provided to the "'+t.name+'" modifier, valid properties are '+pqe.map(function(i){return'"'+i+'"'}).join(", ")+'; but "'+r+'" was provided.')}t.requires&&t.requires.forEach(function(i){e.find(function(n){return n.name===i})==null&&console.error(Xh(dqe,String(t.name),i,i))})})})}function mqe(e,t){var r=new Set;return e.filter(function(i){var n=t(i);if(!r.has(n))return r.add(n),!0})}function yqe(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var cq="Popper: Invalid reference or popper argument provided. They must be either a DOM element or virtual element.",gqe="Popper: An infinite loop in the modifiers cycle has been detected! The cycle has been interrupted to prevent a browser crash.",hq={placement:"bottom",modifiers:[],strategy:"absolute"};function dq(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function vqe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?hq:n;return function(a,l,u){u===void 0&&(u=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},hq,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:h,setOptions:function(_){b(),h.options=Object.assign({},s,h.options,_),h.scrollParents={reference:Y_(a)?Jw(a):a.contextElement?Jw(a.contextElement):[],popper:Jw(l)};var x=cqe(yqe([].concat(i,h.options.modifiers)));h.orderedModifiers=x.filter(function(R){return R.enabled});{var I=mqe([].concat(x,h.options.modifiers),function(R){var D=R.name;return D});if(fqe(I),gl(h.options.placement)===FE){var S=h.orderedModifiers.find(function(R){var D=R.name;return D==="flip"});S||console.error(['Popper: "auto" placements require the "flip" modifier be',"present and enabled to work."].join(" "))}var T=kl(l),$=T.marginTop,E=T.marginRight,C=T.marginBottom,O=T.marginLeft;[$,E,C,O].some(function(R){return parseFloat(R)})&&console.warn(['Popper: CSS "margin" styles cannot be used to apply padding',"between the popper and its reference element or boundary.","To replicate margin, use the `offset` modifier, as well as","the `padding` option in the `preventOverflow` and `flip`","modifiers."].join(" "))}return g(),m.update()},forceUpdate:function(){if(!f){var _=h.elements,x=_.reference,I=_.popper;if(!dq(x,I)){console.error(cq);return}h.rects={reference:lqe(x,tx(I),h.options.strategy==="fixed"),popper:lF(I)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(D){return h.modifiersData[D.name]=Object.assign({},D.data)});for(var S=0,T=0;T<h.orderedModifiers.length;T++){if(S+=1,S>100){console.error(gqe);break}if(h.reset===!0){h.reset=!1,T=-1;continue}var $=h.orderedModifiers[T],E=$.fn,C=$.options,O=C===void 0?{}:C,R=$.name;typeof E=="function"&&(h=E({state:h,options:O,name:R,instance:m})||h)}}},update:hqe(function(){return new Promise(function(w){m.forceUpdate(),w(h)})}),destroy:function(){b(),f=!0}};if(!dq(a,l))return console.error(cq),m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){h.orderedModifiers.forEach(function(w){var _=w.name,x=w.options,I=x===void 0?{}:x,S=w.effect;if(typeof S=="function"){var T=S({state:h,name:_,instance:m,options:I}),$=function(){};d.push(T||$)}})}function b(){d.forEach(function(w){return w()}),d=[]}return m}}var bqe=[DGe,tqe,LGe,IGe,QGe,JGe,nqe,kGe,YGe],wqe=vqe({defaultModifiers:bqe});const _qe=tr({name:"DropdownMenuV",props:{position:{type:String,default:"bottom"},popperOptions:{type:Object,default:{}},tooltip:{type:String},tooltipPlacement:{type:String,default:"bottom"},tooltipTheme:{type:String,default:"ramp4"},tooltipAnimation:{type:String,default:"scale"},centered:{type:Boolean,default:!0}},data(){return{open:!1,popper:null,watchers:[]}},created(){this.watchers.push(this.$watch("open",()=>{this.popper.update()}))},mounted(){window.addEventListener("click",e=>{this.$el.contains(e.target)||(this.open=!1)},{capture:!0}),window.addEventListener("blur",()=>{this.open=!1}),window.addEventListener("focusin",e=>{this.$el.contains(e.target)||(this.open=!1)}),this.$nextTick(()=>{this.popper=wqe(this.$refs["dropdown-trigger"],this.$refs.dropdown,{placement:this.position||"bottom",modifiers:[{name:"offset",options:{offset:[0,5]}}],...this.popperOptions})})},beforeUnmount(){this.watchers.forEach(e=>e()),window.removeEventListener("click",e=>{this.$el.contains(e.target)||(this.open=!1)},{capture:!0}),window.removeEventListener("blur",()=>{this.open=!1}),window.removeEventListener("focusin",e=>{this.$el.contains(e.target)||(this.open=!1)}),this.open=!1}}),xqe=["content"];function Sqe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",null,[xr((De(),et("button",{class:"text-gray-500 hover:text-black dropdown-button",onClick:t[0]||(t[0]=a=>e.open=!e.open),content:e.tooltip,ref:"dropdown-trigger"},[cl(e.$slots,"header")],8,xqe)),[[o,{placement:e.tooltipPlacement,theme:e.tooltipTheme,animation:e.tooltipAnimation,appendTo:"parent"}]]),xr(ke("div",{onClick:t[1]||(t[1]=a=>e.popper.update()),class:zn(["rv-dropdown shadow-md border border-gray:200 py-8 bg-white rounded z-10",{"text-center":e.centered}]),ref:"dropdown"},[cl(e.$slots,"default",{close:()=>e.open=!e.open})],2),[[xE,e.open]])])}var VE=Ar(_qe,[["render",Sqe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/controls/dropdown-menu.vue"]]);const Mqe=tr({name:"NotificationsScreenV",props:{panel:{type:Object,required:!0}},components:{"notification-list":dE(()=>ae(()=>Promise.resolve().then(function(){return Xqe}),void 0))},data(){return{clearAll:this.call("notification/clearAll")}}}),Iqe={class:"h-full flex flex-col"},Tqe={class:"w-full flex mb-6"},$qe=["content"],Eqe=ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[ke("path",{d:"M0 0h24v24H0z",fill:"none"}),ke("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1);function Aqe(e,t,r,i,n,s){const o=or("notification-list"),a=or("panel-screen"),l=Er("tippy");return De(),zi(a,{panel:e.panel},{header:Pi(()=>[lh(jr(e.$t("notifications.title")),1)]),content:Pi(()=>[ke("div",Iqe,[ke("div",Tqe,[xr((De(),et("button",{onClick:t[0]||(t[0]=(...u)=>e.clearAll&&e.clearAll(...u)),class:"text-gray-500 hover:text-black p-4 ml-auto",content:e.$t("notifications.controls.clearAll")},[Yt(" https://fonts.google.com/icons?selected=Material%20Icons%3Aclear_all "),Eqe],8,$qe)),[[l,{placement:"bottom",theme:"ramp4",animation:"scale"}]])]),Mt(o,{class:"overflow-y-auto"})])]),_:1},8,["panel"])}var Cqe=Ar(Mqe,[["render",Aqe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/screen.vue"]]),E3=(e=>(e.ERROR="error",e.INFO="info",e.WARNING="warning",e))(E3||{});class kqe extends Gi{constructor(t){super(t),this.$iApi.panel.register({id:"notifications",config:{screens:{"notifications-screen":Gn(Cqe)},alertName:"notifications.title"}})}show(t,r){this.$vApp.$store.dispatch("notification/showNotification",{type:t,message:r})}addGroup(t,r,i){if(this.getGroup(t))throw new Error("Duplicate notification group id registration: "+t);const n=new dae(this.$iApi,t,r,i);return this.$vApp.$store.dispatch("notification/registerGroup",n),n}getGroup(t){return this.$vApp.$store.get(`notification/groups@${t}`)}}class dae extends Gi{id;message;type;messageList=[];constructor(t,r,i,n){super(t),this.id=r,this.type=i,this.message=n}show(t){this.$vApp.$store.dispatch("notification/addToGroup",{id:this.id,message:t})}}const Oqe=tr({name:"NotificationListV",props:{notification:{type:Object,required:!0}},data(){return{removeNotification:this.call("notification/removeNotification"),open:!1,icons:{[E3.WARNING]:"\u26A0",[E3.INFO]:"\u2611",[E3.ERROR]:"\u274C"}}},methods:{tooltipShow(){if(!this.notification.messageList)return!1}}}),Pqe=["content"],Rqe={class:"flex items-center h-32"},Lqe=ke("span",{class:"flex-grow"},null,-1),Nqe=ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-16 h-16"},[ke("path",{d:"M0 0h24v24H0V0z",fill:"none"}),ke("path",{d:"M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"})],-1),Dqe=[Nqe],Fqe=["content"],jqe=ke("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[ke("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),Vqe=[jqe],Uqe={key:0,class:"text-left"};function zqe(e,t,r,i,n,s){const o=Er("tippy");return xr((De(),et("li",{class:zn(["flex-col default-focus-style px-4",e.notification.messageList?"cursor-pointer":""]),content:e.$t(e.open?"notifications.controls.collapse":"notifications.controls.expand"),onClick:t[1]||(t[1]=a=>e.open=!e.open)},[ke("div",Rqe,[ke("span",null,jr(e.icons[e.notification.type])+" "+jr(e.notification.message),1),Lqe,e.notification.messageList?(De(),et("div",{key:0,class:zn(["mx-4 p-4 pointer-events-none",{"rotate-180":!0}])},Dqe)):Yt("v-if",!0),xr((De(),et("button",{onClick:t[0]||(t[0]=_E(a=>e.removeNotification(e.notification),["stop"])),class:"mx-4 p-4",content:e.$t("notifications.controls.dismiss")},Vqe,8,Fqe)),[[o,{theme:"ramp4",animation:"scale"}]])]),e.notification.messageList&&e.open?(De(),et("div",Uqe,[(De(!0),et(hr,null,Oy(e.notification.messageList,(a,l)=>(De(),et("p",{key:e.notification.id+a+l},jr(a),1))),128))])):Yt("v-if",!0)],10,Pqe)),[[o,{onShow:e.tooltipShow,theme:"ramp4",animation:"scale"}]])}var Bqe=Ar(Oqe,[["render",zqe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/notification-item.vue"]]);const Gqe=tr({name:"NotificationListV",components:{"notification-item":Bqe},data(){return{notificationStack:this.get("notification/notificationStack")}}}),qqe={key:0},Hqe={key:0,class:"w-full border-b border-black"},Wqe={class:"flex flex-col items-center h-full"},Jqe=ke("span",{class:"flex-grow"},null,-1),Zqe=ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-48 w-48 fill-current"},[ke("path",{d:"M0 0h24v24H0z",fill:"none"}),ke("path",{d:"M18 7l-1.41-1.41-6.34 6.34 1.41 1.41L18 7zm4.24-1.41L11.66 16.17 7.48 12l-1.41 1.41L11.66 19l12-12-1.42-1.41zM.41 13.41L6 19l1.41-1.41L1.83 12 .41 13.41z"})],-1),Yqe=ke("span",{style:{"flex-grow":"6"}},null,-1);function Kqe(e,t,r,i,n,s){const o=or("notification-item"),a=Er("focus-item"),l=Er("focus-list");return De(),et(hr,null,[Yt(" Yes Notifications "),ke("div",null,[e.notificationStack.length>0?xr((De(),et("ul",qqe,[(De(!0),et(hr,null,Oy(e.notificationStack,(u,h)=>(De(),et(hr,{key:u.message+h},[h>0?(De(),et("div",Hqe)):Yt("v-if",!0),xr(Mt(o,{class:zn([u.type]),notification:u},null,8,["class","notification"]),[[a]])],64))),128))])),[[l]]):(De(),et(hr,{key:1},[Yt(" No Notifications "),ke("div",Wqe,[Jqe,Zqe,ke("span",null,jr(e.$t("notifications.empty")),1),Yqe])],2112))])],2112)}var pae=Ar(Gqe,[["render",Kqe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/notification-list.vue"]]),Xqe=Object.freeze(Object.defineProperty({__proto__:null,default:pae},Symbol.toStringTag,{value:"Module"}));const Qqe=tr({name:"NotificationsCaptionButtonV",components:{"dropdown-menu":VE,"notification-list":pae},data(){return{number:this.get("notification/notificationNumber"),clearAll:this.call("notification/clearAll")}}}),fae=e=>(Th("data-v-4eba693e"),e=e(),$h(),e),eHe={class:"flex items-center hover:text-white"},tHe=fae(()=>ke("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ke("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),rHe={key:0,class:"number rounded-full w-18 text-white"},iHe={class:"notification-dropdown pointer-events-auto bg-white rounded text-center text-black w-500 h-256 flex flex-col p-0"},nHe={class:"pb-8 border-b border-gray-600"},sHe={class:"absolute flex right-3 top-3"},oHe=["content"],aHe=fae(()=>ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current h-24 w-24"},[ke("path",{d:"M0 0h24v24H0z",fill:"none"}),ke("path",{d:"M5 13h14v-2H5v2zm-2 4h14v-2H3v2zM7 7v2h14V7H7z"})],-1));function lHe(e,t,r,i,n,s){const o=or("close"),a=or("notification-list"),l=or("dropdown-menu"),u=Er("tippy");return De(),zi(l,{position:"top-start","aria-label":e.$t("notifications.title"),tooltip:e.$t("notifications.title"),tooltipPlacement:"top",class:"pointer-events-auto sm:flex ml-4 mr-8"},{header:Pi(()=>[ke("div",eHe,[Yt(" https://fonts.google.com/icons?selected=Material%20Icons%3Anotifications "),tHe,e.number&&e.number>0?(De(),et("span",rHe,jr(e.number),1)):Yt("v-if",!0)])]),default:Pi(h=>[ke("div",iHe,[ke("div",null,[ke("h4",nHe,jr(e.$t("notifications.title")),1),ke("div",sHe,[xr((De(),et("button",{onClick:t[0]||(t[0]=(...d)=>e.clearAll&&e.clearAll(...d)),class:"text-gray-500 hover:text-black p-4 mr-6",content:e.$t("notifications.controls.clearAll")},[Yt(" https://fonts.google.com/icons?selected=Material%20Icons%3Aclear_all "),aHe],8,oHe)),[[u,{placement:"bottom",theme:"ramp4",animation:"scale",appendTo:"parent"}]]),Mt(o,{onClick:h.close},null,8,["onClick"])])]),Mt(a,{class:"overflow-y-auto"})])]),_:1},8,["aria-label","tooltip"])}var uHe=Ar(Qqe,[["render",lHe],["__scopeId","data-v-4eba693e"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/caption-button.vue"]]);const cHe=tr({name:"AboutRampDropdownV",props:{position:{type:String,default:"top-start"}},components:{"dropdown-menu":VE},computed:{versionString(){return`${X1.major}.${X1.minor}.${X1.patch}`},versionHash(){return X1.hash.slice(0,9)},buildDate(){let e=new Date(X1.timestamp);if(isNaN(e))return"dev mode, no date";{const t=r=>r<10?"0"+r.toString():r.toString();return`${e.getFullYear()}-${e.getMonth()+1}-${e.getDate()} ${e.getHours()}:${t(e.getMinutes())}:${t(e.getSeconds())}`}}}}),mae=e=>(Th("data-v-3779501c"),e=e(),$h(),e),hHe=mae(()=>ke("div",{class:"flex hover:text-white"},[ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[ke("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})])],-1)),dHe={class:"about-ramp-dropdown pointer-events-auto bg-white rounded w-256 h-50"},pHe={class:"pb-8 border-b border-gray-600 mb-10"},fHe={class:"absolute right-5 top-5"},mHe={class:"font-bold"},yHe={class:"text-sm"},gHe={class:"text-sm"},vHe=mae(()=>ke("div",{class:"mt-5"},[ke("a",{class:"text-sm underline text-blue-600",href:"https://github.com/ramp4-pcar4/ramp4-pcar4",target:"_blank"},[ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"inline-block fill-black w-16 h-16"},[ke("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})]),lh(" ramp4-pcar4 ")])],-1));function bHe(e,t,r,i,n,s){const o=or("close"),a=or("dropdown-menu"),l=Er("focus-item");return xr((De(),zi(a,{class:"pointer-events-auto sm:flex","aria-label":e.$t("ramp.about"),position:e.position,tooltip:e.$t("ramp.about"),tooltipPlacement:e.position},{header:Pi(()=>[hHe]),default:Pi(u=>[ke("div",dHe,[ke("div",null,[ke("h4",pHe,jr(e.$t("ramp.about")),1),ke("div",fHe,[Mt(o,{onClick:u.close},null,8,["onClick"])]),ke("div",null,[ke("div",null,[ke("span",mHe,jr(e.versionString),1),ke("span",yHe," ["+jr(e.versionHash)+"] ",1)]),ke("div",null,[ke("span",gHe,jr(e.buildDate),1)]),vHe])])])]),_:1},8,["aria-label","position","tooltip","tooltipPlacement"])),[[l]])}var wHe=Ar(cHe,[["render",bHe],["__scopeId","data-v-3779501c"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/about-ramp/about-ramp-dropdown.vue"]]);const _He=tr({data(){return{scale:this.get(Cs.scale),attribution:this.get(Cs.attribution),cursorCoords:this.get(Cs.cursorCoords),mapConfig:this.get(ls.getMapConfig),lang:[],watchers:[]}},components:{"notifications-caption-button":uHe,"about-ramp-dropdown":wHe},created(){this.watchers.push(this.$watch("mapConfig",e=>{!e||this.$iApi.geo.map.caption.createCaption(this.mapConfig.caption)}))},beforeUnmount(){this.watchers.forEach(e=>e())},updated(){this.$nextTick(function(){this.$iApi.$vApp.$i18n&&this.lang.length==0&&(this.lang=this.$iApi.$vApp.$i18n.availableLocales)})},methods:{changeLang(e){this.$iApi.$vApp.$i18n.locale!=e&&this.$iApi.setLanguage(e)},onScaleClick(){this.$iApi.$vApp.$store.set(Cs.toggleScale,void 0),this.$iApi.geo.map.caption.updateScale()}}}),xHe=e=>(Th("data-v-0d8b8d65"),e=e(),$h(),e),SHe={class:"map-caption absolute bottom-0 flex justify-end pointer-events-auto cursor-default select-none text-gray-400 bg-black-75 left-0 right-0 py-2 sm:py-6"},MHe={key:0,class:"relative truncate top-1 sm:block display-none shrink-0"},IHe=["href","aria-label"],THe=["src","alt"],$He={key:1,class:"relative ml-10 top-2 sm:block display-none"},EHe=xHe(()=>ke("span",{class:"flex-grow w-15"},null,-1)),AHe={class:"flex min-w-0 sm:min-w-fit relative justify-end"},CHe={key:0,class:"relative top-2 pl-8 sm:px-14 text-sm sm:text-base"},kHe=["aria-pressed","aria-label","content"],OHe={class:"relative text-sm sm:text-base"},PHe={class:"text-gray-400 hover:text-white text-sm sm:text-base pb-5"},RHe=["onClick"],LHe={key:0,class:"sr-only"};function NHe(e,t,r,i,n,s){const o=or("about-ramp-dropdown"),a=or("notifications-caption-button"),l=or("dropdown-menu"),u=Er("truncate"),h=Er("tippy");return De(),et("div",SHe,[Mt(o,{class:"sm:block display-none ml-8 mr-4",position:"top-end"}),Mt(a,{class:"sm:block display-none"}),e.attribution.logo.disabled?Yt("v-if",!0):(De(),et("span",MHe,[ke("a",{class:"pointer-events-auto cursor-pointer",href:e.attribution.logo.link,target:"_blank","aria-label":e.attribution.logo.altText},[ke("img",{class:"object-contain h-26",src:e.attribution.logo.value,alt:e.attribution.logo.altText},null,8,THe)],8,IHe)])),e.attribution.text.disabled?Yt("v-if",!0):xr((De(),et("span",$He,[lh(jr(e.attribution.text.value),1)])),[[u,{options:{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale",appendTo:"parent"}}]]),EHe,Yt(" TODO: find out if any ARIA attributes are needed for the map scale "),ke("div",AHe,[e.cursorCoords.disabled?Yt("v-if",!0):xr((De(),et("div",CHe,[lh(jr(e.cursorCoords.formattedString),1)])),[[u,{options:{hideOnClick:!1,theme:"ramp4",animation:"scale"}}]]),e.scale.disabled?Yt("v-if",!0):xr((De(),et("button",{key:1,class:"flex-shrink-0 mx-10 px-4 pointer-events-auto cursor-pointer border-none",onClick:t[0]||(t[0]=(...d)=>e.onScaleClick&&e.onScaleClick(...d)),"aria-pressed":e.scale.isImperialScale,"aria-label":e.$t("map.toggleScaleUnits"),content:e.$t("map.toggleScaleUnits")},[ke("span",{class:"border-solid border-2 border-white border-t-0 h-5 mr-4 inline-block",style:$p({width:e.scale.width})},null,4),ke("span",OHe,jr(e.scale.label),1)],8,kHe)),[[h,{placement:"top",hideOnClick:!1,theme:"ramp4",animation:"scale"}]]),Mt(l,{class:"flex-shrink-0 pointer-events-auto focus:outline-none px-4 mr-4",position:"top-end",tooltip:e.$t("map.changeLanguage"),"tooltip-placement":"top-end"},{header:Pi(()=>[ke("span",PHe,jr(e.$t("map.language.short")),1)]),default:Pi(()=>[(De(!0),et(hr,null,Oy(e.lang,(d,f)=>(De(),et("a",{key:`${d}-${f}`,class:zn(["flex-auto items-center text-sm sm:text-base cursor-pointer",{"font-bold":d===e.$iApi.$vApp.$i18n.locale}]),href:"javascript:;",onClick:m=>e.changeLang(d)},[lh(jr(e.$t("map.language."+d))+" ",1),d===e.$iApi.$vApp.$i18n.locale?(De(),et("span",LHe,jr(e.$t("map.language.curr")),1)):Yt("v-if",!0)],10,RHe))),128))]),_:1},8,["tooltip"])])])}var DHe=Ar(_He,[["render",NHe],["__scopeId","data-v-0d8b8d65"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/map/map-caption.vue"]]);const FHe=tr({name:"NotificationsFloatingButtonV",data(){return{number:this.get("notification/notificationNumber")}}}),jHe=e=>(Th("data-v-51e4c864"),e=e(),$h(),e),VHe=["content"],UHe=jHe(()=>ke("svg",{class:"fill-current w-24 h-24",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ke("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"})],-1)),zHe={key:0,class:"number absolute -top-2 -right-2 text-white w-18 rounded-full"};function BHe(e,t,r,i,n,s){const o=Er("tippy");return xr((De(),et("button",{onClick:t[0]||(t[0]=a=>e.$iApi.panel.get("notifications").open()),class:"pointer-events-auto flex items-center absolute left-8 bottom-36 p-6 block sm:display-none bg-black-75 rounded-full text-gray-400 hover:text-white",content:e.$t("notifications.title")},[Yt(" https://fonts.google.com/icons?selected=Material%20Icons%3Anotifications "),UHe,e.number&&e.number>0?(De(),et("span",zHe,jr(e.number),1)):Yt("v-if",!0)],8,VHe)),[[o]])}var GHe=Ar(FHe,[["render",BHe],["__scopeId","data-v-51e4c864"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/notification-center/floating-button.vue"]]);const qHe=tr({name:"KeyboardInstructionsModalV",data(){return{open:!1,instructionSections:["app","lists","map"],handlers:[]}},mounted(){this.handlers.push(this.$iApi.event.on("openKeyboardInstructions",()=>{this.open=!0,this.$nextTick(()=>{this.$refs.firstEl?.focus()})}))},beforeUnmount(){this.handlers.forEach(e=>this.$iApi.event.off(e))},methods:{onKeydown(e){e.key==="Tab"?e.shiftKey&&e.target===this.$refs.firstEl?(e.preventDefault(),this.$refs.lastEl.focus()):!e.shiftKey&&e.target==this.$refs.lastEl&&(e.preventDefault(),this.$refs.firstEl.focus()):e.key==="Escape"&&(e.preventDefault(),this.open=!1)}}}),HHe={class:"flex items-center mb-20"},WHe={class:"text-xl"};function JHe(e,t,r,i,n,s){const o=or("close");return e.open?(De(),et("div",{key:0,class:"absolute inset-0 flex justify-center items-center bg-opacity-30 bg-black z-50 pointer-events-auto",onClick:t[3]||(t[3]=a=>e.open=!1),onKeydown:t[4]||(t[4]=(...a)=>e.onKeydown&&e.onKeydown(...a))},[ke("div",{class:"bg-white w-500 pointer-events-auto shadow-2xl p-20 flex flex-col",onClick:t[2]||(t[2]=_E(()=>{},["stop","prevent"])),tabindex:"0",ref:"firstEl"},[ke("div",HHe,[ke("h2",WHe,jr(e.$t("keyboardInstructions.title")),1),Mt(o,{class:"ml-auto",onClick:t[0]||(t[0]=a=>e.open=!1)})]),(De(!0),et(hr,null,Oy(e.instructionSections,a=>(De(),et("p",{class:"whitespace-pre-line pb-10",key:a},jr(e.$t(`keyboardInstructions.${a}`)),1))),128)),ke("button",{class:"mt-auto self-end mr-10 mb-10 px-20 py-10",onClick:t[1]||(t[1]=a=>e.open=!1),ref:"lastEl"},jr(e.$t("keyboardInstructions.OK")),513)],512)],32)):Yt("v-if",!0)}var ZHe=Ar(qHe,[["render",JHe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/keyboard-instructions.vue"]]);const YHe=tr({name:"Shell",components:{"esri-map":CBe,"panel-stack":hGe,"map-caption":DHe,"notification-floating-button":GHe,"keyboard-instructions-modal":ZHe},data(){return{appbarFixture:this.get("fixture/items@appbar"),start:!1}},created(){this.$iApi.startRequired?this.$iApi.event.once(vt.MAP_START,()=>{this.start=!0}):(this.$iApi.event.emit(vt.MAP_START),this.start=!0)},methods:{openKeyboardInstructions(){this.$iApi.event.emit("openKeyboardInstructions")}}}),yae=e=>(Th("data-v-184a6fda"),e=e(),$h(),e),KHe={class:"h-full relative"},XHe={class:"inner-shell absolute top-0 left-0 h-full w-full pointer-events-none"},QHe=yae(()=>ke("div",{class:"sr-only screen-reader-alert"},null,-1)),eWe={class:"absolute top-8 w-full flex justify-center"},tWe={key:1,class:"w-full h-full"},rWe=yae(()=>ke("div",{class:"spinner relative inset-x-1/2 inset-y-9/20"},null,-1)),iWe=[rWe];function nWe(e,t,r,i,n,s){const o=or("keyboard-instructions-modal"),a=or("panel-stack"),l=or("notification-floating-button"),u=or("map-caption"),h=or("esri-map");return De(),et("div",KHe,[Yt(" TODO: should inner shell be a separate component? "),ke("div",XHe,[QHe,ke("div",eWe,[ke("button",{class:"bg-white opacity-0 focus:opacity-100 z-50 shadow-md px-10",onClick:t[0]||(t[0]=(...d)=>e.openKeyboardInstructions&&e.openKeyboardInstructions(...d))},jr(e.$t("keyboardInstructions.open")),1)]),Mt(o),Mt(a,{class:"panel-stack sm:flex absolute inset-0 overflow-hidden sm:p-12 z-10 sm:pl-80 xs:pl-40 sm:pb-48 xs:pb-28 xs:pr-0 sm:pr-40"}),e.appbarFixture?Yt("v-if",!0):(De(),zi(l,{key:0})),Mt(u,{class:"z-10"})]),e.start?(De(),zi(h,{key:0})):(De(),et("div",tWe,iWe))])}var sWe=Ar(YHe,[["render",nWe],["__scopeId","data-v-184a6fda"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/shell.vue"]]);if("ResizeObserver"in self)var oWe=new ResizeObserver(function(e){var t={xs:200,sm:576,md:768,lg:960};e.forEach(function(r){var i=r.target.dataset.breakpoints?JSON.parse(r.target.dataset.breakpoints):t;Object.keys(i).forEach(function(n){var s=i[n];r.contentRect.width>=s?r.target.classList.add(n):r.target.classList.remove(n)})})});var aWe=oWe;/*!
  * vue-tippy v6.0.0-alpha.57
  * (c) 2022 
  * @license MIT
  */var Ws="top",$a="bottom",Ea="right",Js="left",pF="auto",rx=[Ws,$a,Ea,Js],xv="start",e2="end",lWe="clippingParents",gae="viewport",Y1="popper",uWe="reference",pq=rx.reduce(function(e,t){return e.concat([t+"-"+xv,t+"-"+e2])},[]),vae=[].concat(rx,[pF]).reduce(function(e,t){return e.concat([t,t+"-"+xv,t+"-"+e2])},[]),cWe="beforeRead",hWe="read",dWe="afterRead",pWe="beforeMain",fWe="main",mWe="afterMain",yWe="beforeWrite",gWe="write",vWe="afterWrite",bWe=[cWe,hWe,dWe,pWe,fWe,mWe,yWe,gWe,vWe];function Ju(e){return e?(e.nodeName||"").toLowerCase():null}function Fl(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Sv(e){var t=Fl(e).Element;return e instanceof t||e instanceof Element}function _a(e){var t=Fl(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function bae(e){if(typeof ShadowRoot>"u")return!1;var t=Fl(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function wWe(e){var t=e.state;Object.keys(t.elements).forEach(function(r){var i=t.styles[r]||{},n=t.attributes[r]||{},s=t.elements[r];!_a(s)||!Ju(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function _We(e){var t=e.state,r={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,r.popper),t.styles=r,t.elements.arrow&&Object.assign(t.elements.arrow.style,r.arrow),function(){Object.keys(t.elements).forEach(function(i){var n=t.elements[i],s=t.attributes[i]||{},o=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:r[i]),a=o.reduce(function(l,u){return l[u]="",l},{});!_a(n)||!Ju(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(l){n.removeAttribute(l)}))})}}var wae={name:"applyStyles",enabled:!0,phase:"write",fn:wWe,effect:_We,requires:["computeStyles"]};function Fu(e){return e.split("-")[0]}var km=Math.max,AT=Math.min,Mv=Math.round;function Iv(e,t){t===void 0&&(t=!1);var r=e.getBoundingClientRect(),i=1,n=1;if(_a(e)&&t){var s=e.offsetHeight,o=e.offsetWidth;o>0&&(i=Mv(r.width)/o||1),s>0&&(n=Mv(r.height)/s||1)}return{width:r.width/i,height:r.height/n,top:r.top/n,right:r.right/i,bottom:r.bottom/n,left:r.left/i,x:r.left/i,y:r.top/n}}function fF(e){var t=Iv(e),r=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-r)<=1&&(r=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:r,height:i}}function _ae(e,t){var r=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(r&&bae(r)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Zu(e){return Fl(e).getComputedStyle(e)}function xWe(e){return["table","td","th"].indexOf(Ju(e))>=0}function kp(e){return((Sv(e)?e.ownerDocument:e.document)||window.document).documentElement}function UE(e){return Ju(e)==="html"?e:e.assignedSlot||e.parentNode||(bae(e)?e.host:null)||kp(e)}function fq(e){return!_a(e)||Zu(e).position==="fixed"?null:e.offsetParent}function SWe(e){var t=navigator.userAgent.toLowerCase().indexOf("firefox")!==-1,r=navigator.userAgent.indexOf("Trident")!==-1;if(r&&_a(e)){var i=Zu(e);if(i.position==="fixed")return null}for(var n=UE(e);_a(n)&&["html","body"].indexOf(Ju(n))<0;){var s=Zu(n);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return n;n=n.parentNode}return null}function ix(e){for(var t=Fl(e),r=fq(e);r&&xWe(r)&&Zu(r).position==="static";)r=fq(r);return r&&(Ju(r)==="html"||Ju(r)==="body"&&Zu(r).position==="static")?t:r||SWe(e)||t}function mF(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Zw(e,t,r){return km(e,AT(t,r))}function MWe(e,t,r){var i=Zw(e,t,r);return i>r?r:i}function xae(){return{top:0,right:0,bottom:0,left:0}}function Sae(e){return Object.assign({},xae(),e)}function Mae(e,t){return t.reduce(function(r,i){return r[i]=e,r},{})}var IWe=function(t,r){return t=typeof t=="function"?t(Object.assign({},r.rects,{placement:r.placement})):t,Sae(typeof t!="number"?t:Mae(t,rx))};function TWe(e){var t,r=e.state,i=e.name,n=e.options,s=r.elements.arrow,o=r.modifiersData.popperOffsets,a=Fu(r.placement),l=mF(a),u=[Js,Ea].indexOf(a)>=0,h=u?"height":"width";if(!(!s||!o)){var d=IWe(n.padding,r),f=fF(s),m=l==="y"?Ws:Js,g=l==="y"?$a:Ea,b=r.rects.reference[h]+r.rects.reference[l]-o[l]-r.rects.popper[h],w=o[l]-r.rects.reference[l],_=ix(s),x=_?l==="y"?_.clientHeight||0:_.clientWidth||0:0,I=b/2-w/2,S=d[m],T=x-f[h]-d[g],$=x/2-f[h]/2+I,E=Zw(S,$,T),C=l;r.modifiersData[i]=(t={},t[C]=E,t.centerOffset=E-$,t)}}function $We(e){var t=e.state,r=e.options,i=r.element,n=i===void 0?"[data-popper-arrow]":i;n!=null&&(typeof n=="string"&&(n=t.elements.popper.querySelector(n),!n)||!_ae(t.elements.popper,n)||(t.elements.arrow=n))}var EWe={name:"arrow",enabled:!0,phase:"main",fn:TWe,effect:$We,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Tv(e){return e.split("-")[1]}var AWe={top:"auto",right:"auto",bottom:"auto",left:"auto"};function CWe(e){var t=e.x,r=e.y,i=window,n=i.devicePixelRatio||1;return{x:Mv(t*n)/n||0,y:Mv(r*n)/n||0}}function mq(e){var t,r=e.popper,i=e.popperRect,n=e.placement,s=e.variation,o=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,h=e.roundOffsets,d=e.isFixed,f=h===!0?CWe(o):typeof h=="function"?h(o):o,m=f.x,g=m===void 0?0:m,b=f.y,w=b===void 0?0:b,_=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),I=Js,S=Ws,T=window;if(u){var $=ix(r),E="clientHeight",C="clientWidth";if($===Fl(r)&&($=kp(r),Zu($).position!=="static"&&a==="absolute"&&(E="scrollHeight",C="scrollWidth")),$=$,n===Ws||(n===Js||n===Ea)&&s===e2){S=$a;var O=d&&T.visualViewport?T.visualViewport.height:$[E];w-=O-i.height,w*=l?1:-1}if(n===Js||(n===Ws||n===$a)&&s===e2){I=Ea;var R=d&&T.visualViewport?T.visualViewport.width:$[C];g-=R-i.width,g*=l?1:-1}}var D=Object.assign({position:a},u&&AWe);if(l){var F;return Object.assign({},D,(F={},F[S]=x?"0":"",F[I]=_?"0":"",F.transform=(T.devicePixelRatio||1)<=1?"translate("+g+"px, "+w+"px)":"translate3d("+g+"px, "+w+"px, 0)",F))}return Object.assign({},D,(t={},t[S]=x?w+"px":"",t[I]=_?g+"px":"",t.transform="",t))}function kWe(e){var t=e.state,r=e.options,i=r.gpuAcceleration,n=i===void 0?!0:i,s=r.adaptive,o=s===void 0?!0:s,a=r.roundOffsets,l=a===void 0?!0:a,u={placement:Fu(t.placement),variation:Tv(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:n,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,mq(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:o,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,mq(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var OWe={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:kWe,data:{}},NS={passive:!0};function PWe(e){var t=e.state,r=e.instance,i=e.options,n=i.scroll,s=n===void 0?!0:n,o=i.resize,a=o===void 0?!0:o,l=Fl(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(h){h.addEventListener("scroll",r.update,NS)}),a&&l.addEventListener("resize",r.update,NS),function(){s&&u.forEach(function(h){h.removeEventListener("scroll",r.update,NS)}),a&&l.removeEventListener("resize",r.update,NS)}}var RWe={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:PWe,data:{}},LWe={left:"right",right:"left",bottom:"top",top:"bottom"};function A3(e){return e.replace(/left|right|bottom|top/g,function(t){return LWe[t]})}var NWe={start:"end",end:"start"};function yq(e){return e.replace(/start|end/g,function(t){return NWe[t]})}function yF(e){var t=Fl(e),r=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:r,scrollTop:i}}function gF(e){return Iv(kp(e)).left+yF(e).scrollLeft}function DWe(e){var t=Fl(e),r=kp(e),i=t.visualViewport,n=r.clientWidth,s=r.clientHeight,o=0,a=0;return i&&(n=i.width,s=i.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=i.offsetLeft,a=i.offsetTop)),{width:n,height:s,x:o+gF(e),y:a}}function FWe(e){var t,r=kp(e),i=yF(e),n=(t=e.ownerDocument)==null?void 0:t.body,s=km(r.scrollWidth,r.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=km(r.scrollHeight,r.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+gF(e),l=-i.scrollTop;return Zu(n||r).direction==="rtl"&&(a+=km(r.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function vF(e){var t=Zu(e),r=t.overflow,i=t.overflowX,n=t.overflowY;return/auto|scroll|overlay|hidden/.test(r+n+i)}function Iae(e){return["html","body","#document"].indexOf(Ju(e))>=0?e.ownerDocument.body:_a(e)&&vF(e)?e:Iae(UE(e))}function Yw(e,t){var r;t===void 0&&(t=[]);var i=Iae(e),n=i===((r=e.ownerDocument)==null?void 0:r.body),s=Fl(i),o=n?[s].concat(s.visualViewport||[],vF(i)?i:[]):i,a=t.concat(o);return n?a:a.concat(Yw(UE(o)))}function dL(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function jWe(e){var t=Iv(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}function gq(e,t){return t===gae?dL(DWe(e)):Sv(t)?jWe(t):dL(FWe(kp(e)))}function VWe(e){var t=Yw(UE(e)),r=["absolute","fixed"].indexOf(Zu(e).position)>=0,i=r&&_a(e)?ix(e):e;return Sv(i)?t.filter(function(n){return Sv(n)&&_ae(n,i)&&Ju(n)!=="body"&&(r?Zu(n).position!=="static":!0)}):[]}function UWe(e,t,r){var i=t==="clippingParents"?VWe(e):[].concat(t),n=[].concat(i,[r]),s=n[0],o=n.reduce(function(a,l){var u=gq(e,l);return a.top=km(u.top,a.top),a.right=AT(u.right,a.right),a.bottom=AT(u.bottom,a.bottom),a.left=km(u.left,a.left),a},gq(e,s));return o.width=o.right-o.left,o.height=o.bottom-o.top,o.x=o.left,o.y=o.top,o}function Tae(e){var t=e.reference,r=e.element,i=e.placement,n=i?Fu(i):null,s=i?Tv(i):null,o=t.x+t.width/2-r.width/2,a=t.y+t.height/2-r.height/2,l;switch(n){case Ws:l={x:o,y:t.y-r.height};break;case $a:l={x:o,y:t.y+t.height};break;case Ea:l={x:t.x+t.width,y:a};break;case Js:l={x:t.x-r.width,y:a};break;default:l={x:t.x,y:t.y}}var u=n?mF(n):null;if(u!=null){var h=u==="y"?"height":"width";switch(s){case xv:l[u]=l[u]-(t[h]/2-r[h]/2);break;case e2:l[u]=l[u]+(t[h]/2-r[h]/2);break}}return l}function t2(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=i===void 0?e.placement:i,s=r.boundary,o=s===void 0?lWe:s,a=r.rootBoundary,l=a===void 0?gae:a,u=r.elementContext,h=u===void 0?Y1:u,d=r.altBoundary,f=d===void 0?!1:d,m=r.padding,g=m===void 0?0:m,b=Sae(typeof g!="number"?g:Mae(g,rx)),w=h===Y1?uWe:Y1,_=e.rects.popper,x=e.elements[f?w:h],I=UWe(Sv(x)?x:x.contextElement||kp(e.elements.popper),o,l),S=Iv(e.elements.reference),T=Tae({reference:S,element:_,strategy:"absolute",placement:n}),$=dL(Object.assign({},_,T)),E=h===Y1?$:S,C={top:I.top-E.top+b.top,bottom:E.bottom-I.bottom+b.bottom,left:I.left-E.left+b.left,right:E.right-I.right+b.right},O=e.modifiersData.offset;if(h===Y1&&O){var R=O[n];Object.keys(C).forEach(function(D){var F=[Ea,$a].indexOf(D)>=0?1:-1,z=[Ws,$a].indexOf(D)>=0?"y":"x";C[D]+=R[z]*F})}return C}function zWe(e,t){t===void 0&&(t={});var r=t,i=r.placement,n=r.boundary,s=r.rootBoundary,o=r.padding,a=r.flipVariations,l=r.allowedAutoPlacements,u=l===void 0?vae:l,h=Tv(i),d=h?a?pq:pq.filter(function(g){return Tv(g)===h}):rx,f=d.filter(function(g){return u.indexOf(g)>=0});f.length===0&&(f=d);var m=f.reduce(function(g,b){return g[b]=t2(e,{placement:b,boundary:n,rootBoundary:s,padding:o})[Fu(b)],g},{});return Object.keys(m).sort(function(g,b){return m[g]-m[b]})}function BWe(e){if(Fu(e)===pF)return[];var t=A3(e);return[yq(e),t,yq(t)]}function GWe(e){var t=e.state,r=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!0:o,l=r.fallbackPlacements,u=r.padding,h=r.boundary,d=r.rootBoundary,f=r.altBoundary,m=r.flipVariations,g=m===void 0?!0:m,b=r.allowedAutoPlacements,w=t.options.placement,_=Fu(w),x=_===w,I=l||(x||!g?[A3(w)]:BWe(w)),S=[w].concat(I).reduce(function(_e,Ce){return _e.concat(Fu(Ce)===pF?zWe(t,{placement:Ce,boundary:h,rootBoundary:d,padding:u,flipVariations:g,allowedAutoPlacements:b}):Ce)},[]),T=t.rects.reference,$=t.rects.popper,E=new Map,C=!0,O=S[0],R=0;R<S.length;R++){var D=S[R],F=Fu(D),z=Tv(D)===xv,B=[Ws,$a].indexOf(F)>=0,y=B?"width":"height",M=t2(t,{placement:D,boundary:h,rootBoundary:d,altBoundary:f,padding:u}),A=B?z?Ea:Js:z?$a:Ws;T[y]>$[y]&&(A=A3(A));var P=A3(A),Y=[];if(s&&Y.push(M[F]<=0),a&&Y.push(M[A]<=0,M[P]<=0),Y.every(function(_e){return _e})){O=D,C=!1;break}E.set(D,Y)}if(C)for(var Q=g?3:1,le=function(Ce){var Ne=S.find(function(ht){var st=E.get(ht);if(st)return st.slice(0,Ce).every(function(pt){return pt})});if(Ne)return O=Ne,"break"},re=Q;re>0;re--){var we=le(re);if(we==="break")break}t.placement!==O&&(t.modifiersData[i]._skip=!0,t.placement=O,t.reset=!0)}}var qWe={name:"flip",enabled:!0,phase:"main",fn:GWe,requiresIfExists:["offset"],data:{_skip:!1}};function vq(e,t,r){return r===void 0&&(r={x:0,y:0}),{top:e.top-t.height-r.y,right:e.right-t.width+r.x,bottom:e.bottom-t.height+r.y,left:e.left-t.width-r.x}}function bq(e){return[Ws,Ea,$a,Js].some(function(t){return e[t]>=0})}function HWe(e){var t=e.state,r=e.name,i=t.rects.reference,n=t.rects.popper,s=t.modifiersData.preventOverflow,o=t2(t,{elementContext:"reference"}),a=t2(t,{altBoundary:!0}),l=vq(o,i),u=vq(a,n,s),h=bq(l),d=bq(u);t.modifiersData[r]={referenceClippingOffsets:l,popperEscapeOffsets:u,isReferenceHidden:h,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":h,"data-popper-escaped":d})}var WWe={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:HWe};function JWe(e,t,r){var i=Fu(e),n=[Js,Ws].indexOf(i)>=0?-1:1,s=typeof r=="function"?r(Object.assign({},t,{placement:e})):r,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[Js,Ea].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function ZWe(e){var t=e.state,r=e.options,i=e.name,n=r.offset,s=n===void 0?[0,0]:n,o=vae.reduce(function(h,d){return h[d]=JWe(d,t.rects,s),h},{}),a=o[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=o}var YWe={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:ZWe};function KWe(e){var t=e.state,r=e.name;t.modifiersData[r]=Tae({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var XWe={name:"popperOffsets",enabled:!0,phase:"read",fn:KWe,data:{}};function QWe(e){return e==="x"?"y":"x"}function eJe(e){var t=e.state,r=e.options,i=e.name,n=r.mainAxis,s=n===void 0?!0:n,o=r.altAxis,a=o===void 0?!1:o,l=r.boundary,u=r.rootBoundary,h=r.altBoundary,d=r.padding,f=r.tether,m=f===void 0?!0:f,g=r.tetherOffset,b=g===void 0?0:g,w=t2(t,{boundary:l,rootBoundary:u,padding:d,altBoundary:h}),_=Fu(t.placement),x=Tv(t.placement),I=!x,S=mF(_),T=QWe(S),$=t.modifiersData.popperOffsets,E=t.rects.reference,C=t.rects.popper,O=typeof b=="function"?b(Object.assign({},t.rects,{placement:t.placement})):b,R=typeof O=="number"?{mainAxis:O,altAxis:O}:Object.assign({mainAxis:0,altAxis:0},O),D=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,F={x:0,y:0};if(!!$){if(s){var z,B=S==="y"?Ws:Js,y=S==="y"?$a:Ea,M=S==="y"?"height":"width",A=$[S],P=A+w[B],Y=A-w[y],Q=m?-C[M]/2:0,le=x===xv?E[M]:C[M],re=x===xv?-C[M]:-E[M],we=t.elements.arrow,_e=m&&we?fF(we):{width:0,height:0},Ce=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:xae(),Ne=Ce[B],ht=Ce[y],st=Zw(0,E[M],_e[M]),pt=I?E[M]/2-Q-st-Ne-R.mainAxis:le-st-Ne-R.mainAxis,Pt=I?-E[M]/2+Q+st+ht+R.mainAxis:re+st+ht+R.mainAxis,X=t.elements.arrow&&ix(t.elements.arrow),te=X?S==="y"?X.clientTop||0:X.clientLeft||0:0,he=(z=D?.[S])!=null?z:0,V=A+pt-he-te,J=A+Pt-he,ne=Zw(m?AT(P,V):P,A,m?km(Y,J):Y);$[S]=ne,F[S]=ne-A}if(a){var pe,k=S==="x"?Ws:Js,q=S==="x"?$a:Ea,H=$[T],ee=T==="y"?"height":"width",W=H+w[k],G=H-w[q],de=[Ws,Js].indexOf(_)!==-1,fe=(pe=D?.[T])!=null?pe:0,Me=de?W:H-E[ee]-C[ee]-fe+R.altAxis,Oe=de?H+E[ee]+C[ee]-fe-R.altAxis:G,Ye=m&&de?MWe(Me,H,Oe):Zw(m?Me:W,H,m?Oe:G);$[T]=Ye,F[T]=Ye-H}t.modifiersData[i]=F}}var tJe={name:"preventOverflow",enabled:!0,phase:"main",fn:eJe,requiresIfExists:["offset"]};function rJe(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function iJe(e){return e===Fl(e)||!_a(e)?yF(e):rJe(e)}function nJe(e){var t=e.getBoundingClientRect(),r=Mv(t.width)/e.offsetWidth||1,i=Mv(t.height)/e.offsetHeight||1;return r!==1||i!==1}function sJe(e,t,r){r===void 0&&(r=!1);var i=_a(t),n=_a(t)&&nJe(t),s=kp(t),o=Iv(e,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!r)&&((Ju(t)!=="body"||vF(s))&&(a=iJe(t)),_a(t)?(l=Iv(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):s&&(l.x=gF(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function oJe(e){var t=new Map,r=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function n(s){r.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!r.has(a)){var l=t.get(a);l&&n(l)}}),i.push(s)}return e.forEach(function(s){r.has(s.name)||n(s)}),i}function aJe(e){var t=oJe(e);return bWe.reduce(function(r,i){return r.concat(t.filter(function(n){return n.phase===i}))},[])}function lJe(e){var t;return function(){return t||(t=new Promise(function(r){Promise.resolve().then(function(){t=void 0,r(e())})})),t}}function uJe(e){var t=e.reduce(function(r,i){var n=r[i.name];return r[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,r},{});return Object.keys(t).map(function(r){return t[r]})}var wq={placement:"bottom",modifiers:[],strategy:"absolute"};function _q(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function cJe(e){e===void 0&&(e={});var t=e,r=t.defaultModifiers,i=r===void 0?[]:r,n=t.defaultOptions,s=n===void 0?wq:n;return function(a,l,u){u===void 0&&(u=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},wq,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],f=!1,m={state:h,setOptions:function(_){var x=typeof _=="function"?_(h.options):_;b(),h.options=Object.assign({},s,h.options,x),h.scrollParents={reference:Sv(a)?Yw(a):a.contextElement?Yw(a.contextElement):[],popper:Yw(l)};var I=aJe(uJe([].concat(i,h.options.modifiers)));return h.orderedModifiers=I.filter(function(S){return S.enabled}),g(),m.update()},forceUpdate:function(){if(!f){var _=h.elements,x=_.reference,I=_.popper;if(!!_q(x,I)){h.rects={reference:sJe(x,ix(I),h.options.strategy==="fixed"),popper:fF(I)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(R){return h.modifiersData[R.name]=Object.assign({},R.data)});for(var S=0;S<h.orderedModifiers.length;S++){if(h.reset===!0){h.reset=!1,S=-1;continue}var T=h.orderedModifiers[S],$=T.fn,E=T.options,C=E===void 0?{}:E,O=T.name;typeof $=="function"&&(h=$({state:h,options:C,name:O,instance:m})||h)}}}},update:lJe(function(){return new Promise(function(w){m.forceUpdate(),w(h)})}),destroy:function(){b(),f=!0}};if(!_q(a,l))return m;m.setOptions(u).then(function(w){!f&&u.onFirstUpdate&&u.onFirstUpdate(w)});function g(){h.orderedModifiers.forEach(function(w){var _=w.name,x=w.options,I=x===void 0?{}:x,S=w.effect;if(typeof S=="function"){var T=S({state:h,name:_,instance:m,options:I}),$=function(){};d.push(T||$)}})}function b(){d.forEach(function(w){return w()}),d=[]}return m}}var hJe=[RWe,XWe,OWe,wae,YWe,qWe,tJe,EWe,WWe],dJe=cJe({defaultModifiers:hJe}),pJe="tippy-box",$ae="tippy-content",Eae="tippy-backdrop",Aae="tippy-arrow",Cae="tippy-svg-arrow",Ff={passive:!0,capture:!0},kae=function(){return document.body};function mA(e,t,r){if(Array.isArray(e)){var i=e[t];return i??(Array.isArray(r)?r[t]:r)}return e}function bF(e,t){var r={}.toString.call(e);return r.indexOf("[object")===0&&r.indexOf(t+"]")>-1}function Oae(e,t){return typeof e=="function"?e.apply(void 0,t):e}function xq(e,t){if(t===0)return e;var r;return function(i){clearTimeout(r),r=setTimeout(function(){e(i)},t)}}function fJe(e,t){var r=Object.assign({},e);return t.forEach(function(i){delete r[i]}),r}function mJe(e){return e.split(/\s+/).filter(Boolean)}function Zf(e){return[].concat(e)}function Sq(e,t){e.indexOf(t)===-1&&e.push(t)}function yJe(e){return e.filter(function(t,r){return e.indexOf(t)===r})}function Pae(e){return e.split("-")[0]}function $v(e){return[].slice.call(e)}function Mq(e){return Object.keys(e).reduce(function(t,r){return e[r]!==void 0&&(t[r]=e[r]),t},{})}function Om(){return document.createElement("div")}function zE(e){return["Element","Fragment"].some(function(t){return bF(e,t)})}function gJe(e){return bF(e,"NodeList")}function wF(e){return bF(e,"MouseEvent")}function vJe(e){return!!(e&&e._tippy&&e._tippy.reference===e)}function bJe(e){return zE(e)?[e]:gJe(e)?$v(e):Array.isArray(e)?e:$v(document.querySelectorAll(e))}function yA(e,t){e.forEach(function(r){r&&(r.style.transitionDuration=t+"ms")})}function r2(e,t){e.forEach(function(r){r&&r.setAttribute("data-state",t)})}function Rae(e){var t,r=Zf(e),i=r[0];return i!=null&&(t=i.ownerDocument)!=null&&t.body?i.ownerDocument:document}function wJe(e,t){var r=t.clientX,i=t.clientY;return e.every(function(n){var s=n.popperRect,o=n.popperState,a=n.props,l=a.interactiveBorder,u=Pae(o.placement),h=o.modifiersData.offset;if(!h)return!0;var d=u==="bottom"?h.top.y:0,f=u==="top"?h.bottom.y:0,m=u==="right"?h.left.x:0,g=u==="left"?h.right.x:0,b=s.top-i+d>l,w=i-s.bottom-f>l,_=s.left-r+m>l,x=r-s.right-g>l;return b||w||_||x})}function gA(e,t,r){var i=t+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(n){e[i](n,r)})}function Iq(e,t){for(var r=t;r;){var i;if(e.contains(r))return!0;r=r.getRootNode==null||(i=r.getRootNode())==null?void 0:i.host}return!1}var Mu={isTouch:!1},Tq=0;function _Je(){Mu.isTouch||(Mu.isTouch=!0,window.performance&&document.addEventListener("mousemove",Lae))}function Lae(){var e=performance.now();e-Tq<20&&(Mu.isTouch=!1,document.removeEventListener("mousemove",Lae)),Tq=e}function xJe(){var e=document.activeElement;if(vJe(e)){var t=e._tippy;e.blur&&!t.state.isVisible&&e.blur()}}function SJe(){document.addEventListener("touchstart",_Je,Ff),window.addEventListener("blur",xJe)}var MJe=typeof window<"u"&&typeof document<"u",IJe=MJe?!!window.msCrypto:!1,TJe={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$Je={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},dl=Object.assign({appendTo:kae,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},TJe,$Je),EJe=Object.keys(dl),AJe=function(t){var r=Object.keys(t);r.forEach(function(i){dl[i]=t[i]})};function Nae(e){var t=e.plugins||[],r=t.reduce(function(i,n){var s=n.name,o=n.defaultValue;if(s){var a;i[s]=e[s]!==void 0?e[s]:(a=dl[s])!=null?a:o}return i},{});return Object.assign({},e,r)}function CJe(e,t){var r=t?Object.keys(Nae(Object.assign({},dl,{plugins:t}))):EJe,i=r.reduce(function(n,s){var o=(e.getAttribute("data-tippy-"+s)||"").trim();if(!o)return n;if(s==="content")n[s]=o;else try{n[s]=JSON.parse(o)}catch{n[s]=o}return n},{});return i}function $q(e,t){var r=Object.assign({},t,{content:Oae(t.content,[e])},t.ignoreAttributes?{}:CJe(e,t.plugins));return r.aria=Object.assign({},dl.aria,r.aria),r.aria={expanded:r.aria.expanded==="auto"?t.interactive:r.aria.expanded,content:r.aria.content==="auto"?t.interactive?null:"describedby":r.aria.content},r}var kJe=function(){return"innerHTML"};function pL(e,t){e[kJe()]=t}function Eq(e){var t=Om();return e===!0?t.className=Aae:(t.className=Cae,zE(e)?t.appendChild(e):pL(t,e)),t}function Aq(e,t){zE(t.content)?(pL(e,""),e.appendChild(t.content)):typeof t.content!="function"&&(t.allowHTML?pL(e,t.content):e.textContent=t.content)}function CT(e){var t=e.firstElementChild,r=$v(t.children);return{box:t,content:r.find(function(i){return i.classList.contains($ae)}),arrow:r.find(function(i){return i.classList.contains(Aae)||i.classList.contains(Cae)}),backdrop:r.find(function(i){return i.classList.contains(Eae)})}}function Dae(e){var t=Om(),r=Om();r.className=pJe,r.setAttribute("data-state","hidden"),r.setAttribute("tabindex","-1");var i=Om();i.className=$ae,i.setAttribute("data-state","hidden"),Aq(i,e.props),t.appendChild(r),r.appendChild(i),n(e.props,e.props);function n(s,o){var a=CT(t),l=a.box,u=a.content,h=a.arrow;o.theme?l.setAttribute("data-theme",o.theme):l.removeAttribute("data-theme"),typeof o.animation=="string"?l.setAttribute("data-animation",o.animation):l.removeAttribute("data-animation"),o.inertia?l.setAttribute("data-inertia",""):l.removeAttribute("data-inertia"),l.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?l.setAttribute("role",o.role):l.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&Aq(u,e.props),o.arrow?h?s.arrow!==o.arrow&&(l.removeChild(h),l.appendChild(Eq(o.arrow))):l.appendChild(Eq(o.arrow)):h&&l.removeChild(h)}return{popper:t,onUpdate:n}}Dae.$$tippy=!0;var OJe=1,DS=[],vA=[];function PJe(e,t){var r=$q(e,Object.assign({},dl,Nae(Mq(t)))),i,n,s,o=!1,a=!1,l=!1,u=!1,h,d,f,m=[],g=xq(V,r.interactiveDebounce),b,w=OJe++,_=null,x=yJe(r.plugins),I={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},S={id:w,reference:e,popper:Om(),popperInstance:_,props:r,state:I,plugins:x,clearDelayTimeouts:Me,setProps:Oe,setContent:Ye,show:Xe,hide:ot,hideWithInteractivity:Jt,enable:de,disable:fe,unmount:qn,destroy:Vl};if(!r.render)return S;var T=r.render(S),$=T.popper,E=T.onUpdate;$.setAttribute("data-tippy-root",""),$.id="tippy-"+S.id,S.popper=$,e._tippy=S,$._tippy=S;var C=x.map(function(be){return be.fn(S)}),O=e.hasAttribute("aria-expanded");return X(),Q(),A(),P("onCreate",[S]),r.showOnCreate&&W(),$.addEventListener("mouseenter",function(){S.props.interactive&&S.state.isVisible&&S.clearDelayTimeouts()}),$.addEventListener("mouseleave",function(){S.props.interactive&&S.props.trigger.indexOf("mouseenter")>=0&&B().addEventListener("mousemove",g)}),S;function R(){var be=S.props.touch;return Array.isArray(be)?be:[be,0]}function D(){return R()[0]==="hold"}function F(){var be;return!!((be=S.props.render)!=null&&be.$$tippy)}function z(){return b||e}function B(){var be=z().parentNode;return be?Rae(be):document}function y(){return CT($)}function M(be){return S.state.isMounted&&!S.state.isVisible||Mu.isTouch||h&&h.type==="focus"?0:mA(S.props.delay,be?0:1,dl.delay)}function A(be){be===void 0&&(be=!1),$.style.pointerEvents=S.props.interactive&&!be?"":"none",$.style.zIndex=""+S.props.zIndex}function P(be,He,dt){if(dt===void 0&&(dt=!0),C.forEach(function(bt){bt[be]&&bt[be].apply(bt,He)}),dt){var yt;(yt=S.props)[be].apply(yt,He)}}function Y(){var be=S.props.aria;if(!!be.content){var He="aria-"+be.content,dt=$.id,yt=Zf(S.props.triggerTarget||e);yt.forEach(function(bt){var vi=bt.getAttribute(He);if(S.state.isVisible)bt.setAttribute(He,vi?vi+" "+dt:dt);else{var ws=vi&&vi.replace(dt,"").trim();ws?bt.setAttribute(He,ws):bt.removeAttribute(He)}})}}function Q(){if(!(O||!S.props.aria.expanded)){var be=Zf(S.props.triggerTarget||e);be.forEach(function(He){S.props.interactive?He.setAttribute("aria-expanded",S.state.isVisible&&He===z()?"true":"false"):He.removeAttribute("aria-expanded")})}}function le(){B().removeEventListener("mousemove",g),DS=DS.filter(function(be){return be!==g})}function re(be){if(!(Mu.isTouch&&(l||be.type==="mousedown"))){var He=be.composedPath&&be.composedPath()[0]||be.target;if(!(S.props.interactive&&Iq($,He))){if(Zf(S.props.triggerTarget||e).some(function(dt){return Iq(dt,He)})){if(Mu.isTouch||S.state.isVisible&&S.props.trigger.indexOf("click")>=0)return}else P("onClickOutside",[S,be]);S.props.hideOnClick===!0&&(S.clearDelayTimeouts(),S.hide(),a=!0,setTimeout(function(){a=!1}),S.state.isMounted||Ne())}}}function we(){l=!0}function _e(){l=!1}function Ce(){var be=B();be.addEventListener("mousedown",re,!0),be.addEventListener("touchend",re,Ff),be.addEventListener("touchstart",_e,Ff),be.addEventListener("touchmove",we,Ff)}function Ne(){var be=B();be.removeEventListener("mousedown",re,!0),be.removeEventListener("touchend",re,Ff),be.removeEventListener("touchstart",_e,Ff),be.removeEventListener("touchmove",we,Ff)}function ht(be,He){pt(be,function(){!S.state.isVisible&&$.parentNode&&$.parentNode.contains($)&&He()})}function st(be,He){pt(be,He)}function pt(be,He){var dt=y().box;function yt(bt){bt.target===dt&&(gA(dt,"remove",yt),He())}if(be===0)return He();gA(dt,"remove",d),gA(dt,"add",yt),d=yt}function Pt(be,He,dt){dt===void 0&&(dt=!1);var yt=Zf(S.props.triggerTarget||e);yt.forEach(function(bt){bt.addEventListener(be,He,dt),m.push({node:bt,eventType:be,handler:He,options:dt})})}function X(){D()&&(Pt("touchstart",he,{passive:!0}),Pt("touchend",J,{passive:!0})),mJe(S.props.trigger).forEach(function(be){if(be!=="manual")switch(Pt(be,he),be){case"mouseenter":Pt("mouseleave",J);break;case"focus":Pt(IJe?"focusout":"blur",ne);break;case"focusin":Pt("focusout",ne);break}})}function te(){m.forEach(function(be){var He=be.node,dt=be.eventType,yt=be.handler,bt=be.options;He.removeEventListener(dt,yt,bt)}),m=[]}function he(be){var He,dt=!1;if(!(!S.state.isEnabled||pe(be)||a)){var yt=((He=h)==null?void 0:He.type)==="focus";h=be,b=be.currentTarget,Q(),!S.state.isVisible&&wF(be)&&DS.forEach(function(bt){return bt(be)}),be.type==="click"&&(S.props.trigger.indexOf("mouseenter")<0||o)&&S.props.hideOnClick!==!1&&S.state.isVisible?dt=!0:W(be),be.type==="click"&&(o=!dt),dt&&!yt&&G(be)}}function V(be){var He=be.target,dt=z().contains(He)||$.contains(He);if(!(be.type==="mousemove"&&dt)){var yt=ee().concat($).map(function(bt){var vi,ws=bt._tippy,Ch=(vi=ws.popperInstance)==null?void 0:vi.state;return Ch?{popperRect:bt.getBoundingClientRect(),popperState:Ch,props:r}:null}).filter(Boolean);wJe(yt,be)&&(le(),G(be))}}function J(be){var He=pe(be)||S.props.trigger.indexOf("click")>=0&&o;if(!He){if(S.props.interactive){S.hideWithInteractivity(be);return}G(be)}}function ne(be){S.props.trigger.indexOf("focusin")<0&&be.target!==z()||S.props.interactive&&be.relatedTarget&&$.contains(be.relatedTarget)||G(be)}function pe(be){return Mu.isTouch?D()!==be.type.indexOf("touch")>=0:!1}function k(){q();var be=S.props,He=be.popperOptions,dt=be.placement,yt=be.offset,bt=be.getReferenceClientRect,vi=be.moveTransition,ws=F()?CT($).arrow:null,Ch=bt?{getBoundingClientRect:bt,contextElement:bt.contextElement||z()}:e,ox={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ny){var kh=Ny.state;if(F()){var QE=y(),f1=QE.box;["placement","reference-hidden","escaped"].forEach(function(Dy){Dy==="placement"?f1.setAttribute("data-placement",kh.placement):kh.attributes.popper["data-popper-"+Dy]?f1.setAttribute("data-"+Dy,""):f1.removeAttribute("data-"+Dy)}),kh.attributes.popper={}}}},ec=[{name:"offset",options:{offset:yt}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!vi}},ox];F()&&ws&&ec.push({name:"arrow",options:{element:ws,padding:3}}),ec.push.apply(ec,He?.modifiers||[]),S.popperInstance=dJe(Ch,$,Object.assign({},He,{placement:dt,onFirstUpdate:f,modifiers:ec}))}function q(){S.popperInstance&&(S.popperInstance.destroy(),S.popperInstance=null)}function H(){var be=S.props.appendTo,He,dt=z();S.props.interactive&&be===kae||be==="parent"?He=dt.parentNode:He=Oae(be,[dt]),He.contains($)||He.appendChild($),S.state.isMounted=!0,k()}function ee(){return $v($.querySelectorAll("[data-tippy-root]"))}function W(be){S.clearDelayTimeouts(),be&&P("onTrigger",[S,be]),Ce();var He=M(!0),dt=R(),yt=dt[0],bt=dt[1];Mu.isTouch&&yt==="hold"&&bt&&(He=bt),He?i=setTimeout(function(){S.show()},He):S.show()}function G(be){if(S.clearDelayTimeouts(),P("onUntrigger",[S,be]),!S.state.isVisible){Ne();return}if(!(S.props.trigger.indexOf("mouseenter")>=0&&S.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(be.type)>=0&&o)){var He=M(!1);He?n=setTimeout(function(){S.state.isVisible&&S.hide()},He):s=requestAnimationFrame(function(){S.hide()})}}function de(){S.state.isEnabled=!0}function fe(){S.hide(),S.state.isEnabled=!1}function Me(){clearTimeout(i),clearTimeout(n),cancelAnimationFrame(s)}function Oe(be){if(!S.state.isDestroyed){P("onBeforeUpdate",[S,be]),te();var He=S.props,dt=$q(e,Object.assign({},He,Mq(be),{ignoreAttributes:!0}));S.props=dt,X(),He.interactiveDebounce!==dt.interactiveDebounce&&(le(),g=xq(V,dt.interactiveDebounce)),He.triggerTarget&&!dt.triggerTarget?Zf(He.triggerTarget).forEach(function(yt){yt.removeAttribute("aria-expanded")}):dt.triggerTarget&&e.removeAttribute("aria-expanded"),Q(),A(),E&&E(He,dt),S.popperInstance&&(k(),ee().forEach(function(yt){requestAnimationFrame(yt._tippy.popperInstance.forceUpdate)})),P("onAfterUpdate",[S,be])}}function Ye(be){S.setProps({content:be})}function Xe(){var be=S.state.isVisible,He=S.state.isDestroyed,dt=!S.state.isEnabled,yt=Mu.isTouch&&!S.props.touch,bt=mA(S.props.duration,0,dl.duration);if(!(be||He||dt||yt)&&!z().hasAttribute("disabled")&&(P("onShow",[S],!1),S.props.onShow(S)!==!1)){if(S.state.isVisible=!0,F()&&($.style.visibility="visible"),A(),Ce(),S.state.isMounted||($.style.transition="none"),F()){var vi=y(),ws=vi.box,Ch=vi.content;yA([ws,Ch],0)}f=function(){var ec;if(!(!S.state.isVisible||u)){if(u=!0,$.offsetHeight,$.style.transition=S.props.moveTransition,F()&&S.props.animation){var p1=y(),Ny=p1.box,kh=p1.content;yA([Ny,kh],bt),r2([Ny,kh],"visible")}Y(),Q(),Sq(vA,S),(ec=S.popperInstance)==null||ec.forceUpdate(),P("onMount",[S]),S.props.animation&&F()&&st(bt,function(){S.state.isShown=!0,P("onShown",[S])})}},H()}}function ot(){var be=!S.state.isVisible,He=S.state.isDestroyed,dt=!S.state.isEnabled,yt=mA(S.props.duration,1,dl.duration);if(!(be||He||dt)&&(P("onHide",[S],!1),S.props.onHide(S)!==!1)){if(S.state.isVisible=!1,S.state.isShown=!1,u=!1,o=!1,F()&&($.style.visibility="hidden"),le(),Ne(),A(!0),F()){var bt=y(),vi=bt.box,ws=bt.content;S.props.animation&&(yA([vi,ws],yt),r2([vi,ws],"hidden"))}Y(),Q(),S.props.animation?F()&&ht(yt,S.unmount):S.unmount()}}function Jt(be){B().addEventListener("mousemove",g),Sq(DS,g),g(be)}function qn(){S.state.isVisible&&S.hide(),S.state.isMounted&&(q(),ee().forEach(function(be){be._tippy.unmount()}),$.parentNode&&$.parentNode.removeChild($),vA=vA.filter(function(be){return be!==S}),S.state.isMounted=!1,P("onHidden",[S]))}function Vl(){S.state.isDestroyed||(S.clearDelayTimeouts(),S.unmount(),te(),delete e._tippy,S.state.isDestroyed=!0,P("onDestroy",[S]))}}function fs(e,t){t===void 0&&(t={});var r=dl.plugins.concat(t.plugins||[]);SJe();var i=Object.assign({},t,{plugins:r}),n=bJe(e),s=n.reduce(function(o,a){var l=a&&PJe(a,i);return l&&o.push(l),o},[]);return zE(e)?s[0]:s}fs.defaultProps=dl;fs.setDefaultProps=AJe;fs.currentInput=Mu;var RJe=Object.assign({},wae,{effect:function(t){var r=t.state,i={popper:{position:r.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(r.elements.popper.style,i.popper),r.styles=i,r.elements.arrow&&Object.assign(r.elements.arrow.style,i.arrow)}}),LJe=function(t,r){var i;r===void 0&&(r={});var n=t,s=[],o=[],a,l=r.overrides,u=[],h=!1;function d(){o=n.map(function(S){return Zf(S.props.triggerTarget||S.reference)}).reduce(function(S,T){return S.concat(T)},[])}function f(){s=n.map(function(S){return S.reference})}function m(S){n.forEach(function(T){S?T.enable():T.disable()})}function g(S){return n.map(function(T){var $=T.setProps;return T.setProps=function(E){$(E),T.reference===a&&S.setProps(E)},function(){T.setProps=$}})}function b(S,T){var $=o.indexOf(T);if(T!==a){a=T;var E=(l||[]).concat("content").reduce(function(C,O){return C[O]=n[$].props[O],C},{});S.setProps(Object.assign({},E,{getReferenceClientRect:typeof E.getReferenceClientRect=="function"?E.getReferenceClientRect:function(){var C;return(C=s[$])==null?void 0:C.getBoundingClientRect()}}))}}m(!1),f(),d();var w={fn:function(){return{onDestroy:function(){m(!0)},onHidden:function(){a=null},onClickOutside:function($){$.props.showOnCreate&&!h&&(h=!0,a=null)},onShow:function($){$.props.showOnCreate&&!h&&(h=!0,b($,s[0]))},onTrigger:function($,E){b($,E.currentTarget)}}}},_=fs(Om(),Object.assign({},fJe(r,["overrides"]),{plugins:[w].concat(r.plugins||[]),triggerTarget:o,popperOptions:Object.assign({},r.popperOptions,{modifiers:[].concat(((i=r.popperOptions)==null?void 0:i.modifiers)||[],[RJe])})})),x=_.show;_.show=function(S){if(x(),!a&&S==null)return b(_,s[0]);if(!(a&&S==null)){if(typeof S=="number")return s[S]&&b(_,s[S]);if(n.indexOf(S)>=0){var T=S.reference;return b(_,T)}if(s.indexOf(S)>=0)return b(_,S)}},_.showNext=function(){var S=s[0];if(!a)return _.show(0);var T=s.indexOf(a);_.show(s[T+1]||S)},_.showPrevious=function(){var S=s[s.length-1];if(!a)return _.show(S);var T=s.indexOf(a),$=s[T-1]||S;_.show($)};var I=_.setProps;return _.setProps=function(S){l=S.overrides||l,I(S)},_.setInstances=function(S){m(!0),u.forEach(function(T){return T()}),n=S,m(!1),f(),d(),u=g(_),_.setProps({triggerTarget:o})},u=g(_),_},NJe={name:"animateFill",defaultValue:!1,fn:function(t){var r;if(!((r=t.props.render)!=null&&r.$$tippy))return{};var i=CT(t.popper),n=i.box,s=i.content,o=t.props.animateFill?DJe():null;return{onCreate:function(){o&&(n.insertBefore(o,n.firstElementChild),n.setAttribute("data-animatefill",""),n.style.overflow="hidden",t.setProps({arrow:!1,animation:"shift-away"}))},onMount:function(){if(o){var l=n.style.transitionDuration,u=Number(l.replace("ms",""));s.style.transitionDelay=Math.round(u/10)+"ms",o.style.transitionDuration=l,r2([o],"visible")}},onShow:function(){o&&(o.style.transitionDuration="0ms")},onHide:function(){o&&r2([o],"hidden")}}}};function DJe(){var e=Om();return e.className=Eae,r2([e],"hidden"),e}var fL={clientX:0,clientY:0},FS=[];function Fae(e){var t=e.clientX,r=e.clientY;fL={clientX:t,clientY:r}}function FJe(e){e.addEventListener("mousemove",Fae)}function jJe(e){e.removeEventListener("mousemove",Fae)}var VJe={name:"followCursor",defaultValue:!1,fn:function(t){var r=t.reference,i=Rae(t.props.triggerTarget||r),n=!1,s=!1,o=!0,a=t.props;function l(){return t.props.followCursor==="initial"&&t.state.isVisible}function u(){i.addEventListener("mousemove",f)}function h(){i.removeEventListener("mousemove",f)}function d(){n=!0,t.setProps({getReferenceClientRect:null}),n=!1}function f(b){var w=b.target?r.contains(b.target):!0,_=t.props.followCursor,x=b.clientX,I=b.clientY,S=r.getBoundingClientRect(),T=x-S.left,$=I-S.top;(w||!t.props.interactive)&&t.setProps({getReferenceClientRect:function(){var C=r.getBoundingClientRect(),O=x,R=I;_==="initial"&&(O=C.left+T,R=C.top+$);var D=_==="horizontal"?C.top:R,F=_==="vertical"?C.right:O,z=_==="horizontal"?C.bottom:R,B=_==="vertical"?C.left:O;return{width:F-B,height:z-D,top:D,right:F,bottom:z,left:B}}})}function m(){t.props.followCursor&&(FS.push({instance:t,doc:i}),FJe(i))}function g(){FS=FS.filter(function(b){return b.instance!==t}),FS.filter(function(b){return b.doc===i}).length===0&&jJe(i)}return{onCreate:m,onDestroy:g,onBeforeUpdate:function(){a=t.props},onAfterUpdate:function(w,_){var x=_.followCursor;n||x!==void 0&&a.followCursor!==x&&(g(),x?(m(),t.state.isMounted&&!s&&!l()&&u()):(h(),d()))},onMount:function(){t.props.followCursor&&!s&&(o&&(f(fL),o=!1),l()||u())},onTrigger:function(w,_){wF(_)&&(fL={clientX:_.clientX,clientY:_.clientY}),s=_.type==="focus"},onHidden:function(){t.props.followCursor&&(d(),h(),o=!0)}}}};function UJe(e,t){var r;return{popperOptions:Object.assign({},e.popperOptions,{modifiers:[].concat((((r=e.popperOptions)==null?void 0:r.modifiers)||[]).filter(function(i){var n=i.name;return n!==t.name}),[t])})}}var zJe={name:"inlinePositioning",defaultValue:!1,fn:function(t){var r=t.reference;function i(){return!!t.props.inlinePositioning}var n,s=-1,o=!1,a=[],l={name:"tippyInlinePositioning",enabled:!0,phase:"afterWrite",fn:function(m){var g=m.state;i()&&(a.indexOf(g.placement)!==-1&&(a=[]),n!==g.placement&&a.indexOf(g.placement)===-1&&(a.push(g.placement),t.setProps({getReferenceClientRect:function(){return u(g.placement)}})),n=g.placement)}};function u(f){return BJe(Pae(f),r.getBoundingClientRect(),$v(r.getClientRects()),s)}function h(f){o=!0,t.setProps(f),o=!1}function d(){o||h(UJe(t.props,l))}return{onCreate:d,onAfterUpdate:d,onTrigger:function(m,g){if(wF(g)){var b=$v(t.reference.getClientRects()),w=b.find(function(x){return x.left-2<=g.clientX&&x.right+2>=g.clientX&&x.top-2<=g.clientY&&x.bottom+2>=g.clientY}),_=b.indexOf(w);s=_>-1?_:s}},onHidden:function(){s=-1}}}};function BJe(e,t,r,i){if(r.length<2||e===null)return t;if(r.length===2&&i>=0&&r[0].left>r[1].right)return r[i]||t;switch(e){case"top":case"bottom":{var n=r[0],s=r[r.length-1],o=e==="top",a=n.top,l=s.bottom,u=o?n.left:s.left,h=o?n.right:s.right,d=h-u,f=l-a;return{top:a,bottom:l,left:u,right:h,width:d,height:f}}case"left":case"right":{var m=Math.min.apply(Math,r.map(function($){return $.left})),g=Math.max.apply(Math,r.map(function($){return $.right})),b=r.filter(function($){return e==="left"?$.left===m:$.right===g}),w=b[0].top,_=b[b.length-1].bottom,x=m,I=g,S=I-x,T=_-w;return{top:w,bottom:_,left:x,right:I,width:S,height:T}}default:return t}}var GJe={name:"sticky",defaultValue:!1,fn:function(t){var r=t.reference,i=t.popper;function n(){return t.popperInstance?t.popperInstance.state.elements.reference:r}function s(u){return t.props.sticky===!0||t.props.sticky===u}var o=null,a=null;function l(){var u=s("reference")?n().getBoundingClientRect():null,h=s("popper")?i.getBoundingClientRect():null;(u&&Cq(o,u)||h&&Cq(a,h))&&t.popperInstance&&t.popperInstance.update(),o=u,a=h,t.state.isMounted&&requestAnimationFrame(l)}return{onMount:function(){t.props.sticky&&l()}}}};function Cq(e,t){return e&&t?e.top!==t.top||e.right!==t.right||e.bottom!==t.bottom||e.left!==t.left:!0}fs.setDefaultProps({render:Dae});fs.setDefaultProps({onShow:e=>{if(!e.props.content)return!1}});function _F(e,t={},r={mount:!0}){const i=ys(),n=Xi(),s=Xi({isEnabled:!1,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1});let o=null;const a=()=>o||(o=document.createDocumentFragment(),o),l=$=>{let E,C=vr($)?$.value:$;if($l(C))i&&(C.appContext=i.appContext),uh(C,a()),E=()=>a();else if(typeof C=="object"){let O=qs(C);i&&(O.appContext=i.appContext),uh(O,a()),E=()=>a()}else E=C;return E},u=$=>{let E={};return vr($)?E=$.value||{}:ml($)?E={...$}:E={...$},E.content&&(E.content=l(E.content)),E.triggerTarget&&(E.triggerTarget=vr(E.triggerTarget)?E.triggerTarget.value:E.triggerTarget),(!E.plugins||!Array.isArray(E.plugins))&&(E.plugins=[]),E.plugins=E.plugins.filter(C=>C.name!=="vueTippyReactiveState"),E.plugins.push({name:"vueTippyReactiveState",fn:()=>({onCreate(){s.value.isEnabled=!0},onMount(){s.value.isMounted=!0},onShow(){s.value.isMounted=!0,s.value.isVisible=!0},onShown(){s.value.isShown=!0},onHide(){s.value.isMounted=!1,s.value.isVisible=!1},onHidden(){s.value.isShown=!1},onUnmounted(){s.value.isMounted=!1},onDestroy(){s.value.isDestroyed=!0}})}),E},h=()=>{!n.value||n.value.setProps(u(t))},d=()=>{!n.value||!t.content||n.value.setContent(l(t.content))},f=$=>{var E;(E=n.value)===null||E===void 0||E.setContent(l($))},m=$=>{var E;(E=n.value)===null||E===void 0||E.setProps(u($))},g=()=>{n.value&&(n.value.destroy(),n.value=void 0),o=null},b=()=>{var $;($=n.value)===null||$===void 0||$.show()},w=()=>{var $;($=n.value)===null||$===void 0||$.hide()},_=()=>{var $;($=n.value)===null||$===void 0||$.disable(),s.value.isEnabled=!1},x=()=>{var $;($=n.value)===null||$===void 0||$.enable(),s.value.isEnabled=!0},I=()=>{var $;($=n.value)===null||$===void 0||$.unmount()},S=()=>{if(!e)return;let $=vr(e)?e.value:e;typeof $=="function"&&($=$()),$&&(n.value=fs($,u(t)),$.$tippy=T)},T={tippy:n,refresh:h,refreshContent:d,setContent:f,setProps:m,destroy:g,hide:w,show:b,disable:_,enable:x,unmount:I,mount:S,state:s};return r.mount&&(i?(i.isMounted?S():Xu(S),ky(()=>{g()})):S()),vr(t)||ml(t)?Gs(t,h,{immediate:!1}):vr(t.content)&&Gs(t.content,d,{immediate:!1}),T}function qJe(e,t){const r=Xi();return Xu(()=>{const n=(Array.isArray(e)?e.map(s=>s.value):typeof e=="function"?e():e.value).map(s=>s instanceof Element?s._tippy:s).filter(Boolean);r.value=LJe(n,t?{allowHTML:!0,...t}:{allowHTML:!0})}),{singleton:r}}const HJe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let uy={};Object.keys(fs.defaultProps).forEach(e=>{HJe.includes(e)?uy[e]={type:e==="arrow"?[String,Boolean,Function]:Boolean,default:function(){return fs.defaultProps[e]}}:uy[e]={default:function(){return fs.defaultProps[e]}}});uy.to={};uy.tag={default:"span"};uy.contentTag={default:"span"};uy.contentClass={default:null};const WJe=tr({props:uy,emits:["state"],setup(e,{slots:t,emit:r,expose:i}){const n=Xi(),s=Xi(),o=Xi(!1),a=()=>{let d={...e};for(const f of["to","tag","contentTag","contentClass"])d.hasOwnProperty(f)&&delete d[f];return d};let l=n;e.to&&(typeof Element<"u"&&e.to instanceof Element?l=()=>e.to:(typeof e.to=="string"||e.to instanceof String)&&(l=()=>document.querySelector(e.to)));const u=_F(l,a());Xu(()=>{o.value=!0,j2(()=>{t.content&&u.setContent(()=>s.value)})}),Gs(u.state,()=>{r("state",L_(u.state))},{immediate:!0,deep:!0}),Gs(e,()=>{u.setProps(a()),t.content&&u.setContent(()=>s.value)});let h={elem:n,contentElem:s,mounted:o,...u};return i(h),()=>{let d={elem:n.value,contentElem:s.value,mounted:o.value,...Object.keys(u).reduce((m,g)=>(m[g]=L_(u[g]),m),{})};const f=t.default?t.default(d):[];return qs(e.tag,{ref:n,"data-v-tippy":""},t.content?[f,qs(e.contentTag,{ref:s,style:{display:o.value?"inherit":"none"},class:e.contentClass},t.content(d))]:f)}}}),JJe=["a11y","allowHTML","arrow","flip","flipOnUpdate","hideOnClick","ignoreAttributes","inertia","interactive","lazy","multiple","showOnInit","touch","touchHold"];let mL={};Object.keys(fs.defaultProps).forEach(e=>{JJe.includes(e)?mL[e]={type:Boolean,default:function(){return fs.defaultProps[e]}}:mL[e]={default:function(){return fs.defaultProps[e]}}});const ZJe=tr({props:mL,setup(e){const t=Xi([]),{singleton:r}=qJe(t,e);return{instances:t,singleton:r}},mounted(){var e;const r=this.$el.parentElement.querySelectorAll("[data-v-tippy]");this.instances=Array.from(r).map(i=>i._tippy).filter(Boolean),(e=this.singleton)===null||e===void 0||e.setInstances(this.instances)},render(){let e=this.$slots.default?this.$slots.default():[];return qs(()=>e)}}),YJe={mounted(e,t,r){const i=typeof t.value=="string"?{content:t.value}:t.value||{},n=Object.keys(t.modifiers||{}),s=n.find(a=>a!=="arrow"),o=n.findIndex(a=>a==="arrow")!==-1;s&&(i.placement=i.placement||s),o&&(i.arrow=i.arrow!==void 0?i.arrow:!0),r.props&&r.props.onTippyShow&&(i.onShow=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShow(...a)}),r.props&&r.props.onTippyShown&&(i.onShown=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyShown(...a)}),r.props&&r.props.onTippyHidden&&(i.onHidden=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHidden(...a)}),r.props&&r.props.onTippyHide&&(i.onHide=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyHide(...a)}),r.props&&r.props.onTippyMount&&(i.onMount=function(...a){var l;return(l=r.props)===null||l===void 0?void 0:l.onTippyMount(...a)}),e.getAttribute("title")&&!i.content&&(i.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!i.content&&(i.content=e.getAttribute("content")),_F(e,i)},unmounted(e){e.$tippy?e.$tippy.destroy():e._tippy&&e._tippy.destroy()},updated(e,t){const r=typeof t.value=="string"?{content:t.value}:t.value||{};e.getAttribute("title")&&!r.content&&(r.content=e.getAttribute("title"),e.removeAttribute("title")),e.getAttribute("content")&&!r.content&&(r.content=e.getAttribute("content")),e.$tippy?e.$tippy.setProps(r||{}):e._tippy&&e._tippy.setProps(r||{})}},KJe={install(e,t={}){fs.setDefaultProps(t.defaultProps||{}),e.directive(t.directive||"tippy",YJe),e.component(t.component||"tippy",WJe),e.component(t.componentSingleton||"tippy-singleton",ZJe)}},jae=fs.setDefaultProps;jae({ignoreAttributes:!0,plugins:[GJe,zJe,VJe,NJe]});const XJe=tr({components:{Shell:sWe},mounted(){aWe.observe(this.$el),jae({aria:{content:"labelledby"},theme:"ramp4",animation:"scale",inertia:!0,trigger:"mouseenter manual focus",appendTo:this.$el}),this.$el.parentElement?.style.setProperty("overflow","hidden")}}),QJe=["lang"];function eZe(e,t,r,i,n,s){const o=or("shell");return De(),et("div",{class:"ramp-app animation-enabled",lang:e.$i18n.locale},[Mt(o)],8,QJe)}var tZe=Ar(XJe,[["render",eZe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/app.vue"]]);/*!
 * vuex v4.0.2
 * (c) 2021 Evan You
 * @license MIT
 */var rZe="store";function Py(e,t){Object.keys(e).forEach(function(r){return t(e[r],r)})}function iZe(e){return e!==null&&typeof e=="object"}function nZe(e){return e&&typeof e.then=="function"}function Ol(e,t){if(!e)throw new Error("[vuex] "+t)}function sZe(e,t){return function(){return e(t)}}function Vae(e,t,r){return t.indexOf(e)<0&&(r&&r.prepend?t.unshift(e):t.push(e)),function(){var i=t.indexOf(e);i>-1&&t.splice(i,1)}}function Uae(e,t){e._actions=Object.create(null),e._mutations=Object.create(null),e._wrappedGetters=Object.create(null),e._modulesNamespaceMap=Object.create(null);var r=e.state;BE(e,r,[],e._modules.root,!0),xF(e,r,t)}function xF(e,t,r){var i=e._state;e.getters={},e._makeLocalGettersCache=Object.create(null);var n=e._wrappedGetters,s={};Py(n,function(o,a){s[a]=sZe(o,e),Object.defineProperty(e.getters,a,{get:function(){return s[a]()},enumerable:!0})}),e._state=eo({data:t}),e.strict&&cZe(e),i&&r&&e._withCommit(function(){i.data=null})}function BE(e,t,r,i,n){var s=!r.length,o=e._modules.getNamespace(r);if(i.namespaced&&(e._modulesNamespaceMap[o]&&console.error("[vuex] duplicate namespace "+o+" for the namespaced module "+r.join("/")),e._modulesNamespaceMap[o]=i),!s&&!n){var a=SF(t,r.slice(0,-1)),l=r[r.length-1];e._withCommit(function(){l in a&&console.warn('[vuex] state field "'+l+'" was overridden by a module with the same name at "'+r.join(".")+'"'),a[l]=i.state})}var u=i.context=oZe(e,o,r);i.forEachMutation(function(h,d){var f=o+d;aZe(e,f,h,u)}),i.forEachAction(function(h,d){var f=h.root?d:o+d,m=h.handler||h;lZe(e,f,m,u)}),i.forEachGetter(function(h,d){var f=o+d;uZe(e,f,h,u)}),i.forEachChild(function(h,d){BE(e,t,r.concat(d),h,n)})}function oZe(e,t,r){var i=t==="",n={dispatch:i?e.dispatch:function(s,o,a){var l=kT(s,o,a),u=l.payload,h=l.options,d=l.type;if((!h||!h.root)&&(d=t+d,!e._actions[d])){console.error("[vuex] unknown local action type: "+l.type+", global type: "+d);return}return e.dispatch(d,u)},commit:i?e.commit:function(s,o,a){var l=kT(s,o,a),u=l.payload,h=l.options,d=l.type;if((!h||!h.root)&&(d=t+d,!e._mutations[d])){console.error("[vuex] unknown local mutation type: "+l.type+", global type: "+d);return}e.commit(d,u,h)}};return Object.defineProperties(n,{getters:{get:i?function(){return e.getters}:function(){return zae(e,t)}},state:{get:function(){return SF(e.state,r)}}}),n}function zae(e,t){if(!e._makeLocalGettersCache[t]){var r={},i=t.length;Object.keys(e.getters).forEach(function(n){if(n.slice(0,i)===t){var s=n.slice(i);Object.defineProperty(r,s,{get:function(){return e.getters[n]},enumerable:!0})}}),e._makeLocalGettersCache[t]=r}return e._makeLocalGettersCache[t]}function aZe(e,t,r,i){var n=e._mutations[t]||(e._mutations[t]=[]);n.push(function(o){r.call(e,i.state,o)})}function lZe(e,t,r,i){var n=e._actions[t]||(e._actions[t]=[]);n.push(function(o){var a=r.call(e,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:e.getters,rootState:e.state},o);return nZe(a)||(a=Promise.resolve(a)),e._devtoolHook?a.catch(function(l){throw e._devtoolHook.emit("vuex:error",l),l}):a})}function uZe(e,t,r,i){if(e._wrappedGetters[t]){console.error("[vuex] duplicate getter key: "+t);return}e._wrappedGetters[t]=function(s){return r(i.state,i.getters,s.state,s.getters)}}function cZe(e){Gs(function(){return e._state.data},function(){Ol(e._committing,"do not mutate vuex store state outside mutation handlers.")},{deep:!0,flush:"sync"})}function SF(e,t){return t.reduce(function(r,i){return r[i]},e)}function kT(e,t,r){return iZe(e)&&e.type&&(r=t,t=e,e=e.type),Ol(typeof e=="string","expects string as the type, but found "+typeof e+"."),{type:e,payload:t,options:r}}var hZe="vuex bindings",kq="vuex:mutations",bA="vuex:actions",Ky="vuex",dZe=0;function pZe(e,t){Poe({id:"org.vuejs.vuex",app:e,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[hZe]},function(r){r.addTimelineLayer({id:kq,label:"Vuex Mutations",color:Oq}),r.addTimelineLayer({id:bA,label:"Vuex Actions",color:Oq}),r.addInspector({id:Ky,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),r.on.getInspectorTree(function(i){if(i.app===e&&i.inspectorId===Ky)if(i.filter){var n=[];Hae(n,t._modules.root,i.filter,""),i.rootNodes=n}else i.rootNodes=[qae(t._modules.root,"")]}),r.on.getInspectorState(function(i){if(i.app===e&&i.inspectorId===Ky){var n=i.nodeId;zae(t,n),i.state=yZe(vZe(t._modules,n),n==="root"?t.getters:t._makeLocalGettersCache,n)}}),r.on.editInspectorState(function(i){if(i.app===e&&i.inspectorId===Ky){var n=i.nodeId,s=i.path;n!=="root"&&(s=n.split("/").filter(Boolean).concat(s)),t._withCommit(function(){i.set(t._state.data,s,i.state.value)})}}),t.subscribe(function(i,n){var s={};i.payload&&(s.payload=i.payload),s.state=n,r.notifyComponentUpdate(),r.sendInspectorTree(Ky),r.sendInspectorState(Ky),r.addTimelineEvent({layerId:kq,event:{time:Date.now(),title:i.type,data:s}})}),t.subscribeAction({before:function(i,n){var s={};i.payload&&(s.payload=i.payload),i._id=dZe++,i._time=Date.now(),s.state=n,r.addTimelineEvent({layerId:bA,event:{time:i._time,title:i.type,groupId:i._id,subtitle:"start",data:s}})},after:function(i,n){var s={},o=Date.now()-i._time;s.duration={_custom:{type:"duration",display:o+"ms",tooltip:"Action duration",value:o}},i.payload&&(s.payload=i.payload),s.state=n,r.addTimelineEvent({layerId:bA,event:{time:Date.now(),title:i.type,groupId:i._id,subtitle:"end",data:s}})}})})}var Oq=8702998,fZe=6710886,mZe=16777215,Bae={label:"namespaced",textColor:mZe,backgroundColor:fZe};function Gae(e){return e&&e!=="root"?e.split("/").slice(-2,-1)[0]:"Root"}function qae(e,t){return{id:t||"root",label:Gae(t),tags:e.namespaced?[Bae]:[],children:Object.keys(e._children).map(function(r){return qae(e._children[r],t+r+"/")})}}function Hae(e,t,r,i){i.includes(r)&&e.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:t.namespaced?[Bae]:[]}),Object.keys(t._children).forEach(function(n){Hae(e,t._children[n],r,i+n+"/")})}function yZe(e,t,r){t=r==="root"?t:t[r];var i=Object.keys(t),n={state:Object.keys(e.state).map(function(o){return{key:o,editable:!0,value:e.state[o]}})};if(i.length){var s=gZe(t);n.getters=Object.keys(s).map(function(o){return{key:o.endsWith("/")?Gae(o):o,editable:!1,value:yL(function(){return s[o]})}})}return n}function gZe(e){var t={};return Object.keys(e).forEach(function(r){var i=r.split("/");if(i.length>1){var n=t,s=i.pop();i.forEach(function(o){n[o]||(n[o]={_custom:{value:{},display:o,tooltip:"Module",abstract:!0}}),n=n[o]._custom.value}),n[s]=yL(function(){return e[r]})}else t[r]=yL(function(){return e[r]})}),t}function vZe(e,t){var r=t.split("/").filter(function(i){return i});return r.reduce(function(i,n,s){var o=i[n];if(!o)throw new Error('Missing module "'+n+'" for path "'+t+'".');return s===r.length-1?o:o._children},t==="root"?e:e.root._children)}function yL(e){try{return e()}catch(t){return t}}var jl=function(t,r){this.runtime=r,this._children=Object.create(null),this._rawModule=t;var i=t.state;this.state=(typeof i=="function"?i():i)||{}},Wae={namespaced:{configurable:!0}};Wae.namespaced.get=function(){return!!this._rawModule.namespaced};jl.prototype.addChild=function(t,r){this._children[t]=r};jl.prototype.removeChild=function(t){delete this._children[t]};jl.prototype.getChild=function(t){return this._children[t]};jl.prototype.hasChild=function(t){return t in this._children};jl.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)};jl.prototype.forEachChild=function(t){Py(this._children,t)};jl.prototype.forEachGetter=function(t){this._rawModule.getters&&Py(this._rawModule.getters,t)};jl.prototype.forEachAction=function(t){this._rawModule.actions&&Py(this._rawModule.actions,t)};jl.prototype.forEachMutation=function(t){this._rawModule.mutations&&Py(this._rawModule.mutations,t)};Object.defineProperties(jl.prototype,Wae);var Ry=function(t){this.register([],t,!1)};Ry.prototype.get=function(t){return t.reduce(function(r,i){return r.getChild(i)},this.root)};Ry.prototype.getNamespace=function(t){var r=this.root;return t.reduce(function(i,n){return r=r.getChild(n),i+(r.namespaced?n+"/":"")},"")};Ry.prototype.update=function(t){Jae([],this.root,t)};Ry.prototype.register=function(t,r,i){var n=this;i===void 0&&(i=!0),Zae(t,r);var s=new jl(r,i);if(t.length===0)this.root=s;else{var o=this.get(t.slice(0,-1));o.addChild(t[t.length-1],s)}r.modules&&Py(r.modules,function(a,l){n.register(t.concat(l),a,i)})};Ry.prototype.unregister=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1],n=r.getChild(i);if(!n){console.warn("[vuex] trying to unregister module '"+i+"', which is not registered");return}!n.runtime||r.removeChild(i)};Ry.prototype.isRegistered=function(t){var r=this.get(t.slice(0,-1)),i=t[t.length-1];return r?r.hasChild(i):!1};function Jae(e,t,r){if(Zae(e,r),t.update(r),r.modules)for(var i in r.modules){if(!t.getChild(i)){console.warn("[vuex] trying to add a new module '"+i+"' on hot reloading, manual reload is needed");return}Jae(e.concat(i),t.getChild(i),r.modules[i])}}var Pq={assert:function(e){return typeof e=="function"},expected:"function"},bZe={assert:function(e){return typeof e=="function"||typeof e=="object"&&typeof e.handler=="function"},expected:'function or object with "handler" function'},Rq={getters:Pq,mutations:Pq,actions:bZe};function Zae(e,t){Object.keys(Rq).forEach(function(r){if(!!t[r]){var i=Rq[r];Py(t[r],function(n,s){Ol(i.assert(n),wZe(e,r,s,n,i.expected))})}})}function wZe(e,t,r,i,n){var s=t+" should be "+n+' but "'+t+"."+r+'"';return e.length>0&&(s+=' in module "'+e.join(".")+'"'),s+=" is "+JSON.stringify(i)+".",s}function _Ze(e){return new no(e)}var no=function e(t){var r=this;t===void 0&&(t={}),Ol(typeof Promise<"u","vuex requires a Promise polyfill in this browser."),Ol(this instanceof e,"store must be called with the new operator.");var i=t.plugins;i===void 0&&(i=[]);var n=t.strict;n===void 0&&(n=!1);var s=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new Ry(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._devtools=s;var o=this,a=this,l=a.dispatch,u=a.commit;this.dispatch=function(f,m){return l.call(o,f,m)},this.commit=function(f,m,g){return u.call(o,f,m,g)},this.strict=n;var h=this._modules.root.state;BE(this,h,[],this._modules.root),xF(this,h),i.forEach(function(d){return d(r)})},MF={state:{configurable:!0}};no.prototype.install=function(t,r){t.provide(r||rZe,this),t.config.globalProperties.$store=this;var i=this._devtools!==void 0?this._devtools:!0;i&&pZe(t,this)};MF.state.get=function(){return this._state.data};MF.state.set=function(e){Ol(!1,"use store.replaceState() to explicit replace store state.")};no.prototype.commit=function(t,r,i){var n=this,s=kT(t,r,i),o=s.type,a=s.payload,l=s.options,u={type:o,payload:a},h=this._mutations[o];if(!h){console.error("[vuex] unknown mutation type: "+o);return}this._withCommit(function(){h.forEach(function(f){f(a)})}),this._subscribers.slice().forEach(function(d){return d(u,n.state)}),l&&l.silent&&console.warn("[vuex] mutation type: "+o+". Silent option has been removed. Use the filter functionality in the vue-devtools")};no.prototype.dispatch=function(t,r){var i=this,n=kT(t,r),s=n.type,o=n.payload,a={type:s,payload:o},l=this._actions[s];if(!l){console.error("[vuex] unknown action type: "+s);return}try{this._actionSubscribers.slice().filter(function(h){return h.before}).forEach(function(h){return h.before(a,i.state)})}catch(h){console.warn("[vuex] error in before action subscribers: "),console.error(h)}var u=l.length>1?Promise.all(l.map(function(h){return h(o)})):l[0](o);return new Promise(function(h,d){u.then(function(f){try{i._actionSubscribers.filter(function(m){return m.after}).forEach(function(m){return m.after(a,i.state)})}catch(m){console.warn("[vuex] error in after action subscribers: "),console.error(m)}h(f)},function(f){try{i._actionSubscribers.filter(function(m){return m.error}).forEach(function(m){return m.error(a,i.state,f)})}catch(m){console.warn("[vuex] error in error action subscribers: "),console.error(m)}d(f)})})};no.prototype.subscribe=function(t,r){return Vae(t,this._subscribers,r)};no.prototype.subscribeAction=function(t,r){var i=typeof t=="function"?{before:t}:t;return Vae(i,this._actionSubscribers,r)};no.prototype.watch=function(t,r,i){var n=this;return Ol(typeof t=="function","store.watch only accepts a function."),Gs(function(){return t(n.state,n.getters)},r,Object.assign({},i))};no.prototype.replaceState=function(t){var r=this;this._withCommit(function(){r._state.data=t})};no.prototype.registerModule=function(t,r,i){i===void 0&&(i={}),typeof t=="string"&&(t=[t]),Ol(Array.isArray(t),"module path must be a string or an Array."),Ol(t.length>0,"cannot register the root module by using registerModule."),this._modules.register(t,r),BE(this,this.state,t,this._modules.get(t),i.preserveState),xF(this,this.state)};no.prototype.unregisterModule=function(t){var r=this;typeof t=="string"&&(t=[t]),Ol(Array.isArray(t),"module path must be a string or an Array."),this._modules.unregister(t),this._withCommit(function(){var i=SF(r.state,t.slice(0,-1));delete i[t[t.length-1]]}),Uae(this)};no.prototype.hasModule=function(t){return typeof t=="string"&&(t=[t]),Ol(Array.isArray(t),"module path must be a string or an Array."),this._modules.isRegistered(t)};no.prototype.hotUpdate=function(t){this._modules.update(t),Uae(this,!0)};no.prototype._withCommit=function(t){var r=this._committing;this._committing=!0,t(),this._committing=r};Object.defineProperties(no.prototype,MF);class xZe{items={}}var gL=(e=>(e.ADD_FIXTURE="ADD_FIXTURE",e.REMOVE_FIXTURE="REMOVE_FIXTURE",e))(gL||{});const SZe={},MZe={},IZe={ADD_FIXTURE(e,{value:t}){e.items={...e.items,[t.id]:t},typeof t.added=="function"&&t.added()},REMOVE_FIXTURE(e,{value:t}){delete e.items[t.id],e.items={...e.items},typeof t.removed=="function"&&t.removed()}};function TZe(){const e=new xZe;return{namespaced:!0,state:e,getters:{...SZe},actions:{...MZe},mutations:{...IZe}}}class $Ze{notificationStack=[];groups={}}const EZe={notificationNumber:e=>e.notificationStack.length>=99?99:e.notificationStack.length},AZe={showNotification(e,t){e.commit("SHOW_NOTIFICATION",t)},removeNotification(e,t){e.state.notificationStack.includes(t)&&(t instanceof dae&&e.commit("REMOVE_GROUP",t),e.commit("REMOVE_NOTIFICATION",t))},registerGroup(e,t){e.commit("REGISTER_GROUP",t)},addToGroup(e,t){e.state.groups[t.id]&&(e.commit("ADD_TO_GROUP",t),e.state.notificationStack.includes(e.state.groups[t.id])||e.commit("SHOW_GROUP",t.id))},clearAll(e){Object.values(e.state.groups).forEach(t=>e.commit("REMOVE_GROUP",t)),e.commit("CLEAR_ALL")}},CZe={SHOW_NOTIFICATION(e,t){e.notificationStack=[t,...e.notificationStack]},REMOVE_NOTIFICATION(e,t){const r=e.notificationStack.indexOf(t);r>-1&&e.notificationStack.splice(r,1)},ADD_TO_GROUP(e,t){e.groups[t.id].messageList.push(t.message)},SHOW_GROUP(e,t){e.notificationStack=[e.groups[t],...e.notificationStack]},REMOVE_GROUP(e,t){const r=e.notificationStack.indexOf(t);r>-1&&e.notificationStack.splice(r,1),t.messageList=[]},REGISTER_GROUP(e,t){e.groups[t.id]=t},CLEAR_ALL(e){e.notificationStack=[]}};function kZe(){const e=new $Ze;return{namespaced:!0,state:e,getters:{...EZe},actions:{...AZe},mutations:{...CZe,...gs.mutations(e)}}}class OZe{items={};orderedItems=[];pinned=null;priority=null;visible=[];stackWidth=0;remainingWidth=0;mobileView=!1}var C3=(e=>(e.openPanel="openPanel",e.closePanel="closePanel",e.removePanel="removePanel",e.setWidth="setWidth",e.setStackWidth="setStackWidth",e.setMobileView="setMobileView",e.updateVisible="updateVisible",e))(C3||{}),vL=(e=>(e.REGISTER_PANEL="REGISTER_PANEL",e.OPEN_PANEL="OPEN_PANEL",e.ADD_TO_PANEL_ORDER="ADD_TO_PANEL_ORDER",e.CLOSE_PANEL="CLOSE_PANEL",e.REMOVE_PANEL="REMOVE_PANEL",e.SET_ORDERED_ITEMS="SET_ORDERED_ITEMS",e.SET_PRIORITY="SET_PRIORITY",e.SET_VISIBLE="SET_VISIBLE",e.SET_WIDTH="SET_WIDTH",e.SET_REMAINING_WIDTH="SET_REMAINING_WIDTH",e))(vL||{});const PZe={getVisible:e=>t=>t==="xs"&&e.visible.length>0?[e.visible.slice().pop()]:e.visible,getRemainingWidth:e=>e.remainingWidth},RZe={openPanel(e,t){e.commit("OPEN_PANEL",t),e.commit("SET_PRIORITY",t),e.dispatch("updateVisible")},closePanel(e,t){e.state.priority===t.panel&&e.commit("SET_PRIORITY",null),e.commit("CLOSE_PANEL",t),e.dispatch("updateVisible")},removePanel(e,t){e.state.priority===t.panel&&e.commit("SET_PRIORITY",null),e.commit("REMOVE_PANEL",t),e.dispatch("updateVisible")},setWidth(e,t){e.commit("SET_WIDTH",t),e.dispatch("updateVisible")},setStackWidth(e,t){e.commit("SET_STACK_WIDTH",t),e.dispatch("updateVisible")},setMobileView(e,t){e.commit("SET_MOBILE_VIEW",t)},updateVisible(e){let t=e.state.stackWidth,r=[];for(let i=e.state.orderedItems.length-1;i>=0;i--){let n=e.state.orderedItems[i].width||350;e.state.mobileView?n=0:n+=12,t>=n&&(t-=n,r.unshift(e.state.orderedItems[i]))}if(e.state.pinned&&!r.includes(e.state.pinned)){let i;for(let a=0;a<r.length-1&&t<(e.state.pinned.width||350);a++)i=r.shift(),t+=i.width||350;t>=(e.state.pinned.width||350)?r.unshift(e.state.pinned):e.state.priority||(i=r.shift(),r.unshift(e.state.pinned));const n=e.state.orderedItems.indexOf(e.state.pinned),s=e.state.orderedItems.indexOf(i),o=e.state.orderedItems.slice();o.splice(n,1),o.splice(s,0,e.state.pinned),e.commit("SET_ORDERED_ITEMS",o)}else e.commit("SET_PRIORITY",null);e.commit("SET_REMAINING_WIDTH",t),e.commit("SET_VISIBLE",r)}},LZe={REGISTER_PANEL(e,{panel:t}){e.items={...e.items,[t.id]:t}},OPEN_PANEL(e,{panel:t}){e.orderedItems=[...e.orderedItems,t]},CLOSE_PANEL(e,{panel:t}){const r=e.orderedItems.indexOf(t);r!==-1&&(e.orderedItems=[...e.orderedItems.slice(0,r),...e.orderedItems.slice(r+1)])},REMOVE_PANEL(e,{panel:t}){e.items[t.id]!==void 0&&delete e.items[t.id];const r=e.visible.indexOf(t);r!==-1&&(e.visible=[...e.visible.slice(0,r),...e.visible.slice(r+1)]),e.pinned!==null&&e.pinned.id==t.id&&(e.pinned=null)}};function NZe(){const e=new OZe;return{namespaced:!0,state:e,getters:{...PZe},actions:{...RZe},mutations:{...LZe,...gs.mutations(e)}}}function DZe(){return _Ze({plugins:[RVe.plugin],modules:{config:uUe(),fixture:TZe(),layer:sUe(),mapcaption:QVe(),maptip:TBe(),notification:kZe(),panel:NZe()}})}const Iu="focus-list",qp="focus-item",FZe="focus-container",O0=`[${Iu}],[${FZe}]`,jS="truncate-text",VS="show-truncate",d0="focused",Yae=`button,input,select,a,textarea,[contenteditable],[${Iu}]`,jZe={mounted(e,t){+e.getAttribute("tabindex")<=0&&e.setAttribute("tabindex","0"),e.toggleAttribute(Iu,!0),new VZe(e,t.value)},updated(e){Kae(e)}};function Kae(e){e.querySelectorAll(Yae).forEach(r=>{if(r.closest(O0)===e||r.closest(O0)===r&&r.parentElement.closest(O0)===e)if(r.closest(`[${Iu}],.${d0}`).classList.contains(d0))r.setAttribute("tabindex","0");else{r.setAttribute("tabindex","-1");return}})}class VZe{element;highlightedItem;isHorizontal;isClicked;constructor(t,r){this.element=t,this.highlightedItem=this.element,this.isHorizontal=r==="horizontal",this.isClicked=!1,this.setTabIndex(-1);const i=this;t.addEventListener("keydown",function(n){i.onKeydown(n)}),t.addEventListener("click",function(n){i.onClick(n)}),t.addEventListener("focus",function(n){i.onFocus()}),t.addEventListener("blur",function(n){i.onBlur()}),t.addEventListener("mousedown",function(n){i.onMousedown()})}setTabIndex(t,r=this.element){r.querySelectorAll(Yae).forEach(n=>{(t===-1||n.closest(O0)===this.element||n.closest(O0)===n&&n.parentElement.closest(O0)===this.element||n.closest(`[${Iu}],.${d0}`).classList.contains(d0))&&n.setAttribute("tabindex",t.toString())})}defocusItem(t){t.classList.remove(d0),this.setTabIndex(-1,t),t._tippy&&t._tippy.hide(),t.getAttribute(qp)===VS&&t.querySelector(`[${jS}]`)?._tippy?.hide()}focusItem(t){t.classList.add(d0),this.setAriaActiveDescendant(t),this.setTabIndex(0,t),t.scrollIntoView({block:"nearest"}),t._tippy&&t._tippy.show(),t.getAttribute(qp)===VS&&t.querySelector(`[${jS}]`)?._tippy?.show()}setAriaActiveDescendant(t){this.element.setAttribute("aria-activedescendant",t.getAttribute("id"))}shiftHighlight(t,r=!1){if(this.defocusItem(this.highlightedItem),r)if(this.highlightedItem===this.element)this.highlightedItem=t[t.length-1];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i-1]||t[t.length-1]}else if(this.highlightedItem===this.element)this.highlightedItem=t[0];else{const i=Array.prototype.indexOf.call(t,this.highlightedItem);this.highlightedItem=t[i+1]||t[0]}this.element.focus(),this.focusItem(this.highlightedItem)}onKeydown(t){const r=this,i=Array.prototype.filter.call(this.element.querySelectorAll(`[${qp}]`),n=>n.closest(`[${Iu}]`)===r.element&&!!n.offsetParent);if(i.length!==0)switch(t.key){case"Up":case"ArrowUp":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Down":case"ArrowDown":if(this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Left":case"ArrowLeft":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i,!0);break;case"Right":case"ArrowRight":if(!this.isHorizontal)break;t.preventDefault(),t.stopPropagation(),this.shiftHighlight(i);break;case"Esc":case"Escape":this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.defocusItem(this.highlightedItem),this.highlightedItem=this.element,this.element.removeAttribute("aria-activedescendant"),this.element.focus());break;case"Enter":case" ":t.target===this.element&&this.highlightedItem!==this.element&&(t.preventDefault(),t.stopPropagation(),this.highlightedItem.click());break}}onClick(t){this.defocusItem(this.highlightedItem);let r=t.target;if(!r.hasAttribute(Iu))for(;r.parentElement.closest(`[${Iu}]`)!==this.element;)r=r.parentElement.closest(`[${Iu}]`);this.highlightedItem=r.closest(`[${qp}]`)||r.closest(`[${Iu}]`)||this.highlightedItem,r.hasAttribute(`${qp}`)&&this.element.focus(),this.highlightedItem!==this.element?this.focusItem(this.highlightedItem):this.element.removeAttribute("aria-activedescendant")}onFocus(){this.highlightedItem&&!this.isClicked&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.show(),this.highlightedItem.getAttribute(qp)===VS&&this.highlightedItem.querySelector(`[${jS}]`)?._tippy?.show()),this.isClicked=!1,this.element.hasAttribute("aria-activedescendant")||this.highlightedItem===this.element||this.setAriaActiveDescendant(this.highlightedItem),Kae(this.element)}onBlur(){this.highlightedItem&&(this.highlightedItem._tippy&&this.highlightedItem._tippy.hide(),this.highlightedItem.getAttribute(qp)===VS&&this.highlightedItem.querySelector(`[${jS}]`)?._tippy?.hide())}onMousedown(){this.isClicked=!0}}const Lq="focus-item",UZe={beforeMount(e,t){e.hasAttribute("id")||e.setAttribute("id",zZe()),t.value?e.setAttribute(Lq,t.value):e.toggleAttribute(Lq,!0)}};function zZe(){let e;do e="focus-item-"+Math.random().toString(36).substring(2,9);while(document.getElementById(e)!==null);return e}const IF="focus-container",Xae="focus-list",wA=`[${Xae}],[${IF}]`,_A=`button,input,select,a,textarea,[contenteditable],.ag-tab-guard,[${Xae}],[${IF}]`;let xA=[];const BZe={mounted(e,t){xA.push(new GZe(e,t.value))},beforeUnmount(e){xA=xA.filter(t=>t.element===e?(t.removeEventListeners(),!1):!0)}};class GZe{element;constructor(t,r){this.element=t,this.element.toggleAttribute(IF,!0),this.element.tabIndex=0,this.disableTabbing();const i=this;this.element.addEventListener("keypress",function(n){i.onKeypress(n)}),this.element.addEventListener("click",function(){i.onClick()}),this.element.addEventListener("focusout",function(n){i.onFocusOut(n)}),this.element.addEventListener("focus",function(n){i.onFocus()})}removeEventListeners(){const t=this;this.element.removeEventListener("keypress",function(r){t.onKeypress(r)}),this.element.removeEventListener("click",function(){t.onClick()}),this.element.removeEventListener("focusout",function(r){t.onFocusOut(r)}),this.element.removeEventListener("focus",function(r){t.onFocus()})}onKeypress(t){t.target===this.element&&(t.key==="Enter"||t.key===" ")&&(this.enableTabbing(),this.element.querySelector(_A).focus())}onClick(){this.enableTabbing()}onFocusOut(t){this.element.contains(t.relatedTarget)||this.disableTabbing()}onFocus(){this.disableTabbing()}disableTabbing(){Array.prototype.filter.call(this.element.querySelectorAll(_A),r=>!0).forEach(r=>{r.tabIndex=-1})}enableTabbing(){Array.prototype.map.call(this.element.querySelectorAll(_A),t=>{(t.closest(wA)===this.element||t.closest(wA)===t&&t.parentElement.closest(wA)===this.element)&&!!t.offsetParent&&(t.tabIndex=0)})}}const qZe="truncate-text",HZe="truncate-trigger",WZe={beforeMount(e){e.classList.contains("truncate")||e.classList.add("truncate"),e.toggleAttribute(qZe,!0)},mounted(e,t){let r;t.value&&t.value.externalTrigger&&(r=e.closest(`[${HZe}]`)),_F(e,{content:e.textContent,onShow:JZe,placement:"bottom-start",triggerTarget:r,...t.value?.options||{}})},updated(e,t){e._tippy&&(e._tippy.setContent(e.textContent),t.value&&t.value.options&&e._tippy.setProps(t.value.options))},unmounted(e){e._tippy&&e._tippy.destroy()}};function JZe(e){if(e.reference.clientWidth>=e.reference.scrollWidth)return!1}const ZZe=tr({name:"PanelScreenV",props:{header:{type:Boolean,default:!0},content:{type:Boolean,default:!0},footer:{type:Boolean,default:!1},panel:{type:Object,required:!0}},data(){return{temporary:this.get("appbar/temporary")}}}),YZe=["content"],KZe={key:0,class:"flex flex-shrink-0 items-center border-b border-solid border-gray-600 px-8 h-48 overflow-hidden",tabindex:"-1"},XZe={class:"flex-grow text-lg py-16 pl-8 min-w-0"},QZe={class:"hidden sm:flex"},eYe={key:1,class:"p-8 flex-grow overflow-y-auto"},tYe={key:2,class:"px-16 py-16 border-t border-gray-400 default-focus-style"};function rYe(e,t,r,i,n,s){const o=or("back"),a=or("panel-options-menu"),l=or("pin"),u=or("expand"),h=or("minimize"),d=or("close"),f=Er("truncate"),m=Er("focus-item"),g=Er("tippy");return xr((De(),et("div",{class:"h-full flex flex-col items-stretch",content:e.$t("panels.access")},[e.header?(De(),et("header",KZe,[Mt(o,{class:"block sm:hidden",onClick:t[0]||(t[0]=b=>e.panel.close())}),xr((De(),et("h2",XZe,[cl(e.$slots,"header")])),[[f]]),e.$slots.controls?(De(),zi(a,{key:0},{default:Pi(()=>[cl(e.$slots,"controls")]),_:3})):Yt("v-if",!0),ke("div",QZe,[Mt(l,{onClick:t[1]||(t[1]=b=>e.panel.pin()),active:e.panel.isPinned},null,8,["active"]),e.panel.controls&&e.panel.controls.expand?(De(),zi(u,{key:0,onClick:t[2]||(t[2]=b=>e.panel.expand()),active:e.panel.expanded},null,8,["active"])):Yt("v-if",!0),e.panel.button&&e.temporary?.includes(e.panel.id)?(De(),zi(h,{key:1,onClick:t[3]||(t[3]=b=>e.panel.minimize())})):Yt("v-if",!0),Mt(d,{onClick:t[4]||(t[4]=b=>e.panel.close())})])])):Yt("v-if",!0),e.content?(De(),et("div",eYe,[cl(e.$slots,"content")])):Yt("v-if",!0),e.footer?xr((De(),et("div",tYe,[cl(e.$slots,"footer")])),[[m]]):Yt("v-if",!0)],8,YZe)),[[g,{trigger:"focus",appendTo:"parent",popperOptions:{modifiers:[{name:"preventOverflow",options:{altAxis:!0}}]}}]])}var iYe=Ar(ZZe,[["render",rYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/panel-screen.vue"]]);const nYe=tr({name:"PinV",props:{active:{type:Boolean}}}),sYe={class:"relative",tabindex:"-1"},oYe=["content"],aYe=["transform"],lYe=ke("path",{d:"M298.028 214.267L285.793 96H328c13.255 0 24-10.745 24-24V24c0-13.255-10.745-24-24-24H56C42.745 0 32 10.745 32 24v48c0 13.255 10.745 24 24 24h42.207L85.972 214.267C37.465 236.82 0 277.261 0 328c0 13.255 10.745 24 24 24h136v104.007c0 1.242.289 2.467.845 3.578l24 48c2.941 5.882 11.364 5.893 14.311 0l24-48a8.008 8.008 0 0 0 .845-3.578V352h136c13.255 0 24-10.745 24-24-.001-51.183-37.983-91.42-85.973-113.733z"},null,-1),uYe=[lYe];function cYe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",sYe,[xr((De(),et("button",{class:zn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t(this.active?"panels.controls.unpin":"panels.controls.pin")},[(De(),et("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 384 512",transform:`rotate(${e.active?30:0})`},uYe,8,aYe))],10,oYe)),[[o,{placement:"bottom",hideOnClick:!1}]])])}var hYe=Ar(nYe,[["render",cYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/pin.vue"]]);const dYe=tr({name:"CloseV",props:{active:Boolean}}),pYe={class:"relative",tabindex:"-1"},fYe=["content"],mYe=ke("svg",{class:"fill-current w-16 h-16",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 352 512"},[ke("path",{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"})],-1),yYe=[mYe];function gYe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",pYe,[xr((De(),et("button",{class:zn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t("panels.controls.close")},yYe,10,fYe)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var vYe=Ar(dYe,[["render",gYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/close.vue"]]);const bYe=tr({name:"BackV",props:{active:{type:Boolean}}}),wYe={class:"relative",tabindex:"-1"},_Ye=["content"],xYe=ke("svg",{xmlns:"http://www.w3.org/2000/svg",class:"fill-current w-16 h-16",viewBox:"0 0 16 16"},[ke("path",{d:"M20.485784919653916,7.578491965389372h-14.170000000000005l3.5800000000000054,-3.589999999999997l-1.409999999999993,-1.4099999999999984l-6.000000000000008,6.0000000000000275l6.000000000000008,6l1.409999999999993,-1.4100000000000001l-3.58,-3.59h14.170000000000007Z",transform:"matrix(0.865803 0 0 0.865803 -1.99071 0.638058)"})],-1),SYe=[xYe];function MYe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",wYe,[xr((De(),et("button",{class:zn(["text-gray-500 hover:text-black focus:text-black p-8",{"text-gray-700":e.active}]),content:e.$t("panels.controls.back")},SYe,10,_Ye)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var IYe=Ar(bYe,[["render",MYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/back.vue"]]);const TYe=tr({name:"ExpandV",props:{active:Boolean}}),$Ye={class:"w-32 h-32"},EYe=["content"],AYe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"h-24 w-24 fill-current transform rotate-90"},CYe=ke("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),kYe=ke("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),OYe=ke("path",{d:"M4 20h16v2H4zM4 2h16v2H4zm9 7h3l-4-4-4 4h3v6H8l4 4 4-4h-3z"},null,-1),PYe=[CYe,kYe,OYe],RYe=cD('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="h-24 w-24 fill-current transform rotate-90"><path d="M0 0h24v24H0z" fill="none"></path><path d="M0 0h24v24H0V0z" fill="none"></path><path d="M8 19h3v3h2v-3h3l-4-4-4 4zm8-15h-3V1h-2v3H8l4 4 4-4zM4 9v2h16V9H4z"></path><path d="M4 12h16v2H4z"></path></svg>',1);function LYe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",$Ye,[xr((De(),et("button",{class:"text-gray-500 hover:text-black focus:text-black w-full h-full flex justify-center items-center",content:e.$t(`panels.controls.${e.active?"collapse":"expand"}`)},[Yt(" EXPAND https://fonts.google.com/icons?selected=Material%20Icons%3Aexpand%3A "),e.active?(De(),et(hr,{key:1},[Yt(" Collapse/shrink/compress/etc. https://fonts.google.com/icons?selected=Material%20Icons%3Acompress%3A "),RYe],2112)):(De(),et("svg",AYe,PYe))],8,EYe)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale",hideOnClick:!1}]])])}var NYe=Ar(TYe,[["render",LYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/expand.vue"]]);const DYe=tr({name:"MinimizeV",props:{active:{type:Boolean}}}),FYe={class:"relative",tabindex:"-1"},jYe=["content"],VYe=ke("svg",{class:"fill-current w-20 h-20",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[ke("path",{d:"M0 0h24v24H0V0z",fill:"none"}),ke("path",{d:"M6 19h12v2H6z"})],-1),UYe=[VYe];function zYe(e,t,r,i,n,s){const o=Er("tippy");return De(),et("div",FYe,[xr((De(),et("button",{class:zn(["text-gray-500 hover:text-black focus:text-black p-6",{"text-gray-700":e.active}]),content:e.$t("panels.controls.minimize")},UYe,10,jYe)),[[o,{placement:"bottom",theme:"ramp4",animation:"scale"}]])])}var BYe=Ar(DYe,[["render",zYe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/minimize.vue"]]);const GYe=tr({name:"PanelOptionsMenuV",components:{"dropdown-menu":VE},data(){return{open:!1}}}),qYe=e=>(Th("data-v-ec89ea3a"),e=e(),$h(),e),HYe=qYe(()=>ke("div",{class:"p-6"},[ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-20 h-20"},[ke("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"})])],-1));function WYe(e,t,r,i,n,s){const o=or("dropdown-menu");return De(),zi(o,{class:"flex",tooltip:e.$t("panels.controls.optionsMenu"),popperOptions:{strategy:"fixed"},position:"bottom-end"},{header:Pi(()=>[HYe]),default:Pi(()=>[cl(e.$slots,"default",{},void 0,!0)]),_:3},8,["tooltip"])}var JYe=Ar(GYe,[["render",WYe],["__scopeId","data-v-ec89ea3a"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/controls/panel-options-menu.vue"]]);const ZYe=tr({name:"FullscreenNavV",methods:{onClick(){this.$iApi.toggleFullscreen()}}}),YYe={key:0,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},KYe=ke("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),XYe=ke("path",{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},null,-1),QYe=[KYe,XYe],eKe={key:1,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},tKe=ke("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),rKe=ke("path",{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},null,-1),iKe=[tKe,rKe];function nKe(e,t,r,i,n,s){const o=or("mapnav-button");return De(),zi(o,{onClickFunction:e.onClick,tooltip:e.$t("mapnav.fullscreen")},{default:Pi(()=>[e.$iApi.isFullscreen?(De(),et("svg",YYe,QYe)):(De(),et("svg",eKe,iKe))]),_:1},8,["onClickFunction","tooltip"])}var sKe=Ar(ZYe,[["render",nKe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/buttons/fullscreen-nav.vue"]]);const oKe=tr({name:"HomeNavV",methods:{goToHome(){const e=this.$iApi.geo.map.getExtentSet();this.$iApi.geo.map.zoomMapTo(e.fullExtent)}}}),aKe=ke("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",class:"fill-current w-32 h-20"},[ke("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),ke("path",{d:"M0 0h24v24H0z",fill:"none"})],-1);function lKe(e,t,r,i,n,s){const o=or("mapnav-button");return De(),zi(o,{onClickFunction:e.goToHome,tooltip:e.$t("mapnav.home")},{default:Pi(()=>[aKe]),_:1},8,["onClickFunction","tooltip"])}var uKe=Ar(oKe,[["render",lKe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/buttons/home-nav.vue"]]);const cKe=tr({name:"MapnavButtonV",props:{onClickFunction:{type:Function,required:!0},tooltip:{type:[String,Boolean],default:!1}}}),hKe={class:"relative w-32 h-32 text-gray-600 hover:text-black",tabindex:"-1"},dKe=["content"];function pKe(e,t,r,i,n,s){const o=Er("focus-item"),a=Er("tippy");return De(),et("div",hKe,[xr((De(),et("button",{class:"w-full h-full default-focus-style focus:outline-none",onClick:t[0]||(t[0]=l=>e.onClickFunction()),content:e.tooltip},[cl(e.$slots,"default")],8,dKe)),[[o],[a,{placement:"left"}]])])}var fKe=Ar(cKe,[["render",pKe],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/mapnav/button.vue"]]);const mKe=tr({name:"AppbarButtonV",props:{onClickFunction:{type:Function,required:!0},id:{type:String,required:!0},tooltip:{type:[String,Boolean],default:!1}},methods:{onClick(){this.$iApi.event.emit("appbar/click",this.id)}}}),yKe={class:"relative",tabindex:"-1"},gKe=["content"];function vKe(e,t,r,i,n,s){const o=Er("focus-item"),a=Er("tippy");return De(),et("div",yKe,[xr((De(),et("button",{class:"py-6 w-full h-full",onClick:t[0]||(t[0]=()=>{e.onClickFunction(),e.onClick()}),content:e.tooltip},[cl(e.$slots,"default",{},void 0,!0)],8,gKe)),[[o],[a,{placement:"right"}]])])}var bKe=Ar(mKe,[["render",vKe],["__scopeId","data-v-0b6ee534"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/fixtures/appbar/button.vue"]]);class wKe{fixture;panel;event;geo;notify;startRequired;ui;started=!1;$vApp;$element;_isFullscreen;constructor(t,r,i){console.log(`RAMP v4.0.0-alpha [${"c25ad4fcbec607b751da23743d1223a1eb20e0f7".slice(0,9)}] (Built on ${new Date("Thu Jun 16 15:55:17 2022 -0400".toString()).toLocaleString()})`),i?.startRequired?this.startRequired=!0:this.startRequired=!1,this.event=new mUe(this);const n=_Ke(t,this);this.$vApp=n.app,this.$element=n.element,this.fixture=new Fet(this),this.panel=new jet(this),this.geo=new Net(this),this.ui={maptip:this.geo.map.maptip},this.notify=new kqe(this),this._isFullscreen=Wl.isEnabled&&!!this.$vApp.$root&&Wl.isFullscreen&&Wl.element===this.$vApp.$root.$el,Wl.isEnabled&&Wl.onchange(()=>{this._isFullscreen=Wl.isEnabled&&!!this.$vApp.$root&&Wl.isFullscreen&&Wl.element===this.$vApp.$root.$el}),this.initialize(r,i)}initialize(t,r){if(t?.configs!==void 0){let i=t.configs;const n=i[this.$vApp.$i18n.locale]??i[Object.keys(i)[0]];this.$vApp.$store.set(ls.newConfig,n),this.$vApp.$store.set(ls.registerConfig,{config:n,configLangs:Object.keys(i),allLangs:Object.keys(this.$vApp.$i18n.messages)});for(let s in i)this.$vApp.$store.set(ls.registerConfig,{config:i[s],configLangs:[s]});this.$vApp.$store.set(ls.setActiveBasemap,n.map.basemaps.find(s=>s.id===n.map.initialBasemapId)),!n.system?.animate&&this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.remove("animation-enabled"),n.system?.proxyUrl&&(this.geo.proxy=n.system.proxyUrl)}r||(r={}),(r.loadDefaultFixtures!==!1||t?.startingFixtures!==void 0)&&this.fixture.addDefaultFixtures(t?.startingFixtures),r.loadDefaultEvents!==!1&&this.event.addDefaultEvents()}reload(t,r){Object.keys(this.$vApp.$store.get("fixture/items")).forEach(n=>{this.fixture.get(n)!==void 0&&this.fixture.remove(n)}),this.geo.map.destroyMap(),this.event.offAll(),t===void 0&&(t=JSON.parse(JSON.stringify({configs:this.$vApp.$store.get(ls.getRegisteredConfigs)}))),this.$vApp.$store.set("notification/clearAll!",{}),this.geo.map.maptip.clear(),this.started=!1,this.initialize(t,r)}component(t,r){if(r){const i=this.$element.component(t,r);return this.event.emit(vt.COMPONENT,t),i}return this.$element.component(t)}get screenSize(){if(!this.$element||!this.$element._container)return null;const t=this.$element._container.children[0].classList;return t.contains("lg")?"lg":t.contains("md")?"md":t.contains("sm")?"sm":"xs"}getConfig(){const t=this.$vApp.$i18n.locale;return JSON.parse(JSON.stringify(this.$vApp.$store.get(ls.getActiveConfig,t)))}setLanguage(t){if(this.$vApp.$i18n.locale===t)return;const r=this.$vApp.$store.get(ls.getRegisteredLangs);if(r[t]===r[this.$vApp.$i18n.locale]){this.$vApp.$i18n.locale=t;return}this.$vApp.$i18n.locale=t;const i=this.getConfig();this.$vApp.$iApi.event.emit(vt.CONFIG_CHANGE,i),this.reload()}get language(){return this.$vApp.$i18n.locale}get animate(){return!!(this.$element._container&&this.$element._container.children[0]&&this.$element._container.children[0].classList.contains("animation-enabled"))}toggleFullscreen(){Wl.isEnabled&&Wl.toggle(this.$element._container||void 0)}get isFullscreen(){return this._isFullscreen}updateAlert(t){const r=this.$vApp.$el.querySelector(".screen-reader-alert");r.childNodes.length>0&&(r.innerHTML="");const i=document.createElement("span");i.setAttribute("role","alert");const n=document.createTextNode(t);i.appendChild(n),r.insertBefore(i,null)}start(){!this.started&&this.startRequired?(this.event.emit(vt.MAP_START),this.started=!0):this.started&&console.warn("start has already been called")}}function _Ke(e,t){const r=DZe(),i=bBe(),n=SE(tZe).use(r).use(i).use(KJe,{directive:"tippy",component:"tippy"}).use(wBe).use(_Be);n.directive("focus-container",BZe),n.directive("focus-list",jZe),n.directive("focus-item",UZe),n.directive("truncate",WZe),n.component("panel-screen",iYe),n.component("pin",hYe),n.component("close",vYe),n.component("back",IYe),n.component("expand",NYe),n.component("panel-options-menu",JYe),n.component("dropdown-menu",VE),n.component("minimize",BYe),n.component("fullscreen-nav-button",sKe),n.component("home-nav-button",uKe),n.component("mapnav-button",fKe),n.component("appbar-button",bKe),n.config.globalProperties.$store=r,n.config.globalProperties.$iApi=t;const s=n.mount(e);return{element:n,app:s}}class xKe{esriBasemap;config;constructor(t){this.config=t,this.esriBasemap=new Vm({baseLayers:t.layers.map(r=>{if(r.layerType===yr.TILE)return new x6({url:r.url,opacity:r.opacity});if(r.layerType===yr.MAPIMAGE)return new w6({url:r.url,opacity:r.opacity});if(r.layerType===yr.OSM)return new _6({opacity:r.opacity});throw new Error(`Unsupported layer type provided to basemap config: ${r.layerType}`)}),title:t.name||"",id:t.id})}get tileSchemaId(){return this.config.tileSchemaId}get id(){return this.config.id}get name(){return this.config.name}set name(t){this.config.name=t}get description(){return this.config.description}set description(t){this.config.description=t}get altText(){return this.config.altText}set altText(t){this.config.altText=t}get attribution(){return this.config.attribution}set attribution(t){this.config.attribution=t}}class SKe extends Gi{esriMap;_basemapStore;created=!1;esriView;_viewPromise;get viewPromise(){return this._viewPromise.getPromise()}_rampSR;_rampExtentSet;_targetDiv;handlers;pointZoomScale;constructor(t){super(t),this.esriMap=void 0,this._basemapStore=[],this._viewPromise=new Mo,this.handlers=[],this.pointZoomScale=5e4}noMapErr(){console.error("Attempted to manipulate the map before calling createMap()")}abstractError(){throw new Error("Attempted to call an abstract method in the parent CommonMapAPI")}createMap(t,r){this._basemapStore=t.basemaps.map(n=>new xKe(n));const i={};t.initialBasemapId&&(i.basemap=it(this.findBasemap(t.initialBasemapId).esriBasemap)),this.esriMap=Gn(new $X(i)),this.pointZoomScale=t.pointZoomScale&&t.pointZoomScale>0?t.pointZoomScale:5e4,this._targetDiv=r,this.createMapView(t.initialBasemapId)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMapView(),this.esriMap.destroy(),delete this.esriMap,this._basemapStore.forEach(t=>t.esriBasemap.destroy()),this._basemapStore=[]}reloadMap(t,r){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.destroyMap(),this.createMap(t,r)}createMapView(t){this.abstractError()}destroyMapView(){if(!this.esriView){this.noMapErr();return}this._viewPromise=new Mo,this.created=!1,this.handlers.forEach(t=>t.handler.remove()),this.handlers=[],this.esriView.map=null,this.esriView.container=null,this.esriView.spatialReference=null,this.esriView.extent=null,this.esriView.navigation=null,this.esriView.destroy(),delete this.esriView}findBasemap(t){const r=this._basemapStore.find(i=>i.id===t);if(r)return r;throw new Error(`Invalid basemap id requested: ${t}`)}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=it(r.esriBasemap)}setBasemap(t){return this.abstractError(),!1}getCurrentBasemapId(){if(this.esriMap)return this.esriMap.basemap.id;this.noMapErr()}geomToMapSR(t){if(!this._rampSR)throw new Error("call to map.geomToMapSR before the map spatial ref was created");return this._rampSR.isEqual(t.sr)?Promise.resolve(t):this.$iApi.geo.proj.projectGeometry(this._rampSR,t)}async zoomMapTo(t,r,i=!0){if(this.esriView){if(t.invalid())throw new Error("attempt to zoom to invalid geometry");const n=await this.geomToMapSR(t),s={target:this.$iApi.geo.geom.geomRampToEsri(n)};n.type===Vt.POINT&&(s.scale=r||this.pointZoomScale);const o={animate:i};if(this.esriView)return this.esriView.goTo(s,o)}else this.noMapErr()}getZoomLevel(){return this.esriView?this.esriView.zoom:(this.noMapErr(),1)}getScale(){return this.esriView?this.esriView.scale:(this.noMapErr(),1)}getResolution(){return this.esriView?this.esriView.resolution:(this.noMapErr(),1)}getExtent(){return this.esriView?Ei.fromESRI(this.esriView.extent):(this.noMapErr(),Ei.fromParams("i_am_error",0,1,0,1))}getExtentSet(){return this._rampExtentSet?this._rampExtentSet:(this.noMapErr(),A_.fromConfig({id:"i_am_error_extent_set",default:{xmin:0,xmax:1,ymin:0,ymax:1,spatialReference:{wkid:4326}}}))}getSR(){return this._rampSR?this._rampSR.clone():(this.noMapErr(),Bt.latLongSR())}getPixelHeight(){return this.esriView?this.esriView.height:(this.noMapErr(),1)}getPixelWidth(){return this.esriView?this.esriView.width:(this.noMapErr(),1)}setPointZoomScale(t){return t>0?(this.pointZoomScale=t,!0):(console.error(`Cannot set pointZoomScale to non-positive number: ${t}.`),!1)}}class MKe extends Gi{constructor(t){super(t)}#e=void 0;#t=void 0;async checkAtCoord(t){this.#t=t;const r=await this.$iApi.geo.map.getGraphicAtCoord(t);if(this.#t!==t)return;if(!r){this.#e=void 0,this.clear();return}if(this.#e&&this.#e.layerId===r.layerId&&this.#e.oid===r.oid&&this.#e.layerIdx===r.layerIdx)return;this.#e=r,this.clear();const i=this.$iApi.geo.layer.getLayer(r.layerId);if(!i){console.error(`graphic hit test returned non-existent layer id: ${r.layerId}`);return}if(!i.hovertips)return;const n=await i.getIcon(r.oid),s=await i.getGraphic(r.oid,{getAttribs:!0});this.setPoint(this.$iApi.geo.map.screenPointToMapPoint(t)),this.$iApi.event.emit(vt.MAP_GRAPHICHIT,{layer:i,graphicHit:r,attributes:s.attributes,icon:n,screenPoint:t})}generateDefaultMaptip(t){this.setContent(`<div class="flex items-center space-x-5"><span>${t.icon}</span><span class="truncate">${t.attributes[t.layer.config.tooltipField||t.layer.nameField]}</span></div>`)}clear(){this.$iApi.$vApp.$store.set(il.setMaptipPoint,void 0),this.$iApi.$vApp.$store.set(il.setMaptipContent,"")}getInstance(){return this.$iApi.$vApp.$store.get(il.maptipInstance)}getPoint(){return this.$iApi.$vApp.$store.get(il.maptipPoint)}setPoint(t){this.$iApi.$vApp.$store.set(il.setMaptipPoint,t)}setContent(t){this.$iApi.$vApp.$store.set(il.setMaptipContent,t)}}class IKe extends Gi{DEFAULT_POINT_FORMATTERS={LAT_LONG_DMS:this.formatLatLongDMS,LAT_LONG_DD:this.formatLatLongDD,LAT_LONG_DDM:this.formatLatLongDDM,WEB_MERCATOR:this.formatMercator,CANADA_ATLAS_LAMBERT:this.formatLambert,UTM:this.formatUTM,BASEMAP:this.formatBasemap};pointFormatter;constructor(t){super(t),this.pointFormatter=this.DEFAULT_POINT_FORMATTERS.LAT_LONG_DMS}createCaption(t){if(!!t){if(t.mouseCoords.disabled)this.$iApi.$vApp.$store.set(Cs.setCursorCoords,{disabled:!0});else{const r=t.mouseCoords.formatter;r!==void 0&&this.setPointFormatter(r)}if(t.scaleBar.disabled)this.$iApi.$vApp.$store.set(Cs.setScale,{disabled:!0});else{const r=t.scaleBar.imperialScale;r!==void 0&&(this.$iApi.$vApp.$store.set(Cs.toggleScale,r),this.$iApi.geo.map.viewPromise.then(()=>{this.updateScale()}))}}}updateAttribution(t){let r={text:{value:"Powered by ESRI"},logo:{altText:"ESRI logo",link:"https://www.esri.com/",value:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEEAAAAkCAYAAADWzlesAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAADO9JREFUeNq0Wgl0jlca/pfvzyo6qNBSmhLLKE1kKEUtB9NTat+OYnBacwwJY19DZRC7sR41th60lWaizFSqRTOEw0lsrQSJGFIESSxJ/uRfv3nef+7Vt9f3p2E695z3fMt97/3ufe+7PO+9n9n0UzELsjKyiHdUdMZnVHTl2VyFe9nO7Kc/Io+4epUxmpWxeVkbr3hvUebgFf15GL9XUwZHndtAAYI09jGvIghOuoEwLOLeYiBoXrwGfZjYYOWAvWyMGlsk2YebXeV3NUEW1qcT5BBX4jUbCYEmHwwKEfdW1gEXgoWtiIlNRFeezcrkrQaTNSuraRYDdImrR1ylAALZBPnkXIJ0wRskeG2Cj3jsoFI2HhcfDDFWA9UBNdZZyc/PP4Z3HZYsWTLGbrffond0Xb9+/Qy6P3jw4F+HDx8+mu7XrVs3c+7cuX+i+3nz5o3n/Rw4cGAdf/7hhx9SZ8yYEcffHT9+/G/8uaSkJGvDhg3D8P3moNdXrlw5UtYVFxfnXL9+/V8PHz68grr2N2/eTC4tLb2E+9+Cotq1a/dOenr6njt37nxPdOrUqd0dO3bsjromoHBQKBPkEyFUB71MH6SPbNy4cRqfkMvlenzixImtqO/x3XffbXc6nSW5ubnpOTk5J1NTU/cQH91//fXXu3/88ccLy5cvj6d34B8gaBA9JyQk/OWjjz5aIu8Fz2DiWbZs2QLx/A4m0Qf9f/n48eNsPEeDfrdly5Y/U31UVNT7dJ04ceIsGseNGzfS6DkuLq4v8YE6Y/G+93g8XKZ6QUHBRVHfAPQC0xJfCRAv65EkeUP6gFx11JEkfw/qTc8ff/zxKofDUXrv3r08rOIBeU9CWbx48SLej5y4LGlpaf9YuHDhUv5OtqH+6Vty0riPAbWjheH8n3322VYpuG+//Xa5mGB7CGM8hKN7vV5dLfHx8WNI20E1aN4WP97YZyc7d+6MM5vNHRs2bDg3NjY23e12l5w8eZJWzIUJ9IdmlI4bNy4tICAgtHbt2hGdOnXaSe3oftu2bWmBgYFOn3MwmwcQLViwIJOeYVYJGGAZVuW2zWZzCZ6hoIGapnmknUMTQnr16vUeTOKydHqyHrx9t27dunro0KEfzJw5M4Pe3bp166Z0pHXr1g0Fj2EYCw8PD+N+SjNwUuSAKnxexOkswOWxZN63b9/MAQMGzIUwx5WXl99eunTpFLx+hJU/K9o/yM7OPhgZGdk5KSkpp0WLFv+Vrq7/na5nz57dR1dM6t7hw4e3DRkyJG7WrFlxgudzukIw58TzV3SF3Z+ByUzFbTk5O9j8fVH/JV3PnTv3uRijSdSR5/empKRkT5kypQxCC+UTxMKVQXuyWBT5WbiS4VFjIZLHWQsLN1ZFgFbm0U1KSNWUUMlDp9kAh0iNdCkRwiva2FjUsjJeJ5sYRYQwCGIYNGk8tC1UCuDQoUOb+vbtuxuPRUJ4FVwIFhZ7pUD45OXEbUpo9DIz8hgAFk0BORblWypm8BiQzkKnpoRnM+PxsEWhiYfFxMTUHTx4cDOYhg7tzM7IyLhNCiYEUEbCMxsAGYuCGjl4ClKE4GY+xCnIw95zBKqxvmyCOJqT7dws5ntZzLcoaJEjQiPUahMaESzudWEqhBEeiSuZvUvzA1+lxIMEhbD7QGYKUl0rBAgxC9vlq6IzNZZ9BYt+rMw8pBDLmSZZFBPQmBC8imaofo1roa5oKH82aQaaIH0CDTZM0sCBAxvBKbZ+7bXXGr3yyisN4ZjMDx48uAeAkofQdHbt2rUXhIpJKevMJwSLfqq3bt365enTp3eFh365SZMmBGpMFRUVZcAV1wFmzs2ZMyddtCkXk9ESExOjq1Wr9iLCbwAilA9xwrnlwimS4G2ffvppj1atWrWoWbNmbWCKAtj9V5MnT84cMWJEvTfeeKM+wqSFzCEoKMgJ3HEVgO6SkTlKMwgUgImwArn2DpMmTYrDALP0XyjEA9sbjTZtQZGij7qghqBWoK4AWPswkbLK+qHIsWPHjoXgfwvUhsZAAEflg+dfg0kuBlosUuvoO2jXl65qXWZm5g7UNRPIOIQLQqpcmECMJIAuRp1UVmiCACmTxAReFx+LhnPqV1hY+O9n6evIkSObSXCEHI0WASDtMMJ0uVHb7du3E6p9HxpxQK0DjN4r0Gc9kSZYeZiSNkuaUOv06dPTO3fuPNj0DAWgKWTFihVL+vfvT0J8kfohAsobV6tWrYbP0hf460pnLE2AF2jB21DvIKO2gO6FNB+ERJtaB+xjY37NN3+LogmkHi9s2rTp3bZt277LG8NuK5AopXbv3n0O7Gtsjx49ZmNye6GOD1RBwD9MFUKoSQSc30UdzJUrV26uWrVqP7D/lt27d+9/9OhRMas7gjYbhROzkv9R2wcHBwdWshjkYL1G7SBQTXGwTwQQLLIqWsGeGFAhVyFSO6C7Naj7ADRUJENDQGMjIiLmQl0LVLUbNWrUItSPhBNcodYhFyFklwAiYf0RNKZZs2YfFhUVXYcAvhFm0FFc++fl5eX4Mxto7JnRo0cvID4yHWSz70dHRw+khAxZ6yGVH8ndftS9DWokciWNx15fTN2zZ0+f6tWr1+LS279/fwYgcz4LPzJvdyGVLUFidFiVOIRAqx8KlQysZCdKboJUXL58uRAmMLFp06aLRbh1cGhrVEiD3nzzzTXIcU5R6gC6vXfv3kuIGgSIyq1Wq6cqpmdhiNAXFtu0adNeZVq9enUWA0xywyVECC4AicwttQ2SrvpkYnfv3i1X6xo0aPAiJv2H+fPnt27UqFEN4YsCDBCk33Lt2rW8kSNHJuP2LqUc4kq+4KFAgg6LxeKtSl+a4hMC6tSp85QD27VrVy9I1U2SJaKYS/ZG8Rf5uhVXq91ud4aEhATINo0bN46glUQMv4aQV46MMpj3iRVvsGjRohFEENQtygCRmZ5B6DsqNNPFANJT5cyZM5RoPRBE/qREaJYEYm4aZ1WFwDG9ppoClebNm9czPV/xYXOo6J4xY8Z84I8Jgq9HBCDVfsKECR+mpqZ+gSQnRVQHGTm4CxcuXBP9l4qrneUNPtheVSFYKtkF/jUKqWbx2LFjUxBJViA82asSZvv06TPq+PHjE/D4GzI70jiVT+xDyBzDo8DhZyoWNXsD4Cn/FYVQLKgIofCfMIkhgKyr4bhO8pBoVGgvsEuXLq+SEIw0Qayyl5H+vIPUmJf2ZYOwz5twXE05U/369TfBZu+wvMBpkH7L3dwyYZ+l4uoRPL50FzCcQuAJstvIyMjacG5Rw4YN64b7V9XBxcbGdgJq/cZIE4TT0/2ceTyzJsiMj0JSxfnz50+rTECBUUq2aGd2WC7Izib+WFwdLJs0sczT1w+Q3d34+PhTSKQ2w4GeVL9LTtefY1Q2YEz/qxC8LIe3f/LJJ2kqU79+/WIGDRpUj+0L8N0lG7B6N+QGiS1btgxR9ha8gi949uzZ0UiENgBSR4iQyFNiL0zkrh+V/78XfjJDq1aWnJx85dixY8kqRE1KSopNSUkZ0K1btwjhsGpMmzatbVZW1nTy/JQbQHUXA26HMRul/gOQHkcBUK1BBGiJFHgtcMV7YqeXeEM7dOhQB4lXh6dCS1kZaZbDSBjinV6ZhsBkdAMz0o00SO4hhIrUl7K/7vfv37+hP0eBw8tBftFRpNNNExMThyMqlKp8SEXsADy5t1GM+qF6CHwe+hifm5t7Ta1PSEiYj7rWIhsMZaCPEkDyL+2PHj36hdqO3lGd4KkuYbN0jC5h22TPRT179pwCZ5j9rKqF0FWtd+/eL0kBA9Y2kRudvBB4og2al1CM+iFsgQFfJTCkaZrboL2DhUfd4NjAadROvHPyvUsLayxNghxaMWw0D1EhFiguqSrxXWZ/EN7IyZMnX5QHn127dk0Gxo+nnd6q9EHf2rx58zJgC1oxSrQKgR1cKl9YWJhdOFg329TlC1oBM3YYZJ8OubcozVZTJPjkzEEwOBGr1yIr+xz23xX23i48PPxVjiqRQV6GRuetXLkSbiPpCsPuTulzEAYPAh+cnzp1ao+YmJi31D5gevkwo3sZGRmn0M+RzMzMAhFtaGG0ixcvfpmfn39WbpNBC1zILK8KHqdykCsXszQ7O/sE8WMBNKGlbrxLF1HsSeQyV5JQBSrJUghLdDQmKB46ywTJFTKzfqqxftScwM1OjGXY/Vl0UU7IHcq3XMrutkz0QsX3bOwEWo5TfsNj9hMxjP5VCFR2fPl/AS4xMH7u71X6CWR92JQjer5t72AHLrpyKGRRhKbCZrNybhJg8HvBU+385Qv8DMKi/BjBEaKuHJK42YDU/x789cFhu1s5cFH/hTAp3/UqhzMm5cTM6G8br/qnyi8lTWYDoZiUP1TUEyc1Ble1D5OSA+gG7U0GR3b+fhUy+kVIN0Kb/xFgANrk0XIqRaL0AAAAAElFTkSuQmCC"}};if(t&&(t.logo.disabled||(r.logo.altText=t.logo.altText||r.logo.altText,r.logo.link=t.logo.link||r.logo.link,r.logo.value=t.logo.value||r.logo.value),t.text.disabled||(r.text.value=t.text.value||r.text.value),this.$iApi.$vApp.$store.set(Cs.setAttribution,r)),!t||t.text.disabled){if(!this.$iApi.geo.map.esriMap){console.warn("Attempted to fetch map attribution with undefined map");return}let i="";const n=5e3,s=20,o=this.$iApi.geo.map.esriMap.basemap.baseLayers.map(a=>new Promise((l,u)=>{let h=0;const d=n/s;let f=setInterval(function(){a.loaded&&!a.loadError?(clearInterval(f),l(a)):h>d&&(clearInterval(f),l(null)),h++},s)})).toArray();Promise.all(o).then(a=>{i=a.filter(l=>l?.copyright).map(l=>l.copyright).join(" | "),r.text.value=i||r.text.value,this.$iApi.$vApp.$store.set(Cs.setAttribution,r)})}}updateScale(){const t=this.$iApi.$vApp.$store.get(Cs.scale);if(t?.disabled)return;const r=t?.isImperialScale||!1,i=this.scaleHelper().find(n=>n.isImperialScale===r)??{isImperialScale:!1,units:"error",pixels:1,distance:1};this.$iApi.$vApp.$store.set(Cs.setScale,{width:`${i.pixels}px`,label:`${this.$iApi.$vApp.$n(i.distance,"number")}${i.units}`,isImperialScale:r})}async formatPoint(t){return t?await this.pointFormatter(t):""}setPointFormatter(t){if(typeof t=="string"){if(!(t in this.DEFAULT_POINT_FORMATTERS)){console.warn(`Could not find point formatter with id: ${t}`);return}this.pointFormatter=this.DEFAULT_POINT_FORMATTERS[t]}else this.pointFormatter=t}scaleHelper(){const t=window.innerWidth>600?70:35,r=this.$iApi.geo.map.getResolution(),i=[],n=r*t,s=1609.34,o=3.28084;let a=n>1e3?["km","mi"]:["m","ft"];for(let l=0;l<2;l++){let u=l===1;if(i.push({isImperialScale:u,units:a[l],pixels:0,distance:0}),n>1e3){const h=r*t/(u?s:1e3),d=Math.round(h).toString().length,f=Math.pow(10,d-1);i[l].distance=Math.ceil(h/f)*f,i[l].pixels=i[l].distance*(u?s:1e3)/r}else i[l].distance=Math.ceil(u?n*o:n),i[l].pixels=n/r}return i}wrapValue(t,r,i){return((t-r)%(i-r)+(i-r))%(i-r)+r}async formatLatLongDMS(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.floor(Math.abs((i-o)*60)),l=Math.floor((Math.abs(i)-Math.abs(o)-a/60)*3600),u=Math.floor(Math.abs(n))*(n<0?-1:1),h=Math.floor(Math.abs((n-u)*60)),d=Math.floor((Math.abs(n)-Math.abs(u)-h/60)*3600);return`${this.$iApi.$vApp.$n(Math.abs(o),"number")}${s} ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$vApp.$n(l,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(Math.abs(u),"number")}${s} ${this.$iApi.$vApp.$n(h,"number",{minimumIntegerDigits:2})}' ${this.$iApi.$vApp.$n(d,"number",{minimumIntegerDigits:2})}" ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDDM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.floor(Math.abs(i))*(i<0?-1:1),a=Math.abs((i-o)*60),l=Math.floor(Math.abs(n))*(n<0?-1:1),u=Math.abs((n-l)*60);return`${this.$iApi.$vApp.$n(Math.abs(o),"number")}${s} ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(Math.abs(l),"number")}${s} ${this.$iApi.$vApp.$n(u,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})} ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatLatLongDD(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=String.fromCharCode(176),o=Math.abs(i),a=Math.abs(n);return`${this.$iApi.$vApp.$n(o,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} | ${this.$iApi.$vApp.$n(a,"number",{minimumIntegerDigits:2,minimumFractionDigits:5,maximumFractionDigits:5})}${s} ${this.$iApi.$vApp.$t("map.coordinates."+(0>n?"west":"east"))}`}async formatMercator(t){const r=await this.$iApi.geo.proj.projectGeometry(102100,t);return`${this.$iApi.$vApp.$n(Math.floor(r.x),"number")} m | ${this.$iApi.$vApp.$n(Math.floor(r.y),"number")} m`}async formatLambert(t){const r=await this.$iApi.geo.proj.projectGeometry(3978,t);return`${this.$iApi.$vApp.$n(Math.abs(Math.floor(r.x)),"number")} m ${this.$iApi.$vApp.$t("map.coordinates."+(0>r.x?"west":"east"))} | ${this.$iApi.$vApp.$n(Math.abs(Math.floor(r.y)),"number")} m ${this.$iApi.$vApp.$t("map.coordinates."+(r.y>0?"north":"south"))}`}async formatUTM(t){const r=await this.$iApi.geo.proj.projectGeometry(4326,t),i=this.wrapValue(r.y,-90,90),n=this.wrapValue(r.x,-180,180),s=Math.ceil((n+180)/6),o=await this.$iApi.geo.proj.projectGeometry(parseInt("326"+s),t);return`${this.$iApi.$vApp.$n(s,"number",{minimumIntegerDigits:2})} ${this.$iApi.$vApp.$t("map.coordinates."+(i>0?"north":"south"))} ${this.$iApi.$vApp.$n(Math.floor(o.x),"number")} m${this.$iApi.$vApp.$t("map.coordinates.east")} | ${this.$iApi.$vApp.$n(Math.abs(Math.floor(o.y)),"number")} m${this.$iApi.$vApp.$t("map.coordinates.north")}`}async formatBasemap(t){const r=await this.$iApi.geo.proj.projectGeometry(this.$iApi.geo.map.getSR(),t);return`${this.$iApi.$vApp.$n(r.x,"number")} | ${this.$iApi.$vApp.$n(r.y,"number")}`}}class TKe extends SKe{maptip;caption;mapMouseThrottle;constructor(t){super(t),this.maptip=new MKe(t),this.caption=new IKe(t),this.mapMouseThrottle=0}createMap(t,r){this.setMapMouseThrottle(t.mapMouseThrottle??0),super.createMap(t,r),this.$iApi.event.emit(vt.MAP_CREATED)}destroyMap(){if(!this.esriMap||!this.esriView){this.noMapErr();return}this.$iApi.geo.layer.allLayers().map(t=>t.uid).forEach(t=>this.removeLayer(t)),super.destroyMap(),this.$iApi.event.emit(vt.MAP_DESTROYED)}createMapView(t){const r=this.$iApi.$vApp.$store.get(ls.getMapConfig);if(!r)throw new Error("Attempted to create map view without a map config");const i=(typeof t=="string"?this.findBasemap(t):t)||this.findBasemap(r.initialBasemapId);this.applyBasemap(i);const n=r.tileSchemas.find(a=>a.id===i.tileSchemaId);if(!n)throw new Error(`Could not find tile schema for the given basemap id: ${i.id}`);const s=r.extentSets.find(a=>a.id===n.extentSetId);if(!s)throw new Error(`Could not find extent set with the given id: ${n.extentSetId}`);this._rampExtentSet=A_.fromConfig(s),this._rampSR=this._rampExtentSet.sr.clone();const o=r.lodSets.find(a=>a.id===n.lodSetId);if(!o)throw new Error(`Could not find lod set with the given id: ${n.lodSetId}`);this.esriView=Gn(new WPe({map:this.esriMap,container:this._targetDiv,constraints:{lods:o.lods,rotationEnabled:!1},spatialReference:this._rampSR.toESRI(),extent:this._rampExtentSet.defaultExtent.toESRI(),navigation:{browserTouchPanEnabled:!1}})),this.esriView.ui.components=[],this.handlers.push({type:"extent",handler:this.esriView.watch("extent",a=>{const l=this.$iApi.geo.geom.geomEsriToRamp(a,"map_extent_event");this.$iApi.event.emit(vt.MAP_EXTENTCHANGE,l),this.$iApi.event.emit(vt.FILTER_CHANGE,{extent:l,filterKey:P3.EXTENT})})}),this.handlers.push({type:"scale",handler:this.esriView.watch("scale",a=>{this.$iApi.event.emit(vt.MAP_SCALECHANGE,a)})}),this.handlers.push({type:"resize",handler:this.esriView.on("resize",a=>{this.$iApi.event.emit(vt.MAP_RESIZED,{height:a.height,width:a.width})})}),this.handlers.push({type:"click",handler:this.esriView.on("click",a=>{this.$iApi.event.emit(vt.MAP_CLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_click_point"))})}),this.handlers.push({type:"double-click",handler:this.esriView.on("double-click",a=>{this.$iApi.event.emit(vt.MAP_DOUBLECLICK,this.$iApi.geo.geom.esriMapClickToRamp(a,"map_doubleclick_point"))})}),this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),this.handlers.push({type:"pointer-move-start",handler:this.esriView.on("pointer-move",YR(100,!0,a=>{this.$iApi.event.emit(vt.MAP_MOUSEMOVE_START,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-move-end",handler:this.esriView.on("pointer-move",YR(100,a=>{this.$iApi.event.emit(vt.MAP_MOUSEMOVE_END,this.$iApi.geo.geom.esriMapMouseToRamp(a))}))}),this.handlers.push({type:"pointer-down",handler:this.esriView.on("pointer-down",a=>{this.$iApi.event.emit(vt.MAP_MOUSEDOWN,a.native)})}),this.handlers.push({type:"key-down",handler:this.esriView.on("key-down",a=>{this.$iApi.event.emit(vt.MAP_KEYDOWN,a.native),a.stopPropagation()})}),this.handlers.push({type:"key-up",handler:this.esriView.on("key-up",a=>{this.$iApi.event.emit(vt.MAP_KEYUP,a.native),a.stopPropagation()})}),this.handlers.push({type:"blur",handler:this.esriView.on("blur",a=>{this.$iApi.event.emit(vt.MAP_BLUR,a.native)})}),this.esriView.container.addEventListener("touchmove",a=>{a.preventDefault()}),this._viewPromise.resolveMe(),this.created=!0}destroyMapView(){this.esriView?.container.removeEventListener("touchmove",t=>{t.preventDefault()}),super.destroyMapView()}applyBasemap(t){if(!this.esriMap){this.noMapErr();return}const r=typeof t=="string"?this.findBasemap(t):t;this.esriMap.basemap=it(r.esriBasemap),this.$iApi.$vApp.$store.set(ls.setActiveBasemap,r.config)}setBasemap(t){if(!this.esriView||!this.esriMap)return this.noMapErr(),!1;const r=this.findBasemap(t),n=this.$iApi.$vApp.$store.get(ls.getActiveBasemapConfig).tileSchemaId!==r.tileSchemaId;if(n){const s=this.getExtent();this._viewPromise=new Mo,this.created=!1,this.$iApi.event.emit(vt.MAP_REFRESH_START),this.destroyMapView(),this.createMapView(r),this.$iApi.event.emit(vt.MAP_REFRESH_END),this.$iApi.geo.proj.projectExtent(this._rampSR,s).then(o=>this.zoomMapTo(o))}else this.applyBasemap(r);return this.$iApi.event.emit(vt.MAP_BASEMAPCHANGE,{basemapId:t,schemaChanged:n}),n}addLayer(t,r=void 0){if(!this.esriMap){this.noMapErr();return}t.esriLayer?(this.esriMap.add(t.esriLayer),this.$iApi.$vApp.$store.set(ks.addLayers,[t]),r!==void 0&&this.reorder(t,r),this.$iApi.event.emit(vt.LAYER_REGISTERED,t)):console.error("Layer added to map without an esri layer. Likely layer.initiate() was not called or had not finished.")}reorder(t,r,i=!1){if(!this.esriMap){this.noMapErr();return}if(t.esriLayer){if(i&&t.isCosmetic)return;const n=this.$vApp.$store.get(ks.layers),s=n.slice(0,r+1).filter(a=>!this.esriMap.layers.find(l=>l.id===a.id)).length,o=this.esriMap.layers.indexOf(this.esriMap.layers.filter(a=>{const l=n.find(u=>u.id===a.id);return!!l&&!(i&&l.isCosmetic)}).slice(0,r+1-s).pop());this.esriMap.reorder(t.esriLayer,o),this.$vApp.$store.set(ks.reorderLayer,{layer:t,index:r}),this.$iApi.event.emit(vt.MAP_REORDER,{layer:t,newIndex:r})}else console.error("Attempted reorder without an esri layer. Likely layer.initiate() was not called or had not finished.")}removeSublayer(t){let r,i;if(typeof t=="string")r=t,i=this.$iApi.geo.layer.getLayer(r);else{if(!t.isSublayer)throw new Error(`Attempted to call removeSublayer on a non-sublayer object: ${t}`);r=t.uid,i=t}if(!i)throw new Error("Sublayer could not be found for removal.");this.$iApi.event.emit(vt.LAYER_REMOVE,t),i.visibility=!1,i.isRemoved=!0,i.parentLayer?.sublayers.every(n=>n.isRemoved)&&this.removeLayer(i.parentLayer)}removeLayer(t){if(!this.esriMap){this.noMapErr();return}let r;if(t instanceof Cle?r=t:r=this.$iApi.geo.layer.getLayer(t),!r)throw new Error("Layer could not be found for removal.");if(r.isSublayer){this.removeSublayer(r);return}if(!r.esriLayer)throw new Error("Attempted to remove layer from the map without an esri layer. Likely layer.initiate() was not called or had not finished.");r.supportsSublayers&&r.sublayers.some(i=>!i.isRemoved)&&r.sublayers.forEach(i=>this.removeSublayer(i)),r.terminate(),this.$iApi.$vApp.$store.set(ks.removeLayer,r),this.$iApi.$vApp.$store.set(ks.removeLayerConfig,r.id),this.esriMap.remove(r.esriLayer),r.isRemoved=!0,this.$iApi.event.emit(vt.LAYER_REMOVE,r)}setMapMouseThrottle(t){if(t<0)return console.error("Cannot set map mouse throttle to value that is less than 0."),!1;this.mapMouseThrottle=t;const r=this.handlers.findIndex(i=>i.type==="pointer-move");if(r!==-1){let i=this.handlers[r];this.handlers.splice(r,1),i.handler.remove()}return r!==-1&&this.esriView&&this.handlers.push({type:"pointer-move",handler:this.esriView.on("pointer-move",this.createMouseMoveHandler())}),!0}createMouseMoveHandler(){if(!this.esriView){this.noMapErr();return}return k0(this.mapMouseThrottle,t=>{this.$iApi.event.emit(vt.MAP_MOUSEMOVE,this.$iApi.geo.geom.esriMapMouseToRamp(t))})}async zoomToLevel(t){if(this.esriView)return this.esriView.goTo({zoom:t});this.noMapErr()}async zoomIn(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom+1);this.noMapErr()}async zoomOut(){if(this.esriView)return this.zoomToLevel(this.esriView.zoom-1);this.noMapErr()}async zoomToVisibleScale(t){if(!this.esriView){this.noMapErr();return}const r=t.isOffScale(this.getScale());if(!r.offScale)return;const i=this.esriView.constraints.lods;if(!i)return this.zoomMapTo(this.getExtent().center(),(r.zoomIn,t.minScale));const n=r.zoomIn?i:[...i].reverse(),s=n.find(o=>r.zoomIn?o.scale<t.minScale:o.scale>t.maxScale)||n[n.length-1];return this.zoomToLevel(s.level)}async takeScreenshot(t){if(this.esriView)return t.quality||(t.quality=1),t.format||(t.format="png"),this.esriView.takeScreenshot(t);throw new Error("Export attempted without a map view available")}screenPointToMapPoint(t){return this.esriView?Ui.fromESRI(this.esriView.toMap({x:t.screenX,y:t.screenY}),"mappoint"):(this.noMapErr(),new Ui("i_am_error",[0,0],void 0,!0))}mapPointToScreenPoint(t){if(this.esriView){const r=this.esriView.toScreen(t.toESRI());return{screenX:r.x,screenY:r.y}}else return this.noMapErr(),{screenX:1,screenY:1}}runIdentify(t){let r=this.$vApp.$store.get(ks.layers),i;if(t instanceof Ui){const l=this.mapPointToScreenPoint(t);i={mapPoint:t,screenX:l.screenX,screenY:l.screenY,button:0,clickTime:Date.now()}}else i=t;if(r===void 0)return{click:i,results:[]};let n={geometry:i.mapPoint};const s=r.filter(l=>l.supportsIdentify).map(l=>(n.tolerance=l.clickTolerance,l.runIdentify(n))).flat(),o=Date.now();s.forEach(l=>{l.requestTime=o});const a={results:s,click:i};return this.$iApi.event.emit(vt.MAP_IDENTIFY,a),a}async getGraphicAtCoord(t){if(!this.esriView){this.noMapErr();return}let r=this.$vApp.$store.get(ks.layers)?.slice(0);if(r===void 0)return;r.reverse();const i=await this.esriView.hitTest({x:t.screenX,y:t.screenY});if(i.results.length===0)return;let n,s;if(r.some(o=>{const a=i.results.find(l=>l.graphic.layer.id===o.id);return a&&(s=o,n=a.graphic),a!==void 0}),n&&s)return s.sublayers.length>1&&console.warn("Found layer with sublayers during hitTest"),{oid:n.getObjectId(),layerId:n.layer.id,layerIdx:s.getLayerTree().layerIdx}}_activeKeys=[];_panInterval;mapKeyDown(t){const r=["=","-"];["Shift","Control","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"].includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this._activeKeys.some(n=>r.includes(n))||this.keyPan()):r.includes(t.key)&&!this._activeKeys.includes(t.key)?(this._activeKeys.push(t.key),this.keyZoom(t)):t.key==="Enter"&&this.runIdentify(this.getExtent().center())}mapKeyUp(t){const r=["=","-"];this._activeKeys.includes(t.key)&&!r.includes(t.key)&&(this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this._activeKeys.some(i=>r.includes(i))||this.keyPan())}stopKeyPan(){this._activeKeys=[],clearInterval(this._panInterval)}get keysActive(){return this._activeKeys.filter(t=>!["Control","Shift"].includes(t)).length!==0}async keyZoom(t){clearInterval(this._panInterval),t.key==="="?await this.zoomIn():t.key==="-"&&await this.zoomOut(),this._activeKeys.splice(this._activeKeys.indexOf(t.key),1),this.keyPan()}keyPan(){if(clearInterval(this._panInterval),!this.keysActive)return;const t=this.getExtent().center(),r=this.mapPointToScreenPoint(t),i=this.screenPointToMapPoint({screenX:r.screenX+5,screenY:r.screenY+5}),n=Math.abs(i.x-t.x),s=Math.abs(i.y-t.y);let o=0,a=0,l=1;for(let h=0;h<this._activeKeys.length;++h)switch(this._activeKeys[h]){case"ArrowLeft":o-=n;break;case"ArrowRight":o+=n;break;case"ArrowUp":a+=s;break;case"ArrowDown":a-=s;break;case"Shift":l=2;break;case"Control":l=.25;break}const u=this.getScale();this._panInterval=setInterval(()=>{t.x+=l*o,t.y+=l*a,this.zoomMapTo(t,u,!1)},25)}}const $Ke={geometryType:"point",renderer:{type:"simple",symbol:{type:"esriSMS",style:"esriSMSCircle",color:[67,100,255,200],size:7,outline:{color:[0,0,0,255],width:1}}}},EKe={geometryType:"polyline",renderer:{type:"simple",symbol:{type:"esriSLS",style:"esriSLSSolid",color:[90,90,90,200],width:2}}},AKe={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[76,76,125,200],outline:{type:"esriSLS",style:"esriSLSSolid",color:[110,110,110,255],width:1}}}},CKe={geometryType:"polygon",renderer:{type:"simple",symbol:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[240,128,128,255],width:1}}}};var kKe={circlePoint:$Ke,solidLine:EKe,outlinedPoly:AKe,boundingBoxPoly:CKe},Qae={exports:{}};(function(e,t){(function(r,i){if(e.exports=i(x8.exports),typeof r.navigator=="object"){if(!r.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");r.Terraformer.ArcGIS=i(r.Terraformer)}})(_8,function(r){var i={};function n(w){var _=0,x=0,I=[],S,T,$,E;$=w.match(/((\+|\-)[^\+\-]+)/g),E=parseInt($[0],32);for(var C=1;C<$.length;C+=2)S=parseInt($[C],32)+_,_=S,T=parseInt($[C+1],32)+x,x=T,I.push([S/E,T/E]);return I}function s(w){return o(w[0],w[w.length-1])||w.push(w[0]),w}function o(w,_){for(var x=0;x<w.length;x++)if(w[x]!==_[x])return!1;return!0}function a(w){var _={};for(var x in w)w.hasOwnProperty(x)&&(_[x]=w[x]);return _}function l(w){var _=0,x=0,I=w.length,S=w[x],T;for(x;x<I-1;x++)T=w[x+1],_+=(T[0]-S[0])*(T[1]+S[1]),S=T;return _>=0}function u(w){var _=[],x=w.slice(0),I=s(x.shift().slice(0));if(I.length>=4){l(I)||I.reverse(),_.push(I);for(var S=0;S<x.length;S++){var T=s(x[S].slice(0));T.length>=4&&(l(T)&&T.reverse(),_.push(T))}}return _}function h(w){for(var _=[],x=0;x<w.length;x++)for(var I=u(w[x]),S=I.length-1;S>=0;S--){var T=I[S].slice(0);_.push(T)}return _}function d(w,_){var x=r.Tools.arraysIntersectArrays(w,_),I=r.Tools.coordinatesContainPoint(w,_[0]);return!!(!x&&I)}function f(w){for(var _=[],x=[],I,S,T,$=0;$<w.length;$++){var E=s(w[$].slice(0));if(!(E.length<4))if(l(E)){var C=[E.slice().reverse()];_.push(C)}else x.push(E.slice().reverse())}for(var O=[];x.length;){T=x.pop();var R=!1;for(I=_.length-1;I>=0;I--)if(S=_[I][0],d(S,T)){_[I].push(T),R=!0;break}R||O.push(T)}for(;O.length;){T=O.pop();var D=!1;for(I=_.length-1;I>=0;I--)if(S=_[I][0],r.Tools.arraysIntersectArrays(S,T)){_[I].push(T),D=!0;break}D||_.push([T.reverse()])}return _.length===1?{type:"Polygon",coordinates:_[0]}:{type:"MultiPolygon",coordinates:_}}function m(w,_){var x={};return _=_||{},_.idAttribute=_.idAttribute||void 0,w.spatialReference&&(w.spatialReference.wkid===3857||w.spatialReference.wkid===102100)&&(x.crs=r.MercatorCRS),typeof w.x=="number"&&typeof w.y=="number"&&(x.type="Point",x.coordinates=[w.x,w.y],(w.z||w.m)&&x.coordinates.push(w.z),w.m&&x.coordinates.push(w.m)),w.points&&(x.type="MultiPoint",x.coordinates=w.points.slice(0)),w.paths&&(w.paths.length===1?(x.type="LineString",x.coordinates=w.paths[0].slice(0)):(x.type="MultiLineString",x.coordinates=w.paths.slice(0))),w.rings&&(x=f(w.rings.slice(0))),typeof w.xmin=="number"&&typeof w.ymin=="number"&&typeof w.xmax=="number"&&typeof w.ymax=="number"&&(x.type="Polygon",x.coordinates=[[[w.xmax,w.ymax],[w.xmin,w.ymax],[w.xmin,w.ymin],[w.xmax,w.ymin],[w.xmax,w.ymax]]]),(w.compressedGeometry||w.geometry||w.attributes)&&(x.type="Feature",w.compressedGeometry&&(w.geometry={paths:[n(w.compressedGeometry)]}),x.geometry=w.geometry?m(w.geometry):null,x.properties=w.attributes?a(w.attributes):null,w.attributes&&(x.id=w.attributes[_.idAttribute]||w.attributes.OBJECTID||w.attributes.FID)),new r.Primitive(x)}function g(w,_){var x;_=_||{};var I=_.idAttribute||"OBJECTID";_.sr?x={wkid:_.sr}:w&&w.crs&&w.crs.properties.name!="urn:ogc:def:crs:OGC:1.3:CRS84"?x=null:x={wkid:4326};var S={},T;switch(w.type){case"Point":S.x=w.coordinates[0],S.y=w.coordinates[1],w.coordinates[2]&&(S.z=w.coordinates[2]),w.coordinates[3]&&(S.m=w.coordinates[3]),S.spatialReference=x;break;case"MultiPoint":S.points=w.coordinates.slice(0),S.spatialReference=x;break;case"LineString":S.paths=[w.coordinates.slice(0)],S.spatialReference=x;break;case"MultiLineString":S.paths=w.coordinates.slice(0),S.spatialReference=x;break;case"Polygon":S.rings=u(w.coordinates.slice(0)),S.spatialReference=x;break;case"MultiPolygon":S.rings=h(w.coordinates.slice(0)),S.spatialReference=x;break;case"Feature":w.geometry&&(S.geometry=g(w.geometry,_)),S.attributes=w.properties?a(w.properties):{},w.id&&(S.attributes[I]=w.id);break;case"FeatureCollection":for(S=[],T=0;T<w.features.length;T++)S.push(g(w.features[T],_));break;case"GeometryCollection":for(S=[],T=0;T<w.geometries.length;T++)S.push(g(w.geometries[T],_));break}return S}function b(w){return new r.LineString(n(w))}return i.parse=m,i.convert=g,i.toGeoJSON=m,i.fromGeoJSON=g,i.parseCompressedGeometry=b,i})})(Qae);var OKe=Qae.exports;function ele(e){return new Function("d","return {"+e.map(function(t,r){return JSON.stringify(t)+": d["+r+"]"}).join(",")+"}")}function PKe(e,t){var r=ele(e);return function(i,n){return t(r(i),n,e)}}function RKe(e){var t=Object.create(null),r=[];return e.forEach(function(i){for(var n in i)n in t||r.push(t[n]=n)}),r}function TF(e){var t=new RegExp('["'+e+`
]`),r=e.charCodeAt(0);function i(u,h){var d,f,m=n(u,function(g,b){if(d)return d(g,b-1);f=g,d=h?PKe(g,h):ele(g)});return m.columns=f,m}function n(u,h){var d={},f={},m=[],g=u.length,b=0,w=0,_,x;function I(){if(b>=g)return f;if(x)return x=!1,d;var T=b,$;if(u.charCodeAt(T)===34){for(var E=T;E++<g;)if(u.charCodeAt(E)===34){if(u.charCodeAt(E+1)!==34)break;++E}return b=E+2,$=u.charCodeAt(E+1),$===13?(x=!0,u.charCodeAt(E+2)===10&&++b):$===10&&(x=!0),u.slice(T+1,E).replace(/""/g,'"')}for(;b<g;){var C=1;if($=u.charCodeAt(b++),$===10)x=!0;else if($===13)x=!0,u.charCodeAt(b)===10&&(++b,++C);else if($!==r)continue;return u.slice(T,b-C)}return u.slice(T)}for(;(_=I())!==f;){for(var S=[];_!==d&&_!==f;)S.push(_),_=I();h&&(S=h(S,w++))==null||m.push(S)}return m}function s(u,h){return h==null&&(h=RKe(u)),[h.map(l).join(e)].concat(u.map(function(d){return h.map(function(f){return l(d[f])}).join(e)})).join(`
`)}function o(u){return u.map(a).join(`
`)}function a(u){return u.map(l).join(e)}function l(u){return u==null?"":t.test(u+="")?'"'+u.replace(/\"/g,'""')+'"':u}return{parse:i,parseRows:n,format:s,formatRows:o}}var GE=TF(","),LKe=GE.parse,NKe=GE.parseRows,DKe=GE.format,FKe=GE.formatRows,qE=TF("	"),jKe=qE.parse,VKe=qE.parseRows,UKe=qE.format,zKe=qE.formatRows,BKe=Object.freeze(Object.defineProperty({__proto__:null,dsvFormat:TF,csvParse:LKe,csvParseRows:NKe,csvFormat:DKe,csvFormatRows:FKe,tsvParse:jKe,tsvParseRows:VKe,tsvFormat:UKe,tsvFormatRows:zKe},Symbol.toStringTag,{value:"Module"})),GKe=GRe(BKe),d1={exports:{}};d1.exports=qKe;d1.exports.pair=WKe;d1.exports.format=bL;d1.exports.formatPair=HKe;d1.exports.coordToDMS=tle;function qKe(e,t){var r=wL(e,t);return r===null?null:r.val}function HKe(e){return bL(e.lat,"lat")+" "+bL(e.lon,"lon")}function bL(e,t){var r=tle(e,t);return r.whole+"\xB0 "+(r.minutes?r.minutes+"' ":"")+(r.seconds?r.seconds+'" ':"")+r.dir}function tle(e,t){var r={lat:["N","S"],lon:["E","W"]}[t]||"",i=r[e>=0?0:1],n=Math.abs(e),s=Math.floor(n),o=n-s,a=o*60,l=Math.floor(a),u=Math.floor((a-l)*60);return{whole:s,minutes:l,seconds:u,dir:i}}function wL(e,t){if(t||(t="NSEW"),typeof e!="string")return null;e=e.toUpperCase();var r=/^[\s\,]*([NSEW])?\s*([\-|\|\]?[0-9.]+)[]?\s*(?:([0-9.]+)[']\s*)?(?:([0-9.]+)(?:''|"||)\s*)?([NSEW])?/,i=e.match(r);if(!i)return null;var n=i[0],s;if(i[1]&&i[5]?(s=i[1],n=n.slice(0,-1)):s=i[1]||i[5],s&&t.indexOf(s)===-1)return null;var o=i[2]?parseFloat(i[2]):0,a=i[3]?parseFloat(i[3])/60:0,l=i[4]?parseFloat(i[4])/3600:0,u=o<0?-1:1;return(s==="S"||s==="W")&&(u*=-1),{val:(Math.abs(o)+a+l)*u,dim:s,matched:n,remain:e.slice(n.length)}}function WKe(e,t){e=e.trim();var r=wL(e,t);if(!r)return null;e=r.remain.trim();var i=wL(e,t);return!i||i.remain?null:r.dim?JKe(r.val,i.val,r.dim):[r.val,i.val]}function JKe(e,t,r){if(r==="N"||r==="S")return[e,t];if(r==="W"||r==="E")return[t,e]}var P0=GKe,Nq=d1.exports,rle=/(Lat)(itude)?/gi,ile=/(L)(on|ng)(gitude)?/i;function nle(e,t){var r,i,n;for(var s in e)i=s.match(t),i&&(!r||i[0].length/s.length>n)&&(n=i[0].length/s.length,r=s);return r}function sle(e){return nle(e,rle)}function ole(e){return nle(e,ile)}function ZKe(e){return!!e.match(rle)}function YKe(e){return!!e.match(ile)}function Dq(e){return typeof e=="object"?Object.keys(e).length:0}function ale(e){var t=[",",";","	","|"],r=[];return t.forEach(function(i){var n=P0.dsvFormat(i).parse(e);if(n.length>=1){for(var s=Dq(n[0]),o=0;o<n.length;o++)if(Dq(n[o])!==s)return;r.push({delimiter:i,arity:Object.keys(n[0]).length})}}),r.length?r.sort(function(i,n){return n.arity-i.arity})[0].delimiter:null}function KKe(e){return delete e.columns,e}function XKe(e){var t=ale(e);return t?KKe(P0.dsvFormat(t).parse(e)):null}function QKe(e,t,r){r||(r=t,t={}),t.delimiter=t.delimiter||",";var i=t.latfield||"",n=t.lonfield||"",s=t.crs||"",o=[],a={type:"FeatureCollection",features:o};if(s!==""&&(a.crs={type:"name",properties:{name:s}}),t.delimiter==="auto"&&typeof e=="string"&&(t.delimiter=ale(e),!t.delimiter)){r({type:"Error",message:"Could not autodetect delimiter"});return}var l=t.numericFields?t.numericFields.split(","):null,u=typeof e=="string"?P0.dsvFormat(t.delimiter).parse(e,function(x){if(l)for(var I in x)l.includes(I)&&(x[I]=+x[I]);return x}):e;if(!u.length){r(null,a);return}var h=[],d;i||(i=sle(u[0])),n||(n=ole(u[0]));var f=!i||!n;if(f){for(d=0;d<u.length;d++)o.push({type:"Feature",properties:u[d],geometry:null});r(h.length?h:null,a);return}for(d=0;d<u.length;d++)if(u[d][n]!==void 0&&u[d][i]!==void 0){var m=u[d][n],g=u[d][i],b,w,_;_=Nq(m,"EW"),_&&(m=_),_=Nq(g,"NS"),_&&(g=_),b=parseFloat(m),w=parseFloat(g),isNaN(b)||isNaN(w)?h.push({message:"A row contained an invalid value for latitude or longitude",row:u[d],index:d}):(t.includeLatLon||(delete u[d][n],delete u[d][i]),o.push({type:"Feature",properties:u[d],geometry:{type:"Point",coordinates:[parseFloat(b),parseFloat(w)]}}))}r(h.length?h:null,a)}function eXe(e){for(var t=e.features,r={type:"Feature",geometry:{type:"LineString",coordinates:[]}},i=0;i<t.length;i++)r.geometry.coordinates.push(t[i].geometry.coordinates);return r.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[r]}}function tXe(e){for(var t=e.features,r={type:"Feature",geometry:{type:"Polygon",coordinates:[[]]}},i=0;i<t.length;i++)r.geometry.coordinates[0].push(t[i].geometry.coordinates);return r.properties=t.reduce(function(n,s){for(var o in s.properties)n[o]||(n[o]=[]),n[o].push(s.properties[o]);return n},{}),{type:"FeatureCollection",features:[r]}}var Fq={isLon:YKe,isLat:ZKe,guessLatHeader:sle,guessLonHeader:ole,csv:P0.csvParse,tsv:P0.tsvParse,dsv:P0,auto:XKe,csv2geojson:QKe,toLine:eXe,toPolygon:tXe};const rXe={Point:"circlePoint",MultiPoint:"circlePoint",LineString:"solidLine",MultiLineString:"solidLine",Polygon:"outlinedPoly",MultiPolygon:"outlinedPoly"};function iXe(e){if(e.type!=="FeatureCollection")throw new Error("GeoJSON is not in FeatureCollection format");let t=!0,r=!0;e.features.forEach((i,n)=>{Object.assign(i.properties,{ID_FILE:"",OBJECTID_FILE:""}),"id"in i&&typeof i.id<"u"&&(i.properties.ID_FILE=i.id,t=!1),"OBJECTID"in i.properties&&(i.properties.OBJECTID_FILE=i.properties.OBJECTID,delete i.properties.OBJECTID,r=!1),i.id=n+1}),t&&e.features.forEach(function(i){delete i.properties.ID_FILE}),r&&e.features.forEach(function(i){delete i.properties.OBJECTID_FILE})}function nXe(e,t){const r=i=>i.indexOf(" ")>-1;t.fields?.forEach(i=>{if(i.name&&r(i.name)){const n=i.name;let s,o="_",a;do s=n.replace(/ /g,o),a=t.fields?.find(l=>l.name===s),a&&(o+="_");while(a);i.alias=n,i.name=s,e.features.forEach(l=>{l.properties[s]=l.properties[n],delete l.properties[n]})}})}class sXe extends Gi{extractGeoJsonFields(t){if(t.features.length<1)throw new Error("GeoJSON field extraction requires at least one feature");let r=Object.keys(t.features[0].properties).map(s=>({name:s,type:"string"})),i=0,n=Object.keys(t.features[0].properties);for(;i<t.features.length;){let s=t.features[i];if(s.properties&&Object.keys(s.properties).filter(o=>n.includes(o)).forEach(o=>{let a=s.properties[o];if(a!=null){let l=r.findIndex(u=>u.name===o);r[l]={name:o,type:this.inferType(a)},n.splice(n.indexOf(o),1)}}),n.length===0)break;i++}return r}extractCsvFields(t,r=","){return Fq.dsv.dsvFormat(r).parseRows(t)[0].map(n=>({name:n,type:Wp.STRING}))}async geoJsonToEsriJson(t,r){let i,n="EPSG:4326",s;const o={objectIdField:"OBJECTID",fields:[{name:"OBJECTID",type:Wp.OID}]};iXe(t);const a=rXe[t.features[0].geometry.type],l=kKe[a];if(t.crs&&t.crs.type==="name"&&(n=t.crs.properties.name),r){if(r.sourceProjection&&(n=r.sourceProjection),r.targetSR)i=r.targetSR;else throw new Error("geoJsonToEsriJson - missing opts.targetSR arguement");r.layerId?s=r.layerId:s=this.$iApi.geo.shared.generateUUID(),r.colour&&(l.renderer.symbol.color=new Le(r.colour).toRgba())}else throw new Error("geoJsonToEsriJson - missing opts arguement");o.renderer=l$.fromJSON(l.renderer),o.fields=(o.fields||[]).concat(this.extractGeoJsonFields(t)),nXe(t,o);const u=this.$iApi.geo.proj.normalizeProj(i);if(r){if(r.latField){const f=o.fields.find(m=>m.name===r.latField||m.alias===r.latField);f&&(f.type=Wp.DOUBLE)}if(r.lonField){const f=o.fields.find(m=>m.name===r.lonField||m.alias===r.lonField);f&&(f.type=Wp.DOUBLE)}}await this.$iApi.geo.proj.checkProjBomber([n,i]);const h=new Fe(i);await this.$iApi.geo.proj.projectGeoJson(t,n,u);const d=OKe.convert(t,{sr:8888});return o.geometryType=l.geometryType,d.forEach(f=>{f.geometry.spatialReference=h,f.geometry.type=l.geometryType,Object.keys(f.attributes).forEach(m=>{(Array.isArray(f.attributes[m])||typeof f.attributes[m]=="object")&&f.attributes[m]!=null&&(f.attributes[m]="[Complex Value Removed]")})}),o.source=d,o.spatialReference=h,o.id=s,o}async csvToGeoJson(t,r){const i={latfield:"Lat",lonfield:"Long",delimiter:","};return r&&(r.latfield&&(i.latfield=r.latfield),r.lonfield&&(i.lonfield=r.lonfield),r.delimiter&&(i.delimiter=r.delimiter)),new Promise((n,s)=>{Fq.csv2geojson(t,i,(o,a)=>{o?(console.error("csv conversion error"),console.error(o),s(o)):(a.features.map(l=>{l.properties[i.lonfield]=l.geometry.coordinates[0],l.properties[i.latfield]=l.geometry.coordinates[1]}),n(a))})})}async shapefileToGeoJson(t){return window.shp(t)}inferType(t){return typeof t=="number"?Wp.DOUBLE:Wp.STRING}}var oXe=[4326,4269,4258,31467,31468,31469,2166,2167,2168,2036,2044,2045,2065,2081,2082,2083,2085,2086,2091,2092,2093,2096,2097,2098,2105,2106,2107,2108,2109,2110,2111,2112,2113,2114,2115,2116,2117,2118,2119,2120,2121,2122,2123,2124,2125,2126,2127,2128,2129,2130,2131,2132,2169,2170,2171,2172,2173,2174,2175,2176,2177,2178,2179,2180,2193,2199,2200,2206,2207,2208,2209,2210,2211,2212,2319,2320,2321,2322,2323,2324,2325,2326,2327,2328,2329,2330,2331,2332,2333,2334,2335,2336,2337,2338,2339,2340,2341,2342,2343,2344,2345,2346,2347,2348,2349,2350,2351,2352,2353,2354,2355,2356,2357,2358,2359,2360,2361,2362,2363,2364,2365,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2384,2385,2386,2387,2388,2389,2390,2391,2392,2393,2394,2395,2396,2397,2398,2399,2400,2401,2402,2403,2404,2405,2406,2407,2408,2409,2410,2411,2412,2413,2414,2415,2416,2417,2418,2419,2420,2421,2422,2423,2424,2425,2426,2427,2428,2429,2430,2431,2432,2433,2434,2435,2436,2437,2438,2439,2440,2441,2442,2443,2444,2445,2446,2447,2448,2449,2450,2451,2452,2453,2454,2455,2456,2457,2458,2459,2460,2461,2462,2463,2464,2465,2466,2467,2468,2469,2470,2471,2472,2473,2474,2475,2476,2477,2478,2479,2480,2481,2482,2483,2484,2485,2486,2487,2488,2489,2490,2491,2492,2493,2494,2495,2496,2497,2498,2499,2500,2501,2502,2503,2504,2505,2506,2507,2508,2509,2510,2511,2512,2513,2514,2515,2516,2517,2518,2519,2520,2521,2522,2523,2524,2525,2526,2527,2528,2529,2530,2531,2532,2533,2534,2535,2536,2537,2538,2539,2540,2541,2542,2543,2544,2545,2546,2547,2548,2549,2551,2552,2553,2554,2555,2556,2557,2558,2559,2560,2561,2562,2563,2564,2565,2566,2567,2568,2569,2570,2571,2572,2573,2574,2575,2576,2577,2578,2579,2580,2581,2582,2583,2584,2585,2586,2587,2588,2589,2590,2591,2592,2593,2594,2595,2596,2597,2598,2599,2600,2601,2602,2603,2604,2605,2606,2607,2608,2609,2610,2611,2612,2613,2614,2615,2616,2617,2618,2619,2620,2621,2622,2623,2624,2625,2626,2627,2628,2629,2630,2631,2632,2633,2634,2635,2636,2637,2638,2639,2640,2641,2642,2643,2644,2645,2646,2647,2648,2649,2650,2651,2652,2653,2654,2655,2656,2657,2658,2659,2660,2661,2662,2663,2664,2665,2666,2667,2668,2669,2670,2671,2672,2673,2674,2675,2676,2677,2678,2679,2680,2681,2682,2683,2684,2685,2686,2687,2688,2689,2690,2691,2692,2693,2694,2695,2696,2697,2698,2699,2700,2701,2702,2703,2704,2705,2706,2707,2708,2709,2710,2711,2712,2713,2714,2715,2716,2717,2718,2719,2720,2721,2722,2723,2724,2725,2726,2727,2728,2729,2730,2731,2732,2733,2734,2735,2738,2739,2740,2741,2742,2743,2744,2745,2746,2747,2748,2749,2750,2751,2752,2753,2754,2755,2756,2757,2758,2935,2936,2937,2938,2939,2940,2941,2953,2963,3006,3007,3008,3009,3010,3011,3012,3013,3014,3015,3016,3017,3018,3019,3020,3021,3022,3023,3024,3025,3026,3027,3028,3029,3030,3034,3035,3038,3039,3040,3041,3042,3043,3044,3045,3046,3047,3048,3049,3050,3051,3058,3059,3068,3114,3115,3116,3117,3118,3120,3126,3127,3128,3129,3130,3131,3132,3133,3134,3135,3136,3137,3138,3139,3140,3146,3147,3150,3151,3152,3300,3301,3328,3329,3330,3331,3332,3333,3334,3335,3346,3350,3351,3352,3366,3386,3387,3388,3389,3390,3396,3397,3398,3399,3407,3414,3416,3764,3788,3789,3790,3791,3793,3795,3796,3819,3821,3823,3824,3833,3834,3835,3836,3837,3838,3839,3840,3841,3842,3843,3844,3845,3846,3847,3848,3849,3850,3851,3852,3854,3873,3874,3875,3876,3877,3878,3879,3880,3881,3882,3883,3884,3885,3888,3889,3906,3907,3908,3909,3910,3911,4001,4002,4003,4004,4005,4006,4007,4008,4009,4010,4011,4012,4013,4014,4015,4016,4017,4018,4019,4020,4021,4022,4023,4024,4025,4026,4027,4028,4029,4030,4031,4032,4033,4034,4035,4036,4037,4038,4040,4041,4042,4043,4044,4045,4046,4047,4052,4053,4054,4055,4074,4075,4080,4081,4120,4121,4122,4123,4124,4125,4126,4127,4128,4129,4130,4131,4132,4133,4134,4135,4136,4137,4138,4139,4140,4141,4142,4143,4144,4145,4146,4147,4148,4149,4150,4151,4152,4153,4154,4155,4156,4157,4158,4159,4160,4161,4162,4163,4164,4165,4166,4167,4168,4169,4170,4171,4172,4173,4174,4175,4176,4178,4179,4180,4181,4182,4183,4184,4185,4188,4189,4190,4191,4192,4193,4194,4195,4196,4197,4198,4199,4200,4201,4202,4203,4204,4205,4206,4207,4208,4209,4210,4211,4212,4213,4214,4215,4216,4218,4219,4220,4221,4222,4223,4224,4225,4226,4227,4228,4229,4230,4231,4232,4233,4234,4235,4236,4237,4238,4239,4240,4241,4242,4243,4244,4245,4246,4247,4248,4249,4250,4251,4252,4253,4254,4255,4256,4257,4259,4260,4261,4262,4263,4264,4265,4266,4267,4268,4270,4271,4272,4273,4274,4275,4276,4277,4278,4279,4280,4281,4282,4283,4284,4285,4286,4287,4288,4289,4291,4292,4293,4294,4295,4296,4297,4298,4299,4300,4301,4302,4303,4304,4306,4307,4308,4309,4310,4311,4312,4313,4314,4315,4316,4317,4318,4319,4322,4324,4327,4329,4339,4341,4343,4345,4347,4349,4351,4353,4355,4357,4359,4361,4363,4365,4367,4369,4371,4373,4375,4377,4379,4381,4383,4386,4388,4417,4434,4463,4466,4469,4470,4472,4475,4480,4482,4483,4490,4491,4492,4493,4494,4495,4496,4497,4498,4499,4500,4501,4502,4503,4504,4505,4506,4507,4508,4509,4510,4511,4512,4513,4514,4515,4516,4517,4518,4519,4520,4521,4522,4523,4524,4525,4526,4527,4528,4529,4530,4531,4532,4533,4534,4535,4536,4537,4538,4539,4540,4541,4542,4543,4544,4545,4546,4547,4548,4549,4550,4551,4552,4553,4554,4555,4557,4558,4568,4569,4570,4571,4572,4573,4574,4575,4576,4577,4578,4579,4580,4581,4582,4583,4584,4585,4586,4587,4588,4589,4600,4601,4602,4603,4604,4605,4606,4607,4608,4609,4610,4611,4612,4613,4614,4615,4616,4617,4618,4619,4620,4621,4622,4623,4624,4625,4626,4627,4628,4629,4630,4631,4632,4633,4634,4635,4636,4637,4638,4639,4640,4641,4642,4643,4644,4645,4646,4652,4653,4654,4655,4656,4657,4658,4659,4660,4661,4662,4663,4664,4665,4666,4667,4668,4669,4670,4671,4672,4673,4674,4675,4676,4677,4678,4679,4680,4681,4682,4683,4684,4685,4686,4687,4688,4689,4690,4691,4692,4693,4694,4695,4696,4697,4698,4699,4700,4701,4702,4703,4704,4705,4706,4707,4708,4709,4710,4711,4712,4713,4714,4715,4716,4717,4718,4719,4720,4721,4722,4723,4724,4725,4726,4727,4728,4729,4730,4731,4732,4733,4734,4735,4736,4737,4738,4739,4740,4741,4742,4743,4744,4745,4746,4747,4748,4749,4750,4751,4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775,4776,4777,4778,4779,4780,4781,4782,4783,4784,4785,4786,4787,4788,4789,4790,4791,4792,4793,4794,4795,4796,4797,4798,4799,4800,4801,4802,4803,4804,4805,4806,4807,4808,4809,4810,4811,4812,4813,4814,4815,4816,4817,4818,4819,4820,4821,4822,4823,4824,4839,4855,4856,4857,4858,4859,4860,4861,4862,4863,4864,4865,4866,4867,4868,4869,4870,4871,4872,4873,4874,4875,4876,4877,4878,4879,4880,4883,4885,4887,4889,4891,4893,4895,4898,4900,4901,4902,4903,4904,4907,4909,4921,4923,4925,4927,4929,4931,4933,4935,4937,4939,4941,4943,4945,4947,4949,4951,4953,4955,4957,4959,4961,4963,4965,4967,4969,4971,4973,4975,4977,4979,4981,4983,4985,4987,4989,4991,4993,4995,4997,4999,5012,5013,5017,5048,5105,5106,5107,5108,5109,5110,5111,5112,5113,5114,5115,5116,5117,5118,5119,5120,5121,5122,5123,5124,5125,5126,5127,5128,5129,5130,5132,5167,5168,5169,5170,5171,5172,5173,5174,5175,5176,5177,5178,5179,5180,5181,5182,5183,5184,5185,5186,5187,5188,5224,5228,5229,5233,5245,5246,5251,5252,5253,5254,5255,5256,5257,5258,5259,5263,5264,5269,5270,5271,5272,5273,5274,5275,5801,5802,5803,5804,5808,5809,5810,5811,5812,5813,5814,5815,5816,20004,20005,20006,20007,20008,20009,20010,20011,20012,20013,20014,20015,20016,20017,20018,20019,20020,20021,20022,20023,20024,20025,20026,20027,20028,20029,20030,20031,20032,20064,20065,20066,20067,20068,20069,20070,20071,20072,20073,20074,20075,20076,20077,20078,20079,20080,20081,20082,20083,20084,20085,20086,20087,20088,20089,20090,20091,20092,21413,21414,21415,21416,21417,21418,21419,21420,21421,21422,21423,21453,21454,21455,21456,21457,21458,21459,21460,21461,21462,21463,21473,21474,21475,21476,21477,21478,21479,21480,21481,21482,21483,21896,21897,21898,21899,22171,22172,22173,22174,22175,22176,22177,22181,22182,22183,22184,22185,22186,22187,22191,22192,22193,22194,22195,22196,22197,25884,27205,27206,27207,27208,27209,27210,27211,27212,27213,27214,27215,27216,27217,27218,27219,27220,27221,27222,27223,27224,27225,27226,27227,27228,27229,27230,27231,27232,27391,27392,27393,27394,27395,27396,27397,27398,27492,28402,28403,28404,28405,28406,28407,28408,28409,28410,28411,28412,28413,28414,28415,28416,28417,28418,28419,28420,28421,28422,28423,28424,28425,28426,28427,28428,28429,28430,28431,28432,28462,28463,28464,28465,28466,28467,28468,28469,28470,28471,28472,28473,28474,28475,28476,28477,28478,28479,28480,28481,28482,28483,28484,28485,28486,28487,28488,28489,28490,28491,28492,29701,29702,30161,30162,30163,30164,30165,30166,30167,30168,30169,30170,30171,30172,30173,30174,30175,30176,30177,30178,30179,30800,31251,31252,31253,31254,31255,31256,31257,31258,31259,31275,31276,31277,31278,31279,31281,31282,31283,31284,31285,31286,31287,31288,31289,31290,31466,31700],$F={exports:{}},lle=function(t,r){return function(){for(var n=new Array(arguments.length),s=0;s<n.length;s++)n[s]=arguments[s];return t.apply(r,n)}},aXe=lle,Ly=Object.prototype.toString;function EF(e){return Ly.call(e)==="[object Array]"}function _L(e){return typeof e>"u"}function lXe(e){return e!==null&&!_L(e)&&e.constructor!==null&&!_L(e.constructor)&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function uXe(e){return Ly.call(e)==="[object ArrayBuffer]"}function cXe(e){return typeof FormData<"u"&&e instanceof FormData}function hXe(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function dXe(e){return typeof e=="string"}function pXe(e){return typeof e=="number"}function ule(e){return e!==null&&typeof e=="object"}function k3(e){if(Ly.call(e)!=="[object Object]")return!1;var t=Object.getPrototypeOf(e);return t===null||t===Object.prototype}function fXe(e){return Ly.call(e)==="[object Date]"}function mXe(e){return Ly.call(e)==="[object File]"}function yXe(e){return Ly.call(e)==="[object Blob]"}function cle(e){return Ly.call(e)==="[object Function]"}function gXe(e){return ule(e)&&cle(e.pipe)}function vXe(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function bXe(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function wXe(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function AF(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),EF(e))for(var r=0,i=e.length;r<i;r++)t.call(null,e[r],r,e);else for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.call(null,e[n],n,e)}function xL(){var e={};function t(n,s){k3(e[s])&&k3(n)?e[s]=xL(e[s],n):k3(n)?e[s]=xL({},n):EF(n)?e[s]=n.slice():e[s]=n}for(var r=0,i=arguments.length;r<i;r++)AF(arguments[r],t);return e}function _Xe(e,t,r){return AF(t,function(n,s){r&&typeof n=="function"?e[s]=aXe(n,r):e[s]=n}),e}function xXe(e){return e.charCodeAt(0)===65279&&(e=e.slice(1)),e}var Uo={isArray:EF,isArrayBuffer:uXe,isBuffer:lXe,isFormData:cXe,isArrayBufferView:hXe,isString:dXe,isNumber:pXe,isObject:ule,isPlainObject:k3,isUndefined:_L,isDate:fXe,isFile:mXe,isBlob:yXe,isFunction:cle,isStream:gXe,isURLSearchParams:vXe,isStandardBrowserEnv:wXe,forEach:AF,merge:xL,extend:_Xe,trim:bXe,stripBOM:xXe},Xy=Uo;function jq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var hle=function(t,r,i){if(!r)return t;var n;if(i)n=i(r);else if(Xy.isURLSearchParams(r))n=r.toString();else{var s=[];Xy.forEach(r,function(l,u){l===null||typeof l>"u"||(Xy.isArray(l)?u=u+"[]":l=[l],Xy.forEach(l,function(d){Xy.isDate(d)?d=d.toISOString():Xy.isObject(d)&&(d=JSON.stringify(d)),s.push(jq(u)+"="+jq(d))}))}),n=s.join("&")}if(n){var o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+n}return t},SXe=Uo;function HE(){this.handlers=[]}HE.prototype.use=function(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1};HE.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)};HE.prototype.forEach=function(t){SXe.forEach(this.handlers,function(i){i!==null&&t(i)})};var MXe=HE,IXe=Uo,TXe=function(t,r){IXe.forEach(t,function(n,s){s!==r&&s.toUpperCase()===r.toUpperCase()&&(t[r]=n,delete t[s])})},dle=function(t,r,i,n,s){return t.config=r,i&&(t.code=i),t.request=n,t.response=s,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t},$Xe=dle,ple=function(t,r,i,n,s){var o=new Error(t);return $Xe(o,r,i,n,s)},EXe=ple,AXe=function(t,r,i){var n=i.config.validateStatus;!i.status||!n||n(i.status)?t(i):r(EXe("Request failed with status code "+i.status,i.config,null,i.request,i))},US=Uo,CXe=US.isStandardBrowserEnv()?function(){return{write:function(r,i,n,s,o,a){var l=[];l.push(r+"="+encodeURIComponent(i)),US.isNumber(n)&&l.push("expires="+new Date(n).toGMTString()),US.isString(s)&&l.push("path="+s),US.isString(o)&&l.push("domain="+o),a===!0&&l.push("secure"),document.cookie=l.join("; ")},read:function(r){var i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),kXe=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},OXe=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},PXe=kXe,RXe=OXe,LXe=function(t,r){return t&&!PXe(r)?RXe(t,r):r},SA=Uo,NXe=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],DXe=function(t){var r={},i,n,s;return t&&SA.forEach(t.split(`
`),function(a){if(s=a.indexOf(":"),i=SA.trim(a.substr(0,s)).toLowerCase(),n=SA.trim(a.substr(s+1)),i){if(r[i]&&NXe.indexOf(i)>=0)return;i==="set-cookie"?r[i]=(r[i]?r[i]:[]).concat([n]):r[i]=r[i]?r[i]+", "+n:n}}),r},Vq=Uo,FXe=Vq.isStandardBrowserEnv()?function(){var t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),i;function n(s){var o=s;return t&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=n(window.location.href),function(o){var a=Vq.isString(o)?n(o):o;return a.protocol===i.protocol&&a.host===i.host}}():function(){return function(){return!0}}(),zS=Uo,jXe=AXe,VXe=CXe,UXe=hle,zXe=LXe,BXe=DXe,GXe=FXe,MA=ple,Uq=function(t){return new Promise(function(i,n){var s=t.data,o=t.headers,a=t.responseType;zS.isFormData(s)&&delete o["Content-Type"];var l=new XMLHttpRequest;if(t.auth){var u=t.auth.username||"",h=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(u+":"+h)}var d=zXe(t.baseURL,t.url);l.open(t.method.toUpperCase(),UXe(d,t.params,t.paramsSerializer),!0),l.timeout=t.timeout;function f(){if(!!l){var g="getAllResponseHeaders"in l?BXe(l.getAllResponseHeaders()):null,b=!a||a==="text"||a==="json"?l.responseText:l.response,w={data:b,status:l.status,statusText:l.statusText,headers:g,config:t,request:l};jXe(i,n,w),l=null}}if("onloadend"in l?l.onloadend=f:l.onreadystatechange=function(){!l||l.readyState!==4||l.status===0&&!(l.responseURL&&l.responseURL.indexOf("file:")===0)||setTimeout(f)},l.onabort=function(){!l||(n(MA("Request aborted",t,"ECONNABORTED",l)),l=null)},l.onerror=function(){n(MA("Network Error",t,null,l)),l=null},l.ontimeout=function(){var b="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(b=t.timeoutErrorMessage),n(MA(b,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",l)),l=null},zS.isStandardBrowserEnv()){var m=(t.withCredentials||GXe(d))&&t.xsrfCookieName?VXe.read(t.xsrfCookieName):void 0;m&&(o[t.xsrfHeaderName]=m)}"setRequestHeader"in l&&zS.forEach(o,function(b,w){typeof s>"u"&&w.toLowerCase()==="content-type"?delete o[w]:l.setRequestHeader(w,b)}),zS.isUndefined(t.withCredentials)||(l.withCredentials=!!t.withCredentials),a&&a!=="json"&&(l.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&l.addEventListener("progress",t.onDownloadProgress),typeof t.onUploadProgress=="function"&&l.upload&&l.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(b){!l||(l.abort(),n(b),l=null)}),s||(s=null),l.send(s)})},ns=Uo,zq=TXe,qXe=dle,HXe={"Content-Type":"application/x-www-form-urlencoded"};function Bq(e,t){!ns.isUndefined(e)&&ns.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function WXe(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(e=Uq),e}var WE={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:WXe(),transformRequest:[function(t,r){return zq(r,"Accept"),zq(r,"Content-Type"),ns.isFormData(t)||ns.isArrayBuffer(t)||ns.isBuffer(t)||ns.isStream(t)||ns.isFile(t)||ns.isBlob(t)?t:ns.isArrayBufferView(t)?t.buffer:ns.isURLSearchParams(t)?(Bq(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):ns.isObject(t)||r&&r["Content-Type"]==="application/json"?(Bq(r,"application/json"),JSON.stringify(t)):t}],transformResponse:[function(t){var r=this.transitional,i=r&&r.silentJSONParsing,n=r&&r.forcedJSONParsing,s=!i&&this.responseType==="json";if(s||n&&ns.isString(t)&&t.length)try{return JSON.parse(t)}catch(o){if(s)throw o.name==="SyntaxError"?qXe(o,this,"E_JSON_PARSE"):o}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};WE.headers={common:{Accept:"application/json, text/plain, */*"}};ns.forEach(["delete","get","head"],function(t){WE.headers[t]={}});ns.forEach(["post","put","patch"],function(t){WE.headers[t]=ns.merge(HXe)});var CF=WE,JXe=Uo,ZXe=CF,YXe=function(t,r,i){var n=this||ZXe;return JXe.forEach(i,function(o){t=o.call(n,t,r)}),t},fle=function(t){return!!(t&&t.__CANCEL__)},Gq=Uo,IA=YXe,KXe=fle,XXe=CF;function TA(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var QXe=function(t){TA(t),t.headers=t.headers||{},t.data=IA.call(t,t.data,t.headers,t.transformRequest),t.headers=Gq.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Gq.forEach(["delete","get","head","post","put","patch","common"],function(n){delete t.headers[n]});var r=t.adapter||XXe.adapter;return r(t).then(function(n){return TA(t),n.data=IA.call(t,n.data,n.headers,t.transformResponse),n},function(n){return KXe(n)||(TA(t),n&&n.response&&(n.response.data=IA.call(t,n.response.data,n.response.headers,t.transformResponse))),Promise.reject(n)})},$n=Uo,mle=function(t,r){r=r||{};var i={},n=["url","method","data"],s=["headers","auth","proxy","params"],o=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function l(f,m){return $n.isPlainObject(f)&&$n.isPlainObject(m)?$n.merge(f,m):$n.isPlainObject(m)?$n.merge({},m):$n.isArray(m)?m.slice():m}function u(f){$n.isUndefined(r[f])?$n.isUndefined(t[f])||(i[f]=l(void 0,t[f])):i[f]=l(t[f],r[f])}$n.forEach(n,function(m){$n.isUndefined(r[m])||(i[m]=l(void 0,r[m]))}),$n.forEach(s,u),$n.forEach(o,function(m){$n.isUndefined(r[m])?$n.isUndefined(t[m])||(i[m]=l(void 0,t[m])):i[m]=l(void 0,r[m])}),$n.forEach(a,function(m){m in r?i[m]=l(t[m],r[m]):m in t&&(i[m]=l(void 0,t[m]))});var h=n.concat(s).concat(o).concat(a),d=Object.keys(t).concat(Object.keys(r)).filter(function(m){return h.indexOf(m)===-1});return $n.forEach(d,u),i};const eQe="axios",tQe="0.21.2",rQe="Promise based HTTP client for the browser and node.js",iQe="index.js",nQe={test:"grunt test",start:"node ./sandbox/server.js",build:"NODE_ENV=production grunt build",preversion:"npm test",version:"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json",postversion:"git push && git push --tags",examples:"node ./examples/server.js",coveralls:"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js",fix:"eslint --fix lib/**/*.js"},sQe={type:"git",url:"https://github.com/axios/axios.git"},oQe=["xhr","http","ajax","promise","node"],aQe="Matt Zabriskie",lQe="MIT",uQe={url:"https://github.com/axios/axios/issues"},cQe="https://axios-http.com",hQe={coveralls:"^3.0.0","es6-promise":"^4.2.4",grunt:"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1",karma:"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2",minimist:"^1.2.0",mocha:"^8.2.1",sinon:"^4.5.0","terser-webpack-plugin":"^4.2.3",typescript:"^4.0.5","url-search-params":"^0.10.0",webpack:"^4.44.2","webpack-dev-server":"^3.11.0"},dQe={"./lib/adapters/http.js":"./lib/adapters/xhr.js"},pQe="dist/axios.min.js",fQe="dist/axios.min.js",mQe="./index.d.ts",yQe={"follow-redirects":"^1.14.0"},gQe=[{path:"./dist/axios.min.js",threshold:"5kB"}];var vQe={name:eQe,version:tQe,description:rQe,main:iQe,scripts:nQe,repository:sQe,keywords:oQe,author:aQe,license:lQe,bugs:uQe,homepage:cQe,devDependencies:hQe,browser:dQe,jsdelivr:pQe,unpkg:fQe,typings:mQe,dependencies:yQe,bundlesize:gQe},yle=vQe,kF={};["object","boolean","number","function","string","symbol"].forEach(function(e,t){kF[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});var qq={},bQe=yle.version.split(".");function gle(e,t){for(var r=t?t.split("."):bQe,i=e.split("."),n=0;n<3;n++){if(r[n]>i[n])return!0;if(r[n]<i[n])return!1}return!1}kF.transitional=function(t,r,i){var n=r&&gle(r);function s(o,a){return"[Axios v"+yle.version+"] Transitional option '"+o+"'"+a+(i?". "+i:"")}return function(o,a,l){if(t===!1)throw new Error(s(a," has been removed in "+r));return n&&!qq[a]&&(qq[a]=!0,console.warn(s(a," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(o,a,l):!0}};function wQe(e,t,r){if(typeof e!="object")throw new TypeError("options must be an object");for(var i=Object.keys(e),n=i.length;n-- >0;){var s=i[n],o=t[s];if(o){var a=e[s],l=a===void 0||o(a,s,e);if(l!==!0)throw new TypeError("option "+s+" must be "+l);continue}if(r!==!0)throw Error("Unknown option "+s)}}var _Qe={isOlderVersion:gle,assertOptions:wQe,validators:kF},vle=Uo,xQe=hle,Hq=MXe,Wq=QXe,JE=mle,ble=_Qe,Qy=ble.validators;function nx(e){this.defaults=e,this.interceptors={request:new Hq,response:new Hq}}nx.prototype.request=function(t){typeof t=="string"?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=JE(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var r=t.transitional;r!==void 0&&ble.assertOptions(r,{silentJSONParsing:Qy.transitional(Qy.boolean,"1.0.0"),forcedJSONParsing:Qy.transitional(Qy.boolean,"1.0.0"),clarifyTimeoutError:Qy.transitional(Qy.boolean,"1.0.0")},!1);var i=[],n=!0;this.interceptors.request.forEach(function(f){typeof f.runWhen=="function"&&f.runWhen(t)===!1||(n=n&&f.synchronous,i.unshift(f.fulfilled,f.rejected))});var s=[];this.interceptors.response.forEach(function(f){s.push(f.fulfilled,f.rejected)});var o;if(!n){var a=[Wq,void 0];for(Array.prototype.unshift.apply(a,i),a.concat(s),o=Promise.resolve(t);a.length;)o=o.then(a.shift(),a.shift());return o}for(var l=t;i.length;){var u=i.shift(),h=i.shift();try{l=u(l)}catch(d){h(d);break}}try{o=Wq(l)}catch(d){return Promise.reject(d)}for(;s.length;)o=o.then(s.shift(),s.shift());return o};nx.prototype.getUri=function(t){return t=JE(this.defaults,t),xQe(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")};vle.forEach(["delete","get","head","options"],function(t){nx.prototype[t]=function(r,i){return this.request(JE(i||{},{method:t,url:r,data:(i||{}).data}))}});vle.forEach(["post","put","patch"],function(t){nx.prototype[t]=function(r,i,n){return this.request(JE(n||{},{method:t,url:r,data:i}))}});var SQe=nx;function OF(e){this.message=e}OF.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")};OF.prototype.__CANCEL__=!0;var wle=OF,MQe=wle;function OT(e){if(typeof e!="function")throw new TypeError("executor must be a function.");var t;this.promise=new Promise(function(n){t=n});var r=this;e(function(n){r.reason||(r.reason=new MQe(n),t(r.reason))})}OT.prototype.throwIfRequested=function(){if(this.reason)throw this.reason};OT.source=function(){var t,r=new OT(function(n){t=n});return{token:r,cancel:t}};var IQe=OT,TQe=function(t){return function(i){return t.apply(null,i)}},$Qe=function(t){return typeof t=="object"&&t.isAxiosError===!0},Jq=Uo,EQe=lle,O3=SQe,AQe=mle,CQe=CF;function _le(e){var t=new O3(e),r=EQe(O3.prototype.request,t);return Jq.extend(r,O3.prototype,t),Jq.extend(r,t),r}var Pl=_le(CQe);Pl.Axios=O3;Pl.create=function(t){return _le(AQe(Pl.defaults,t))};Pl.Cancel=wle;Pl.CancelToken=IQe;Pl.isCancel=fle;Pl.all=function(t){return Promise.all(t)};Pl.spread=TQe;Pl.isAxiosError=$Qe;$F.exports=Pl;$F.exports.default=Pl;var kQe=$F.exports,xle={},Sle={},Qu={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",i="["+t+"]["+r+"]*",n=new RegExp("^"+i+"$"),s=function(a,l){const u=[];let h=l.exec(a);for(;h;){const d=[],f=h.length;for(let m=0;m<f;m++)d.push(h[m]);u.push(d),h=l.exec(a)}return u},o=function(a){const l=n.exec(a);return!(l===null||typeof l>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,l,u){if(l){const h=Object.keys(l),d=h.length;for(let f=0;f<d;f++)u==="strict"?a[h[f]]=[l[h[f]]]:a[h[f]]=l[h[f]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.buildOptions=function(a,l,u){var h={};if(!a)return l;for(let d=0;d<u.length;d++)a[u[d]]!==void 0?h[u[d]]=a[u[d]]:h[u[d]]=l[u[d]];return h},e.isTagNameInArrayMode=function(a,l,u){return l===!1?!1:l instanceof RegExp?l.test(a):typeof l=="function"?!!l(a,u):l==="strict"},e.isName=o,e.getAllMatches=s,e.nameRegexp=i})(Qu);const Hp=Qu,SL=function(e,t,r){const i={};if((!e.child||Hp.isEmptyObject(e.child))&&(!e.attrsMap||Hp.isEmptyObject(e.attrsMap)))return Hp.isExist(e.val)?e.val:"";if(Hp.isExist(e.val)&&!(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar))){const s=Hp.isTagNameInArrayMode(e.tagname,t.arrayMode,r);i[t.textNodeName]=s?[e.val]:e.val}Hp.merge(i,e.attrsMap,t.arrayMode);const n=Object.keys(e.child);for(let s=0;s<n.length;s++){const o=n[s];if(e.child[o]&&e.child[o].length>1){i[o]=[];for(let a in e.child[o])e.child[o].hasOwnProperty(a)&&i[o].push(SL(e.child[o][a],t,o))}else{const a=SL(e.child[o][0],t,o),l=t.arrayMode===!0&&typeof a=="object"||Hp.isTagNameInArrayMode(o,t.arrayMode,r);i[o]=l?[a]:a}}return i};Sle.convertToJson=SL;var cy={},OQe=function(e,t,r){this.tagname=e,this.parent=t,this.child={},this.attrsMap={},this.val=r,this.addChild=function(i){Array.isArray(this.child[i.tagname])?this.child[i.tagname].push(i):this.child[i.tagname]=[i]}};const fm=Qu,PQe=Qu.buildOptions,BS=OQe;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,fm.nameRegexp);!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Mle={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,ignoreNameSpace:!1,allowBooleanAttributes:!1,parseNodeValue:!0,parseAttributeValue:!1,arrayMode:!1,trimValues:!0,cdataTagName:!1,cdataPositionChar:"\\c",tagValueProcessor:function(e,t){return e},attrValueProcessor:function(e,t){return e},stopNodes:[]};cy.defaultOptions=Mle;const Ile=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","ignoreNameSpace","allowBooleanAttributes","parseNodeValue","parseAttributeValue","arrayMode","trimValues","cdataTagName","cdataPositionChar","tagValueProcessor","attrValueProcessor","parseTrueNumberOnly","stopNodes"];cy.props=Ile;function GS(e,t,r){return t&&(r.trimValues&&(t=t.trim()),t=r.tagValueProcessor(t,e),t=Tle(t,r.parseNodeValue,r.parseTrueNumberOnly)),t}function RQe(e,t){if(t.ignoreNameSpace){const r=e.split(":"),i=e.charAt(0)==="/"?"/":"";if(r[0]==="xmlns")return"";r.length===2&&(e=i+r[1])}return e}function Tle(e,t,r){if(t&&typeof e=="string"){let i;return e.trim()===""||isNaN(e)?i=e==="true"?!0:e==="false"?!1:e:(e.indexOf("0x")!==-1?i=Number.parseInt(e,16):e.indexOf(".")!==-1?(i=Number.parseFloat(e),e=e.replace(/\.?0+$/,"")):i=Number.parseInt(e,10),r&&(i=String(i)===e?i:e)),i}else return fm.isExist(e)?e:""}const LQe=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])(.*?)\\3)?`,"g");function Zq(e,t){if(!t.ignoreAttributes&&typeof e=="string"){e=e.replace(/\r?\n/g," ");const r=fm.getAllMatches(e,LQe),i=r.length,n={};for(let s=0;s<i;s++){const o=RQe(r[s][1],t);o.length&&(r[s][4]!==void 0?(t.trimValues&&(r[s][4]=r[s][4].trim()),r[s][4]=t.attrValueProcessor(r[s][4],o),n[t.attributeNamePrefix+o]=Tle(r[s][4],t.parseAttributeValue,t.parseTrueNumberOnly)):t.allowBooleanAttributes&&(n[t.attributeNamePrefix+o]=!0))}if(!Object.keys(n).length)return;if(t.attrNodeName){const s={};return s[t.attrNodeName]=n,s}return n}}const NQe=function(e,t){e=e.replace(/\r\n?/g,`
`),t=PQe(t,Mle,Ile);const r=new BS("!xml");let i=r,n="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){const a=K1(e,">",s,"Closing Tag is not closed.");let l=e.substring(s+2,a).trim();if(t.ignoreNameSpace){const u=l.indexOf(":");u!==-1&&(l=l.substr(u+1))}i&&(i.val?i.val=fm.getValue(i.val)+""+GS(l,n,t):i.val=GS(l,n,t)),t.stopNodes.length&&t.stopNodes.includes(i.tagname)&&(i.child=[],i.attrsMap==null&&(i.attrsMap={}),i.val=e.substr(i.startIndex+1,s-i.startIndex-1)),i=i.parent,n="",s=a}else if(e[s+1]==="?")s=K1(e,"?>",s,"Pi Tag is not closed.");else if(e.substr(s+1,3)==="!--")s=K1(e,"-->",s,"Comment is not closed.");else if(e.substr(s+1,2)==="!D"){const a=K1(e,">",s,"DOCTYPE is not closed.");e.substring(s,a).indexOf("[")>=0?s=e.indexOf("]>",s)+1:s=a}else if(e.substr(s+1,2)==="!["){const a=K1(e,"]]>",s,"CDATA is not closed.")-2,l=e.substring(s+9,a);if(n&&(i.val=fm.getValue(i.val)+""+GS(i.tagname,n,t),n=""),t.cdataTagName){const u=new BS(t.cdataTagName,i,l);i.addChild(u),i.val=fm.getValue(i.val)+t.cdataPositionChar,l&&(u.val=l)}else i.val=(i.val||"")+(l||"");s=a+2}else{const a=DQe(e,s+1);let l=a.data;const u=a.index,h=l.indexOf(" ");let d=l,f=!0;if(h!==-1&&(d=l.substr(0,h).replace(/\s\s*$/,""),l=l.substr(h+1)),t.ignoreNameSpace){const m=d.indexOf(":");m!==-1&&(d=d.substr(m+1),f=d!==a.data.substr(m+1))}if(i&&n&&i.tagname!=="!xml"&&(i.val=fm.getValue(i.val)+""+GS(i.tagname,n,t)),l.length>0&&l.lastIndexOf("/")===l.length-1){d[d.length-1]==="/"?(d=d.substr(0,d.length-1),l=d):l=l.substr(0,l.length-1);const m=new BS(d,i,"");d!==l&&(m.attrsMap=Zq(l,t)),i.addChild(m)}else{const m=new BS(d,i);t.stopNodes.length&&t.stopNodes.includes(m.tagname)&&(m.startIndex=u),d!==l&&f&&(m.attrsMap=Zq(l,t)),i.addChild(m),i=m}n="",s=u}else n+=e[s];return r};function DQe(e,t){let r,i="";for(let n=t;n<e.length;n++){let s=e[n];if(r)s===r&&(r="");else if(s==='"'||s==="'")r=s;else{if(s===">")return{data:i,index:n};s==="	"&&(s=" ")}i+=s}}function K1(e,t,r,i){const n=e.indexOf(t,r);if(n===-1)throw new Error(i);return n+t.length-1}cy.getTraversalObj=NQe;var $le={};const ZE=Qu,FQe={allowBooleanAttributes:!1},jQe=["allowBooleanAttributes"];$le.validate=function(e,t){t=ZE.buildOptions(t,FQe,jQe);const r=[];let i=!1,n=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Yq(e,s),s.err)return s}else if(e[s]==="<")if(s++,e[s]==="!"){s=Kq(e,s);continue}else{let o=!1;e[s]==="/"&&(o=!0,s++);let a="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)a+=e[s];if(a=a.trim(),a[a.length-1]==="/"&&(a=a.substring(0,a.length-1),s--),!WQe(a)){let h;return a.trim().length===0?h="There is an unnecessary space between tag name and backward slash '</ ..'.":h="Tag '"+a+"' is an invalid name.",fn("InvalidTag",h,Ka(e,s))}const l=zQe(e,s);if(l===!1)return fn("InvalidAttr","Attributes for '"+a+"' have open quote.",Ka(e,s));let u=l.value;if(s=l.index,u[u.length-1]==="/"){u=u.substring(0,u.length-1);const h=Xq(u,t);if(h===!0)i=!0;else return fn(h.err.code,h.err.msg,Ka(e,s-u.length+h.err.line))}else if(o)if(l.tagClosed){if(u.trim().length>0)return fn("InvalidTag","Closing tag '"+a+"' can't have attributes or invalid starting.",Ka(e,s));{const h=r.pop();if(a!==h)return fn("InvalidTag","Closing tag '"+h+"' is expected inplace of '"+a+"'.",Ka(e,s));r.length==0&&(n=!0)}}else return fn("InvalidTag","Closing tag '"+a+"' doesn't have proper closing.",Ka(e,s));else{const h=Xq(u,t);if(h!==!0)return fn(h.err.code,h.err.msg,Ka(e,s-u.length+h.err.line));if(n===!0)return fn("InvalidXml","Multiple possible root nodes found.",Ka(e,s));r.push(a),i=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Kq(e,s);continue}else if(e[s+1]==="?"){if(s=Yq(e,++s),s.err)return s}else break;else if(e[s]==="&"){const h=qQe(e,s);if(h==-1)return fn("InvalidChar","char '&' is not expected.",Ka(e,s));s=h}e[s]==="<"&&s--}else{if(e[s]===" "||e[s]==="	"||e[s]===`
`||e[s]==="\r")continue;return fn("InvalidChar","char '"+e[s]+"' is not expected.",Ka(e,s))}if(i){if(r.length>0)return fn("InvalidXml","Invalid '"+JSON.stringify(r,null,4).replace(/\r?\n/g,"")+"' found.",1)}else return fn("InvalidXml","Start tag expected.",1);return!0};function Yq(e,t){for(var r=t;t<e.length;t++)if(e[t]=="?"||e[t]==" "){var i=e.substr(r,t-r);if(t>5&&i==="xml")return fn("InvalidXml","XML declaration allowed only at the start of the document.",Ka(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Kq(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var VQe='"',UQe="'";function zQe(e,t){let r="",i="",n=!1;for(;t<e.length;t++){if(e[t]===VQe||e[t]===UQe)if(i==="")i=e[t];else{if(i!==e[t])continue;i=""}else if(e[t]===">"&&i===""){n=!0;break}r+=e[t]}return i!==""?!1:{value:r,index:t,tagClosed:n}}const BQe=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Xq(e,t){const r=ZE.getAllMatches(e,BQe),i={};for(let n=0;n<r.length;n++){if(r[n][1].length===0)return fn("InvalidAttr","Attribute '"+r[n][2]+"' has no space in starting.",qS(e,r[n][0]));if(r[n][3]===void 0&&!t.allowBooleanAttributes)return fn("InvalidAttr","boolean attribute '"+r[n][2]+"' is not allowed.",qS(e,r[n][0]));const s=r[n][2];if(!HQe(s))return fn("InvalidAttr","Attribute '"+s+"' is an invalid name.",qS(e,r[n][0]));if(!i.hasOwnProperty(s))i[s]=1;else return fn("InvalidAttr","Attribute '"+s+"' is repeated.",qS(e,r[n][0]))}return!0}function GQe(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function qQe(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,GQe(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function fn(e,t,r){return{err:{code:e,msg:t,line:r}}}function HQe(e){return ZE.isName(e)}function WQe(e){return ZE.isName(e)}function Ka(e,t){var r=e.substring(0,t).split(/\r?\n/);return r.length}function qS(e,t){return e.indexOf(t)+t.length}var Ele={};const Jl=function(e){return String.fromCharCode(e)},Ii={nilChar:Jl(176),missingChar:Jl(201),nilPremitive:Jl(175),missingPremitive:Jl(200),emptyChar:Jl(178),emptyValue:Jl(177),boundryChar:Jl(179),objStart:Jl(198),arrStart:Jl(204),arrayEnd:Jl(185)},JQe=[Ii.nilChar,Ii.nilPremitive,Ii.missingChar,Ii.missingPremitive,Ii.boundryChar,Ii.emptyChar,Ii.emptyValue,Ii.arrayEnd,Ii.objStart,Ii.arrStart],ow=function(e,t,r){if(typeof t=="string")return e&&e[0]&&e[0].val!==void 0?$A(e[0].val):$A(e);{const i=ZQe(e);if(i===!0){let n="";if(Array.isArray(t)){n+=Ii.arrStart;const s=t[0],o=e.length;if(typeof s=="string")for(let a=0;a<o;a++){const l=$A(e[a].val);n=EA(n,l)}else for(let a=0;a<o;a++){const l=ow(e[a],s,r);n=EA(n,l)}n+=Ii.arrayEnd}else{n+=Ii.objStart;const s=Object.keys(t);Array.isArray(e)&&(e=e[0]);for(let o in s){const a=s[o];let l;!r.ignoreAttributes&&e.attrsMap&&e.attrsMap[a]?l=ow(e.attrsMap[a],t[a],r):a===r.textNodeName?l=ow(e.val,t[a],r):l=ow(e.child[a],t[a],r),n=EA(n,l)}}return n}else return i}},$A=function(e){switch(e){case void 0:return Ii.missingPremitive;case null:return Ii.nilPremitive;case"":return Ii.emptyValue;default:return e}},EA=function(e,t){return!Qq(t[0])&&!Qq(e[e.length-1])&&(e+=Ii.boundryChar),e+t},Qq=function(e){return JQe.indexOf(e)!==-1};function ZQe(e){return e===void 0?Ii.missingChar:e===null?Ii.nilChar:e.child&&Object.keys(e.child).length===0&&(!e.attrsMap||Object.keys(e.attrsMap).length===0)?Ii.emptyChar:!0}const eH=cy,YQe=Qu.buildOptions,KQe=function(e,t,r){return r=YQe(r,eH.defaultOptions,eH.props),ow(e,t,r)};Ele.convert2nimn=KQe;var Ale={};const HS=Qu,XQe=Qu.buildOptions,tH=cy,QQe=function(e,t){return t=XQe(t,tH.defaultOptions,tH.props),t.indentBy=t.indentBy||"",ML(e,t)},ML=function(e,t,r){let i="{";const n=Object.keys(e.child);for(let a=0;a<n.length;a++){var s=n[a];if(e.child[s]&&e.child[s].length>1){i+='"'+s+'" : [ ';for(var o in e.child[s])i+=ML(e.child[s][o],t)+" , ";i=i.substr(0,i.length-1)+" ] "}else i+='"'+s+'" : '+ML(e.child[s][0],t)+" ,"}return HS.merge(i,e.attrsMap),HS.isEmptyObject(i)?HS.isExist(e.val)?e.val:"":(HS.isExist(e.val)&&(typeof e.val=="string"&&(e.val===""||e.val===t.cdataPositionChar)||(i+='"'+t.textNodeName+'" : '+eet(e.val))),i[i.length-1]===","&&(i=i.substr(0,i.length-2)),i+"}")};function eet(e){return e===!0||e===!1||!isNaN(e)?e:'"'+e+'"'}Ale.convertToJsonString=QQe;const tet=Qu.buildOptions,ret={attributeNamePrefix:"@_",attrNodeName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataTagName:!1,cdataPositionChar:"\\c",format:!1,indentBy:"  ",supressEmptyNode:!1,tagValueProcessor:function(e){return e},attrValueProcessor:function(e){return e}},iet=["attributeNamePrefix","attrNodeName","textNodeName","ignoreAttributes","cdataTagName","cdataPositionChar","format","indentBy","supressEmptyNode","tagValueProcessor","attrValueProcessor"];function PF(e){this.options=tet(e,ret,iet),this.options.ignoreAttributes||this.options.attrNodeName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=cet),this.options.cdataTagName?this.isCDATA=het:this.isCDATA=function(){return!1},this.replaceCDATAstr=net,this.replaceCDATAarr=set,this.options.format?(this.indentate=uet,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.supressEmptyNode?(this.buildTextNode=aet,this.buildObjNode=oet):(this.buildTextNode=iH,this.buildObjNode=rH),this.buildTextValNode=iH,this.buildObjectNode=rH}PF.prototype.parse=function(e){return this.j2x(e,0).val};PF.prototype.j2x=function(e,t){let r="",i="";const n=Object.keys(e),s=n.length;for(let o=0;o<s;o++){const a=n[o];if(!(typeof e[a]>"u"))if(e[a]===null)i+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(e[a]instanceof Date)i+=this.buildTextNode(e[a],a,"",t);else if(typeof e[a]!="object"){const l=this.isAttribute(a);l?r+=" "+l+'="'+this.options.attrValueProcessor(""+e[a])+'"':this.isCDATA(a)?e[this.options.textNodeName]?i+=this.replaceCDATAstr(e[this.options.textNodeName],e[a]):i+=this.replaceCDATAstr("",e[a]):a===this.options.textNodeName?e[this.options.cdataTagName]||(i+=this.options.tagValueProcessor(""+e[a])):i+=this.buildTextNode(e[a],a,"",t)}else if(Array.isArray(e[a]))if(this.isCDATA(a))i+=this.indentate(t),e[this.options.textNodeName]?i+=this.replaceCDATAarr(e[this.options.textNodeName],e[a]):i+=this.replaceCDATAarr("",e[a]);else{const l=e[a].length;for(let u=0;u<l;u++){const h=e[a][u];if(!(typeof h>"u"))if(h===null)i+=this.indentate(t)+"<"+a+"/"+this.tagEndChar;else if(typeof h=="object"){const d=this.j2x(h,t+1);i+=this.buildObjNode(d.val,a,d.attrStr,t)}else i+=this.buildTextNode(h,a,"",t)}}else if(this.options.attrNodeName&&a===this.options.attrNodeName){const l=Object.keys(e[a]),u=l.length;for(let h=0;h<u;h++)r+=" "+l[h]+'="'+this.options.attrValueProcessor(""+e[a][l[h]])+'"'}else{const l=this.j2x(e[a],t+1);i+=this.buildObjNode(l.val,a,l.attrStr,t)}}return{attrStr:r,val:i}};function net(e,t){return e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e===""?e+"<![CDATA["+t+"]]"+this.tagEndChar:e.replace(this.options.cdataPositionChar,"<![CDATA["+t+"]]"+this.tagEndChar)}function set(e,t){if(e=this.options.tagValueProcessor(""+e),this.options.cdataPositionChar===""||e==="")return e+"<![CDATA["+t.join("]]><![CDATA[")+"]]"+this.tagEndChar;for(let r in t)e=e.replace(this.options.cdataPositionChar,"<![CDATA["+t[r]+"]]>");return e+this.newLine}function rH(e,t,r,i){return r&&!e.includes("<")?this.indentate(i)+"<"+t+r+">"+e+"</"+t+this.tagEndChar:this.indentate(i)+"<"+t+r+this.tagEndChar+e+this.indentate(i)+"</"+t+this.tagEndChar}function oet(e,t,r,i){return e!==""?this.buildObjectNode(e,t,r,i):this.indentate(i)+"<"+t+r+"/"+this.tagEndChar}function iH(e,t,r,i){return this.indentate(i)+"<"+t+r+">"+this.options.tagValueProcessor(e)+"</"+t+this.tagEndChar}function aet(e,t,r,i){return e!==""?this.buildTextValNode(e,t,r,i):this.indentate(i)+"<"+t+r+"/"+this.tagEndChar}function uet(e){return this.options.indentBy.repeat(e)}function cet(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}function het(e){return e===this.options.cdataTagName}var det=PF;(function(e){const t=Sle,r=cy,i=cy,n=Qu.buildOptions,s=$le;e.parse=function(o,a,l){if(l){l===!0&&(l={});const h=s.validate(o,l);if(h!==!0)throw Error(h.err.msg)}a=n(a,i.defaultOptions,i.props);const u=r.getTraversalObj(o,a);return t.convertToJson(u,a)},e.convertTonimn=Ele.convert2nimn,e.getTraversalObj=r.getTraversalObj,e.convertToJson=t.convertToJson,e.convertToJsonString=Ale.convertToJsonString,e.validate=s.validate,e.j2xParser=det,e.parseToNimn=function(o,a,l){return e.convertTonimn(e.getTraversalObj(o,l),a,l)}})(xle);class pet extends Gi{async loadWfsData(t,r=-1,i=0,n=1e3,s={type:"FeatureCollection",features:[]},o=!1){let a={startindex:i.toString(),limit:n.toString()};r===-1&&(a={resulttype:"hits"});const u=new KI(t).updateQuery(a),[h,d]=await ly(kQe.get(u));if(!d)return console.error(`WFS data failed to load for ${t}`,h),Promise.reject(h);const f=d.data;if(r===-1)return r=d.data.numberMatched,this.loadWfsData(t,r,i,n,s,o);if(s.features=[...s.features,...f.features],f.features.length<r-i){const m=Math.min(1e3,r-i-f.features.length);return this.loadWfsData(u,r,f.features.length+i,m,s,o)}else return o&&s.features.length>0&&s.features[0].geometry.type==="Point"&&s.features.forEach(m=>{const g=m.geometry.coordinates;m.properties.rvInternalCoordX=g[0],m.properties.rvInternalCoordY=g[1]}),s}reversedAxisWKIDs(){return oXe}parseCapabilities(t){const r=()=>{let o=t;if(t.indexOf("?")===-1)o+="?service=WMS&request=GetCapabilities";else{const a=new KI(t.toUpperCase());"SERVICE"in a.queryMap||(o+="&service=WMS"),"REQUEST"in a.queryMap||(o+="&request=GetCapabilities")}return Ee(o,{responseType:"xml"}).then(a=>a.data)},i=new Promise(o=>{r().then(a=>o(a)).catch(()=>{console.error("Get capabilities failed; trying the second time;"),o(r())})}),n=o=>{let a=o.Layer;return a?(Array.isArray(a)||(a=[a]),a.map(l=>{const u=l.Name,h=l.Title;let d=l.Style;const f=[],m={};return d&&(Array.isArray(d)||(d=[d]),d.forEach(g=>{const b=g.Name;if(f.push(b),g.LegendURL){const _=g.LegendURL.OnlineResource["@_xlink:href"];m[b]=_.replaceAll("&amp;","&")}})),{name:u||null,title:h,queryable:l["@_queryable"]==="1",layers:n(l),allStyles:f,styleToURL:m,currentStyle:f[0]}})):[]},s=o=>{let a=o.Format;return Array.isArray(a)||(a=[a]),a};return i.then(o=>{if(!o)return[];const a=new XMLSerializer().serializeToString(o),l={ignoreAttributes:!1},u=xle.parse(a,l);if("ServiceExceptionReport"in u)return console.error(u.ServiceExceptionReport.ServiceException),[];const h=u.WMS_Capabilities.Capability;return{layers:n(h),queryTypes:s(h.Request.GetFeatureInfo)}})}}class fet extends Gi{files;ogc;constructor(t){super(t),this.files=new sXe(t),this.ogc=new pet(t)}createLayer(t){let r;switch(t.layerType){case yr.FEATURE:r=wet;break;case yr.MAPIMAGE:r=_et;break;case yr.GRAPHIC:r=yet;break;case yr.TILE:r=Iet;break;case yr.WFS:r=$et;break;case yr.WMS:r=Tet;break;case yr.GEOJSON:r=get;break;case yr.CSV:r=bet;break;case yr.SHAPEFILE:r=vet;break;case yr.OSM:r=Met;break;default:throw new Error("Unsupported Layer Type "+t.layerType)}return new r(t,this.$iApi)}getLayer(t){let r;return r=this.$iApi.$vApp.$store.get(ks.getLayerById,t),r||(r=this.$iApi.$vApp.$store.get(ks.getLayerByUid,t)),r}allLayers(){return this.$vApp.$store.get(ks.layers)||[]}getLayerControls(t){const r=this.getLayer(t);if(!r)return;const i=r.config.controls?.slice()??[fi.BoundaryZoom,fi.Boundingbox,fi.Datatable,fi.Identify,fi.Metadata,fi.Opacity,fi.Refresh,fi.Reload,fi.Remove,fi.Settings,fi.Symbology,fi.Visibility];let n=[];return r.supportsFeatures||n.push(fi.Datatable),r.extent===void 0&&n.push(fi.BoundaryZoom),(r.config?.metadata||(r.isSublayer?r.parentLayer?.config?.metadata:{})||{}).url||n.push(fi.Metadata),n.forEach(o=>{let a=i?.indexOf(o)??-1;a!==-1&&i?.splice(a,1)}),{controls:i,disabledControls:r.config.disabledControls??[]}}}class Cle extends Gi{config={};id;uid;initialized;state;drawState;layerIdx;layerType;layerFormat;dataFormat;supportsIdentify;supportsFeatures;supportsSublayers;isSublayer;isRemoved;isFile;isCosmetic;userAdded;identify;hovertips;esriLayer;esriSubLayer;esriView;extent;_parentLayer;_sublayers;constructor(t,r){super(r),this.config=t,this.id="",this.uid="",this.initialized=!1,this.state=Xa.NEW,this.drawState=Yf.NOT_LOADED,this.layerIdx=-1,this.layerFormat=Rl.UNKNOWN,this.layerType=yr.UNKNOWN,this.dataFormat=To.UNKNOWN,this.supportsIdentify=!1,this.supportsFeatures=!1,this.supportsSublayers=!1,this.isSublayer=!1,this.isRemoved=!1,this.isFile=!1,this.isCosmetic=t.cosmetic||!1,this.userAdded=!1,this.identify=!1,this.hovertips=t.state?.hovertips??!0,this._sublayers=[]}async initiate(){return Promise.resolve()}async terminate(){return Promise.resolve()}async reload(){return Promise.resolve()}isLayerLoaded(){return Promise.resolve()}get isValidState(){return!1}getLayerTree(){return new E_(0,"Fake tree","getLayerTree() was not implemented in layer")}get name(){return"error"}set name(t){}get visibility(){return!1}set visibility(t){}get opacity(){return 0}set opacity(t){}get scaleSet(){return new Xre}set scaleSet(t){}isOffscale(t=void 0){return!1}zoomToVisibleScale(){return Promise.resolve()}zoomToLayerBoundary(){return Promise.resolve()}get legend(){return[]}set legend(t){}get fields(){return[]}set fields(t){}get geomType(){return"error"}set geomType(t){}get nameField(){return"error"}set nameField(t){}get oidField(){return"error"}set oidField(t){}get featureCount(){return-1}set featureCount(t){}get clickTolerance(){return 0}set clickTolerance(t){}runIdentify(t){return[]}getAttributes(t=void 0){return Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){}destroyAttributes(){}getTabularAttributes(){return Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return Promise.resolve(new hh(new a1))}getIcon(t){return Promise.resolve("")}getSqlFilter(t){return""}setSqlFilter(t,r){}applySqlFilter(t=[]){}getFilterOIDs(t=[],r=void 0){return Promise.resolve(void 0)}get parentLayer(){if(this.isSublayer)return this._parentLayer;throw new Error("Attempted to get parent layer of a non-sublayer object")}set parentLayer(t){if(!this.isSublayer&&t)throw new Error("Attempted to set parent layer for a non-sublayer object");this._parentLayer=t}get sublayers(){return this._sublayers}onLoad(){}updateState(t){}updateDrawState(t){}uidToIdx(t){if(t===this.uid)return-1;{const r=this._sublayers.findIndex(i=>i?.uid===t);if(r===-1)throw new Error(`Attempt to access non-existing unique id [layerid ${this.id}, uid ${t}]`);return r}}getSublayer(t){if(!this.supportsSublayers){console.warn(`Attempted to call getSublayer on a layer (layer id: ${this.id}) that does not support FCs`);return}let r;if(typeof t=="string"?r=this.uidToIdx(t):r=t,this._sublayers[r]===void 0)throw new Error(`Attempt to access non-existing layer index [layerid ${this.id}, lookup value ${t}]`);return this._sublayers[r]}controlAvailable(t){const r=this.$iApi.geo.layer.getLayerControls(this.id);return r?.disabledControls?.includes(t)?!1:r?.controls.includes(t)??!1}}class sx extends Cle{_name;_scaleSet;_legend;_clickTolerance;_featureCount;_fields;_geomType;_nameField;_oidField;_lastFilterUpdate="";origRampConfig;loadPromise;viewPromise;layerTree;esriWatches;constructor(t,r){super(t,r),this._name=t.name||"",this._scaleSet=new Xre,this._legend=[],this._featureCount=-1,this._clickTolerance=t.tolerance!=null?t.tolerance:5,this._fields=[],this._geomType="error",this._nameField="error",this._oidField="error",this.dataFormat=To.UNKNOWN,this.layerType=yr.UNKNOWN,this.layerFormat=Rl.UNKNOWN,this.origRampConfig=t,this.id=t.id||"",this.uid=this.$iApi.geo.shared.generateUUID(),this.isRemoved=!1,this.isSublayer=!1,this.supportsIdentify=!1,this.supportsFeatures=!1,this.supportsSublayers=!1,this.isFile=!1,this.initialized=!1,this.state=Xa.NEW,this.drawState=Yf.NOT_LOADED,this.loadPromise=new Mo,this.viewPromise=new Mo,this.esriWatches=[],this.layerTree=new E_(0,this.uid,this.name,!0)}noLayerErr(){console.error("Attempted to manipulate the layer before .initiate() finished"),console.trace()}updateState(t){this.state=t,this.$iApi.event.emit(vt.LAYER_STATECHANGE,{state:t,layer:this})}updateDrawState(t){this.drawState=t,this.$iApi.event.emit(vt.LAYER_DRAWSTATECHANGE,{state:t,layer:this})}async initiate(){if(this.isSublayer)return console.warn("Attempted to initiate a sublayer as a CommonLayer"),Promise.resolve();if(!this.esriLayer){this.noLayerErr();return}this.initialized&&console.error(`Encountered layer initialize while already initialized, layer id ${this.id}`),this.esriWatches.push(this.esriLayer.watch("visible",t=>{this.$iApi.event.emit(vt.LAYER_VISIBILITYCHANGE,{visibility:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("opacity",t=>{this.$iApi.event.emit(vt.LAYER_OPACITYCHANGE,{opacity:t,layer:this})})),this.esriWatches.push(this.esriLayer.watch("loadStatus",t=>{const r={"not-loaded":Xa.LOADING,loading:Xa.LOADING,loaded:Xa.LOADED,failed:Xa.ERROR};t==="loaded"?this.onLoad():this.updateState(r[t])})),this.esriLayer.on("layerview-create",t=>{this.esriView=t.layerView,this.esriWatches.push(t.layerView.watch("updating",r=>{this.updateDrawState(r?Yf.REFRESH:Yf.UP_TO_DATE)})),this.viewPromise.resolveMe()}),this.initialized=!0,this.sublayers.forEach(t=>t.initiate())}async terminate(){this.sublayers.forEach(t=>t.terminate()),this.loadPromise=new Mo,this.viewPromise=new Mo,this.esriWatches.forEach(t=>t.remove()),this.esriWatches=[],this.updateState(Xa.NEW),this.updateDrawState(Yf.NOT_LOADED),this.initialized=!1}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}let t=0;if(this.initialized){if(this.esriLayer){const r=this.$iApi.geo.map.esriMap.layers.findIndex(i=>i.id===this.id);r>-1&&(t=r,this.$iApi.geo.map.esriMap.layers.remove(this.esriLayer))}this.$iApi.event.emit(vt.LAYER_RELOAD_START,this),this.sublayers.forEach(r=>this.$iApi.event.emit(vt.LAYER_RELOAD_START,r)),await this.terminate()}if(await this.initiate(),!this.esriLayer){console.error("ESRI layer failed to re-create during reload.");return}this.$iApi.geo.map.esriMap.layers.add(this.esriLayer,t),this.$iApi.event.emit(vt.LAYER_RELOAD_END,this),this.sublayers.forEach(r=>this.$iApi.event.emit(vt.LAYER_RELOAD_END,r))}makeEsriLayerConfig(t){return{id:t.id,url:t.url,opacity:t?.state?.opacity??1,visible:t?.state?.visibility??!0}}onLoad(){const t=this.onLoadActions();Promise.all(t).then(()=>{this.updateState(Xa.LOADED),this.loadPromise.resolveMe(),this.sublayers.forEach(r=>r.onLoad())})}onLoadActions(){return this._name||(this._name=this.esriLayer?.title||this.id),this.identify=this.config.state?.identify!=null?this.config.state.identify:this.supportsIdentify,[this.$iApi.geo.proj.checkProj(this.esriLayer.spatialReference).then(r=>r?Promise.resolve():(this.updateState(Xa.ERROR),Promise.reject()))]}isLayerLoaded(){return this.loadPromise.getPromise()}get isValidState(){return this.state===Xa.LOADED}mapCheck(){}get name(){return this._name}set name(t){this._name=t}get scaleSet(){return this._scaleSet}set scaleSet(t){this._scaleSet=t}isOffscale(t=void 0){let r;return typeof t>"u"?(this.mapCheck(),r=this.$iApi.geo.map.getScale()):r=t,this.scaleSet.isOffScale(r).offScale}zoomToVisibleScale(){return this.mapCheck(),this.$iApi.geo.map.zoomToVisibleScale(this.scaleSet)}zoomToLayerBoundary(){if(!this.extent)throw new Error(`Attempted to zoom to boundary of a layer with no extent (Layer Id: ${this.id})`);return this.mapCheck(),this.$iApi.geo.map.zoomMapTo(this.extent)}get legend(){return this._legend}set legend(t){this._legend=t}get featureCount(){return this._featureCount}set featureCount(t){this._featureCount=t}get clickTolerance(){return this._clickTolerance}set clickTolerance(t){if(!this.supportsIdentify){console.warn("Attempted to set click tolerance on a layer that doesn't support identify");return}if(t<0){console.error("Attempted to set a negative click tolerance");return}this._clickTolerance=t}get fields(){return this._fields}set fields(t){this._fields=t}get geomType(){return this._geomType}set geomType(t){this._geomType=t}get nameField(){return this._nameField}set nameField(t){this._nameField=t}get oidField(){return this._oidField}set oidField(t){this._oidField=t}getLayerTree(){return this.layerTree?this.layerTree:(this.noLayerErr(),new E_(0,"YOU DID AN ERROR","Error, check your console pls"))}get visibility(){return this.esriLayer?this.esriLayer.visible:(this.noLayerErr(),!1)}set visibility(t){this.esriLayer?this.esriLayer.visible=t:this.noLayerErr()}checkVisibility(){this.supportsSublayers&&(this.visibility=this.sublayers.some(t=>t.visibility))}get opacity(){return this.esriLayer?this.esriLayer.opacity:(this.noLayerErr(),0)}set opacity(t){this.esriLayer?this.esriLayer.opacity=t:this.noLayerErr()}stubError(){throw new Error(`Attempted to use a method not valid for ${this.layerType}`)}getAttributes(){return this.stubError(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.stubError()}destroyAttributes(){this.stubError()}getTabularAttributes(){return this.stubError(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return this.stubError(),Promise.resolve(new hh(new a1))}getIcon(t){return this.stubError(),Promise.resolve("")}getSqlFilter(t){return this.stubError(),""}setSqlFilter(t,r){this.stubError()}getFilterOIDs(t=[],r=void 0){return this.stubError(),Promise.resolve(void 0)}applySqlFilter(t=[]){this.stubError()}setCustomParameter(t,r,i=!0){this.stubError()}}class YE extends sx{geomType;esriFields;fieldList;attLoader;renderer;serviceUrl;quickCache;filter;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.geomType=Vt.UNKNOWN,this.serviceUrl="",this.fieldList="",this.esriFields=[],this.filter=new BRe}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}async loadLayerMetadata(t={}){if(!this.serviceUrl)return;const[r,i]=await ly(Ee(this.serviceUrl,{query:{f:"json"}}));if(!i)return console.error(`Service metadata load error: ${this.serviceUrl}`,r),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));if(!i.data)return console.error(`Service metadata load error: ${this.serviceUrl}`),Promise.reject(new Error(`Service metadata load error: ${this.serviceUrl}`));const n=i.data;if(this.geomType=this.$iApi.geo.geom.serverGeomTypeToRampGeomType(n.geometryType),this.quickCache=new Ole(this.geomType),this.scaleSet.minScale=n.effectiveMinScale||n.minScale,this.scaleSet.maxScale=n.effectiveMaxScale||n.maxScale,this.supportsFeatures=!1,this.extent=n.extent?Ei.fromArcServer(n.extent,this.id+"_extent"):void 0,n.type==="Feature Layer"){this.supportsFeatures=!0,this.dataFormat=To.ESRI_FEATURE,this.esriFields=Gn(n.fields.map(l=>wo.fromJSON(l))),this.nameField=n.displayField,this.esriFields.every(l=>l.type==="oid"?(this.oidField=l.name,!1):!0)&&(this.oidField=n.objectIdField||(()=>(console.error(`Encountered service with no OID defined: ${this.serviceUrl}`),""))());const o=t&&t.customRenderer&&t.customRenderer.type?t.customRenderer:W0(n.drawingInfo.renderer);this.renderer=this.$iApi.geo.symbology.makeRenderer(o,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const a={supportsLimit:(n.currentVersion||1)>=10.1,serviceUrl:this.serviceUrl,oidField:this.oidField,batchSize:-1,attribs:"*"};this.attLoader=new Aet(this.$iApi,a)}else this.dataFormat=To.ESRI_RASTER,this.esriFields=[]}processFieldMetadata(t=void 0){if(!t){this.fieldList="*";return}if(!t.fieldInfo)throw new Error("processFieldMetadata called before fieldInfo was set on config metadata");if(t.exclusiveFields){t.fieldInfo.find(i=>i.name===this.oidField)||t.fieldInfo.push({name:this.oidField}),this.fieldList=t.fieldInfo.map(i=>i.name).join(",");const r=t.fieldInfo;this.esriFields=this.esriFields.filter(i=>r.find(n=>n.name===i.name))}else this.fieldList="*";t.fieldInfo.forEach(r=>{if(r.alias){const i=this.esriFields.find(n=>n.name===r.name);i&&(i.alias=r.alias)}})}getAttributes(){return this.attLoader?this.attLoader.getAttribs():(this.noLayerErr(),Promise.resolve({oidIndex:{},features:[]}))}get fields(){return this.esriFields.map(t=>(t=it(t),{name:t.name,alias:t.alias,type:t.type,length:t.length}))}set fields(t){super.fields=t}abortAttributeLoad(){this.attLoader?this.attLoader.abortAttribLoad():this.noLayerErr()}destroyAttributes(){this.attLoader?this.attLoader.destroyAttribs():this.noLayerErr()}getTabularAttributes(){if(!this.attLoader)throw new Error("getTabularAttributes call with missing attribute loader");return this.attLoader.tabularAttributesCache||(this.attLoader.tabularAttributesCache=this.getTabularAttributesGuts()),this.attLoader.tabularAttributesCache}async getTabularAttributesGuts(){if(!this.attLoader)throw new Error("getTabularAttributesGuts call with missing attribute loader");if(this.dataFormat===To.ESRI_RASTER)throw new Error("Attempting to get attributes on a raster layer.");const t=await this.attLoader.getAttribs(),r=this.esriFields.filter(n=>t.features[0].hasOwnProperty(it(n).name)).map(n=>({data:it(n).name,title:it(n).alias||it(n).name})),i=t.features.map(n=>{const s=eie({},n);return s.rvInteractive="",s.rvSymbol=this.renderer?.getGraphicIcon(n),s});return r.forEach(n=>{if(n.data.substr(-2)==="()"){const s=function(){return this[n.data]},o=n.data.substr(0,n.data.length-2);i.forEach(a=>{a[o]=s})}}),{columns:r,rows:i,fields:this.fields,oidField:this.oidField}}async getGraphic(t,r){let i={},n=new a1;const s=this.$iApi.geo.map;if(!this.quickCache)throw new Error("getGraphic call with missing quickCache");if(!this.attLoader)throw new Error("getGraphic call with missing attribute loader");let o=!1,a=!1,l=0;if(r.getAttribs||r.getStyle){let h=this.quickCache.getAttribs(t);if(h)i=h;else if(this.attLoader.isLoaded||this.isFile){const d=await this.attLoader.getAttribs();i=d.features[d.oidIndex[t]]}else o=!0}if(r.getGeom){l=s.getScale();const h=this.quickCache.getGeom(t,l);h?n=h:a=!0}if(o||a){const h={oid:t,serviceUrl:this.serviceUrl,includeGeometry:a,attribs:this.fieldList};a&&(h.mapSR=s.getSR().wkid?.toString(),this.quickCache.isPoint||(h.maxOffset=s.esriView?.resolution));const d=await this.$iApi.geo.attributes.loadSingleFeature(h);a&&(this.quickCache.setGeom(t,d.geometry,l),n=d.geometry),(o||typeof this.quickCache.getAttribs(t)>"u")&&(this.quickCache.setAttribs(t,d.attributes),o&&(i=d.attributes))}const u=new hh(n,"",r.getAttribs?i:void 0);if(r.getStyle){const h=it(this.renderer.getGraphicSymbol(i));u.style=this.$iApi.geo.geom.styleEsriToRamp(h)}return u}async getIcon(t){if(!this.renderer)throw new Error("getIcon called before renderer is defined");const r=await this.getGraphic(t,{getAttribs:!0});return this.$iApi.geo.symbology.getGraphicIcon(r.attributes||{},this.renderer)}setSqlFilter(t,r){const i=this.filter.getSql(t);if(r===i)return;this.filter.setSql(t,r),this.$iApi.event.emit(vt.FILTER_CHANGE,{uid:this.uid,filterKey:t});const n=`${this.uid}-${t}-${r}`;this._lastFilterUpdate=n,setTimeout(()=>{this._lastFilterUpdate===n&&this.applySqlFilter()},100)}applySqlFilter(t=[]){throw new Error("attempted to apply sql filter to a layer not equipped for it. likely a new subclass of AttribFC did not override applySqlFilter")}getSqlFilter(t){return this.filter.getSql(t)}getCombinedSqlFilter(t){return this.filter.getCombinedSql(t)}async getFilterOIDs(t=[],r=void 0){const i=this.filter.getCombinedSql(t),n=!!r;if(!(i||n))return;r&&this.filter.setExtent(r);const s=this.filter.sqlActiveFilters(t);let o=this.filter.getCache(s,n);if(!o){const a={filterGeometry:r,filterSql:i,includeGeometry:!1};o=this.queryOIDs(a),this.filter.setCache(o,s,n)}return o}async loadFeatureCount(){if(!this.serviceUrl)return;const t={query:{f:"json",where:"1=1",returnCountOnly:!0,returnGeometry:!1}},[r,i]=await ly(Ee(`${this.serviceUrl}/query`,t));if(!i){console.warn(`Feature count request unsuccessful: ${this.serviceUrl}`,r);return}if(!i.data){console.warn(`Unable to load feature count: ${this.serviceUrl}`);return}this.featureCount=i.data.count}queryOIDs(t){this.isFile&&(console.error("a file layer called a server based query function"),console.trace());const r={url:this.serviceUrl,...t};return this.$iApi.geo.query.arcGisServerQueryIds(r)}async queryFeaturesDiscrete(t){t.outFields||(t.outFields=this.fieldList);const r=await this.queryOIDs(t),i={getGeom:!!t.includeGeometry,getAttribs:!0};return r.map(n=>({oid:n,graphic:this.getGraphic(n,i)}))}async queryFeatures(t){const r=await this.queryFeaturesDiscrete(t);return Promise.all(r.map(i=>i.graphic))}}class met extends sx{constructor(t,r){super(t,r),this.dataFormat=To.ESRI_FEATURE,this.layerFormat=Rl.GRAPHIC,this.hovertips=!1}_graphics=[];makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}getFeatureCount(){return this._graphics.length}getLocalGraphic(t){return this._graphics.find(r=>r.id===t)}notLoadedErr(){console.error("Attempted to manipulate the layer before it was loaded"),console.trace()}get graphics(){return this._graphics.slice()}async addGraphic(t){if(!this.esriLayer){this.noLayerErr();return}let r;t instanceof Array?r=t:r=[t];const i=r.filter(l=>this._graphics.findIndex(h=>h.id===l.id)===-1?(this._graphics.push(l),!0):(console.error(`Attempting to add graphic with id '${l.id}' that has already been added.`),!1)),n=this.$iApi.geo.map.getSR(),s=i.map(l=>this.$iApi.geo.proj.projectGeometry(n,l.geometry)),o=await Promise.all(s),a=i.map((l,u)=>{const h=new hh(o[u],l.id,l.attributes);return h.style=l.style,this.$iApi.geo.geom.graphicRampToEsri(h)});this.esriLayer.addMany(a)}removeGraphic(t){if(!this.esriLayer){this.noLayerErr();return}if(typeof t>"u"){this.esriLayer.removeAll();return}let r;Array.isArray(t)?r=t:r=[t];const i=r.map(s=>typeof s=="string"?s:s.id),n=[];i.forEach(s=>{const o=this.esriLayer?.graphics.find(a=>a.id===s);if(o){n.push(o);const a=this._graphics.findIndex(l=>l.id===s);a&&this._graphics.splice(a,1)}}),this.esriLayer.removeMany(n)}}class yet extends met{constructor(t,r){super(t,r),this.layerType=yr.GRAPHIC}async initiate(){this.esriLayer=Gn(new Bbe(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();return this.layerTree.name=this.name,this.updateDrawState(Yf.UP_TO_DATE),t}}function nH(e,t){if(e.findIndex(r=>r.name===t)===-1){const r=e.find(i=>i.alias===t);return r?r.name:(console.warn(`Cannot find name field in layer field list: ${t}`),"OBJECTID")}else return t}class KE extends YE{esriJson;sourceGeoJson;tooltipField;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.isFile=!0,this.dataFormat=To.ESRI_FEATURE,this.layerFormat=Rl.FEATURE,this.tooltipField=""}async initiate(){const t=typeof this.sourceGeoJson=="string"?JSON.parse(this.sourceGeoJson):this.sourceGeoJson,r={layerId:this.origRampConfig.id||"",targetSR:this.$iApi.geo.map.getSR(),...this.origRampConfig.latField&&{latField:this.origRampConfig.latField},...this.origRampConfig.longField&&{lonField:this.origRampConfig.longField}};this.esriJson=await this.$iApi.geo.layer.files.geoJsonToEsriJson(t,r),this.esriLayer=Gn(new M$(this.makeEsriLayerConfig(this.origRampConfig))),this.esriJson=void 0,await super.initiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return["source","objectIdField","id","fields","renderer","spatialReference","geometryType"].forEach(n=>{r[n]=this.esriJson[n]}),r.displayField=nH(r.fields,this.origRampConfig.nameField||"")||"OBJECTID",r.outFields=["*"],this.esriJson=void 0,delete r.url,r}onLoadActions(){const t=super.onLoadActions();if(this.esriLayer&&this.origRampConfig.customRenderer?.type&&(this.esriLayer.renderer=W0(this.config.customRenderer)),this.layerTree.name=this.name,this.extractLayerMetadata(),this.origRampConfig.tooltipField?this.tooltipField=nH(this.esriFields,this.origRampConfig.tooltipField):this.tooltipField=this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),!this.attLoader)throw new Error("file fc did not have attribute loader object");return this.attLoader.updateFieldList(this.fieldList),this.featureCount=this.esriLayer?.source.length||0,t.push(this.viewPromise.getPromise()),t}runIdentify(t){const r=this.$iApi.geo.map;if(!this.isValidState||!this.visibility||!this.identify||this.scaleSet.isOffScale(r.getScale()).offScale)return[];const i=new Mo,n=eo({items:[],loading:i.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()}),s={outFields:this.fieldList,includeGeometry:!1};return this.geomType!==Vt.POLYGON&&t.geometry.type===Vt.POINT?s.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):s.filterGeometry=t.geometry,s.filterSql=this.getCombinedSqlFilter(),this.queryFeatures(s).then(o=>{o.forEach(a=>{const l=eo({data:a.attributes,format:mm.ESRI,loaded:!0,loading:Promise.resolve()});n.items.push(l)}),n.loaded=!0,i.resolveMe()}),[n]}extractLayerMetadata(){const t=this.esriLayer;if(!t)throw new Error("file layer attempted to extract data from esri layer, esri layer did not exist");this.supportsFeatures=!0,this.geomType=this.$iApi.geo.geom.clientGeomTypeToRampGeomType(t.geometryType),this.quickCache=new Ole(this.geomType),this.scaleSet.minScale=t.minScale||0,this.scaleSet.maxScale=t.maxScale||0,this.extent=Ei.fromESRI(t.fullExtent,this.id+"_extent"),this.esriFields=t.fields,this.nameField=t.displayField,this.oidField=t.objectIdField,this.renderer=this.$iApi.geo.symbology.makeRenderer(t.renderer,this.esriFields),this.legend=this.$iApi.geo.symbology.rendererToLegend(this.renderer);const r={sourceGraphics:t.source,oidField:this.oidField,attribs:"*",batchSize:-1};this.attLoader=new Cet(this.$iApi,r)}async getGraphic(t,r){const i={filterSql:`${this.oidField}=${t}`,includeGeometry:!!r.getGeom},n=await this.queryFeatures(i);if(n.length===0)throw new Error(`Could not find object id ${t}`);n.length!==1&&console.warn("did not get a single result on a query for a specific object id");const s=n[0];if(r.getStyle){const o=it(this.renderer.getGraphicSymbol(s.attributes));s.style=this.$iApi.geo.geom.styleEsriToRamp(o)}return s}async queryFeatures(t){const r={layer:this,...t};return this.$iApi.geo.query.geoJsonQuery(r)}async queryOIDs(t){const r={layer:this,...t};return(await this.$iApi.geo.query.geoJsonQuery(r)).map(n=>n.attributes?n.attributes[this.oidField]:-1)}applySqlFilter(t=[]){if(!this.esriView){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);it(this.esriView).filter=new LY({where:r})}}class get extends KE{constructor(t,r){super(t,r),this.layerType=yr.GEOJSON}async initiate(){if(this.origRampConfig.rawData)this.sourceGeoJson=this.origRampConfig.rawData;else if(this.origRampConfig.url)this.sourceGeoJson="error remote file geojson loader not yet implemented";else throw new Error("GeoJson layer config contains no raw data or url");await super.initiate()}}class vet extends KE{constructor(t,r){super(t,r),this.layerType=yr.SHAPEFILE}async initiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("shapefile file config missing lat or long field names");let t;if(this.origRampConfig.rawData)t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t="error remote file shapefile loader not yet implemented";else throw new Error("shapefile file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.shapefileToGeoJson(t),await super.initiate()}}class bet extends KE{constructor(t,r){super(t,r),this.layerType=yr.CSV}async initiate(){if(!this.origRampConfig.latField||!this.origRampConfig.longField)throw new Error("csv file config missing lat or long field names");let t;if(this.origRampConfig.rawData)t=this.origRampConfig.rawData;else if(this.origRampConfig.url)t="error remote file csv loader not yet implemented";else throw new Error("Csv file config contains no raw data or url");this.sourceGeoJson=await this.$iApi.geo.layer.files.csvToGeoJson(t,{latfield:this.origRampConfig.latField,lonfield:this.origRampConfig.longField}),await super.initiate()}}class wet extends YE{tooltipField;constructor(t,r){super(t,r),this.dataFormat=To.ESRI_FEATURE,this.tooltipField="",this.supportsIdentify=!0,this.layerType=yr.FEATURE,this.layerFormat=Rl.FEATURE}async initiate(){Gn(this.esriLayer=new M$(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return t.initialFilteredQuery&&(r.definitionExpression=t.initialFilteredQuery),r}onLoadActions(){const t=super.onLoadActions(),r=this.esriLayer&&this.origRampConfig.customRenderer?.type;r&&(this.esriLayer.renderer=W0(this.config.customRenderer));const i=this.esriLayer.parsedUrl.path,s=this.$iApi.geo.shared.parseUrlIndex(i).index||0;this.serviceUrl=i,this.layerTree.name=this.name,this.layerTree.layerIdx=s;const o=this.loadLayerMetadata(r?{customRenderer:this.esriLayer?.renderer}:{}).then(()=>{if(!this.attLoader)throw new Error("layer metadata loader did not create attribute loader");this.nameField=this.origRampConfig.nameField||this.nameField||"",this.tooltipField=this.origRampConfig.tooltipField||this.nameField,this.processFieldMetadata(this.origRampConfig.fieldMetadata),this.attLoader.updateFieldList(this.fieldList)}),a=this.loadFeatureCount();return t.push(o,a),t}runIdentify(t){if(!this.isValidState||!this.visibility||!this.identify||this.scaleSet.isOffScale(this.$iApi.geo.map.getScale()).offScale)return[];const r=new Mo,i=eo({items:[],loading:r.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()}),n={outFields:this.fieldList,includeGeometry:!1};return this.geomType!==Vt.POLYGON&&t.geometry.type===Vt.POINT?n.filterGeometry=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance):n.filterGeometry=t.geometry,n.filterSql=this.getCombinedSqlFilter(),this.queryFeaturesDiscrete(n).then(s=>{s.forEach(o=>{const a=eo({data:void 0,format:mm.ESRI,loaded:!1,loading:new Promise(l=>{o.graphic.then(u=>{a.data=u.attributes,a.loaded=!0,l()})})});i.items.push(a)}),i.loaded=!0,r.resolveMe()}),[i]}applySqlFilter(t=[]){if(!this.esriLayer){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);this.esriLayer.definitionExpression=r}}class _et extends YE{isDynamic;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.supportsSublayers=!0,this.layerType=yr.MAPIMAGE,this.layerFormat=Rl.MAPIMAGE,this.isDynamic=!1,this.hovertips=!1,this.layerTree.layerIdx=-1}async initiate(){this.esriLayer=Gn(new w6(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t);return r.visible=!1,r}onLoadActions(){const t=super.onLoadActions();if(!this.esriLayer)return this.noLayerErr(),t;this.layerTree.name=this.name,this.isLayerLoaded().then(()=>{this.origRampConfig&&this.origRampConfig.state&&(this.visibility=!!this.origRampConfig.state.visibility)}),this.isDynamic=this.esriLayer.capabilities.exportMap.supportsDynamicLayers,this.extent=Ei.fromESRI(this.esriLayer.fullExtent,this.id+"_extent");const r=o=>{const a=this.esriLayer?.allSublayers.find(l=>l.id===o);if(!a)throw new Error("attempt to find map image sublayer failed");return a},i={};this.origRampConfig.layerEntries.forEach(o=>{i[o.index||0]=o});const n=[],s=(o,a)=>{const l=o.id,u=i[l];if(o.sublayers&&o.sublayers.length>0){const h=(u?u.name:"")||o.title||"",d=new E_(l,"",h,!1);a.children.push(d),o.sublayers.forEach(f=>{s(f,d)})}else{this._sublayers[l]||(this._sublayers[l]=new xet({layerType:yr.SUBLAYER,state:i[l]?.state??{opacity:this.opacity,visibility:this.visibility,hovertips:this.hovertips,identify:this.identify},controls:i[l]?.controls,disabledControls:i[l]?.disabledControls},this.$iApi,this,l));let h=this._sublayers[l];if(h.isRemoved)return;const d=(u?u.name:"")||o.title||"";if(h.name=d,n.push(h),!a.children.map(f=>f.layerIdx).includes(l)||!h.initialized){const f=new E_(l,h.uid,h.name,!1);a.children.push(f)}h.esriWatches.push(o.watch("visible",()=>{this.$iApi.event.emit(vt.LAYER_VISIBILITYCHANGE,{visibility:h.visibility,layer:h}),h.parentLayer?.checkVisibility()}),o.watch("opacity",f=>{this.$iApi.event.emit(vt.LAYER_OPACITYCHANGE,{opacity:f,layer:h})}))}};if(this.origRampConfig.layerEntries.forEach(o=>{if(!o.stateOnly){const a=r(o.index||0);s(a,this.layerTree)}}),n.forEach(o=>{const a=r(o.layerIdx),l=i[o.layerIdx];o.serviceUrl=a.url,o.fetchEsriSublayer(this);const u=o.esriSubLayer&&l?.customRenderer?.type;u&&(o.esriSubLayer.renderer=W0(l.customRenderer));const h=o.loadLayerMetadata(u?{customRenderer:o.esriSubLayer?.renderer}:{}).then(()=>{const d=i[o.layerIdx];if(d?(o.visibility=d.state?.visibility||!0,o.opacity=d.state?.opacity||1,o.nameField=d.nameField||o.nameField||"",o.processFieldMetadata(d.fieldMetadata)):o.processFieldMetadata(),o.supportsFeatures){if(!o.attLoader)throw new Error("Map Image Sublayer - expected attLoader to exist");return o.attLoader.updateFieldList(o.fieldList),o.loadFeatureCount()}else return Promise.resolve()});t.push(h)}),this.esriLayer.allSublayers.forEach(o=>{!o.sublayers&&!n.find(a=>a.layerIdx===o.id)&&(o.visible=!1,o.opacity=0)}),!this.name){const a=Ee(this.esriLayer.url,{query:{f:"json"}}).then(l=>{l.data?(this.name=l.data.mapName||"",this.layerTree.name=this.name):(this.name="[server error]",this.layerTree.name="[server error]",console.error(`Get map name service failed: ${this.esriLayer.url}`))});t.push(a)}return t}updateState(t){super.updateState(t),this.sublayers.forEach(r=>r.updateState(t))}updateDrawState(t){super.updateDrawState(t),this.sublayers.forEach(r=>r.updateDrawState(t))}runIdentify(t){if(!this.isValidState||!this.visibility)return[];const r=this.$iApi.geo.map;t.sublayerIds&&(t.sublayerIds=t.sublayerIds.map(o=>typeof o=="number"?this.layerTree?.findChildByIdx(o)?.uid:o));const i=t.sublayerIds?this._sublayers.filter(o=>t.sublayerIds?.includes(o.uid)):this._sublayers.filter(o=>o.visibility&&o.supportsFeatures&&o.identify&&!o.scaleSet.isOffScale(r.getScale()).offScale);if(i.length===0)return[];const n={includeGeometry:t.returnGeometry};let s;return t.geometry.type===Vt.POINT&&(s=this.$iApi.geo.query.makeClickBuffer(t.geometry,t.tolerance)),i.map(o=>{const a=new Mo,l=eo({items:[],loading:a.getPromise(),loaded:!1,uid:o.uid,requestTime:Date.now()});return o.geomType!==Vt.POLYGON&&s?n.filterGeometry=s:n.filterGeometry=t.geometry,n.outFields=o.fieldList,n.filterSql=o.getCombinedSqlFilter(),o.queryFeaturesDiscrete(n).then(u=>{u.forEach(h=>{const d=eo({data:void 0,format:mm.ESRI,loaded:!1,loading:new Promise(f=>{h.graphic.then(m=>{d.data=m.attributes,d.loaded=!0,f()})})});l.items.push(d)}),l.loaded=!0,a.resolveMe()}),l})}noFeaturesErr(){console.error("This method targets features and must be called on a Sublayer."),console.trace()}getAttributes(){return this.noFeaturesErr(),Promise.resolve({features:[],oidIndex:{}})}abortAttributeLoad(){this.noFeaturesErr()}destroyAttributes(){this.noFeaturesErr()}getTabularAttributes(){return this.noFeaturesErr(),Promise.resolve({columns:[],rows:[],fields:[],oidField:"error",oidIndex:0})}getGraphic(t,r){return this.noFeaturesErr(),Promise.resolve(new hh(new a1))}getIcon(t){return this.noFeaturesErr(),Promise.resolve("")}getSqlFilter(t){return this.noFeaturesErr(),""}applySqlFilter(t=[]){this.noFeaturesErr()}getFilterOIDs(t=[],r=void 0){return this.noFeaturesErr(),Promise.resolve(void 0)}}class xet extends YE{tooltipField;constructor(t,r,i,n=0){if(super(t,r),this.layerType=yr.SUBLAYER,this.layerFormat=Rl.MAPIMAGE,this.isSublayer=!0,this.layerIdx=n,this.parentLayer=i,this.id=`${i.id}-${n}`,this.dataFormat=To.ESRI_FEATURE,this.tooltipField="",this.hovertips=!1,!i.esriLayer)throw new Error("Map Image Layer with no internal esri layer encountered in sublayer creation");this.fetchEsriSublayer(i)}fetchEsriSublayer(t){if(!t.esriLayer){console.error("Attempted to fetch the ESRI sublayer when parent has no ESRI layer");return}this.esriSubLayer=Gn(t.esriLayer.allSublayers.find(r=>r.id===this.layerIdx))}onLoadActions(){return this.layerTree.name=this.name,this.layerTree.layerIdx=this.layerIdx,this.identify=this.config.state.identify!=null?this.config.state.identify:this.supportsIdentify,[]}async initiate(){this.initialized=!0}async reload(){if(!this.$iApi.geo.map.esriMap){console.error("Attempted layer reload when no map exists");return}this.parentLayer?.reload()}get visibility(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),!1):this.esriSubLayer.visible}set visibility(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.esriSubLayer.visible=t}get opacity(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.esriSubLayer.opacity}set opacity(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.isDynamic||console.warn(`Opacity of a Map Image Sublayer was set. The service does not support sublayer opacity. LayerId ${this.id}`),this.esriSubLayer.opacity=t}get clickTolerance(){return!this.parentLayer?.esriLayer||!this.esriSubLayer?(this.noLayerErr(),0):this.parentLayer.clickTolerance}set clickTolerance(t){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}this.parentLayer.clickTolerance=t}applySqlFilter(t=[]){if(!this.parentLayer?.esriLayer||!this.esriSubLayer){this.noLayerErr();return}const r=this.filter.getCombinedSql(t);this.esriSubLayer.definitionExpression=r}}class Met extends sx{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.layerType=yr.OSM,this.layerFormat=Rl.OSM,this.dataFormat=To.OSM_TILE,this.supportsFeatures=!1,this.hovertips=!1}async initiate(){this.esriLayer=Gn(new _6(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.generatePlaceholderSymbology("O","#03fc4e"),i={uid:this.$iApi.geo.shared.generateUUID(),label:"OpenStreetMap",svgcode:r.svgcode,esriStandard:!0,drawPromise:Promise.resolve()};return this.legend.push(i),t}}class Iet extends sx{constructor(t,r){super(t,r),this.supportsIdentify=!1,this.hovertips=!1,this.layerType=yr.TILE,this.layerFormat=Rl.TILE,this.dataFormat=To.ESRI_TILE}async initiate(){this.esriLayer=Gn(new x6(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){return super.makeEsriLayerConfig(t)}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=this.$iApi.geo.symbology.mapServerToLocalLegend(this.origRampConfig.url).then(i=>{this.legend=i});return t.push(r),t}}class Tet extends sx{sublayerNames;mimeType;constructor(t,r){super(t,r),this.supportsIdentify=!0,this.hovertips=!1,this.layerType=yr.WMS,this.layerFormat=Rl.WMS,this.mimeType=t.featureInfoMimeType||"",this.sublayerNames=[],this.dataFormat=To.OGC_RASTER}async initiate(){this.esriLayer=Gn(new MX(this.makeEsriLayerConfig(this.origRampConfig))),await super.initiate()}makeEsriLayerConfig(t){const r=super.makeEsriLayerConfig(t),i=t.layerEntries;this.sublayerNames=i.map(s=>s.id||"error_no_wms_id");const n=i.map(s=>s.currentStyle).join();return r.customParameters={styles:n},t.url.indexOf("/geomet")!==-1&&(r.customParameters.layers=i[0].id),r}onLoadActions(){const t=super.onLoadActions();this.layerTree.name=this.name;const r=i=>{let n=!1;return i.forEach(s=>{this.sublayerNames.indexOf(s.name)>-1||s.sublayers&&s.sublayers.length>0&&r(s.sublayers)?n=!0:s.visible=!1}),n};return this.esriLayer?r(this.esriLayer.sublayers):this.noLayerErr(),t.push(this.loadSymbology()),t}runIdentify(t){if(t.geometry.type!==Vt.POINT)throw new Error("a point must be used for WMS Identify");const r=this.$iApi.geo.map;if(!this.isValidState||!this.visibility||!this.identify||this.scaleSet.isOffScale(r.getScale()).offScale)return[];const i=new Mo,n=eo({items:[],loading:i.getPromise(),loaded:!1,uid:this.uid,requestTime:Date.now()});return this.getFeatureInfo(this.sublayerNames,t.geometry,this.mimeType).then(s=>{if(s){const o=eo({data:s,format:mm.UNKNOWN,loaded:!0,loading:Promise.resolve()});typeof s!="string"?(o.format=mm.JSON,n.items.push(o)):s.indexOf("Search returned no results")===-1&&s!==""&&(o.format=mm.TEXT,n.items.push(o))}n.loaded=!0,i.resolveMe()}),[n]}setCustomParameter(t,r,i=!0){this.esriLayer?(this.esriLayer.customLayerParameters[t]=r,i&&this.esriLayer.refresh()):this.noLayerErr()}getFeatureInfo(t,r,i){const n=this.$iApi.geo.map,s=this.esriLayer;if(!n.esriView)throw new Error("WMS get feature, no map view exists. Cannot derive click coords");if(!s)throw this.noLayerErr(),new Error("wms get feature failed, no layer");let o,a;const l=n.getExtent(),u=s.spatialReferences,h=t.join(","),d=n.esriView.toScreen(r.toESRI()),f=Math.floor(d.x),m=Math.floor(d.y),b={"application/json":"json","text/html":"text","text/plain":"text"}[i]||"text",w=n.getSR();w.wkid?o=w.wkid:(o=4326,console.error("Map is likely in a WKT projection. WMS Identify request will likely fail.")),u&&u.length>1?u.indexOf(o)===-1&&(w.latestWkid&&u.indexOf(w.latestWkid)>-1?o=w.latestWkid:console.error("WMS service does not support the maps projection. Identify request will likely fail.")):console.error("No supported wkid/epsg code found for WMS service. Identify request will likely fail."),s.version==="1.3"||s.version==="1.3.0"?(a={CRS:"EPSG:"+o,I:f,J:m,STYLES:"",FORMAT:s.imageFormat},this.$iApi.geo.layer.ogc.reversedAxisWKIDs().indexOf(o)>-1&&(a.BBOX=`${l.ymin},${l.xmin},${l.ymax},${l.xmax}`)):a={SRS:"EPSG:"+o,X:f,Y:m},a.hasOwnProperty("BBOX")||(a.BBOX=`${l.xmin},${l.ymin},${l.xmax},${l.ymax}`);const _={SERVICE:"WMS",REQUEST:"GetFeatureInfo",VERSION:s.version,WIDTH:n.getPixelWidth(),HEIGHT:n.getPixelHeight(),QUERY_LAYERS:h,LAYERS:h,INFO_FORMAT:i},x=s.customLayerParameters;return x&&Object.keys(x).forEach(I=>{I.toLowerCase()!=="styles"&&(_[I]=x[I])}),Object.keys(_).forEach(I=>a[I]=_[I]),Ee(s.url.split("?")[0],{query:a,responseType:b})}getLegendUrls(t){if(!this.esriLayer)return this.noLayerErr(),[];const r=new Map;this.esriLayer.allSublayers.forEach(n=>{n.visible&&(n.legendUrl&&this.origRampConfig.layerEntries?.forEach(s=>{if(s.id&&s.currentStyle&&s.id===n.name){const o=new KI(n.legendUrl);"STYLE"in o.queryMap&&o.queryMap.STYLE!==s.currentStyle&&(n.legendUrl=o.updateQuery({STYLE:s.currentStyle}))}}),r.set(n.name,n.legendUrl))});const i=t.map(n=>n.styleLegends&&n.currentStyle?n.styleLegends.find(s=>s.name===n.currentStyle).url:void 0);return i.forEach((n,s)=>{n||(i[s]=r.get(t[s].id))}),i}getWMSLayerTitle(t){if(!this.esriLayer)return"";let r;return this.esriLayer.allSublayers.some(i=>{if(i.name===t)return r=i.title,!0}),r||""}loadSymbology(){const t=this.config.layerEntries,r=this.getLegendUrls(t.map(i=>({id:i.id,styleLegends:i.styleLegends,currentStyle:i.currentStyle}))).map((i,n)=>{const s=t[n].name||this.getWMSLayerTitle(t[n].id)||t[n].id,o={uid:this.$iApi.geo.shared.generateUUID(),label:s,svgcode:"",esriStandard:!1,drawPromise:this.$iApi.geo.symbology.generateWMSSymbology(i).then(a=>{o.svgcode=a.svgcode,o.imgHeight=a.imgHeight,o.imgWidth=a.imgWidth})};return o});return this.legend=r,Promise.resolve()}}class $et extends KE{constructor(t,r){super(t,r),this.layerType=yr.WFS}async initiate(){const t=new KI(this.config.url),{startindex:r,limit:i}=t.queryMap;this.sourceGeoJson=await this.$iApi.geo.layer.ogc.loadWfsData(this.config.url,-1,parseInt(r)||0,parseInt(i)||1e3,void 0,this.config.xyInAttribs),await super.initiate()}}class Eet extends Gi{constructor(t){super(t)}oidIndexer(t,r){t.features.forEach((i,n)=>{t.oidIndex[i[r]]=n})}async arcGisBatchLoad(t,r){if(r.loadAbortFlag)return[];const i={query:{where:`${t.oidField}>${t.maxId}`,outFields:t.attribs,returnGeometry:"false",f:"json"}},[n,s]=await ly(Ee(t.serviceUrl+"/query",i));if(!s)return console.error(`ArcGIS batch load error: ${t.serviceUrl}`,n),Promise.reject(new Error(`ArcGIS batch load error: ${t.serviceUrl}`));if(!s.data||!s.data.features)return console.error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`),Promise.reject(new Error(`ArcGIS batch load gave no data/features: ${t.serviceUrl}`));const o=s.data.features,a=o.length;if(a>0){r.loadedCount+=a;let l;if(t.supportsLimit?l=s.data.exceededTransferLimit:(t.batchSize===-1&&(t.batchSize=a),l=a>=t.batchSize),l){t.maxId=o[a-1].attributes[t.oidField];const u=await this.arcGisBatchLoad(t,r);return o.concat(u)}else return o}else return[]}async loadArcGisServerAttributes(t,r){t.maxId=-1,t.batchSize=-1;const n={features:(await this.arcGisBatchLoad(t,r)).map(s=>s.attributes),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,n}async loadGraphicsAttributes(t,r){if(!t.sourceGraphics)throw new Error("No .sourceGraphics provided to file layer attribute loader");const n={features:t.sourceGraphics.map(s=>it(s).attributes).toArray(),oidIndex:{}};return this.oidIndexer(n,t.oidField),r.loadIsDone=!0,r.loadedCount=n.features.length,n}async loadSingleFeature(t){const r={query:{f:"json",objectIds:t.oid,returnGeometry:t.includeGeometry,outFields:t.attribs}};typeof t.maxOffset<"u"&&(r.query.maxAllowableOffset=t.maxOffset),typeof t.mapSR<"u"&&(r.query.outSR=t.mapSR);const[i,n]=await ly(Ee(t.serviceUrl+"/query",r));if(!n)return console.error(`ArcGIS single feature load error: ${t.serviceUrl}`,i),Promise.reject(new Error(`ArcGIS single feature load error: ${t.serviceUrl}`));if(!n.data||!n.data.features)return console.error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`),Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`));const s=n.data.features;if(s.length>0){const o=s[0];let a;if(t.includeGeometry){o.geometry.spatialReference=n.data.spatialReference;const l=Sr(o.geometry);a=this.$iApi.geo.geom.geomEsriToRamp(l)}else a=new a1;return new hh(a,"",o.attributes)}return Promise.reject(new Error(`Could not locate feature ${t.oid} for layer ${t.serviceUrl}`))}}class sH{loadedCount;loadAbortFlag;loadIsDone;constructor(){this.loadedCount=0,this.loadAbortFlag=!1,this.loadIsDone=!1}}class kle extends Gi{aac;loadPromise;details;tabularAttributesCache;constructor(t,r){super(t),this.aac=new sH,this.details=r}updateFieldList(t){this.details.attribs=t}getAttribs(){return this.loadPromise||(this.aac=new sH,this.loadPromise=this.loadPromiseGenerator()),this.loadPromise}abortAttribLoad(){this.aac.loadAbortFlag=!0}destroyAttribs(){this.loadPromise=void 0,this.tabularAttributesCache=void 0,this.aac.loadIsDone=!1,this.aac.loadedCount=0}loadCount(){return this.aac.loadedCount}isLoaded(){return this.aac.loadIsDone}loadPromiseGenerator(){return Promise.reject(new Error("Subclass of AttributeLoaderBase did not implement loadPromiseGenerator"))}}class Aet extends kle{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadArcGisServerAttributes(this.details,this.aac)}}class Cet extends kle{constructor(t,r){super(t,r)}loadPromiseGenerator(){return this.$iApi.geo.attributes.loadGraphicsAttributes(this.details,this.aac)}}class Ole{attribs;geoms;isPoint;constructor(t){this.attribs={},this.geoms={},this.isPoint=t==="point"}getScaleStore(t){return this.geoms[t]||(this.geoms[t]={}),this.geoms[t]}getGeomStore(t=void 0){if(this.isPoint)return this.geoms;if(typeof t>"u")throw new Error("Attempted to access geometry store for non-point layer without providing a map scale");return this.getScaleStore(t)}getAttribs(t){return this.attribs[t]}setAttribs(t,r){this.attribs[t]=r}getGeom(t,r=void 0){return this.getGeomStore(r)[t]}setGeom(t,r,i=void 0){const n=this.getGeomStore(i);n[t]=r}}class RF{innerRenderer;symbolUnits;defaultUnit;type;falseRenderer;constructor(t,r,i=!1){this.innerRenderer=t,this.symbolUnits=[],this.falseRenderer=i,this.type=PT.Unknown}makeSearchParams(t){return t}searchRenderer(t){const r=this.makeSearchParams(t),i=this.symbolUnits.find(s=>s.match(r));if(i)return i;if(this.defaultUnit)return this.defaultUnit;console.error(`renderer search could not find match for ${r}`);let n=new XE(this);return n.svgCode="",n}getGraphicIcon(t){return this.searchRenderer(t).svgCode}getGraphicSymbol(t){return this.searchRenderer(t).symbol}rendererToLegend(){throw new Error("rendererToLegend not implemented in subclass")}getFieldDelimiter(t,r){let i="'";if(!r||r.length===0)return i;const n=r.find(s=>s.name===t);return n&&n.type&&n.type!=="string"&&(i=""),i}cleanFieldName(t,r){if(!t)return t;let i=r.find(n=>n.name===t);if(i)return t;{const n=t.toLowerCase();return i=r.find(s=>s.name.toLowerCase()===n),i?i.name:t}}makeElseClause(){return this.falseRenderer?"":`(NOT (${this.symbolUnits.map(r=>r.definitionClause).join(" OR ")}))`}}class XE{isDefault=!1;svgCode="";symbol;definitionClause="";label="";parent;constructor(t){this.parent=t,this.symbol=new zu}match(t){return!0}}class ket extends RF{constructor(t,r){super(t,r),this.type=PT.Simple;const i=new XE(this);i.label=t.label||"",i.symbol=t.symbol,i.definitionClause="1=1",this.symbolUnits.push(i)}}class Oet extends RF{delim;keyFields;constructor(t,r,i=!1){super(t,r,i),this.type=PT.Unique,this.delim=t.fieldDelimiter||", ";const n=o=>o.replace(/'/g,"''");this.keyFields=[t.field,t.field2,t.field3].filter(o=>o).map(o=>this.cleanFieldName(o,r));const s=this.keyFields.map(o=>this.getFieldDelimiter(o,r));if(t.uniqueValueInfos.forEach(o=>{const a=new oH(this,o.value);if(a.label=o.label||"",a.symbol=o.symbol,!this.falseRenderer){const l=a.matchValue.split(this.delim),u=this.keyFields.map((h,d)=>`${h} = ${s[d]}${n(l[d])}${s[d]}`).join(" AND ");a.definitionClause=`(${u})`}this.symbolUnits.push(a)}),t.defaultSymbol){const o=new oH(this,"");o.isDefault=!0,o.label=t.defaultLabel||"",o.symbol=t.defaultSymbol,o.definitionClause=this.makeElseClause(),this.defaultUnit=o}}makeSearchParams(t){return this.keyFields.map(r=>{let i=t[r]===null?"":t[r];return typeof i!="string"&&(i=i.toString()),i}).join(this.delim)}}class oH extends XE{matchValue;constructor(t,r){super(t),typeof r=="number"?this.matchValue=r.toString():this.matchValue=r}match(t){return this.matchValue===t}}class Pet extends RF{valField;constructor(t,r,i=!1){if(super(t,r,i),this.valField=this.cleanFieldName(t.field,r),t.classBreakInfos.forEach(n=>{const s=new aH(this,n.minValue,n.maxValue);s.label=n.label||"",s.symbol=n.symbol,this.falseRenderer||(s.definitionClause=`(${this.valField} > ${n.minValue} AND ${this.valField} <= ${n.maxValue})`),this.symbolUnits.push(s)}),t.defaultSymbol){const n=new aH(this,0,0);n.isDefault=!0,n.label=t.defaultLabel||"",n.symbol=t.defaultSymbol,n.definitionClause=this.makeElseClause(),this.defaultUnit=n}}makeSearchParams(t){return parseFloat(t[this.valField])}}class aH extends XE{minValue;maxValue;constructor(t,r,i){super(t),this.minValue=r,this.maxValue=i}match(t){return this.minValue<t&&this.maxValue>=t}}var Ple={exports:{}};/*!
* svg.js - A lightweight library for manipulating and animating SVG.
* @version 2.7.1
* https://svgdotjs.github.io/
*
* @copyright Wout Fierens <wout@mick-wout.com>
* @license MIT
*
* BUILT: Fri Nov 30 2018 10:01:55 GMT+0100 (GMT+01:00)
*/(function(e,t){(function(r,i){e.exports=r.document?i(r,r.document):function(n){return i(n,n.document)}})(typeof window<"u"?window:_8,function(r,i){var n=typeof this<"u"?this:r,s=n.SVG=function(y){if(s.supported)return y=new s.Doc(y),s.parser.draw||s.prepare(),y};if(s.ns="http://www.w3.org/2000/svg",s.xmlns="http://www.w3.org/2000/xmlns/",s.xlink="http://www.w3.org/1999/xlink",s.svgjs="http://svgjs.com/svgjs",s.supported=function(){return!!i.createElementNS&&!!i.createElementNS(s.ns,"svg").createSVGRect}(),!s.supported)return!1;s.did=1e3,s.eid=function(y){return"Svgjs"+w(y)+s.did++},s.create=function(y){var M=i.createElementNS(this.ns,y);return M.setAttribute("id",this.eid(y)),M},s.extend=function(){var y,M,A,P;for(y=[].slice.call(arguments),M=y.pop(),P=y.length-1;P>=0;P--)if(y[P])for(A in M)y[P].prototype[A]=M[A];s.Set&&s.Set.inherit&&s.Set.inherit()},s.invent=function(y){var M=typeof y.create=="function"?y.create:function(){this.constructor.call(this,s.create(y.create))};return y.inherit&&(M.prototype=new y.inherit),y.extend&&s.extend(M,y.extend),y.construct&&s.extend(y.parent||s.Container,y.construct),M},s.adopt=function(y){if(!y)return null;if(y.instance)return y.instance;var M;return y.nodeName=="svg"?M=y.parentNode instanceof r.SVGElement?new s.Nested:new s.Doc:y.nodeName=="linearGradient"?M=new s.Gradient("linear"):y.nodeName=="radialGradient"?M=new s.Gradient("radial"):s[w(y.nodeName)]?M=new s[w(y.nodeName)]:M=new s.Element(y),M.type=y.nodeName,M.node=y,y.instance=M,M instanceof s.Doc&&M.namespace().defs(),M.setData(JSON.parse(y.getAttribute("svgjs:data"))||{}),M},s.prepare=function(){var y=i.getElementsByTagName("body")[0],M=(y?new s.Doc(y):s.adopt(i.documentElement).nested()).size(2,0);s.parser={body:y||i.documentElement,draw:M.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").attr("focusable","false").node,poly:M.polyline().node,path:M.path().node,native:s.create("svg")}},s.parser={native:s.create("svg")},i.addEventListener("DOMContentLoaded",function(){s.parser.draw||s.prepare()},!1),s.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},s.utils={map:function(y,M){var A,P=y.length,Y=[];for(A=0;A<P;A++)Y.push(M(y[A]));return Y},filter:function(y,M){var A,P=y.length,Y=[];for(A=0;A<P;A++)M(y[A])&&Y.push(y[A]);return Y},radians:function(y){return y%360*Math.PI/180},degrees:function(y){return y*180/Math.PI%360},filterSVGElements:function(y){return this.filter(y,function(M){return M instanceof r.SVGElement})}},s.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},s.Color=function(y){var M;this.r=0,this.g=0,this.b=0,y&&(typeof y=="string"?s.regex.isRgb.test(y)?(M=s.regex.rgb.exec(y.replace(s.regex.whitespace,"")),this.r=parseInt(M[1]),this.g=parseInt(M[2]),this.b=parseInt(M[3])):s.regex.isHex.test(y)&&(M=s.regex.hex.exec(_(y)),this.r=parseInt(M[1],16),this.g=parseInt(M[2],16),this.b=parseInt(M[3],16)):typeof y=="object"&&(this.r=y.r,this.g=y.g,this.b=y.b))},s.extend(s.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+x(this.r)+x(this.g)+x(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(y){return this.destination=new s.Color(y),this},at:function(y){return this.destination?(y=y<0?0:y>1?1:y,new s.Color({r:~~(this.r+(this.destination.r-this.r)*y),g:~~(this.g+(this.destination.g-this.g)*y),b:~~(this.b+(this.destination.b-this.b)*y)})):this}}),s.Color.test=function(y){return y+="",s.regex.isHex.test(y)||s.regex.isRgb.test(y)},s.Color.isRgb=function(y){return y&&typeof y.r=="number"&&typeof y.g=="number"&&typeof y.b=="number"},s.Color.isColor=function(y){return s.Color.isRgb(y)||s.Color.test(y)},s.Array=function(y,M){y=(y||[]).valueOf(),y.length==0&&M&&(y=M.valueOf()),this.value=this.parse(y)},s.extend(s.Array,{morph:function(y){if(this.destination=this.parse(y),this.value.length!=this.destination.length){for(var M=this.value[this.value.length-1],A=this.destination[this.destination.length-1];this.value.length>this.destination.length;)this.destination.push(A);for(;this.value.length<this.destination.length;)this.value.push(M)}return this},settle:function(){for(var y=0,M=this.value.length,A=[];y<M;y++)A.indexOf(this.value[y])==-1&&A.push(this.value[y]);return this.value=A},at:function(y){if(!this.destination)return this;for(var M=0,A=this.value.length,P=[];M<A;M++)P.push(this.value[M]+(this.destination[M]-this.value[M])*y);return new s.Array(P)},toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(y){return y=y.valueOf(),Array.isArray(y)?y:this.split(y)},split:function(y){return y.trim().split(s.regex.delimiter).map(parseFloat)},reverse:function(){return this.value.reverse(),this},clone:function(){var y=new this.constructor;return y.value=f(this.value),y}}),s.PointArray=function(y,M){s.Array.call(this,y,M||[[0,0]])},s.PointArray.prototype=new s.Array,s.PointArray.prototype.constructor=s.PointArray,s.extend(s.PointArray,{toString:function(){for(var y=0,M=this.value.length,A=[];y<M;y++)A.push(this.value[y].join(","));return A.join(" ")},toLine:function(){return{x1:this.value[0][0],y1:this.value[0][1],x2:this.value[1][0],y2:this.value[1][1]}},at:function(y){if(!this.destination)return this;for(var M=0,A=this.value.length,P=[];M<A;M++)P.push([this.value[M][0]+(this.destination[M][0]-this.value[M][0])*y,this.value[M][1]+(this.destination[M][1]-this.value[M][1])*y]);return new s.PointArray(P)},parse:function(y){var M=[];if(y=y.valueOf(),Array.isArray(y)){if(Array.isArray(y[0]))return y.map(function(Y){return Y.slice()});if(y[0].x!=null)return y.map(function(Y){return[Y.x,Y.y]})}else y=y.trim().split(s.regex.delimiter).map(parseFloat);y.length%2!==0&&y.pop();for(var A=0,P=y.length;A<P;A=A+2)M.push([y[A],y[A+1]]);return M},move:function(y,M){var A=this.bbox();if(y-=A.x,M-=A.y,!isNaN(y)&&!isNaN(M))for(var P=this.value.length-1;P>=0;P--)this.value[P]=[this.value[P][0]+y,this.value[P][1]+M];return this},size:function(y,M){var A,P=this.bbox();for(A=this.value.length-1;A>=0;A--)P.width&&(this.value[A][0]=(this.value[A][0]-P.x)*y/P.width+P.x),P.height&&(this.value[A][1]=(this.value[A][1]-P.y)*M/P.height+P.y);return this},bbox:function(){return s.parser.poly.setAttribute("points",this.toString()),s.parser.poly.getBBox()}});for(var o={M:function(y,M,A){return M.x=A.x=y[0],M.y=A.y=y[1],["M",M.x,M.y]},L:function(y,M){return M.x=y[0],M.y=y[1],["L",y[0],y[1]]},H:function(y,M){return M.x=y[0],["H",y[0]]},V:function(y,M){return M.y=y[0],["V",y[0]]},C:function(y,M){return M.x=y[4],M.y=y[5],["C",y[0],y[1],y[2],y[3],y[4],y[5]]},S:function(y,M){return M.x=y[2],M.y=y[3],["S",y[0],y[1],y[2],y[3]]},Q:function(y,M){return M.x=y[2],M.y=y[3],["Q",y[0],y[1],y[2],y[3]]},T:function(y,M){return M.x=y[0],M.y=y[1],["T",y[0],y[1]]},Z:function(y,M,A){return M.x=A.x,M.y=A.y,["Z"]},A:function(y,M){return M.x=y[5],M.y=y[6],["A",y[0],y[1],y[2],y[3],y[4],y[5],y[6]]}},a="mlhvqtcsaz".split(""),l=0,u=a.length;l<u;++l)o[a[l]]=function(y){return function(M,A,P){if(y=="H")M[0]=M[0]+A.x;else if(y=="V")M[0]=M[0]+A.y;else if(y=="A")M[5]=M[5]+A.x,M[6]=M[6]+A.y;else for(var Y=0,Q=M.length;Y<Q;++Y)M[Y]=M[Y]+(Y%2?A.y:A.x);return o[y](M,A,P)}}(a[l].toUpperCase());s.PathArray=function(y,M){s.Array.call(this,y,M||[["M",0,0]])},s.PathArray.prototype=new s.Array,s.PathArray.prototype.constructor=s.PathArray,s.extend(s.PathArray,{toString:function(){return C(this.value)},move:function(y,M){var A=this.bbox();if(y-=A.x,M-=A.y,!isNaN(y)&&!isNaN(M))for(var P,Y=this.value.length-1;Y>=0;Y--)P=this.value[Y][0],P=="M"||P=="L"||P=="T"?(this.value[Y][1]+=y,this.value[Y][2]+=M):P=="H"?this.value[Y][1]+=y:P=="V"?this.value[Y][1]+=M:P=="C"||P=="S"||P=="Q"?(this.value[Y][1]+=y,this.value[Y][2]+=M,this.value[Y][3]+=y,this.value[Y][4]+=M,P=="C"&&(this.value[Y][5]+=y,this.value[Y][6]+=M)):P=="A"&&(this.value[Y][6]+=y,this.value[Y][7]+=M);return this},size:function(y,M){var A,P,Y=this.bbox();for(A=this.value.length-1;A>=0;A--)P=this.value[A][0],P=="M"||P=="L"||P=="T"?(this.value[A][1]=(this.value[A][1]-Y.x)*y/Y.width+Y.x,this.value[A][2]=(this.value[A][2]-Y.y)*M/Y.height+Y.y):P=="H"?this.value[A][1]=(this.value[A][1]-Y.x)*y/Y.width+Y.x:P=="V"?this.value[A][1]=(this.value[A][1]-Y.y)*M/Y.height+Y.y:P=="C"||P=="S"||P=="Q"?(this.value[A][1]=(this.value[A][1]-Y.x)*y/Y.width+Y.x,this.value[A][2]=(this.value[A][2]-Y.y)*M/Y.height+Y.y,this.value[A][3]=(this.value[A][3]-Y.x)*y/Y.width+Y.x,this.value[A][4]=(this.value[A][4]-Y.y)*M/Y.height+Y.y,P=="C"&&(this.value[A][5]=(this.value[A][5]-Y.x)*y/Y.width+Y.x,this.value[A][6]=(this.value[A][6]-Y.y)*M/Y.height+Y.y)):P=="A"&&(this.value[A][1]=this.value[A][1]*y/Y.width,this.value[A][2]=this.value[A][2]*M/Y.height,this.value[A][6]=(this.value[A][6]-Y.x)*y/Y.width+Y.x,this.value[A][7]=(this.value[A][7]-Y.y)*M/Y.height+Y.y);return this},equalCommands:function(y){var M,A,P;for(y=new s.PathArray(y),P=this.value.length===y.value.length,M=0,A=this.value.length;P&&M<A;M++)P=this.value[M][0]===y.value[M][0];return P},morph:function(y){return y=new s.PathArray(y),this.equalCommands(y)?this.destination=y:this.destination=null,this},at:function(y){if(!this.destination)return this;var M=this.value,A=this.destination.value,P=[],Y=new s.PathArray,Q,le,re,we;for(Q=0,le=M.length;Q<le;Q++){for(P[Q]=[M[Q][0]],re=1,we=M[Q].length;re<we;re++)P[Q][re]=M[Q][re]+(A[Q][re]-M[Q][re])*y;P[Q][0]==="A"&&(P[Q][4]=+(P[Q][4]!=0),P[Q][5]=+(P[Q][5]!=0))}return Y.value=P,Y},parse:function(y){if(y instanceof s.PathArray)return y.valueOf();var M,P,A={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};typeof y=="string"?y=y.replace(s.regex.numbersWithDots,d).replace(s.regex.pathLetters," $& ").replace(s.regex.hyphen,"$1 -").trim().split(s.regex.delimiter):y=y.reduce(function(we,_e){return[].concat.call(we,_e)},[]);var P=[],Y=new s.Point,Q=new s.Point,le=0,re=y.length;do s.regex.isPathLetter.test(y[le])?(M=y[le],++le):M=="M"?M="L":M=="m"&&(M="l"),P.push(o[M].call(null,y.slice(le,le=le+A[M.toUpperCase()]).map(parseFloat),Y,Q));while(re>le);return P},bbox:function(){return s.parser.path.setAttribute("d",this.toString()),s.parser.path.getBBox()}}),s.Number=s.invent({create:function(y,M){this.value=0,this.unit=M||"",typeof y=="number"?this.value=isNaN(y)?0:isFinite(y)?y:y<0?-34e37:34e37:typeof y=="string"?(M=y.match(s.regex.numberAndUnit),M&&(this.value=parseFloat(M[1]),M[5]=="%"?this.value/=100:M[5]=="s"&&(this.value*=1e3),this.unit=M[5])):y instanceof s.Number&&(this.value=y.valueOf(),this.unit=y.unit)},extend:{toString:function(){return(this.unit=="%"?~~(this.value*1e8)/1e6:this.unit=="s"?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(y){return y=new s.Number(y),new s.Number(this+y,this.unit||y.unit)},minus:function(y){return y=new s.Number(y),new s.Number(this-y,this.unit||y.unit)},times:function(y){return y=new s.Number(y),new s.Number(this*y,this.unit||y.unit)},divide:function(y){return y=new s.Number(y),new s.Number(this/y,this.unit||y.unit)},to:function(y){var M=new s.Number(this);return typeof y=="string"&&(M.unit=y),M},morph:function(y){return this.destination=new s.Number(y),y.relative&&(this.destination.value+=this.value),this},at:function(y){return this.destination?new s.Number(this.destination).minus(this).times(y).plus(this):this}}}),s.Element=s.invent({create:function(y){this._stroke=s.defaults.attrs.stroke,this._event=null,this._events={},this.dom={},(this.node=y)&&(this.type=y.nodeName,this.node.instance=this,this._events=y._events||{},this._stroke=y.getAttribute("stroke")||this._stroke)},extend:{x:function(y){return this.attr("x",y)},y:function(y){return this.attr("y",y)},cx:function(y){return y==null?this.x()+this.width()/2:this.x(y-this.width()/2)},cy:function(y){return y==null?this.y()+this.height()/2:this.y(y-this.height()/2)},move:function(y,M){return this.x(y).y(M)},center:function(y,M){return this.cx(y).cy(M)},width:function(y){return this.attr("width",y)},height:function(y){return this.attr("height",y)},size:function(y,M){var A=I(this,y,M);return this.width(new s.Number(A.width)).height(new s.Number(A.height))},clone:function(y){this.writeDataToDom();var M=O(this.node.cloneNode(!0));return y?y.add(M):this.after(M),M},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(y){return this.after(y).remove(),y},addTo:function(y){return y.put(this)},putIn:function(y){return y.add(this)},id:function(y){return this.attr("id",y)},inside:function(y,M){var A=this.bbox();return y>A.x&&M>A.y&&y<A.x+A.width&&M<A.y+A.height},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return this.style("display")!="none"},toString:function(){return this.attr("id")},classes:function(){var y=this.attr("class");return y==null?[]:y.trim().split(s.regex.delimiter)},hasClass:function(y){return this.classes().indexOf(y)!=-1},addClass:function(y){if(!this.hasClass(y)){var M=this.classes();M.push(y),this.attr("class",M.join(" "))}return this},removeClass:function(y){return this.hasClass(y)&&this.attr("class",this.classes().filter(function(M){return M!=y}).join(" ")),this},toggleClass:function(y){return this.hasClass(y)?this.removeClass(y):this.addClass(y)},reference:function(y){return s.get(this.attr(y))},parent:function(y){var M=this;if(!M.node.parentNode)return null;if(M=s.adopt(M.node.parentNode),!y)return M;for(;M&&M.node instanceof r.SVGElement;){if(typeof y=="string"?M.matches(y):M instanceof y)return M;if(!M.node.parentNode||M.node.parentNode.nodeName=="#document"||M.node.parentNode.nodeName=="#document-fragment")return null;M=s.adopt(M.node.parentNode)}},doc:function(){return this instanceof s.Doc?this:this.parent(s.Doc)},parents:function(y){var M=[],A=this;do{if(A=A.parent(y),!A||!A.node)break;M.push(A)}while(A.parent);return M},matches:function(y){return g(this.node,y)},native:function(){return this.node},svg:function(y){var M=i.createElement("svg");if(y&&this instanceof s.Parent){M.innerHTML="<svg>"+y.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var A=0,P=M.firstChild.childNodes.length;A<P;A++)this.node.appendChild(M.firstChild.firstChild)}else return M.appendChild(y=i.createElement("svg")),this.writeDataToDom(),y.appendChild(this.node.cloneNode(!0)),M.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");return this},writeDataToDom:function(){if(this.each||this.lines){var y=this.each?this:this.lines();y.each(function(){this.writeDataToDom()})}return this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(y){return this.dom=y,this},is:function(y){return m(this,y)}}}),s.easing={"-":function(y){return y},"<>":function(y){return-Math.cos(y*Math.PI)/2+.5},">":function(y){return Math.sin(y*Math.PI/2)},"<":function(y){return-Math.cos(y*Math.PI/2)+1}},s.morph=function(y){return function(M,A){return new s.MorphObj(M,A).at(y)}},s.Situation=s.invent({create:function(y){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new s.Number(y.duration).valueOf(),this.delay=new s.Number(y.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=y.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),s.FX=s.invent({create:function(y){this._target=y,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(y,M,A){typeof y=="object"&&(M=y.ease,A=y.delay,y=y.duration);var P=new s.Situation({duration:y||1e3,delay:A||0,ease:s.easing[M||"-"]||M});return this.queue(P),this},delay:function(y){var M=new s.Situation({duration:y,delay:0,ease:s.easing["-"]});return this.queue(M)},target:function(y){return y&&y instanceof s.Element?(this._target=y,this):this._target},timeToAbsPos:function(y){return(y-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(y){return this.situation.duration/this._speed*y+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=r.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){r.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(y){return(typeof y=="function"||y instanceof s.Situation)&&this.situations.push(y),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof s.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var y,M,A,P=this.situation;if(P.init)return this;for(y in P.animations)for(A=this.target()[y](),Array.isArray(A)||(A=[A]),Array.isArray(P.animations[y])||(P.animations[y]=[P.animations[y]]),M=A.length;M--;)P.animations[y][M]instanceof s.Number&&(A[M]=new s.Number(A[M])),P.animations[y][M]=A[M].morph(P.animations[y][M]);for(y in P.attrs)P.attrs[y]=new s.MorphObj(this.target().attr(y),P.attrs[y]);for(y in P.styles)P.styles[y]=new s.MorphObj(this.target().style(y),P.styles[y]);return P.initialTransformation=this.target().matrixify(),P.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(y,M){var A=this.active;return this.active=!1,M&&this.clearQueue(),y&&this.situation&&(!A&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},reset:function(){if(this.situation){var y=this.situation;this.stop(),this.situation=y,this.atStart()}return this},finish:function(){for(this.stop(!0,!1);this.dequeue().situation&&this.stop(!0,!1););return this.clearQueue().clearCurrent(),this},atStart:function(){return this.at(0,!0)},atEnd:function(){return this.situation.loops===!0&&(this.situation.loops=this.situation.loop+1),typeof this.situation.loops=="number"?this.at(this.situation.loops,!0):this.at(1,!0)},at:function(y,M){var A=this.situation.duration/this._speed;return this.absPos=y,M||(this.situation.reversed&&(this.absPos=1-this.absPos),this.absPos+=this.situation.loop),this.situation.start=+new Date-this.absPos*A,this.situation.finish=this.situation.start+A,this.step(!0)},speed:function(y){return y===0?this.pause():y?(this._speed=y,this.at(this.absPos,!0)):this._speed},loop:function(y,M){var A=this.last();return A.loops=y??!0,A.loop=0,M&&(A.reversing=!0),this},pause:function(){return this.paused=!0,this.stopAnimFrame(),this},play:function(){return this.paused?(this.paused=!1,this.at(this.absPos,!0)):this},reverse:function(y){var M=this.last();return typeof y>"u"?M.reversed=!M.reversed:M.reversed=y,this},progress:function(y){return y?this.situation.ease(this.pos):this.pos},after:function(y){var M=this.last(),A=function P(Y){Y.detail.situation==M&&(y.call(this,M),this.off("finished.fx",P))};return this.target().on("finished.fx",A),this._callStart()},during:function(y){var M=this.last(),A=function(P){P.detail.situation==M&&y.call(this,P.detail.pos,s.morph(P.detail.pos),P.detail.eased,M)};return this.target().off("during.fx",A).on("during.fx",A),this.after(function(){this.off("during.fx",A)}),this._callStart()},afterAll:function(y){var M=function A(P){y.call(this),this.off("allfinished.fx",A)};return this.target().off("allfinished.fx",M).on("allfinished.fx",M),this._callStart()},duringAll:function(y){var M=function(A){y.call(this,A.detail.pos,s.morph(A.detail.pos),A.detail.eased,A.detail.situation)};return this.target().off("during.fx",M).on("during.fx",M),this.afterAll(function(){this.off("during.fx",M)}),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(y,M,A){return this.last()[A||"animations"][y]=M,this._callStart()},step:function(y){if(y||(this.absPos=this.timeToAbsPos(+new Date)),this.situation.loops!==!1){var M,A,P;M=Math.max(this.absPos,0),A=Math.floor(M),this.situation.loops===!0||A<this.situation.loops?(this.pos=M-A,P=this.situation.loop,this.situation.loop=A):(this.absPos=this.situation.loops,this.pos=1,P=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-P)%2))}else this.absPos=Math.min(this.absPos,1),this.pos=this.absPos;this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var Y=this.situation.ease(this.pos);for(var Q in this.situation.once)Q>this.lastPos&&Q<=Y&&(this.situation.once[Q].call(this.target(),this.pos,Y),delete this.situation.once[Q]);return this.active&&this.target().fire("during",{pos:this.pos,eased:Y,fx:this,situation:this.situation}),this.situation?(this.eachAt(),this.pos==1&&!this.situation.reversed||this.situation.reversed&&this.pos==0?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=Y,this):this},eachAt:function(){var y,M,A,P=this,Y=this.target(),Q=this.situation;for(y in Q.animations)A=[].concat(Q.animations[y]).map(function(re){return typeof re!="string"&&re.at?re.at(Q.ease(P.pos),P.pos):re}),Y[y].apply(Y,A);for(y in Q.attrs)A=[y].concat(Q.attrs[y]).map(function(re){return typeof re!="string"&&re.at?re.at(Q.ease(P.pos),P.pos):re}),Y.attr.apply(Y,A);for(y in Q.styles)A=[y].concat(Q.styles[y]).map(function(re){return typeof re!="string"&&re.at?re.at(Q.ease(P.pos),P.pos):re}),Y.style.apply(Y,A);if(Q.transforms.length){for(A=Q.initialTransformation,y=0,M=Q.transforms.length;y<M;y++){var le=Q.transforms[y];if(le instanceof s.Matrix){le.relative?A=A.multiply(new s.Matrix().morph(le).at(Q.ease(this.pos))):A=A.morph(le).at(Q.ease(this.pos));continue}le.relative||le.undo(A.extract()),A=A.multiply(le.at(Q.ease(this.pos)))}Y.matrix(A)}return this},once:function(y,M,A){var P=this.last();return A||(y=P.ease(y)),P.once[y]=M,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:s.Element,construct:{animate:function(y,M,A){return(this.fx||(this.fx=new s.FX(this))).animate(y,M,A)},delay:function(y){return(this.fx||(this.fx=new s.FX(this))).delay(y)},stop:function(y,M){return this.fx&&this.fx.stop(y,M),this},finish:function(){return this.fx&&this.fx.finish(),this},pause:function(){return this.fx&&this.fx.pause(),this},play:function(){return this.fx&&this.fx.play(),this},speed:function(y){if(this.fx){if(y==null)return this.fx.speed();this.fx.speed(y)}return this}}}),s.MorphObj=s.invent({create:function(y,M){if(s.Color.isColor(M))return new s.Color(y).morph(M);if(s.regex.delimiter.test(y))return s.regex.pathLetters.test(y)?new s.PathArray(y).morph(M):new s.Array(y).morph(M);if(s.regex.numberAndUnit.test(M))return new s.Number(y).morph(M);this.value=y,this.destination=M},extend:{at:function(y,M){return M<1?this.value:this.destination},valueOf:function(){return this.value}}}),s.extend(s.FX,{attr:function(y,M,A){if(typeof y=="object")for(var P in y)this.attr(P,y[P]);else this.add(y,M,"attrs");return this},style:function(y,M){if(typeof y=="object")for(var A in y)this.style(A,y[A]);else this.add(y,M,"styles");return this},x:function(y,M){if(this.target()instanceof s.G)return this.transform({x:y},M),this;var A=new s.Number(y);return A.relative=M,this.add("x",A)},y:function(y,M){if(this.target()instanceof s.G)return this.transform({y},M),this;var A=new s.Number(y);return A.relative=M,this.add("y",A)},cx:function(y){return this.add("cx",new s.Number(y))},cy:function(y){return this.add("cy",new s.Number(y))},move:function(y,M){return this.x(y).y(M)},center:function(y,M){return this.cx(y).cy(M)},size:function(y,M){if(this.target()instanceof s.Text)this.attr("font-size",y);else{var A;(!y||!M)&&(A=this.target().bbox()),y||(y=A.width/A.height*M),M||(M=A.height/A.width*y),this.add("width",new s.Number(y)).add("height",new s.Number(M))}return this},width:function(y){return this.add("width",new s.Number(y))},height:function(y){return this.add("height",new s.Number(y))},plot:function(y,M,A,P){return arguments.length==4?this.plot([y,M,A,P]):this.add("plot",new(this.target()).morphArray(y))},leading:function(y){return this.target().leading?this.add("leading",new s.Number(y)):this},viewbox:function(y,M,A,P){return this.target()instanceof s.Container&&this.add("viewbox",new s.ViewBox(y,M,A,P)),this},update:function(y){if(this.target()instanceof s.Stop){if(typeof y=="number"||y instanceof s.Number)return this.update({offset:arguments[0],color:arguments[1],opacity:arguments[2]});y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",y.offset)}return this}}),s.Box=s.invent({create:function(y,M,A,P){if(typeof y=="object"&&!(y instanceof s.Element))return s.Box.call(this,y.left!=null?y.left:y.x,y.top!=null?y.top:y.y,y.width,y.height);arguments.length==4&&(this.x=y,this.y=M,this.width=A,this.height=P),R(this)},extend:{merge:function(y){var M=new this.constructor;return M.x=Math.min(this.x,y.x),M.y=Math.min(this.y,y.y),M.width=Math.max(this.x+this.width,y.x+y.width)-M.x,M.height=Math.max(this.y+this.height,y.y+y.height)-M.y,R(M)},transform:function(y){var M=1/0,A=-1/0,P=1/0,Y=-1/0,Q,le=[new s.Point(this.x,this.y),new s.Point(this.x2,this.y),new s.Point(this.x,this.y2),new s.Point(this.x2,this.y2)];return le.forEach(function(re){re=re.transform(y),M=Math.min(M,re.x),A=Math.max(A,re.x),P=Math.min(P,re.y),Y=Math.max(Y,re.y)}),Q=new this.constructor,Q.x=M,Q.width=A-M,Q.y=P,Q.height=Y-P,R(Q),Q}}}),s.BBox=s.invent({create:function(y){if(s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element){var M;try{if(i.documentElement.contains){if(!i.documentElement.contains(y.node))throw new Exception("Element not in the dom")}else{for(var A=y.node;A.parentNode;)A=A.parentNode;if(A!=i)throw new Exception("Element not in the dom")}M=y.node.getBBox()}catch{if(y instanceof s.Shape){var P=y.clone(s.parser.draw.instance).show();M=P.node.getBBox(),P.remove()}else M={x:y.node.clientLeft,y:y.node.clientTop,width:y.node.clientWidth,height:y.node.clientHeight}}s.Box.call(this,M)}},inherit:s.Box,parent:s.Element,construct:{bbox:function(){return new s.BBox(this)}}}),s.BBox.prototype.constructor=s.BBox,s.extend(s.Element,{tbox:function(){return console.warn("Use of TBox is deprecated and mapped to RBox. Use .rbox() instead."),this.rbox(this.doc())}}),s.RBox=s.invent({create:function(y){s.Box.apply(this,[].slice.call(arguments)),y instanceof s.Element&&s.Box.call(this,y.node.getBoundingClientRect())},inherit:s.Box,parent:s.Element,extend:{addOffset:function(){return this.x+=r.pageXOffset,this.y+=r.pageYOffset,this}},construct:{rbox:function(y){return y?new s.RBox(this).transform(y.screenCTM().inverse()):new s.RBox(this).addOffset()}}}),s.RBox.prototype.constructor=s.RBox,s.Matrix=s.invent({create:function(y){var M,A=T([1,0,0,1,0,0]);for(y=y instanceof s.Element?y.matrixify():typeof y=="string"?T(y.split(s.regex.delimiter).map(parseFloat)):arguments.length==6?T([].slice.call(arguments)):Array.isArray(y)?T(y):typeof y=="object"?y:A,M=z.length-1;M>=0;--M)this[z[M]]=y[z[M]]!=null?y[z[M]]:A[z[M]]},extend:{extract:function(){var y=S(this,0,1),M=S(this,1,0),A=180/Math.PI*Math.atan2(y.y,y.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(A*Math.PI/180)+this.f*Math.sin(A*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(A*Math.PI/180)+this.e*Math.sin(-A*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),skewX:-A,skewY:180/Math.PI*Math.atan2(M.y,M.x),scaleX:Math.sqrt(this.a*this.a+this.b*this.b),scaleY:Math.sqrt(this.c*this.c+this.d*this.d),rotation:A,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new s.Matrix(this)}},clone:function(){return new s.Matrix(this)},morph:function(y){return this.destination=new s.Matrix(y),this},at:function(y){if(!this.destination)return this;var M=new s.Matrix({a:this.a+(this.destination.a-this.a)*y,b:this.b+(this.destination.b-this.b)*y,c:this.c+(this.destination.c-this.c)*y,d:this.d+(this.destination.d-this.d)*y,e:this.e+(this.destination.e-this.e)*y,f:this.f+(this.destination.f-this.f)*y});return M},multiply:function(y){return new s.Matrix(this.native().multiply($(y).native()))},inverse:function(){return new s.Matrix(this.native().inverse())},translate:function(y,M){return new s.Matrix(this.native().translate(y||0,M||0))},scale:function(y,M,A,P){return arguments.length==1?M=y:arguments.length==3&&(P=A,A=M,M=y),this.around(A,P,new s.Matrix(y,0,0,M,0,0))},rotate:function(y,M,A){return y=s.utils.radians(y),this.around(M,A,new s.Matrix(Math.cos(y),Math.sin(y),-Math.sin(y),Math.cos(y),0,0))},flip:function(y,M){return y=="x"?this.scale(-1,1,M,0):y=="y"?this.scale(1,-1,0,M):this.scale(-1,-1,y,M??y)},skew:function(y,M,A,P){return arguments.length==1?M=y:arguments.length==3&&(P=A,A=M,M=y),y=s.utils.radians(y),M=s.utils.radians(M),this.around(A,P,new s.Matrix(1,Math.tan(M),Math.tan(y),1,0,0))},skewX:function(y,M,A){return this.skew(y,0,M,A)},skewY:function(y,M,A){return this.skew(0,y,M,A)},around:function(y,M,A){return this.multiply(new s.Matrix(1,0,0,1,y||0,M||0)).multiply(A).multiply(new s.Matrix(1,0,0,1,-y||0,-M||0))},native:function(){for(var y=s.parser.native.createSVGMatrix(),M=z.length-1;M>=0;M--)y[z[M]]=this[z[M]];return y},toString:function(){return"matrix("+F(this.a)+","+F(this.b)+","+F(this.c)+","+F(this.d)+","+F(this.e)+","+F(this.f)+")"}},parent:s.Element,construct:{ctm:function(){return new s.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof s.Nested){var y=this.rect(1,1),M=y.node.getScreenCTM();return y.remove(),new s.Matrix(M)}return new s.Matrix(this.node.getScreenCTM())}}}),s.Point=s.invent({create:function(y,M){var A,P={x:0,y:0};A=Array.isArray(y)?{x:y[0],y:y[1]}:typeof y=="object"?{x:y.x,y:y.y}:y!=null?{x:y,y:M??y}:P,this.x=A.x,this.y=A.y},extend:{clone:function(){return new s.Point(this)},morph:function(y,M){return this.destination=new s.Point(y,M),this},at:function(y){if(!this.destination)return this;var M=new s.Point({x:this.x+(this.destination.x-this.x)*y,y:this.y+(this.destination.y-this.y)*y});return M},native:function(){var y=s.parser.native.createSVGPoint();return y.x=this.x,y.y=this.y,y},transform:function(y){return new s.Point(this.native().matrixTransform(y.native()))}}}),s.extend(s.Element,{point:function(y,M){return new s.Point(y,M).transform(this.screenCTM().inverse())}}),s.extend(s.Element,{attr:function(y,M,A){if(y==null){for(y={},M=this.node.attributes,A=M.length-1;A>=0;A--)y[M[A].nodeName]=s.regex.isNumber.test(M[A].nodeValue)?parseFloat(M[A].nodeValue):M[A].nodeValue;return y}else if(typeof y=="object")for(M in y)this.attr(M,y[M]);else if(M===null)this.node.removeAttribute(y);else{if(M==null)return M=this.node.getAttribute(y),M==null?s.defaults.attrs[y]:s.regex.isNumber.test(M)?parseFloat(M):M;y=="stroke-width"?this.attr("stroke",parseFloat(M)>0?this._stroke:null):y=="stroke"&&(this._stroke=M),(y=="fill"||y=="stroke")&&(s.regex.isImage.test(M)&&(M=this.doc().defs().image(M,0,0)),M instanceof s.Image&&(M=this.doc().defs().pattern(0,0,function(){this.add(M)}))),typeof M=="number"?M=new s.Number(M):s.Color.isColor(M)?M=new s.Color(M):Array.isArray(M)&&(M=new s.Array(M)),y=="leading"?this.leading&&this.leading(M):typeof A=="string"?this.node.setAttributeNS(A,y,M.toString()):this.node.setAttribute(y,M.toString()),this.rebuild&&(y=="font-size"||y=="x")&&this.rebuild(y,M)}return this}}),s.extend(s.Element,{transform:function(y,M){var A=this,P,Y;if(typeof y!="object")return P=new s.Matrix(A).extract(),typeof y=="string"?P[y]:P;if(P=new s.Matrix(A),M=!!M||!!y.relative,y.a!=null)P=M?P.multiply(new s.Matrix(y)):new s.Matrix(y);else if(y.rotation!=null)E(y,A),P=M?P.rotate(y.rotation,y.cx,y.cy):P.rotate(y.rotation-P.extract().rotation,y.cx,y.cy);else if(y.scale!=null||y.scaleX!=null||y.scaleY!=null){if(E(y,A),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,!M){var Q=P.extract();y.scaleX=y.scaleX*1/Q.scaleX,y.scaleY=y.scaleY*1/Q.scaleY}P=P.scale(y.scaleX,y.scaleY,y.cx,y.cy)}else if(y.skew!=null||y.skewX!=null||y.skewY!=null){if(E(y,A),y.skewX=y.skew!=null?y.skew:y.skewX!=null?y.skewX:0,y.skewY=y.skew!=null?y.skew:y.skewY!=null?y.skewY:0,!M){var Q=P.extract();P=P.multiply(new s.Matrix().skew(Q.skewX,Q.skewY,y.cx,y.cy).inverse())}P=P.skew(y.skewX,y.skewY,y.cx,y.cy)}else y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?A.bbox()["c"+y.flip]:y.offset:y.offset==null?(Y=A.bbox(),y.flip=Y.cx,y.offset=Y.cy):y.flip=y.offset,P=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(M?P=P.translate(y.x,y.y):(y.x!=null&&(P.e=y.x),y.y!=null&&(P.f=y.y)));return this.attr("transform",P)}}),s.extend(s.FX,{transform:function(y,M){var A=this.target(),P,Y;return typeof y!="object"?(P=new s.Matrix(A).extract(),typeof y=="string"?P[y]:P):(M=!!M||!!y.relative,y.a!=null?P=new s.Matrix(y):y.rotation!=null?(E(y,A),P=new s.Rotate(y.rotation,y.cx,y.cy)):y.scale!=null||y.scaleX!=null||y.scaleY!=null?(E(y,A),y.scaleX=y.scale!=null?y.scale:y.scaleX!=null?y.scaleX:1,y.scaleY=y.scale!=null?y.scale:y.scaleY!=null?y.scaleY:1,P=new s.Scale(y.scaleX,y.scaleY,y.cx,y.cy)):y.skewX!=null||y.skewY!=null?(E(y,A),y.skewX=y.skewX!=null?y.skewX:0,y.skewY=y.skewY!=null?y.skewY:0,P=new s.Skew(y.skewX,y.skewY,y.cx,y.cy)):y.flip?(y.flip=="x"||y.flip=="y"?y.offset=y.offset==null?A.bbox()["c"+y.flip]:y.offset:y.offset==null?(Y=A.bbox(),y.flip=Y.cx,y.offset=Y.cy):y.flip=y.offset,P=new s.Matrix().flip(y.flip,y.offset)):(y.x!=null||y.y!=null)&&(P=new s.Translate(y.x,y.y)),P?(P.relative=M,this.last().transforms.push(P),this._callStart()):this)}}),s.extend(s.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){var y=(this.attr("transform")||"").split(s.regex.transforms).slice(0,-1).map(function(M){var A=M.trim().split("(");return[A[0],A[1].split(s.regex.delimiter).map(function(P){return parseFloat(P)})]}).reduce(function(M,A){return A[0]=="matrix"?M.multiply(T(A[1])):M[A[0]].apply(M,A[1])},new s.Matrix);return y},toParent:function(y){if(this==y)return this;var M=this.screenCTM(),A=y.screenCTM().inverse();return this.addTo(y).untransform().transform(A.multiply(M)),this},toDoc:function(){return this.toParent(this.doc())}}),s.Transformation=s.invent({create:function(y,M){if(arguments.length>1&&typeof M!="boolean")return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(y))for(var A=0,P=this.arguments.length;A<P;++A)this[this.arguments[A]]=y[A];else if(typeof y=="object")for(var A=0,P=this.arguments.length;A<P;++A)this[this.arguments[A]]=y[this.arguments[A]];this.inversed=!1,M===!0&&(this.inversed=!0)},extend:{arguments:[],method:"",at:function(y){for(var M=[],A=0,P=this.arguments.length;A<P;++A)M.push(this[this.arguments[A]]);var Y=this._undo||new s.Matrix;return Y=new s.Matrix().morph(s.Matrix.prototype[this.method].apply(Y,M)).at(y),this.inversed?Y.inverse():Y},undo:function(y){for(var M=0,A=this.arguments.length;M<A;++M)y[this.arguments[M]]=typeof this[this.arguments[M]]>"u"?0:y[this.arguments[M]];return y.cx=this.cx,y.cy=this.cy,this._undo=new s[w(this.method)](y,!0).at(1),this}}}),s.Translate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,M){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),s.Rotate=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,M){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["rotation","cx","cy"],method:"rotate",at:function(y){var M=new s.Matrix().rotate(new s.Number().morph(this.rotation-(this._undo?this._undo.rotation:0)).at(y),this.cx,this.cy);return this.inversed?M.inverse():M},undo:function(y){return this._undo=y,this}}}),s.Scale=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,M){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["scaleX","scaleY","cx","cy"],method:"scale"}}),s.Skew=s.invent({parent:s.Matrix,inherit:s.Transformation,create:function(y,M){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["skewX","skewY","cx","cy"],method:"skew"}}),s.extend(s.Element,{style:function(y,M){if(arguments.length==0)return this.node.style.cssText||"";if(arguments.length<2)if(typeof y=="object")for(M in y)this.style(M,y[M]);else if(s.regex.isCss.test(y))for(y=y.split(/\s*;\s*/).filter(function(A){return!!A}).map(function(A){return A.split(/\s*:\s*/)});M=y.pop();)this.style(M[0],M[1]);else return this.node.style[b(y)];else this.node.style[b(y)]=M===null||s.regex.isBlank.test(M)?"":M;return this}}),s.Parent=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element,extend:{children:function(){return s.utils.map(s.utils.filterSVGElements(this.node.childNodes),function(y){return s.adopt(y)})},add:function(y,M){return M==null?this.node.appendChild(y.node):y.node!=this.node.childNodes[M]&&this.node.insertBefore(y.node,this.node.childNodes[M]),this},put:function(y,M){return this.add(y,M),y},has:function(y){return this.index(y)>=0},index:function(y){return[].slice.call(this.node.childNodes).indexOf(y.node)},get:function(y){return s.adopt(this.node.childNodes[y])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(y,M){var A,P,Y=this.children();for(A=0,P=Y.length;A<P;A++)Y[A]instanceof s.Element&&y.apply(Y[A],[A,Y]),M&&Y[A]instanceof s.Container&&Y[A].each(y,M);return this},removeElement:function(y){return this.node.removeChild(y.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),s.extend(s.Parent,{ungroup:function(y,M){return M===0||this instanceof s.Defs||this.node==s.parser.draw?this:(y=y||(this instanceof s.Doc?this:this.parent(s.Parent)),M=M||1/0,this.each(function(){return this instanceof s.Defs?this:this instanceof s.Parent?this.ungroup(y,M-1):this.toParent(y)}),this.node.firstChild||this.remove(),this)},flatten:function(y,M){return this.ungroup(y,M)}}),s.Container=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Parent}),s.ViewBox=s.invent({create:function(y){var M=[0,0,0,0],A,P,Y,Q,le,re,we,_e=1,Ce=1,Ne=/[+-]?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?/gi;if(y instanceof s.Element){for(re=y,we=y,le=(y.attr("viewBox")||"").match(Ne),Y=new s.Number(y.width()),Q=new s.Number(y.height());Y.unit=="%";)_e*=Y.value,Y=new s.Number(re instanceof s.Doc?re.parent().offsetWidth:re.parent().width()),re=re.parent();for(;Q.unit=="%";)Ce*=Q.value,Q=new s.Number(we instanceof s.Doc?we.parent().offsetHeight:we.parent().height()),we=we.parent();this.x=0,this.y=0,this.width=Y*_e,this.height=Q*Ce,this.zoom=1,le&&(A=parseFloat(le[0]),P=parseFloat(le[1]),Y=parseFloat(le[2]),Q=parseFloat(le[3]),this.zoom=this.width/this.height>Y/Q?this.height/Q:this.width/Y,this.x=A,this.y=P,this.width=Y,this.height=Q)}else y=typeof y=="string"?y.match(Ne).map(function(ht){return parseFloat(ht)}):Array.isArray(y)?y:typeof y=="object"?[y.x,y.y,y.width,y.height]:arguments.length==4?[].slice.call(arguments):M,this.x=y[0],this.y=y[1],this.width=y[2],this.height=y[3]},extend:{toString:function(){return this.x+" "+this.y+" "+this.width+" "+this.height},morph:function(y,M,A,P){return this.destination=new s.ViewBox(y,M,A,P),this},at:function(y){return this.destination?new s.ViewBox([this.x+(this.destination.x-this.x)*y,this.y+(this.destination.y-this.y)*y,this.width+(this.destination.width-this.width)*y,this.height+(this.destination.height-this.height)*y]):this}},parent:s.Container,construct:{viewbox:function(y,M,A,P){return arguments.length==0?new s.ViewBox(this):this.attr("viewBox",new s.ViewBox(y,M,A,P))}}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","mouseenter","mouseleave","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach(function(y){s.Element.prototype[y]=function(M){return M==null?s.off(this,y):s.on(this,y,M),this}}),s.listenerId=0,s.on=function(y,M,A,P,Y){var Q=A.bind(P||y),le=y instanceof s.Element?y.node:y;le.instance=le.instance||{_events:{}};var re=le.instance._events;A._svgjsListenerId||(A._svgjsListenerId=++s.listenerId),M.split(s.regex.delimiter).forEach(function(we){var _e=we.split(".")[0],Ce=we.split(".")[1]||"*";re[_e]=re[_e]||{},re[_e][Ce]=re[_e][Ce]||{},re[_e][Ce][A._svgjsListenerId]=Q,le.addEventListener(_e,Q,Y||!1)})},s.off=function(y,M,A,P){var Y=y instanceof s.Element?y.node:y;if(!!Y.instance&&!(typeof A=="function"&&(A=A._svgjsListenerId,!A))){var Q=Y.instance._events;(M||"").split(s.regex.delimiter).forEach(function(le){var re=le&&le.split(".")[0],we=le&&le.split(".")[1],_e,Ce;if(A)Q[re]&&Q[re][we||"*"]&&(Y.removeEventListener(re,Q[re][we||"*"][A],P||!1),delete Q[re][we||"*"][A]);else if(re&&we){if(Q[re]&&Q[re][we]){for(Ce in Q[re][we])s.off(Y,[re,we].join("."),Ce);delete Q[re][we]}}else if(we)for(le in Q)for(_e in Q[le])we===_e&&s.off(Y,[le,we].join("."));else if(re){if(Q[re]){for(_e in Q[re])s.off(Y,[re,_e].join("."));delete Q[re]}}else{for(le in Q)s.off(Y,le);Y.instance._events={}}})}},s.extend(s.Element,{on:function(y,M,A,P){return s.on(this,y,M,A,P),this},off:function(y,M){return s.off(this.node,y,M),this},fire:function(y,M){return y instanceof r.Event?this.node.dispatchEvent(y):this.node.dispatchEvent(y=new s.CustomEvent(y,{detail:M,cancelable:!0})),this._event=y,this},event:function(){return this._event}}),s.Defs=s.invent({create:"defs",inherit:s.Container}),s.G=s.invent({create:"g",inherit:s.Container,extend:{x:function(y){return y==null?this.transform("x"):this.transform({x:y-this.x()},!0)},y:function(y){return y==null?this.transform("y"):this.transform({y:y-this.y()},!0)},cx:function(y){return y==null?this.gbox().cx:this.x(y-this.gbox().width/2)},cy:function(y){return y==null?this.gbox().cy:this.y(y-this.gbox().height/2)},gbox:function(){var y=this.bbox(),M=this.transform();return y.x+=M.x,y.x2+=M.x,y.cx+=M.x,y.y+=M.y,y.y2+=M.y,y.cy+=M.y,y}},construct:{group:function(){return this.put(new s.G)}}}),s.Doc=s.invent({create:function(y){y&&(y=typeof y=="string"?i.getElementById(y):y,y.nodeName=="svg"?this.constructor.call(this,y):(this.constructor.call(this,s.create("svg")),y.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:s.Container,extend:{namespace:function(){return this.attr({xmlns:s.ns,version:"1.1"}).attr("xmlns:xlink",s.xlink,s.xmlns).attr("xmlns:svgjs",s.svgjs,s.xmlns)},defs:function(){if(!this._defs){var y;(y=this.node.getElementsByTagName("defs")[0])?this._defs=s.adopt(y):this._defs=new s.Defs,this.node.appendChild(this._defs.node)}return this._defs},parent:function(){return!this.node.parentNode||this.node.parentNode.nodeName=="#document"||this.node.parentNode.nodeName=="#document-fragment"?null:this.node.parentNode},spof:function(){var y=this.node.getScreenCTM();return y&&this.style("left",-y.e%1+"px").style("top",-y.f%1+"px"),this},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,s.parser.draw.parentNode||this.node.appendChild(s.parser.draw),this},clone:function(y){this.writeDataToDom();var M=this.node,A=O(M.cloneNode(!0));return y?(y.node||y).appendChild(A.node):M.parentNode.insertBefore(A.node,M.nextSibling),A}}}),s.extend(s.Element,{siblings:function(){return this.parent().children()},position:function(){return this.parent().index(this)},next:function(){return this.siblings()[this.position()+1]},previous:function(){return this.siblings()[this.position()-1]},forward:function(){var y=this.position()+1,M=this.parent();return M.removeElement(this).add(this,y),M instanceof s.Doc&&M.node.appendChild(M.defs().node),this},backward:function(){var y=this.position();return y>0&&this.parent().removeElement(this).add(this,y-1),this},front:function(){var y=this.parent();return y.node.appendChild(this.node),y instanceof s.Doc&&y.node.appendChild(y.defs().node),this},back:function(){return this.position()>0&&this.parent().removeElement(this).add(this,0),this},before:function(y){y.remove();var M=this.position();return this.parent().add(y,M),this},after:function(y){y.remove();var M=this.position();return this.parent().add(y,M+1),this}}),s.Mask=s.invent({create:function(){this.constructor.call(this,s.create("mask")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unmask();return this.targets=[],s.Element.prototype.remove.call(this),this}},construct:{mask:function(){return this.defs().put(new s.Mask)}}}),s.extend(s.Element,{maskWith:function(y){return this.masker=y instanceof s.Mask?y:this.parent().mask().add(y),this.masker.targets.push(this),this.attr("mask",'url("#'+this.masker.attr("id")+'")')},unmask:function(){return delete this.masker,this.attr("mask",null)}}),s.ClipPath=s.invent({create:function(){this.constructor.call(this,s.create("clipPath")),this.targets=[]},inherit:s.Container,extend:{remove:function(){for(var y=this.targets.length-1;y>=0;y--)this.targets[y]&&this.targets[y].unclip();return this.targets=[],this.parent().removeElement(this),this}},construct:{clip:function(){return this.defs().put(new s.ClipPath)}}}),s.extend(s.Element,{clipWith:function(y){return this.clipper=y instanceof s.ClipPath?y:this.parent().clip().add(y),this.clipper.targets.push(this),this.attr("clip-path",'url("#'+this.clipper.attr("id")+'")')},unclip:function(){return delete this.clipper,this.attr("clip-path",null)}}),s.Gradient=s.invent({create:function(y){this.constructor.call(this,s.create(y+"Gradient")),this.type=y},inherit:s.Container,extend:{at:function(y,M,A){return this.put(new s.Stop).update(y,M,A)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(y,M,A){return y=="transform"&&(y="gradientTransform"),s.Container.prototype.attr.call(this,y,M,A)}},construct:{gradient:function(y,M){return this.defs().gradient(y,M)}}}),s.extend(s.Gradient,s.FX,{from:function(y,M){return(this._target||this).type=="radial"?this.attr({fx:new s.Number(y),fy:new s.Number(M)}):this.attr({x1:new s.Number(y),y1:new s.Number(M)})},to:function(y,M){return(this._target||this).type=="radial"?this.attr({cx:new s.Number(y),cy:new s.Number(M)}):this.attr({x2:new s.Number(y),y2:new s.Number(M)})}}),s.extend(s.Defs,{gradient:function(y,M){return this.put(new s.Gradient(y)).update(M)}}),s.Stop=s.invent({create:"stop",inherit:s.Element,extend:{update:function(y){return(typeof y=="number"||y instanceof s.Number)&&(y={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),y.opacity!=null&&this.attr("stop-opacity",y.opacity),y.color!=null&&this.attr("stop-color",y.color),y.offset!=null&&this.attr("offset",new s.Number(y.offset)),this}}}),s.Pattern=s.invent({create:"pattern",inherit:s.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return this.fill()},attr:function(y,M,A){return y=="transform"&&(y="patternTransform"),s.Container.prototype.attr.call(this,y,M,A)}},construct:{pattern:function(y,M,A){return this.defs().pattern(y,M,A)}}}),s.extend(s.Defs,{pattern:function(y,M,A){return this.put(new s.Pattern).update(A).attr({x:0,y:0,width:y,height:M,patternUnits:"userSpaceOnUse"})}}),s.Shape=s.invent({create:function(y){this.constructor.call(this,y)},inherit:s.Element}),s.Bare=s.invent({create:function(y,M){if(this.constructor.call(this,s.create(y)),M)for(var A in M.prototype)typeof M.prototype[A]=="function"&&(this[A]=M.prototype[A])},inherit:s.Element,extend:{words:function(y){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return this.node.appendChild(i.createTextNode(y)),this}}}),s.extend(s.Parent,{element:function(y,M){return this.put(new s.Bare(y,M))}}),s.Symbol=s.invent({create:"symbol",inherit:s.Container,construct:{symbol:function(){return this.put(new s.Symbol)}}}),s.Use=s.invent({create:"use",inherit:s.Shape,extend:{element:function(y,M){return this.attr("href",(M||"")+"#"+y,s.xlink)}},construct:{use:function(y,M){return this.put(new s.Use).element(y,M)}}}),s.Rect=s.invent({create:"rect",inherit:s.Shape,construct:{rect:function(y,M){return this.put(new s.Rect).size(y,M)}}}),s.Circle=s.invent({create:"circle",inherit:s.Shape,construct:{circle:function(y){return this.put(new s.Circle).rx(new s.Number(y).divide(2)).move(0,0)}}}),s.extend(s.Circle,s.FX,{rx:function(y){return this.attr("r",y)},ry:function(y){return this.rx(y)}}),s.Ellipse=s.invent({create:"ellipse",inherit:s.Shape,construct:{ellipse:function(y,M){return this.put(new s.Ellipse).size(y,M).move(0,0)}}}),s.extend(s.Ellipse,s.Rect,s.FX,{rx:function(y){return this.attr("rx",y)},ry:function(y){return this.attr("ry",y)}}),s.extend(s.Circle,s.Ellipse,{x:function(y){return y==null?this.cx()-this.rx():this.cx(y+this.rx())},y:function(y){return y==null?this.cy()-this.ry():this.cy(y+this.ry())},cx:function(y){return y==null?this.attr("cx"):this.attr("cx",y)},cy:function(y){return y==null?this.attr("cy"):this.attr("cy",y)},width:function(y){return y==null?this.rx()*2:this.rx(new s.Number(y).divide(2))},height:function(y){return y==null?this.ry()*2:this.ry(new s.Number(y).divide(2))},size:function(y,M){var A=I(this,y,M);return this.rx(new s.Number(A.width).divide(2)).ry(new s.Number(A.height).divide(2))}}),s.Line=s.invent({create:"line",inherit:s.Shape,extend:{array:function(){return new s.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(y,M,A,P){return y==null?this.array():(typeof M<"u"?y={x1:y,y1:M,x2:A,y2:P}:y=new s.PointArray(y).toLine(),this.attr(y))},move:function(y,M){return this.attr(this.array().move(y,M).toLine())},size:function(y,M){var A=I(this,y,M);return this.attr(this.array().size(A.width,A.height).toLine())}},construct:{line:function(y,M,A,P){return s.Line.prototype.plot.apply(this.put(new s.Line),y!=null?[y,M,A,P]:[0,0,0,0])}}}),s.Polyline=s.invent({create:"polyline",inherit:s.Shape,construct:{polyline:function(y){return this.put(new s.Polyline).plot(y||new s.PointArray)}}}),s.Polygon=s.invent({create:"polygon",inherit:s.Shape,construct:{polygon:function(y){return this.put(new s.Polygon).plot(y||new s.PointArray)}}}),s.extend(s.Polyline,s.Polygon,{array:function(){return this._array||(this._array=new s.PointArray(this.attr("points")))},plot:function(y){return y==null?this.array():this.clear().attr("points",typeof y=="string"?y:this._array=new s.PointArray(y))},clear:function(){return delete this._array,this},move:function(y,M){return this.attr("points",this.array().move(y,M))},size:function(y,M){var A=I(this,y,M);return this.attr("points",this.array().size(A.width,A.height))}}),s.extend(s.Line,s.Polyline,s.Polygon,{morphArray:s.PointArray,x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},width:function(y){var M=this.bbox();return y==null?M.width:this.size(y,M.height)},height:function(y){var M=this.bbox();return y==null?M.height:this.size(M.width,y)}}),s.Path=s.invent({create:"path",inherit:s.Shape,extend:{morphArray:s.PathArray,array:function(){return this._array||(this._array=new s.PathArray(this.attr("d")))},plot:function(y){return y==null?this.array():this.clear().attr("d",typeof y=="string"?y:this._array=new s.PathArray(y))},clear:function(){return delete this._array,this},move:function(y,M){return this.attr("d",this.array().move(y,M))},x:function(y){return y==null?this.bbox().x:this.move(y,this.bbox().y)},y:function(y){return y==null?this.bbox().y:this.move(this.bbox().x,y)},size:function(y,M){var A=I(this,y,M);return this.attr("d",this.array().size(A.width,A.height))},width:function(y){return y==null?this.bbox().width:this.size(y,this.bbox().height)},height:function(y){return y==null?this.bbox().height:this.size(this.bbox().width,y)}},construct:{path:function(y){return this.put(new s.Path).plot(y||new s.PathArray)}}}),s.Image=s.invent({create:"image",inherit:s.Shape,extend:{load:function(y){if(!y)return this;var M=this,A=new r.Image;return s.on(A,"load",function(){s.off(A);var P=M.parent(s.Pattern);P!==null&&(M.width()==0&&M.height()==0&&M.size(A.width,A.height),P&&P.width()==0&&P.height()==0&&P.size(M.width(),M.height()),typeof M._loaded=="function"&&M._loaded.call(M,{width:A.width,height:A.height,ratio:A.width/A.height,url:y}))}),s.on(A,"error",function(P){s.off(A),typeof M._error=="function"&&M._error.call(M,P)}),this.attr("href",A.src=this.src=y,s.xlink)},loaded:function(y){return this._loaded=y,this},error:function(y){return this._error=y,this}},construct:{image:function(y,M,A){return this.put(new s.Image).load(y).size(M||0,A||M||0)}}}),s.Text=s.invent({create:function(){this.constructor.call(this,s.create("text")),this.dom.leading=new s.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",s.defaults.attrs["font-family"])},inherit:s.Shape,extend:{x:function(y){return y==null?this.attr("x"):this.attr("x",y)},y:function(y){var M=this.attr("y"),A=typeof M=="number"?M-this.bbox().y:0;return y==null?typeof M=="number"?M-A:M:this.attr("y",typeof y.valueOf()=="number"?y+A:y)},cx:function(y){return y==null?this.bbox().cx:this.x(y-this.bbox().width/2)},cy:function(y){return y==null?this.bbox().cy:this.y(y-this.bbox().height/2)},text:function(y){if(typeof y>"u"){for(var y="",M=this.node.childNodes,A=0,P=M.length;A<P;++A)A!=0&&M[A].nodeType!=3&&s.adopt(M[A]).dom.newLined==!0&&(y+=`
`),y+=M[A].textContent;return y}if(this.clear().build(!0),typeof y=="function")y.call(this,this);else{y=y.split(`
`);for(var A=0,Y=y.length;A<Y;A++)this.tspan(y[A]).newLine()}return this.build(!1).rebuild()},size:function(y){return this.attr("font-size",y).rebuild()},leading:function(y){return y==null?this.dom.leading:(this.dom.leading=new s.Number(y),this.rebuild())},lines:function(){var y=(this.textPath&&this.textPath()||this).node,M=s.utils.map(s.utils.filterSVGElements(y.childNodes),function(A){return s.adopt(A)});return new s.Set(M)},rebuild:function(y){if(typeof y=="boolean"&&(this._rebuild=y),this._rebuild){var M=this,A=0,P=this.dom.leading*new s.Number(this.attr("font-size"));this.lines().each(function(){this.dom.newLined&&(M.textPath()||this.attr("x",M.attr("x")),this.text()==`
`?A+=P:(this.attr("dy",P+A),A=0))}),this.fire("rebuild")}return this},build:function(y){return this._build=!!y,this},setData:function(y){return this.dom=y,this.dom.leading=new s.Number(y.leading||1.3),this}},construct:{text:function(y){return this.put(new s.Text).text(y)},plain:function(y){return this.put(new s.Text).plain(y)}}}),s.Tspan=s.invent({create:"tspan",inherit:s.Shape,extend:{text:function(y){return y==null?this.node.textContent+(this.dom.newLined?`
`:""):(typeof y=="function"?y.call(this,this):this.plain(y),this)},dx:function(y){return this.attr("dx",y)},dy:function(y){return this.attr("dy",y)},newLine:function(){var y=this.parent(s.Text);return this.dom.newLined=!0,this.dy(y.dom.leading*y.attr("font-size")).attr("x",y.x())}}}),s.extend(s.Text,s.Tspan,{plain:function(y){return this._build===!1&&this.clear(),this.node.appendChild(i.createTextNode(y)),this},tspan:function(y){var M=(this.textPath&&this.textPath()||this).node,A=new s.Tspan;return this._build===!1&&this.clear(),M.appendChild(A.node),A.text(y)},clear:function(){for(var y=(this.textPath&&this.textPath()||this).node;y.hasChildNodes();)y.removeChild(y.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),s.TextPath=s.invent({create:"textPath",inherit:s.Parent,parent:s.Text,construct:{morphArray:s.PathArray,path:function(y){for(var M=new s.TextPath,A=this.doc().defs().path(y);this.node.hasChildNodes();)M.node.appendChild(this.node.firstChild);return this.node.appendChild(M.node),M.attr("href","#"+A,s.xlink),this},array:function(){var y=this.track();return y?y.array():null},plot:function(y){var M=this.track(),A=null;return M&&(A=M.plot(y)),y==null?A:this},track:function(){var y=this.textPath();if(y)return y.reference("href")},textPath:function(){if(this.node.firstChild&&this.node.firstChild.nodeName=="textPath")return s.adopt(this.node.firstChild)}}}),s.Nested=s.invent({create:function(){this.constructor.call(this,s.create("svg")),this.style("overflow","visible")},inherit:s.Container,construct:{nested:function(){return this.put(new s.Nested)}}}),s.A=s.invent({create:"a",inherit:s.Container,extend:{to:function(y){return this.attr("href",y,s.xlink)},show:function(y){return this.attr("show",y,s.xlink)},target:function(y){return this.attr("target",y)}},construct:{link:function(y){return this.put(new s.A).to(y)}}}),s.extend(s.Element,{linkTo:function(y){var M=new s.A;return typeof y=="function"?y.call(M,M):M.to(y),this.parent().put(M).put(this)}}),s.Marker=s.invent({create:"marker",inherit:s.Container,extend:{width:function(y){return this.attr("markerWidth",y)},height:function(y){return this.attr("markerHeight",y)},ref:function(y,M){return this.attr("refX",y).attr("refY",M)},update:function(y){return this.clear(),typeof y=="function"&&y.call(this,this),this},toString:function(){return"url(#"+this.id()+")"}},construct:{marker:function(y,M,A){return this.defs().marker(y,M,A)}}}),s.extend(s.Defs,{marker:function(y,M,A){return this.put(new s.Marker).size(y,M).ref(y/2,M/2).viewbox(0,0,y,M).attr("orient","auto").update(A)}}),s.extend(s.Line,s.Polyline,s.Polygon,s.Path,{marker:function(y,M,A,P){var Y=["marker"];return y!="all"&&Y.push(y),Y=Y.join("-"),y=arguments[1]instanceof s.Marker?arguments[1]:this.doc().marker(M,A,P),this.attr(Y,y)}});var h={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(y,M){return M=="color"?y:y+"-"+M}};["fill","stroke"].forEach(function(y){var M,A={};A[y]=function(P){if(typeof P>"u")return this;if(typeof P=="string"||s.Color.isRgb(P)||P&&typeof P.fill=="function")this.attr(y,P);else for(M=h[y].length-1;M>=0;M--)P[h[y][M]]!=null&&this.attr(h.prefix(y,h[y][M]),P[h[y][M]]);return this},s.extend(s.Element,s.FX,A)}),s.extend(s.Element,s.FX,{rotate:function(y,M,A){return this.transform({rotation:y,cx:M,cy:A})},skew:function(y,M,A,P){return arguments.length==1||arguments.length==3?this.transform({skew:y,cx:M,cy:A}):this.transform({skewX:y,skewY:M,cx:A,cy:P})},scale:function(y,M,A,P){return arguments.length==1||arguments.length==3?this.transform({scale:y,cx:M,cy:A}):this.transform({scaleX:y,scaleY:M,cx:A,cy:P})},translate:function(y,M){return this.transform({x:y,y:M})},flip:function(y,M){return M=typeof y=="number"?y:M,this.transform({flip:y||"both",offset:M})},matrix:function(y){return this.attr("transform",new s.Matrix(arguments.length==6?[].slice.call(arguments):y))},opacity:function(y){return this.attr("opacity",y)},dx:function(y){return this.x(new s.Number(y).plus(this instanceof s.FX?0:this.x()),!0)},dy:function(y){return this.y(new s.Number(y).plus(this instanceof s.FX?0:this.y()),!0)},dmove:function(y,M){return this.dx(y).dy(M)}}),s.extend(s.Rect,s.Ellipse,s.Circle,s.Gradient,s.FX,{radius:function(y,M){var A=(this._target||this).type;return A=="radial"||A=="circle"?this.attr("r",new s.Number(y)):this.rx(y).ry(M??y)}}),s.extend(s.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(y){return this.node.getPointAtLength(y)}}),s.extend(s.Parent,s.Text,s.Tspan,s.FX,{font:function(y,M){if(typeof y=="object")for(M in y)this.font(M,y[M]);return y=="leading"?this.leading(M):y=="anchor"?this.attr("text-anchor",M):y=="size"||y=="family"||y=="weight"||y=="stretch"||y=="variant"||y=="style"?this.attr("font-"+y,M):this.attr(y,M)}}),s.Set=s.invent({create:function(y){y instanceof s.Set?this.members=y.members.slice():Array.isArray(y)?this.members=y:this.clear()},extend:{add:function(){var y,M,A=[].slice.call(arguments);for(y=0,M=A.length;y<M;y++)this.members.push(A[y]);return this},remove:function(y){var M=this.index(y);return M>-1&&this.members.splice(M,1),this},each:function(y){for(var M=0,A=this.members.length;M<A;M++)y.apply(this.members[M],[M,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(y){return this.index(y)>=0},index:function(y){return this.members.indexOf(y)},get:function(y){return this.members[y]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members},bbox:function(){if(this.members.length==0)return new s.RBox;var y=this.members[0].rbox(this.members[0].doc());return this.each(function(){y=y.merge(this.rbox(this.doc()))}),y}},construct:{set:function(y){return new s.Set(y)}}}),s.FX.Set=s.invent({create:function(y){this.set=y}}),s.Set.inherit=function(){var y,M=[];for(var y in s.Shape.prototype)typeof s.Shape.prototype[y]=="function"&&typeof s.Set.prototype[y]!="function"&&M.push(y);M.forEach(function(A){s.Set.prototype[A]=function(){for(var P=0,Y=this.members.length;P<Y;P++)this.members[P]&&typeof this.members[P][A]=="function"&&this.members[P][A].apply(this.members[P],arguments);return A=="animate"?this.fx||(this.fx=new s.FX.Set(this)):this}}),M=[];for(var y in s.FX.prototype)typeof s.FX.prototype[y]=="function"&&typeof s.FX.Set.prototype[y]!="function"&&M.push(y);M.forEach(function(A){s.FX.Set.prototype[A]=function(){for(var P=0,Y=this.set.members.length;P<Y;P++)this.set.members[P].fx[A].apply(this.set.members[P].fx,arguments);return this}})},s.extend(s.Element,{data:function(y,M,A){if(typeof y=="object")for(M in y)this.data(M,y[M]);else if(arguments.length<2)try{return JSON.parse(this.attr("data-"+y))}catch{return this.attr("data-"+y)}else this.attr("data-"+y,M===null?null:A===!0||typeof M=="string"||typeof M=="number"?M:JSON.stringify(M));return this}}),s.extend(s.Element,{remember:function(y,M){if(typeof arguments[0]=="object")for(var M in y)this.remember(M,y[M]);else{if(arguments.length==1)return this.memory()[y];this.memory()[y]=M}return this},forget:function(){if(arguments.length==0)this._memory={};else for(var y=arguments.length-1;y>=0;y--)delete this.memory()[arguments[y]];return this},memory:function(){return this._memory||(this._memory={})}}),s.get=function(y){var M=i.getElementById(D(y)||y);return s.adopt(M)},s.select=function(y,M){return new s.Set(s.utils.map((M||i).querySelectorAll(y),function(A){return s.adopt(A)}))},s.extend(s.Parent,{select:function(y){return s.select(y,this.node)}});function d(y,M,A,P){return A+P.replace(s.regex.dots," .")}function f(y){for(var M=y.slice(0),A=M.length;A--;)Array.isArray(M[A])&&(M[A]=f(M[A]));return M}function m(y,M){return y instanceof M}function g(y,M){return(y.matches||y.matchesSelector||y.msMatchesSelector||y.mozMatchesSelector||y.webkitMatchesSelector||y.oMatchesSelector).call(y,M)}function b(y){return y.toLowerCase().replace(/-(.)/g,function(M,A){return A.toUpperCase()})}function w(y){return y.charAt(0).toUpperCase()+y.slice(1)}function _(y){return y.length==4?["#",y.substring(1,2),y.substring(1,2),y.substring(2,3),y.substring(2,3),y.substring(3,4),y.substring(3,4)].join(""):y}function x(y){var M=y.toString(16);return M.length==1?"0"+M:M}function I(y,M,A){if(M==null||A==null){var P=y.bbox();M==null?M=P.width/P.height*A:A==null&&(A=P.height/P.width*M)}return{width:M,height:A}}function S(y,M,A){return{x:M*y.a+A*y.c+0,y:M*y.b+A*y.d+0}}function T(y){return{a:y[0],b:y[1],c:y[2],d:y[3],e:y[4],f:y[5]}}function $(y){return y instanceof s.Matrix||(y=new s.Matrix(y)),y}function E(y,M){y.cx=y.cx==null?M.bbox().cx:y.cx,y.cy=y.cy==null?M.bbox().cy:y.cy}function C(y){for(var M=0,A=y.length,P="";M<A;M++)P+=y[M][0],y[M][1]!=null&&(P+=y[M][1],y[M][2]!=null&&(P+=" ",P+=y[M][2],y[M][3]!=null&&(P+=" ",P+=y[M][3],P+=" ",P+=y[M][4],y[M][5]!=null&&(P+=" ",P+=y[M][5],P+=" ",P+=y[M][6],y[M][7]!=null&&(P+=" ",P+=y[M][7])))));return P+" "}function O(y){for(var M=y.childNodes.length-1;M>=0;M--)y.childNodes[M]instanceof r.SVGElement&&O(y.childNodes[M]);return s.adopt(y).id(s.eid(y.nodeName))}function R(y){return y.x==null&&(y.x=0,y.y=0,y.width=0,y.height=0),y.w=y.width,y.h=y.height,y.x2=y.x+y.width,y.y2=y.y+y.height,y.cx=y.x+y.width/2,y.cy=y.y+y.height/2,y}function D(y){var M=(y||"").toString().match(s.regex.reference);if(M)return M[1]}function F(y){return Math.abs(y)>1e-37?y:0}var z="abcdef".split("");if(typeof r.CustomEvent!="function"){var B=function(y,M){M=M||{bubbles:!1,cancelable:!1,detail:void 0};var A=i.createEvent("CustomEvent");return A.initCustomEvent(y,M.bubbles,M.cancelable,M.detail),A};B.prototype=r.Event.prototype,s.CustomEvent=B}else s.CustomEvent=r.CustomEvent;return function(y){for(var M=0,A=["moz","webkit"],P=0;P<A.length&&!r.requestAnimationFrame;++P)y.requestAnimationFrame=y[A[P]+"RequestAnimationFrame"],y.cancelAnimationFrame=y[A[P]+"CancelAnimationFrame"]||y[A[P]+"CancelRequestAnimationFrame"];y.requestAnimationFrame=y.requestAnimationFrame||function(Y){var Q=new Date().getTime(),le=Math.max(0,16-(Q-M)),re=y.setTimeout(function(){Y(Q+le)},le);return M=Q+le,re},y.cancelAnimationFrame=y.cancelAnimationFrame||y.clearTimeout}(r),s})})(Ple);var eg=Ple.exports;class Ret extends Gi{constructor(t){super(t)}SIMPLE="simple";UNIQUE_VALUE="unique-value";CLASS_BREAKS="class-breaks";NONE="none";CONTAINER_SIZE=32;CONTENT_SIZE=24;CONTENT_IMAGE_SIZE=28;CONTAINER_CENTER=this.CONTAINER_SIZE/2;CONTENT_PADDING=(this.CONTAINER_SIZE-this.CONTENT_SIZE)/2;getGraphicIcon(t,r){return r.getGraphicIcon(t)}getGraphicSymbol(t,r){return r.getGraphicSymbol(t)}makeRenderer(t,r,i=!1){switch(t.type){case this.SIMPLE:return new ket(t,r);case this.CLASS_BREAKS:return new Pet(t,r,i);case this.UNIQUE_VALUE:return new Oet(t,r,i);default:throw new Error(`Unknown renderer type encountered - ${t.type}`)}}async generateWMSSymbology(t){const r=eg(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0),i={svgcode:"",imgHeight:"",imgWidth:""};if(t){const n=await this.renderSymbologyImage(t);if(n){i.svgcode=n;const s=document.createElement("span");s.innerHTML=n;const o=s.firstElementChild?.lastElementChild;i.imgHeight=o?.getAttribute("height")||"",i.imgWidth=o?.getAttribute("width")||""}else i.svgcode=r.svg()}else i.svgcode=r.svg();return i}listToSymbology(t,r){return r.map(({text:n,image:s})=>{const o={name:n,image:s,svgcode:""};return t(s).then(a=>{o.svgcode=a}),o})}listToIconSymbology(t){return this.listToSymbology(this.renderSymbologyIcon,t)}listToImageSymbology(t){return this.listToSymbology(this.renderSymbologyImage,t)}async renderSymbologyImage(t,r=null){r===null&&(r=eg(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,0,0));const i=await this.$iApi.geo.shared.convertImagetoDataURL(t);if(i===t)return"";const{loader:n}=await this.svgDrawImage(r,i);return r.viewbox(0,0,n.width,n.height),r.svg()}async renderSymbologyIcon(t,r=null){if(r===null){const s=window.document.createElement("div");s.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(s),r=eg(s).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE)}const i=await this.$iApi.geo.shared.convertImagetoDataURL(t),{image:n}=await this.svgDrawImage(r,i);return n.center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),this.fitInto(n,this.CONTENT_IMAGE_SIZE),r.svg()}generatePlaceholderSymbology(t,r="#000"){const i=eg(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE);return i.rect(this.CONTENT_IMAGE_SIZE,this.CONTENT_IMAGE_SIZE).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER).fill(r),i.text(t[0].toUpperCase()).size(23).fill("#fff").attr({"font-weight":"bold","font-family":"Roboto"}).center(this.CONTAINER_CENTER,this.CONTAINER_CENTER),{name:t,svgcode:i.svg()}}async generateBlankSymbology(){return eg(window.document.createElement("div")).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).svg()}async symbolToSvg(t){const r=this,i=1.33333,n=window.document.createElement("div");n.setAttribute("style","opacity:0;position:fixed;left:100%;top:100%;overflow:hidden"),window.document.body.appendChild(n);const s=eg(n).size(this.CONTAINER_SIZE,this.CONTAINER_SIZE).viewbox(0,0,this.CONTAINER_SIZE,this.CONTAINER_SIZE),o={path({size:g,path:b}){return s.path(b).size(g*i)},circle({size:g}){return s.circle(g*i)},cross({size:g}){return s.path("M 0,10 L 20,10 M 10,0 L 10,20").size(g*i)},x({size:g}){return s.path("M 0,0 L 20,20 M 20,0 L 0,20").size(g*i)},triangle({size:g}){return s.path("M 20,20 L 10,0 0,20 Z").size(g*i)},diamond({size:g}){return s.path("M 20,10 L 10,0 0,10 10,20 Z").size(g*i)},square({size:g}){return s.path("M 0,0 20,0 20,20 0,20 Z").size(g*i)}},a={[Ts.SOLID]:"none",[Ts.NONE]:"none",[Ts.DASH]:"5.333,4",[Ts.DOT]:"1.333,4",[Ts.DASHDOT]:"5.333,4,1.333,4",[Ts.LONGDASH]:"10.666,4",[Ts.LONGDASHDOT]:"10.666,4,1.333,4",[Ts.LONGDASHDOTDOT]:"10.666,4,1.333,4,1.333,4",[Ts.SHORTDOT]:"1.333,1.333",[Ts.SHORTDASH]:"5.333,1.333",[Ts.SHORTDASHDOT]:"5.333,1.333,1.333,1.333",[Ts.SHORTDASHDOTDOT]:"5.333,1.333,1.333,1.333,1.333,1.333"},l={color:"#000",opacity:1,width:1,linecap:"square",linejoin:"miter",miterlimit:4},u={color:[0,0,0,0],width:0,style:a.none},h={solid:g=>({color:g.colour,opacity:g.opacity}),none:()=>"transparent",horizontal:(g,b)=>s.pattern(5,5,_=>_.line(0,5/2,5,5/2)).stroke(b),vertical:(g,b)=>s.pattern(5,5,_=>_.line(5/2,0,5/2,5)).stroke(b),"forward-diagonal":(g,b)=>s.pattern(5,5,_=>{_.line(0,0,5,5).stroke(b),_.line(0,0,5,5).move(0,5).stroke(b),_.line(0,0,5,5).move(5,0).stroke(b)}),"backward-diagonal":(g,b)=>s.pattern(5,5,_=>{_.line(5,0,0,5).stroke(b),_.line(5,0,0,5).move(5/2,5/2).stroke(b),_.line(5,0,0,5).move(-5/2,-5/2).stroke(b)}),cross:(g,b)=>s.pattern(5,5,_=>{_.line(5/2,0,5/2,5).stroke(b),_.line(0,5/2,5,5/2).stroke(b)}),"diagonal-cross":(g,b)=>s.pattern(7,7,_=>{_.line(0,0,7,7).stroke(b),_.line(7,0,0,7).stroke(b)})},d={"simple-marker"(){const g=m(t.color);t.outline=t.outline||u;const b=m(t.outline.color),w=f({color:b.colour,opacity:b.opacity,width:t.outline.width,dasharray:a[t.outline.style]}),_=o[t.style](t).fill({color:g.colour,opacity:g.opacity}).stroke(w).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0);r.fitInto(_,r.CONTENT_SIZE)},"simple-line"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity,width:t.width,linecap:"butt",dasharray:a[t.style]}),w=r.CONTENT_PADDING,_=r.CONTAINER_SIZE-r.CONTENT_PADDING;s.line(w,w,_,_).stroke(b)},esriCLS(){this["simple-line"]()},"simple-fill"(){const g=m(t.color),b=f({color:g.colour,opacity:g.opacity}),w=h[t.style](g,b);t.outline=t.outline||u;const _=m(t.outline.color),x=f({color:_.colour,opacity:_.opacity,width:t.outline.width,linecap:"butt",dasharray:a[t.outline.style]});s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(w).stroke(x)},text(){console.error("no support for feature service legend of text symbols")},"picture-fill"(){const g=t.imageData?`data:${t.contentType};base64,${t.imageData}`:t.url,b=t.width*t.xscale,w=t.height*t.yscale;t.outline=t.outline||u;const _=m(t.outline.color),x=f({color:_.colour,opacity:_.opacity,width:t.outline.width,dasharray:a[t.outline.style]});return r.$iApi.geo.shared.convertImagetoDataURL(g).then(S=>{const T=s.pattern(b,w,$=>$.image(S,b,w));s.rect(r.CONTENT_SIZE,r.CONTENT_SIZE).center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).fill(T).stroke(x)})},"picture-marker"(){const g=t.source,b=g&&g.imageData?`data:${g.contentType};base64,${g.imageData}`:t.url;return r.$iApi.geo.shared.convertImagetoDataURL(b).then(_=>r.svgDrawImage(s,_)).then(({image:_})=>{_.center(r.CONTAINER_CENTER,r.CONTAINER_CENTER).rotate(t.angle||0),r.fitInto(_,r.CONTENT_IMAGE_SIZE)})}};try{return await Promise.resolve(d[t.type]()),window.document.body.removeChild(n),s.svg()}catch(g){return console.log(g),this.generateBlankSymbology()}function f(g){return Object.assign({},l,g)}function m(g){return g?{colour:`rgb(${g.r},${g.g},${g.b})`,opacity:g.a}:{colour:"rgb(0, 0, 0)",opacity:0}}}svgDrawImage(t,r,i=0,n=0,s=!0){return new Promise((a,l)=>{const u=t.image(r,i,n,s).loaded(h=>a({image:u,loader:h})).error(h=>{l(h),console.error(h)})})}fitInto(t,r){const i=t.node.getBoundingClientRect(),n=r/Math.max(i.width,i.height);n<1&&t.scale(n)}rendererToLegend(t){let r;const i=t.symbolUnits.slice(0);if(t.defaultUnit&&i.push(t.defaultUnit),t.falseRenderer)r=i.map(n=>[n]);else{const n=new Map;i.forEach(s=>{const o=n.get(s.label);o?o.push(s):n.set(s.label,[s])}),r=[],n.forEach(s=>r.push(s))}return r.map(n=>{const s=n[0],o={uid:this.$iApi.geo.shared.generateUUID(),label:s.label||"",definitionClause:n.length===1?s.definitionClause:`(${n.map(a=>a.definitionClause).join(" OR ")})`,svgcode:"",esriStandard:!0,visibility:!0,lastVisbility:!0,drawPromise:this.symbolToSvg(s.symbol).then(a=>{o.svgcode=a,n.forEach(l=>{l.svgCode=a})})};return o})}async getMapServerLegend(t){if(!t)throw new Error("Legend server request is missing the required url.");const r={query:{f:"json"}},i={layers:[]},[n,s]=await ly(Ee(`${t}/legend`,r));return s?s.data?s.data:(console.error(`Error loading legend data for ${t}`),i):(console.error(`Error loading legend for ${t}`,n),i)}mapServerLegendToRenderer(t,r){const i=t.layers.find(s=>s.layerId===r);let n;if(typeof i<"u")return n={type:"uniqueValue",field:"fakefield",uniqueValueInfos:i.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))},this.makeRenderer(W0(n),[],!0);throw new Error("attempted to make renderer from non-existing legend data")}mapServerLegendToRendererAll(t){const r=t.layers.map(n=>n.legend.map(s=>({label:s.label,value:s.label,symbol:{type:"esriPMS",imageData:s.imageData,contentType:s.contentType}}))),i={type:"uniqueValue",field:"fakefield",uniqueValueInfos:[].concat(...r)};return this.makeRenderer(W0(i),[],!0)}async mapServerToLocalLegend(t,r=void 0){const i=await this.getMapServerLegend(t);let n,s;return typeof r>"u"?(s=0,n=this.mapServerLegendToRendererAll(i)):(s=parseInt(r),n=this.mapServerLegendToRenderer(i,s)),this.rendererToLegend(n)}}class Let extends Gi{constructor(t){super(t)}async arcGisServerQueryIds(t){const r=new ni;r.returnGeometry=!1,t.filterSql&&(r.where=t.filterSql),t.filterGeometry&&(r.geometry=this.queryGeometryHelper(t.filterGeometry,!1,this.$iApi.geo.map.getScale(),t.sourceSR),r.spatialRelationship="intersects");const i=await m6(t.url,r);return Array.isArray(i)?i:[]}async geoJsonQuery(t){const r=new ni;if(r.returnGeometry=!!t.includeGeometry,r.outFields=["*"],t.filterGeometry&&(r.geometry=this.queryGeometryHelper(t.filterGeometry,!0),r.spatialRelationship="intersects"),t.filterSql&&(r.where=t.filterSql),await t.layer.isLayerLoaded(),!t.layer.esriLayer)throw new Error("file layer being queried contains no ESRI layer");return(await t.layer.esriLayer.queryFeatures(r)).features.map((n,s)=>{let o;return r.returnGeometry?o=this.$iApi.geo.geom.geomEsriToRamp(n.geometry,`queryResult${s}`):o=new a1,new hh(o,"",n.attributes)})}queryGeometryHelper(t,r,i,n){let s;return!r&&t.type===Vt.EXTENT?i&&n&&i>2e7&&t.sr.wkid===3978&&n.wkid===4326?s=t.toESRI():s=t.toPolygon().toESRI():s=t.toESRI(),s}makeClickBuffer(t,r=5){const i=this.$iApi.geo.map,n=i.getExtent(),s=r*(n.xmax-n.xmin)/i.getPixelWidth();return new Ei("ze_buffer",[t.x-s,t.y-s],[t.x+s,t.y+s],t.sr)}}class Net extends Gi{attributes;geom;layer;map;proj;query;shared;symbology;constructor(t){super(t),this.geom=R0.geom,this.proj=R0.proj,this.shared=R0.sharedUtils,this.map=new TKe(t),this.layer=new fet(t),this.attributes=new Eet(t),this.query=new Let(t),this.symbology=new Ret(t)}set proxy(t){Kt.request.proxyUrl=t}get proxy(){return Kt.request.proxyUrl||""}}const Det={"../fixtures/appbar/index.ts":()=>ae(()=>import("./index.9eec3654.js"),["assets/index.9eec3654.js","assets/index.f59ad6cb.css"]),"../fixtures/basemap/index.ts":()=>ae(()=>import("./index.7c8e0136.js"),["assets/index.7c8e0136.js","assets/screen.fe7e8229.js","assets/screen.e4ca94e0.css"]),"../fixtures/crosshairs/index.ts":()=>ae(()=>import("./index.b34a898d.js"),["assets/index.b34a898d.js","assets/index.541c086d.css"]),"../fixtures/details/index.ts":()=>ae(()=>import("./index.6e3465cb.js"),["assets/index.6e3465cb.js","assets/index.f1b03980.css","assets/linkify-html.module.38598c19.js"]),"../fixtures/export/index.ts":()=>ae(()=>import("./index.a2bc3c31.js"),["assets/index.a2bc3c31.js","assets/screen.fbf9a6ca.js","assets/fabric.5a464114.js"]),"../fixtures/export-legend/index.ts":()=>ae(()=>import("./index.f75ac771.js"),["assets/index.f75ac771.js","assets/fabric.5a464114.js"]),"../fixtures/export-map/index.ts":()=>ae(()=>import("./index.67ef5d44.js"),["assets/index.67ef5d44.js","assets/fabric.5a464114.js"]),"../fixtures/export-northarrow/index.ts":()=>ae(()=>import("./index.6f0b49a2.js"),["assets/index.6f0b49a2.js","assets/fabric.5a464114.js"]),"../fixtures/export-scalebar/index.ts":()=>ae(()=>import("./index.2e6bc2aa.js"),["assets/index.2e6bc2aa.js","assets/fabric.5a464114.js"]),"../fixtures/export-title/index.ts":()=>ae(()=>import("./index.e33e9655.js"),["assets/index.e33e9655.js","assets/fabric.5a464114.js"]),"../fixtures/gazebo/index.ts":()=>ae(()=>import("./index.7ec7720f.js"),[]),"../fixtures/geosearch/index.ts":()=>ae(()=>import("./index.ed9fdc64.js"),["assets/index.ed9fdc64.js","assets/screen.6d21cefc.js","assets/screen.41b131f7.css"]),"../fixtures/grid/index.ts":()=>ae(()=>import("./index.3e1e7a45.js"),["assets/index.3e1e7a45.js","assets/screen.1ba7d19d.js","assets/screen.c38c232f.css","assets/linkify-html.module.38598c19.js"]),"../fixtures/help/index.ts":()=>ae(()=>import("./index.5180cae2.js"),["assets/index.5180cae2.js","assets/screen.87cbabe8.js","assets/screen.a0a11c9d.css"]),"../fixtures/layer-reorder/index.ts":()=>ae(()=>import("./index.03d6ebfd.js"),["assets/index.03d6ebfd.js","assets/screen.4ed5ac88.js","assets/screen.00d0af0d.css","assets/vue.esm-bundler.b573f284.js"]),"../fixtures/legend/index.ts":()=>ae(()=>import("./index.19aaa3fc.js"),["assets/index.19aaa3fc.js","assets/screen.f4b61a2e.js"]),"../fixtures/mapnav/index.ts":()=>ae(()=>import("./index.8ade57a8.js"),["assets/index.8ade57a8.js","assets/index.99f7d66c.css"]),"../fixtures/metadata/index.ts":()=>ae(()=>import("./index.b6f21526.js"),["assets/index.b6f21526.js","assets/screen.45322c19.js"]),"../fixtures/northarrow/index.ts":()=>ae(()=>import("./index.8841d71a.js"),[]),"../fixtures/overviewmap/index.ts":()=>ae(()=>import("./index.d2d17bea.js"),["assets/index.d2d17bea.js","assets/index.fe8f538f.css"]),"../fixtures/panguard/index.ts":()=>ae(()=>import("./index.9159db9b.js"),["assets/index.9159db9b.js","assets/index.cecdd8d2.css"]),"../fixtures/scrollguard/index.ts":()=>ae(()=>import("./index.6ba60f19.js"),["assets/index.6ba60f19.js","assets/index.a709bb58.css"]),"../fixtures/settings/index.ts":()=>ae(()=>import("./index.002558f7.js"),["assets/index.002558f7.js","assets/screen.e428f667.js","assets/screen.c780a774.css","assets/vue.esm-bundler.b573f284.js"]),"../fixtures/snowman/index.ts":()=>ae(()=>import("./index.0e3fee56.js"),[]),"../fixtures/wizard/index.ts":()=>ae(()=>import("./index.3d96f7b8.js"),["assets/index.3d96f7b8.js","assets/screen.be311bec.js","assets/screen.ba8deaf0.css"])};class Fet extends Gi{constructor(t){super(t);const r=()=>{const i=this.$vApp.$store.get("fixture/items");Object.keys(i).forEach(n=>{i[n].initialized?.()})};this.$iApi.event.on(vt.MAP_CREATED,r)}async add(t,r){let i;if(t in this.$vApp.$store.get("fixture/items"))return this.get(t);if(r){if(typeof r!="function")throw new Error("malformed fixture constructor");i=LF.updateBaseToInstance(new r,t,this.$iApi)}else{const n=(await Det[`../fixtures/${t}/index.ts`]()).default;i=new n(t,this.$iApi)}return this.$vApp.$store.set(`fixture/${gL.ADD_FIXTURE}!`,{value:i}),this.$iApi.event.emit(vt.FIXTURE_ADDED,i),this.$iApi.geo.map.created&&i.initialized?.(),i}remove(t){const r=this.get(t);if(!r)throw new Error(`Could not find fixture ${t} for removal`);return this.$vApp.$store.set(`fixture/${gL.REMOVE_FIXTURE}!`,{value:r}),this.$iApi.event.emit(vt.FIXTURE_REMOVED,r),r}get(t){const r=[];typeof t=="string"?r.push(t):Array.isArray(t)?r.push(...t):r.push(t.id);const i=r.map(n=>{const s=this.$vApp.$store.get(`fixture/items@${n}`);if(!!s)return s});return i.length===1?i[0]:i}addDefaultFixtures(t){return(!Array.isArray(t)||t.length===0)&&(t=["appbar","basemap","crosshairs","details","geosearch","grid","help","layer-reorder","legend","mapnav","metadata","northarrow","overviewmap","scrollguard","panguard","settings","wizard"]),Promise.all(t.map(r=>this.add(r)))}}class LF extends Gi{static updateBaseToInstance(t,r,i){const n=new LF(r,i);return Object.defineProperties(t,{id:{value:r},$iApi:{value:i},$vApp:{get(){return n.$vApp}},remove:{value:n.remove},extend:{value:n.extend},config:{get(){return n.config}},mount:{value:n.mount}}),t}id;constructor(t,r){super(r),this.id=t}remove(){return this.$iApi.fixture.remove(this),this}extend(t,r={}){const i=tr({extends:t,iApi:this.$iApi,data(){return{...r}}}),n=SE(i),{vNode:s,destroy:o,el:a}=this.mount(i,{props:{...r.propsData},app:n});return a}mount(t,{props:r,children:i,element:n,app:s}={}){let o=n,a=qs(t,r,i);return s&&s._context&&(a.appContext=s._context),o?uh(a,o):uh(a,o=document.createElement("div")),{vNode:a,destroy:()=>{o&&uh(null,o),o=null,a=null},el:o}}get config(){return this.$vApp.$store.get("config/getFixtureConfig",this.id)}getLayerFixtureConfig(t){return this.getLayerFixtureConfigs()[t]}getLayerFixtureConfigs(){let t=this.$iApi.getConfig(),r={};const i=(n,s=void 0)=>{if(n.fixtures&&n.fixtures[this.id]!==void 0){let o=n.id;s!==void 0&&(o=`${s.id}-${n.index}`),r[o]=n.fixtures[this.id]}n.layerEntries&&n.layerEntries.forEach(o=>i(o,n))};return t.layers.forEach(n=>i(n)),r}}class jet extends Gi{register(t,r){const i=Vet(t)?{[t.id]:t.config}:t;if(r){const s=r.i18n||{},o=this.$vApp.$i18n;Object.entries(s.messages||{}).forEach(a=>o.mergeLocaleMessage(...a)),Object.entries(s.dateTimeFormats||{}).forEach(a=>o.mergeDateTimeFormat(...a)),Object.entries(s.numberFormats||{}).forEach(a=>o.mergeNumberFormat(...a))}const n=Object.entries(i).reduce((s,[o,a])=>(s.push(new WS(this.$iApi,o,a)),s),[]);return n.forEach(s=>this.$vApp.$store.set(`panel/${vL.REGISTER_PANEL}!`,{panel:s})),n.length===1?n[0]:n.reduce((s,o)=>(s[o.id]=o,s),{})}remove(t){let r=this.get(t);r.isOpen&&this.close(r),this.$vApp.$store.set(`panel/${vL.REMOVE_PANEL}!`,{panel:r})}get(t){const r=typeof t=="string"?t:t.id;return this.$vApp.$store.get(`panel/items@${r}`)}open(t){let r,i,n;if(typeof t=="string"||t instanceof WS?r=this.get(t):(r=this.get(t.id),{screen:i,props:n}=t),r.isOpen&&!r.isVisible)r.minimize();else if(r.isOpen)return r;return i||(r.route&&!n?{screen:i,props:n}=r.route:i=Object.keys(r.screens).pop()),this.show(r,{screen:i,props:n}),this.$vApp.$store.set(`panel/${C3.openPanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.open",{name:this.$vApp.$t(r.alertName)})),this.$iApi.event.emit(vt.PANEL_OPENED,r),r}get opened(){return this.$vApp.$store.get("panel/orderedItems")}get visible(){return this.$vApp.$store.get("panel/visible")}close(t){const r=this.get(t);return r.isPinned&&r.pin(!1),this.$vApp.$store.set(`panel/${C3.closePanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.close",{name:this.$vApp.$t(r.alertName)})),this.$iApi.event.emit(vt.PANEL_CLOSED,r),r}minimize(t){const r=this.get(t);return r.isPinned&&r.pin(!1),this.$vApp.$store.set(`panel/${C3.closePanel}!`,{panel:r}),this.$iApi.updateAlert(this.$vApp.$t("panels.alert.minimize",{name:this.$vApp.$t(r.alertName)})),r}toggle(t,r){let i;return typeof t=="string"||t instanceof WS?i=this.get(t):i=this.get(t.id),r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(t):this.close(i)),i}toggleMinimize(t,r){let i;return typeof t=="string"||t instanceof WS?i=this.get(t):i=this.get(t.id),r=typeof r<"u"?r:!i.isVisible,r!==i.isVisible&&(r?this.open(i):this.minimize(i)),i}pin(t,r){const i=this.get(t);return r=typeof r<"u"?r:!i.isPinned,!i.isPinned&&!r||this.$vApp.$store.set("panel/pinned",r?i:null),i}get pinned(){return this.$vApp.$store.get("panel/pinned")||null}show(t,r){const i=this.get(t);return r.screen in this.$element._context.components||i.registerScreen(r.screen),this.$vApp.$store.set(`panel/items@${i.id}.route`,r),i}setStyle(t,r,i=!1){const n=this.get(t);return this.$vApp.$store.set(`panel/items@${n.id}.style`,i?r:{...n.style,...r}),n}expand(t,r){const i=this.get(t);return this.$vApp.$store.set(`panel/items@${i.id}.expanded`,r!==void 0?r:!i.expanded),i}}function Vet(e){return e.id!==void 0&&typeof e.id=="string"&&e.config!==void 0}const Uet=tr({name:"ScreenSpinnerV"}),zet=e=>(Th("data-v-ba864716"),e=e(),$h(),e),Bet=zet(()=>ke("div",{class:"loader"},null,-1));function Get(e,t,r,i,n,s){const o=or("panel-screen");return De(),zi(o,{header:!1,class:"screen-spinner"},{content:Pi(()=>[Yt(" TODO: fine a spinner that is actually good \u{1F38D} "),Bet]),_:1})}var qet=Ar(Uet,[["render",Get],["__scopeId","data-v-ba864716"],["__file","/home/runner/work/ramp4-pcar4/ramp4-pcar4/src/components/panel-stack/screen-spinner.vue"]]);const Het={"../fixtures/basemap/screen.vue":()=>ae(()=>import("./screen.fe7e8229.js"),["assets/screen.fe7e8229.js","assets/screen.e4ca94e0.css"]),"../fixtures/export/screen.vue":()=>ae(()=>import("./screen.fbf9a6ca.js").then(function(e){return e.s}),[]),"../fixtures/geosearch/screen.vue":()=>ae(()=>import("./screen.6d21cefc.js").then(function(e){return e.s}),["assets/screen.6d21cefc.js","assets/screen.41b131f7.css"]),"../fixtures/grid/screen.vue":()=>ae(()=>import("./screen.1ba7d19d.js"),["assets/screen.1ba7d19d.js","assets/screen.c38c232f.css","assets/linkify-html.module.38598c19.js"]),"../fixtures/help/screen.vue":()=>ae(()=>import("./screen.87cbabe8.js").then(function(e){return e.s}),["assets/screen.87cbabe8.js","assets/screen.a0a11c9d.css"]),"../fixtures/layer-reorder/screen.vue":()=>ae(()=>import("./screen.4ed5ac88.js"),["assets/screen.4ed5ac88.js","assets/screen.00d0af0d.css","assets/vue.esm-bundler.b573f284.js"]),"../fixtures/legend/screen.vue":()=>ae(()=>import("./screen.f4b61a2e.js"),[]),"../fixtures/metadata/screen.vue":()=>ae(()=>import("./screen.45322c19.js").then(function(e){return e.s}),[]),"../fixtures/settings/screen.vue":()=>ae(()=>import("./screen.e428f667.js"),["assets/screen.e428f667.js","assets/screen.c780a774.css","assets/vue.esm-bundler.b573f284.js"]),"../fixtures/wizard/screen.vue":()=>ae(()=>import("./screen.be311bec.js").then(function(e){return e.s}),["assets/screen.be311bec.js","assets/screen.ba8deaf0.css"])};class WS extends Gi{id;screens;loadedScreens=[];alertName;controls;isScreenLoaded(t){return this.loadedScreens.indexOf(t)!==-1}registerScreen(t){const r=this.screens[t];let i;if(bDe(r)||vDe(r))i=r,this.loadedScreens.push(t);else{let n;typeof r=="string"?n=Het[`../fixtures/${r}/screen.vue`]():n=r();const s=new Promise((o,a)=>{n.then(l=>{this.loadedScreens.push(t),o(wDe(l)?l.default:l)}),n.catch(l=>a(l))});i=dE({loader:()=>s,loadingComponent:qet,delay:200})}this.$iApi.$element.component(t,i)}style;expanded;get width(){if(!(!this.style.width||this.style.width.slice(-2)!=="px"))return parseInt(this.style.width)}route;constructor(t,r,i){if(super(t),{id:this.id,screens:this.screens,style:this.style,expanded:this.expanded,alertName:this.alertName,button:this.button,controls:this.controls}={id:r,style:{},expanded:!1,controls:{expand:!1,...i.controls},...i},Object.keys(this.screens).length===0)throw new Error("panel must have at least a single screen");this.route={screen:Object.keys(this.screens).pop()},this.style["flex-basis"]||(this.style["flex-basis"]=this.style.width||"350px"),this.style.width="100%"}open(t){return typeof t>"u"?this.$iApi.panel.open(this):this.$iApi.panel.open({id:this.id,...typeof t=="string"?{screen:t}:t}),this}get isOpen(){return this.$iApi.panel.opened.indexOf(this)!==-1}get isVisible(){return this.$iApi.panel.visible.indexOf(this)!==-1}close(){return this.$iApi.panel.close(this),this}minimize(){return this.$iApi.panel.minimize(this),this}remove(){return this.$iApi.panel.remove(this),this}toggle(t){return typeof t>"u"?this.$iApi.panel.toggle(this,!this.isOpen):typeof t=="boolean"?t!==this.isOpen&&this.$iApi.panel.toggle(this,t):this.$iApi.panel.toggle({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}toggleMinimize(t){return typeof t>"u"||typeof t=="boolean"?this.$iApi.panel.toggleMinimize(this,t):this.$iApi.panel.toggleMinimize({id:this.id,screen:t.screen,props:t.props},typeof t.toggle<"u"?t.toggle:!this.isOpen),this}pin(t){return t=typeof t<"u"?t:!this.isPinned,this.$iApi.panel.pin(this,t),this}get isPinned(){return this.$iApi.panel.pinned!==null&&this.$iApi.panel.pinned.id===this.id}show(t){const r=typeof t=="string"?{screen:t}:t;return this.route=r,this.$iApi.panel.show(this,r),this}setStyles(t,r=!1){return this.$iApi.panel.setStyle(this,t,r),this}expand(t){return this.$iApi.panel.expand(this,t),this}}const X1={major:"4",minor:"0",patch:"0-alpha",timestamp:"Thu Jun 16 15:55:17 2022 -0400",hash:"c25ad4fcbec607b751da23743d1223a1eb20e0f7"},Pit=(e,t,r)=>new wKe(e,t,r),R0=new gDe;export{OL as $,Jet as A,ms as B,Ee as C,Vn as D,Zs as E,Tn as F,oe as G,_c as H,TP as I,DT as J,xW as K,BQ as L,nt as M,me as N,Kr as O,_h as P,l$e as Q,si as R,Je as S,yH as T,ku as U,NH as V,xa as W,wl as X,Y3 as Y,vW as Z,ae as _,ge as a,Utt as a$,Kt as a0,$o as a1,WT as a2,Ev as a3,ma as a4,lp as a5,mtt as a6,kge as a7,prt as a8,PN as a9,ep as aA,wre as aB,L0 as aC,It as aD,c3 as aE,l8 as aF,Km as aG,z$ as aH,xu as aI,Sit as aJ,wit as aK,_it as aL,i_ as aM,xl as aN,FZ as aO,ro as aP,Ze as aQ,E6 as aR,Qd as aS,tn as aT,to as aU,KW as aV,QL as aW,eN as aX,oh as aY,Ke as aZ,B$ as a_,Ihe as aa,Cge as ab,Fv as ac,frt as ad,z0 as ae,oZ as af,nk as ag,mrt as ah,Mit as ai,Te as aj,yue as ak,vue as al,Yet as am,vtt as an,OA as ao,Sm as ap,Zr as aq,sn as ar,vre as as,$r as at,Ti as au,Vtt as av,pre as aw,rtt as ax,Lv as ay,Vr as az,r_ as b,kY as b$,Xte as b0,Fte as b1,tre as b2,ike as b3,yit as b4,mit as b5,tv as b6,git as b7,gi as b8,DH as b9,Wtt as bA,ztt as bB,XT as bC,SPe as bD,kme as bE,Ome as bF,wh as bG,Stt as bH,wrt as bI,_rt as bJ,brt as bK,cre as bL,m8 as bM,oR as bN,rv as bO,Nke as bP,hre as bQ,Lte as bR,are as bS,Rte as bT,Ake as bU,Btt as bV,vl as bW,my as bX,qtt as bY,btt as bZ,Le as b_,dtt as ba,Sl as bb,Ao as bc,Lm as bd,Qg as be,oN as bf,sN as bg,$J as bh,ym as bi,aN as bj,Mtt as bk,bde as bl,Mw as bm,em as bn,Oi as bo,Vrt as bp,Qs as bq,gfe as br,uX as bs,Wrt as bt,Qj as bu,aX as bv,Srt as bw,Lme as bx,WI as by,Mrt as bz,Pit as c,Yv as c$,Kve as c0,Xve as c1,Jg as c2,uw as c3,Ks as c4,Ll as c5,sh as c6,fz as c7,hit as c8,Os as c9,XN as cA,$L as cB,u2 as cC,xo as cD,Dke as cE,cj as cF,yxe as cG,dX as cH,ure as cI,Wg as cJ,vy as cK,BP as cL,Zt as cM,ye as cN,Vi as cO,Bu as cP,Lt as cQ,OX as cR,li as cS,tt as cT,Xr as cU,MW as cV,bY as cW,cue as cX,Wxe as cY,d$ as cZ,Zv as c_,HF as ca,Krt as cb,zrt as cc,Ht as cd,IL as ce,fbe as cf,mbe as cg,ybe as ch,JZ as ci,Ett as cj,_n as ck,Se as cl,g2 as cm,Xg as cn,Aye as co,l$ as cp,pX as cq,Grt as cr,Urt as cs,fX as ct,z2e as cu,Yrt as cv,dP as cw,Ige as cx,Xet as cy,Qet as cz,p as d,A$e as d$,Ip as d0,Ket as d1,c$ as d2,_2 as d3,Sh as d4,br as d5,Xv as d6,wo as d7,a$ as d8,VZ as d9,vn as dA,Xs as dB,Ku as dC,i3 as dD,S_ as dE,X6 as dF,PI as dG,OH as dH,eb as dI,Hr as dJ,X4e as dK,Xd as dL,Rn as dM,Y4e as dN,Ma as dO,PH as dP,att as dQ,i5e as dR,t5e as dS,r5e as dT,q4e as dU,z4e as dV,U4e as dW,Zm as dX,_o as dY,Zee as dZ,hy as d_,UZ as da,kN as db,Ltt as dc,nge as dd,Lrt as de,OW as df,ett as dg,up as dh,hH as di,ptt as dj,wH as dk,Wv as dl,J0e as dm,htt as dn,Gtt as dp,ZT as dq,Vu as dr,_te as ds,Cme as dt,PL as du,HT as dv,xp as dw,Nme as dx,os as dy,as as dz,c as e,Soe as e$,L4e as e0,F4e as e1,St as e2,Jee as e3,Sa as e4,K4e as e5,H4e as e6,KA as e7,Sy as e8,tN as e9,zi as eA,Pi as eB,ke as eC,Yt as eD,et as eE,Er as eF,xr as eG,xE as eH,cl as eI,Th as eJ,$h as eK,jr as eL,wHe as eM,hr as eN,Oy as eO,aD as eP,Mt as eQ,LF as eR,Tit as eS,Eit as eT,vt as eU,Gn as eV,ls as eW,_E as eX,Mse as eY,lh as eZ,zn as e_,Q4e as ea,e5e as eb,n5e as ec,Y6 as ed,o5e as ee,s5e as ef,a5e as eg,kW as eh,x_ as ei,O4e as ej,Z4e as ek,W4e as el,B4e as em,G4e as en,J4e as eo,c5e as ep,j6 as eq,cit as er,j4e as es,V4e as et,D4e as eu,N4e as ev,tr as ew,Ar as ex,or as ey,De as ez,ce as f,LT as f$,kit as f0,WS as f1,mm as f2,Oit as f3,_8 as f4,gs as f5,YR as f6,GRe as f7,ks as f8,Ui as f9,yr as fA,hh as fB,zd as fC,SKe as fD,WPe as fE,xKe as fF,nne as fG,sl as fH,Gi as fI,KI as fJ,Cm as fK,eo as fL,J8 as fM,mh as fN,Prt as fO,Vfe as fP,Gu as fQ,Dhe as fR,k4e as fS,Jtt as fT,trt as fU,Jrt as fV,Nwe as fW,Ntt as fX,WZ as fY,gN as fZ,crt as f_,eie as fa,$p as fb,kQe as fc,ZR as fd,Cit as fe,uh as ff,qs as fg,it as fh,U_ as fi,bD as fj,YJe as fk,j2 as fl,Wp as fm,Xi as fn,P3 as fo,BYe as fp,W2 as fq,Iit as fr,$it as fs,JR as ft,Po as fu,M3 as fv,Ait as fw,dE as fx,k0 as fy,hc as fz,R0 as g,mt as g$,Tu as g0,Ume as g1,G9 as g2,Ztt as g3,cte as g4,Wet as g5,Ttt as g6,qye as g7,EW as g8,Zrt as g9,lve as gA,uve as gB,$Y as gC,sve as gD,bpe as gE,art as gF,Rye as gG,fit as gH,TY as gI,A2 as gJ,jve as gK,$pe as gL,Fve as gM,Yde as gN,lrt as gO,ftt as gP,Pv as gQ,Rv as gR,Cke as gS,Oke as gT,wpe as gU,S9 as gV,Gke as gW,Qke as gX,Gye as gY,B0 as gZ,yo as g_,Frt as ga,cX as gb,nX as gc,mde as gd,_de as ge,ytt as gf,Hd as gg,ttt as gh,mH as gi,_Oe as gj,pH as gk,XW as gl,nC as gm,Yg as gn,itt as go,ntt as gp,tI as gq,rI as gr,fpe as gs,_tt as gt,Ape as gu,dw as gv,tJ as gw,gtt as gx,Fpe as gy,hJ as gz,xn as h,jt as h$,Dpe as h0,jpe as h1,qpe as h2,Ype as h3,Kpe as h4,uJ as h5,cJ as h6,Zpe as h7,rfe as h8,ife as h9,ort as hA,lw as hB,sxe as hC,Q2e as hD,Wj as hE,HK as hF,Hrt as hG,p0e as hH,Mge as hI,drt as hJ,zue as hK,WA as hL,RL as hM,X4 as hN,Q4 as hO,Zet as hP,IY as hQ,ar as hR,Nrt as hS,PA as hT,n0e as hU,vOe as hV,TOe as hW,Brt as hX,E$ as hY,stt as hZ,_pe as h_,Lpe as ha,Ld as hb,utt as hc,Z0 as hd,dH as he,ZK as hf,ni as hg,qK as hh,Drt as hi,qrt as hj,GK as hk,JK as hl,Htt as hm,ph as hn,g0 as ho,zY as hp,Fs as hq,yrt as hr,V0e as hs,jrt as ht,uN as hu,Dtt as hv,Ftt as hw,jtt as hx,F_e as hy,_Y as hz,N as i,rrt as i$,EN as i0,$ye as i1,qt as i2,Twe as i3,kj as i4,T2e as i5,gwe as i6,Ert as i7,_we as i8,Art as i9,E1e as iA,LY as iB,F1e as iC,CJ as iD,Att as iE,iue as iF,Ctt as iG,Ott as iH,ktt as iI,Ptt as iJ,n_ as iK,wa as iL,Xfe as iM,Rb as iN,Rtt as iO,fy as iP,W0 as iQ,lW as iR,_m as iS,Crt as iT,Trt as iU,sr as iV,Xrt as iW,dke as iX,krt as iY,Lwe as iZ,Ort as i_,Mxe as ia,Ud as ib,n8 as ic,pz as id,zI as ie,EAe as ig,hue as ih,oit as ii,sit as ij,whe as ik,GL as il,Cfe as im,cs as io,xrt as ip,I$ as iq,aj as ir,qf as is,vit as it,bit as iu,Rm as iv,l2 as iw,yh as ix,Z3 as iy,iv as iz,P0e as j,A1e as j$,Itt as j0,po as j1,Vj as j2,rOe as j3,qc as j4,hQ as j5,EIe as j6,lit as j7,uit as j8,ait as j9,ohe as jA,QJ as jB,lIe as jC,UN as jD,Kd as jE,jL as jF,vrt as jG,N1e as jH,FY as jI,Z0e as jJ,zN as jK,K0e as jL,X0e as jM,wN as jN,ESe as jO,ISe as jP,R9 as jQ,jn as jR,t_ as jS,HN as jT,vs as jU,jo as jV,Zd as jW,zu as jX,Sp as jY,B1e as jZ,w$ as j_,MMe as ja,TMe as jb,Ktt as jc,irt as jd,nrt as je,zm as jf,p2 as jg,xit as jh,ua as ji,Ct as jj,pit as jk,zL as jl,Qde as jm,lI as jn,by as jo,wy as jp,Kv as jq,Hk as jr,grt as js,M$ as jt,QN as ju,NY as jv,KZ as jw,_$ as jx,xbe as jy,Ys as jz,CSe as k,V1e as k$,x$ as k0,j9 as k1,AJ as k2,bbe as k3,DY as k4,S$ as k5,Q7 as k6,ww as k7,RN as k8,L1e as k9,h6 as kA,Ywe as kB,Yd as kC,eP as kD,KH as kE,Ds as kF,Eo as kG,Yme as kH,JT as kI,FT as kJ,srt as kK,dit as kL,a2 as kM,FN as kN,i0e as kO,ott as kP,zv as kQ,Bbe as kR,F9 as kS,JJ as kT,h$ as kU,jM as kV,J7 as kW,ZY as kX,u_ as kY,XZ as kZ,qv as k_,YN as ka,KN as kb,ze as kc,rP as kd,QO as ke,Y0e as kf,w2e as kg,Rrt as kh,kK as ki,s2e as kj,h_e as kk,s6 as kl,c_e as km,p_e as kn,Ew as ko,Irt as kp,t2e as kq,Gxe as kr,Ja as ks,$rt as kt,T$ as ku,A_e as kv,c6 as kw,b0 as kx,C_e as ky,T_e as kz,ie as l,Qrt as l$,j1e as l0,Cv as l1,SZ as l2,s2 as l3,Ov as l4,_l as l5,gW as l6,wt as l7,D1e as l8,ltt as l9,Bhe as lA,wtt as lB,Xtt as lC,Qtt as lD,w8 as lE,o1 as lF,iJ as lG,xtt as lH,Vve as lI,p$ as lJ,yI as lK,Ytt as lL,Kde as lM,ert as lN,eJ as lO,ctt as lP,yve as lQ,uce as lR,F3 as lS,WCe as lT,Xde as lU,YPe as lV,YW as lW,y1 as lX,tde as lY,hrt as lZ,zbe as l_,L as la,urt as lb,zxe as lc,wX as ld,u5e as le,RY as lf,Bm as lg,l5e as lh,boe as li,fi as lj,Xa as lk,gn as ll,cD as lm,ly as ln,_ne as lo,ZN as lp,$tt as lq,cp as lr,FJ as ls,Um as lt,BY as lu,Bre as lv,mpe as lw,rJ as lx,dy as ly,pue as lz,Lo as m,eit as m0,tit as m1,rit as m2,iit as m3,nit as m4,Ro as n,lt as o,Fe as p,LH as q,U as r,Z as s,$be as t,Sr as u,_y as v,cbe as w,hbe as x,bs as y,dbe as z};
